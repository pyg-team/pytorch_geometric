Title: IBM InfoSphere Change Data Capture we are experiencing high cpu utilization that is impacting our Subscription latency.  What checks can we perform to identify the cause? - United States

Text:
IBM InfoSphere Change Data Capture we are experiencing high cpu utilization that is impacting our Subscription latency. What checks can we perform to identify the cause?; CPU Spike of the CDC address space causing latency and performance issue.IBM InfoSphere Data Replication Performance Tuning CDC z/OS for Mere Mortals. TECHNOTE (TROUBLESHOOTING)

THIS DOCUMENT APPLIES ONLY TO THE FOLLOWING LANGUAGE VERSION(S):
 English 

PROBLEM(ABSTRACT)
 IBM InfoSphere Change Data Capture we are experiencing high cpu utilization that is impacting our Subscription latency. What checks can we perform to identify the cause? 

SYMPTOM
CPU Spike of the CDC address space causing latency and performance issue.


RESOLVING THE PROBLEM
Please check the following: 

1) If you have configured large numbers of Subscriptions - many with a single table per Subscription and you have not configured the log cache so each Subscription will read directly from the IFI. You should ask our Support team to send you the IBM InfoSphere Data Replication Performance Tuning CDC z/OS for Mere Mortals this document will help you tune your CDC Z/OS and improve your performance and latency as well. 

2) If you have multiple tables with the same name under different schemas and your target is DataStage using flat files and the naming convention does not allow for two tables with the same name in a single subscription. You can specify different directories for each of the table. You can specify the respective schema name as the directory for each of the mappings to easily identify the flat file. 
3) There are additional parameters to configure the log cache: 
CACHEBLOCKSIZE (link to the documentation) 
CACHELEVEL1RESERVED 
CACHELEVEL1SIZE 

4) In order to use the cache, you will also need to create the VSAM data set which comprises the level 2 cache. Sample JCL is included with CDC to run the CHCCRCCH job to create the data set. 
LOGPOLLINTERVAL - if you are in a data sharing group, the default (5,ALWAYS) should be fine. Otherwise, it should just be set to (5) 

LOGCACHEDELAY - only needs to be set if there are periods of low volume. Set between 2 and 5 seconds.

BUFTHRESHOLD - the default for this parameter is a good place to start. 

Also, we would recommend that you configure the log cache and reduce the number of Subscriptions where possible and then measure the CPU usage. If there are still concerns after that with CPU use and/or latency, you would consider adjusting some of the other parameters. 

5) We would recommend that you enable SMF data collection. If the steps taken above do not resolve things to your satisfaction, this data collection will enable support to see what is happening in your environment if you require further assistance with setting up CDC to run efficiently in your environment. 

SMFTYPE - any number of your choice between 128 and 255 (you would want to use one that's not in use by other SMF collection) -- also to identify the records 

SMFINTERVAL - the interval at which CDC will record data. Set this to 1 to record data at 1 minute intervals.