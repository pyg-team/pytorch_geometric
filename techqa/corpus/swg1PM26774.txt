Title: IBM PM26774: REQUEST ARE ROUTED TO THE WRONG SERVANT WHEN THE COOKIE NAME IS CHANGED FROM JSESSIONID AT THE APPLICATION LEVEL. - United States

Text:
z/os  A FIX IS AVAILABLE
Obtain the fix for this APAR.


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  The z-native code relys on retrieving the cookie name from
   server.xml if the cookie name is changed to something different
   than JSESSIONID.
   
   When the cookie name is set at application level it is placed in
   the deployment.xml of the application and the z-native code is
   unable to handle the change in cookie name and route the request
   incorrectly.
   
   
    
   
   

LOCAL FIX
 *  Set the cookie name at the server level.
   
   
    
   
   

PROBLEM SUMMARY
 *  ****************************************************************
   * USERS AFFECTED:  All users of IBM WebSphere Application      *
   *                  Server V7.0                                 *
   ****************************************************************
   * PROBLEM DESCRIPTION: A WebSphere Application Server for z/OS *
   *                      server running with multiple Servants   *
   *                      does not route HTTP requests with       *
   *                      session affinity to the proper Servant. *
   ****************************************************************
   * RECOMMENDATION:                                              *
   ****************************************************************
   By default, the name of the cookie that carries session affinity
   information is JSESSIONID, however this value can be overridden
   for a specific application or web module.
   
   When a WebSphere for z/OS Controller routes HTTP requests to a
   Servant, it looks for session affinity information in the cookie
   name that is specified at the server level; it does not check
   if the session cookie name is overridden at another level.
   
   Thus, if the option to override the session cookie name at the
   application or web module level is enabled, WebSphere
   Application Server for z/OS servers with more than one Servant
   will not be able to route HTTP requests for that application or
   module to the right Servant.
   
   
    
   
   

PROBLEM CONCLUSION
 *  Code was changed so that when the JVM Custom Property
   com.ibm.ws390.routing.EnableCustomSessionCookieName is set to
   true, the Controller properly checks for an overridden session
   cookie name at the application or web module level for each
   request.
   
   APAR PM26672 [http://www-01.ibm.com/support/docview.wss?uid=swg1PM26672] APAR requires changes to documentation.
   
   NOTE: Periodically, we refresh the documentation on our
   Web site, so the changes might have been made before you
   read this text. To access the latest on-line
   documentation, go to the product library page at:
   
   http://www.ibm.com/software/webservers/appserv/library [http://www.ibm.com/software/webservers/appserv/library]
   
   The following changes to the z/OS version of the WebSphere
   Application Server Version 7.0 Information Center will be
   made available in September, 2011.
   
   The following Avoid Trouble note will be added to the
   description of the Enable cookies mechanism in the
   "Session management settings" topic:
   
   Avoid Trouble: If you are running with multiple servants
   enabled, and the session management configuration setting
   for the session cookie name might be overridden at either
   the application or web module level, you must set the
   com.ibm.ws390.routing.EnableCustomSessionCookieName custom
   property to true to enable the controller to continue
   routing requests to the proper servant. If
   com.ibm.ws390.routing.EnableCustomSessionCookieName=true is
   not added to the session management configuration for the
   controller before the session cookie name changes, the
   controller will not be able to properly route requests to
   the affected servants. See the topic "Java Virtual Machine
   custom properties" for more information about this property.
   
   
   The following information will be added to the
   topic "Java Virtual Machine custom properties":
   
   com.ibm.ws390.routing.EnableCustomSessionCookieName
   
   Use this property to enable routing of requests from the
   controller to the proper servant in a situation where, in
   a multiple servant environment, you are overriding the
   default value for the session cookie name at either the
   application or web module level. The default session
   management configuration setting for the session cookie
   name is JSESSIONID.
   
   If you are running with multiple servants enabled, and
   the session management configuration setting for the
   session cookie name might be overridden at either the
   application or web module level, you must set the
   com.ibm.ws390.routing.EnableCustomSessionCookieName
   custom property to true to enable the controller to
   continue routing requests to the proper servant. If
   com.ibm.ws390.routing.EnableCustomSessionCookieName=true
   is not added to the session management configuration for
   the controller before the session cookie name changes,
   the controller will not be able to properly route
   requests to the affected servants.
   
   This custom property must be set for the controller.
   When specified, this setting applies to all of the
   servants associated with that controller.
   
   This custom property is not required if you are running
   in a single servant environment.
   
   The default value for this property is false.
   
   APAR PM26774 is currently targeted for inclusion in Service
   Level (Fix Pack) 7.0.0.19 of WebSphere Application Server V7.0.
   
   Please refer to URL:
   //www.ibm.com/support/docview.wss?rs=404&uid=swg27006970
   for Fix Pack availability.
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   PM26774
   
   
 * REPORTED COMPONENT NAME
   WEBSPHERE FOR Z
   
   
 * REPORTED COMPONENT ID
   5655I3500
   
   
 * REPORTED RELEASE
   700
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2010-11-15
   
   
 * CLOSED DATE
   2011-05-24
   
   
 * LAST MODIFIED DATE
   2011-10-04
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
    PM26672 [http://www-01.ibm.com/support/docview.wss?uid=swg1PM26672]
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   WEBSPHERE FOR Z
   
   
 * FIXED COMPONENT ID
   5655I3500
   
   

APPLICABLE COMPONENT LEVELS
 * R700 PSY UK71280 [HTTPS://WWW14.SOFTWARE.IBM.COM/WEBAPP/SET2/ORDERMEDIA/SHOPCART?PTFS=UK71280]
   UP11/09/10 P F109
   
   

FIX IS AVAILABLE
 * SELECT THE PTF APPROPRIATE FOR YOUR COMPONENT LEVEL. YOU WILL BE REQUIRED TO SIGN IN. DISTRIBUTION ON PHYSICAL MEDIA IS NOT AVAILABLE IN ALL COUNTRIES.