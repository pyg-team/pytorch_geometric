Title: IBM IlrDeployRuleAppException when deploying RuleApp from Rule Designer to Rule Execution Server - United States

Text:
ilog.rules.res.tools.http.IlrDeployRuleAppException; ilog.rules.res.tools.http.IlrRemoteConnection.deployRuleAppArchiveWithXOM(IlrRemoteConnection.java:150); Caused by: java.sql.SQLDataException: A truncation error was encountered trying to shrink VARCHAR 'resuri://..; resuri://a..; r&' to length 2000. ... 45 more TECHNOTE (FAQ)

QUESTION
 Why do I get an error message "IlrDeployRuleAppException: Error during the import of RuleApps" when deploying a RuleApp to Rule Execution Server. 

CAUSE
When you deploy a RuleApp, the referenced JAR files in the RuleApp are listed as a URI under the property "ruleset.managedxom.uris". This property is stored as a VARCHAR inside the database. Databases have a set limit on the number of characters in the VARCHAR data type, therefore the exception is thrown if the URI exceeds this limit.

ANSWER
To solve this problem, you can use the XOM as Library in the Rule Execution Server console. 


The first step is to disable the export of the referenced XOM JAR libraries from the rule project to the XOM Path, from which the RuleApp is generated. This creates an empty XOM Path Entry, which allows you to deploy the RuleApp to Rule Execution Server. 

To prevent the export of the libraries to the XOM Path:


 1. In Rule Designer, in the Rule Explorer view, right-click the rule project, and click Properties. 
 2. Click Java Execution Object Model in the list of properties. 
 3. To display a list of all selected Java XOM entries, click the Order and Export tab. 
 4. Clear the check boxes that correspond to the libraries, and then click OK.


Once the RuleApp is deployed, you must add the XOM as a library URI in the Rule Execution Server console. 

To add the XOM as a library URI: 

1. Deploy the XOM to Rule Execution Server, using "Deploy Resource" in the Rule Execution Server console. 
For more information on how to deploy a resource, see:
http://pic.dhe.ibm.com/infocenter/dmanager/v7r5/index.jsp?topic=%2Fcom.ibm.dserver.res%2FContent%2FBusiness_Rules%2F_pubskel%2FInfocenter_Primary%2Fps_DS_RES_Console_OH1668.html [http://pic.dhe.ibm.com/infocenter/dmanager/v7r5/index.jsp?topic=%2Fcom.ibm.dserver.res%2FContent%2FBusiness_Rules%2F_pubskel%2FInfocenter_Primary%2Fps_DS_RES_Console_OH1668.html] 

Deploying a large number of XOM files to Rule Execution Server can get cumbersome. To speed up the task, use the ANT task "res-deploy-xom" if possible. 
For more information on how to use the res-deploy-xom Ant task, see:
http://pic.dhe.ibm.com/infocenter/dmanager/v7r5/topic/com.ibm.dserver.reference.res/Content/Business_Rules/_pubskel/Infocenter_Primary/ps_DS_Reference_RES2064.html [http://pic.dhe.ibm.com/infocenter/dmanager/v7r5/topic/com.ibm.dserver.reference.res/Content/Business_Rules/_pubskel/Infocenter_Primary/ps_DS_Reference_RES2064.html] 

2. After deploying the XOM, add a Library as described in the following documentation: 

http://pic.dhe.ibm.com/infocenter/dmanager/v7r5/index.jsp?topic=%2Fcom.ibm.dserver.res%2FContent%2FBusiness_Rules%2F_pubskel%2FInfocenter_Primary%2Fps_DS_RES_Console_OH1675.html [http://pic.dhe.ibm.com/infocenter/dmanager/v7r5/index.jsp?topic=%2Fcom.ibm.dserver.res%2FContent%2FBusiness_Rules%2F_pubskel%2FInfocenter_Primary%2Fps_DS_RES_Console_OH1675.html] 

3. After adding a Library, add the deployed XOM to this library, as described in the following documentation:
http://pic.dhe.ibm.com/infocenter/dmanager/v7r5/index.jsp?topic=%2Fcom.ibm.dserver.res%2FContent%2FBusiness_Rules%2F_pubskel%2FInfocenter_Primary%2Fps_DS_RES_Console_OH1676.html [http://pic.dhe.ibm.com/infocenter/dmanager/v7r5/index.jsp?topic=%2Fcom.ibm.dserver.res%2FContent%2FBusiness_Rules%2F_pubskel%2FInfocenter_Primary%2Fps_DS_RES_Console_OH1676.html] 

4. Add the "ruleset.managedxom.uris" property to the deployed RuleApp and point it to the newly created library. You must specify the name of the library in the format: "reslib://NewLibrary", where "NewLibrary" is the name of the library that you just added.