Title: IBM IV21439: SDK Developer's Guide does not provide enough detail on ApplicationTemplates and the RemoveAppTemplate method. - United States

Text:
 SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS DOCUMENTATION ERROR.
    
   
   

ERROR DESCRIPTION
 *  The following information about AppTemplates is not covered in
   the SDK guide and is essential to properly removing the objects
   associated with the AppTemplates:
   
   ------------------------------
   When you call api.createAppTemplate() for the first time, it
   creates a
   AppTemplate object with corresponding MQLRule objects. In next
   step, a
   topology building agent creates business application for this
   application template if one with this name does not yet exist.
   This
   business application has to be created (if it does not already
   exist) when creating the application template as it is the
   business
   application object (rather than that application template) that
   is externalized in the user interface.  If a business
   application
   already exists with the name of the application template, then
   this
   business application is associated with this application
   template.  Th
   api.removeAppTemplate() call only removes the application
   template (an
   not the associated business application definition) because this
   application application may have already existed and deletion of
   it ma
   not be desired or expected.  It's also important to note that
   removing
   the application templates does not remove MQL rules which are
   just
   associated with the deleted template.  So, an complete example
   that
   removes an application template and all of its associated
   objects (MQL
   rules and business application) needs to look like:
   
   
   # Get application template
   appTemplate = api.getAppTemplate(nameBA, 0)
   
   # Get rules of the application template
   rules = appTemplate.getMQLRules()
   
   # Remove application template -> removes just AppTemplate object
   api.removeAppTemplate(appTemplate.getAppTemplateName(),
   appTemplate.getAppTemplateType())
   
   
   # Remove all rules
   for rule in rules:
                   rule = api.find(rule.getGuid(), 1, None)
                   api.removeMQLRule(rule.getMQLRuleName())
   
   # Remove business application
   businessApp = api.find("Select * from Application where name ==
   '" +
   appTemplate.getAppTemplateName()+ "'", False, None,
   None)
   api.delete(businessApp, None)
   ------------------------------
   
   
    
   
   

LOCAL FIX
 *  n/a
   
   
    
   
   

PROBLEM SUMMARY
 *  The following information about AppTemplates is not covered in
   the SDK guide and is essential to properly removing the objects
   associated with the AppTemplates:
   
   ------------------------------
   When you call api.createAppTemplate() for the first time, it
   creates a
   AppTemplate object with corresponding MQLRule objects. In next
   step, a
   topology building agent creates business application for this
   application template if one with this name does not yet exist.
   This
   business application has to be created (if it does not already
   exist) when creating the application template as it is the
   business
   application object (rather than that application template) that
   is externalized in the user interface.  If a business
   application
   already exists with the name of the application template, then
   this
   business application is associated with this application
   template.  Th
   api.removeAppTemplate() call only removes the application
   template (an
   not the associated business application definition) because this
   application application may have already existed and deletion of
   it ma
   not be desired or expected.  It's also important to note that
   removing
   the application templates does not remove MQL rules which are
   just
   associated with the deleted template.  So, an complete example
   that
   removes an application template and all of its associated
   objects (MQL
   rules and business application) needs to look like:
   
   
   # Get application template
   appTemplate = api.getAppTemplate(nameBA, 0)
   
   # Get rules of the application template
   rules = appTemplate.getMQLRules()
   
   # Remove application template -> removes just AppTemplate object
   api.removeAppTemplate(appTemplate.getAppTemplateName(),
   appTemplate.getAppTemplateType())
   
   
   # Remove all rules
   for rule in rules:
                   rule = api.find(rule.getGuid(), 1, None)
                   api.removeMQLRule(rule.getMQLRuleName())
   
   # Remove business application
   businessApp = api.find("Select * from Application where name ==
   '" +
   appTemplate.getAppTemplateName()+ "'", False, None,
   None)
   api.delete(businessApp, None)
   
   
    
   
   

PROBLEM CONCLUSION
 *  The following changes will be made in the next release of the
   publications
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   IV21439
   
   
 * REPORTED COMPONENT NAME
   APP DEPENDENCY
   
   
 * REPORTED COMPONENT ID
   5724N5500
   
   
 * REPORTED RELEASE
   721
   
   
 * STATUS
   CLOSED DOC
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2012-05-17
   
   
 * CLOSED DATE
   2012-09-14
   
   
 * LAST MODIFIED DATE
   2012-09-14
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION

APPLICABLE COMPONENT LEVELS