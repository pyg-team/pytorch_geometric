Title: IBM Attempt to select any of the dashboard options and admin console post javax.servlet.ServletException: /jsp/header.jsp - United States

Text:
STERLINGNFX TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 Attempt to select any of the dashboard options and admin console post javax.servlet.ServletException: /jsp/header.jsp 

SYMPTOM


On occasions, attempt to access/select any of the dashboard options (ie Current Processes) and is unable to get admin console to paint in dashboard, receives error "Processing error has occurred. Please contact system administrator and check logs for more details.: javax.servlet.ServletException: /jsp/header.jsp". When the problem is present, it can be reproduced by logging in to the dashboard and then attempting to select any of the admin options (ie Current Processes). Once one of the dashboard options is selected, then the error appears. The customer is unable to recreate this error at will and the only way to clear this problem, once it occurs, is to stop/start GIS. Running GIS: 4.3 Build Number: 4318_BR47880_SR187047 on Linux, no SFG. Linux OS parm open files (-n) set to 8192. In the Oct 19 GIS Mailbox logs provided it contained multiple ‘Too many open files’ errors, logged just prior to the jsp errors occurring in the dashboard. The noapp and ui logs post the same jsp error that is posted in the ui.
When the problem occurs, they are normally logged on to the /dashboard using port 10033 and receives the jsp error after they attempts to select any of the admin features; such as Current Processes. 
During the downage, they verified that his other GIS users (not logged on as admin) experienced the same jsp error problem. 
The last time this problem occurred he was logged on to the /dashboard using port 10033, he did move forward and opened a new session and logged on to /ws at port 10000 (using a different HTTP Server adapter) and he experienced the exact same error as using port 10033. So this customer has already tested with using a different HTTP Server adapter to see if it also gets the same error and it does. 

Error Message Dashboard admin post "An error has occurred. Please contact system administrator and check logs for more details.: javax.servlet.ServletException: /jsp/header.jsp".

The noapp and ui logs post the same jsp error that is posted in the ui.

The UI.Log for 10/19/09 post multiple errors of : 
[2009-10-19 10:14:43.017] ERROR 000000000000 GLOBAL_SCOPE Error 
javax.servlet.ServletException: /jsp/header.jsp 
at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:239) 
at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:295) 
at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:241) 
at javax.servlet.http.HttpServlet.service(HttpServlet.java:853) 
at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:358) 
at org.mortbay.jetty.servlet.WebApplicationHandler.dispatch(WebApplicationHandler.j ava:294) 
at org.mortbay.jetty.servlet.Dispatcher.dispatch(Dispatcher.java:222) 
at org.mortbay.jetty.servlet.Dispatcher.include(Dispatcher.java:127) 
at org.apache.jasper.runtime.JspRuntimeLibrary.include(JspRuntimeLibrary.java:822) 
at org.apache.jsp.bpmonitorsummary_jsp._jspService(bpmonitorsummary_jsp.java:263) 
at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:137) 
at javax.servlet.http.HttpServlet.service(HttpServlet.java:853) 
at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:210) 
at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:295) 
at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:241) 
at javax.servlet.http.HttpServlet.service(HttpServlet.java:853) 
at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:358) 
at org.mortbay.jetty.servlet.WebApplicationHandler.dispatch(WebApplicationHandler.j ava:294) 
at org.mortbay.jetty.servlet.Dispatcher.dispatch(Dispatcher.java:222) 
at org.mortbay.jetty.servlet.Dispatcher.forward(Dispatcher.java:135) 
at com.sterlingcommerce.woodstock.ui.servlet.ServletBase.gotoPage(ServletBase.java: 287) 
at com.sterlingcommerce.woodstock.ui.servlet.BPMonitor.doPost(BPMonitor.java:818) 
at com.sterlingcommerce.woodstock.ui.servlet.ServletBase.doGet(ServletBase.java:153 ) 
at javax.servlet.http.HttpServlet.service(HttpServlet.java:740) 
at javax.servlet.http.HttpServlet.service(HttpServlet.java:853) 
at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:358) 
at org.mortbay.jetty.servlet.WebApplicationHandler$Chain.doFilter(WebApplicationHan dler.java:342) 
at com.sterlingcommerce.woodstock.ui.dlsso.DLSSOFilter.doFilter(DLSSOFilter.java:13 6) 
at org.mortbay.jetty.servlet.WebApplicationHandler$Chain.doFilter(WebApplicationHan dler.java:334) 
at org.mortbay.jetty.servlet.WebApplicationHandler.dispatch(WebApplicationHandler.j ava:286) 
at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:567) 
at org.mortbay.http.HttpContext.handle(HttpContext.java:1807) 
at org.mortbay.jetty.servlet.WebApplicationContext.handle(WebApplicationContext.jav a:525) 
at org.mortbay.http.HttpContext.handle(HttpContext.java:1757) 
at org.mortbay.http.HttpServer.service(HttpServer.java:879) 
at org.mortbay.http.HttpConnection.service(HttpConnection.java:789) 
at org.mortbay.http.HttpConnection.handleNext(HttpConnection.java:960) 
at org.mortbay.http.HttpConnection.handle(HttpConnection.java:806) 
at org.mortbay.http.SocketListener.handleConnection(SocketListener.java:218) 
at org.mortbay.util.ThreadedServer.handle(ThreadedServer.java:331) 
at org.mortbay.util.ThreadPool$PoolThread.run(ThreadPool.java:520) 


Info from your Oct 19 Mailbox log: 

[2009-10-19 09:14:03.974] ERROR 000000000000 GLOBAL_SCOPE RouterDBFactory.isDB2() 

java.io.FileNotFoundException: /sterling/gis43/properties/servers.properties (Too many open files) 

at java.io.FileInputStream.open(Native Method) 

at java.io.FileInputStream.<init>(FileInputStream.java:135) 

at java.io.FileInputStream.<init>(FileInputStream.java:95) 

at com.sterlingcommerce.woodstock.util.Util.loadPropertiesFile(Util.java:587) 



RESOLVING THE PROBLEM


Due to the "Too many open files" errors posted in the Mailbox log, we recommended that the customer increase the maximum number of open files (hard nofile) on their Linux to the max value of 16384, currently it's set to 8196, previously it was increased from 4096. More information on this parm is documented in the GIS 4.3 doc under a section called Preinstallation Setup Checklist for a Non-Clustered UNIX or Linux Environment, please see url http://www.sterlingcommerce.com/Documentation/GIS43/Content /Install_UNIXLinux_NClus/U_PC.html [http://www.sterlingcommerce.com/Documentation/GIS43/Content/Install_UNIXLi nux_NClus/U_PC.html].

Customer specifies that this problem has not re-occurred since the 'number of open files' was increase to 16384 on the Linux OS, although he has also been cycling GIS about every 2 weeks since then, so he's not 100% sure that the increase in the Open Files parm has resolved the issue because cycling also is the known workaround. The customer requested that this issue be closed he'll continue to monitor and watch out if this issue re-occurs. We have not been able to reproduce this problem in-house, and closed the issue at customer's request and there was no GIS code change, only a Linux OS parm change. 

 

HISTORICAL NUMBER
 NFX7787 

PRODUCT ALIAS/SYNONYM
 

Function Area


UI


Escalation ID


104488


Fix ID


204685