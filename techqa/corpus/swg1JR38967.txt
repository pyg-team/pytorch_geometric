Title: IBM JR38967: SCA BINDING DOES NOT RESTORE THE CORRECT CLASSLOADER - United States

Text:
  A FIX IS AVAILABLE
WebSphere Enterprise Service Bus V7.0.0 Fix Pack 4 (7.0.0.4) [http://www-01.ibm.com/support/docview.wss?uid=swg24030312]


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  It is noticed that when we are trying to interact with the flow
   via a
   Custom Web Service (JAX-WS binding) which utilizes WPS EJB
   BFM/HTM APIs
   internally. In this deployment model we are running into an
   issue. EJB
   API invocation from the WebService works fine, Human task
   completes on
   the flow side and SCA Handler does return the proper response.
   However
   while builing SOAP response on the WebService layer we get a
   JAXB
   exception.
   
   
    
   
   

LOCAL FIX
 *  N/A
   
   
    
   
   

PROBLEM SUMMARY
 *  ****************************************************************
   * USERS AFFECTED:  WebSphere Process Server users of the SCA   *
   *                  binding.                                    *
   ****************************************************************
   * PROBLEM DESCRIPTION: When a message passes through SCA       *
   *                      binding, sometimes it does not          *
   *                      restore the correct application         *
   *                      classloader context.                    *
   ****************************************************************
   * RECOMMENDATION:                                              *
   ****************************************************************
   The SCA binding sets appropriate class-loader context before
   EJB calls, but it does not restore the class-loader
   class-loader context after the call. This could result in
   processing errors in the next component in calling chain.
   
   For example, while building a SOAP response from the response
   message received from SCA binding, the Web Services layer may
   encounter JAXB exception.
   
   
    
   
   

PROBLEM CONCLUSION
 *  The SCA binding code is changes to ensure that every EJB
   preinvoke call has a matching postinvoke call.
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   JR38967
   
   
 * REPORTED COMPONENT NAME
   WEB PROC SERVER
   
   
 * REPORTED COMPONENT ID
   5724L0100
   
   
 * REPORTED RELEASE
   700
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2011-02-22
   
   
 * CLOSED DATE
   2011-04-21
   
   
 * LAST MODIFIED DATE
   2011-04-21
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   WEB PROC SERVER
   
   
 * FIXED COMPONENT ID
   5724L0100
   
   

APPLICABLE COMPONENT LEVELS
 * R700 PSY
   UP