Title: IBM PI61062: ATTLS ENABLED CONNECTION HANGS INDEFINITELY WHEN INVALID SSL CLIENT HELLO PACKETS ARE RECEIVED - United States

Text:
z/os  A FIX IS AVAILABLE
Obtain the fix for this APAR.


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  when specific client hello datastream is received for an ATTLS
   enabled application, it will hang. The SSL handshake
   timeout does not pop. This does not happen for ALL invalid
   client hello data , but only for a specific stream of data.
   
   
    
   
   

LOCAL FIX
 *  verificate steps:
   
   a dump of TCPIP will show the failing application TCPIP Control
   block in a CLOSWAIT state. There will also be an ITEVENT waiting
   on the SSL handshaketime, but the handshake timer has been
   cancelled
   
   
    
   
   

PROBLEM SUMMARY
 *  ****************************************************************
   * USERS AFFECTED:                                              *
   * All users of the IBM Communications                          *
   * Server for z/OS Version 2 Releases 1                         *
   * and 2:  AT-TLS                                               *
   ****************************************************************
   * PROBLEM DESCRIPTION:                                         *
   * AT-TLS connection hangs indefinitely when inbound SSL packet *
   * arrives with a data length indicating additional data is     *
   * coming and no more data arrives.                             *
   ****************************************************************
   * RECOMMENDATION:                                              *
   * Apply PTF.                                                   *
   ****************************************************************
   AT-TLS uses HandshakeTimer value to manage how long to wait for
   SSL handshake to complete.  This timer was cancelled after the
   first packet of the SSL CLIENTHELLO record arrived.  There is a
   a potential for the SSL CLIENTHELLO to span multiple packets in
   which case we need to wait for the entire SSL record to arrive
   before we process the data.  Since the timer is cancelled there
   is a potential to hang indefinitely if no additional data
   arrives.
   
   
    
   
   

PROBLEM CONCLUSION
 *  AT-TLS code is updated to cancel handshake timer after complete
   SSL record has been received.
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   PI61062
   
   
 * REPORTED COMPONENT NAME
   TCP/IP V3 MVS
   
   
 * REPORTED COMPONENT ID
   5655HAL00
   
   
 * REPORTED RELEASE
   210
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt / Xsystem
   
   
 * SUBMITTED DATE
   2016-04-19
   
   
 * CLOSED DATE
   2016-07-07
   
   
 * LAST MODIFIED DATE
   2016-08-02
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
    UI39238 UI39239
   
   

MODULES/MACROS
 *  EZBTLRDQ
   
   
    
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   TCP/IP V3 MVS
   
   
 * FIXED COMPONENT ID
   5655HAL00
   
   

APPLICABLE COMPONENT LEVELS
 * R210 PSY UI39238 [HTTPS://WWW14.SOFTWARE.IBM.COM/WEBAPP/SET2/ORDERMEDIA/SHOPCART?PTFS=UI39238]
   UP16/07/25 P F607
   
   
 * R220 PSY UI39239 [HTTPS://WWW14.SOFTWARE.IBM.COM/WEBAPP/SET2/ORDERMEDIA/SHOPCART?PTFS=UI39239]
   UP16/07/25 P F607
   
   

FIX IS AVAILABLE
 * SELECT THE PTF APPROPRIATE FOR YOUR COMPONENT LEVEL. YOU WILL BE REQUIRED TO SIGN IN. DISTRIBUTION ON PHYSICAL MEDIA IS NOT AVAILABLE IN ALL COUNTRIES.