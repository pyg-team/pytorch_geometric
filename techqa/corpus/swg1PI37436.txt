Title: IBM PI37436: ANONYMOUS USER COULD NOT GET THE CONTROLLABLES IN THE PATH OF CO NTENTS EVEN THEY HAVE ANONYMOUS ACCESS - United States

Text:
  A FIX IS AVAILABLE
Fixes integrated in WebSphere Portal 8.5.0.0 Combined Cumulative Fixes [http://www-01.ibm.com/support/docview.wss?uid=swg24037786]



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  Anonymous user could not get the controllables in the path of
   contents even they have anonymous access.
   
   Analysis: getWorkspace(true) won't return a system workspace
   unless unRestricted flag is set
   Solution: set unRestricted flag
   
   
    
   
   

LOCAL FIX

PROBLEM SUMMARY
 *  Anonymous user could not get the controllables in the path of
   contents even they have anonymous access
   
   Anonymous user could not get the controllables in the path of
   contents even they have anonymous access.
   
   Analysis: getWorkspace(true) won't return a system workspace
   unless unRestricted flag is set
   Solution: set unRestricted flag
   
   Prereq: install the CacheViewer ear and put the CacheViewer.jsp
   under
    <wp profile>/installedApps/<node name>/wcm.ear/ilwwcm.war/
   
   1- Create a sitearea without user access to anonymous or
   authentificated
   users
   2- Create a content under this siterea with user access to
   anonymous or
   authentificated users
   3- Add the content to the JSR286 WCM portlet on a page for
   anonymous or
   authentificated users
   
   4- Render the content with an anonymous user or authentificated
   user =>
   page and content display fine
   5- As Portal Admin, edit the sitearea (just click edit then save
   it, no
   modification)
   6- Render the content again with same anonymous or
   authentificated user
   =>
   content don't display : error instead
   7- Try to edit the sitearea with admin : not available
   
   8- Clear the entry in Strategy Cache for the sitearea. The page
   should
    render correctly again.
   
   9, Repeat step 5. And check the Strategy Cache. You will find
   out the
    entry for the sitearea is gone. It means that WCM core clean
   the
    strategy cache correctly when we save item.
   
   10, Repeat step 5. You can see that after resave the sitearea,
   you
    should be still be able to edit and save the sitearea.
   
   11, Repeat step 6. This is how it breaks. The page stops
   rendering and
    the sitearea can't be edit and saved. It seems that rendering
   portlet
    holds an older version of sitearea and put it back to Strategy
   cache.
   
   
    
   
   

PROBLEM CONCLUSION
 *  Analysis: getWorkspace(true) won't return a system workspace
   unless unRestricted flag is set
   Solution: set unRestricted flag
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   PI37436
   
   
 * REPORTED COMPONENT NAME
   LOTUS WEB CONT
   
   
 * REPORTED COMPONENT ID
   5724I2900
   
   
 * REPORTED RELEASE
   850
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2015-03-20
   
   
 * CLOSED DATE
   2015-05-27
   
   
 * LAST MODIFIED DATE
   2015-05-27
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   LOTUS WEB CONT
   
   
 * FIXED COMPONENT ID
   5724I2900
   
   

APPLICABLE COMPONENT LEVELS
 * R800 PSY
   UP