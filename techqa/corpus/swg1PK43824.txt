Title: IBM PK43824: CLASSCASTEXCEPTION AFTER APPLICATION OF PK27620 - United States

Text:
  FIXES ARE AVAILABLE
Java SDK 1.5 SR8 Cumulative Fix for WebSphere Application Server [http://www-01.ibm.com/support/docview.wss?uid=swg24020073]
Java SDK 1.5 SR8 Cumulative Fix for WebSphere Application Server [http://www-01.ibm.com/support/docview.wss?uid=swg24021203]
Java SDK 1.5 SR10 Cumulative Fix for WebSphere Application Server [http://www-01.ibm.com/support/docview.wss?uid=swg24024201]
6.1.0.31: Java SDK 1.5 SR11 Cumulative Fix for WebSphere Application Server [http://www-01.ibm.com/support/docview.wss?uid=swg24026453]
6.1.0.33: Java SDK 1.5 SR12 FP1 Cumulative Fix for WebSphere [http://www-01.ibm.com/support/docview.wss?uid=swg24027786]
6.1.0.29: Java SDK 1.5 SR11 Cumulative Fix for WebSphere Application Server [http://www-01.ibm.com/support/docview.wss?uid=swg24025191]
6.1.0.35: Java SDK 1.5 SR12 FP2 Cumulative Fix for WebSphere [http://www-01.ibm.com/support/docview.wss?uid=swg24028574]
6.1.0.37: Java SDK 1.5 SR12 FP3 Cumulative Fix for WebSphere [http://www-01.ibm.com/support/docview.wss?uid=swg24029525]
6.1.0.39: Java SDK 1.5 SR12 FP4 Cumulative Fix for WebSphere Application Server [http://www-01.ibm.com/support/docview.wss?uid=swg24030426]
6.1.0.41: Java SDK 1.5 SR12 FP5 Cumulative Fix for WebSphere Application Server [http://www-01.ibm.com/support/docview.wss?uid=swg24031035]
6.1.0.43: Java SDK 1.5 SR13 Cumulative Fix for WebSphere Application Server [http://www-01.ibm.com/support/docview.wss?uid=swg24031963]
6.1.0.45: Java SDK 1.5 SR14 Cumulative Fix for WebSphere Application Server [http://www-01.ibm.com/support/docview.wss?uid=swg24033270]
6.1.0.47: WebSphere Application Server V6.1 Fix Pack 47 [http://www-01.ibm.com/support/docview.wss?uid=swg24035508]
6.1.0.47: Java SDK 1.5 SR16 Cumulative Fix for WebSphere Application Server [http://www-01.ibm.com/support/docview.wss?uid=swg24035649]


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  Classcastexception after application of PK31377 [http://www-01.ibm.com/support/docview.wss?uid=swg1PK31377]
   
   
   Following exception is seen in the traces:
   [07/04/06 16:06:34:953 JST] 00000023 WebApp        E   [Servlet
   Error]-[com.ibm.ws.webcontainer.facade.ServletContextFacade
   incompatible with
   com.ibm.wsspi.webcontainer.servlet.IServletContext]:
   java.lang.ClassCastException:
   com.ibm.ws.webcontainer.facade.ServletContextFacade incompatible
   with com.ibm.wsspi.webcontainer.servlet.IServletContext
    at
   com.ibm.ws.jsp.webcontainerext.AbstractJSPExtensionServletWrappe
   r.handleRequest(AbstractJSPExtensionServletWrapper.java:175)
    at
   com.ibm.ws.jsp.webcontainerext.AbstractJSPExtensionProcessor.han
   dleRequest(AbstractJSPExtensionProcessor.java:275)
    at
   com.ibm.ws.webcontainer.webapp.WebApp.handleRequest(WebApp.java:
   3163)
    at
   com.ibm.ws.webcontainer.webapp.WebGroup.handleRequest(WebGroup.j
   ava:254)
    at
   com.ibm.ws.webcontainer.WebContainer.handleRequest(WebContainer.
   java:811)
    at
   com.ibm.ws.wswebcontainer.WebContainer.handleRequest(WebContaine
   r.java:1433)
    at
   com.ibm.ws.webcontainer.channel.WCChannelLink.ready(WCChannelLin
   k.java:100)
    at
   com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleDiscr
   imination(HttpInboundLink.java:465)
    at
   com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleNewIn
   formation(HttpInboundLink.java:394)
    at
   com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.ready(HttpI
   nboundLink.java:274)
    at
   com.ibm.ws.tcp.channel.impl.NewConnectionInitialReadCallback.sen
   dToDiscriminators(NewConnectionInitialReadCallback.java:214)
    at
   com.ibm.ws.tcp.channel.impl.NewConnectionInitialReadCallback.com
   plete(NewConnectionInitialReadCallback.java:113)
    at
   com.ibm.ws.tcp.channel.impl.AioReadCompletionListener.futureComp
   leted(AioReadCompletionListener.java:152)
    at
   com.ibm.io.async.AbstractAsyncFuture.invokeCallback(AbstractAsyn
   cFuture.java:213)
    at
   com.ibm.io.async.AbstractAsyncFuture.fireCompletionActions(Abstr
   actAsyncFuture.java:195)
    at com.ibm.io.async.AsyncFuture.completed(AsyncFuture.java:136)
    at
   com.ibm.io.async.ResultHandler.complete(ResultHandler.java:195)
    at
   com.ibm.io.async.ResultHandler.runEventProcessingLoop(ResultHand
   ler.java:743)
    at com.ibm.io.async.ResultHandler$2.run(ResultHandler.java:873)
    at com.ibm.ws.util.ThreadPool$Worker.run(ThreadPool.java:1469)
   
   
    
   
   

LOCAL FIX

PROBLEM SUMMARY
 *  ****************************************************************
   * USERS AFFECTED: IBM WebSphere Application Server version6.1  *
   *                 users of servlet filters and Java Server     *
   *                 Pages (JSP) in their application.            *
   ****************************************************************
   * PROBLEM DESCRIPTION: A ClassCastException occurs when a JSP  *
   *                      file cannot be found and filters are    *
   *                      configured for the application.         *
   ****************************************************************
   * RECOMMENDATION:                                              *
   ****************************************************************
   The following ClassCastException can occur during JSP
   processing:
   ----------
   [Servlet Error]-
   [com.ibm.ws.webcontainer.facade.ServletContextFacade
   incompatible with
   com.ibm.wsspi.webcontainer.servlet.IServletContext]:
   java.lang.ClassCastException:
   com.ibm.ws.webcontainer.facade.ServletContextFacade
    incompatible with
    com.ibm.wsspi.webcontainer.servlet.IServletContext
    at com.ibm.ws.jsp.webcontainerext.
   AbstractJSPExtensionServletWrapper.handleRequest
   (AbstractJSPExtensionServletWrapper.java:175)
    at
   com.ibm.ws.jsp.webcontainerext.AbstractJSPExtensionProcessor.
   handleRequest(AbstractJSPExtensionProcessor.java:275)
    at
   com.ibm.ws.webcontainer.webapp.WebApp.handleRequest
   (WebApp.java:3163)
   ----------
   
   This exception typically occurs when an application has
   servlet filters configured.  If the webcontainer cannot find
   a requested JSP file it then calls any configured filters that
   can handle the request before or instead of throwing a
   FileNotFoundException.
   
   
    
   
   

PROBLEM CONCLUSION
 *  The ServletContextFacade class was modified to implement the
   IServletContext interface.
   
   The fix for this APAR is currently targeted for inclusion
   in fixpack 6.1.0.11.
   Please refer to the recommended updates page for delivery
   information:
   http://www.ibm.com/support/docview.wss?rs=180&uid=swg27004980 [http://www.ibm.com/support/docview.wss?rs=180&uid=swg27004980]
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   PK43824
   
   
 * REPORTED COMPONENT NAME
   WEBSPH APP SERV
   
   
 * REPORTED COMPONENT ID
   5724J0800
   
   
 * REPORTED RELEASE
   61W
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2007-04-23
   
   
 * CLOSED DATE
   2007-06-15
   
   
 * LAST MODIFIED DATE
   2007-06-15
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

MODULES/MACROS
 *  ENGINE
   
   
    
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   WEBSPH APP SERV
   
   
 * FIXED COMPONENT ID
   5724J0800
   
   

APPLICABLE COMPONENT LEVELS
 * R61A PSY
   UP
   
   
 * R61H PSY
   UP
   
   
 * R61I PSY
   UP
   
   
 * R61P PSY
   UP
   
   
 * R61S PSY
   UP
   
   
 * R61W PSY
   UP
   
   
 * R61Z PSY
   UP