Title: IBM IC94365: File transfers between a WMQ FTE V7.0.4.3 agent and a WMQ MFT V7.5.0.x agent fail - United States

Text:
  A FIX IS AVAILABLE
WebSphere MQ V7.5 Fix Pack 7.5.0.3 [http://www-01.ibm.com/support/docview.wss?uid=swg24036808]


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  When using a combination of WebSphere MQ Managed File Transfer
   (MFT) agents at version 7.5.0.0, 7.5.0.1 and 7.5.0.2 in the same
   topology as WebSphere MQ File Transfer Edition agents at version
   7.0.4.3, file transfers between these agents fail. In this
   scenario, there are two outcomes:
   
   Outcome 1:
   
   The transfer freezes in "starting" state and is unable to be
   recovered. The WebSphere MQ MFT v7.5.0.x agent generates a
   FFDC with the following error:
   
   Thread:  28 (CommandHandler)
   Class:  com.ibm.wmqfte.cmdhandler.impl.FTECommandThread
   Method:  run
   Probe:  FFDC_001
   Cause:
   com.ibm.wmqfte.cmdhandler.FTECommandHandlerErrorException:
   BFGCH0024E: An internal error has occurred. An internal message
   has not been successfully parsed.
   com.ibm.wmqfte.cmdhandler.FTECommandHandlerErrorException:
   BFGCH0024E: An internal error has occurred. An internal
   message has not been successfully parsed.
   at
   com.ibm.wmqfte.cmdhandler.impl.MessageHandlerImpl.internalMessag
   eHandler(MessageHandlerImpl.java:397)
   at
   com.ibm.wmqfte.cmdhandler.impl.MessageHandlerImpl.processCommand
   (MessageHandlerImpl.java:148)
   
   Caused by:
   com.ibm.wmqfte.ftemessage.FTEMessageParsingException:
   BFGFM0003E: An internal error has occurred. The version is 10.
   at
   com.ibm.wmqfte.ftemessage.impl.FTEMessageImpl.readMessageHeader(
   FTEMessageImpl.java:432)
   at
   com.ibm.wmqfte.ftemessage.impl.FTEResponseCommandMessageImpl.(FT
   EResponseCommandMessageImpl.java:135)
   at
   com.ibm.wmqfte.ftemessage.impl.FTEMessageFactoryImpl.decodeFTEMe
   ssage(FTEMessageFactoryImpl.java:113)
   
   Outcome 2:
   
   The WebSphere MQ MFT v7.5.0.x agent generates an FFDC (as above)
   and also ABENDs with the following ABEND file generated:
   
   Thread:  37
   (TransferReceiver[414d51204d465437355f434d442020209573e95120005a
   03])
   Class:  com.ibm.wmqfte.thread.FTEThread
   Method:  uncaughtException
   Probe:  ABEND_001
   Cause:  java.lang.IllegalArgumentException: 10
   at
   com.ibm.wmqfte.utils.ProductVersion$ProductRelease.fromValue(Pro
   ductVersion.java:92)
   at
   com.ibm.wmqfte.ftemessage.impl.FTEProgressCommandMessageImpl.get
   WMQMessage(FTEProgressCommandMessageImpl.java:195)
   at
   com.ibm.wmqfte.statestore.impl.FTEStateStoreImpl.sendAuditMessag
   eToSender(FTEStateStoreImpl.java:4011)
   at
   com.ibm.wmqfte.statestore.impl.FTEStateStoreImpl.sendOutstanding
   Audits(FTEStateStoreImpl.java:3975)
   at
   com.ibm.wmqfte.transfer.impl.TransferReceiverRunnable.checkPoint
   Transfer(TransferReceiverRunnable.java:1204)
   
   
    
   
   

LOCAL FIX

PROBLEM SUMMARY
 *  ****************************************************************
   USERS AFFECTED:
   This issue affects all users of WebSphere MQ Managed File
   Transfer who also have WebSphere MQ File Transfer Edition
   v7.0.4.3 agents in the same topology.
   
   
   Platforms affected:
   MultiPlatform
   
   ****************************************************************
   PROBLEM SUMMARY:
   WebSphere MQ Managed File Transfer (MFT) and File Transfer
   Edition (FTE) agents report their version number when sending
   messages between agents that coordinate file transfers. A
   WebSphere MQ Managed File Transfer agent was unable to correctly
   interpret the version number reported by a WebSphere MQ FTE
   v7.0.4.3 agent when it received response messages from this
   agent.
   
   In the scenario where a file transfer is requested from a
   WebSphere MQ MFT source agent to a WebSphere MQ FTE v7.0.4.3
   destination agent, the response message sent by the v7.0.4.3
   agent once it is ready to receive data from the v7.5.0.x
   source agent causes this source agent to generate an FFDC as
   it cannot correctly parse this response message.
   
   In the scenario where a file transfer is requested from a
   WebSphere MQ FTE v7.0.4.3 source agent to a WebSphere MQ MFT
   destination agent, when the v7.5.0.x destination agent
   performs transfer checkpoint processing, the inability to
   correctly interpret the version number reported by the
   v7.0.4.3 source agent causes the WebSphere MQ MFT destination
   agent to ABEND.
   
   
    
   
   

PROBLEM CONCLUSION
 *  The WebSphere MQ MFT agent has been updated so it can
   correctly interpret the version number reported by a WebSphere
   MQ FTE v7.0.4.3 agent.
   
   ---------------------------------------------------------------
   The fix is targeted for delivery in the following PTFs:
   
   Version    Maintenance Level
   v7.5       7.5.0.3
   
   The latest available maintenance can be obtained from
   'WebSphere MQ Recommended Fixes'
   http://www-1.ibm.com/support/docview.wss?rs=171&uid=swg27006037 [http://www-1.ibm.com/support/docview.wss?rs=171&uid=swg27006037]
   
   If the maintenance level is not yet available information on
   its planned availability can be found in 'WebSphere MQ
   Planned Maintenance Release Dates'
   http://www-1.ibm.com/support/docview.wss?rs=171&uid=swg27006309 [http://www-1.ibm.com/support/docview.wss?rs=171&uid=swg27006309]
   ---------------------------------------------------------------
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   IC94365
   
   
 * REPORTED COMPONENT NAME
   WMQ FTE
   
   
 * REPORTED COMPONENT ID
   5724H7242
   
   
 * REPORTED RELEASE
   750
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2013-07-24
   
   
 * CLOSED DATE
   2013-08-30
   
   
 * LAST MODIFIED DATE
   2013-11-27
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   WMQ FTE
   
   
 * FIXED COMPONENT ID
   5724H7242
   
   

APPLICABLE COMPONENT LEVELS
 * R750 PSY
   UP