Title: IBM How to configure a Program Document to periodically run a server command - United States

Text:
program document; domino directory; server commands; schedule; capture; setup; set up; server tasks; APAR LO12811; APAR LO25194; commands TECHNOTE (FAQ)

QUESTION
You want to automatically run a server command periodically to capture information in the Lotus Notes log. Is it possible to schedule a Lotus Domino server command such as DBCACHE FLUSH to periodically run at a specific time?

ANSWER
This issue was reported to Quality Engineering as SPR# CDOY4TNN2M. You can use a Program Document in the Domino Directory (names.nsf) to schedule a server command to run periodically. 
NOTE: Scroll down below the following steps to check the "Hints and tips" and "Creating a batch file" sections for more information about scheduling server commands.. 

On Microsoft Windows: 
1. Open names.nsf and then open Server --> Programs --> Add Program.

2. On the Basics panel, enter the following:


 * 
 * nserver
 * 
 * 
 * -c "< C:\nServer-LogShowStat.txt"
 * 
 * 
 * specify the server
 * 
 * 
 * 
 * 
 * 
 * 
 * nserver
 * 
 * 
 * -c "dbcache flush"
 * 
 * 
 * specify the server
 * 
 * 
 * 
 * Document #1088687
 * 
 * How to Execute Multiple Commands via a Text File with a Domino Server.
 * 
 * 

3. On the Schedule panel, enter the following: 
 * 
 * 
 * 
 * Specify range of times or one time
 * 
 * 
 * "0" if run only once, otherwise specify interval
 * 
 * 
 * Specify the days on which to run the Program Document 
 * 
 * 
 * NOTE: 
 * 
 * sh server, sh task, sh schedule, dbcache flush, tell amgr q, tell sched q.
 * 
 * 
 * 


On OS/400, i5/OS: 
The picture displays a Program Document that will run the design task weekly on the i5/OS: 

[/support/docview.wss?uid=swg21088932&aid=1] [/support/docview.wss?uid=swg21088932&aid=1] 
NOTE: The Command line field above is used for parameters just as on other platforms. Since this example shows how to load the Design task to run against the entire server, the Command line field should be blank as no parameters are needed. In this instance, the only difference between the i5 operating system and Windows is the program name, Design vs. nDesign . 

Hints and tips: 
The following list provides checks when creating a Server Program Document to run server tasks on a specified schedule: 

IMPORTANT NOTE: Development does NOT recommend running tasks such as updall or fixup using Program documents. These repair utilities are resource intensive and should be used only for repair purposes only. It is acceptable to run the compact task on a weekly basis ONLY if there is significant white space in the databases on the server. This should not be done during production hours or on a daily basis. 

When creating the Program Document, it is important to specify the following: 

-- In the Program Name field, it is important to enter the name of the Domino server program you want to run (for example, compact). 

-- In the Command Line field, put any parameters that you want to specify in terms of how the command runs (for example, -s 10 runs compact with the -s 10 parameter). 

-- In the "Server to Run On" field, specify which Domino server will run the specified command and parameters (for example, server/Acme). 

-- The Comments field is a text field where you input text regarding the purpose of the Program Document (for example, "Weekly compact"), or leave blank. 

-- Enabled/Disabled in the Program Document determines if this should run as scheduled. 

-- "Run at Times" determines when the server will execute the command/parameters on the specified server at the time chosen. 

-- "Repeat Interval Of" is for determining how many times to run the Program 
Document (default is zero minutes). 

-- "Days of Week" is where you specify the days on which to run the Program Document. It will run on those days at the time specified in the "Run at Times" field. 

NOTE: Scheduling programs using the Server Program documents can be done only on a daily or weekly basis. 

Creating a batch file: 
If you want to run a particular command on several databases but do not want to create a Program Document for each one, you can create a batch file in the Domino\Data directory that contains all of the necessary commands to accomplish this. For example, create a .txt file in the Domino\Data directory named compaction.txt and list several Domino Server commands, such as: 
 * load COMPACT invoice.nsf -B
 * 
 * load COMPACT contracts.nsf -B
 * 
 * load COMPACT mail\*.nsf -B


Then create a Program Document using the syntax below: 

Program Name: nserver 
Command Line: -c "< c:\lotus\domino\data\compaction.txt" 

HISTORICAL NUMBER
 183305