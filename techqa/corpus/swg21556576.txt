Title: IBM ClassNotFoundException on org.jboss.mq.referenceable.ObjectRefAddr - United States

Text:
3rd party Communication; Update; Patch; STERLINGNFX TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 JBoss JMS4.3/Solaris: JMS operation throws ClassNotFoundException on org.jboss.mq.referenceable.ObjectRefAddr on MCF 8.0 

SYMPTOM
When the Sterling application posts to or reads into or from a message the queue, the JBoss JMS throws this exception: 

"javax.naming.CommunicationException [Root exception is java.rmi.UnmarshalException: error unmarshalling return; nested exception is: java.lang.ClassNotFoundException: org.jboss.mq.referenceable.ObjectRefAddr (no security manager: RMI class loader disabled)]" error 


Error Message


<Errors> <Error ErrorCode="JMSContext6"> ErrorDescription="Error_description_not_available" ErrorRelatedMoreInfo=""> <Attribute Name="ErrorCode" Value="JMSContext6"/> <Attribute Name="ErrorDescription" Value="Error_description_not_available"/> <Error ErrorCode="javax.naming.CommunicationException"> ErrorDescription=""ErrorRelatedMoreInfo=""> 
<Stack>javax.naming.CommunicationException [Root exception is java.rmi.UnmarshalException: error unmarshalling return; nested exception is: 


java.lang.ClassNotFoundException: org.jboss.mq.referenceable.ObjectRefAddr (no security manager: RMI class loader disabled)] 
at org.jnp.interfaces.NamingContext.lookup(NamingContext.java:724) 
at org.jnp.interfaces.NamingContext.lookup(NamingContext.java:589) 
at javax.naming.InitialContext.lookup(InitialContext.java:351) 
at com.yantra.interop.services.jms.JMSContext.getConnectionFactoryFromJNDI(JMSContext.java:272) 


RESOLVING THE PROBLEM
JBoss throws this error because it believes that it needs MQ jars even though JBoss JMS is in use. 

Check the following to avoid system picking up MQ related jars: 

 1. Check the parameter <CreateJBossMQDestination> in <JBOSS_HOME>/server/<your server name>/conf/standardjboss.xml. The value should be 'false' 
 2. Check for MQ jars in <INSTALL_DIR>/properties/AGENTDynamicclasspath.cfg. Modify the file if it contains any MQ related jars. 
 3. Ensure that there are no MQ jars placed in <JBOSS_HOME>/lib folder.


On verification of the above, restart all the Sterling related JVMs, and recheck the behavior. 

HISTORICAL NUMBER
 NFX8324 

PRODUCT ALIAS/SYNONYM
 

Escalation ID


139886


Severity


Critical