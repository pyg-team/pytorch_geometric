Title: IBM What does slot_memory mean in fairshare adjustment example? - United States

Text:
 TECHNOTE (FAQ)

QUESTION
 What does slot_memory mean in fairshare adjustment example? 

ANSWER
LSF sample program simfairadjust.c (located in $LSF_TOP/10.1/misc/examples) adds an adjustment to the existing LSF fairshare scheduling. 
It creates a new equation to calculate the user's dynamic priority. In the equation, not only the used slots and number to started tasks are applied, but also the used memory is taken into account also. 

One of the key value in the equation is the slot_memory, which is the average memory allocated per slot
in the cluster not including unavailable hosts, unlicensed hosts, and leased-in hosts.

For example, 

1. The cluster has 32 slots altogether

bhosts

HOST_NAME STATUS JL/U MAX NJOBS RUN SSUSP USUSP RSV

master_host closed - 0 0 0 0 0 0

server_host_01 ok - 16 1 1 0 0 0

server_host_02 ok - 16 0 0 0 0 0


2. lshosts to check the total memory of the cluster

lshosts

HOST_NAME type model cpuf ncpus maxmem maxswp server RESOURCES

master_host X86_64 Intel_EM 60.0 16 127.9G 3.9G Yes ()

server_host_01 X86_64 Intel_EM 60.0 4 3.9G 3.8G Yes (mg)

server_host_02 X86_64 Intel_EM 60.0 16 63.9G 31.5G Yes (mg) 

The sum of memory in the cluster is 127.9G+3.9G+63.9G=195.7GB

slot_memory = Total Memory / Total Number of Slot = 196.7 / 32 * 1024 = 6270M

With the calculated slot_memory, new equation for the adjusted user dynamic priority can be derived.