Title: IBM Configuring a secure (SSL) connection from MDM to DB2 - United States

Text:
 TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 It may be desirable to set up a secure (SSL) connection between the MDM application in Websphere, and a DB2 instance. There are a number of steps to follow in order to set up this configuration; the steps are described below. 

RESOLVING THE PROBLEM
Please note: The following steps are intended for MDM users, but are subset of content collected from the following two existing technotes: 

1) How do I enable SSL encryption for DB2 Connections for WebSphere-based applications and datasources?
Link: http://www.ibm.com/support/docview.wss?uid=swg21667093 [http://www.ibm.com/support/docview.wss?uid=swg21667093]

2) Manually enable SSL communication to Oracle database from MDM
Link: http://www.ibm.com/support/docview.wss?uid=swg21971003 [http://www.ibm.com/support/docview.wss?uid=swg21971003]

The abovementioned technotes contain comprehensive information and screenshots which may assist users in performing the steps below.

Additional note: The instruction below are for Unix. Customers may need to make various modifications to the procedure for other OS's, such as Microsoft Windows.






Steps to perform in the Websphere console: 

1. Add the DB2 SSL Signer/Certificate to the WebSphere CellDefaultTrustStore as a signer certificate. 

2. For the DWLConfig and DWLCustomer data sources, add custom property "sslConnection" with a value of "true." 

3. For the MDM data source, add custom property "encryptionMethod" with a value of "SSL". 

4. Change the port for all 3 data sources from the non-secure DB port (eg. 50000) to the secure DB port (eg. 50004). 

5. Add the custom properties javax.net.ssl.trustStore, javax.net.ssl.trustStorePassword and javax.net.ssl.trustStoreTypeto the MDMAppSrv server by navigating to Java and Process Management - Process Definition - Java Virtual Machine - Custom Properties 

Steps to perform on the Websphere application server (filesystem): 

1. Run the ikeyman.sh command to launch the IBM Key Management GUI. Added your corporate issued certificate (eg: keydb.arm) as a signer certificate to the trust store $WAS_HOME/profiles/Dmgr01/etc/trust.p12. 

2. Update odbc.ini file in the following two locations by changing the db port from the non-secure DB port (50000) to the secure DB port (50004). Also add EncryptionMethod, TrustStore, TrustStorePassword and ValidateServerCertificate. 

- Location 1: <WAS_PROFILE_HOME>/installedApps/<cellName>/MDM-native-<instanceId>.ear/native.war/conf 
- Location 2: <MDM_INSTALL_HOME>/mds/conf 

3. Update com.ibm.mdm.mds.jdbc.cfg file in the following two locations by changing the DB port from the non-secure DB port (eg. 50000) to the secure DB port (eg. 50004). Also add the following configuration option on its own row: encryptionMethod=SSL. 

- Location 1: <WAS_PROFILE_HOME>/installedApps/<cellName>/MDM-native-<instanceId>.ear/native.war/conf 

- Location 2: <MDM_INSTALL_HOME>/mds/conf 

Finally: stop all components, start them again and perform a syncNode action ( http://www.ibm.com/support/knowledgecenter/SSAW57_8.5.5/com.ibm.websphere.nd.multiplatform.doc/ae/rxml_syncnode.html [http://www.ibm.com/support/knowledgecenter/SSAW57_8.5.5/com.ibm.websphere.nd.multiplatform.doc/ae/rxml_syncnode.html]) 

Result: The application server (eg. MDMAppSrv) should start without errors. 

Verification: 
- If you have an application such as SoapUI, test it and ensure that your interactions are reaching the Master Data Engine. 
- Run the madsql command line utility. It should start properly and allow queries against the database. 
- Within the WAS console: Testing DWLConfig, DWLCustomer and MDM data sources should result in successful connections. RELATED INFORMATION
 Websphere SyncNode command [http://www.ibm.com/support/knowledgecenter/SSAW57_8.5.5/com.ibm.websphere.nd.multiplatform.doc/ae/rxml_syncnode.html]
How do I enable SSL encryption for DB2 Connections for [http://www.ibm.com/support/docview.wss?uid=swg21667093]
Manually enable SSL communication to Oracle database fr [http://www.ibm.com/support/docview.wss?uid=swg21971003]