Title: IBM Information About the Reclaim Spool Storage (RCLSPLSTG) Command - United States

Text:
 TECHNOTE (FAQ)

QUESTION
 What do the Reclaim Spool Storage (RCLSPLSTG) command and Reclaim spool storage (QRCLSPLSTG) system value do? What is the recommended value for the Days (DAYS) parameter in the RCLSPLSTG command? Is there a way to know when the RCLSPLSTG command was last run? 

CAUSE
This document provides information about the Reclaim Spool Storage (RCLSPLSTG) command.

ANSWER
The Reclaim Spool Storage (RCLSPLSTG) command cleans up the disk space used by the data base members in the QSPL data base, which are stored in the Q00512Nxxx and Q04079Nxxx files in the QSPL library. Reclaiming spool storage does free up DASD space for other jobs on the system, but it can cause the creation of spooled files to take longer. 

When a spooled file is deleted or printed and removed from the system, the corresponding member in the QSPL data base is marked for deletion, but the member is not actually deleted from the system. If there are any members that are marked for deletion when a new spooled file must be created, one of the available data base members will be reused and will no longer be marked for deletion. However, if there are no members that are marked for deletion when a new spooled file needs to be created, a new data base member will have to be allocated, which takes longer than reusing an existing member. Empty spooled file members have very little impact on disk space and do not effect the number of spooled files or job tables on the system if spooled files are deleted up on a regular basis.

The operating system periodically reclaims spool storage even when the RCLSPLSTG command has not been used. The QRCLSPLSTG (Reclaim spool storage) system value indicates the number of days to reclaim when spool storage is automatically reclaimed by the system. The recommended number of days to set in the QRCLSPLSTG system value is 8 days, which is the default value for this system value. If it becomes necessary to run the RCLSPLSTG command immediately, set the DAYS parameter to *NONE.

Note: If an IPL is performed weekly and the QRCLSPLSTG system value is set to the default value of 8, unused spooled file members will not be reclaimed. The spool related processes that run during an IPL adjusts the time stamp of when the member was last used. This is working as designed. An empty spooled file member takes up very little storage and greatly increases performance when creating a new spooled file. It is recommended that empty members exist. A suggestion might be to set QRCLSPLSTG to 6 if the system IPLs every week if it is necessary that the unused members are reclaimed. Refer to N1014361: Reclaim Spooled File Storage Experience Report [http://www-01.ibm.com/support/docview.wss?uid=nas8N1014361], for additional suggestions.

To free up the most DASD space, it is recommended to first delete any unused or unneeded spooled files and/or clear any unused or unneeded output queues before running the RCLSPLSTG command. The Days (DAYS) parameter is the only parameter for the RCLSPLSTG command. This parameter specifies an interval in days. If existing spool storage has not been used to create new spooled files in the number of days specified, it will be deleted or freed up. If the RCLSPLSTG command is used with DAYS(*NONE), all data base members marked for deletion will be deleted. That will free up the most space, but then new data base members must be allocated whenever a new spooled file is generated.

There might be a way to verify that spool storage has been reclaimed (possibly by dumping a system object), but it would be difficult. When the RCLSPLSTG command is used, the following message is sent to the interactive job, but no messages are sent to the History Log: CPC34A7 - Unused storage for &1 spooled files was reclaimed.

Note: Removing unused libraries or files will usually free up more space than can be freed up by reclaiming spool storage unless a large number of spooled files can be deleted from the system before performing the reclaim.

References

For more information, please refer to the following Technotes:

N1019109: QSPL Storage Cleanup Tips [http://www-01.ibm.com/support/docview.wss?uid=nas8N1019109]
N1014361: Reclaim Spooled File Storage Experience Report [http://www-01.ibm.com/support/docview.wss?uid=nas8N1014361]
N1010144: RCLSPLSTG - Functional Affects on the Spooling Subsystem [http://www-01.ibm.com/support/docview.wss?uid=nas8N1010144]

 



Cross reference information Segment Product Component Platform Version Edition Operating System IBM i 7.2 Operating System IBM i 7.1 Operating System IBM i 6.1 
HISTORICAL NUMBER
 27835246