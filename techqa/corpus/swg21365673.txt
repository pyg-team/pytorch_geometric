Title: IBM Portal startup shows DB2 SQL error: SQLCODE: -1585 - United States

Text:
db2; 1585; -1585; 54048; page; size; table; space TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 IBM WebSphere Portal was successfully installed on a new system. DB2 databases were manually created and a database transfer was successful. During the next Portal startup after the successful database transfer, the Portal SystemOut.log file displays an SQLCODE: -1585 error. This technote will detail how to resolve these errors messages. 

SYMPTOM
 

In the Portal SystemOut.log file, the following may be observed:


 * 
 * Caused by: com.ibm.db2.jcc.c.SqlException
 * 
 *  DB2 SQL error: SQLCODE: 
 * 
 * -1585, SQLSTATE: 54048, SQLERRMC
 * 
 * 
 * 
 * 
 * 
 * 

The key message is the nested exception with the SQLCODE of -1585. 
CAUSE
During the manual creation of the database tables, the page size for the database table space was not correctly set.


DIAGNOSING THE PROBLEM
In the DB2 Information Center [http://publib.boulder.ibm.com/infocenter/db2luw/v9/topic/com.ibm.db2.udb.msg-search.doc/doc/sql1585-sch.htm], the DB2 SQLCode -1585 indicates the following: 

 

 * 


The Portal Information Center [http://publib.boulder.ibm.com/infocenter/wpdoc/v6r1m0/topic/com.ibm.wp.ent.doc/config/hpux_db2_custom_tablespaces.html]details the requirements for DB2 page size: 
 * 

RESOLVING THE PROBLEM
 

To resolve the error message, perform the following steps:

1. Drop the current DB2 databases.

2. Recreate the DB2 databases as explained in the Portal Information Center.

3. Perform a database transfer to the newly created DB2 startup.

4. Restart WebSphere Portal and observe the SystemOut.log files. The errors should no longer be present.

NOTE: Increasing the page size of the database temporary table space beyond 8192 bytes is NOT recommended. WebSphere Portal was tested with DB2 with this specific page size. Any other values could lead to system instability.

 


Cross reference information Segment Product Component Platform Version Edition Organizational Productivity- Portals & Collaboration WebSphere Portal End of Support Products AIX, HP-UX, IBM i, Linux, Solaris, Windows, z/OS 7.0, 6.1