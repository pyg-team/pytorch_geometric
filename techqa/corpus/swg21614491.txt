Title: IBM Portal 8 installation fails on 'run-wcm-admin-task' - United States

Text:
Portal 8 install installation fail fails failure network IP address run wcm admin task ConfigEngine.bat ConfigEngine.sh ConfigModuleClient vpContext connection refused connect ping hosts host name hostname localhost TECHNOTE (TROUBLESHOOTING)

PROBLEM
The Portal 8 installation executes a ConfigEngine script called 'run-wcm-admin-task'. This script is used to run a WCM admin module which tries to connect to Portal. If the network IP for the machine has not been configured properly, it may fail at this point.

SYMPTOM
In the Installation Manager logs, the following error is seen: 

===================================
10686 ERROR CRIMA1076E 01:56:22.82 Error executing "C:\IBM\WebSphere\wp_profile\ConfigEngine\ConfigEngine.bat" operation
(status=1). See agent output log for more information:
C:\ProgramData\IBM\Installation Manager\logs\native\20120910_1447.log 

=================================== 

 

The mentioned log file shows this: 

 

===================================
run-wcm-admin-task:
Mon Sep 10 14:48:02 CDT 2012
[echo] VirtualPortalContext = , VirtualPortalHost =
[echo] Initialized: host myhostname.mydomain.com vpContext
[echo] To call ConfigModuleClient: host
myhostname.mydomain.com vpContext
[ConfigModuleClient] Connecting to login address:
http ://myhostname.mydomain.com:10039/wps/wcm/login


BUILD FAILED
C:\IBM\WebSphere\PortalServer\wcm\prereq.wcm\config\includes
\prereq.wcm_cfg.xml:3671: The following error occurred while executing this line:
C:\IBM\WebSphere\PortalServer\wcm\prereq.wcm\config\includes
\prereq.wcm_cfg.xml :3643: An exception occurred while executing the task:
Connection refused: connect 

===================================


CAUSE
The network IP has not been configured correctly, so Portal will have trouble accessing the URL. Even though one may be able to ping the hostname and IP address, the installation may still fail here. There is a greater chance of running into this problem if using a dynamic IP instead of a static IP.


DIAGNOSING THE PROBLEM
1. In a previous log file from the same install, check if Portal can start ok: 

 

===================================
action-start-portal-server-service:
Mon Sep 10 14:38:39 CDT 2012
[logmsg] [09/10/12 14:38:39.154 CDT] EJPCA3163I: Starting Server
"WebSphere_Portal"
[echo] 'WebSphere_Portal' seems to be stopped.
[echo] Starting 'WebSphere_Portal'
[exectimeout] Executing command: "C:/IBM/WebSphere
/wp_profile/bin/startServer.bat" WebSphere_Portal
[exectimeout] Could not parse timeout. Defaults to 0.
[exectimeout] StdOut: ADMU0116I: Tool information is being logged in
file C:\IBM\WebSphere
[exectimeout] StdOut:
\wp_profile\logs\WebSphere_Portal\startServer.log
[exectimeout] StdOut: ADMU0128I: Starting tool with the wp_profile
profile
[exectimeout] StdOut: ADMU3100I: Reading configuration for server:
WebSphere_Portal
[exectimeout] StdOut: ADMU3200I: Server launched. Waiting for
initialization status.
[exectimeout] StdOut: ADMU3000I: Server WebSphere_Portal open for
e-business; process id is 9692
[exectimeout] Executing command: completed
[exectimeout] Return code = 0 

=================================== 

 

2. Check if XMLAccess can connect to Portal: 

 

===================================
page-builder-tag-portlet-definitions-content:
Mon Sep 10 14:47:09 CDT 2012
[copy] Copying 1 file to C:\IBM\WebSphere
\wp_profile\ConfigEngine\config\work
[xmlaccess] EJPXB0006I: Connecting to URL
http ://localhost:10039/wps/config
[xmlaccess] EJPXB0002I: Reading input file C:\IBM\WebSphere
\wp_profile\ConfigEngine\config\work\TagPortletDefinitionsContent.xml
[xmlaccess] <?xml version="1.0" encoding="UTF-8"?>

[xmlaccess] <!-- IBM WebSphere Portal/8.0 build wp800_404_01 exported
on Mon Sep 10 14:47:19 CDT 2012 from myhostname/9.42.71.67 -->

[xmlaccess] <request build="wp800_404_01" type="update"
version="8.0.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance [http://www.w3.org/2001/XMLSchema-instance]"
xsi:noNamespaceSchemaLocation="PortalConfig_8.0.0.xsd">

[xmlaccess] <status element="all" result="ok"/>

[xmlaccess] </request>
[xmlaccess] EJPXB0020I: The request was processed successfully on the
server. 

=================================== 

 

3. Verify if the network IP can be accessed: 

 

a. Open a command window 

b. Execute the following: 

 

> ping localhost 

> ping myhostname.mydomain.com 

> ping 9.42.71.67 

 

Be sure to replace the third ping with your IP address. You can find it in the XMLAccess connection from the logs. Sample output provided above. 

 

4. Verify if the hosts file contains an entry for your hostname. It should have an entry similar to this: 


9.42.71.67 myhostname.mydomain.com myhostname 

 

5. Enable Installation Manager to pause on a failure by creating the log.properties. Details are in this link: 


http://www-01.ibm.com/support/docview.wss?uid=swg21594770 [http://www-01.ibm.com/support/docview.wss?uid=swg21594770]

When Installation Manager pauses on the failure, try accessing these URLs in a browser:

http ://myhostname.mydomain.com:10039/wps/portal
http ://myhostname:10039/wps/portal
http ://localhost:10039/wps/portal 

 

In this case, only the third URL actually worked. 





RESOLVING THE PROBLEM
1. Work with your network admin to determine which IP address has been assigned to the machine. If it is a dynamic IP address, you can use commands like ipconfig to determine what the current value is. Be sure you can ping this IP address. 

 

(Optional): If you have the installation paused on the error, verify the the URL can be accessed using the IP address: 

 

http ://9.42.71.67:10039/wps/portal 

 

2. Edit the hosts file by adding the following line with your values: 


9.42.71.67 myhostname.mydomain.com myhostname

3. Save and close the file.

(Optional): If you have the installation paused on the error, verify if the URL can be access using the entries added the your hosts file:

http ://myhostname.mydomain.com:10039/wps/portal
http ://myhostname:10039/wps/portal

4. Re-attempt the installation