Title: IBM PK86562: DURING CICS SHUTDOWN CKBR RECEIVES ABEND AMQH AND MESSAGE DFHAC2236 ALONG WITH MESSAGE DFHMQ0102 E - United States

Text:
z/os  A FIX IS AVAILABLE
Obtain the fix for this APAR.


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  A customer may receive the following error messages during CICS
   shutdown PLT processing:
   .
   DFHAC2236 mm/dd/yyyy hh:mm:ss applid Transaction CKBR abend AMQH
   in program DFHMQBR0 term ????.  Updates to local recoverable
   resources will be backed out.
   .
   DFHMQ0102 E mm/dd/yyyy hh:mm:ss applid Cannot start the CICS
   transaction CKBR.  EIBFN=1008 EIBRESP=16 EIBRESP2=17
   .
   The second message simply means that CICS cannot start the CKBR
   transaction because CICS is in shutdown processing and CKBR is
   defined as shutdown=disabled in the CSD.
   The problem here is that a message has been received/processed
   by CKBR at the same time as the shutdown has been initiated,
   which results in the EXEC CICS START failing with RESP=16 and
   RESP2=17. It does look as though it is unnecessary for CKBR to
   issue an AMQH abend in this situation.
   
   
    
   
   

LOCAL FIX

PROBLEM SUMMARY
 *  ****************************************************************
   * USERS AFFECTED: All                                          *
   ****************************************************************
   * PROBLEM DESCRIPTION: The following error messages are        *
   *                      output to the CICS CSMT log:            *
   *                      DFHAC2236 mm/dd/yyyy hh:mm:ss applid    *
   *                      Transaction CKBR abend AMQH in program  *
   *                      DFHMQBR0 term ????.  Updates to local   *
   *                      recoverable resources will be backed    *
   *                      out.                                    *
   *                      .                                       *
   *                      DFHMQ0102 E mm/dd/yyyy hh:mm:ss applid  *
   *                      Cannot start the CICS transaction CKBR. *
   *                      EIBFN=1008 EIBRESP=16 EIBRESP2=17       *
   ****************************************************************
   * RECOMMENDATION:                                              *
   ****************************************************************
   During CICS shutdown CKBR attempts to START a transaction and
   because the transaction is defined to CICS as SHUTDOWN DISABLED
   the START fails, returning EIBRESP=16, EIBRESP2=17.
   CKBR does not handle this condition and abends AMQH.
   Keywords: MSGDFHAC2236 MSGDFHMQ0102 MSGDFHMQ0704
   
   
    
   
   

PROBLEM CONCLUSION
 *  DFHMQBR0 is changed to handle the START failed condition and to
   output messages DFHMQ0704 E and DFHMQ0760 I which details the
   MsgId of the message that prompted the START command.
   
   
    
   
   

TEMPORARY FIX
 *  FIX AVAILABLE BY PTF ONLY
   
   
    
   
   

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   PK86562
   
   
 * REPORTED COMPONENT NAME
   CICSTS V3 Z/OS
   
   
 * REPORTED COMPONENT ID
   5655M1500
   
   
 * REPORTED RELEASE
   500
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2009-05-14
   
   
 * CLOSED DATE
   2009-10-26
   
   
 * LAST MODIFIED DATE
   2009-12-02
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
    PK48484 [http://www-01.ibm.com/support/docview.wss?uid=swg1PK48484]
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
    PK98812 [http://www-01.ibm.com/support/docview.wss?uid=swg1PK98812] UK51474
   
   

MODULES/MACROS
 *     DFHMQBP0 DFHMQBP1 DFHMQBP2 DFHMQBRH DFHMQBR0
   DFHMQBR2 DFHMQBR3 DFHMQP0@ DFHMQP1@ DFHMQP2@ DFHMQR0@ DFHMQR2@
   DFHMQR3@
   
   
    
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   CICSTS V3 Z/OS
   
   
 * FIXED COMPONENT ID
   5655M1500
   
   

APPLICABLE COMPONENT LEVELS
 * R503 PSY UK51474 [HTTPS://WWW14.SOFTWARE.IBM.COM/WEBAPP/SET2/ORDERMEDIA/SHOPCART?PTFS=UK51474]
   UP09/11/03 P F911
   
   

FIX IS AVAILABLE
 * SELECT THE PTF APPROPRIATE FOR YOUR COMPONENT LEVEL. YOU WILL BE REQUIRED TO SIGN IN. DISTRIBUTION ON PHYSICAL MEDIA IS NOT AVAILABLE IN ALL COUNTRIES.