Title: IBM A fix for Server crash on SLES 10.x with 32bit Java 6 - United States

Text:
 FLASH (ALERT)

ABSTRACT
 If starting server on SuSE Linux Enterprise Server 10.x with 32-bit Java 6, a crash will happen. This issue is caused by Karaf shell console module. The core dump info of the server crash is like this:

1XMCURTHDINFO Current thread
NULL ----------------------
3XMTHREADINFO "main" J9VMThread:0x080F7200, j9thread_t:0x080596DC, java/lang/Thread:0xA6C6D998, state:R, prio=5
3XMTHREADINFO1 (native thread ID:0x14FA, native priority:0x5, native policy:UNKNOWN)
3XMTHREADINFO2 (native stack address range from:0xB7468000, to:0xB7C69000, size:0x801000)
3XMTHREADINFO3 Java callstack:
4XESTACKTRACE at java/lang/ClassLoader.loadLibraryWithPath(Native Method)
4XESTACKTRACE at java/lang/ClassLoader.loadLibraryWithPath(ClassLoader.java:1010)
4XESTACKTRACE at java/lang/System.load(System.java:460)
4XESTACKTRACE at org/fusesource/hawtjni/runtime/Library.load(Library.java:334)
4XESTACKTRACE at org/fusesource/hawtjni/runtime/Library.doLoad(Library.java:159)
4XESTACKTRACE at org/fusesource/hawtjni/runtime/Library.load(Library.java:142)
4XESTACKTRACE at org/fusesource/jansi/internal/CLibrary.<clinit>(CLibrary.java:37)
4XESTACKTRACE at java/lang/J9VMInternals.initializeImpl(Native Method)
4XESTACKTRACE at java/lang/J9VMInternals.initialize(J9VMInternals.java:200(Compiled Code))
4XESTACKTRACE at org/fusesource/jansi/AnsiConsole.wrapOutputStream(AnsiConsole.java:64)
4XESTACKTRACE at org/fusesource/jansi/AnsiConsole.<clinit>(AnsiConsole.java:37)
4XESTACKTRACE at java/lang/J9VMInternals.initializeImpl(Native Method)
4XESTACKTRACE at java/lang/J9VMInternals.initialize(J9VMInternals.java:200(Compiled Code))
4XESTACKTRACE at org/apache/karaf/shell/console/jline/Activator.start(Activator.java:30)
4XESTACKTRACE at org/eclipse/osgi/framework/internal/core/BundleContextImpl$1.run(BundleContextImpl.java:711)
4XESTACKTRACE at java/security/AccessController.doPrivileged(AccessController.java:251)
4XESTACKTRACE at org/eclipse/osgi/framework/internal/core/BundleContextImpl.startActivator(BundleContextImpl.java:702)
4XESTACKTRACE at org/eclipse/osgi/framework/internal/core/BundleContextImpl.start(BundleContextImpl.java:683)
4XESTACKTRACE at org/eclipse/osgi/framework/internal/core/BundleHost.startWorker(BundleHost.java:381)
4XESTACKTRACE at org/eclipse/osgi/framework/internal/core/AbstractBundle.resume(AbstractBundle.java:389)
4XESTACKTRACE at org/eclipse/osgi/framework/internal/core/Framework.resumeBundle(Framework.java:1131)
4XESTACKTRACE at org/eclipse/osgi/framework/internal/core/StartLevelManager.resumeBundles(StartLevelManager.java:559)
4XESTACKTRACE at org/eclipse/osgi/framework/internal/core/StartLevelManager.resumeBundles(StartLevelManager.java:544)
4XESTACKTRACE at org/eclipse/osgi/framework/internal/core/StartLevelManager.incFWSL(StartLevelManager.java:457)
4XESTACKTRACE at org/eclipse/osgi/framework/internal/core/StartLevelManager.doSetStartLevel(StartLevelManager.java:243)
4XESTACKTRACE at org/eclipse/osgi/framework/internal/core/EquinoxLauncher.internalStart(EquinoxLauncher.java:271)
4XESTACKTRACE at org/eclipse/osgi/framework/internal/core/EquinoxLauncher.start(EquinoxLauncher.java:241)
4XESTACKTRACE at org/eclipse/osgi/launch/Equinox.start(Equinox.java:258)
4XESTACKTRACE at org/apache/geronimo/main/FrameworkLauncher.launch(FrameworkLauncher.java:181)
4XESTACKTRACE at org/apache/geronimo/main/Bootstrapper.execute(Bootstrapper.java:49)
4XESTACKTRACE at org/apache/geronimo/cli/AbstractCLI.executeMain(AbstractCLI.java:65)
4XESTACKTRACE at org/apache/geronimo/cli/daemon/DaemonCLI.main(DaemonCLI.java:32)


CONTENT
To apply this fix, please refer to this instruction: 

1. Stop the server if it is running. 

2. Unzip the attached files into the WebSphere Application Server Community Edition installation directory and ensure libjansi.so library is replaced. 

ServerCrashOnSLES10withJava6_fix_30413.zip [/support/docview.wss?uid=swg21592112&aid=2]ServerCrashOnSLES10withJava6_fix_30413.zip [/support/docview.wss?uid=swg21592112&aid=1] 

3. Start the server successfully and no crash will happen. 

 


Cross reference information Segment Product Component Platform Version Edition Application Servers WebSphere Application Server Community Edition Linux 3.0.0.1, 3.0.0.0 Entry, Enhanced, Elite