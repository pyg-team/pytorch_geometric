Title: IBM SE38523: WMQ V7.0.1.4 OR HIGHER: AMQZXMA0 CAN TAKE LARGE AMOUNTS OF CPU WHEN STARTING THE QUEUE MANAGER VIA AN AUTOSTART JOB - United States

Text:
  FIXES ARE AVAILABLE
WebSphere MQ V7.0.1 for i5/OS Fix Pack 7.0.1.8 [http://www-01.ibm.com/support/docview.wss?uid=swg24031775]
WebSphere MQ V7.0 Fix Pack 7.0.1.8 [http://www-01.ibm.com/support/docview.wss?uid=swg24031774]
WebSphere MQ v7.0.1.8 Hypervisor for AIX [http://www-01.ibm.com/support/docview.wss?uid=swg24032802]
WebSphere MQ v7.0.1.8 Hypervisor for RHEL [http://www-01.ibm.com/support/docview.wss?uid=swg24032809]
WebSphere MQ V6.0 Fix Pack 6.0.2.12 [http://www-01.ibm.com/support/docview.wss?uid=swg24033317]
WebSphere MQ V6.0 for iSeries Fix Pack 6.0.2.12 [http://www-01.ibm.com/support/docview.wss?uid=swg24033319]
Fix Pack 7.1.0.3 for WebSphere MQ V7.1 [http://www-01.ibm.com/support/docview.wss?uid=swg24035405]


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  Enduser has WebSphere MQ fixpack V7.0.1.4 or higher applied and
   a system low on system resources. When attempting to start the
   queue manager via a subsystem autostart job, the AMQZXMA0
   process may loop when trying obtain the job details of required
   WebSphere MQ proceses by repeatedly calling the QUSRJOBI api.
   .
   Additional symptoms:
   While the problem is most commonly seen with autostart jobs
   starting the queue manager (reference technote 1197928), it
   may also been seen in other environments.  Contact the Support
   Center for instructions to use the environment variable added
   by this APAR.
   .
   
   
    
   
   

LOCAL FIX
 *  Remove WebSphere MQ from the autostart processing and submit the
   subsystem and queue maanger starts as separate jobs.
   
   
    
   
   

PROBLEM SUMMARY
 *  ****************************************************************
   USERS AFFECTED:
   Users who are using any WMQ environment that encounters the
   resource issue on start up time will have to wait the uncommon
   length of time it takes for the system to start up in this
   scenario.
   
   Platforms affected:
   iSeries
   
   ****************************************************************
   PROBLEM SUMMARY:
   The root cause of the problem is a timing issue in an
   autostart job scenario.  The asQusrJobi is designed to perform
   a wait loop immediately after a SBMJOB, but in the autostart
   scenario this is happening in 2-4 parallel jobs.  The
   asQusrJobi is taking up CPU such that the submitted jobs that
   it is trying to get the info for have trouble getting enough
   CPU resource to start.  This scenario will keep looping, taking
   CPU resource.  Eventually (after 10-15 minutes) the jobs do get
   started.
   
   
    
   
   

PROBLEM CONCLUSION
 *  The development team introduced a variable to increase the wait
   time of the jobs to eliminate the race condition and reduce the
   competition and interference from the other jobs.  The new wait
   time can be dynamically controlled.
   
   The problem scenario must be verified by the IBM WMQ Support
   Team and the resolution steps should be performed only under
   the direct advice and direction of the IBM WMQ Support Team.
   The use of the code change will affect the timing of the MQ
   system and when used incorrectly may have adverse effects.
   
   ---------------------------------------------------------------
   The fix is targeted for delivery in the following PTFs:
   
                      v7.0
   Platform           Fix Pack 7.0.1.8
   --------           --------------------
   iSeries            7.0.1.8
   
                      v7.1
   Platform           Fix Pack 7.1.0.3
   --------           --------------------
   iSeries            7.1.0.3
   
   The latest available maintenance can be obtained from
   'WebSphere MQ Recommended Fixes'
   http://www-1.ibm.com/support/docview.wss?rs=171&uid=swg27006037 [http://www-1.ibm.com/support/docview.wss?rs=171&uid=swg27006037]
   
   If the maintenance level is not yet available information on
   its planned availability can be found in 'WebSphere MQ
   Planned Maintenance Release Dates'
   http://www-1.ibm.com/support/docview.wss?rs=171&uid=swg27006309 [http://www-1.ibm.com/support/docview.wss?rs=171&uid=swg27006309]
   ---------------------------------------------------------------
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   SE38523
   
   
 * REPORTED COMPONENT NAME
   WMQ ISERIES V7
   
   
 * REPORTED COMPONENT ID
   5724H7226
   
   
 * REPORTED RELEASE
   701
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2011-10-18
   
   
 * CLOSED DATE
   2011-10-26
   
   
 * LAST MODIFIED DATE
   2014-10-02
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

MODULES/MACROS
 *  RCHMGR
   
   
    
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   WMQ ISERIES V7
   
   
 * FIXED COMPONENT ID
   5724H7226
   
   

APPLICABLE COMPONENT LEVELS
 * R701 PSY
   UP