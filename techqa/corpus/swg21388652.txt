Title: IBMBUSSP.REGISTRY_FILE is an undefined name SQLCODE=-204, SQLSTATE=42704 - United States

Text:
 TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 When upgrading your WebSphere Business Events to V6.2.1 from a previous release, the upgrade fails. 

SYMPTOM
The upgrade failed and errors similar to the following are logged by the installer. 

 * [5/19/09 20:42:55:593 EDT] 0000003e validateSyste I BEER1023I: Business Spaces JDBC Definition not found. Assuming remote system installation and bypassing database validation

 * [5/19/09 20:58:59:218 EDT] 00000050 CMPConnectorF W J2CA0130I: Connection Factory <WBE Business Space Datasource_CF> has Component-managed Authentication Alias <WBE_BusSpace> but no corresponding J2C Authentication Data Entry is defined in security.xml. This may have undesirable effects.

 * [5/19/09 21:01:30:671 EDT] 00000031 ConnectionHel E com.ibm.bspace.manager.services.dbhelper.ConnectionHelper initialize() Error querying table REGISTRY_FILE in the Business Space database. Possible causes are the table does not exist, the database was down, database connectivity was lost, network error, incorrect or insufficient credentials to connect to the database. If you have recently installed Business Space, be sure the Business Space database tables have been created.
   com.ibm.db2.jcc.b.nm: "IBMBUSSP.REGISTRY_FILE" is an undefined name.. SQLCODE=-204, SQLSTATE=42704, DRIVER=3.50.152at com.ibm.db2.jcc.b.wc.a(wc.java:579)
   
 * [5/19/09 21:01:30:703 EDT] 00000031 ConnectionHel E "IBMBUSSP.REGISTRY_FILE" is an undefined name.. SQLCODE=-204, SQLSTATE=42704, DRIVER=3.50.152 SQL Error code = -204, SQLState = 42704, Cause = null


CAUSE
WebSphere Business Events V6.2.1 introduces new features that require configuration steps but the required information is not available to the installer when performing a migration from a prior release.

RESOLVING THE PROBLEM
If you are using DB2, Oracle or Cloudscape for your relational database, take the following steps: 

 

 1. Edit file <install-dir>/config/db/setenv.bat (or setenv.sh on non-Windows systems). Make the following changes:  * Change the value of DBTYPE to match the database used by your installation: DB2, ORACLE or DERBY. 
     * If your database is DERBY, you must also set the value of DERBY_TYPE to EMBEDDED or EXISTING. Choose EMBEDDED unless you know you are running with the Derby Network Server.
    
    
 2. Invoke the <install-dir>/config/was/configure_bspace_datasource.bat (or configure_bspace_datasource.sh on non-Windows systems) script.
    configure_bspace_datasource <userid> <password>
    where <userid> is the ID used for access to your database and <password> is the corresponding password. 
 3. Restart the WebSphere Business Events application.


If you are using Microsoft SQL Server for your relational database, follow the preceding steps but select DERBY for DBTYPE and EMBEDDED as the value of DERBY_TYPE. SQL Exception.txt [/support/docview.wss?uid=swg21388652&aid=2] [/support/docview.wss?uid=swg21388652&aid=1]