Title: IBM PI79692: BUNDLE INSTALLATION FAILS DURING CICS WARM START 17/10/18 PTF PECHANGE - United States

Text:
z/os  A FIX IS AVAILABLE
Obtain the fix for this APAR.


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  A CICS region is restarted, however the BUNDLE installation
   fails because the JVMServer isn't available at that time.
   
   There seems to be a timing issue during a CICS warm start when
   installing a JVMServer and it's associated BUNDLES.
   
   
   The joblog shows the following sequence of messages:
   ----------------------------------------------------
   DFHSJ1109 06/12/2016 05:25:16 An attempt to determine the
             highest semantic version of the OSGi bundle with
             symbolic name BUNDLE zzzzzzzz to install into
             JVMSERVER xxxxxx has failed with reason code
             JVMSERVER_NOT_ENABLED.
   
   DFHSJ0915 06/12/2016 05:25:18 JVMSERVER xxxxxx is now
             enabled and is ready for use.
   
   
    
   
   

LOCAL FIX

PROBLEM SUMMARY
 *  ****************************************************************
   * USERS AFFECTED: All CICS users with UI50057 applied.         *
   ****************************************************************
   * PROBLEM DESCRIPTION: CICS bundle installation failure.       *
   ****************************************************************
   * RECOMMENDATION: .                                            *
   ****************************************************************
   A CICS bundle is being installed in an OSGi (non-Liberty) JVM
   server which uses the versionRange attribute for an included
   OSGi bundle resource. The JVM server and the CICS bundle are
   both being installed at the same time, either explicitly or
   during a warm start. The result is that the OSGi bundle
   resource with versionRange is attempting to be installed while
   the JVM server is enabling. This leaves the bundle in an
   disabled state.
     Note - this APAR is also addressing a problem introduced by
   PI77502 [http://www-01.ibm.com/support/docview.wss?uid=swg1PI77502] (UI50057), where a class router failure is returned
   from the JVM when trying to determine the highest version
   within the version range of the bundle component. The problem
   is because of the use of parm_n on the method signature for
   SetByteArrayRegion within add_extended_plist_buffer in DFHSJSC.
   The use of parm_n is an uninitialised variable. The code should
   have used parm_m.
   
   
    
   
   

PROBLEM CONCLUSION
 *  UI50057
   CICS has been changed to defer the installation of a CICS
   bundle with versionRange attribute until the JVM server has
   completed its own initialisation.
     Note - this APAR is also correcting a problem introduced by
   PI77502 [http://www-01.ibm.com/support/docview.wss?uid=swg1PI77502] (UI50057) where a class router failure is returned
   from the JVM when trying to determine the highest version
   within the version range of the bundle component. The correct
   variable parm_m is now used on the call to SetByteArrayRegion.
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   PI79692
   
   
 * REPORTED COMPONENT NAME
   CICS TS Z/OS V5
   
   
 * REPORTED COMPONENT ID
   5655Y0400
   
   
 * REPORTED RELEASE
   000
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   YesPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt / Xsystem
   
   
 * SUBMITTED DATE
   2017-04-11
   
   
 * CLOSED DATE
   2017-10-18
   
   
 * LAST MODIFIED DATE
   2017-11-01
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
    PI87419 [http://www-01.ibm.com/support/docview.wss?uid=swg1PI87419] UI51219 UI51220 UI51221
   
   

MODULES/MACROS
 *  DFHAPJVM DFHAXIS2 DFHCDJNI DFHSJBD  DFHSJDM  DFHSJDS  DFHSJDUF
   DFHSJIN  DFHSJIS  DFHSJJS  DFHSJL   DFHSJNT  DFHSJRE  DFHSJRL
   DFHSJRM  DFHSJSC  DFHSJSM  DFHSJST  DFHSJTH  DFHSJTRI DFHSJXM
   DFJ@H356 DFJ@H360 DFJ@H427 DFJ@H467 DFJ@H468 DFJDTCOE DFJOUTRE
   DFJWLPPL
   
   
    
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   CICS TS Z/OS V5
   
   
 * FIXED COMPONENT ID
   5655Y0400
   
   

APPLICABLE COMPONENT LEVELS
 * R000 PSY UI51219 [HTTPS://WWW14.SOFTWARE.IBM.COM/WEBAPP/SET2/ORDERMEDIA/SHOPCART?PTFS=UI51219]
   UP17/10/20 P F710 {
   
   
 * R003 PSY UI51221 [HTTPS://WWW14.SOFTWARE.IBM.COM/WEBAPP/SET2/ORDERMEDIA/SHOPCART?PTFS=UI51221]
   UP17/10/20 P F710 {
   
   
 * R00D PSY UI51220 [HTTPS://WWW14.SOFTWARE.IBM.COM/WEBAPP/SET2/ORDERMEDIA/SHOPCART?PTFS=UI51220]
   UP17/10/23 P F710 {
   
   

FIX IS AVAILABLE
 * SELECT THE PTF APPROPRIATE FOR YOUR COMPONENT LEVEL. YOU WILL BE REQUIRED TO SIGN IN. DISTRIBUTION ON PHYSICAL MEDIA IS NOT AVAILABLE IN ALL COUNTRIES.