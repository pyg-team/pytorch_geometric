Title: IBM IC83550: IOPM - NO STATEMENT TEXT IN EI OR SQL DASHBOARD DUE TO -803 ERROR ON DIM_STATEMENT_TEXT BATCH MERGE STATEMENT. - United States

Text:
 SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  DIM_STATEMENT_TEXT table is filled by two separated threads
   using batch merge. In some timing conditions two threads will
   try to insert the same statement texts coming from different
   metrics sources. In such situation one of batch executions will
   fail with -803 sql error.
   .
   Fix:
   Each thread will retry batch insert in case of -803 SQL error.
   .
   Possible errors in OPM Server traces:
   .
   DL    [2012-05-14 15:23:46.265] [Facts_flushe] [CommonState.]
   [V_DIM_STATEMENTS]: insertTOs( 35) failed. Reason:
   com.ibm.db2.jcc.am.BatchUpdateException:
   [jcc][102][10040][3.63.81] Batch failure.  The batch was
   submitted, but at least one exception occurred on an individual
   member of the batch.
   Use getNextException() to retrieve the exceptions for specific
   batched elements. ERRORCODE=-4229, SQLSTATE=null
   .
   DL    [2012-05-14 15:23:46.266] [Facts_flushe] [DAOExceptio.]
   com.ibm.db2pm.server.dataloader.dao.DAOException:
   [V_DIM_STATEMENTS]:
   Inserting statements failed. Reason:
   com.ibm.db2.jcc.am.BatchUpdateException:
   [jcc][102][10040][3.63.81] Batch failure.  The batch was
   submitted, but at least one exception occurred on an individual
   member of the batch.
   Use getNextException() to retrieve the exceptions for specific
   batched elements. ERRORCODE=-4229, SQLSTATE=null at
   com.ibm.db2pm.server.dataloader.dao.dims.impl.CommonStatementsDA
   O.insertTOs
   .
   Caused by: com.ibm.db2.jcc.am.BatchUpdateException:
   [jcc][102][10040][3.63.81] Batch failure.  The batch was
   submitted, but at least one exception occurred on an individual
   member of the batch. Use getNextException() to retrieve the
   exceptions for specific batched elements. ERRORCODE=-4229,
   SQLSTATE=null
           at com.ibm.db2.jcc.am.fd.a(fd.java:407)
           at com.ibm.db2.jcc.am.n.a(n.java:386)
           at com.ibm.db2.jcc.am.zn.a(zn.java:4901)
           at com.ibm.db2.jcc.am.zn.c(zn.java:4532)
   first nested exceptioncom.ibm.db2.jcc.am.BatchUpdateException:
   [jcc][102][10040][3.63.81] Batch failure.  The batch was
   submitted, but at least one exception occurred on an individual
   member of the batch. Use getNextException() to retrieve the
   exceptions for specific batched elements. ERRORCODE=-4229,
   SQLSTATE=null, another nested exception:
   com.ibm.db2.jcc.am.SqlIntegrityConstraintViolationException:
   Error for
   batch element #1: DB2 SQL Error: SQLCODE=-803, SQLSTATE=23505,
   SQLERRMC=4;DB2PM_21.DIM_STATEMENT_TEXT, DRIVER=3.63.81,
   another nested exception:
   com.ibm.db2.jcc.am.SqlIntegrityConstraintViolationException:
   Error for
   batch element #2: DB2 SQL Error: SQLCODE=-803, SQLSTATE=23505,
   SQLERRMC=4;DB2PM_21.DIM_STATEMENT_TEXT, DRIVER=3.63.81,
   another nested exception:
   com.ibm.db2.jcc.am.SqlIntegrityConstraintViolationException:
   Error for
   batch element #3: DB2 SQL Error: SQLCODE=-803, SQLSTATE=23505,
   SQLERRMC=4;DB2PM_21.DIM_STATEMENT_TEXT, DRIVER=3.63.81
   
   
    
   
   

LOCAL FIX
 *  N/A
   
   
    
   
   

PROBLEM SUMMARY
 *  The logic has been corrected.
   
   
    
   
   

PROBLEM CONCLUSION
 *  Install InfoSphere Optim Performance Manager fix pack 5.1.1.1
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   IC83550
   
   
 * REPORTED COMPONENT NAME
   OPT PER MGR DB2
   
   
 * REPORTED COMPONENT ID
   5724Y9400
   
   
 * REPORTED RELEASE
   511
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2012-05-18
   
   
 * CLOSED DATE
   2012-09-03
   
   
 * LAST MODIFIED DATE
   2012-09-03
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   OPT PER MGR DB2
   
   
 * FIXED COMPONENT ID
   5724Y9400
   
   

APPLICABLE COMPONENT LEVELS
 * R511 PSY
   UP