Title: IBM PM09223: CLASSCASTEXCEPTION WHEN WEBSPHERE V6.1 WEB SERVICES APPLICATION CONNECTS TO SERVICE INTEGRATION BUS MESSAGING ENGINE - United States

Text:
  FIXES ARE AVAILABLE
6.1.0.33: Java SDK 1.5 SR12 FP1 Cumulative Fix for WebSphere [http://www-01.ibm.com/support/docview.wss?uid=swg24027786]
6.1.0.35: Java SDK 1.5 SR12 FP2 Cumulative Fix for WebSphere [http://www-01.ibm.com/support/docview.wss?uid=swg24028574]
6.1.0.37: Java SDK 1.5 SR12 FP3 Cumulative Fix for WebSphere [http://www-01.ibm.com/support/docview.wss?uid=swg24029525]
6.1.0.47: WebSphere Application Server V6.1 Fix Pack 47 [http://www-01.ibm.com/support/docview.wss?uid=swg24035508]
6.1.0.39: Java SDK 1.5 SR12 FP4 Cumulative Fix for WebSphere Application Server [http://www-01.ibm.com/support/docview.wss?uid=swg24030426]
6.1.0.41: Java SDK 1.5 SR12 FP5 Cumulative Fix for WebSphere Application Server [http://www-01.ibm.com/support/docview.wss?uid=swg24031035]
6.1.0.43: Java SDK 1.5 SR13 Cumulative Fix for WebSphere Application Server [http://www-01.ibm.com/support/docview.wss?uid=swg24031963]
6.1.0.45: Java SDK 1.5 SR14 Cumulative Fix for WebSphere Application Server [http://www-01.ibm.com/support/docview.wss?uid=swg24033270]
6.1.0.47: Java SDK 1.5 SR16 Cumulative Fix for WebSphere Application Server [http://www-01.ibm.com/support/docview.wss?uid=swg24035649]


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  When a Websphere v6.1 Web Services application attempts to
   connect to the Service Integration Bus messaging engine,
   java.lang.ClassCastException occurs. SystemOut.log
   contains the following error:
   com.ibm.ws.sib.webservices.exception.SIBWSUnloggedException:
   CWSWS1007E: The following exception occurred:
   com.ibm.ws.sib.webservices.multiprotocol.invokers.Invocation
   Exception:CWSWS3014E: Failed to get information from request
   configuration due to exception com.ibm.ws.sib.webservices.
   multiprotocol.PortConfigurationException: com.ibm.ws.sib.
   webservices.exception.SIBWSUnloggedException:
   CWSWS1009E: Exception whilst restoring WSDL: java.lang.
   ClassCastException: javax.wsdl.extensions.UnknownExtensibility
   Element incompatible with com.ibm.wsdl.spi.extensions.
   lightweightschema.LightWeightSchema
   
   The FFDC has the following stack:
   Exception = java.lang.ClassCastException
   Source = com.ibm.ws.sib.webservices.configuration.models.
   SIBWSInboundPort.configureTypeMappings probeid = 975
   Stack Dump = java.lang.ClassCastException: javax.wsdl.
   extensions.UnknownExtensibilityElement incompatible with
   com.ibm.wsdl.spi.extensions.lightweightschema.LightWeight
   Schema
   at com.ibm.wsdl.extensions.lightweightschema.LightWeight
     SchemaSerializer.marshall(Unknown Source)
   at com.ibm.wsdl.xml.WSDLWriterImpl.printExtensibility
     Elements(Unknown Source)
   at com.ibm.wsdl.xml.WSDLWriterImpl.printTypes(Unknown
     Source)
   at com.ibm.wsdl.xml.WSDLWriterImpl.printDefinition(Unknown
     Source)
   at com.ibm.wsdl.xml.WSDLWriterImpl.writeWSDL(Unknown
     Source)
   at com.ibm.wsdl.xml.WSDLWriterImpl.getDocument(Unknown
     Source)
   at com.ibm.ws.sib.webservices.configuration.models.SIBWSOut
     boundPort.configureTypeMappings(SIBWSOutboundPort.java:
     683)
   at com.ibm.ws.sib.webservices.configuration.models.SIBWSOut
     boundPort.getWsddPort(SIBWSOutboundPort.java:193)
   at com.ibm.ws.sib.webservices.configuration.models.SIBWSOut
     boundPort.createEngineConfig(SIBWSOutboundPort.java:552)
   at com.ibm.ws.sib.webservices.configuration.models.SIBWSOut
     boundPort.getEngineConfiguration(SIBWSOutboundPort.
     java:324)
   
   
    
   
   

LOCAL FIX

PROBLEM SUMMARY
 *  ****************************************************************
   * USERS AFFECTED:  All IBM WebSphere Application Server users  *
   *                  of Web Services Gateway.                    *
   ****************************************************************
   * PROBLEM DESCRIPTION: ClassCastException when WebSphere       *
   *                      V6.1 Web Services Application           *
   *                      connects to Service Integration Bus     *
   *                      Messaging Engine                        *
   ****************************************************************
   * RECOMMENDATION:                                              *
   ****************************************************************
   When a Websphere v6.1 Web Services application attempts to
   connect to the Service Integration Bus messaging engine,
   java.lang.ClassCastException occurs. SystemOut.log contains
   the following error:
   com.ibm.ws.sib.webservices.exception.SIBWSUnloggedException:
   CWSWS1007E: The following exception occurred:
   com.ibm.ws.sib.webservices.multiprotocol.invokers.Invocation
   Exception:CWSWS3014E: Failed to get information from request
   configuration due to exception
   com.ibm.ws.sib.webservices.multiprotocol.PortConfigurationExcept
   ion:
   com.ibm.ws.sib.webservices.exception.SIBWSUnloggedException:
   
   CWSWS1009E: Exception whilst restoring WSDL:
   java.lang.ClassCastException:
   javax.wsdl.extensions.UnknownExtensibilityElement incompatible
   with
   com.ibm.wsdl.spi.extensions.lightweightschema.LightWeightSchema
   
   The root cause was that the (singleton) WSDLFactory instance
   was stored in a WeakReference, which meant that the reference
   could be cleared by the Garbage Collector. The design did not
   allow for this.
   
   
    
   
   

PROBLEM CONCLUSION
 *  The WSDLFactory instance is now stored in such a way that the
   Garbage Collector will not clear it.
   
   The fix for this APAR is currently targeted for inclusion in
   fix pack 6.1.0.33.  Please refer to the Recommended Updates
   page for delivery information:
   http://www.ibm.com/support/docview.wss?rs=180&uid=swg27004980 [http://www.ibm.com/support/docview.wss?rs=180&uid=swg27004980]
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   PM09223
   
   
 * REPORTED COMPONENT NAME
   SIBWS
   
   
 * REPORTED COMPONENT ID
   620600100
   
   
 * REPORTED RELEASE
   200
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2010-03-08
   
   
 * CLOSED DATE
   2010-03-22
   
   
 * LAST MODIFIED DATE
   2010-03-22
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   SIBWS
   
   
 * FIXED COMPONENT ID
   620600100
   
   

APPLICABLE COMPONENT LEVELS
 * R200 PSY
   UP