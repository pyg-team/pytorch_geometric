Title: IBM J2CA0036E exception error received when attempting to start WebSphere Application Server - United States

Text:
 TECHNOTE (TROUBLESHOOTING)

THIS DOCUMENT APPLIES ONLY TO THE FOLLOWING LANGUAGE VERSION(S):
 English 

PROBLEM(ABSTRACT)
 After you set up DB2 in your WebSphere Commerce Development environment, you attempt to start WebSphere Application Server. The server fails to start and you receive the following exception:

J2CA0036E: An exception occurred while invoking method setDataSourceProperties on com.ibm.ws.rsadapter.spi.WSManagedConnectionFactoryImpl used by resource jdbc/WebSphere Commerce DB2 DataSource demo : com.ibm.ws.exception.WsException: DSRA0023E: The DataSource implementation class "com.ibm.issw.jdbc.wrappers.WrappedDB2JCCDataSource" could not be found. 

SYMPTOM
You see the following exception in the trace.log file: 

[2/22/12 11:39:29:245 EST] 00000008 J2CUtilityCla E J2CA0036E: An exception occurred while invoking method setDataSourceProperties on com.ibm.ws.rsadapter.spi.WSManagedConnectionFactoryImpl used by resource jdbc/WebSphere Commerce DB2 DataSource demo : com.ibm.ws.exception.WsException: DSRA0023E: The DataSource implementation class "com.ibm.issw.jdbc.wrappers.WrappedDB2JCCDataSource" could not be found. 

 at java.net.URLClassLoader.findClass(URLClassLoader.java:434) 

 at com.ibm.ws.bootstrap.ExtClassLoader.findClass(ExtClassLoader.java:191) 

 at java.lang.ClassLoader.loadClass(ClassLoader.java:660) 

 at com.ibm.ws.bootstrap.ExtClassLoader.loadClass(ExtClassLoader.java:111) 

 at java.lang.ClassLoader.loadClass(ClassLoader.java:626) 

...


CAUSE
The class com.ibm.issw.jdbc.wrappers.WrappedDB2JCCDataSource is part of the SQL Profiler [http://www.ibm.com/developerworks/websphere/library/techarticles/0905_roberts/0905_roberts.html] tool, which is not part of the Support Offering for IBM WebSphere Commerce. The WebSphere Application Server was unable to start because the classes for the SQL Profiler tool are missing.


RESOLVING THE PROBLEM
You can restore the missing classes in either of the following ways: 

* Follow the installation instructions for the SQL Profiler tool to install the product and restore the classes. 

or 

* Update the WebSphere Application Server profile's data source definition, as outlined below. 

In the resources.xml file under: 

/WC/META-INF/ibmconfig/cells/defaultCell/applications/defaultApp/deployments/defaultApp/resources.xml 

Replace this line: 

<!--<resources.jdbc:JDBCProvider description="DB2 JDBC Provider" implementationClassName="com.ibm.issw.jdbc.wrappers.WrappedDB2JCCDataSource" name="DB2 JDBC Driver" xmi:id="JDBCProvider_1118288468415"> 

with the following line: 

 <resources.jdbc:JDBCProvider description="DB2 JDBC Provider" implementationClassName="com.ibm.db2.jcc.DB2ConnectionPoolDataSource" name="DB2 JDBC Driver" xmi:id="JDBCProvider_1118288468415">