Title: IBM IV97224: QBR PREVIEW REPORT DO NOT WORK WHEN THE LOAD BALANCER OR PROXY SERVER REDIRECTS THE REQUEST BY CHANGING THE URL - United States

Text:
 SUBSCRIBE TO THIS APAR
By subscribing, you receive periodic emails alerting you to the status of the APAR, along with a link to the fix after it becomes available. You can track this item individually or track all items by product.

Notify me when this APAR changes.

Notify me when an APAR for this component changes.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  Customer is able to correctly run saved reports. Issue is only
   happening when doing preview while creating/editing QBR (URL
   contains &__transient=true).
   After trying to preview, BIRT report preview tab/window is
   opened but the report itself is not executed. The user does not
   see any data displayed, no record is added to REPORTUSAGELOG,
   no logs are written to SystemOut.log nor SystemErr.log.
   When running saved report, there is URL without port specified
   but when running preview, port of current application server is
   specified in URL. This will cause that report wont get
   executed, because user is not allowed to communicate through
   that port.
   Most Load Balancers do not change the URL while forwarding the
   request to the actual server.
   Say when a user enters https://aaa.com/maximo  then the same
   URL is forwarded to the actual server. But sometimes
   loadbalancer will change the url to:
   https://aaa.com:6000/maximo. [https://aaa.com:6000/maximo.]
   In that case QBR preview report do not work.
   This environment was installed as IBM Control Desk 7.6 and later
   upgraded to SP1.
   Please take note that this is separate deployment environment
   with :
   2 UI/Report servers,
   2 MIF servers
   2 CRON servers behind F5 Firewall/Load-Balancer.
   UI and reporting features reside on the same application
   servers, it is not only for BIRT reports.
   User is not able to get directly to servers, he has to use F5
   URLs.
   Steps to reproduce:
   Requires F5 Load Balancer setup, so not reproducible in
   standard Maximo.
   It is as simple as opening any application.
   i.e.
   Go to Service Desk module, Incidents application
   Select Create Report icon and then try to preview report button.
   Note. the number of entries does not matter in this case.
   As for the URL take a look at this when using Preview Report
   button, a new tab is opened in
   browser with URL like this:
   https://<CLIENTHOSTNAME>/maximo/report?
   __report=INCIDENT_MAXADMIN_1492589237.rptdesign&appname=INCIDENT [https://<CLIENTHOSTNAME>/maximo/report?__report=INCIDENT_MAXADMIN_1492589237.rptdesign&appname=INCIDENT]
   &__transient=true&__requestid=1492
   589320582&uisessionid=24&csrftoken=d5v1pmkrb8enhvnh6ac4ked2j1
   If you do not use "Preview Report", but  "Run and Save
   Completed Report" button URL will be like:
   https://<CLIENTHOSTNAME>/maximo/report?
   __report=INCIDENT_MAXADMIN_1492606500.rptdesign&appname=INCIDENT [https://<CLIENTHOSTNAME>/maximo/report?__report=INCIDENT_MAXADMIN_1492606500.rptdesign&appname=INCIDENT]
   &__requestid=1492606593975&uisessi
   onid=26&csrftoken=9aa4u2cqdhach3a0uhr38blej1
   You can see that only difference between URLs is that
   &__transient=true as mentioned before.
   When I run transient report, I get that wrong output. When
   running non-transient report,
   everything is fine.
   PRODUCT VERSION:
   Tivoli's process automation engine 7.6.0.3 Build 20160114-1313
   DB Build V7603-151
   IBM Maximo for Service Providers 7.6.0.0 Build 20141125-1930 DB
   Build V7600-05
   IBM TPAE Integration Framework 7.6.0.3 Build 20160108-1912 DB
   Build V7603-21
   IBM Endpoint Manager Integration Enablement 7.6.0.1049 Build
   201602181237 DB Build V7601-01
   IBM Endpoint Manager Integration Configuration 7.6.0.1049 Build
   201602181237 DB Build V7530-11
   Asset Management for IBM Control Desk 7.6.0.1049 Build
   201602181302 DB Build V7601-03
   Service Desk for IBM Control Desk 7.6.0.1049 Build 201602181237
   DB Build V7601-04
   Incident Management for IBM Control Desk 7.6.0.1049 Build
   201602181237
   DB Build V7601-01
   Service Catalog for IBM Control Desk 7.6.0.1049 Build
   201602181237 DB
   Build V7601-08
   AFFECTED APPLICATION (for Maximo Only): Birt Reports
   INDUSTRY SOLUTION/ADD ON (if applicable): N/A
   
   
    
   
   

LOCAL FIX
 *  Dev to provide fix
   
   
    
   
   

PROBLEM SUMMARY
 *  ****************************************************************
   * USERS AFFECTED:                                              *
   * Maximo users running BIRT reporting.                         *
   ****************************************************************
   * PROBLEM DESCRIPTION:                                         *
   * QBR report previews fail when transient requests are         *
   * performed while using a load balancer.                       *
   ****************************************************************
   * RECOMMENDATION:                                              *
   ****************************************************************
   
   
    
   
   

PROBLEM CONCLUSION
 *  The fix for this issue is included in the following package:
                          | Release 7.6.0.9 of Base Services.
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   IV97224
   
   
 * REPORTED COMPONENT NAME
   BIRT INTEG-SYST
   
   
 * REPORTED COMPONENT ID
   5724R46B2
   
   
 * REPORTED RELEASE
   760
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt / Xsystem
   
   
 * SUBMITTED DATE
   2017-06-15
   
   
 * CLOSED DATE
   2017-08-07
   
   
 * LAST MODIFIED DATE
   2017-08-07
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   BIRT INTEG-SYST
   
   
 * FIXED COMPONENT ID
   5724R46B2
   
   

APPLICABLE COMPONENT LEVELS
 * R760 PSY
   UP