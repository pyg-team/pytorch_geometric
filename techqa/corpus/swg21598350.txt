Title: IBM Portal Upgrades:  Best Practices for 8.0 - United States

Text:
8000eGA TECHNOTE (FAQ)

QUESTION
This document is meant to provide a basic set of what to do and what not to do when performing Portal upgrades.

Failure to observe these points, particularly in the 'What NOT to do' section can result in an unusable system and often results in complete reinstalls

ANSWER
What to do: 

 * Ensure you have a working backup of your environment. This includes a full file structure backup AND a full database backup. Having only one or the other is no better than having no backup at all. 
   
   Customers using DB2 on z/OS: When taking the database backup it is sufficient to only take a backup of the data but not the DB2 catalog as separate SQL files are provided to revert changes applied to the database schema during Fix Pack or Combined Cumulative Fix installation.
   
   
 * Ensure file permissions are set correctly for UNIX environments. If you are using a non-root user, ensure that the user owns the AppServer directory, the PortalServer directory and the profile directory. Ensure that the non-root user has full access to the /tmp directory. 
 * Ensure you have followed all of the 'Before You Begin' steps from the upgrade instructions. 
 * If needed, upgrade all WebSphere Application Server (WAS) environments and ensure Portal still functions before starting the Portal upgrades. For example, if you have a two node cluster, update the Deployment Manager, WAS on the primary node, and WAS on the secondary node first. Then verify your Portal cluster still works on the higher level of WAS. Then you can begin the Portal upgrades. 
 * If passwords are preserved during Fix Pack or Combined Cumulative Fix installation and you want to manually delete the passwords, open the wkplc.properties file and include the following line in the file: PWordDelete=true. Then run the following task from the <wp_profile_root>/ConfigEngine/ directory to delete the passwords  * Windows: ConfigEngine.bat action-delete-passwords-fixpack 
    * Unix/Linux: ./ConfigEngine.sh action-delete-passwords-fixpack 
    * IBM i: ConfigEngine.sh action-delete-passwords-fixpack 
   
   
 * For a cluster, all nodes in the cluster should have the same apar/CF levels. 
 * For z/OS federated, unclustered nodes should be upgraded using the cluster Readme document. In the case of a single federated, unclustered node, the upgrade procedure is the same as upgrading the primary node of a z/OS cluster. 
 * If you are using Microsoft Internet Protocol (IP) Version 6 and you have specified the WpsHostName property as an Internet Protocol address, normalize the Internet Protocol address by placing square brackets around the IP address as follows: WpsHostName=[my.IPV6.IP.address]. 
 * Upgrade all profiles associated with the Portal binary directory. It is not supported to upgrade only some of the profiles and run a profile that was not upgraded with the upgraded Portal binaries.



What NOT to do:  * If upgrading a clustered environment, upgrade the primary node first. DO NOT upgrade a secondary first. 
 * If an upgrade fails, DO NOT attempt to apply a different Fix Pack or Combined Cumulative Fix on top of a Fix Pack or Combined Cumulative Fix failure. This is the most common action that results in a complete reinstall. 
 * Windows and UNIX only: Do NOT upgrade a node that is federated but not clustered. Create a cluster first, even if it is just one node. 
 * If an upgrade fails, DO NOT attempt to further configure the Portal server (reconfigure secuirty, transfer the database, etc) until you have resolved the upgrade failure. 
 * When restoring a backup, DO NOT simply overwrite the existing WebSphere directory with a backed up one. You run the risk of corrupting the environment since overwriting the directory might not remove new files that had been laid down by the failed upgrade. 
   



 * 
 *