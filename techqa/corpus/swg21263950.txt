Title: IBM Maximo 5 - ORA-00942 (SQL 20942): "Table or View Does Not Exist" - United States

Text:
missing table TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 In Maximo 4 and Maximo 5 Control Center on Oracle, the error ORA-00942 (SQL-20942) , "table or view does not exist," can occur for different reasons. The problem can be resolved by editing the sql.ini or running SQL statements. 

RESOLVING THE PROBLEM
Description
Oracle error ORA-00942 indicates that the user does not have access to the table. This may occur because of one of the following situations: 

 * 
 * 
 * 
 * 
 * 


When Maximo is installed, public synonyms and grants are created. However, when a new database is created from an already existing Maximo database (usually using export and import) the public synonyms and\or grants may not get copied to the target instance correctly. 

Solution Follow the instructions that are listed under the section in which the error message listed matches the message you received. 

Procedure 1

MAXIMO Login: SQL error: 20942 - User does not have MAXIMO access privileges. 

If you get ORA-20942 when you attempt to log in to Maximo, it means either that the user does not have the select privilege granted on the MAXENCRYPT table, or the public synonym is missing on the MAXENCRYPT table. 

 * 
 *  
   select * from maximo.maxencrypt; 
 * 
 * 
 *  
 * First make sure that the group user has this grant by executing the following SQL: 
 *  
   select ttname,selectauth from systabauth where grantee='GROUP_NAME'; 
 * 
 * 
 *  
 * The 'selectauth' value has to be 'Y' on MAXENCRYPT. If it is not, execute the following: 
 *  
   grant select on MAXENCRYPT to group_name; 
 * 
 * 
 *  
   i. Drop and re-add the users who are not able to connect via Signature Security. ii. Run the following SQL statement to generate a script that grants the select privilege to each user. Spool the output to a file and then execute the script file which you generated. 
   
    * 
    * set hea off;
    * select 'grant select on MAXENCRYPT to ' || usrname 
    * from maxusergroups where usrname not in ('SYSADM','MAXIMO');
   
   
   iii. If the grants are missing because of an improper export/import of the database, you can rerun the export/import and answer Yes to the prompt regarding grants. 
   
   
 * 
 * 
 *  
   select * from maxencrypt; 
 * 
 * 
 * select * from maxencrypt;
 * 
 *  
   set hea off; select 'create public synonym ' || table_name || ' for ' || table_name || ';' from cat;
   
   

Procedure 2

SQL error: 942 - "User does not have MAXIMO access privileges" in Database Configuration 

 * 
 *  
   [ ORAGTWY] SUBSTITUTE=SYSSQL.,
   
   
 * 
 * 
 *  
   Select NAME From SYSSQL.SYSTABLES Where NAME In (Select 'XX'|| tbname From maxtables where restoredata != :1) 
 * 
 * 
 *  
   Select NAME From SYSTABLES Where NAME In (Select 'XX' || tbname From maxtables where restoredata != :1 ) 
 * 
 * 
 *  
   i. Run the script script to create the views. To do this, connect as SYS or INTERNAL to your Maximo database using SQL*Plus or SQLTalk and run the script. This can be done as follows in SQL*Plus:  * 
    * 
    * @c:\maximo\maxinst\view8.ora (for Oracle 8) 
    * In SQLTalk, the syntax would be: 
    * run c:\maximo\maxinst\view7.ora (for Oracle 7) 
    * run c:\maximo\maxinst\view8.ora (for Oracle 8)
   
   
   ii. Make sure that you just ran the above statement as the Oracle users SYS or INTERNAL. Do not confuse these users with the Oracle user SYSTEM or the MAXIMO user SYSADM. If you ran view7.ora as SYSTEM or SYSADM, you will continue to get the SQL 942 error. You can download the script appropriate for your Oracle version here if you are unable to locate it. 
   
   view7.zip [/support/docview.wss?uid=swg21263950&aid=2] [/support/docview.wss?uid=swg21263950&aid=1]view8.zip [/support/docview.wss?uid=swg21263950&aid=4] [/support/docview.wss?uid=swg21263950&aid=3] 
   
   iii. After the script has been successfully run, continue configuring where you left off.
   
   

Procedure 3 

SQL error: 942 - "User does not have MAXIMO access privileges" in MAXIMO Signature Security: 
If you get this error in the Signature Security application, then the views which are created by the VIEW7.ORA script do not exist or cannot be accessed. If the database was imported from an export file, then you need to run VIEW7.ORA as user SYS. This is because tables and views owned by SYS are never exported, even during a full export of the database. The views will have to be recreated. Follow the steps for Procedure 2 on this document. You can then continue working in the Signature Security application. Procedure 4

SQR Error: Program Aborting. Report not created. 

SQR reports will not run if grants on or public synonyms for the tables referenced in the report are missing. You will get an error similar to the following: 

 * 
 * SQLBase SQLCOM error 20942 in cursor 3:
 * ORA-00942: table or view does not exist 
 * SQL: select name, company, address1, address2, address3, address4 FROM company 
 * Error at: select 
 * Error on line 104: Error in SQL statement.


You have to grant select the select privilege on all these tables to all users who run the report. Additionally, the tables need to have public synonyms. Please refer to Procedure 1 to resolve this problem. Substitute the names of those tables in the report wherever MAXENCRYPT is referenced in that procedure. 
 

HISTORICAL NUMBER
 M01687 

PRODUCT ALIAS/SYNONYM
 MAXIMO