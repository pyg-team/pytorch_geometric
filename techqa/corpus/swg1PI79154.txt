Title: IBM PI79154: ANALYZE FAILURES WITH "HIGH2KEY IS OUT OF RANGE ERRORS" - United States

Text:
 SUBSCRIBE TO THIS APAR
By subscribing, you receive periodic emails alerting you to the status of the APAR, along with a link to the fix after it becomes available. You can track this item individually or track all items by product.

Notify me when this APAR changes.

Notify me when an APAR for this component changes.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  Analyze uses the Big SQL java IO reader to scan the table
   and gather statistics on the table.  When computing column
   statistics, Analyze computes HIGH2KEY and LOW2KEY values which
   represent the largest and smallest values of that column. If
   the column is of DATE type and contains negative values, the
   Java Reader attempts to convert that value to a positive DATE.
   This leads Analyze to believe that the LOW2KEY value is higher
   than the HIGH2KEY.  This raises a flag to Analyze which fails
   with the following warning:
   
   2017-03-16 17:20:36,754 WARN
   com.ibm.biginsights.catalog.translator.hive.HiveExceptionTransla
   tor [Thread-5] : [BSL-0-2d8fe6b92]: The catalog statistic
   "2012-03-27" for column "HIGH2KEY" is out of range for its
   target column, has an invalid format, or is inconsistent in
   relation to some other statistic. Reason Code = "3"..
   SQLCODE=-1227, SQLSTATE=23521, DRIVER=4.21.34
   com.ibm.db2.jcc.am.SqlIntegrityConstraintViolationException:
   The catalog statistic "2012-03-27" for column "HIGH2KEY" is out
   of range for its target column, has an invalid format, or is
   inconsistent in relation to some other statistic. Reason Code =
   "3".. SQLCODE=-1227, SQLSTATE=23521, DRIVER=4.21.34
   
   
   The fix for this issue is to allow the following (01-01-0001)
   as the earliest valid date for the Java Reader.  Dates before
   this time will be converted to a NULL value by Analyze.  This
   will allow Analyze to proceed without the "HIGH2KEY is out of
   range errors".
   
   
    
   
   

LOCAL FIX
 *  N/A
   
   
    
   
   

PROBLEM SUMMARY
 *  See error description.
   
   
    
   
   

PROBLEM CONCLUSION
 *  The problem is fixed in Version 4.3 and later fix packs.
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   PI79154
   
   
 * REPORTED COMPONENT NAME
   INFO BIGINSIGHT
   
   
 * REPORTED COMPONENT ID
   5725C0900
   
   
 * REPORTED RELEASE
   420
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt / Xsystem
   
   
 * SUBMITTED DATE
   2017-03-30
   
   
 * CLOSED DATE
   2017-04-07
   
   
 * LAST MODIFIED DATE
   2017-04-07
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

MODULES/MACROS
 *  n/a
   
   
    
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   INFO BIGINSIGHT
   
   
 * FIXED COMPONENT ID
   5725C0900
   
   

APPLICABLE COMPONENT LEVELS
 * R430 PSY
   UP