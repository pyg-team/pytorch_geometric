Title: IBM A "Duplicate application, commsvc. Application may already have been started" exception occurs when starting a CEA 1.0.0.1 cluster - United States

Text:
CEAFPRnotes TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 The following exception occurs when you start a cluster after installing Feature Pack for CEA Version 1.0.0.1:

FFDC Exception:com.ibm.ws.exception.RuntimeWarning SourceId:com.ibm.wsspi.runtime.component.WsComponentImpl 
ProbeId:297 
Reporter:com.ibm.ws.runtime.component.
CompositionUnitMgrImpl@41324132
com.ibm.ws.exception.RuntimeWarning: com.ibm.ws.exception.
ConfigurationWarning: Duplicate application, commsvc. 
Application may already have been started.
at com.ibm.ws.runtime.component.ApplicationMgrImpl.
start(ApplicationMgrImpl.java:2051)
at com.ibm.ws.runtime.component.CompositionUnitMgrImpl.
start(CompositionUnitMgrImpl.java:437)
at com.ibm.ws.runtime.component.CompositionUnitImpl.
start(CompositionUnitImpl.java:122)
at com.ibm.ws.runtime.component.CompositionUnitMgrImpl.
start(CompositionUnitMgrImpl.java:380)
at com.ibm.ws.runtime.component.CompositionUnitMgrImpl.
access$300(CompositionUnitMgrImpl.java:108)
at com.ibm.ws.runtime.component.CompositionUnitMgrImpl
$CUInitializer.run(CompositionUnitMgrImpl.java:935)
at com.ibm.wsspi.runtime.component.WsComponentImpl
$_AsynchInitializer.run(WsComponentImpl.java:349)
at com.ibm.ws.util.ThreadPool$Worker.
run(ThreadPool.java:1550)
Caused by: com.ibm.ws.exception.ConfigurationWarning: 
Duplicate application, commsvc. 
Application may already have been started.
at com.ibm.ws.runtime.component.ApplicationMgrImpl.
initializeApplication(ApplicationMgrImpl.java:349)
at com.ibm.ws.runtime.component.ApplicationMgrImpl.
start(ApplicationMgrImpl.java:2038)
... 7 more


RESOLVING THE PROBLEM
To resolve this issue, complete the following steps:

Note: Change instances of the cell_name, cluster_name, node_name, server_name variables with the information for your environment.



 1. Enter the following command on a command line to launch the wsadmin tool and use the Jython programming language:
    
    wsadmin -lang jython
    
    
 2. Enter the following command to save the deployment targets:
    
    modules = AdminApp.listModules('commsvc',['-server'])
    
    The results should contain a list of targets that you will use in steps 3 through 5. For example:
    
    'commsvc#commsvc.rest.war+WEB-INF/web.xml#
    WebSphere:cell=wt0cell,cluster=wt0clust+WebSphere:
    cell=wt0cell,node=wt0node5,server=wt0pbx1+WebSphere:
    cell=wt0cell,node=wt0node4,server=wt0svt+WebSphere:
    cell=wt0cell,node=wt0node4,server=wt0s000+WebSphere:
    cell=wt0cell,node=wt0node4,server=wt0x000+WebSphere:
    cell=wt0cell,node=wt0node5,server=wt0s002+WebSphere:
    cell=wt0cell,node=wt0node4,server=wt0s001+WebSphere:
    cell=wt0cell,node=wt0node5,server=wt0s003'. 
    
    In this example your potential targets are cell=wt0cell, cluster=wt0clust, node=wt0node5, node=wt0node4, server=wt0pbx1, and so on.
    
    
 3. Enter the following command for the first cluster target:
    
    Note: This step replaces the existing targets with one new target.
    
    AdminApp.edit('commsvc', '[ -MapModulesToServers [[ "commsvc"
    commsvc.rest.war,WEB-INF/sip.xml WebSphere:cell=cell_name,
    cluster=cluster_name]]]' )
    
    From the example in step 2, this command replaces the existing targets with one new target: cell=wt0cell,cluster=wt0clust: 
    
    AdminApp.edit('commsvc', '[ -MapModulesToServers [[ "commsvc"
    commsvc.rest.war,WEB-INF/sip.xml WebSphere:cell=wt0cell,
    cluster=wt0clust]]]' )
    
    
 4. Enter the following command for each additional cluster target:
    
    Note: This step adds to the existing targets.
    
    AdminApp.edit('commsvc', '[ -MapModulesToServers [[ "commsvc"
    commsvc.rest.war,WEB-INF/sip.xml+WebSphere:cell=cell_name,
    cluster=cluster_name]]]' )
    
    From the example in step 2, this command adds to existing cluster=wt0clust target: 
    
    AdminApp.edit('commsvc', '[ -MapModulesToServers [[ "commsvc"
    commsvc.rest.war,WEB-INF/sip.xml +WebSphere:cell=wt0cell,
    cluster=wt0clust]]]' )
    
    
 5. Enter the following command for each server target that is not a cluster member:
    
    Note: This step adds to the existing targets.
    
    AdminApp.edit('commsvc', '[ -MapModulesToServers [[ "commsvc"
    commsvc.rest.war,WEB-INF/sip.xml+WebSphere:cell=cell_name,
    node=node_name,server=server_name]]]' )
    
    From the example in step 2, this command adds to the existing wt0svt target server from wt0node4 node , wt0cell cell:
    
    AdminApp.edit('commsvc', '[ -MapModulesToServers [[ "commsvc"
    commsvc.rest.war,WEB-INF/sip.xml +WebSphere:cell=wt0cell,
    node=wt0node4,server=wt0svt]]]' )
    
    
 6. Enter the following command to save the configuration:
    
    AdminConfig.save()
    
    
 7. Synchronize the affected nodes with the deployment manager.
    
    
 8. Restart the cluster or clusters.

RELATED INFORMATION
 Feature Pack for CEA Release Notes [http://www14.software.ibm.com/webapp/wsbroker/redirect?version=v700cea&product=was-nd-mp&topic=relnotes]


 

Cross reference information Segment Product Component Platform Version Edition Application Servers WebSphere Application Server Install AIX, HP-UX, Linux, Solaris, Windows 7.0.0.7 Base, Express, Network Deployment Application Servers WebSphere Application Server for z/OS Install z/OS 7.0.0.7