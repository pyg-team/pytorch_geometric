Title: IBM IZ67599: AUTHORIZATION ERROR 2035 WHEN USING ALIAS QUEUE - United States

Text:
  FIXES ARE AVAILABLE
WebSphere MQ V7.0 Fix Pack 7.0.1.2 [http://www-01.ibm.com/support/docview.wss?uid=swg24026518]
WebSphere MQ V7.0.1 for i5/OS Fix Pack 7.0.1.2 [http://www-01.ibm.com/support/docview.wss?uid=swg24026566]


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  When using Websphere MQ 7 classes for Java Message Service (JMS)
   to receive a message which has been rolled back earlier the
   following stack trace is seen
   
   com.ibm.msg.client.jms.DetailedJMSSecurityException:
   JMSWMQ0030:'MQOPEN' failed for destination 'TARGQ' when handling
   a poisonmessage. When requeuing a poison message, 'MQOPEN'
   failed when called for the destination 'TARGQ'.
   
   Please see the linked exception for more information on the
   failures and/or warnings.
   at
   com.ibm.msg.client.wmq.common.internal.Reason.reasonToException
   (Reason.java:540)
   at
   com.ibm.msg.client.wmq.common.internal.Reason.createException
   (Reason.java:236)
   at
   com.ibm.msg.client.wmq.internal.WMQPoison.checkJmqiCallSuccess
   (WMQPoison.java:1075)
   at
   com.ibm.msg.client.wmq.internal.WMQPoison.access$7
   (WMQPoison.java:1043)
   at
   com.ibm.msg.client.wmq.internal.WMQPoison$DestinationAttrs.
   (WMQPoison.java:1164)
   at
   com.ibm.msg.client.wmq.internal.WMQPoison$DestinationAttrs.
   (WMQPoison.java:1273)
   at
   com.ibm.msg.client.wmq.internal.WMQPoison$DestinationAttrs.
   (WMQPoison.java:1129)
   at
   com.ibm.msg.client.wmq.internal.WMQPoison$DestinationAttrs.
   (WMQPoison.java:1128)
   at com.ibm.msg.client.wmq.internal.WMQPoison.
   (WMQPoison.java:132)
   at
   com.ibm.msg.client.wmq.internal.WMQConsumerShadow.
   initialisePoison(WMQConsumerShadow.java:1082)
   at
   com.ibm.msg.client.wmq.internal.WMQConsumerShadow.getMsg
   (WMQConsumerShadow.java:1207)
   at
   com.ibm.msg.client.wmq.internal.WMQSyncConsumerShadow.
   receiveInternal(WMQSyncConsumerShadow.java:233)
   at
   com.ibm.msg.client.wmq.internal.WMQConsumerShadow.receive
   (WMQConsumerShadow.java:922)
   at
   com.ibm.msg.client.wmq.internal.WMQMessageConsumer.receive
   (WMQMessageConsumer.java:450)
   at
   com.ibm.msg.client.jms.internal.JmsMessageConsumerImpl.
   receiveInboundMessage(JmsMessageConsmerImpl.java:742)
   at
   com.ibm.msg.client.jms.internal.JmsMessageConsumerImpl.
   receive(JmsMessageConsumerImpl.java:321)
   
   Caused by: com.ibm.mq.MQException: JMSCMQ0001: WebSphere MQ call
   failed with compcode '2' ('MQCC_FAILED') reason
   '2035'('MQRC_NOT_AUTHORIZED').
   
   This happens when the message is being received from an alias
   queue and the the backout queue functionality is not being used.
   
   
    
   
   

LOCAL FIX

PROBLEM SUMMARY
 *  ****************************************************************
   USERS AFFECTED:
   This issue affects users who make use of the WebSphere MQ
   classes for JMS to receive messages from alias queues
   
   Platforms affected:
   All Distributed (iSeries, all Unix and Windows) +Java
   ****************************************************************
   PROBLEM SUMMARY:
   When a client application using WebSphere MQ classes for JMS has
   authorization to get messages from the alias queue but does not
   have inquire authority on the target queue pointed by the alias
   queue, an  MQRC_NOT_AUTHORIZED error is seen when using poison
   message handling functionality. As part of poison message
   handling functionality the target queue is inquired to get the
   backout queue and backout threshold. In absence of the inquire
   authority on the target queue an authorization error is seen.
   
   
    
   
   

PROBLEM CONCLUSION
 *  The WebSphere MQ classes for JMS have been changed to ignore
   authorization error when querying target queue referenced by the
   alias queues. If an authorization error occurs, the backout
   threshold is treated as 0.
   
   ---------------------------------------------------------------
   The fix is targeted for delivery in the following PTFs:
   
                      v7.0
   Platform           Fix Pack 7.0.1.2
   --------           --------------------
   Windows            U200316
   AIX                U829807
   HP-UX (PA-RISC)    U829678
   HP-UX (Itanium)    U829681
   Solaris (SPARC)    U829806
   Solaris (x86-64)   U829680
   iSeries            tbc_p700_0_1_2
   Linux (x86)        U829677
   Linux (x86-64)     U829676
   Linux (zSeries)    U829682
   Linux (Power)      U829679
   
   The latest available maintenance can be obtained from
   'WebSphere MQ Recommended Fixes'
   http://www-1.ibm.com/support/docview.wss?rs=171&uid=swg27006037 [http://www-1.ibm.com/support/docview.wss?rs=171&uid=swg27006037]
   
   If the maintenance level is not yet available, information on
   its planned availability can be found in 'WebSphere MQ
   Planned Maintenance Release Dates'
   http://www-1.ibm.com/support/docview.wss?rs=171&uid=swg27006309 [http://www-1.ibm.com/support/docview.wss?rs=171&uid=swg27006309]
   ---------------------------------------------------------------
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   IZ67599
   
   
 * REPORTED COMPONENT NAME
   WMQ SOL SPARC
   
   
 * REPORTED COMPONENT ID
   5724H7223
   
   
 * REPORTED RELEASE
   700
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2010-01-06
   
   
 * CLOSED DATE
   2010-01-29
   
   
 * LAST MODIFIED DATE
   2010-01-29
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   WMQ SOL SPARC
   
   
 * FIXED COMPONENT ID
   5724H7223
   
   

APPLICABLE COMPONENT LEVELS
 * R700 PSY
   UP