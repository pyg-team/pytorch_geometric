Title: IBM Unable to start the Ping Probe on Linux - United States

Text:
Ping probe; setuid; nonroot; non-root; netcool TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 Attempts to start the ping probe as a non-root user result in Error "cannot open shared object file" on Linux. 

SYMPTOM
Receive the following error when starting the probe from command line:

# /opt/netcool/omnibus/probes/nco_p_ping -propsfile /opt/netcool/omnibus/probes/linux2x86/ping.props -messagelevel debug

/opt/netcool/omnibus/probes/linux2x86/nco_p_ping: error while loading shared libraries: libOpl_r.so.1: cannot open shared object file: No such file or directory 



CAUSE
The ping probe must start as root or setuid root. When started as setuid root, the netcool library paths must be added to the system library path.

RESOLVING THE PROBLEM
The ping probe must be started as the root user or as a non-root user with setuid root. When started with setuid root, the probe does not inherit the environment of the non-root user, thus the Netcool library paths must be added to the system library path. To run the probe as a non-root user with setuid root, do the following:

1) As root, chown root $NCHOME/omnibus/probes/linux2x86/nco_p_ping
2) As root, chmod +s $NCHOME/omnibus/probes/linux2x86/nco_p_ping
3) Create a pingprobe.conf file in /etc/ld.so.conf.d directory with the following two lines:

$NCHOME/platform/linux2x86/lib
$NCHOME/omnibus/platform/linux2x86/lib

4) Run ldconfig. 
5) Start the probe as the non-root user, $NCHOME/omnibus/probes/nco_p_ping