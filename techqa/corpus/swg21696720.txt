Title: IBM Blocking specific nzevents from automatically creating PMRs via Call Home - PureData System for Analytics - United States

Text:
callhome alerts nznevents nzopenpmr pda nzevent NEWS

ABSTRACT
 This technote describes the process one can follow to block specific errors and events from automatically creating service requests (PMRs) via the PureData Call Home function. 

CONTENT
You can configure the PureData Call Home service to ignore certain event conditions and to suppress the reporting of the problems that triggered those event rules. This feature is available starting in these NPS releases: 

 * 7.2.0.3 
 * 7.1.0.4 
 * 7.0.4.7 
 * 7.0.2.15


You can filter the events that trigger a callhome notification by defining rules in the /nz/data/config/eventBlackList.txt file. The filter rules define event conditions that should not be processed by callHome, which can help to reduce undesired notifications to IBM Support and to your configured customer contacts list. When a callhome event rule is triggered, the callhome service checks the eventBlackList.txt file to verify that the event is a problem condition that should be processed and sent as a notification to IBM Support. You can create filter rules as follows:

For the test event generated by the command nzOpenPmr --generate hwSPU the rule would look like this:
rule1.eventType = hwServiceRequested
rule1.hwType = SPU
rule1.errString = THIS_is_ONLY_a_TEST 

Note: the same applies for the "generate" option of nzcallhome in NPS 7.2 or above)

As an example, to ignore the event generated when a host file system exceeds recommended space thresholds, that would look like this:
rule2.eventType = hwNeedsAttention
rule2.hwType = host
rule2.errString = File_system_usage_exceeded_threshold 

For the eventType filter, you can specify any of the event types that are configured for callHome (hwNeedsAttention, hwServiceRequested, hwPathDown, hwVoltageFault, regenFault, scsiDiskError, scsiPredictiveFailure, spuCore, sysStateChanged, topologyImbalance) 

For the hwType filter, you can specify any of the hardware type values. To list the hardware type values, use the nzhw listTypes command. 

For the errString value, you can specify a unique string as it would appear in the errString output of the event rule 

Note: You can refer to Call Home notifications or PMRs, event emails or EventManager log entries for exact syntax of the errString you want to ignore 

To create the blocking list of filters, define the rules in a text file and save the file as /nz/data/config/eventBlackList.txt. After you create the file, callHome checks the filter rules before it processes notifications for any of the events that trigger on the appliance. 

If callHome ignores an event because of a matching filter, the callHome service logs a message in the /nz/kit/log/nzOpenPmr.log file to capture information about the event that was skipped. 

(23869) 2015-01-22 01:11:39: NOTE: Event <eventType> on device <hwType> with errString of '<errString>' is skipped as being blacklisted. 

You can edit the filter rules at any time, and you can rename or delete the eventBlackList.txt file to stop applying all of the defined filter rules during callHome processing.