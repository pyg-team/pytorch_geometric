Title: IBM PK78858: SECJ0305I, ADMN0022E EXCEPTIONS IN DMGR AND NODE AGENT DURING DMGR SHUTDOWN - United States

Text:
z/os  A FIX IS AVAILABLE
Obtain the fix for this APAR.


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  ERROR DESCRIPTION
   SECJ0305I, ADMN0022E EXCEPTIONS IN DMGR AND NODE AGENT DURING
   DMGR SHUTDOWN
   
   The Node Agent is sending the mbean (statusCache> request to the
   Deployment Manager to late in the process of its shutdown.
   Traces show the NA stopped at
   
   Trace: 2008/03/21 15:34:56.850 01 t=9FF290 c=UNK key=S2
   (13007002)
      ThreadId: 0000000a
      FunctionName: com.ibm.ws.runtime.WsServerImpl
      SourceId: com.ibm.ws.runtime.WsServerImpl
      Category: AUDIT
      ExtendedMessage: BBOO0222I: WSVR0024I: Server CONTROL PROCESS
      nodeagent stopped
   
   And the SECJ0305I error occuring after the Node Agent has
   stopped:
   
   Trace: 2008/03/21 15:34:57.397 01 t=9B9E88 c=UNK key=S2
   (13007002)
      ThreadId: 0000001c
      FunctionName:
      com.ibm.ws.security.role.RoleBasedAuthorizerImpl
      SourceId: com.ibm.ws.security.role.RoleBasedAuthorizerImpl
      Category: AUDIT
      ExtendedMessage: BBOO0222I: SECJ0305I: The role-based
      authorization check failed for admin-authz operation
      StatusCache:placeReport
      :com.ibm.ws.management.status.StatusReport.  The user
      UNAUTHENTICATED  (unique ID: UNAUTHENTICATED) was not granted
      any of the following required roles: operator,
      administrators.
   
   
    
   
   

LOCAL FIX

PROBLEM SUMMARY
 *  ****************************************************************
   * USERS AFFECTED: All users of WebSphere Application Server    *
   *                 V6.0.1 and Websphere Application Server      *
   *                 for z/OS with global security on.            *
   ****************************************************************
   * PROBLEM DESCRIPTION: After the NodeAgent is stopped you      *
   *                      get the following exceptions in         *
   *                      Deployment Manager logs Extended        *
   *                      Message:                                *
   *                      BBOO0220E: SECJ0306E: No received or    *
   *                      invocation credential exist on the      *
   *                      thread.                                 *
   ****************************************************************
   * RECOMMENDATION:                                              *
   ****************************************************************
   As a part of the NodeAgent shutdown the security Server is
   shutdown and after this any mbean request would
   not have security credentials . NodeAgent sends a mbean
   place-report request to Deployment Manager very late
   in its shutdown process after its security server is down.
   
   So on the deployment manager logs the security validation
   failure message is logged and you see the following
   exceptions:
   
   Trace: 2008/03/21 15:34:56.850 01 t=9FF290 c=UNK key=S2
   (13007002)
      ThreadId: 0000000a
   FunctionName: com.ibm.ws.runtime.WsServerImpl
   
   SourceId: com.ibm.ws.runtime.WsServerImpl
   
   Category: AUDIT
   
   ExtendedMessage: BBOO0222I: WSVR0024I: Server CONTROL PROCESS
   
   nodeagent stopped
   The deployment manager log shows error SECJ0305I at
   15:34:57.397 -
   
   Trace: 2008/03/21 15:34:57.397 01 t=9B9E88 c=UNK key=S2
   (13007002)
      ThreadId: 0000001c
      FunctionName:
   com.ibm.ws.security.role.RoleBasedAuthorizerImpl
      SourceId: com.ibm.ws.security.role.RoleBasedAuthorizerImpl
   
      Category: AUDIT
   
      ExtendedMessage: BBOO0222I: SECJ0305I: The role-based
   authorization
      check failed for admin-authz operation
   StatusCache:placeReport
      :com.ibm.ws.management.status.StatusReport.  The user
   UNAUTHENTICATED
      (unique ID: UNAUTHENTICATED) was not granted any of the
   following
      required roles: operator, administrator.
   
   
    
   
   

PROBLEM CONCLUSION
 *  Added a check before calling placereport on nodeagent
   statuscache to see if the security server is shutdown. If yes,
   we don't send the request to deployment manager.
   
   APAR PK78858 currently targeted for inclusion in Service
   Level (Fix Pack) 6.0.2.33 of WebSphere Application Server V6.0.1
   for z/OS.
   
   Please refer to URL:
   //www.ibm.com/support/docview.wss?rs=404&uid=swg27006970
   for Fix Pack availability.
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   PK78858
   
   
 * REPORTED COMPONENT NAME
   WEBSPHERE FOR Z
   
   
 * REPORTED COMPONENT ID
   5655I3500
   
   
 * REPORTED RELEASE
   601
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2009-01-16
   
   
 * CLOSED DATE
   2009-01-26
   
   
 * LAST MODIFIED DATE
   2009-03-03
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
    PK69066 [http://www-01.ibm.com/support/docview.wss?uid=swg1PK69066]
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

MODULES/MACROS
 *  BBOUBINF
   
   
    
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   WEBSPHERE FOR Z
   
   
 * FIXED COMPONENT ID
   5655I3500
   
   

APPLICABLE COMPONENT LEVELS
 * R601 PSY UK43592 [HTTPS://WWW14.SOFTWARE.IBM.COM/WEBAPP/SET2/ORDERMEDIA/SHOPCART?PTFS=UK43592]
   UP09/02/11 P F902
   
   

FIX IS AVAILABLE
 * SELECT THE PTF APPROPRIATE FOR YOUR COMPONENT LEVEL. YOU WILL BE REQUIRED TO SIGN IN. DISTRIBUTION ON PHYSICAL MEDIA IS NOT AVAILABLE IN ALL COUNTRIES.