Title: IBM Restriction on attaching a label of unshared label type to nonmastered checked-out versions - United States

Text:
Trouble applying label; mklabel; unshared; unshared label type; nonmastered; checked-out; Unable to perform operation "make label" in replica TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 This technote explains the restriction on the IBM Rational ClearCase mklabel operation, when the label type is unshared, and the version is a nonmastered checkout (when the branch is mastered by another replica). 

SYMPTOM
 

When attaching a label, if the label type is not shared and the version is checked-out on a branch that is mastered by another replica , the command fails.

M:\view\vob>cleartool mklabel -rep UNSHARED sample.txt
cleartool: Error: Unable to perform operation "make label" in replica "original" of VOB "\vob".
cleartool: Error: Master replica of branch "\main" is "replica".
cleartool: Error: Trouble applying label to "sample.txt".
cleartool: Error: Unable to create label "UNSHARED" on "sample.txt" version "\main\CHECKEDOUT".

CAUSE
 

Restriction

The following reference page in the ClearCase Information Center explains that attaching labels having unshared mastership succeeds only in the VOB replica that is the current master of the label type, but this description is incomplete.

https://publib.boulder.ibm.com/infocenter/cchelp/v7r1m0/index.jsp?topic=/com.ibm.rational.clearcase.cc_ref.doc/topics/ct_mklbtype.htm [https://publib.boulder.ibm.com/infocenter/cchelp/v7r1m0/index.jsp?topic=/com.ibm.rational.clearcase.cc_ref.doc/topics/ct_mklbtype.htm]

To attach labels having unshared mastership to checked-out versions, your replica must have mastership of the branch in addition to the label type. 

If the branch is mastered by another replica, you can still check out a version using the unreserved and nonmastered options. However, attempting to attach an unshared label to the checked-out version fails with following errors.

M:\view\vob>cleartool mklabel -rep UNSHARED sample.txt
cleartool: Error: Unable to perform operation "make label" in replica "original" of VOB "\vob".
cleartool: Error: Master replica of branch "\main" is "replica".
cleartool: Error: Trouble applying label to "sample.txt".
cleartool: Error: Unable to create label "UNSHARED" on "sample.txt" version "\main\CHECKEDOUT".

This is a restriction on attaching labels to nonmastered checkouts.

Note that if the version to be labeled is not checked out, mastership of the branch is not needed to attach an unshared label.


RESOLVING THE PROBLEM
 

The VOB replica should be the current master of the branch. If the branch is mastered in another replica, use chmaster or reqmaster to transfer the mastership of the branch to the VOB replica you use.