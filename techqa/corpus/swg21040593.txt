Title: IBM What is the best way to avoid RECON data sets that contain out-of-sequence records? - United States

Text:
IDC3302I; ABENDU2480; U2480; dynamic allocation TECHNOTE (FAQ)

QUESTION
 Can out-of-sequence records in RECON data sets be avoided? 

ANSWER
Problem
The RECON data sets for a test IMS environment contain out of sequence records. A job that backs up the RECON data sets fails with the message:

IDC3302I ACTION ERROR ON IMSVS.RECON1

A sequential copy of the RECON shows that there were actually two records for one database with some orphaned records prior to the first one. Between these two records were some records for another database. The records for this other database were related to HALDBs.

The out-of-sequence problem appears to have been introduced when the PDU panels were used to define the HALDBs.

An image copy job that was run against the HALDBs produced the following messages plus a U2480 abend:

DSP0008I VSAM LOGICAL ERROR ON RECON1 DATA SET
DSP0008I DSNAME=IMSPP.RECON1
DSP0008I VSAM FEEDBACK CODE=008
DSP0300I INTERNAL DBRC ERROR DSPURI40(PQ37236)+X11FA #01 TERM/DUMP
DIAG=VSAM ERROR
DSP0022I SIGNOFF NOT PERFORMED FOR SUBSYSTEM KDBBKUP

In this environment, the IMSVS.RECON data sets had aliases of IMSPP.RECONn. This allowed concurrent update to the same physical RECON data sets, thereby causing the out-of-sequence condition. Some jobs allocated the RECONs via JCL, while others used dynamic allocation.

Resolution

To avoid this problem, always use dynamic allocation. Using dynamic allocation precludes the use of aliases and ensures that everyone is seeing the same RECONs through the same control blocks.