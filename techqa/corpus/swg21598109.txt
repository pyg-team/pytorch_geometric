Title: IBM TDWC 8.6 FP1 Install failure - United States

Text:
TDWC 8.6 fp1 install TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 If you created any custom Pages in the TDWC (Settings > Pages), you must remove them before installing TDWC 8.6 FixPack 1 or A test-fix to be applied on top of TDWC 8.6 FP1 "before" running the FP1 installation is available from TWS L3 .

You can export your custom pages before installing the fixpack, and import them afterwards. Use either the Export wizard on the TIP, or the tipcli command (ExportPage). 



SYMPTOM
TDWC 8.6 Fixpack 1 failure : 

If you are in the middle of a failed TDWC upgrade (at step 4), and received the error:
"com.ibm.tws.WebUI" cannot be removed because it will probably break one or more pages! If you want to force remove it use the following option 'forceRemove=true', or delete\restore the following custom\system-customize pages:
You can recover from this error.
Leave the installer running.
Open a new shell to the system.
Become root.


 * Unlock the TIP console by issuing the following command:

/opt/IBM/TWA/eWAS/profiles/TIPProfile/bin/tipcli.sh Unlock --username twsuser --password secret123 
 * List the customized pages in your TIP by running the following command:


/opt/IBM/TWA/eWAS/profiles/TIPProfile/bin/tipcli.sh ListPages --customizePages true 
com.ibm.isclite.global.custom.module-SPSVS-com.ibm.isclite.admin.Freeform.navigationElement.pagelayoutA.modified.z95uZYBEVsLCDkfuoGMF56s1335985316112 
CTGWA4017I The command completed successfully 
 * Copy the ID's returned by the listPages command. Run the ExportPage command:


/opt/IBM/TWA/eWAS/profiles/TIPProfile/bin/tipcli.sh ExportPage --pages PageID1,PageID2 --username twsuser --password secret123 

for example: 

/opt/IBM/TWA/eWAS/profiles/TIPProfile/bin/tipcli.sh ExportPage --pages com.ibm.isclite.global.custom.module-SPSVS-com.ibm.isclite.admin.Freeform.navigationElement.pagelayoutA.modified.z95uZYBEVsLCDkfuoGMF56s1335985316112 --username twsuser --password secret123 
CTGWA4159W Extra parameter: includeCharts will be passed to plug-ins. 
CTGWA4159W Extra parameter: username will be passed to plug-ins. 
CTGWA4159W Extra parameter: password will be passed to plug-ins. 
starting CMS export... 
archiving the files.. 
CMS Export completed successfully. 

CTGWA4017I The command completed successfully. 

The output of the export is in 
/opt/IBM/TWA/eWAS/profiles/TIPProfile/output/data.zip 
 * Deleting custom pages and folders 
 * Log into the TDWC as the twsuser (must have admin privilege)

You can delete only pages with the resource type of Custom. Attention: Before deleting a page or folder, consider whether any users are actively using the resource and any impacts this might have on services. If necessary, notify users in advance of any plans for changes that could affect their work. 
1. Click Settings > Pages in the console navigation. Page is opened displaying console navigation nodes in a summary table. 
2. Locate the Page that you want to delete in the list provided. 
3. Check the box in the Select column for the node. You can select more than one custom page or folder for deletion. 
4. Click Delete. A message is displayed at the top prompting you to confirm the deletion. 
5. Click OK. 
The page or folder is deleted and removed from the navigation pane. 


>>> Perform the rest of the TDWC upgrade, by setting the failed step to Ready and click "Run all". If the same step fails again, check its output to see if the step can now be bypassed. If so, set the step to "Success" and click "Run all". 

After the TDWC upgrade is complete, run the following command to import the custom pages 
/opt/IBM/TWA/eWAS/profiles/TIPProfile/bin/tipcli.sh Import --username twsuser --password secret123 









RESOLVING THE PROBLEM
Workaround:


Unlock TIP 
<TWA_home>/eWAS/profiles/TIPProfile/bin/tipcli.sh 
Unlock --username <tipuser> --password <password> 
move 
/tdwc/TWA/eWAS/profiles/TIPProfile/wstemp/Script137c39a6 
444/workspace/cells/TIPCell/applications/isc.ear/deploym 
ents/isc/TWSWebUI.war/WEB-INF/com.ibm.isclite.admin.Port 
letPicker.navigationElement.pagelayoutA.modified.Q1mRi1K 
1UhAUXR2wT5r9G-A1336006752211 

Then rerun the failed step.