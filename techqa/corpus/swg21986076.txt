Title: IBM StackOverflowError calling Initiate API - United States

Text:
 TECHNOTE (FAQ)

QUESTION
 We are getting StackOverflowError when calling madison.mpi.RowListIterator.quickSort from madapi.jar recursively. How may we prevent it? 

CAUSE
A stack is a data structure that allows data to be inserted (a 'push' operation), and removed (a 'pop' operation). A JVM requires adequate stack space for internal workflow to run properly. Otherwise we may get the following error:
MessageProces E MP: Caught a nearly un-checked exception!!!
java.lang.StackOverflowError
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:37)
at java.lang.reflect.Method.invoke(Method.java:611)
at madison.util.CompareKey.compare(CompareKey.java:238)
at madison.mpi.RowListIterator.quickSort(RowListIterator.java:129)
at madison.mpi.RowListIterator.quickSort(RowListIterator.java:144)
at madison.mpi.RowListIterator.quickSort(RowListIterator.java:144)
at madison.mpi.RowListIterator.quickSort(RowListIterator.java:144)
at madison.mpi.RowListIterator.init(RowListIterator.java:106)
at madison.mpi.RowListIterator.<init>(RowListIterator.java:39)
at madison.mpi.RowList.rows(RowList.java:251)


The following link have details on these JVM arguments:
https://www.ibm.com/support/knowledgecenter/en/SSYKE2_7.0.0/com.ibm.java.lnx.70.doc/diag/appendixes/cmdline/Xss.html [https://www.ibm.com/support/knowledgecenter/en/SSYKE2_7.0.0/com.ibm.java.lnx.70.doc/diag/appendixes/cmdline/Xss.html]
https://www.ibm.com/support/knowledgecenter/en/SSYKE2_7.0.0/com.ibm.java.lnx.70.doc/diag/appendixes/cmdline/Xmso.html [https://www.ibm.com/support/knowledgecenter/en/SSYKE2_7.0.0/com.ibm.java.lnx.70.doc/diag/appendixes/cmdline/Xmso.html]
https://www.ibm.com/support/knowledgecenter/SSYKE2_7.0.0/com.ibm.java.lnx.70.doc/diag/appendixes/cmdline/commands_jvm.html [https://www.ibm.com/support/knowledgecenter/SSYKE2_7.0.0/com.ibm.java.lnx.70.doc/diag/appendixes/cmdline/commands_jvm.html]


ANSWER
You may increase the stack space using the wrapper.conf file pre v-11 or using JVM arguments in WebSphere server in v-11.x. In wrapper.conf, it would look something like the following by default:
wrapper.java.additional.1=-Xss512k
wrapper.java.additional.2=-Xmso512k

and you can increase it to what you may need, say:
wrapper.java.additional.1=-Xss1024k
wrapper.java.additional.2=-Xmso1024k 


In WebSphere Admin console, select Servers -> Server Types -> WebSphere application servers -> Server Infrastructure -> Java and Process Management -> Process definition. In Additional Properties section, select Java Virtual Machine and add stack space in custom properties and restart the server.



PRODUCT ALIAS/SYNONYM
 MDM
MDM SE
Master Data Management
Master Data Management Standard Edition
Initiate
MDS
Master Data Service
PME
Probabilistic Matching Engine