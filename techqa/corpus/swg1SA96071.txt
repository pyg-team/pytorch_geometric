Title: IBM SA96071: MQM400 AFTER A RCDMQMIMG, THE AMQ7462 MESSAGE DOES NOT REFLECT THE CORRECT JOURNAL RECEIVER WHEN GHOST QUEUES ARE INVOLVED - United States

Text:
  FIXES ARE AVAILABLE
WebSphere MQ V5.3 and WebSphere MQ Express V5.3 - Fix Pack 12 (CSD12) [http://www-01.ibm.com/support/docview.wss?uid=swg24011423]
WebSphere MQ V5.3 & WebSphere MQ Express V5.3 - Fix Pack 10 (CSD10) [http://www-01.ibm.com/support/docview.wss?uid=swg24009688]
WebSphere MQ V5.3 & WebSphere MQ Express V5.3 - Fix Pack 8 (CSD08) [http://www-01.ibm.com/support/docview.wss?uid=swg24007905]
WebSphere MQ V5.3 for iSeries - Fix Pack 12 (CSD12) [http://www-01.ibm.com/support/docview.wss?uid=swg24011422]
WebSphere MQ V5.3 & WebSphere MQ Express V5.3 - Fix Pack 7 (CSD07) [http://www-01.ibm.com/support/docview.wss?uid=swg24007281]
WebSphere MQ V5.3 and WebSphere MQ Express V5.3 - Fix Pack 13 (CSD13) [http://www-01.ibm.com/support/docview.wss?uid=swg24014128]
WebSphere MQ v5.3 and WebSphere MQ Express v5.3 - Fix Pack 6 (CSD06) [http://www-01.ibm.com/support/docview.wss?uid=swg24006435]
WebSphere MQ V5.3 and WebSphere MQ Express V5.3 - Fix Pack 14 (CSD14) [http://www-01.ibm.com/support/docview.wss?uid=swg24017668]


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  ******* (Do NOT alter/erase this or next 3 lines) *******
   * EQUIVALENT ABSTRACT:
   MQM400 AFTER A RCDMQMIMG_ THE AMQ7462 MESSAGE DOES NOT REFLECT
   THE CORRECT JOURNAL RECEIVER WHEN GHOST QUEUES ARE INVOLVED
   Recreation steps:
   Create a model queue with DEFAULT MESSAGE PERSISTENCE (DFTMSGPST
   to *YES and DEFINITION TYPE (DFNTYPE) set to *PERMDYN
   Put a message to the model queue.  This will create a generated
   name (e.g. AMQ.3E65EFF400003012) and associated GHOST directory
   !!GHOST!D065CC0C!2!ADC77C3A!0) and the QMQMOBJCAT entry will sho
   entry as type 'U'
   Issue a RCDMQMIMG command with OBJ(*ALL),  OBJTYPE(*ALL), and
   DSPJRNDTA
   (*YES) parameters.
   Verify that the AMQ7460 and AMQ7462 messages reference the curre
   attached receiver
   Clear the messages off the generated queue name and delete the q
   This will remove the queue from the WRKMQMQ view, and change the
   QMQMOBJCAT entry to show the GHOST name as both the queue name a
   the directory structure and the entry is changed to type 'G'
   Issue a CHGJRN JRN(AMQAJRN) JRNRCV(*GEN) command to create a new
   AMQAJRN
   journal receiver.
   Issue a RCDMQMIMG command with OBJ(*ALL),  OBJTYPE(*ALL), and
   DSPJRNDTA
   (*YES) parameters.
   The AMQ7460 now references the new journal receiver and the AMQ7
   references the old journal receiver.
   You can continue to change journals and run successful RCDMQMIMG
   the AMQ7462 will continue to display the same journal receiver n
   until you turn the 'G' entry type to a 'U' entry type (e.g. by p
   another message to a model queue which will reallocate the GHOST
   directory, generate a new AMQxxxxxxxxxx name, and change the ent
   to a 'U').  At that point, you can reissue the RCDMQMIMG and get
   AMQ7462 that references the current receiver.
   
   
    
   
   

LOCAL FIX
 *  There is a workaround by
   changing the ghost queue size to zero in "GhostPools" stanza of
   qmstatus.ini.   Another solution is delete and redefine the
   model queue that cleans up the associated ghost queues.
   
   
    
   
   

PROBLEM SUMMARY
 *  The problem has been fixed.
   
   
    
   
   

PROBLEM CONCLUSION
 *  This problem has been fixed and the fix will be shipped in the
   following CSDs:
   .
       A) MQSeries for AS/400 V5.2
   .
             The fix will be shipped in a future set of base PTFs
             for CSD07.
   .
       B) WebSphere MQ for AS/400 V5.3
   .
             The fix will be shipped in a future set of base PTFs
             for CSD04.
   .
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   SA96071
   
   
 * REPORTED COMPONENT NAME
   MQSERIES FOR AS
   
   
 * REPORTED COMPONENT ID
   5733A3800
   
   
 * REPORTED RELEASE
   520
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2003-03-18
   
   
 * CLOSED DATE
   2003-04-15
   
   
 * LAST MODIFIED DATE
   2004-11-10
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   MQSERIES FOR AS
   
   
 * FIXED COMPONENT ID
   5733A3800
   
   

APPLICABLE COMPONENT LEVELS
 * R520 PSY SF67790
   UP04/11/10 I 1000