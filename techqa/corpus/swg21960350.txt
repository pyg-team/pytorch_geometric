Title: IBM FileNet Content Engine upgrading from 5.x to 5.2.1 while migrating to new servers, object store doesn't finish upgrading and staying as In Progress status - United States

Text:
automaticupgradestatus; CPE 5.2.1; FNRCE0078E TECHNOTE (TROUBLESHOOTING)

THIS DOCUMENT APPLIES ONLY TO THE FOLLOWING LANGUAGE VERSION(S):
 English 

PROBLEM(ABSTRACT)
 FileNet Content Engine upgrading from 5.x to 5.2.1 and migrating to new servers, object store doesn't finish upgrading and staying as In Progress status in the AutomaticUpgradeStatus page. 

SYMPTOM
 

 * The following error is logged in the p8_server_error.log and the object store doesn't upgrade. The log file doesn't show any further upgrade process being performed by the Content Engine (CE):


 * 
 * 
 * 
 * 
 * 


 * The CE AutomaticUpgradeStatus page below is showing the object store as In Progress status:

 * 
 * server_name
 * 
 * port
 * 


CAUSE
The XA and non-XA data sources were improperly created in the new environment.

DIAGNOSING THE PROBLEM
Enable Content Engine tracing for Error, Database and Engine subsystem following instruction in technote 1308282 [http://www-01.ibm.com/support/docview.wss?rs=0&uid=swg21308282] to see more detail error messages logged. 

The following error is displayed with CE Error tracing on: 


YYYY-06-18T15:21:33.057 5F62CE7A ENG FNRCE0000D - DEBUG getConnection: FNOS1DSXA
YYYY-06-18T15:21:33.057 5F62CE7A ERR FNRCE0066D - DEBUG com.filenet.api.exception.EngineRuntimeException: FNRCE0066E: E_UNEXPECTED_EXCEPTION: An unexpected exception occurred. Message was: Context: WASNode01Cell/nodes/NODENAMENode01/servers/server1, name: FNOS1DSXA: First component in name FNOS1DSXA not found.\n at com.filenet.engine.context.ServerCallContext.jndiLookup(ServerCallContext.java:2016)\n at com.filenet.engine.context.ServerCallContext._getConnection(ServerCallContext.java:1923)\n at com.filenet.engine.context.ServerCallContext.getConnectionWithRetry(ServerCallContext.java:1145)\n at................

Caused by: javax.naming.NameNotFoundException: Context: WASNode01Cell/nodes/NODENAMENode01/servers/server1, name: FNOS1DSXA: First component in name FNOS1DSXA not found. [Root exception is org.omg.CosNaming.NamingContextPackage.NotFound: IDL:omg.org/CosNaming/NamingContext/NotFound:1.0]\n at com.ibm.ws.naming.jndicos.CNContextImpl.mapNotFoundException(CNContextImpl.java:4563)\n at com.ibm.ws.naming.jndicos.CNContextImpl.doLookup(CNContextImpl.java:1821)\n at com.ibm.ws.naming.jndicos.CNContextImpl.doLookup(CNContextImpl.java:1776)\n at com.ibm.ws.naming.jndicos.CNContextImpl.lookupExt(CNContextImpl.java:1433)\n at com.ibm.ws.naming.jndicos.CNContextImpl.lookup(CNContextImpl.java:615)\n at com.ibm.ws.naming.util.WsnInitCtx.lookup(WsnInitCtx.java:165)\n at com.ibm.ws.naming.util.WsnInitCtx.lookup(WsnInitCtx.java:179)\n at org.apache.aries.jndi.DelegateContext.lookup(DelegateContext.java:161)\n at javax.naming.InitialContext.lookup(InitialContext.java:436)\n at com.filenet.engine.context.ServerCallContext.jndiLookup(ServerCallContext.java:2000)\n ... 17 more\n

Caused by: org.omg.CosNaming.NamingContextPackage.NotFound: IDL:omg.org/CosNaming/NamingContext/NotFound:1.0\n at com.ibm.ws.naming.ipcos.WsnOptimizedNamingImpl.do_resolve_complete_info(WsnOptimizedNamingImpl.java:568)................


RESOLVING THE PROBLEM
 

 1. Use the CE Configuration Manager to recreate the new data sources for the object store ensuring the data source name matches the name in the pre-upgrade environment. See instructions in the IBM Knowledge Center for FileNet P8 Platform link below to create a new data source: Configuring the initial object store data sources by using the graphical user interface [http://www-01.ibm.com/support/knowledgecenter/SSNW2F_5.2.1/com.ibm.p8.install.doc/p8pin097.htm]
    
    
 2. Restart the CE instances and allow the upgrade progress to complete.

RELATED INFORMATION
 Enabling IBM FileNet Content Engine server tracing [http://www-01.ibm.com/support/docview.wss?rs=0&uid=swg21308282]
Configuring the object store data sources [http://www-01.ibm.com/support/knowledgecenter/SSNW2F_5.2.1/com.ibm.p8.install.doc/p8pin097.htm]