Title: IBM IC67279: SERVER CAN HANG DURING A STORAGE POOL MIGRATION PROCESS - United States

Text:
AIX  A FIX IS AVAILABLE
IBM Tivoli Storage Manager V6.1 Fix Pack 4 (6.1.4) Server Downloads [http://www-01.ibm.com/support/docview.wss?uid=swg24027366]


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  The Tivoli Storage Manager server can partially or completely
   hang if a storage pool migration thread is unable to acquire
   the required resource serialization to complete the process.
   This unexpected behavior can happen under certain
   circumstances within a specific timing window.
   .
   Once the storage pool migration thread is hung, it can cause
   subsequent threads that require the same information to hang
   since they need to wait in a resource queue behind the hung
   storage pool migration thread.
   .
   This may cause certain administrative commands to hang, such
   as QUERY STGPOOL and QUERY PROCESS.  Eventually, this can
   also lead to a full dsmserv process hang.
   .
   Customer/L2 Diagnostics:
   Issue SHOW THREADS, procstack/pstack, or force a core dump
   of the hung dsmserv process to gather thread information.
   If there is an AfMigrationAgent thread that shows the
   following callstack, this problem can apply;
   .
   pkmon.pkAcquireLatchTracked()
   pvrclass.pvrIsFileDevClassId()
   afmigr.CheckMigration()
   afmigr.AfMigrationAgent()
   pkthread.StartThread()
   .
   Initial Impact:
   High
   .
   Tivoli Storage Manager Versions Affected:
   All supported 5.X and 6.X Tivoli Storage Manager servers.
   .
   Additional Keywords:
   TSM DSMSERV HANG HUNG PARTIAL COMMAND RESULTS ZZ61
   FAILURE MUTEX BFV->MUTEX BFV MUTEXES PKACQUIRELATCHTRACKED
   AFMIGRATIONAGENT
   .
   
   
    
   
   

LOCAL FIX
 *  Recycle the dsmserv process to clear the hung migration thread.
   
   
    
   
   

PROBLEM SUMMARY
 *  ****************************************************************
   * USERS AFFECTED: All Tivoli Storage Manager server users.     *
   ****************************************************************
   * PROBLEM DESCRIPTION: See error description.                  *
   ****************************************************************
   * RECOMMENDATION: Apply fixing level when available. This      *
   *                 problem is currently projected to be         *
   *                 fixed in levels 5.5.5.0, 6.1.3.4,            *
   *                 6.1.4.0, and 6.2.2.0. Note that this is      *
   *                 subject to change at the                     *
   *                 discretion of IBM.                           *
   ****************************************************************
   *
   
   
    
   
   

PROBLEM CONCLUSION
 *  This problem was fixed.
   Affected platforms:  AIX, HP-UX, Sun Solaris,
   Linux, and Windows.
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   IC67279
   
   
 * REPORTED COMPONENT NAME
   TSM SERVER
   
   
 * REPORTED COMPONENT ID
   5698ISMSV
   
   
 * REPORTED RELEASE
   61A
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2010-03-17
   
   
 * CLOSED DATE
   2010-04-12
   
   
 * LAST MODIFIED DATE
   2010-04-12
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   TSM SERVER
   
   
 * FIXED COMPONENT ID
   5698ISMSV
   
   

APPLICABLE COMPONENT LEVELS
 * R55A PSY
   UP
   
   
 * R55H PSY
   UP
   
   
 * R55L PSY
   UP
   
   
 * R55S PSY
   UP
   
   
 * R55W PSY
   UP
   
   
 * R61A PSY
   UP
   
   
 * R61H PSY
   UP
   
   
 * R61L PSY
   UP
   
   
 * R61S PSY
   UP
   
   
 * R61W PSY
   UP
   
   
 * R62A PSY
   UP
   
   
 * R62H PSY
   UP
   
   
 * R62L PSY
   UP
   
   
 * R62S PSY
   UP
   
   
 * R62W PSY
   UP