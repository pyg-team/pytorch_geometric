Title: IBM How to execute operations on Identity Governance & Intelligence (IGI), without triggering new events. - United States

Text:
Identity Governance & Intelligence; IGI; ISIGADI; EVENT_OUT; EVENTPM; USER_EVENT_ERC TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 In this abstract, we will use the term end-point to reference any mechanism that is used to communicate with a system, being ISIGADI, Identity Broker or manual operations.
When administrators are required to perform specific operation at IGI that trigger a mass changes, e.g.: removing an application or permission, that can cause critical problems if those events are processed by IGI.
For instance, if not synchronized for a long time, ISIGADI might lose its ability to reflect changes made at ISIM in IGI, meaning that the user information will not be aligned between both systems. 

CAUSE
Administrators are required to perform a specific operation that will trigger the creation of several events at IGI. E.g.: if you remove an application from IGI, several Remove Permissions/Remove Accounts will be generated at the OUT queue.

RESOLVING THE PROBLEM
To perform the following operation, you will need access to the Identity Governance & Intelligence (IGI) database with admin permissions to perform DELETE statements in multiple tables, the IGACORE or instance owner user have the proper authorization. 

The following procedure will not generate new events at the EVENT_OUT queue, and no Live Events > OUT rules will be executed.


 * 
 * a. Log to the IGI’s database 
   b. Execute the following query, SELECT COUNT(*) FROM IGACORE.EVENTPM. Only move to the next step once EVENTPM is empty 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * a. Now we need to delete all events that were created at IGACORE.EVENTPM, but first make sure that you are only deleting those that are relevant to the operation you just performed, so you are not removing a legitimate event that was generated by IGI 
   b. Once you confirm the events delete those from IGACORE.EVENTPM 
   To help you with this step, below you can find some queries that will help you filter the events. 
   
 * 
 * 
 * 
 * 
 * 


Removing events from EVENTPM 
The following queries will help you identify the events that you need to delete at step 5, that were created because of the operation you just performed. 

Remove permission events 
In case you delete a permission from Application Access, run the following query to identify those events.  * select ep.* from igacore.eventpm as ep where id in (
 * 
 *  select ep.id from igacore.eventpm as ep left join igacore.authorizations as auth on ep.authorizations = auth.id 
 * 
 *  where auth.employment is null 
 * 
 *  and ep.operation = 2 -- Remove Permission
 * 
 *  and auth.application = '<APPLICATION_NAME>')


Remove account events 
In case you mass remove accounts from specific users.  * select ep.* from igacore.eventpm as ep where pwdcfg in (select id from igacore.pwdcfg where name = '<APPLICATION_NAME>') and operation = 9 -- Remove Account


When application/account configuration was deleted from IGI 
If you delete an application or account configuration from IGI, it will automatically remove all of the permissions and related account from users. In this case, the remove permission events SQL specified here will still help you find those events, but once you remove the application and account configurations, the IGACORE.PWDCFG will not contain that information anymore. For those situations, the below query will return the events that don’t have a corresponding entry on PWDCFG table for remove account operations.  * select ep.* from igacore.eventpm as ep left join igacore.pwdcfg as pc on ep.pwdcfg = pc.id where pc.id is null and ep.operation = 9 -- Remove Account




Cross reference information Segment Product Component Platform Version Edition Security IBM Security Identity Governance and Intelligence 
PRODUCT ALIAS/SYNONYM
 IGI