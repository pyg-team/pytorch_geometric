Title: IBM Monitoring JBOSS AS 6 - United States

Text:
JBOSS6; CAMJ2ALL CAMJ2JBDC TECHNOTE (FAQ)

QUESTION
 Is there a way to use ITCAM for J2EE to monitor JBOSS AS 6? 

ANSWER
JBOSS AS 6 (not to be confused with JBOSS EAP 6.x family) is not supported by the native data collector (DC) provided by ITCAM for J2EE. You will not be able to successfully configure a JBOSS DC. 

However, you can consider an alternative option in order to get some basic monitoring for JBOSS: Configure DC by selecting J2SE data collector instead of JBOSS. 

In addition, after the standard configuration has been successfully completed, the following manual changes are needed: 

1) For the JMX infrastracture to initialize correctly, please add two JVM options to your JBOSS startup script: 

-Djboss.platform.mbeanserver
-Djavax.management.builder.initial=org.jboss.system.server.jmx.MBeanServerBuilderImpl 

2) For the logging subsystem to initialize as well, please add two more JVM options: 

-Djava.util.logging.manager=org.jboss.logmanager.LogManager
-Dorg.jboss.logging.Logger.pluginClass=org.jboss.logging.logmanager.LoggerPluginImpl 

and make sure to have the "jboss-logmanager.jar" in the JBOSS_CLASSPATH 

3) Finally, always for the logging subsystem, you need to add jboss.boot.server.log.dir property to JAVA_OPTS in run.conf file (the very end of the file). 

 

Here is an example of J2SE ITCAM section (startup script) for a JBOSS6 running on Linux (in bold the additions): 

 

# ********************DC for J2SE support--begin****************************

LD_LIBRARY_PATH="/opt/IBM/ITM/lx8266/yj/j2eedc/7.1.1.0.0/toolkit/lib/lx8266:$LD_LIBRARY_PATH"

export LD_LIBRARY_PATH

ITCAM_JVM_OPTS="-Xbootclasspath/p:/opt/IBM/ITM/lx8266/yj/j2eedc/7.1.1.0.0/toolkit/lib/bcm-bootstrap.jar:/opt/IBM/ITM/lx8266/yj/j2eedc/7.1.1.0.0/itcamdc/lib/ppe.probe-bootstrap.jar:/opt/IBM/ITM/lx8266/yj/j2eedc/7.1.1.0.0/itcamdc/lib/ext/j2se/j2seboot.jar -agentlib:am_sun_16=/opt/IBM/ITM/lx8266/yj/j2eedc/7.1.1.0.0/runtime/j2sejboss6.linux2015.jboss6/dc.env.properties -Xloggc:/opt/IBM/ITM/lx8266/yj/j2eedc/7.1.1.0.0/runtime/j2sejboss6.linux2015.jboss6/gc.log -XX:-TraceClassLoading -XX:-TraceClassUnloading -Dcom.sun.management.jmxremote -Djboss.platform.mbeanserver-Djavax.management.builder.initial=org.jboss.system.server.jmx.MBeanServerBuilderImpl-Djava.util.logging.manager=org.jboss.logmanager.LogManager-Dorg.jboss.logging.Logger.pluginClass=org.jboss.logging.logmanager.LoggerPluginImpl-Dsun.lang.ClassLoader.allowArraySyntax=true $ITCAM_JVM_OPTS"

export ITCAM_JVM_OPTS

JBOSS_CLASSPATH="$JBOSS_CLASSPATH:/opt/jboss-6.0.0.Final/lib/jboss-logmanager.jar"

# ********************DC for J2SE support--end****************************


And here is an example of modified JAVA_OPTS in run.conf: 

JAVA_OPTS="$JAVA_OPTS -Djboss.boot.server.log.dir=/opt/jboss-6.0.0.Final" 

 

Once the above manual changes are done, you can start JBOSS AS 6 to get DC connected to TEMA and/or Managing Server.