Title: IBM Configure TDWC and TWS v8.6 to use the same LTPA token_keys - ISC - United States

Text:
TDWC; TWS; token_keys; LTPA; ISC; TIP; WAC; console; Admin; webui; embedded; ewas; DWC TECHNOTE (FAQ)

QUESTION
 How can the task of exporting and importing an LTPA key in a Tivoli Workload Scheduler (TWS) v8.6 environment be accomplished through WebSphere's Integrated Solutions Console (ISC) aka WebSphere Admin Console? 

CAUSE
LTPA keys need to be synchronized between Tivoli Dynamic Workload Console (TDWC) and TWS when both components are installed to the same host with independent embedded WebSphere Application Server (eWAS) instances. The same is often true for TDWC and TWS installed to separate systems.

ANSWER
 The official TWS v8.6 documentation that addresses exporting and importing LTPA keys between TDWC and TWS WebSpheres does not cover the use of WebSphere's Admin Console. 


Reference: Configuring to use the same LTPA token_keys [http://pic.dhe.ibm.com/infocenter/tivihelp/v47r1/topic/com.ibm.tivoli.itws.doc_8.6.0.1/awsadshareltpa.htm]

How to synchronize TDWC and TWS to use the same LTPA keys using WebSphere Admin Console:

EXPORT LTPA KEY from TDWC:

1. Log in to v8.6 Tivoli Dynamic Workload Console / Tivoli Integrated Portal as the WebSphere primary administrative User.

NOTE: To create the correct TIP URL for TDWC's WebSphere run <TWAHOME>/wastools/showHostProperties.sh > myHostProps.txt as root to discover the port value for the httpsPort. The default port is 29443.

The TIP URL will be: https://<hostname>:<httpsPort>/ibm/console 

2. Open Settings -> WebSphere Administrative Console, and then select the button: [Launch WebSphere administrative console] 

The Integrated Solutions Console URL is launched and you will either be automatically logged in or will come to a login prompt. Login as the "Primary administrative user"

NOTE: If the primary administrative user name is unknown then expand "Users and Groups", then "Administrative user roles". The user assigned the Role "Primary administrative user name" is the user that has the authorization to export and import LTPA keys.

3. After logging into the ISC as the primary administrative user:

Open "Security" -> "Global Security". The center panel will be labeled "Global security". The far right column is titled "Authentication". Under the "Authentication" column select the word "LTPA". If "LTPA" is not highlighted in blue then you are not logged in as the primary administrative user.

4. The center panel will be labeled "Global Security > LTPA"

The last section of the panel is labeled "Cross-cell single sign-on".
a. Enter any password in the *Password and *Confirm password fields.
b. Enter the full path to a new file to store the key to export.
For example: /usr/tivoli/tdwc/ltpakey 
c. Select [Export keys]

NOTE: If the TWS engine is on a remote server, then place a copy of the ltpakey file on the remote server. 
IMPORTANT: Be sure to transfer the file in binary mode.


IMPORT LTPA KEY into TWS:

NOTE: To create the correct ISC URL for TWS's WebSphere run <TWAHOME>/wastools/showHostProperties.sh > myHostProps.txt as root to discover the port value for adminSecurePort. The default port is 31124.

The URL will be: 
https://<hostname>:<adminSecurePort>/ibm/console 

At the Integrated Solutions Console (ISC) for the TWS instance:

1. Log in to TWS's ISC as the TWS WebSphere user (this is most likely the user for which TWS was installed.) 

2. Run steps 3 and 4 from the EXPORT steps above using the same password and file, and select [Import keys]


TEST CONNECTION from TDWC to TWS:
You should be able to perform a successful test connection from TDWC to the intended TWS instance. 

DISABLE AUTOMATIC LTPA key generation on TDWC and TWS WebSpheres Reference: Disabling the automatic generation of LTPA token_keys [http://pic.dhe.ibm.com/infocenter/tivihelp/v47r1/topic/com.ibm.tivoli.itws.doc_8.6.0.1/awsaddisableltpautogen.htm]

RESTART WEBSPHERE:
The final step is to stop and start WebSphere on both TDWC and TWS.

NOTE: You can use the conman stopappserver and startappserver commands to stop and restart WebSphere for TWS. You can use the stopWas.sh (.bat) and startWas.sh (.bat) files to stop and restart WebSphere for TDWC.

Also, see Technotes # 1509409 and # 1377224 for additional details and related information.

RELATED INFORMATION
 Technote # 1509409 [http://www.ibm.com/support/docview.wss?uid=swg21509409]
Technote # 1377224 [http://www.ibm.com/support/docview.wss?uid=swg21377224]
TWS v8.6 Online Documentation [http://pic.dhe.ibm.com/infocenter/tivihelp/v47r1/index.jsp?topic=%2Fcom.ibm.tivoli.itws.doc_8.6.0.1%2Fwelcome_TWA.html]


 

PRODUCT ALIAS/SYNONYM
 Maestro
TWS
TWA
TDWC