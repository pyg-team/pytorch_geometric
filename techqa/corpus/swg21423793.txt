Title: IBM "-2147467259:The conversion of a char data type to a datetime data type resulted in an out-of-range datetime value" when running Shareholding and Investment reports - United States

Text:
 TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 User clicks "Group - Reports - Shareholdings and Investments". User chooses values/parameters, and clicks 'Preview'. User receives error message.

NOTE: Typically the errors only occur when running the reports for certain compinations of parameters (e.g. selecting specific 'bad' companies).

A similar error message occurs when user runs "Group - Reconcile - Investment Elimination Template". 

SYMPTOM
Shareholdings and Investments 

Error
-2147467259:The conversion of a char data type to a datetime data type resulted in an out-of-range datetime value.


 * Investment Elimination Template

Screen: 
IBM Cognos 8 Controller 
Unhandled exception has occurred in your application. If you click Continue, the application will ignore this error and attempt to continue. If you click Quit, the application will close immediately. 

System.Web.Services.Protocols.SoapException: Server was unable to process request. ---> 
System.Runtime.InteropServices.COMException (0x80040E07): The conversion of a char data type to a datetime data type resulted in an out-of-range datetime value. 
<....> 
[Details] [Continue] [Quit]  

Event Log:
Event Type: Warning
Event Source: Cognos Controller
Event Category: None
Event ID: 0
Date: 04/07/2012
Time: 09:05:25
User: N/A
Computer: SERVERNAME
Description:
Error occured at 04/07/2012 09:05:25 in IBM Cognos 8 Controller, Error No=5, Source=FrangoDirect.RepRecSharesAndInvD.ReconcileInvestments#ControllerProxyClient.frmRepReconcileInvestments.IFormStandardReport_CreateReportData:FrangoClient.clsStandardReports.CreateReport:FrangoClient.clsStandardReports.CreateReports, Description=System.Web.Services.Protocols.SoapException: Server was unable to process request. ---> System.Runtime.InteropServices.COMException (0x80040E07): The conversion of a varchar data type to a datetime data type resulted in an out-of-range value.
at FrReportB.RepRecSharesAndInvClass.ReconcileInvestmentsCRN(String sGuid, String sUser, String sAcqCurr, Int16 iReport, String sConsType, String sCompanyGroup, Int32 lNumLevels, String sAct, String sPeriod, Boolean bSort, Int32 lLocale, Object sXmlDoc)
at Cognos.Controller.Proxy.CCRWS.RepRecSharesAndInv_ReconcileInvestmentsCRN(String sGuid, String sUser, String sAcqCurr, Int16 iReport, String sConsType, String sCompanyGroup, Int32 lNumLevels, String sAct, String sPeriod, Boolean bSort, Int32 lLocale, Object sXmlDoc)
--- End of inner exception stack trace ---, HelpFile= HelpContext=0

CAUSE
Invalid entries/data inside the Controller application database. 

 
More Information:
On one real-life customer case, the problem was caused by invalid data inside the database tables "xacqmain" and "xacqamount", which relate to the Acquisition register. In that case, they contained some rows which contained values for date (such as 20050231, 20070431, 20050931) which were not valid.


RESOLVING THE PROBLEM
Contact IBM Support for assistance in modifying your Controller database in order to correct the invalid data.