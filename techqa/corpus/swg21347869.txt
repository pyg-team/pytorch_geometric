Title: IBM ** Troubleshooting** Errors 'User XYZ already logged in to this database' and 'No licence available at the moment' - United States

Text:
stuck logoff TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 User tries to login to Controller (or launch the Excel link). User receives error message. 

SYMPTOM
Exact error message varies depending on: 

 * Controller version (for example Controller 2.x or 8.x) 
 * and whether the end user is trying to logon to the 'main' Controller program or the Excel link.


Example#1: 
 * 
 * 
 * 
 * 
 * 


Example#2: 
 * 
 * 
 * User XYZ already logged in to this database.
 * 
 * 


CAUSE
There are several potential causes for this issue: 

 * Scenario #1 - Database is in 'single user mode' 

This is where the superuser has specifically modified the system to ensure that no users can logon to the system, in order to perform a maintenance task (for example a database optimisation). 
 * Scenario #2 - User is trying to logon to to Controller using a userid (e.g. XYZ) which is already in use by another person.

Only one instance of a userid can be active at any given time. 
 * Scenario #3 - This user's (e.g. 'ADM') Controller session crashed unexpectedly (or was disconnected forcibly) the last time that it was run

Therefore, the Controller application server 'thinks' that the user (XYZ) is still logged on, even though the physical person (end-user) does not believe that they have a session of Controller running 
 * Scenario #4 - User has a 'hidden' session of Controller running (e.g. on a Citrix server)

If Controller is deployed by Citrix (and/or Microsoft Terminal Services) a session of Controller could be running (under the user's account - for example 'ADM') in the 'background'. In other words, even though the end-user cannot see Controller running on his/her screen, it is running on the Citrix (or Terminal) server. 
 * Scenario #5 - Microsoft patch (for example Office 2003 patch) has been recently installed/applied on the client device, but the device has not yet been rebooted.

 * Scenario #6 - Controller deployed via Citrix server, but published applications are NOT load-balancing correctly.

 * Scenario #7 - Known limitation of early versions of Controller.  * For full details, see separate IBM Technote #1625773. 
   
   
 * Scenario #8 - Defect in some versions of Controller, when using non-native (Cognos) authentication.  * For full details, see separate IBM Technote #1636052.
   
   
 * Scenario #9 - Limitation of Controller 10.2.1, when not using 'EXCEL_EAGERLOAD'.  * For full details, see separate IBM Technote #2002613.
   
   

 * Scenario #10 - Limitation of Controller 10.3, when not closing DE parameter screen before using 'Reports - Run'  * For full details, see separate IBM Technote #2005041.
   
   


================================================= 
In addition, it is possible to get the same/similar error messages whilst inside the application itself (after successfully logging into Controller).  * In this case see separate Technotes, such as 1501130

================================================= 
RESOLVING THE PROBLEM
Scenario #1 - Database is in 'single user mode' 

 
Wait until the super-user (who activated 'Single Mode') has deactivated it. This will allow other users to logon 

Scenario #2 - Other person is logged in with same username

Do not share userIDs. Ask colleague to logout, and re-try 

Scenario #3 - Previous Controller session has crashed

Using Task Manager, ensure that the Controller executable program (CCR.EXE, IExplore.exe or IEXEC.exe depending on deployment method) has 100% ended. Afterwards: 

 * If using Controller 8.3 or earlier, wait 15 minutes for the Controller appliation server to timeout then re-try.  * For more details, see attached document "1039645 - How to 'eject' stuck sessions inside Controller8.1_8.2_and_8.3.pdf".
   
   
 * If using Controller 8.4 or later, use the new 'Manage Active Users' functionality to forcibly eject the 'stuck' user


Scenario #4 - User has a 'hidden' session of Controller running (e.g. on a Citrix server) 

If Controller is deployed by Citrix (and/or Microsoft Terminal Services) a session of Controller could be running (under the user's account - for example 'ADM') in the 'background' .  * Typically the cause of this is that the end user's session of Controller/Excel link has recently 'crashed' unexpectedly.

Therefore, ask the customer's I.T. department to check their Citrix or Terminal Services server(s), to see if the user is running any sessions.The Citrix /TS administrator should logoff any 'stuck' session. Afterwards, end user may have to wait 15 minutes for the application server to time out.  * TIP: They can use 'tsadmin.exe' to look at logged on remote RDP or ICA sessions. See separate IBM Technote #1366708 for more information. 


Scenario #5 - Microsoft patch (for example Office 2003 patch) has been recently installed/applied on the client device 

Reboot client device (for example Citrix/Terminal server).  * See separate IBM Technote #1390025.


Scenario #6 - Controller deployed via Citrix server, but published applications are NOT load-balancing correctly. 
 * See separate IBM Technote #1367437 for full details.


Scenario #7 - Known limitation of Controller 10.1.1697 and earlier  * Upgrade to Controller 10.1.1700 or later. 
 * For full details, see separate IBM Technote #1625773.


Scenario #8 - Defect in some versions of Controller, when using non-native (Cognos) authentication.  * Upgrade to Controller 10.1.1 FP2 (10.1.2155) or later. 
 * For full details, see separate IBM Technote #1636052.


Scenario #9 - Limitation of Controller 10.2.1, when not using ' EXCEL_EAGERLOAD '. 
Upgrade to Controller 10.3 or later, or implement "EXCEL_EAGERLOAD".  * For full details, see separate IBM Technote #2002613.


Scenario #10 - Limitation of Controller 10.3, when not closing DE parameter screen before using 'Reports - Run' 
Close the "Data Entry Reported Values" parameter screen, before using 'Reports - Run'.  * For full details, see separate IBM Technote #2005041.

RELATED INFORMATION
 1366708 - Logging into Controller via Citrix gives erro [http://www.ibm.com/support/docview.wss?uid=swg21366708]
1390025 - Error 'User XYZ already logged in to this dat [http://www.ibm.com/support/docview.wss?rs=0&uid=swg21390025]
1367437 - Error 'User xxx already logged in to this dat [http://www.ibm.com/support/docview.wss?rs=0&uid=swg21367437]
1625773 - "No License Available at this time" when logg [http://www.ibm.com/support/docview.wss?uid=swg21625773]
1636052 - 'User XXX already logged in to this database' [http://www.ibm.com/support/docview.wss?uid=swg21636052]
2002613 - "User XYZ already logged in to this database" [http://www.ibm.com/support/docview.wss?uid=swg22002613]
2005041 - 'User XYZ already logged in to this database' [http://www.ibm.com/support/docview.wss?uid=swg22005041]


1039645 - How to 'eject' stuck sessions inside Controller8.1_8.2_and_8.3.pdf [/support/docview.wss?uid=swg21347869&aid=2]1039645 - How to 'eject' stuck sessions inside Controller8.1_8.2_and_8.3.pdf [/support/docview.wss?uid=swg21347869&aid=1]

HISTORICAL NUMBER
 1039645