Title: IBM JR49638: VARIABLE FLAGGED WITH "AVAILABLE IN SEARCH" MIGHT THROW SQL EXCEPTION IF THE VARIABLE CONTENT IS TOO BIG. - United States

Text:
  DIRECT LINKS TO FIXES
7.5.1.2-WS-BPM-IFJR49638 [http://www.ibm.com/support/fixcentral/quickorder?product=ibm%2FWebSphere%2FIBM+Business+Process+Manager+Standard&fixids=7.5.1.2-WS-BPM-IFJR49638&source=SAR]
8.0.1.3-WS-BPM-IFJR49638 [http://www.ibm.com/support/fixcentral/quickorder?product=ibm%2FWebSphere%2FIBM+Business+Process+Manager+Standard&fixids=8.0.1.3-WS-BPM-IFJR49638&source=SAR]
Version 8.5 Refresh Pack 5 for the IBM Business Process Manager products [http://www-01.ibm.com/support/docview.wss?uid=swg24037683]
Version 8.5.0 Fix Pack 2 for the IBM Business Process Manager products [http://www-01.ibm.com/support/docview.wss?uid=swg24040683]


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  Business process definitions with variables of type String that
   are flagged with "Available in search" in the "Business Data
   Search" category and that have content longer than 512
   characters can cause an Exception, such as ?E CWLLG0323E: An
   exception occurred in saveSearchableValues,
   reason:com.ibm.db2.jcc.am.BatchUpdateException:[jcc][t4][102][10
   040][4.11.69]
   
   
    
   
   

LOCAL FIX
 *  n/a
   
   
    
   
   

PROBLEM SUMMARY
 *  The content of the searchable string variable cannot be stored
   in the database, because the string is longer than the database
   field.
   
   PROBLEM DETAILED DESCRIPTION
   If DB2 is used as the database, then the exception in
   SystemOut.log might look similar to the following message:
    E CWLLG0323E: An exception occurred in saveSearchableValues,
   reason:com.ibm.db2.jcc.am.BatchUpdateException:[jcc][t4][102][10
   040][4.11.69] Batch failure. The batch was submitted, but at
   least one exception occurred on an individual member of the
   batch. Use getNextException() to retrieve the exceptions for
   specific batched elements. ERRORCODE=-4229, SQLSTATE=null.
   8com.ibm.db2.jcc.am.BatchUpdateException:
   [jcc][t4][102][10040][4.11.69] Batch failure. The batch was
   submitted, but at least one exception occurred on an individual
   member of the batch. Use getNextException() to retrieve the
   exceptions for specific batched elements. ERRORCODE=-4229,
   SQLSTATE=null
   
    and
   
   com.ibm.db2.jcc.am.SqlIntegrityConstraintViolationException:
   Error for batch element #1: DB2 SQL Error: SQLCODE=-545,
   SQLSTATE=23513,SQLERRMC=DB2ADMIN.LSW_BPD_INSTANCE_VARIABLES.STRI
   NG_VALUE, DRIVER=4.11.69
   
   
    
   
   

PROBLEM CONCLUSION
 *  A fix for IBM BPM is available that truncates the inserted data
   to the maximum number of characters allowed in the string. After
   the fix is applied, the exception is prevented because the
   search string is truncated to the maximum length of 512
   characters. This implies that the search functionality changes
   in the following way:
   
   - Business variable content presented by the selected columns
     are truncated to the length of 512 characters.
   - If the search condition contains a business variables string
     value that is shorter than 512 characters, the search
     functionality is unchanged.
   - If the search condition contains a business variables string
     value that is longer than 512 characters, no results are
     returned for the operators "starts with", "contains" and
     "equals".
   - If the search condition contains a business variables string
     value with 512 characters and the operator "equals" is used,
     than  results are returned for string variables that  are
     equal  to or longer than 512 characters.
   
   On Fix Central (http://www.ibm.com/support/fixcentral), search
   for JR49638:
   
   1. Select the product group, product, installed version, and
     platform, and click Continue.
   2. Select APAR or SPR, enter JR49638, and click Continue.
   
   When downloading fix packages, ensure that you also download the
   readme file for each fix. Review each readme file for additional
   installation instructions and information about the fix.
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   JR49638
   
   
 * REPORTED COMPONENT NAME
   BPM ADVANCED
   
   
 * REPORTED COMPONENT ID
   5725C9400
   
   
 * REPORTED RELEASE
   850
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2014-03-14
   
   
 * CLOSED DATE
   2014-05-13
   
   
 * LAST MODIFIED DATE
   2014-05-13
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   BPM STANDARD
   
   
 * FIXED COMPONENT ID
   5725C9500
   
   

APPLICABLE COMPONENT LEVELS
 * R801 PSY
   UP