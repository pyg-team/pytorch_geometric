Title: IBM PK84722: DB2 CRASHED AFTER ABEND0C4 IN DSNB1OFA +X'B66' SPRC - United States

Text:
z/os  A FIX IS AVAILABLE
Obtain the fix for this APAR.


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  The root cause of the overlay is that DB2 code allowed a move of
   columns that was greater than the max record length.
   This incorrect move will only occur for tablespaces in reorder
   row format (RRF). The first Reorg after going to DB2 V9 NFM is
   when DB2 changes the record from basic row format (BRF) to the
   reorder row format.
   The plan accessing the data record was bound when the record was
   BBF,so we have to convert the data record from RRF to BRF and
   that is the code that incorrectly set the length. SMCOVERLAY
   
   DB2OVRLAY/K
   
   
    
   
   

LOCAL FIX
 *  NEW BIND of the application
   
   
    
   
   

PROBLEM SUMMARY
 *  ****************************************************************
   * USERS AFFECTED: All users of V9 DB2 for zOS                  *
   ****************************************************************
   * PROBLEM DESCRIPTION: DB2 crashed after abend0C4 in DSNB1OFA  *
   *                      +X'B66' due to massive overlay of       *
   *                      storage. Other unpredictable results.   *
   ****************************************************************
   * RECOMMENDATION:                                              *
   ****************************************************************
   A massive overlay of storage resulted when an incorrect variable
   column length was not detected in a reordered row format record.
   The select procedure built under DB2 version 9 is not doing a
   correct compare of maximum column length of variable columns.
   This resulted in the overlay of storage following the record
   workarea. The incorrect length in the data buffer appears to
   have been the result of storage corruption from an undetermined
   source.
   
   
    
   
   

PROBLEM CONCLUSION
 *  Code in the select procedure generator is changed to do a
   logical compare of the variable column length to the maximum
   defined length. If an incorrect length is detected, no data
   movement will occur and an abend04E with ERQUAL53CD will be
   issued by the caller of the select procedure. This apar fix will
   not correct the cause of the data corruption in memory. Plans
   bound under version 9 that contain select procedures will need
   to be rebound to pick up this code change.
   
   
    
   
   

TEMPORARY FIX
 *  *********
    * HIPER *
    *********
   
   
    
   
   

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   PK84722
   
   
 * REPORTED COMPONENT NAME
   DB2 OS/390 & Z/
   
   
 * REPORTED COMPONENT ID
   5740XYR00
   
   
 * REPORTED RELEASE
   910
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   YesHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2009-04-15
   
   
 * CLOSED DATE
   2009-05-06
   
   
 * LAST MODIFIED DATE
   2011-02-17
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
    UK46346
   
   

MODULES/MACROS
 *  DSNIZMOV
   
   
    
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   DB2 OS/390 & Z/
   
   
 * FIXED COMPONENT ID
   5740XYR00
   
   

APPLICABLE COMPONENT LEVELS
 * R910 PSY UK46346 [HTTPS://WWW14.SOFTWARE.IBM.COM/WEBAPP/SET2/ORDERMEDIA/SHOPCART?PTFS=UK46346]
   UP09/05/22 P F905
   
   

FIX IS AVAILABLE
 * SELECT THE PTF APPROPRIATE FOR YOUR COMPONENT LEVEL. YOU WILL BE REQUIRED TO SIGN IN. DISTRIBUTION ON PHYSICAL MEDIA IS NOT AVAILABLE IN ALL COUNTRIES.