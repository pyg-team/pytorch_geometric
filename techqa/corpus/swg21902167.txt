Title: IBM RDz attempts to execute TSO commands results in CRRZI0379E, Request has timed out - United States

Text:
 TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 IBM Rational Developer for System z (RDz) attempts to execute TSO command in the TSO 
command shell or menu manager result in error: CRRZI0379E The request has timed out 

SYMPTOM
In the <workspace>\.metadata\.log file you will find the following error message: 

!MESSAGE TSOCmdSubSystem#internalSendCommandToShell() execute TSO command failed CRRZI0379E The request has timed out because there is no response from the server.
!STACK 0
com.ibm.ftt.rse.mvs.client.subsystems.TSOCommandException: CRRZI0379E The request has timed out because there is no response from the server.
at com.ibm.ftt.rse.mvs.client.subsystems.TSOCmdSubSystem.executeTSOCommand
at com.ibm.ftt.rse.mvs.client.subsystems.TSOCmdSubSystem.internalSendCommandToShell
at org.eclipse.rse.subsystems.shells.core.subsystems.RemoteCmdSubSystem.sendCommandToShell
at org.eclipse.rse.internal.shells.ui.view.CommandsViewPage.sendInput
at org.eclipse.rse.internal.shells.ui.view.CommandsViewPage.sendInput
at org.eclipse.rse.internal.shells.ui.view.CommandsViewPage$1.handleEvent
at org.eclipse.swt.widgets.EventTable.sendEvent
at org.eclipse.swt.widgets.Widget.sendEvent
at org.eclipse.swt.widgets.Widget.sendEvent
at org.eclipse.swt.widgets.Widget.sendEvent
at org.eclipse.swt.widgets.Widget.sendKeyEvent


CAUSE
If you execute a REXX or CLIST as a TSO command in the RDz TSO command shell and it takes more than 20 seconds to complete then you may see this issue.

Below is an example of a REXX command that may fail:

IRemoteCommand remoteCommand = IOSImage.getCommandObject();
remoteCommand.setCommandString("EX 'MYHLQ.REXX(TST)'"); 
remoteCommand.run();



RESOLVING THE PROBLEM
 

 * On RDz 9.5 and later, you can change the timeout value on your MVS Files connection properties:



[/support/docview.wss?uid=swg21902167&amp;aid=1] 

To wait for 200 second: 

[/support/docview.wss?uid=swg21902167&aid=2] [/support/docview.wss?uid=swg21902167&aid=2] 




 * On RDz 9.1.1, one possible solution is to install a plugin that will invoke the RSEClient API with a timeout value.


Disclaimer All source code and/or binaries attached to this document are referred to here as "the Program". IBM is not providing program services of any kind for the Program. IBM is providing the Program on an "AS IS" basis without warranty of any kind. IBM WILL NOT BE LIABLE FOR ANY ACTUAL, DIRECT, SPECIAL, INCIDENTAL, OR INDIRECT DAMAGES OR FOR ANY ECONOMIC CONSEQUENTIAL DAMAGES (INCLUDING LOST PROFITS OR SAVINGS), EVEN IF IBM, OR ITS RESELLER, HAS BEEN ADVISED OF THE POSSIBILITY OF SUCH DAMAGES.



Below is an example that can be used: 



public class MyTsoCommand {

public String run(IOSImage conn, IProgressMonitor monitor)
throws OperationFailedException, RemoteFileException,
InterruptedException {

MVSFileSystem fileSystem = ((ZOSSystemImageImpl) conn)
.getMVSFileSystemImpl();
MVSFileMappingRootImpl mr = (MVSFileMappingRootImpl) fileSystem
.getMappingRoot();
String hostCp = mr.getDefaultHostCodePage();

DataElement[] args = new DataElement[2];

args[0] = RSEClient.argument(fileSystem, "name", cmd, hostCp); //$NON-NLS-1$
args[1] = RSEClient.argument(fileSystem, "");
FFSResponse response;

response = RSEClient.command(fileSystem,
IMVSConstants.C_EXECUTE_COMMAND, args, timeout, monitor);
if (response.isSuccess()) {
return (String) response.getResults();
} else {
return response.getMessageString();
}
}


To install the Sample plugin: 
 1. unzip the attached com.ibm.support.rdz.tso.updatesite911.zip 
 2. From RDz 9.1.x, install the plugin from menu Help > Install New Software


[/support/docview.wss?uid=swg21902167&aid=3] [/support/docview.wss?uid=swg21902167&aid=3] 


To use the sample plugin: 
 * Select the menu TSO > Execute command


[/support/docview.wss?uid=swg21902167&aid=4] [/support/docview.wss?uid=swg21902167&aid=4]  * Enter your TSO command, time to wait for the result and select the remote system where to execute it:


[/support/docview.wss?uid=swg21902167&amp;aid=5] 
 * Execution is progressing


[/support/docview.wss?uid=swg21902167&amp;aid=6] 
 * Result is displayed


[/support/docview.wss?uid=swg21902167&amp;aid=7] 

RELATED INFORMATION
 IRemoteCommand API [http://www-01.ibm.com/support/knowledgecenter/api/content/nl/en-us/SSQ2R2_9.1.1/com.ibm.ftt.api.resource.doc/javadoc/reference/api/com/ibm/ftt/resources/core/physical/IRemoteCommand.html]




Disclaimer All source code and/or binaries attached to this document are referred to here as "the Program". IBM is not providing program services of any kind for the Program. IBM is providing the Program on an "AS IS" basis without warranty of any kind. IBM WILL NOT BE LIABLE FOR ANY ACTUAL, DIRECT, SPECIAL, INCIDENTAL, OR INDIRECT DAMAGES OR FOR ANY ECONOMIC CONSEQUENTIAL DAMAGES (INCLUDING LOST PROFITS OR SAVINGS), EVEN IF IBM, OR ITS RESELLER, HAS BEEN ADVISED OF THE POSSIBILITY OF SUCH DAMAGES.




com.ibm.support.rdz.tso.source.zip [/support/docview.wss?uid=swg21902167&aid=9]com.ibm.support.rdz.tso.source.zip [/support/docview.wss?uid=swg21902167&aid=8]com.ibm.support.rdz.tso.updatesite911.zip [/support/docview.wss?uid=swg21902167&aid=11]com.ibm.support.rdz.tso.updatesite911.zip [/support/docview.wss?uid=swg21902167&aid=10]