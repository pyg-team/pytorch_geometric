Title: IBM FAQ Server Firmware Licensed Internal Code Update - United States

Text:
LIC TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 This document contains server firmware and licensed internal code questions and answers. 

RESOLVING THE PROBLEM
This document contains server firmware and licensed internal code questions and answers. 

Q1: What is Licensed Internal Code?
A1: The term "Licensed Internal Code" is referred to across several independent areas of code within POWER systems. 

Areas considered "Licensed Internal Code" across POWER systems include:
- Server Firmware (also called System firmware or Platform firmware)
- IBM i System Licensed Internal Code (also called SLIC or LIC)
- Hardware Management Console (HMC) Licensed Internal Code

Q2: What does this Server firmware contain?
A2: Server firmware contains code for the Flexible Server Processor (FSP), Power Hypervisor (PHYP), Partition Firmware (PFW), and other low level components.

Q3: How do I update Server firmware?
A3: Server firmware can be updated by one of the following methods:

o Through the Hardware Management Console (HMC).
o Through the operating system using a designated service partition on systems without an HMC attached.

Q4: Which method do I use?
A4: A stand-alone machine (one with no HMC attached) can only update firmware using a service partition. There is only one partition defined, and it is the service partition, by default.

Systems with HMC's attached use the HMC to upgrade or update Server Firmware.

Q5: How do I update firmware using service partition?
A5: Firmware update using service partition is a two-step process. First, when MH PTFs are loaded and applied, the firmware repository on the load source is updated. Temporarily applied MH PTFs update the load source B repository, and permanently applied MH PTFs update the load source A repository. Second, flash P is updated from the Load Source A repository, and Flash T is updated from the Load Source B repository.

When the service partition powers down, newer firmware in the load source repository is pushed down into flash memory in the service processor. During this process, SRCD600430A or SRCD600430B is displayed on the control panel or on the HMC. The new code is activated when all partitions are powered off. If other partitions are active while the service partition applies the new code, the system will be running on the P side. This is normal. The system will automatically IPL on the T side the next time all partitions power off.

If a PWRDWNSYS RESTART (*YES) is issued and the service partition is the last partition to power down, then the platform IPL will occur and the partition will not restart automatically.

Q6: How do I update firmware using the HMC?
A6: Firmware updates using the HMC are performed through the Change Internal Code wizard. In the navigation area, select Licensed Internal Code Maintenance, and then select Licensed Internal Code Updates. In the tasks area on the right, Change Internal Code can be selected to start the wizard.

Q7: How do I activate my firmware?
A7: Server firmware is activated when the service processor is IPLed on the P or T side.

Q8: P and T? What are these and which one should I use?
A8: P and T are short for permanent and temporary. These are two copies of server firmware used to provide code to the service processor, power control network, and hypervisor. They are similar to the A and B side for LIC in an IBM OS/400 or i5/OS partition. The system should be operated on the T side.

Q9: How do I know what level of firmware is on my system?
A9: R530, R535, or R540 Stand-alone System:

Do the following: 

1. Run the STRSST command. 2. Select Option 1, Start a service tool, and press the Enter key. 3. Select Option 4, Display/Alter/Dump, and press the Enter key. 4. Select Option 1, Display/Alter storage, and press the Enter key. 5. Select Option 2, Licensed Internal Code (LIC) data, and press the Enter key. 6. Select Option 14, Advanced analysis, and press the Enter key. 7. Select FLASHLEVELS, and press the Enter key. 8. There are no parameters. Press the Enter key.

DISPLAY/ALTER/DUMP
Running macro: FLASHLEVELS 

LS Flash Sync Enabled. 
Side Date/Time MI Keyword PTFs
------------- ------------- ---------- --------
Memory 20040525/1237 SF210_026 MH00082 
Flash P 20040706/0820 SF210_029 MH00095 
Flash T 20040525/1237 SF210_026 MH00082 
Load Source A 20040525/1237 SF210_026 MH00082 
Load Source B 20040525/1237 SF210_026 MH00082 
LS Flash Sync Enabled means that if a new firmware level is available on the load source, then it can be flashed to the FSP. 


R545 (and later) Stand-Alone System 

Do the following: 

Run the DSPFMWSTS command. 

Display Firmware Status 

Service partition . . . . . . . . . . . . . : No 
Firmware update policy . . . . . . . . . . : *HMC 
Server IPL source . . . . . . . . . . . . . : Temporary 
Firmware product ID/release . . . . . . . . : 5733906 V1R2M0 


---Server firmware---- 
Fix PTF 
Copy pack ID 
*ACTIVE EM310_063 MH01066 
*TEMP EM310_063 MH01066 
*PERM EM310_057 MH01049 

Version 6 or Earlier HMC-Managed System 

For an HMC-managed system, check the firmware level as follows: 1. From the HMC, select Licensed Internal Code Updates:

From the HMC, select Licensed Internal Code Updates: [/support/docview.wss?uid=nas8N1015938&amp;aid=1] 2. From the task area, select Change Internal Code. 3. Because an HMC can manage more than one system, select the correct system, and click OK.

Because an HMC can manage more than one system, select the correct system, and click OK. [/support/docview.wss?uid=nas8N1015938&amp;aid=2] 4. Select View system information, and click OK.

Select View system information, and click OK. [/support/docview.wss?uid=nas8N1015938&amp;aid=3] 5. The firmware levels are displayed. 

The firmware levels are displayed. [/support/docview.wss?uid=nas8N1015938&aid=4] [/support/docview.wss?uid=nas8N1015938&aid=4] 
Example: Installed, Activated, and Accepted Levels 

T side is 240_261 and P side is 240_259. 
Installed Level = The level at the side we are set to IPL next to. 
Activated Level = What is in memory. 
Accepted Level = What is on the P side. 

IPLed on which Side ? Next IPL which side? Installed Level Activated Level Accepted Level T T 261 261 259 T P 259 261 259 P P 259 259 259 P T 261 259 259 

Version 7 or Later HMC-Managed System 1. From the HMC, select Systems Management, expand Servers, and check the desired system.

From the HMC, select Systems Management, expand Servers, check the desired System. [/support/docview.wss?uid=nas8N1015938&aid=5] [/support/docview.wss?uid=nas8N1015938&aid=5] 2. Expand Updates, select View system information.

Expand Updates, select View system information. [/support/docview.wss?uid=nas8N1015938&aid=6] [/support/docview.wss?uid=nas8N1015938&aid=6] 3. Specify None - Display current values and click OK.

Specify None - Display current values and click OK. [/support/docview.wss?uid=nas8N1015938&amp;aid=7] 4. The firmware levels are displayed. 

The firmware levels are displayed. [/support/docview.wss?uid=nas8N1015938&aid=8] [/support/docview.wss?uid=nas8N1015938&aid=8] 

View flashlevels memory, flash p, flash t, Load Source A, and Load Source B. [/support/docview.wss?uid=nas8N1015938&aid=9] [/support/docview.wss?uid=nas8N1015938&aid=9] 


IPLed on T side, next IPL to T side [/support/docview.wss?uid=nas8N1015938&aid=10] [/support/docview.wss?uid=nas8N1015938&aid=10] 

Verify the system and Click Close [/support/docview.wss?uid=nas8N1015938&aid=11] [/support/docview.wss?uid=nas8N1015938&aid=11] 

IPLed on T Side, Next IPL to T Side [/support/docview.wss?uid=nas8N1015938&aid=12] [/support/docview.wss?uid=nas8N1015938&aid=12] 

View current levels. [/support/docview.wss?uid=nas8N1015938&aid=13] [/support/docview.wss?uid=nas8N1015938&aid=13] 

IPLed on P Side, Next IPL to P Side [/support/docview.wss?uid=nas8N1015938&aid=14] [/support/docview.wss?uid=nas8N1015938&aid=14] 

Verify the system and click close. [/support/docview.wss?uid=nas8N1015938&aid=15] [/support/docview.wss?uid=nas8N1015938&aid=15] 


IPLed up on P side, Next IPL to T side. [/support/docview.wss?uid=nas8N1015938&aid=16] [/support/docview.wss?uid=nas8N1015938&aid=16] 

Verify the system and click close [/support/docview.wss?uid=nas8N1015938&aid=17] [/support/docview.wss?uid=nas8N1015938&aid=17] 


Q10: What are the current levels of firmware? 
A10: See the following Web sites: 
http://www-912.ibm.com/s_dir/slkbase.NSF/1444e529a72ba96486256a6400681992/c69799b70a28578c8625712c004fe06b?OpenDocument&Highlight=0,master [http://www-912.ibm.com/s_dir/slkbase.NSF/1444e529a72ba96486256a6400681992/c69799b70a28578c8625712c004fe06b?OpenDocument&Highlight=0,master] 

http://www-912.ibm.com/s_dir/slkbase.nsf/ibmscdirect/E58D7BBF0EAC9A2786256EAD005F54D8 [http://www-912.ibm.com/s_dir/slkbase.nsf/ibmscdirect/E58D7BBF0EAC9A2786256EAD005F54D8] 

Q11: How to make the Permanent (P) side the same as the Temporary (T) side? 
A11: Under Systems Management, select Servers, and select the Server. Then under Updates, select Change Licensed Internal Code for the current release, select a dvanced features, select Accept - Copy Temporary to Permanent, and confirm the action. 
This is a concurrent operation and generally takes approximately 20 minutes to complete.  


Cross reference information Segment Product Component Platform Version Edition Operating System IBM i 6.1 Operating System IBM i 7.1 
HISTORICAL NUMBER
 349923896