Title: IBM How to Integrate the Daeja Virtual Viewer inside Cor360 Application. - United States

Text:
AJP protocol; ajp; CORS; ViewOne; ISAPI; URL TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 The AJP Connector element represents a Connector component that communicates with a web connector via the AJP protocol. This is used where you wish to invisibly integrate JBoss Web into an existing (or new) Apache installation, and you want Apache to handle the static content contained in the web application, and/or utilize Apache's SSL processing. This connector supports load balancing when used in conjunction with the jvmRoute attribute of the Engine.

The integration has to do with cross site scripting or CORS. The link is provided below :
http://en.wikipedia.org/wiki/Cross-origin_resource_sharing [http://en.wikipedia.org/wiki/Cross-origin_resource_sharing]


SYMPTOM
Application context uses Microsoft IIS and considering the Daeja URL as resource. The problem is that it was not able to invoke the Java Servlet class. When we try to integrate the JBoss sample URL inside Microsoft .net application, it cannot initialize the viewer. We get the following error message :

Error Message: Unable to start the viewer. Please let us know we are able to consume the Daeja Virtual inside Microsoft application.


CAUSE
This issue is with cross-site scripting, or CORS, which is not an entirely supported use of ViewONE. So, we need to implement an ISAPI/URL Rewrite type of approach to ensure both the requesting pages and v1files on the webapp server come from the same url.


ENVIRONMENT
IBM Daeja ViewONE, Web Server, Windows environment 

DIAGNOSING THE PROBLEM
To reproduce this issue, install IIS server or any other web server and create an HTML file that calls another html file in an iframe approach, the Viewer. will give the following error :





Error Message: Unable to start the viewer. Please let us know we are able to consume the Daeja Virtual inside Microsoft application. 

IFrame definition:
<iframe src="hostname:8080/DaejaVirtual/v1virdem/annotationsdemo.htm" width="100%" height="100%"></iframe>


RESOLVING THE PROBLEM
In order to resolve this issue, implement ISAPI/URLRewrite approach. The following URl's explains the details of configuring ISAPI with AJP approach :
http://tomcat.apache.org/connectors-doc/webserver_howto/iis.html [http://tomcat.apache.org/connectors-doc/webserver_howto/iis.html]
https://docs.jboss.org/jbossweb/2.1.x/config/ajp.html [https://docs.jboss.org/jbossweb/2.1.x/config/ajp.html] 

http://tomcatiis.riaforge.org [http://tomcatiis.riaforge.org]
http://boncode.net/connector/webdocs/Tomcat_Connector.htm [http://boncode.net/connector/webdocs/Tomcat_Connector.htm]

First the plugin needs to be downloaded and installed from the above links provided. The request comes to IIS as http or https. Cross domain verification is checked if the application has same or different domain name, if domain name doesn't match, then it will throw an error that domain names doesn't match. Normally IIS can not execute Servlets and Java Server Pages (JSPs), configuring IIS to use the JK ISAPI redirector plugin will let IIS send servlet and JSP requests to Tomcat. The request which comes from end user ( should be something like example.com). The client requests the url, which will go to the IIS, it will redirect to JBOSS, JBOSS will respond back to IIS and IIS will respond back to the browser.
These are some sample url that can be used:
example.com/viewone/viewer.jsp
example.com/index.aspx