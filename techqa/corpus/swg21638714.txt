Title: IBM ESX hosts disappear from resource pools after running vCenter Discovery. - United States

Text:
ESX; discovery; VC discovery; vcenter discovery; resource pools; pools FLASH (ALERT)

ABSTRACT
 After TSAM upgrade 7.2.4 to 7.2.4.1 ESX hosts disappear from resource pools. 

For example... There are 3 server pools on the same vCenter. If vCenter discovery is run on one of them all ESX hosts from resource pools of other 2 disappear. 

NOTE: This will affect customers with multiple VMware resource pools and running TSAM 724 FP1. 

CONTENT
If you have upgraded to TSAM 724 FP1 (or have a fresh install of TSAM 724 FP1) and you have multiple VMWare resource pools, it is possible that you may see this problem. 

APAR IV43119 has been created to address this issue. This problem has been resolved in TSAM 724 FP2 which is now available. However to resolve this problem in your current TSAM 724 FP1 environment, please follow these steps to add ESX host back to the pools:

- Logon to Maximo UI as maxadmin.
- Navigate to the resource pools application: 
"Goto->Administration->Provisioning->Resource Pools"
- First Goto the Resource Pools where all the ESX hosts are added and then remove the ESX Hosts which belong to other pool and are added incorrectly here.
- Select the Resource pools from which the ESX hosts are missing/removed. 
- Select action "Add Computers" from the top select action drop down and then select all the required 
ESX hosts. 

This way all the ESX host will be added back to the pools and you can go ahead with provisioning. 

Now to resolve issue with vCenter Discovery removing ESX hosts, please backup your existing Cloud_Discover_VirtualCenter WF and replace with the one attached. 

Following these steps to do this...
- Make Cloud_Discover_VirtualCenter WF editable:
su - ctginst1 (on TSAM Server)
db2 connect to maxdb71 user maximo using your_pw
db2 set schema maximo
update workflow4 set is_editable='Y' where workflow_name='Cloud_Discover_VirtualCenter' 

- From Maximo UI, Click on StartCenter and go to Provisioning Workflows.
- Search for Cloud_Discover_VirtualCenter and select it.
- Select all lines in the WF and save to file (for backup purposes).
- Take the contents of attached Cloud_Discover_VirtualCenter.wkf and replace what you have.
- Save/compile WF and run vCenter Discovery.

Note that ESX hosts will not disappear after running vCenter Discovery.

Cloud_Discover_VirtualCenter.wkf [/support/docview.wss?uid=swg21638714&aid=2]Cloud_Discover_VirtualCenter.wkf [/support/docview.wss?uid=swg21638714&aid=1]