Title: IBM Build-up of XinY disaster recovery files in a Cluster - United States

Text:
netcool; impact; netcool/impact; nci; xiny; data; source; type; item; datasource; datatype; dataitem; file; system; roots TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 A build-up of "orphaned" file system records can start to impinge upon the Impact Server's processing capability. 

CAUSE
During failover and failback a mismatch between DataItems and the file system records can occur and the file system records are no longer under the direct control of the DataItems. These file system records in: 

$NCHOME/impact/db/[ImpactServerName]/71

(where [ImpactServerName] is the name of the ImpactServer - e.g. NCI) can build-up to levels that impinge upon the ImpactServer's ability to process.




DIAGNOSING THE PROBLEM
Checking the number of files held in: 

 

 * 


with the command: 
 * 


if this is significantly greater than the number of DataItems then the behaviour is present. 


RESOLVING THE PROBLEM
Immediate resolution is possible in a similar fashion to that covered in the TechNote "Memory growing, diskspace used up" (link below) in that one removes the files (except the roots file) from: 




 * 


These will be rebuilt upon the next new DataItem being inserted into the XinY DataType "XinY_EventStatusTallyType". 

However, the problem is still prone to reappear and a more suitable, long term solution is required. This is currently added as a rider to Request For Enhancement (RFE) ID: 15834 (RTC ID: 6314) and this can be viewed, commented upon, added to and voted for via the link below. 

 * Once you've logged in, click on Search for RFEs and select the Search by RFE IDs or RATLC numbers tab and here you can enter the RFE ID: 
 * 15834 
 * and click search. You should retrieve one result:
 * 
 * 
 *  "The ability to remove the no longer needed XinY data items as part of the Wizard" 


One solution is to run a Policy periodically that compares the contents of the DataType with the contents of the directory: 

 * 


and removes files that have no listing in the DataItems ( apart from the roots file). 

Other behaviour that occurs is that these "orphaned" entries can also retain records in the roots file and these should be expunged too. The most immediate solution is to delete the contents of the roots file and the next DataItem added to the DataType will automatically repopulate the file with the current set of DataItems. A more long term solution is to again compare the contents of the DataType with the contents of the roots file and remove the entries that have no listing in the DataItems from the roots file. 
RELATED INFORMATION
 Memory growing diskspace used up [http://www-01.ibm.com/support/docview.wss?uid=swg21578032]
Request For Enhancement site [http://www.ibm.com/developerworks/rfe/tivoli/]