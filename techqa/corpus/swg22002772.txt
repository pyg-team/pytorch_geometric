Title: IBM PureData for Analytics - nzmicrodiskrepair command - United States

Text:
pda netezza puredata for analytics nzmicrodiskrepair nzraidcheck TECHNOTE (FAQ)

QUESTION
 What is the nzmicrodiskrepair command and how do I use it? 

ANSWER
nzmicrodiskrepair is a command to fix errors detected by nzraidcheck command.
nzraidcheck needs to be run prior to running this command.

Nzmicrodiskrepair command itself takes only a few seconds (usually less than 10 seconds).
As database will need to be paused twice during this process we advise to schedule a 1 hour outage.

[nz@netezza ~]$ nzsystem pause
Are you sure you want to pause the system (y|n)? [n] y
[nz@netezza ~]$ nzsystem set -arg system.spuDiskMultipath=false
Are you sure you want to change the system configuration (y|n)? [n] y
[nz@netezza ~]$ nzsystem resume
[nz@netezza ~]$ /nz/kit/share/tools/storage/nzmicrodiskrepair -mode RepairOnly

[nz@netezza ~]$ nzsystem pause
Are you sure you want to pause the system (y|n)? [n] y
[nz@netezza ~]$ nzsystem set -arg system.spuDiskMultipath=true
Are you sure you want to change the system configuration (y|n)? [n] y
[nz@netezza ~]$ nzsystem resume

Now you can run nzraidcheck again to confirm all is fixed.
As this command runs for a long time (depending on amount of data) it is best to run it in background using "&" at the end of the command and then running disown.
[nz@netezza ~]$ nohup /nz/kit/bin/adm/tools/nzraidcheck -mode checkOnly &