Title: IBM PJ43237: OBJECTS IN STORAGE CACHE CANNOT BE DECRYPTED CORRECTLY AFTER THE ORIGINAL CONTENT HAS BEEN MOVED TO A NEW LOCATION - United States

Text:
 SUBSCRIBE TO THIS APAR
By subscribing, you receive periodic emails alerting you to the status of the APAR, along with a link to the fix after it becomes available. You can track this item individually or track all items by product.

Notify me when this APAR changes.

Notify me when an APAR for this component changes.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  When a sweep task moves content from one storage area to
   another, the copy stored within content cache is not updated.
   If both content areas are encrypted, then the copy within the
   content cache will not match the copy in the new location.  When
   trying to retrieve the document from content cache, decryption
   will not occur correctly, and the content will appear corrupt.
   
   
    
   
   

LOCAL FIX

PROBLEM SUMMARY
 *  ****************************************************************
   * USERS AFFECTED:                                              *
   * Customers using 5.2.0.3-P8CPE-IF006 and prior retrieving     *
   * stale content from content cache after it has been moved to  *
   * a different encrypted or compressed storage area.            *
   ****************************************************************
   * PROBLEM DESCRIPTION:                                         *
   * Users retrieving content at a remote site where that content *
   * is being retrieved from a local content cache may get        *
   * corrupted content.  This corruption can occur if the content *
   * has been moved to a different storage area (e.g. via CPE     *
   * Bulk Move job) and the original storage area or new storage  *
   * area encrypts or compresses the content.  The corruption     *
   * occurs because a different encryption key is used once the   *
   * content has been moved to a new storage area.  This          *
   * encryption key cannot properly decrypt the old cached        *
   * content resulting in corrupt content being returned.  The    *
   * corruption can also occur if the content was compressed in   *
   * the original storage area but not the new storage area or    *
   * vice versa.                                                  *
   ****************************************************************
   * RECOMMENDATION:                                              *
   * Upgrade to 5.2.0.4-P8CPE-FP004 or later                      *
   ****************************************************************
   
   
    
   
   

PROBLEM CONCLUSION
 *  Fixed in 5.2.0.4-P8CPE-FP004 and later.  This corruption problem
   was resolved by removing the stale content from the content
   cache as part of the CPE API MoveContent operation.  Hence, the
   old content that might have used a different encryption key than
   the current storage area, will not be returned from the content
   cache.  Likewise, if the content in the content cache had been
   compressed in either the original storage area and/or the new
   storage area, then it is also removed from the cache as part of
   the MoveContent operation.
   
   After the MoveContent operation completes, the content may
   optionally be retrieved from the new storage area and loaded
   into any content cache areas where it previously existed.
   Hence, if content was cached in the local content cache prior to
   a CPE MoveContent operation being performed, it will be
   available again in the same content cache shortly thereafter.
   This option may be enabled by setting the following JVM variable
   on the Content Platform Engine server.  By default, this option
   is disabled.
   
   content.cache.prefetchAfterMove=true
   
   If the Bulk Move content sweep job is being used to perform the
   move content operation, then this JVM property only needs to be
   set on the Content Platform Engine servers running in the Object
   Store site, since sweep jobs only run in the Object Store site.
   
   
    
   
   

TEMPORARY FIX

COMMENTS
 *  This new feature has been added to 5.2.1.0-P8CPE, and we will
   not back-port it to older releases.
   
   
    
   
   

APAR INFORMATION
 * APAR NUMBER
   PJ43237
   
   
 * REPORTED COMPONENT NAME
   CONTENT ENGINE
   
   
 * REPORTED COMPONENT ID
   5724R8101
   
   
 * REPORTED RELEASE
   520
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2015-05-06
   
   
 * CLOSED DATE
   2015-09-01
   
   
 * LAST MODIFIED DATE
   2015-09-01
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   CONTENT ENGINE
   
   
 * FIXED COMPONENT ID
   5724R8101
   
   

APPLICABLE COMPONENT LEVELS
 * R520 PSY
   UP