Title: IBM Stop all WebSphere Application Server-related Java processes before using the Update Installer for WebSphere software - United States

Text:
v6rnotes; v601rnotes TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 Active Java™ processes can interfere with product updates that the update installer program performs. 

CAUSE
The update installer program requires you to stop all WebSphere Application Server-related Java processes that are running on the system where you are using the update installer program. For example, Java processes can include: 

 * All Java Virtual Machines (JVMs) 
 * WebSphere Application Server processes 
 * IBM HTTP Server processes 
 * Web server processes affected by updates to the plug-ins 
 * First steps consoles 
 * Installation verification test (IVT) processes 
 * The Profile creation wizard 
 * Other InstallShield for MultiPlatforms (ISMP) installation programs 
 * InstallShield for MultiPlatforms uninstall programs 
 * The IBM Rational Application Developer Agent Controller


If the First steps console or a WebSphere Application Server Java process is running when you start to install a maintenance package, you might see the following error panel in the Update installer wizard: 

Failure: The update of the following product has failed:

IBM WebSphere Application Server Network Deployment - E:\IBM\WebSphere\ND
The following maintenance package could not be installed:
PK00274 - Add jython.jar to ws_ant JVM classpath

For more information, refer to the following log file:
E:\IBM\WebSphere\ND\logs\update\PK00274.install\updatelog.txt

Click Finish to exit the wizard. 
In addition, you might see the following error in the updatelog.txt file. The actual name of the file that the update installer failed to delete can vary. 

Install,
com.ibm.ws.install.ni.ismp.actions.InstallMaintenancePackage, 
err, Failed to delete: 
file:/C:/IBM/WebSphere/AppServer/lib/htmlshell.jar 
If a WebSphere Application Server Java process is running when you start to install a Version 6 maintenance package, you might also see the following error in the updatelog.txt file: 

Install,
com.ibm.ws.install.ni.ismp.actions.InstallMaintenancePackage, 
msg1, Updating component: samp.messaging, percent complete: 9%
Install, 
com.ibm.ws.install.ni.ismp.actions.InstallMaintenancePackage, 
msg1, Updating component: activity, percent complete: 10%
Install, 
com.ibm.ws.install.ni.ismp.actions.InstallMaintenancePackage, err,
Failed to delete:
file:/C:/Program%20Files/ibm/WebSphere/AppServer/lib/activity.jar
Install, 
com.ibm.ws.install.ni.ismp.actions.InstallMaintenancePackage, err,
Failed to delete: 
file:/C:/Program%20Files/ibm/WebSphere/AppServer/lib/activity.jar
Install, 
com.ibm.ws.install.ni.ismp.actions.InstallMaintenancePackage, err,
java.io.IOException: Failed to delete: 
file:/C:/Program%20Files/ibm/WebSphere/AppServer/lib/activity.jar
at com.ibm.ws.install.ni.ismp.utils.ISMPLogUtils.logException
(ISMPLogUtils.java:42)
at com.ibm.ws.install.ni.ismp.actions.InstallMaintenancePackage.
execute(InstallMaintenancePackage.java:86)
at com.installshield.wizard.RunnableWizardBeanContext.
run(RunnableWizardBeanContext.java:21) 
Install, 
com.ibm.ws.install.ni.ismp.actions.ISMPLogSuccessMessageAction, 
msg1, INSTCONFFAILED 
The activity.jar class is often the first class to fail, but the order of failure can vary. 
RESOLVING THE PROBLEM
Perform the following procedure to fix the problem: 

 

 * Stop all Java processes, including ISMP installation or uninstallation programs related to the following products and processes:
   
    * WebSphere Application Server products and the following processes:
       * server1 
       * dmgr 
       * nodeagent 
       * Any other server processes
         
         
      
      
    * IBM HTTP Server
      
      
    * IBM HTTP Server administrative server
      
      
    * Web servers that use a Web server plug-in for WebSphere Application Server
      
      
    * The First steps console
      
      
    * The installation verification test (IVT)
      
      
    * The Profile creation wizard
      
      
    * Any running Application Client process
      
      
    * Other InstallShield for MultiPlatforms (ISMP) installation programs
      
      
    * InstallShield for MultiPlatforms uninstallation programs
      
      
    * Rational Application Developer Agent Controller
      
      
   
   If necessary, restart the system or stop all Java processes on the system before using the update installer program.
   
   Windows® systems only: 
   
   On Windows systems, perform the following procedure to search for and stop running java.exe processes that might be locking files:
    1. Press Ctrl-Alt-Delete to display the Logon information panel. 
    2. Click Task Manager. 
    3. Click the Processes tab. 
    4. Select the check box labeled Show processes from all users. 
    5. Click the Image Name column header to sort processes alphabetically. 
    6. Right click any java.exe process and click End Process.
   
   
   Linux® and UNIX® systems only:
   
   Use the kill command to kill all Java processes that are running. If running Java processes are not related to WebSphere Application Server products and it is not possible to stop them, stop all WebSphere Application Server product-related processes. Use the following command to determine all processes that are running:
   
   
   
   ps -ef | grep java 
   Stop all WebSphere Application Server related processes with the kill command. 
   
   kill -9 java_pid_1 java_pid_2...java_pid_n 
   
 * Start the Update Installer program, and uninstall the failed maintenance package.
   
   
 * Use the Update Installer program again to reinstall the maintenance package.



Cross reference information Segment Product Component Platform Version Edition Application Servers WebSphere Application Server for z/OS Install z/OS 6.0.1 Application Servers Runtimes for Java Technology Java SDK