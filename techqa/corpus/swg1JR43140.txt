Title: IBM JR43140: DB2 EXCEPTION IS OCCURRED WHEN EXECUTING UPGRADE_7X.BAT FOR UPGRADING BPM 7.5.0.1 TO BPM 7.5.1 - United States

Text:
  A FIX IS AVAILABLE
Version 7.5.1 Fix Pack 1 for the IBM Business Process Manager products [http://www-01.ibm.com/support/docview.wss?uid=swg24033036]


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  When executing upgrade_7x.bat for upgrading BPM 7.5.0.1 to BPM
   7.5.1, got errors as below, and now has a workaround for it,
   but it's a valid issue that need to be fixed.
   
   com.lombardisoftware.tools.dbupgrade.UpgradeDatabase - Exception
   while upgrading your Teamworks installation
   2012. 6. 7    ?~Ka  4:12:45 SEVERE:
   com.lombardisoftware.tools.dbupgrade.UpgradeDatabase - Check the
   log files for details
   2012. 6. 7    ?~Ka  4:12:45 FINE:
   com.lombardisoftware.tools.dbupgrade.UpgradeDatabase -
   java/sql/Statement.isClosed()Z
   java.lang.AbstractMethodError: java/sql/Statement.isClosed()Z
   at
   com.lombardisoftware.tools.dbupgrade.steps.UpdateManagedAsset$1.
   doInConnection(UpdateManagedAsset.java:119)
   at
   org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.
   java:342)
   at
   com.lombardisoftware.tools.dbupgrade.steps.UpdateManagedAsset.ex
   ecute(UpdateManagedAsset.java:76)
   at
   com.lombardisoftware.tools.dbupgrade.UpgradeDatabase.main(Upgrad
   eDatabase.java:173)
   2012. 6. 7    ?~Ka  4:12:45 INFO:
   com.lombardisoftware.tools.dbupgrade.UpgradeDatabase - IBM
   Business Process Manager V7.5.1 Enterprise database upgrade
   program finished.
   
   
    
   
   

LOCAL FIX
 *  Workaround:
   1) Locate upgrade.xml file under
   <BPM_root>/BPM/Lombardi/tools/upgrade/upgrade_7x/upgrade.xml
   2) Search for this line
   <echo message="Starting upgrade tool" />
   
   Do change from:
       <fileset dir="${procsvr.db.jdbcClasspath}">
           <include name="*.jar" />
       </fileset>
       <fileset dir="${perfdw.db.jdbcClasspath}">
           <include name="*.jar" />
       </fileset>
   
   to:
       <fileset dir="${procsvr.db.jdbcClasspath}">
           <exclude name="db2jcc.jar" />
           <include name="*.jar" />
       </fileset>
       <fileset dir="${perfdw.db.jdbcClasspath}">
           <exclude name="db2jcc.jar" />
           <include name="*.jar" />
       </fileset>
   3) Rerun upgrade_7x command.
   
   
    
   
   

PROBLEM SUMMARY
 *  ****************************************************************
   * USERS AFFECTED:  Business Process Manager V7.5 User          *
   ****************************************************************
   * PROBLEM DESCRIPTION: Got the DB exception when executing     *
   *                      upgrade_7x.bat for upgrading BPM        *
   *                      7.5.0.1 to BPM 7.5.1                    *
   ****************************************************************
   * RECOMMENDATION:                                              *
   ****************************************************************
   We have both db2jcc.jar and db2jcc4.jar in shipped jdbcdrivers
   for DB2, upgrade tool will include both jars in the classpath.
   And db2jcc.jar was used by default, but "isClosed" method isn't
   available in old JDBC driver. So we should update the
   upgrade.xml to exclude the related db2jcc.jar jdbc driver in
   the classpath.
   
   
    
   
   

PROBLEM CONCLUSION
 *  Pre-requisite is JR43096 [http://www-01.ibm.com/support/docview.wss?uid=swg1JR43096] and JR42683 [http://www-01.ibm.com/support/docview.wss?uid=swg1JR42683]
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   JR43140
   
   
 * REPORTED COMPONENT NAME
   BPM STANDARD
   
   
 * REPORTED COMPONENT ID
   5725C9500
   
   
 * REPORTED RELEASE
   751
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2012-06-19
   
   
 * CLOSED DATE
   2012-09-11
   
   
 * LAST MODIFIED DATE
   2012-09-11
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   BPM STANDARD
   
   
 * FIXED COMPONENT ID
   5725C9500
   
   

APPLICABLE COMPONENT LEVELS
 * R750 PSY
   UP