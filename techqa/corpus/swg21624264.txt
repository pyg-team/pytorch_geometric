Title: IBM Recieving error:  [EJCBC0001E: The service handler
[com.ibm.portal.resolver.data.DataSourceFactoryEx] associated with the
URI
[state.portlet:portlet?include=windowState&include=portletMode&m
ime-type=text/html] could not be located using the COR - United States

Text:
 TECHNOTE (TROUBLESHOOTING)

PROBLEM
After developing and deploying a custom theme, you may begin to see the following error in the browser: 

[11/1/12 21:51:33:850 EDT] 0000004f servlet E com.ibm.ws.webcontainer.servlet.ServletWrapper service SRVE0068E: Uncaught exception created in one of the service methods of the servlet
/themes/html/Default.jsp in application Theme_Modules. Exception created : com.ibm.websphere.servlet.error.ServletErrorReport: com.ibm. wps.resolver.data.exceptions.URIProcessingIOException: EJCBD0021E: The
URI [dav:fs-type1/themes/Portal7.0.0.2/theme.html] and parameters
[[&#39;themeURI&#39;=[&#39;dav:fs-type1/themes/Portal7.0.0.2/theme.html&#39;], &#39;mime-type&#39;=[&#39;text/html&#39;]]] could not be processed: [EJCBD0021E: The URI [dav:fs-type1/themes/Portal7.0.0.2 /nls/theme_en.html] and parameters [[&#39;themeURI&#39;=[&#39;dav:fs-type1/themes/Portal7.0.0.2/theme.html&#39;], &#39;mime-type&#39;=[&#39;text/html&#39;]]] could not be processed: [EJCBC0001E: The service
handler [com.ibm.portal.resolver.data.DataSourceFactoryEx] associated
with the URI [state.portlet:portlet?include=windowState&amp;
include=portletMode&amp;mime-type=text/html] could not be located using the COR APIs.]] 


RESOLVING THE PROBLEM
This error is a result of multiple steps performed when developing a custom theme. The first step is copying the complete plugin.xml and webapp.jar from the Portal 7.0.0.2 theme when developing a custom theme. Then when updating the already deployed theme and removing these two files. For example the following steps can be used to recreate and resolve the issue. 

- Install the SampleTheme.war with the plugin.xml and the webapp.jar
Themes will work as expected
- Update the SampleTheme.war and remove the plugin.xml and the webapp.jar
The theme will now get the error 
[com.ibm.portal.resolver.data.DataSourceFactoryEx] associated with the URI [mod.layout:wstate-rendering] could not be located using the COR APIs.] 
- restart portal and then the themes will get the following error:
[com.ibm.portal.resolver.data.DataSourceFactoryEx] associated with the URI [state.portlet:portlet?include=windowState&amp;include=portletMode&amp;mime-type=text/html] could not be located using the COR APIs.] 
- Stop and start the Theme_Module application and now all themes work.

By restarting the Theme_Module war the mappings are restored and the error condition is resolved.