Title: IBM Insufficient access rights error when clicking "Add now" to create document in FileNet Workplace XT - United States

Text:
 TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 Changes were made to FileNet Content Engine (CE) security and now some users encounter permissions-related error when attempting to create documents in Workplace XT. 

SYMPTOM
The FileNet Content Engine logs the following error when the problem occurs: 

2011-07-01 11:25:20,694 ERROR [com.filenet-IBMcommon.ae.phaselistener.AjaxHandler] Failed to invoke the AJAX method: #{wizardWorker.finish} 

javax.faces.el.EvaluationException: javax.faces.el.EvaluationException: (htmlMessage = The document cannot be added. The requester has insufficient access rights to perform the requested operation., hideStackTrace = false, forcePageRefresh = false, showSecondaryMessageAfter = false, onErrorOkayJs = null, mode = 0) 

 at com.sun.faces.el.MethodBindingImpl.invoke(MethodBindingImpl.java:150) 

 at com.filenet.ae.util.ajax.AjaxRefreshUtil.invokeAjaxEventMethod(AjaxRefreshUtil.java:166) 

 at com.filenet.ae.phaselistener.AjaxHandler.invokeMethod(AjaxHandler.java:589) 

 at com.filenet.ae.phaselistener.AjaxHandler.afterPhase(AjaxHandler.java:339) 

... 

 

Caused by: 

javax.faces.el.EvaluationException: (htmlMessage = The document cannot be added. The requester has insufficient access rights to perform the requested operation., hideStackTrace = false, forcePageRefresh = false, showSecondaryMessageAfter = false, onErrorOkayJs = null, mode = 0) 

... 

 

Caused by: 

(htmlMessage = The document cannot be added. The requester has insufficient access rights to perform the requested operation., hideStackTrace = false, forcePageRefresh = false, showSecondaryMessageAfter = false, onErrorOkayJs = null, mode = 0) 

at com.filenet.ae.util.ce.DocumentUtil.saveDocument(DocumentUtil.java:228) 

... 

 

Caused by: 

com.filenet.api.exception.EngineRuntimeException: E_ACCESS_DENIED: The requester has insufficient access rights to perform the requested operation. errorStack={ 

 at com.filenet.engine.persist.IndependentPersister.checkCreateInstancePermission(IndependentPersister.java:1731) 

 at com.filenet.engine.persist.IndependentPersister.checkCreatePermissions(IndependentPersister.java:1524) 

 at com.filenet.engine.persist.IndependentPersister.preCreate(IndependentPersister.java:1029) 

...


CAUSE
Customer had added users and/or groups to the object store to give access to additional users without using the object store security script.



DIAGNOSING THE PROBLEM
Check the CE error log to see what error(s) are logged when the problem occurs.



RESOLVING THE PROBLEM
There are two "roles" that users and groups can be assigned to when an object store is created. The two roles are "object store administrators" and "object store users". If additional users/groups need to be added to an object store so that they have permissions to use or administer an object store after the object store is initially created, a special security script needs to be run to correctly add the users/groups to the desired object store role(s). Simply adding users and/or groups to the security tab of the object store is not sufficient. It is recommended that only groups are added these roles since doing so allows you to add and remove other groups and individual users as needed later on. 

 

The P8 documentation covers how to update an object store with new users and groups. Search for "Update object store with new users and groups" in the P8 Product Documentation or refer to the documentation link below for CE 4.5.1 - 5.2.0. Note in CE 5.2.1 and later, the script is downloaded when you run the Security Wizard. 

 

The "XML security script information file" the documentation refers to is located in the following location by default on machines where you have P8 Enterprise Manager installed: 

 

\ContentEngine\Scripts\Component Library 

 

Running the Security Script Wizard as described in the documentation to add the desired groups to the desired object store role(s) as described in the documentation should resolve this problem.

RELATED INFORMATION
 Update object store security CE 4.5.1 - 5.2.0 [http://www-01.ibm.com/support/knowledgecenter/SSNW2F_5.2.0/com.ibm.p8.security.doc/p8psh025.htm]