Title: IBM PK73647: OTMA CACHES ACEE PER USER PER OTMA MEMBER. LARGE NUMBER OF USERSACCESSING SAME IMS VIA MULTIPLE MEMBERS, STORAGE ISSUE. - United States

Text:
 SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  OTMA caches RACF ACEEs per OTMA TMEMBER. There is no limit
   on the number of ACEEs cached. Expired or aged ACEEs are
   also retained for a mininum of 5 minutes after expiration
   ( first use of ACEE after 5 minutes deletes expired ACEE ).
   With a large set of unique userids accessing the same IMS
   via multiple OTMA clients, this can cause a EPVT storage
   issue ( ACEEs are in ELSQA , subpool 249 SP249 ).
   ACEEs are also deleted when an OTMA member reconnects after
   disconnecting ( i.e. CLIENT BID time ).
   While there is no issue of orphan or stranded ACEEs, the
   sheer number of ACEEs can pose a problem for some customers.
   In this case customer has > 100000 potential unique ACEEs
   accessing a single IMS via multiple OTMA members.
   Improvements to the cacheing algorthim are required
   as well as a limit on number of userids cached to prevent
   storage abends.
   
   
    
   
   

LOCAL FIX
 *  A disconnect/reconnect ( for IMS Connect users, cycle the
   DATASTOR ) will delete all cached ACEEs fo the member.
   
   
    
   
   

PROBLEM SUMMARY
 *  ****************************************************************
   * USERS AFFECTED: IMS V910 customers using OTMA                *
   ****************************************************************
   * PROBLEM DESCRIPTION: Lots of OTMA ACEEs in the subpool 249   *
   ****************************************************************
   * RECOMMENDATION: INSTALL CORRECTIVE SERVICE FOR APAR/PTF      *
   ****************************************************************
   Today the cached ACEEs for OTMA users are kept in the subpool
   249. These ACEEs can only be deleted when the input trans
   from an user is received by OTMA and the cached ACEE is expired.
   However, in many cases, either the ACEE aging value is too
   high or there is no new input trans for the user. Some cached
   ACEE will stay in the subpool 249 for very long time until
   the OTMA client or member is reconnected.
   
   The issuing of the /SECURE OTMA REFRESH command only turns on
   an internal flag for user(s) to indicate that the cached
   ACEE for the user(s) is an expired one. This command does not
   delete the ACEE for the user(s). A new input transaction for
   the user(s) is still required to check the ACEE age and to
   delete the expired ACEE.
   
   
    
   
   

PROBLEM CONCLUSION
 *  GEN:
   POSTREQ PK99224 [http://www-01.ibm.com/support/docview.wss?uid=swg1PK99224]
   KEYWORDS:
   
   *** END IMS KEYWORDS ***
   The existing IMS BCB timer compression routine has been enhanced
   to call OTMA every 2 minutes to perform the ACEE cleanup
   operation.
   
   Since OTMA uses a hash table of 127 entries to store and
   search the cached ACEEs for user(s), each hash table
   entry can point to a chain of user(s). Each invocation of the
   OTMA ACEE cleanup from the BCB timer compression routine will
   only work on one hash table entry and the user(s) on that
   hash table entry. OTMA will try to select a different hash
   table entry for ACEE cleanup for the next invocation.
   
   The following modules were updated:
   
   DFSXBC60 - invoked DFSYOTMA macro to request ACEE cleanup.
   
   DFSYMOM0 - invoked all of the existing members one at a time
              to perform ACEE cleanup. Also, enhanced the client
              bid logic to properly delete the cached ACEEs.
   
   DFSYMEM0 - invoked DFSYRAC0 to do ACEE cleanup for a member.
   
   DFSYRAC0 - performed ACEE cleanup for an user.
   
   DFSTSCD  - created a flag to indicate that this OTMA has
              cached ACEE in one or more member(s).
   
   DFSYMSG  - create a new NAK code for the failure of the
              client bid request due to the race condition of
              the ACEE cleanup.
   
   DFSYMCB  - added a new variable to know # of user(s) with
              cached ACEE.
   
   DFSYMTE  - Add a new variable to keep the index value of
              OTMA user hash table.
   
   DFSYAWE/DFSYOTMA - enhanced so that DFSXBC60 can invoke
              the OTMA AWE processors.
   
   DFSYRAC  - enhanced so that DFSYMEM0 can call DFSYRAC0 for
              ACEE cleanup.
   
   DFSAOA00/DFSAOAM1/DFSAOAM2 - forced to be recompiled for macro
                                changes.
   
   
    
   
   

TEMPORARY FIX

COMMENTS
 *  REPINNED RP09/10/21 (ATXT) TO ADD POSTREQ PK99224 [http://www-01.ibm.com/support/docview.wss?uid=swg1PK99224] INFO.
    **** PE09/10/21 PTF IN ERROR. SEE APAR PK99224 [http://www-01.ibm.com/support/docview.wss?uid=swg1PK99224] FOR DESCRIPTION
   &#215;**** PE09/10/21 FIX IN ERROR. SEE APAR PK99224 [http://www-01.ibm.com/support/docview.wss?uid=swg1PK99224]  FOR DESCRIPTION
   
   
    
   
   

APAR INFORMATION
 * APAR NUMBER
   PK73647
   
   
 * REPORTED COMPONENT NAME
   IMS V9
   
   
 * REPORTED COMPONENT ID
   5655J3800
   
   
 * REPORTED RELEASE
   901
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt / Xsystem
   
   
 * SUBMITTED DATE
   2008-10-10
   
   
 * CLOSED DATE
   2009-05-06
   
   
 * LAST MODIFIED DATE
   2009-11-06
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
    PK79669 [http://www-01.ibm.com/support/docview.wss?uid=swg1PK79669] PK79670 [http://www-01.ibm.com/support/docview.wss?uid=swg1PK79670] UK46332
   
   

MODULES/MACROS
 *  DFSAOAM1 DFSAOAM2 DFSAOA00 DFSTSCD  DFSXBC60
   DFSYAWE  DFSYMCB  DFSYMEM0 DFSYMOM0 DFSYMTE  DFSYOTMA DFSYRAC
   DFSYRAC0
   
   
    
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   IMS V9
   
   
 * FIXED COMPONENT ID
   5655J3800
   
   

APPLICABLE COMPONENT LEVELS
 * R900 PSY UK46332
   UP09/05/08 P F905