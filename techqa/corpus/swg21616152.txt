Title: IBM Attempting to run a Query job in Deployment Manager errors - United States

Text:
premature end of file credential is null TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 User is able to create a credential in Deployment Manager however when they attempt to use the credential in a Query job, the job fails with premature end of file error message. 

SYMPTOM
Query the SPSSCMOR_CREDENTIALS table in the C&DS repository, the credential shows up but the password is blank. We would expect to see an encrypted password.


CAUSE
When customer ran the CliSetup for C&DS they entered the install path to be CNDS421 instead of /CNDS421 which gave the keystore a relative path location. They keystore assumes a absolute path location.

ENVIRONMENT
iSeries

DIAGNOSING THE PROBLEM
following in the spssemgr.log:

Sep 17 2012 09:15:40 [main] ERROR com.spss.reporting.core.ui.properties.AbstractReportPropertyDataSource - Credentials selected are invalid for datasource ppgsys02. java.lang.reflect.InvocationTargetException: ; nested exception is: org.xml.sax.SAXParseException: Premature end of file. at com.spss.mgmt.common.ui.UIExceptionHandlingRunnable$RunnableWithContextWrapper.run(UIExceptionHandlingRunnable.java:150) at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:121) Caused by: org.xml.sax.SAXParseException: Premature end of file. 

In the SystemOut: I see the following around the time he was attempting to use the new credential:
com.ibm.ws.util.ThreadPool$Worker.run(ThreadPool.java:1551)

[9/17/12 9:15:18:293 EDT] 00000032 Message E org.apache.axis.Message writeTo java.io.IOException:
AxisFault
faultCode: {http://schemas.xmlsoap.org/soap/envelope/ [http://schemas.xmlsoap.org/soap/envelope/]}Server.userException
faultSubcode:
faultString: java.io.IOException: java.io.IOException: java.io.IOException: Non nillable element 'credential' is null.
faultActor:
faultNode:
faultDetail:
{http://xml.apache.org/axis/ [http://xml.apache.org/axis/]}stackTrace:java.io.IOException: java.io.IOException: java.io.IOException: Non nillable element 'credential' is null.


RESOLVING THE PROBLEM
It appears the KeyStore is not being found.
Review the Websphere Solutions console.
Application servers > CNDS421 > Process Execution > Process Definitions
> Java Virtual MAchine > Custom Properties the platform.keystore.file
entry must be correct.

In this particular instance during the CliSetup customer entered
CNDS421 instead of /CNDS421 this gave keystore a relative location
instead of an absolute location.


RELATED INFORMATION
 Need more help? Our C&DS forum is Live! [https://developer.ibm.com/answers/topics/collaboration.html?smartspace=predictive-analytics]