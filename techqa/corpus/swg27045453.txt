Title: IBM Installing and Configuring Microsoft SQL Server 2012 for IBM® Content Manager OnDemand - United States

Text:
 RELEASE NOTES

ABSTRACT
 IBM® Content Manager OnDemand is designed to work with variety of database engines including Microsoft SQL Server. This document addresses the installation and configuration issues of Microsoft SQL 2012 Server for Content Manager OnDemand. It also applies to SQL Server 2008 R2 and 2014. 

CONTENT
Microsoft SQL Sever 2012 requires Microsoft .NET Framework 3.5.1 to be installed. On Windows 2008 R2 server, this step is not performed by the SQL Server 2012 installation process. This can be done using the Windows 2008 R2, 2012 or 2012 R2 Server Manager outside the SQL Server 2012 installation. In the Server Manager interface, select Features on the left panel and select .NET Framework 3.5.1 from the list. One may need to click Add Features on the right panel if .NET Framework 3.5.1 is not shown. Follow the screen directions to install the feature and reboot as instructed. This limitation also applies to SQL Server 2014 but does not apply to SQL Server 2008 R2.


To install Microsoft SQL Server 2012, click setup.exe to launch the SQL Server Installation Center. Select Installation on the left panel. Select New SQL Server standalone installation or add features to an existing installation on the right panel. Make sure there are no failures on the following Setup Support Rules panels. 

 

On the Setup Role panel, choose SQL Server Feature Installation. On the Feature Selection screen, select Database Engine Services, Client Tools Connectivity, Documentation Components and Management Tools - Basic. Make sure there are no failures on the Installation Rules panel. 

 

On the instance Configuration panel, choose Default instance. 

 

On the Database Engine Configuration panel, choose Mixed Mode (SQL Server authentication and Windows authentication) and specify a password for the SQL server admin ID, sa. The Mixed Mode authentication is needed to create a new SQL Server user ID later to be used by the OnDemand instance owner. Click Add Current User to also add the logged on Windows user ID to the SQL Server. Click Next to Continue as instructed. Make sure there are no failures on the Installation Configuration Rules panel. 

 

When the SQL Server 2012 installation completes, make sure there are no errors, close the SQL Server Installation Center and reboot the server if required. 

 

Launch the SQL Server 2012 Management Studio and connect to Database Engine. Click Security and expand Logins on the left panel. Note the Windows user ID used to install SQL Server 2012 is listed but in the form of <domain_name>\user_name. We need to create a new SQL Server login without the host name or domain name. Right click Logins and select New Login... Enter the name of an existing Windows user ID with administrator rights, such as odadmin. This is the user ID that will be used to create the OnDemand instance. Select SQL Server Authentication and enter a password for the new SQL Server user ID. Accept the default database name master. On the Server Roles page, make sure the dbcreator box is checked. Click OK to create the new login. 

 

OnDemand SMO Registration and Regasm.exe 

Before one can proceed and create the OnDemand Instance with SQL Server 2012, one should verify that a correct version of regasm.exe exists. OnDemand ships with an SMO (SQL Server Management Objects) DLL which needs to be registered by regasm at the install time. OnDemand V8.5 and V9.0 uses 64-bit v2.0.50727 RegAsm.exe. OnDemand V9.5 uses 64-bit v4.0.30319 RegAsm.exe. 

 

v2.0.50727 RegAsm.exe is normally available on the Windows Server 2008 R2 while v4.0.30319 RegAsm.exe is normally available on the Windows Server 2012 and Windows Server 2012 R2. 

 

On systems without v2.0.50727 RegAsm.exe installed, one can install .NET Framework 3.5 which includes 2.0 and 3.0. If .NET Framework 3.5 is not installed, SQL 2008 R2 can install it automatically under the cover. SQL 2012 and SQL 2014, however, does not install it automatically. On the Windows Server 2008 R2 and higher, one may need to use the Server Manager to install it from the feature selection panel. 

 

On systems without v4.0.30319 RegAsm.exe, one can install .NET Framework 4 or 4.5. If .NET Framework 4 is not installed, run the Windows Update to install it. 

 

To find out which version of regasm.exe is installed, run following commands from a Windows command prompt.

C:\>CD C:\Windows\Microsoft.NET

C:\Windows\Microsoft.NET>DIR regasm.exe /s/b 

 

The sample output shows both versions are installed. 


C:\Windows\Microsoft.NET\Framework\v2.0.50727\RegAsm.exe
C:\Windows\Microsoft.NET\Framework\v4.0.30319\RegAsm.exe
C:\Windows\Microsoft.NET\Framework64\v2.0.50727\RegAsm.exe
C:\Windows\Microsoft.NET\Framework64\v4.0.30319\RegAsm.exe

If OnDemand V9.5 is installed without the presence of 64-bit v4.0.30319 RegAsm.exe, the OnDemand SMO DLL will not be registered and any attempt to run arsdb to create an SQL Server database may lead to crash. Make sure 64-bit v4.0.30319 RegAsm.exe is present before installing OnDemand V9.5. 

If OnDemand V9.5 is installed without 64-bit v4.0.30319 RegAsm.exe, we recommend installing .NET Framework 4.5.1 using the Windows Update or manually. After verifying the presence of 64-bit v4.0.30319 RegAsm.exe, reinstall OnDemand V9.5. Alternatively, one can apply the latest OnDemand V9.5 fixpack, such as 9.5.0.1 to register OnDemand SMO during the install. 

 

To verify if OnDemand SMO is successfully registered, look for the following registry key. 


HKEY_LOCAL_MACHINE\SOFTWARE\Classes\TypeLib\{ECC6E2B2-9901-4A26-AEF0-085507A375EF}\v.r 

where v.r can be 8.5, 9.0 or 9.5 for OnDemand V8.5, V9.0 and V9.5 respectively. 

 

SQL Server 2008 R2 

Unlike SQL Server 2012, SQL Server 2008 R2 can install .NET 3.5 under the cover automatically but does not install .NET Framework 4 automatically. For OnDemand V9.5, .NET Framework 4 is required but not installed automatically by SQL Server 2008 R2. For this reason, we would recommend installing SQL Server 2012 for OnDemand V9.5.