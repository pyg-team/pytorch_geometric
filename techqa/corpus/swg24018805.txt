Title: IBM PK61753; 6.1.0.13: Cannot connect through load balancer/proxy to LDAP server - United States

Text:
PK61753; PK61753; PK61753 DOWNLOADABLE FILES

ABSTRACT
 Virtual Member Manager will throw a ServiceUnavailableException if there is connection problem to LDAP. 

DOWNLOAD DESCRIPTION
PK61753 resolves the following problem:

ERROR DESCRIPTION: 
IBM® WebSphere® Application Server is configured to use a load balancer/proxy setting in front of LDAP servers. It uses federated repository. It takes a few attempts to login to the administrative console. 

The error in the log is: 

com.ibm.ws.wim.adapter.ldap.LdapConnection getRangeAttributes 
CWWIM4520E The 'javax.naming.ServiceUnavailableException: 
xx.xxxxx.com:3268; socket closed; 
remaining name 'CN=xxxxxxx,OU=Generics,OU=xxxxx 
Users,dc=xxxxx,dc=com' 
resolved object com.sun.jndi.ldap. 
LdapCtx@7b907b90' naming exception occurred during processing. 

The Application Server is in one location and the current LDAP proxy resides in another location. In testing, the scenario without the proxy locally as well as as in the other location works. The issue only occurs when connected to LDAP using the proxy. 

LOCAL FIX: 
N/A 

PROBLEM SUMMARY

USERS AFFECTED:
This affects IBM Websphere Application Server version 6.1 users who use federated repositories (VMM - virtual member manager).

PROBLEM DESCRIPTION:
Virtual Member Manager will throw a ServiceUnavailableException if there is a connection problem to LDAP.

RECOMMENDATION:
None

If there is network problem connecting to LDAP, the following exception will be thrown and the connection to LDAP will not be retried:

[12/5/07 12:35:51:749 CST] 0000000a exception E
com.ibm.ws.wim.adapter.ldap.LdapConnection getDirContext
com.ibm.websphere.wim.exception.WIMSystemException:
CWWIM4520E The 'javax.naming.ServiceUnavailableException:
server1.com:26362; socket closed' naming exception occurred
during processing.
at com.ibm.ws.wim.adapter.ldap.LdapConnection
.getDirContext(LdapConnection.java:1355)
at com.ibm.ws.wim.adapter.ldap.LdapConnection
.search(LdapConnection.java:2378)

PROBLEM CONCLUSION: 
The problem has been fixed. The exception will not be thrown and the connection to LDAP will be retried. 

This fix is included in PK61753 and targeted for Fix Pack 6.1.0.17. 
Please refer to the recommended updates page for delivery information: 
http://www-1.ibm.com/support/docview.wss?rs=180&uid=swg27004980 [http://www-1.ibm.com/support/docview.wss?rs=180&uid=swg27004980]

PREREQUISITES
Please download the UpdateInstaller below to install this fix.

URL LANGUAGE SIZE(Bytes) UpdateInstaller [http://www.ibm.com/support/docview.wss?rs=180&uid=swg21205991] US English 7250000 
INSTALLATION INSTRUCTIONS
Please review the readme.txt for detailed installation instructions.

URL LANGUAGE SIZE(Bytes) Readme [ftp://public.dhe.ibm.com/software/websphere/appserv/support/fixes/PK61753/readme.txt] US English 6320 
DOWNLOAD PACKAGE


Download package What is Fix Central (FC)? [http://www.ibm.com/systems/support/fixes/en/fixcentral/help/faq_sw.html] What is DD? [http://www6.software.ibm.com/dldirector/doc/DDfaq_en.html] Download RELEASE DATE LANGUAGE SIZE(Bytes) Download Options 6.1.0.0-WS-WAS-IFPK61753 3/28/2008 US English 30993 FC [http://www.ibm.com/support/fixcentral/quickorder?fixids=6.1.0.0-WS-WAS-IFPK61753&product=ibm%2FWebSphere%2FWebSphere+Application+Server&source=dbluesearch] FTP [ftp://public.dhe.ibm.com/software/websphere/appserv/support/fixes/PK61753/6.1.0.0-WS-WAS-IFPK61753.pak] DD TECHNICAL SUPPORT
 Contact IBM Support using SR (http://www-306.ibm.com/software/support/probsub.html [http://www-306.ibm.com/software/support/probsub.html]), visit the WebSphere Application Server Support Web site (http://www.ibm.com/software/webservers/appserv/was/support/ [http://www.ibm.com/software/webservers/appserv/was/support/]), or contact 1-800-IBM-SERV(U.S. only). 

 [/support/docview.wss?uid=swg24018805&aid=1]Problems (APARS) fixed [/support/docview.wss?uid=swg24018805&aid=2]Problems (APARS) fixed
PK61753