Title: IBM PK11887: USER EXIT CODE WHEN COMPILED WILL NOT LOAD. FAILS WITH A UNABLE TO LOAD LIBRARY ERROR MESSAGE. - United States

Text:
z/os SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  Customer coded the Work Flow exit and found it could not be
   loaded by the system when requested.  They were getting Unable
   to load Library messages.  They had the load module in a AFP
   dataset, but it still was not loaded.  They then determined the
   following -
   
   I seem to have found a fix / workaround for the problem - with
   the help  of
   a more experienced C / C++ programmer on our side.
   
   I basically added the following two #pragma statements found in
   the  ICMGENXT
   sample program (but not in the ICMXENT sample program)
   to my own exit code (which is basically a stripped down version
   of
   ICMXENT):
         #pragma strings(readonly)
         #pragma linkage(WXV2TEnterUE,fetchable)
   
   Then I also changed the
         "extern long WXV2TEnterUE (struct ICMUSERSTRUCT
   *pCMStruct) "
   statement to
         "extern "C" long WXV2TEnterUE (struct ICMUSERSTRUCT
   *pCMStruct)"
   because we are using a CPP compiler.
   
   The following exists also need this code added to them.
   ICMXBAU, ICMXENT, ICMXLEA, and ICMXOVE
   can be made more "z/OS ready".
   
   
    
   
   

LOCAL FIX
 *  Add the following two statements to your user exit code -
   #pragma strings(readonly)
   #pragma linkage(WXV2TEnterUE,fetchable)
   And also the following -
   Then I also changed the
         "extern long WXV2TEnterUE (struct ICMUSERSTRUCT
   *pCMStruct) "
   statement to
         "extern "C" long WXV2TEnterUE (struct ICMUSERSTRUCT
   *pCMStruct)"
   because we are using a CPP compiler.
   
   
    
   
   

PROBLEM SUMMARY
 *  USER EXIT CODE WHEN COMPILED WILL NOT LOAD.  FAILS WITH A UNABLE
   TO LOAD LIBRARY ERROR MESSAGE.
   
   
    
   
   

PROBLEM CONCLUSION
 *  The proper linkage statements were not in the exit
   program samples.  The problem has been corrected.
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   PK11887
   
   
 * REPORTED COMPONENT NAME
   CM390 LIB SER R
   
   
 * REPORTED COMPONENT ID
   5697H6000
   
   
 * REPORTED RELEASE
   830
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2005-09-15
   
   
 * CLOSED DATE
   2006-03-24
   
   
 * LAST MODIFIED DATE
   2007-11-15
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   CM390 LIB SER R
   
   
 * FIXED COMPONENT ID
   5697H6000
   
   

APPLICABLE COMPONENT LEVELS
 * R830 PSY
   UP