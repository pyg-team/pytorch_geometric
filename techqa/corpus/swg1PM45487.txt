Title: IBM PM45487: CLASSNOTFOUNDEXCEPTION USING SUBSTITUTABLE OSGI COMPOSITE BUNDLES (CBA) - United States

Text:
  FIXES ARE AVAILABLE
8.0.0.2: WebSphere Application Server V8.0 Fix Pack 2 [http://www-01.ibm.com/support/docview.wss?uid=swg24031368]
8.0.0.3: WebSphere Application Server V8.0 Fix Pack 3 [http://www-01.ibm.com/support/docview.wss?uid=swg24032315]
8.0.0.4: WebSphere Application Server V8.0 Fix Pack 4 [http://www-01.ibm.com/support/docview.wss?uid=swg24033190]
8.0.0.5: WebSphere Application Server V8.0 Fix Pack 5 [http://www-01.ibm.com/support/docview.wss?uid=swg24033754]
8.0.0.6: WebSphere Application Server V8.0 Fix Pack 6 [http://www-01.ibm.com/support/docview.wss?uid=swg24034673]
8.0.0.7: WebSphere Application Server V8.0 Fix Pack 7 [http://www-01.ibm.com/support/docview.wss?uid=swg24035457]
8.0.0.8: WebSphere Application Server V8.0 Fix Pack 8 [http://www-01.ibm.com/support/docview.wss?uid=swg24036729]
8.0.0.9: WebSphere Application Server V8.0 Fix Pack 9 [http://www-01.ibm.com/support/docview.wss?uid=swg24037574]
8.0.0.10: WebSphere Application Server V8.0 Fix Pack 10 [http://www-01.ibm.com/support/docview.wss?uid=swg24039242]
8.0.0.11: WebSphere Application Server V8.0 Fix Pack 11 [http://www-01.ibm.com/support/docview.wss?uid=swg24040425]
8.0.0.12: WebSphere Application Server V8.0 Fix Pack 12 [http://www-01.ibm.com/support/docview.wss?uid=swg24041590]
8.0.0.13: WebSphere Application Server V8.0 Fix Pack 13 [http://www-01.ibm.com/support/docview.wss?uid=swg24042746]
8.0.0.14: WebSphere Application Server V8.0 Fix Pack 14 [http://www-01.ibm.com/support/docview.wss?uid=swg24044096]
8.0.0.15: WebSphere Application Server V8.0 Fix Pack 15 [http://www-01.ibm.com/support/docview.wss?uid=swg24044734]


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  Substitutable OSGi CBA's do not work correctly and a
   ClassNotFoundException is thrown.
   
   
    
   
   

LOCAL FIX

PROBLEM SUMMARY
 *  ****************************************************************
   * USERS AFFECTED:  All users of OSGi Applications including    *
   *                  composite bundles with substitutable        *
   *                  packages.                                   *
   ****************************************************************
   * PROBLEM DESCRIPTION: CBAs with                               *
   *                      substitutable packages - those that are *
   *                      both imported and exported - do not     *
   *                      start                                   *
   *                      correctly at runtime.                   *
   ****************************************************************
   * RECOMMENDATION:                                              *
   ****************************************************************
   Composite Bundles (CBAs) with substitutable packages - those
   that
   are both imported and exported - do not start correctly at
   runtime. Starting the application that requires such a CBA would
   fail with a ClassNotFoundException caused by:
   java.lang.NoClassDefFoundError: similar to,
   com.ibm.ws.eba.example.blog.persistence.api.BlogPersistenceServi
   ce
   at java.lang.ClassLoader.defineClassImpl(Native Method)
   at
   java.lang.ClassLoader.defineClass(ClassLoader.java:260)
   at
   org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.defineC
   lass(DefaultClassLoader.java:188)
   at
   org.eclipse.osgi.baseadaptor.loader.ClasspathManager.defineClass
   (ClasspathManager.java:580)
   at
   org.eclipse.osgi.baseadaptor.loader.ClasspathManager.findClassIm
   pl(ClasspathManager.java:550)
   at
   org.eclipse.osgi.baseadaptor.loader.ClasspathManager.findLocalCl
   assImpl(ClasspathManager.java:481)
   at
   org.eclipse.osgi.baseadaptor.loader.ClasspathManager.findLocalCl
   ass_LockClassName(ClasspathManager.java:460)
   at
   org.eclipse.osgi.baseadaptor.loader.ClasspathManager.findLocalCl
   ass(ClasspathManager.java:447)
   at
   org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.findLoc
   alClass(DefaultClassLoader.java:216)
   at
   org.eclipse.osgi.internal.loader.BundleLoader.findLocalClass(Bun
   dleLoader.java:393)
   at
   org.eclipse.osgi.internal.loader.BundleLoader.findClassInternal(
   BundleLoader.java:469)
   at
   org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLo
   ader.java:422)
   at
   org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLo
   ader.java:410)
   at
   org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.loadCla
   ss(DefaultClassLoader.java:107)
   at java.lang.ClassLoader.loadClass(ClassLoader.java:612)
   at
   org.eclipse.osgi.internal.loader.BundleLoader.loadClass(BundleLo
   ader.java:338)
   at
   org.eclipse.osgi.framework.internal.core.BundleHost.loadClass(Bu
   ndleHost.java:232)
   at
   org.eclipse.osgi.framework.internal.core.AbstractBundle.loadClas
   s(AbstractBundle.java:1197)
   at
   org.apache.aries.blueprint.container.BlueprintContainerImpl.load
   Class(BlueprintContainerImpl.java:385)
   at
   org.apache.aries.blueprint.container.BlueprintRepository.loadCla
   ss(BlueprintRepository.java:381)
   at
   org.apache.aries.blueprint.container.GenericType.parse(GenericTy
   pe.java:113)
   at
   org.apache.aries.blueprint.di.AbstractRecipe.loadType(AbstractRe
   cipe.java:110)
   at
   org.apache.aries.blueprint.container.BeanRecipe.loadClass(BeanRe
   cipe.java:187)
   at
   org.apache.aries.blueprint.container.BeanRecipe.getType(BeanReci
   pe.java:761)
   at
   org.apache.aries.blueprint.container.BeanRecipe.getInstance(Bean
   Recipe.java:259)
   at
   org.apache.aries.blueprint.container.BeanRecipe.internalCreate(B
   eanRecipe.java:706)
   at
   org.apache.aries.blueprint.di.AbstractRecipe.create(AbstractReci
   pe.java:64)
   at
   org.apache.aries.blueprint.container.BlueprintRepository.createI
   nstances(BlueprintRepository.java:219)
   at
   org.apache.aries.blueprint.container.BlueprintRepository.createA
   ll(BlueprintRepository.java:147)
   at
   org.apache.aries.blueprint.container.BlueprintContainerImpl.inst
   antiateEagerComponents(BlueprintContainerImpl.java:641)
   
   
    
   
   

PROBLEM CONCLUSION
 *  The fix for this APAR is currently targeted for inclusion in
   fix pack 8.0.0.2.  Please refer to the Recommended Updates
   page for delivery information:
   http://www.ibm.com/support/docview.wss?rs=180&uid=swg27004980 [http://www.ibm.com/support/docview.wss?rs=180&uid=swg27004980]
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   PM45487
   
   
 * REPORTED COMPONENT NAME
   WEBS APP SERV N
   
   
 * REPORTED COMPONENT ID
   5724H8800
   
   
 * REPORTED RELEASE
   800
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2011-08-11
   
   
 * CLOSED DATE
   2011-10-27
   
   
 * LAST MODIFIED DATE
   2011-10-27
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   WEBS APP SERV N
   
   
 * FIXED COMPONENT ID
   5724H8800
   
   

APPLICABLE COMPONENT LEVELS
 * R800 PSY
   UP