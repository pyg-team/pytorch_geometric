Title: IBM Users unable to login to Information Server after system upgrade to RedHat Entreprise Linux 6.7 - United States

Text:
Security SSL TLS protocol TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 After a system upgrade to RedHat Entreprise Linux 6.7 all Information Server users get authentication errors "SECJ0129E: Authorization failed for user..."
This renders the product unusable. 

SYMPTOM
Errors logged in file :
----
<WebSphere>/AppServer/profiles/InfoSphere/logs/server1
----
where <WebSphere> is the Information Server "Services Tier" installation directory
are of the form :
----
[3/4/16 13:29:59:056 GMT+01:00] 000000a8 WebCollaborat A SECJ0129E: 
Authorization failed for user dsadm:IS_SERVICES_TIER_HOSTNAME while invoking 
GET on default_host:/ibm/iis/console/common/main.jsp, Authorization 
failed, Not granted any of the required roles: IISAuthRole
----
where "IS_SERVICES_TIER_HOSTNAME" is the Information Server "domain" hostname.


CAUSE
In RedHat 6.7, due to security advisory CVE-2014-3566, security protocol TLS 1.0 or newer is enabled by default. SSLv3 and older protocol versions are disabled by default. 

But WebSphere working with Information Server do not have TLS security protocol enabled.


ENVIRONMENT
Linux RedHat 6.7 and any version of Information Server where WebSphere working with Information Server does not have TLS security protocol enabled.



DIAGNOSING THE PROBLEM
WebSphere working with Information Server does not have TLS security protocol enabled.



RESOLVING THE PROBLEM
An alternate temporary (but not recommended) resolution is to boot Linux on its previous kernel, despite this kernel is used after the system upgraded.
Anyway, this step is necessary to proceed to the recommended steps : 

 

Enabling TLS security protocol configuration :

1) WebSphere Application Server :

Please review this IBM YouTube video, which will explain the procedure in detail :

How do I change my WebSphere SSL configuration to use protocol TLsv1.2 for WAS (*) ?
----
https://www.youtube.com/watch?v=SdsB71u7Ckw [https://www.youtube.com/watch?v=SdsB71u7Ckw]
----
(*) The video above mentioned does not apply to configurations using WebSphere with the "Liberty profile" mode. Please refer to below link for this environment.

The same is documented in the following DeveloperWorks article:

"How do I configure websphere application server SSL protocol to TLSv1.2 ?"
----
https://developer.ibm.com/answers/questions/206952/how-do-i-configure-websphere-application-server-ss.html [https://developer.ibm.com/answers/questions/206952/how-do-i-configure-websphere-application-server-ss.html]
==== 

 

2) IBM HTTP Server : 

IMPORTANT : Note that IBM HTTP Server is not used in Information Server default configurations. But it is very often used in clustered Information Server configurations, or if specifically setup for security reasons (Queries made to WAS must go through the HTTP server, which provides an additional security layer) :

The IHS version 8.5 supports TLSv1.2 protocol by default. However you can use the SSL directives to further configure it, by restricting TLSv1.0, TLSv1.1, depending on your needs.
Secure Sockets Layer (SSL) directives are the configuration parameters that control SSL features in IBMÂ® HTTP Server.
Most SSL directives in IBM HTTP Server have the same behavior.
A directive specified for a given virtual host configuration overrides a directive specified in the base server configuration.
Also, a directive specified for a child directory overrides a directive specified for its parent directory.
However, there are exceptions. For example, when no directive is specified for a virtual host, the directive specified in the base server configuration might be copied to the virtual host configuration. In this case, the directive in the base
server configuration overrides the virtual host configuration.
Attention: The SSLEnable directive should not be specified in the base server configuration if you do not want the directive automatically copied to a given virtual host configuration.
Also, a directive specified for a child directory might be appended to the directive specified for its parent directory.
In this case, the directive for the parent directory does not override the directive for the child directory, but instead is appended to it and both directives are applied to the child directory.

Please review the related InfoCenter article :
----
http://www-01.ibm.com/support/knowledgecenter/SSAW57_8.0.0/com.ibm.websphere.ihs.doc/info/ihs/ihs/rihs_ssldirs.html [http://www-01.ibm.com/support/knowledgecenter/SSAW57_8.0.0/com.ibm.websphere.ihs.doc/info/ihs/ihs/rihs_ssldirs.html]
----

SSLProtocolDisable directive
The SSLProtocolDisable directive enables you to specify one or more SSL protocols which cannot be used by the client for a specific virtual host.

SSLProtocolEnable directive
The SSLProtocolEnable directive can be used to enable individual SSL protocols.

You can further restrict chipers by the SSLCipherSpec directive
The SSLCipherSpec directive enables you to customize the SSL ciphers supported during the handshake.
You can customize the set of SSL ciphers and the order of preference of the SSL ciphers.