Title: IBM FileNet Image Services cannot process HPII batches receive error 156,0,24 - United States

Text:
HPII ; batches; 156; 0; 24 ; LogonAttribute TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 FileNet Image Services cannot process HPII batches receive error 156,0,24 

SYMPTOM
No confirm file get gets generated. 

Error 156,0,24 is shown in the logs.

2007/01/10 07:49:26 <FNSW> (005300) 
Starting 'val' Journal Log .\journals\val20070110
--- 2007/01/10 07:49:29 <FNSW> (005300) Err <156,0,24>
- Configuration error in LogonAttribute
- Can't communicate with IS
- Err <156,0,24> getting msg text.
- Err <156,0,24>, Errno =0, File=, Ln=0

2007/01/10 09:15:54 <FNSW> (000864) 
Starting 'val' Journal Log .\journals\val20070110
--- 2007/01/10 09:15:58 <FNSW> (000864) Err <156,0,24>
- Configuration error in LogonAttribute
- Can't communicate with IS


2007/01/10 09:16:10.843 156,0,24 <FNSW> D:\FNSW_LOC\bin\HPII_import -h D:\FNSW_LOC\bin (856.860.1 0x358.35c) ...
NCH_RetrieveTimedItem: Error <15,16,17>, server [10.16.2.67,32769]

2007/01/10 09:16:11.826 15,16,17 <FNSW> D:\FNSW_LOC\bin\HPII_import -h D:\FNSW_LOC\bin (856.860.1 0x358.35c) ...
COR_Open: connect to 10.16.2.67 [32769] failed with WSAGetLastError 10061


CAUSE
The cause is trying to process to many batches is bringing the network down to its knees.
Also to many journal logs are in the HPII journals logs. Archive them and move them to another directory. Leave about 20 or so days worth


ENVIRONMENT
Windows 2003 SP2 / HPII 3.3.5 / IMS 4.0 SP5



DIAGNOSING THE PROBLEM
Run HPII in debug mode "HPII_start -D -S -M" ro Reproduce the problem



RESOLVING THE PROBLEM
Recommendations
==================
1. Make your batches are smaller and cut back on the number of batches processed at one time because thousands of batches will cause this condition. 


2. Make sure you have archived, if needed, and removed the old HPII journal logs.

3. When a system has little or runs out of space you will exhibit a behavior where the .confirm file will not get created. Please make sure you have enough diskspace, if not make more space by deleting old journal logs.

Additional recommendations
====================
4. Set the ephemeral ports per the HPII/MRII installation and configuration manual look under your OS environment ( Windows, AIX, Sun , or HP_UX).

5. There is an optional configuration file (cor_backoff_config.txt) that can be created that will change the timeout for the OCOR_Listen processes. 

This configuration change reduces the amount of time the OCOR_Listen process stays alive when not in use. This file permits user to modify connect failure/retry behavior for COR. This file is optional and does not exist unless created by the user. If the file does exist, then its values override the default built-in COR configuration parameters. This configuration file can be created for both Image Services and ISTK (WAL). This may have already been created at the site, but if it hasn't been implemented, I would have them apply it. 


When should I use the “cor_backoff_config” file?
- If the site has a slow network
- If the courier default values are not long enough for your network (½ second retry
and 5 seconds of retries for IS and 0 seconds of retries for WAL)
- If the TCP/IP parameters are correct according to the IS Installation documents in
the TCP/IP parameter section and they are encountering <15,16,17> errors in the
elog
Here is an example from a Windows server:
2006/03/10 03:53:34.288 15,16,17 <fn.service> PRI_check
(3960.4368.45 0xf78.1110) …COR_Open: connect to 10.50.105.15 [32769] failed with
WSAGetLastError 10060


Image Services: For Windows 

1. cd :\fnsw_loc\sd 

2. create a file called "cor_backoff_config.txt", with the following contents: 

max_single_sleep 500; #milliseconds (note: no more than ½ second in a single retry) 

max_total_sleep 5000; #milliseconds (note: no more than 5 seconds, all retries) 

3. restart IS software 


IS Toolkit (WAL): 

1. cd :\fnsw\client 

2. create a file called "cor_backoff_config.txt", with the following contents: 

max_single_sleep 0; #milliseconds (note: no COR_Open retries) 

max_total_sleep 0; #milliseconds 

3. restart IS software.

For UNIX OS, 
just replace the \fnsw_loc\sd with /fnsw/local/sd
And replace \fnsw\client with /fnsw/client