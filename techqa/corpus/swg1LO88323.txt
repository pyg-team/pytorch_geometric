Title: IBM LO88323: FILES APPLICATION SERVER IS REPORTING HUNG THREADS IN THE SYSTEMOUT.LOG - United States

Text:
 SUBSCRIBE TO THIS APAR
By subscribing, you receive periodic emails alerting you to the status of the APAR, along with a link to the fix after it becomes available. You can track this item individually or track all items by product.

Notify me when this APAR changes.

Notify me when an APAR for this component changes.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  Trace log reports hung thread, which in this case is 0000057b.
   From the log it appears that the hung thread attempts to get
   the updated media information for the seedlist via the noted
   sql query and about 12 minutes after the query is executed the
   hung threads start reporting in the logs. It appears that this
   query is repeatedly queuing up and trying to run on the
   database server. When the seedlist requests timeout in search,
   search keeps on retrying the Files seedlist requests. But these
   Files seedlist requests are taking longer to run on ORACLE DB
   and are not finishing quickly. This causes all the threads
   running seedlist requests report as hung threads by WAS.
   
   [3/8/16 7:26:29:340 PST] 0000057b I18NFilter    3
   com.ibm.lconn.core.web.util.lang.I18NFilter doFilter URL:
   https://connections.com/files/seedlist/myserver [https://connections.com/files/seedlist/myserver]
   
   ......
   
   [3/8/16 7:26:29:342 PST] 0000057b LCRestSecurit 1
   com.ibm.lconn.core.web.auth.LCRestSecurityFilter doFilter User
   in role: search-admin true
   
   [3/8/16 7:26:29:343 PST] 0000057b DocumentSeedl >
   com.ibm.lconn.files.services.search.servlet.DocumentSeedlistServ
   let handleRequest ENTRY
   
   [3/8/16 7:26:29:344 PST] 0000057b DocumentRetri >
   com.ibm.lconn.share.platform.search.impl.DocumentRetrieverImpl
   getMediaUpdates(Timestamp updatedSince, int beginIndex,int
   numItems,
   
   CrawlerState state, String seedlistId) ENTRY 3/7/16 10:16 AM
   483 500 null
   [3/8/16 7:26:29:344 PST] 0000057b DocumentRetri I   SELECT /*+
   FIRST_ROWS(500) */ TMP#.*, ROWNUM ROW# FROM (SELECT
   m."SYS_CREATE_DATE" m#1, m."ID" m#2, m."OWNER_USER_ID" m#3,
   
   m."LIBRARY_ID" m#4, m."CREATE_DATE" m#5, m."LAST_UPDATE" m#6,
   m."TITLE" m#7, m."SUMMARY" m#8, m."LANGUAGE" m#9, m."MIME_TYPE"
   m#10, m."COMMENT_CNT" m#11, m."DOWNLOAD_CNT" m#12,
   
   m."RECOMMEND_CNT" m#13, m."VISIBILITY" m#14,
   m."VISIBILITY_COMPUTED" m#15, m."TYPE" m#16,
   m."SYS_LAST_UPDATE" m#17, m."LABEL" m#18, m."FILE_SIZE" m#19,
   m."LIBRARY_TYPE" m#20,
   
   m."FILE_EXTENSION" m#21, m."SHARE_COLLECTION_CNT" m#22,
   m."OBJECT_TYPE_ID" m#23, m."FILE_ID" m#24, m."ENCRYPTED" m#25,
   m."ORG_ID" m#26 , l."VISIBILITY_COMPUTED"  l#visbCmpt ,
   
   l."EXTERNAL_CONTAINER_ID"  l#extCtnId ,
   l."EXTERNAL_INSTANCE_ID"  l#extInsId  FROM  "FILES"."MEDIA" m,
   "FILES"."LIBRARY" l  WHERE  m."LIBRARY_ID" = l."ID"  AND
   m."SYS_CREATE_DATE" >=
   
   ? AND ( m."SYS_CREATE_DATE" > ? OR ( m."SYS_CREATE_DATE" = ?
   AND  m."ID"  > ?)) AND (( m."SEARCH_LAST_UPDATE"  >= ? A...
   
   
   [3/8/16 7:38:29:940 PST] 00000094 ThreadMonitor W   WSVR0605W:
   Thread "WebContainer : 44" (0000057b) has been active for
   720606 milliseconds and may be hung.  There is/are 28 thread(s)
   
   in total in the server that may be hung.
   
    at java.net.SocketInputStream.socketRead0(Native Method)
   
    at
   java.net.SocketInputStream.read(SocketInputStream.java:140)
   
    at oracle.net.ns.Packet.receive(Packet.java:300)
   
    at oracle.net.ns.DataPacket.receive(DataPacket.java:106)
   
    at
   oracle.net.ns.NetInputStream.getNextPacket(NetInputStream.java:3
   15)
   
    at
   oracle.net.ns.NetInputStream.read(NetInputStream.java:260)
    at
   oracle.net.ns.NetInputStream.read(NetInputStream.java:185)
    at
   oracle.net.ns.NetInputStream.read(NetInputStream.java:102)
    at
   oracle.jdbc.driver.T4CSocketInputStreamWrapper.readNextPacket(T4
   CSocketInputStreamWrapper.java:124)
    at
   oracle.jdbc.driver.T4CSocketInputStreamWrapper.read(T4CSocketInp
   utStreamWrapper.java:80)
    at
   oracle.jdbc.driver.T4CMAREngine.unmarshalUB1(T4CMAREngine.java:1
   137)
    at oracle.jdbc.driver.T4CTTIfun.receive(T4CTTIfun.java:290)
    at oracle.jdbc.driver.T4CTTIfun.doRPC(T4CTTIfun.java:192)
    at oracle.jdbc.driver.T4C8Oall.doOALL(T4C8Oall.java:531)
    at
   oracle.jdbc.driver.T4CPreparedStatement.doOall8(T4CPreparedState
   ment.java:207)
    at
   oracle.jdbc.driver.T4CPreparedStatement.executeForDescribe(T4CPr
   eparedStatement.java:884)
    at
   oracle.jdbc.driver.OracleStatement.executeMaybeDescribe(OracleSt
   atement.java:1167)
    at
   oracle.jdbc.driver.OracleStatement.doExecuteWithTimeout(OracleSt
   atement.java:1289)
    at
   oracle.jdbc.driver.OraclePreparedStatement.executeInternal(Oracl
   ePreparedStatement.java:3584)
    at
   oracle.jdbc.driver.OraclePreparedStatement.executeQuery(OraclePr
   eparedStatement.java:3628)
    at
   oracle.jdbc.driver.OraclePreparedStatementWrapper.executeQuery(O
   raclePreparedStatementWrapper.java:1493)
    at
   com.ibm.ws.rsadapter.jdbc.WSJdbcPreparedStatement.pmiExecuteQuer
   y(WSJdbcPreparedStatement.java:1112)
   ............
   
   
    
   
   

LOCAL FIX

PROBLEM SUMMARY
 *  APAR has been fixed in IC 5.0 CR4
   
   
    
   
   

PROBLEM CONCLUSION
 *  APAR has been fixed in IC 5.0 CR4
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   LO88323
   
   
 * REPORTED COMPONENT NAME
   CONNECTN ACTIVI
   
   
 * REPORTED COMPONENT ID
   5724S6800
   
   
 * REPORTED RELEASE
   500
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt / Xsystem
   
   
 * SUBMITTED DATE
   2016-03-14
   
   
 * CLOSED DATE
   2016-04-27
   
   
 * LAST MODIFIED DATE
   2016-04-27
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   CONNECTN ACTIVI
   
   
 * FIXED COMPONENT ID
   5724S6800
   
   

APPLICABLE COMPONENT LEVELS
 * R500 PSY
   UP