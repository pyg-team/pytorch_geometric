Title: IBM WMB Broker or Execution Group and IIB Integration Server Startup Trace - United States

Text:
MQIINFO MustGather MGSS MGBK MGEG; MustGatherDocument TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 Use the procedures below to take a startup trace of a broker or execution group in WebSphere Message Broker (WMB). 

IBM Integration Bus (IIB) V9 replaces Execution Group with Integration Server. Similar instructions are provided below for collecting Integration Server startup trace. 

Gathering this information before calling IBM Support will help familiarize you with the troubleshooting process and save you time. 

RESOLVING THE PROBLEM


TRACE INSTRUCTIONS
 New trace features have been made available from WMB V7.0.0.3 and WMB V8.0.0.0 onwards and IIB V9.

- The new trace procedure uses mqsichangetrace. The new procedure is the preferred method of tracing if you are at or beyond these maintenance levels, UNLESS the problem is with WMB's configstore tables.

- The old trace procedure uses mqsiservice. You should use the old trace procedures if your system is prior to WMB V7.0.0.3 or if your problem is with WMB's configstore tables.




TRACE PROCEDURE FOR IBM INTEGRATION BUS V9 

1. Stop the Integration node/broker. 
mqsistop <inName> 

Where <inName> is the name of your Integration node/broker. 

2. Enable Integration node/broker agent trace. 
mqsichangetrace <inName> -t -b -l debug -c <file size in KB> 

3. Enable the Integration Server/broker startup trace. 
mqsichangetrace <inName> -t -e <isName> -l debug -c <file size in KB> 

Where <inName> is the name of your Integration node/broker. 
This command can be run even when broker / integration server are in stopped state. 

4. Start the Integration node/broker to recreate the problem. 

5. Turn off trace 

mqsichangetrace < inName> -t -b -l none 
mqsichangetrace <inName> -t -e <isName> -l none 

6. Retrieve the trace log for specified component. 

mqsireadlog <inName> -t -b agent -f -o agent.xml 
mqsireadlog <inName> -t -e <isName> -f -o <isName>.xml 

7. Format the XML log file 

mqsiformatlog -i agent.xml -o agent.txt 
mqsiformatlog -i <isName>.xml -o <isName>.txt 

8. After a PMR is open, submit the files agent.txt and <isName>.txt to IBM Support. 


NEW TRACE PROCEDURE FOR WMB V7.0.0.3 AND WMB V8.0.0.0 AND LATER
1. Stop the broker.
mqsistop <BrokerName>

Where <BrokerName> is the name of your broker.

2. Enable broker agent trace.
mqsichangetrace <BrokerName> -t -b -l debug -c <file size in KB>

3. Enable the Execution Group startup trace.
mqsichangetrace <BrokerName> -t -e <EGName> -l debug -c <file size in KB>

Where <BrokerName> is the name of your broker.
This command can be run even when broker / EG are in stopped state.

4. Start the broker to recreate the problem.

5. Turn off trace

mqsichangetrace <BrokerName> -t -b -l none
mqsichangetrace <BrokerName> -t -e <EGName> -l none

6. Retrieve the trace log for specified component.

mqsireadlog <BrokerName> -t -b agent -f -o agent.xml
mqsireadlog <BrokerName> -t -e <EGName> -f -o <EGname>.xml

7. Format the XML log file

mqsiformatlog -i agent.xml -o agent.txt
mqsiformatlog -i <EGName>.xml -o <EGName>.txt

8. After a PMR is open, submit the files agent.txt and <EGName>.txt to IBM Support.




OLD TRACE PROCEDURE FOR WMB PRIOR TO V7.0.0.3 OR FOR CONFIGSTORE TABLE PROBLEMS (NOTE THAT THIS PROCEDURE APPLIES TO OLDER AS WELL AS NEW LEVELS OF WMB/IIB) 
 

1. Stop the broker.

mqsistop <BrokerName>

Where <BrokerName> is the name of your broker.

2. Enable broker agent trace.

mqsiservice <BrokerName> -r Trace=debug
mqsiservice <BrokerName> -r TraceSize=6291453

3. Enable execution group trace.

mqsiservice <BrokerName> -r executionGroupTraceOverrideLevel=debug

Note: This command should be input on a single line.

mqsiservice <BrokerName> -r executionGroupTraceOverrideSize=100000000

Note: This command should be input on a single line.

4. Start the broker.

mqsistart <BrokerName>

5. Recreate the problem (check for errors in the syslog or event viewer log).

6. Stop the broker. Make sure the broker is stopped.

mqsistop <BrokerName>

7. Retrieve the trace log for specified component.

mqsireadlog <BrokerName> -t -b agent -f -o agent.xml
mqsireadlog <BrokerName> -t -e <EGName> -f -o <EGName>.xml
Where <EGName> is the name of your execution group.

8. Format the XML log file.

mqsiformatlog -i agent.xml -o agent.txt
mqsiformatlog -i <EGName>.xml -o <EGName>.txt

9. Turn off trace.

mqsiservice <BrokerName> -r Trace=""
mqsiservice <BrokerName> -r TraceSize=""
mqsiservice <BrokerName> -r executionGroupTraceOverrideLevel=""
mqsiservice <BrokerName> -r executionGroupTraceOverrideSize=""

10. After a PMR is open, submit the files agent.txt and <EGName>.txt to IBM Support.







Cross reference information Segment Product Component Platform Version Edition Business Integration IBM Integration Bus Integration Server AIX, HP-UX, Linux, Solaris, Windows 10.0, 9.0 All Editions 
PRODUCT ALIAS/SYNONYM
 WMB MB WebSphere Message Broker IBM Integration Bus IIB IBMIB MQ Integrator WBIMB WBI-MB MQSI WMQI