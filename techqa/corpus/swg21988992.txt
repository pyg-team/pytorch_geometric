Title: IBM How to turn ON and control or determine tracing output in ISF version 11.3 and later - United States

Text:
 TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 The Information Server Framework code, or ISF, in IBM InfoSphere Information Server provides a common framework of services for the product specific code like DataStage, QualityStage, and IBM Governance Catalog. ISF services include

• Authentication and authorization
• Task scheduling
• Reporting
• Communication between the services tier and the engine
• Deployment of services to the application server
• Registration of the engine applications with the services tier

If you are experiencing issues, it may be useful to turn on ISF tracing to help isolate where the failure is occurring. Most of the tracing requires understanding of the underlying code, but providing this information to IBM customer support may help accelerate the resolution process. 

Tracing can impact system performance. Unless directed by IBM support, tracing should only be used for the recreation of specific issues and then returned to the default setting as soon as possible. 

RESOLVING THE PROBLEM
ISF Tracing on services tier 
WebSphere ND:

To turn on the WebSphere tracing, go to the WebSphere administration console Troubleshooting twisty:


 * Logging and tracing > (running app servers) > Change log detail levels, select Runtime tab
   
   The default tracing is:*=info: com.ibm.iis.xmeta.*=warning: com.ibm.xmeta.*=warning
   
 * Change the tracing to the recommended setting under “Trace settings on services” below.
   
 * Select Apply.


You do not have to restart WebSphere. Note this setting only applies to the current application server, so if you are using multiple nodes, you have to repeat for each. 

By default, the log will be trace.log in the same directory as the SystemOut.log. 

You can change the number of retained files and where they are put on the page: 
Logging and tracing > (application server) > Diagnostic trace service 

If you have a large LDAP registry and are doing authentication tracing, you may want to set the number of historical files to 20. 

WebSphere Liberty Profile: 

To enable tracing: 

• Backup <InfoSphere>/wlp/usr/servers/iis/server.xml 
• Edit <InfoSphere>/wlp/usr/servers/iis/server.xml:  * 
 * 
 * 
 * 
 * 
 * 
 * <!--
 * 
 * -->
   
 * 
 * 
 * 
 * <!--
 * 
 * -->
 * 
 * 
 * 
 * 
 * maxFileSize="20"
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 

• Save the file. You do not have to restart Liberty. It should detect the change and start generating the trace. When you are finished recreating the issue, copy the backup copy over the server.xml file. 

Trace settings on services: 

Add log detail levels as below: 

LDAP or Authorization Issues: 
com.ibm.websphere.wim.*=all: com.ibm.ws.wim.*=all: com.ibm.wsspi.wim.*=all: com.ibm.iis.isf.j2ee.*=all: com.ibm.iis.isf.security.*=FINER 

For more detail from WebSphere you can use the following. However, note that this will generate large quantities of trace and can impact system performance: 

com.ibm.websphere.wim.*=all: com.ibm.ws.wim.*=all: com.ibm.wsspi.wim.*=all: com.ibm.iis.isf.j2ee.*=all: com.ibm.iis.isf.security.*=FINER: com.ibm.ws.security.*=all:com.ibm.websphere.security.*=all: org.eclipse.emf.ecore.impl.*=all 


Session issues: 

com.ibm.ws.session.*=all:com.ibm.ws.webcontainer.srt.*=all:com.ibm.websphere.wim.*=all:com.ibm.ws.wim.*=all:com.ibm.wsspi.wim.*=all:com.ibm.is.isf.j2ee.security=all:com.ascential.acs.security.*=all:com.ibm.iis.isf.security.*=FINER: 

In some cases it is useful to set com.ibm.iis.isf.security.*=all. This setting will cause exceptions to be added to the logs that look something like: 

[7/6/15 10:38:26:442 EDT] 00000076 SessionManage 3 com.ibm.iis.isf.security.SessionManager getCurrentSession 341833b6-ee51-42b4-9571-156ae8aef4ec 
java.lang.Exception 
at com.ibm.iis.isf.security.SessionManager.getCurrentSession(SessionManager.java:79) 
.... 

This is NOT an error. It is a way to trace where the call is coming from. Reducing the trace level to FINER or higher will prevent these exceptions. 

Scheduling issues: 
com.ibm.iis.isf.scheduling.*=all 

Reporting issues: 
com.ibm.iis.isf.reporting.*=all 

Issues with client communication to the services tier: com.ibm.iis.isf.binding.rest2.*=all 

Agent Configuration Issues (Reflection exception): 
com.ibm.is.isf.j2ee.security=all:com.ascential.acs.security.*=all:com.ibm.iis.isf.security.*=FINER:com.ibm.iis.isf.agent.*=all: 

Common connector issues, including problems with View Data and Import/Export: 
com.ibm.is.isf.j2ee.security=all:com.ascential.acs.security.*=all:com.ibm.iis.isf.security.*=FINER:com.ibm.iis.isf.agent.*=all:com.ibm.iis.cas=all: 



ISF Agent Tracing 

On the agent system: 
• Stop the agent 
• Create a backup copy of <InfoSphere>/ASBNode/conf/asbagent-logging.properties 
• Change asbagent-logging.properties by adding the following two lines: 

com.ibm.iis.isf.agent.log.level=ALL 
com.ibm.iis.cas.level=ALL 

and if there is a line such as 

.level=FINE 

or 

.level=INFO 

comment it out by prepending a #, such as: 

#.level=FINE 

The resulting file should look something like: 

#handlers=java.util.logging.ConsoleHandler, java.util.logging.FileHandler 
handlers=java.util.logging.FileHandler 
com.ibm.iis.isf.agent.log.level=ALL 
com.ibm.iis.cas.level=ALL 
#.level=FINE 
java.util.logging.FileHandler.level=ALL 
java.util.logging.FileHandler.limit=500000 
java.util.logging.FileHandler.count=10 
java.util.logging.FileHandler.formatter=com.ibm.iis.isf.util.logging.CustomLoggingFormatter 
java.util.logging.FileHandler.append=true 
java.util.logging.FileHandler.pattern=C:/IBM/InformationServer/ASBNode/logs/asb-agent-%g.out 
#java.util.logging.ConsoleHandler.level=INFO 
#java.util.logging.ConsoleHandler.formatter=com.ibm.iis.isf.util.logging.CustomLoggingFormatter 

Save the changes and then start the agent. 

Retry the operation, noting the time, and zip up the following directories: 
/opt/IBM/InformationServer/ASBNode/logs 

The ISF information will <InfoSphere>/ASBNode/logs/Agent.out and <InfoSphere>/ASBNode/logs/asb-agent-#.out 

Restore your backed up copy of asbagent-logging.properties and restart the NodeAgents.