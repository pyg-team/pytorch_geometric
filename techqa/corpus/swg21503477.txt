Title: IBM The turbo mode feature of the Datacollector - United States

Text:
turbomode; datacollector; native memory; lower limit; upper limit; CAMADALL CAMADWASDC TECHNOTE (FAQ)

QUESTION
 How to use and configure the turbo mode feature of the ITCAM for Websphere datacollectors? 

ANSWER
This feature was introduced since version 6.1 of the ITCAM datacollectors and is intended to improve the data gathering performance under higher loads of user transactions. 

Turbo mode tries to clear out the monitoring events as quickly as possible when the DC native memory consumed by ITCAM reaches a certain limit (customizable). When this happens, the current application threads whose user transaction is still ongoing before the turbo mode was entered will be locked. New user transactions processed by other threads will be dropped. The goal here is to at least capture all the existing user transactions to its completion while dropping new ones. 

In other words, when turbo mode is kicking in due to high consumption of DC native memory, the new requests/transactions in the application server are not tracked and the monitoring events are not sent to the Managing Server. Hence, there are not new requests seen in the Managing server graphs. 

The turbo mode feature is enabled by default in any ITCAM datacollector and, for normal application loads, no configuration changes are necessary. In order to control the turbo mode behaviour, you can edit the file: 

<DC_HOME>/runtime/<server>/<server>.datacollector.properties (for DC 6.1.x)
<DC_HOME>/runtime/<server>/datacollector.properties (for DC 7.1.x) 

set the following property to "true" or "false" (default is "true"): 

dc.turbomode.enabled=true 

and tune the following parameters: (default values) 

internal.memory.limit=100
turbo.mem.llimit=0.6
turbo.mem.ulimit=0.75 

DC will switches to NORMAL MODE upon reaching the limit specified by LOWER LIMIT as follows: (turbo.mem.llimit * internal.memory.limit)
Using the default values above, it means (0.6 * 100) = 60 MBytes. 

Conversely, DC will switches to TURBO MODE upon reaching the limit specified by UPPER LIMIT as follows: (turbo.mem.ulimit * internal.memory.limit)
Using the default values above, it means (0.75 * 100) = 75 MBytes. 

Expected behaviour with Turbo mode off 

When the turbo mode is "off", all monitoring events will be dropped when the native memory size reaches the limit set by "internal.memory.limit" parameter (heavy loads). This includes any ongoing transactions also. When this happens, the ITCAM's msg-dc-native.log will show the following message: 

"Memory Limit reached, datacollector stopped accepting data" 

and when the limit becomes acceptable (due to clearing the data to Managing server), the DC will again start accepting monitoring data with the following message in the same msg-dc-native.log: 

"Memory Utilization below Limit, datacollector is accepting data" 

If the above happens, the MS will not show any requests (in the response time and throughput graphs). Also, the Publish server logs may show corrupted records as the "end" monitoring events may not have been generated by the Data Collector. The only way to solve this is to increase the "internal.memory.limit" value. This is a trade off for not affecting the application performance.

 


Cross reference information Segment Product Component Platform Version Edition Systems and Asset Management Tivoli Composite Application Manager for WebSphere ITCAM for WebSphere (Dist) AIX, z/OS, HP-UX, Linux, Solaris, Windows