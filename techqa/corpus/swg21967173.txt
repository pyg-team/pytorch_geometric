Title: IBM Error in Stocked Tools application - United States

Text:
TPAESTOCKEDTOOL; TPAETOOL; stocked tool; BMXAA6712E; The database connection failed and the record was not retrieved; The column name null is not valid; Invalid column name TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 You might get errors BMXAA6713E or BMXAA6712E in the Stocked Tools application. Records cannot be retrieved from the database. 

SYMPTOM
Case 1: 

The error in the Stocked Tools application is "BMXAA6713E - The MBO fetch operation failed in the mboset".

Oracle Environment:
Click the Stocked Tool tab, get error: BMXAA6713E - The MBO fetch operation failed in the mboset with the SQL error code 17006. The record could not be retrieved from the database. See the log file for more details about the error. 

SQL Server Environment:
Click the Stocked Tool tab, get error: BMXAA6713E - The MBO fetch operation failed in the mboset with the SQL error code 0. The record could not be retrieved from the database. 

DB2 Environment:
BMXAA6713E - The MBO fetch operation failed in the mboset with the SQL error code -204. The record could not be retrieved from the database. 

Stack trace from Systemout.log file:
The record could not be retrieved from the database. See the log file for more details about the error. java.sql.SQLException: Invalid column name


Case 2:

The error in the stocked Tools application is: BMXAA6712E - The database connection failed and the record was not retrieved". 

Error in the log:
select * from toolinv where (status != 'OBSOLETE' and siteid = 'BEDFORD') 

BMXAA6712E - The database connection failed and the record was not retrieved. Try the operation again. If you experience repeated failures, check the log files in the home directory or contact your system administrator.

BMXAA6713E - The MBO fetch operation failed in the mboset with the SQL error code 0. The record could not be retrieved from the database. See the log file for more details about the error. com.microsoft.sqlserver.jdbc.SQLServerException: The column name null is not valid


RESOLVING THE PROBLEM
Case 1: 

MXAA6713E - The MBO fetch operation failed in the mboset in the front end. Invalid column name error in the log 

The error could be due to a mismatch between the TOOLINV View definition and the meta-data (Maxattribute and Maxattributecfg tables).

Run the Query below to determine the required fields in maxattribute and maxattributecfg tables:

select attributename from maxattribute where objectname='TOOLINV' and required='1' order by attributename
select attributename from maxattributecfg where objectname='TOOLINV' and required='1' order by attributename

1. Check and compare the maxattribute and maxattributecfg tables where objectname = 'TOOLINV' and see if there is any difference. Ensure that there is no pending Database Configuration.

2. If additional fields have been added to the ITEM or INVENTORY tables and the TOOLINV view is created from this table, then it will be necessary to re-create the view to include the added fields. 

Reference the maxdemo script under C:\IBM\SMP\maximo\tools\maximo\en for syntax of the view creation. Search for "Create View Toolinv" in the maxdemo script. 

NOTE:
maxdemo.db2 is for DB2 database
maxdemo.ora is for Oracle database
maxdemo.sqs is for Sql Server database



Case 2: 
Error: "BMXAA6712E - The database connection failed and the record was not retrieved." Error in the log: "BMXAA6712E - The database connection failed and the record was not retrieved. The column name null is not valid".

There is nothing wrong with the database connection and all the users can login to Maximo. "The column name null is not valid" error could happen if one of the non-persistent fields in the TOOLINV view has made persistent. Please do not change any non-persistent field to persistent. If it has been changed please revert back to non-persistent to resolve the problem.