Title: IBM JDBC hang obtaining connection - United States

Text:
isLicenseValidatedWithServerLicenseProc; checkForLicenseRestrictions; hang; jdbc; java; license; connect TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 Java application hang during license check 

SYMPTOM
Javacore file will show the function stack below: 

at sun/nio/ch/FileChannelImpl.lock0
at sun/nio/ch/FileChannelImpl.lock(FileChannelImpl.java:882)
at java/nio/channels/FileChannel.lock(FileChannel.java:871)
at com/ibm/db2/jcc/am/hp.a(hp.java:629)
at com/ibm/db2/jcc/am/gp.a(gp.java:403)
at com/ibm/db2/jcc/am/gp.a(gp.java:475)
at com/ibm/db2/jcc/am/Connection.isLicenseValidatedWithServerLicenseProc
at com/ibm/db2/jcc/am/Connection.checkForLicenseRestrictions
at com/ibm/db2/jcc/am/Connection.completeConnect
...


RESOLVING THE PROBLEM
 

Two possible causes: 

(a) Known defect with JDBC driver first fixed in db2jcc4.jar v4.16.53 (build date 2013-05-23)
$ java -cp ./db2jcc4.jar:. com.ibm.db2.jcc.DB2Jcc -version

DB2 JDBC Driver Versions and Downloads
http://www-01.ibm.com/support/docview.wss?rs=71&uid=swg21363866 [http://www-01.ibm.com/support/docview.wss?rs=71&uid=swg21363866]

If using db2jcc.jar, use a recent driver or newest one.

(b) DB2Driver class being loaded multiple times into a single JVM. This behaviour is unsupported and would also cause a hang with function stack seen in Symptom section.