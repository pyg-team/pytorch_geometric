Title: IBM DASH Connection Manager window not showing connection definitions. - United States

Text:
DASHL2; connections; manager; restcli; getProviders; deleteProvider; datasourcesUri TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 After defining a new data provider or if an existing connection fails, the "Connection Manager" window may only show the header. No previously defined connections are displayed or the icon to add new connections. You will see connection errors in the SystemOut.log 

SYMPTOM
In DASH "Console Settings" -> "Connections" will not display any of the currently defined data provider connections.


CAUSE
DASH fixpack 2 and earlier doesn't return the connection page, unless the data provider responds (thus the errors in the SystemOut.log). In DASH fixpack 3, there was a fix provided by TWL to timeout if the provider isn't working. So if the customer uses fixpack 3 or later, they would have to wait a few minutes for the table to display, at that point they can delete the connection causing the issue if they would like.

ENVIRONMENT
Defining new connections to a data provider, platform independent

DIAGNOSING THE PROBLEM
Look for exceptions/errors similar to these in the JazzSM_HOME/profile/logs/server1/SystemOut.log, which will show the data connection causing the problem:


[10/2/14 13:16:18:627 CDT] 000000f7 passthrough E 
com.ibm.tivoli.rest.passthrough.DefaultPassThrough handleRequest 
unexpected exception: 
org.apache.wink.client.ClientRuntimeException: java.lang.RuntimeException: org.apache.http.conn.HttpHostConnectException: Connection to 
hqtivmp1.corp.fin:16310 refused 
[10/2/14 13:34:45:241 CDT] 00000139 passthrough I Sending 
uri: hqtivmp1.corp.fin:16310/ibm/tivoli/rest/providers/itm.TEMS.HQ 
TIVPP2/datasources method=GET 
"WebContainer : 3" (000000a9) has been active for 637835 milliseconds 
and may be hung. There is/are 1 thread(s) in total in the server that 
may be hung. 

In this case, it's the "itm.TEMS.HQ TIVPP2" data provider connection that is causing the problem:
itm.TEMS.HQTIVPP2 is the data provider
hqtivmp1.corp.fin is the URL


RESOLVING THE PROBLEM
Release DASH Fixpack 2 and older: 

Execute this restcli.(sh || cmd) to get a list of the currently defined data providers: 

<jazzSM>/ui/bin/restcli.(sh || cmd) getProviders -username tipadmin -password 
<tippass> -all 

The restcli command above will list all the currently defined data providers, the record you need to pay attention to is referenced in the error from the SystemOut.log shown above:

"datasourcesUri": 
"\/providers\/itm.TEMS.HQTIVPP2.hqtivmp1.corp.fin\/datasources", 
"description": "IBM Tivoli Monitoring dashboard data provider", 
"externalProviderId": "itm.TEMS.HQTIVPP2", 
"id": "itm.TEMS.HQTIVPP2.hqtivmp1.corp.fin", 

Using the value in the "id" string, you can delete the connection definition in DASH: 

"id": "itm.TEMS.HQTIVPP2.hqtivmp1.corp.fin", 

JazzSM_HOME/ui/bin/restcli.(sh || cmd) deleteProvider -username tipadmin -password 
<tippassword> -provider itm.TEMS.HQTIVPP2.hqtivmp1.corp.fin 

For DASH Fixpack 3 forward: 

When you bring up the connection manager page in DASH, you will have to wait until the page is displayed, which may take a few minutes, at this point, you can remove the non-working connection using the UI, i.e. right click the connection and select delete, or you can select the connection in the UI and hit the delete button above the table.