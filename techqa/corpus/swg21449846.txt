Title: IBM WAS authentication method in Unix system - United States

Text:
CAMADALL CAMADSEC WAS authentication method Unix system local OS "Operating System" registry Linux Solaris UNIX AIX HP-UX TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 Login failed after WAS authentication (WAS local OS registry on the Linux and Solaris platforms) done. 

SYMPTOM
 

WAS authentication (reference - DCF with title "ITCAM for WAS 6.1 WebSphere Authentication/Security check") encountered the following error case.

1. Ran the server as root

2. "Local OS" field used in "Available realm definitions" field. 

3. Needed to enable Admin security, Application security, and Java 2 security for the Managing Server. Once enabled and the server, node, and dmgr were restarted, we no longer could log into the WAS admin console, even though the correct OS password was entered. 

4. Found the following error message in the WebSphere systemOut.log - 

[9/24/10 13:46:09:210 CDT] 00000024 FormLoginExte E 
SECJ0118E: 
Authentication error during authentication for user tivitcam 
[9/24/10 13:46:09:348 CDT] 00000025 servlet I 
com.ibm.ws.webcontainer.servlet.ServletWrapper init SRVE0242I: 
[isclite] 
[/ibm/console] [/logonError.jsp]: Initialization successful. 
[9/24/10 13:46:33:576 CDT] 00000025 UnixRegistryI E 
SECJ0336E: 
Authentication failed for user tivitcam because of the 
following exception 
com.ibm.ws.security.registry.unix.UnixRegistryException: 
3004-305 Local logins are not allowed for this account. 
at 
com.ibm.ws.security.registry.unix.UnixRegistryImpl.ntv_basicAuthenticate
(Native Method) 



DIAGNOSING THE PROBLEM

For the WebSphere Application Server local operating system registry to work on the Linux and Solaris platforms, a shadow password file must exist. 

The shadow password file is named shadow and is located in the "/etc" directory. 
If the shadow password file does not exist, an error occurs after enabling administrative security and 
configuring the registry as local operating system. 



RESOLVING THE PROBLEM
 

A shadow password file must exist for the WAS local OS registry to work on the UNIX system.


 *  Run the "/etc/pwconv" command (with no parameters) to create a shadow file.

This command creates an /etc/shadow file from the"/etc/passwd" file. 
After creating the shadow file, you can enable local operation system security successfully. For more details for Local operating system registries, see the following link : 

http://pic.dhe.ibm.com/infocenter/wasinfo/v7r0/index.jsp?topic=%2Fcom.ibm.websphere.nd.multiplatform.doc%2Finfo%2Fae%2Fae%2Fcsec_localos.html [http://pic.dhe.ibm.com/infocenter/wasinfo/v7r0/index.jsp?topic=%2Fcom.ibm.websphere.nd.multiplatform.doc%2Finfo%2Fae%2Fae%2Fcsec_localos.html]