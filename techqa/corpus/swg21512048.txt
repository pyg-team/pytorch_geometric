Title: IBM The db2haicu move option fails to move resources on a shared disk setup. - United States

Text:
db2haicu move; rgreq TECHNOTE (FAQ)

QUESTION
 Why does db2haicu fail with a 'Killed' error while moving resources from one server to another on a shared disk setup? 

ANSWER
On a shared disk setup, trying to move the resources from one server to another fails with a 'Killed' error.
For example: 
==

Select an administrative task by number from the list below:
1. Add or remove cluster nodes.
2. Add or remove a network interface.
3. Add or remove a highly available database.
4. Add or remove a mount point.
5. Add or remove an IP address.
6. Add or remove a non-critical path.
7. Move DB2 database partitions and HADR databases for scheduled maintenance.
8. Change failover policy for this instance.
9. Create a new quorum device for the domain.
10. Destroy the domain.
11. Exit. 
Enter your selection: 
7 

Do you want to review the status of each cluster node in the domain before you begin? [1] 1. Yes 
2. No 
2 

Enter the name of the node away from which DB2 partitions and HADR primary roles should be moved: 
test02 

Cluster node test02 hosts the following resources associated with the database manager instance 
DB2 database partition number 0 

All of these cluster resource groups will be moved away from the cluster node test02. This will cause an HADR role switch for HADR databases. Clients will experience an outage from this process. 
1. Yes 
2. No 

Submitting move request for resource group db2_test_0-rg ... 
Killed 

==

The reason that the db2haicu move option fails on a shared disk is because, this operation needs to move the instance home directory, so the session from where we run this operation will no longer be available. 

To accomplish the move, use the SA MP command ‘rgreq’. The db2haicu move option should only be used in cases where a non-shared home directory is used. 

Log on to the machine and type the following command to perform a manual failover. 

rgreq -o move -n <nodename> <DB2 instance resource group> 

Once the failover has been completed successfully, the ‘lssam’ or the ‘db2pd –ha’ commands will reflect the changes. The virtual IP address will also be moved to the new active node as part of the failover process, and any associated mount points will be moved as well.

RELATED INFORMATION
 Cluster management software integration enabled [http://publib.boulder.ibm.com/infocenter/db2luw/v9r5/index.jsp?topic=/com.ibm.db2.luw.wn.doc/doc/c0052795.html]