Title: IBM User ID deleted from Tivoli Integrated Portal before user roles are removed. - United States

Text:
User ID; not properly; deleted; from TIP; ListUsers command; TIPL2CONF; TIPL2SEC TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 A user ID was removed from the Object server, TIP GUI and the LDAP group that TIP synchronizes with. But the user still shows up in the ListUsers command via tipcli.sh. 

CAUSE
Because of a WAS limitation, deleting users/groups does not delete the role associations in TIP. Because TIP cannot enforce this process, the role associations always need to be removed first, since the user was in an external repository ( LDAP and the Object Server),

ENVIRONMENT
Tivoli Integrated Portal Version 2.1 and 2.2

DIAGNOSING THE PROBLEM
After deleting the users/groups ran the tipcli.sh script and still see user A001047: 

$ tipcli.sh ListUsersFromRole --roleName ncw_admin 
User Name 
CN=A001047, OU=USR, O=REWE, O=rewe 
CTGWA4017I The command completed successfully.

$ tipcli.sh ListUsersFromRole --roleName ncw_user 
User Name 
CN=A001047, OU=USR, O=REWE, O=rewe 
CTGWA4017I The command completed successfully. 

Try and delete the user: A00107 

$ tipcli.sh RemoveUsersFromRole --username tipadmin --password ****** --roleName ncw_admin --usersList A001047 

we get an error: 

CTGWA4039E User name: A001047 is illegal. 

CTGWA4080I Failed to execute the command, exiting... 

Check logfile /opt/IBM/TIP/tipv2/profiles/TIPProfile/bin/logs/tipcli.log for more messages.


RESOLVING THE PROBLEM
There are two options to resolve this issue: 

1. Edit these files removing the specified user and restart the TIP server. 

RPS%3Ahref%3ATIPCell%2Fisc%3Aroles%3Ancw_admin.xml RPS%3Ahref%3ATIPCell%2Fisc%2FOMNIbusWebGUI.war%3Aroles%3Ancw_admin.xml 

2. Re-create the user with the same user ID and then first delete all the user-role and user-group associations. Check that the user is no longer present in the xml files listed in #1, then use tipcli.sh to remove the user: 

Example: 
$ tipcli.sh RemoveUsersFromRole --username tipadmin --password ****** --roleName ncw_admin --usersList A0010470