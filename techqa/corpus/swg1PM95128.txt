Title: IBM PM95128: CUSTOM REALM CHANGED TO PROTOCOL_IIOP_DAEMON_LISTENIPADDRESS INC ORRECTLY 13/08/30 PTF PECHANGE - United States

Text:
z/os  FIXES ARE AVAILABLE
8.0.0.8: WebSphere Application Server V8.0 Fix Pack 8 [http://www-01.ibm.com/support/docview.wss?uid=swg24036729]
7.0.0.31: WebSphere Application Server V7.0 Fix Pack 31 [http://www-01.ibm.com/support/docview.wss?uid=swg24036768]
8.5.5.2: WebSphere Application Server V8.5.5 Fix Pack 2 [http://www-01.ibm.com/support/docview.wss?uid=swg24037250]
7.0.0.33: WebSphere Application Server V7.0 Fix Pack 33 [http://www-01.ibm.com/support/docview.wss?uid=swg24037573]
8.0.0.9: WebSphere Application Server V8.0 Fix Pack 9 [http://www-01.ibm.com/support/docview.wss?uid=swg24037574]
8.5.5.3: WebSphere Application Server V8.5.5 Fix Pack 3 [http://www-01.ibm.com/support/docview.wss?uid=swg24038133]
7.0.0.35: WebSphere Application Server V7.0 Fix Pack 35 [http://www-01.ibm.com/support/docview.wss?uid=swg24038310]
8.5.5.4: WebSphere Application Server V8.5.5 Fix Pack 4 [http://www-01.ibm.com/support/docview.wss?uid=swg24038539]
8.0.0.10: WebSphere Application Server V8.0 Fix Pack 10 [http://www-01.ibm.com/support/docview.wss?uid=swg24039242]
7.0.0.37: WebSphere Application Server V7.0 Fix Pack 37 [http://www-01.ibm.com/support/docview.wss?uid=swg24039338]
8.5.5.5: WebSphere Application Server V8.5.5 Fix Pack 5 [http://www-01.ibm.com/support/docview.wss?uid=swg24039425]
8.5.5.6: WebSphere Application Server V8.5.5 Fix Pack 6 [http://www-01.ibm.com/support/docview.wss?uid=swg24040035]
8.0.0.11: WebSphere Application Server V8.0 Fix Pack 11 [http://www-01.ibm.com/support/docview.wss?uid=swg24040425]
8.5.5.7: WebSphere Application Server V8.5.5 Fix Pack 7 [http://www-01.ibm.com/support/docview.wss?uid=swg24040533]
7.0.0.39: WebSphere Application Server V7.0 Fix Pack 39 [http://www-01.ibm.com/support/docview.wss?uid=swg24041013]
8.5.5.8: WebSphere Application Server V8.5.5 Fix Pack 8 [http://www-01.ibm.com/support/docview.wss?uid=swg24041178]
8.0.0.12: WebSphere Application Server V8.0 Fix Pack 12 [http://www-01.ibm.com/support/docview.wss?uid=swg24041590]
8.5.5.9: WebSphere Application Server V8.5.5 Fix Pack 9 [http://www-01.ibm.com/support/docview.wss?uid=swg24041819]
7.0.0.41: WebSphere Application Server V7.0 Fix Pack 41 [http://www-01.ibm.com/support/docview.wss?uid=swg24041931]
8.5.5.10: WebSphere Application Server V8.5.5 Fix Pack 10 [http://www-01.ibm.com/support/docview.wss?uid=swg24042150]
8.5.5.11: WebSphere Application Server V8.5.5 Fix Pack 11 [http://www-01.ibm.com/support/docview.wss?uid=swg24043005]
8.0.0.13: WebSphere Application Server V8.0 Fix Pack 13 [http://www-01.ibm.com/support/docview.wss?uid=swg24042746]
7.0.0.43: WebSphere Application Server V7.0 Fix Pack 43 [http://www-01.ibm.com/support/docview.wss?uid=swg24043400]
8.5.5.12: WebSphere Application Server V8.5.5 Fix Pack 12 [http://www-01.ibm.com/support/docview.wss?uid=swg24043844]
8.0.0.14: WebSphere Application Server V8.0 Fix Pack 14 [http://www-01.ibm.com/support/docview.wss?uid=swg24044096]
8.5.5.13: WebSphere Application Server V8.5.5 Fix Pack 13 [http://www-01.ibm.com/support/docview.wss?uid=swg24044479]
7.0.0.45: WebSphere Application Server V7.0 Fix Pack 45 [http://www-01.ibm.com/support/docview.wss?uid=swg24044551]
8.0.0.15: WebSphere Application Server V8.0 Fix Pack 15 [http://www-01.ibm.com/support/docview.wss?uid=swg24044734]
Obtain the fix for this APAR.


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  After upgrading to WAS7029 and if a Custom Realm is used, it is
   noted that the realm value changes from the Custom Realm to the
   protocol_iiop_daemon_listenIPAddress. It is also noted in
   authorization errors:
   com.ibm.websphere.security.auth.WSLoginFailedException: This
   realm is
   not the current realm, nor the admin realm, nor a trusted realm:
   <protocol_iiop_daemon_listenIPAddress value>
   com.ibm.websphere.security.auth.WSLoginFailedException: The user
   is from a foreign realm, <protocol_iiop_daemon_listenIPAddress
   value>, and this foreign realm
   is not trusted. Current realm is <custom realm name>
   
   
    
   
   

LOCAL FIX

PROBLEM SUMMARY
 *  ****************************************************************
   * USERS AFFECTED:  All users of z/OS IBM WebSphere Application *
   *                  Server V7.0, V8.0 and V8.5                  *
   ****************************************************************
   * PROBLEM DESCRIPTION: realm mismatch causes                   *
   *                      WSLoginFailedException after            *
   *                      installing Fix Packs 7.0.0.29,          *
   *                      8.0.0.6 and 8.5.0.2                     *
   ****************************************************************
   * RECOMMENDATION:                                              *
   ****************************************************************
   Installing a fixpack containing PM76462 [http://www-01.ibm.com/support/docview.wss?uid=swg1PM76462] can cause a change in
   the realm name used.
   
   Prior to PM76462 [http://www-01.ibm.com/support/docview.wss?uid=swg1PM76462] when using the local OS the realm name was set
   to the APPLDATA property set in profile SAFDFLT of the REALM
   class. This occurred even if the REALM class was inactive.
   
   Customer with an inactive REALM class may have configured
   foreign realms to recognize this realm as being trusted. After
   PM76462 [http://www-01.ibm.com/support/docview.wss?uid=swg1PM76462], with an inactive REALM class, the realm name is now
   set to <protocol_iiop_daemon_listenIPAddress value> property.
   This may cause the realm mismatch.
   
   com.ibm.websphere.security.auth.WSLoginFailedException: This
   realm is not the current realm, nor the admin realm, nor a
   trusted realm: myhostname
   
   Another symptom is if the customer has defined a custom realm,
   PM76462 [http://www-01.ibm.com/support/docview.wss?uid=swg1PM76462] will result in the custom realm setting being ignored.
   
   
    
   
   

PROBLEM CONCLUSION
 *  PM76462 [http://www-01.ibm.com/support/docview.wss?uid=swg1PM76462] changes will be removed, reverting back to behavior
   pre-PM76462 [http://www-01.ibm.com/support/docview.wss?uid=swg1PM76462]. Our infocenter documentation will be updated to
   indicate that APPLDATA property will be used regardless of
   whether REALM class is active or inactive.
   
   The problem described in PM76462 [http://www-01.ibm.com/support/docview.wss?uid=swg1PM76462] will be addressed in the next
   release of WebSphere Application Server, if there is a next
   release.
   
   APAR PM95128 requires changes to documentation.
   
   NOTE: Periodically, we refresh the documentation on our Web
   site, so the changes might have been made before you read this
   text. To access the latest on-line documentation, go to the
   product library page at:
   
   http://www.ibm.com/software/webservers/appserv/library [http://www.ibm.com/software/webservers/appserv/library]
   
   The following update to the WebSphere Application Server
   Version 7.0 Information Center will be made available in
   January, 2014.
   
   The sixth paragraph in the topic "System Authorization
   Facility user registries" will be updated to read:
   
   WebSphere for z/OS localOS User Registry (SAF User Registry)
   implementation sets the registry realm name from the SAFDFLT
   profile in the REALM class when the SAFDFLT profile is
   defined, whether the REALM class is active or inactive. The
   realm name is specified as the APPLDATA property of the
   SAFDFLT profile. If the realm name cannot be obtained from the
   OS security product (such as RACF), the value specified for
   the protocol_iiop_daemon_listenIPAddress property is used as
   the realm name. For example, the value
   of protocol_iiop_daemon_listenIPAddress is used if the SAFDFLT
   profile or APPLDATA property is not defined.
   
   and the following Avoid Trouble will be added after the
   preceding paragraph:
   
   Avoid Trouble: Because of PE APAR, PM76462 [http://www-01.ibm.com/support/docview.wss?uid=swg1PM76462], in Version
   7.0.0.29, WebSphere for z/OS localOS User Registry (SAF User
   Registry) implementation described in the preceding paragraph
   only occurs when the REALM class is active. This
   implementation error was corrected in Version 7.0.0.31.
   
   APAR PM95128 is currently targeted for inclusion in WebSphere
   Application Server Fix Packs 7.0.0.31, 8.0.0.8, and 8.5.5.2 of
   WebSphere Application Server.
   
   Please refer to URL:
   //www.ibm.com/support/docview.wss?rs=404&uid=swg27006970
   for Fix Pack availability.
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   PM95128
   
   
 * REPORTED COMPONENT NAME
   WEBSPHERE FOR Z
   
   
 * REPORTED COMPONENT ID
   5655I3500
   
   
 * REPORTED RELEASE
   700
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   YesPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2013-08-14
   
   
 * CLOSED DATE
   2013-11-18
   
   
 * LAST MODIFIED DATE
   2014-02-05
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   WEBSPHERE FOR Z
   
   
 * FIXED COMPONENT ID
   5655I3500
   
   

APPLICABLE COMPONENT LEVELS
 * R700 PSY UI13725 [HTTPS://WWW14.SOFTWARE.IBM.COM/WEBAPP/SET2/ORDERMEDIA/SHOPCART?PTFS=UI13725]
   UP14/01/11 P F401
   
   

FIX IS AVAILABLE
 * SELECT THE PTF APPROPRIATE FOR YOUR COMPONENT LEVEL. YOU WILL BE REQUIRED TO SIGN IN. DISTRIBUTION ON PHYSICAL MEDIA IS NOT AVAILABLE IN ALL COUNTRIES.