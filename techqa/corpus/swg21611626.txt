Title: IBM Cognos Reports reporting on a Teradata data source, Intermittently Remain at the Report is Running Screen and Never Complete. - United States

Text:
 TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 An IBM Cognos Report that reports on a Teradata data source using a Terdata version 12 and 13 Open Database Connectivity (ODBC )driver, intermittently hangs at the "Report is running" screen. Once in this state the report never successfully completes. 

SYMPTOM
The report remains in the Report is running screen until the user cancels the report execution. If monitored on the IBM Cognos Business Intelligence(BI )server. A BibusTKServerMain.exe process would be present but would not take up any server resources even if the Cognos BI server load is increased. 


CAUSE
The cause of the issue is that the Teradata ODBC driver is presenting a prompt dialog box that requires user interaction. The dialog is presented as a result of having the "Run in Quiet Mode" property not set on the Data Source Name ( DSN) for the ODBC driver. 

The "Run in Quiet Mode" ODBC driver property is turned off by default for Teradata 12 and 13 client drivers but is enabled by default for version 14.


DIAGNOSING THE PROBLEM
The issue can be diagnosed by users reporting that their reports that report on the Teradata data source remain in the Report is running screen and never complete. 

The issue can be diagnosed by an IBM Cognos BI Administrator that notices that BibusTKServerMain processes appear as a process on the BI system but do not take any resources as the IBM Cognos BI server load is increased. 

The issue can be further confirmed by creating a BibusTKServerMain memory dump of one of the processes that do not take any resources as the BI Server load increases. The memory dump can then be further analyzed for occurrences of the calls in bold below.

1 Id: 1388.10fc Suspend: 0 Teb: fffda000 Unfrozen
ChildEBP RetAddr
01a3e650 7618cf5c user32!NtUserWaitMessage+0x15
01a3e67c 761bf73c user32!InternalDialogBox+0xe5
01a3e730 761bfa18 user32!SoftModalMessageBox+0x757
01a3e888 761bfb1f user32!MessageBoxWorker+0x269
01a3e8f4 761bfb9e user32!MessageBoxTimeoutW+0x52
01a3e928 761bfcf1 user32!MessageBoxTimeoutA+0x76
01a3e948 761bfd36 user32!MessageBoxExA+0x1b
*** WARNING: Unable to verify checksum for Tdata32.dll
*** ERROR: Symbol file could not be found. Defaulted to export symbols for Tdata32.dll -
01a3e964 12ed590a user32!MessageBoxA+0x18
WARNING: Stack unwind information not available. Following frames may be wrong.
01a3e9e8 12ed7cff Tdata32!SQLDisconnect+0x2039a
01a3ea00 12eb566a Tdata32!SQLDisconnect+0x2278f
*** WARNING: Unable to verify checksum for cogudaodbc35.DLL
01a3ea40 12b6e33b Tdata32!SQLDisconnect+0xfa
01a3ea58 12b65319 cogudaodbc35!SgiOdbcApi::sqlDisconnect+0x2b [e:\colorado\uda\uda_col_rp1\winx64h\src\uda\prod\dmd\sgi\odbc35\common\sgiodbcapi.cpp @ 490] 


RESOLVING THE PROBLEM
For Teradata 12 and 13 ODBC client drivers check the box "Run in Quiet Mode" in the DSN properties. To do this launch the ODBC Administrator from within the Administration Tools. 

Locate the User or System DSN that is being used by the IBM Cognos reports. 

Click the Configure button to open the ODBC Driver Setup for Teradata Database dialog box. 

Within this dialog box, click the Options button. 

Ensure the check box beside the Run in Quite Mode property is checked. 

Click the OK button twice to return to the ODBC Administrator dialog box. 

The next Teradata connection that is made from within the IBM Cognos BI system will be made using this setting. In order to ensure that all connections use this setting, it maybe beneficial to stop and start the IBM Cognos BI service. 

 

In a multiple server installation, the above setting will need to be applied on each IBM Cognos BI server that is performing Teradata access through the ODBC connection.