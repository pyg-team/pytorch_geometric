Title: IBM A CWMCO0908E error message is seen when the upgraded cluster does not match the node level for IBM Business Process Manager (BPM) Advanced - United States

Text:
upgrade; migration; MIGRATION_VERSION; DetectCluster TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 You cannot start the cluster member after upgrading from IBM Business Process Manager (BPM) Advanced V7.5.0 to 7.5.1 or upgrading already migrated environment to V8.0.1 Fix Pack1. 

SYMPTOM
Even after upgrading the cluster, you see the following exceptions: 

[2/3/12 21:50:53:849 EST] 00000000 DetectCluster E com.ibm.bpm.migration.cluster.detection.DetectClusterMigration start CWMCO0908E: The cluster ME.cluster has not been migrated to version thats compatible with node Node01. Please execute BPMMigrateCluster command on the deployment manager profile to complete cluster migration. 

[2/3/12 21:50:53:849 EST] 00000000 WsServerImpl E WSVR0009E: Error occurred during startup 

com.ibm.ws.exception.RuntimeError: CWMCO0908E: The cluster mon.Models has not been migrated to version thats compatible with node CMHWBMITG01Node01. Please execute BPMMigrateCluster command on the deployment manager profile to complete cluster migration. 

at com.ibm.bpm.migration.cluster.detection.DetectClusterMigration.start(DetectClusterMigration.java:137) 

at com.ibm.ws.runtime.component.ContainerHelper.startComponents(ContainerHelper.java:538) 

at com.ibm.ws.runtime.component.ContainerImpl.startComponents(ContainerImpl.java:627) 

at com.ibm.ws.runtime.component.ContainerImpl.start(ContainerImpl.java:618) 

at com.ibm.ws.runtime.component.ApplicationServerImpl.start(ApplicationServerImpl.java:227) 

at com.ibm.ws.runtime.component.ContainerHelper.startComponents(ContainerHelper.java:538) 

at com.ibm.ws.runtime.component.ContainerImpl.startComponents(ContainerImpl.java:627) 

at com.ibm.ws.runtime.component.ContainerImpl.start(ContainerImpl.java:618) 

at com.ibm.ws.runtime.component.ServerImpl.start(ServerImpl.java:502) 

at com.ibm.ws.runtime.WsServerImpl.bootServerContainer(WsServerImpl.java:298) 

at com.ibm.ws.runtime.WsServerImpl.start(WsServerImpl.java:214) 

at com.ibm.ws.runtime.WsServerImpl.main(WsServerImpl.java:666) 

at com.ibm.ws.runtime.WsServer.main(WsServer.java:59) 

at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 

at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:60) 

at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:37) 

at java.lang.reflect.Method.invoke(Method.java:611) 

at com.ibm.wsspi.bootstrap.WSLauncher.launchMain(WSLauncher.java:213) 

at com.ibm.wsspi.bootstrap.WSLauncher.main(WSLauncher.java:93) 

at com.ibm.wsspi.bootstrap.WSLauncher.run(WSLauncher.java:74) 

at org.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:78) 

at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:92) 

at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:68) 

at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:400) 

at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:177) 

at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 

at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:60) 

at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:37) 

at java.lang.reflect.Method.invoke(Method.java:611) 

at org.eclipse.core.launcher.Main.invokeFramework(Main.java:340) 

at org.eclipse.core.launcher.Main.basicRun(Main.java:282) 

at org.eclipse.core.launcher.Main.run(Main.java:981) 

at com.ibm.wsspi.bootstrap.WSPreLauncher.launchEclipse(WSPreLauncher.java:341) 

at com.ibm.wsspi.bootstrap.WSPreLauncher.main(WSPreLauncher.java:111)


CAUSE
This issue is caused in the following situations: 

 * When you migrate from the WebSphere Process Server, WebSphere Enterprise Service Bus, or WebSphere Business Monitor products to IBM Business Process Manager Advanced Version 7.5.0, the "MIGRATION_VERSION" variable is set to 7.5.0.0 at the cluster level. After upgrading the environment to 7.5.1 , this variable is not updated to 7.5.1.0, which causes a mismatch between the cluster level and the product version.
   
   
   This issue has been identified as a product defect APAR JR41904.
   
   
 * If you have an IBM Business Process Manager Advanced V8.0.1.0 environment that was migrated from previous environment, the "MIGRATION_VERSION" variable is set to 8.0.1.0. However, when you upgrade this environment to V8.0.1 Fix Pack 1, the variable value does not change.
   
   
   This issue has been identified as a product defect under APAR JR47057.

RESOLVING THE PROBLEM
Make sure the Cluster upgrade instructions are followed to all the clusters and there are no errors in the <DmgrProfile>/logs/BPMProfileUpgrade.<timeStamp>.log 


To resolve this problem, use the administrative console to check the variables for all the clusters in your environment. Complete the following steps: 

 1. Click Environment > WebSphere Variables.
    
    
 2. Check each cluster scope for the MIGRATION_VERSION variable.
    [/support/docview.wss?uid=swg21584411&amp;aid=1]
    
    
 3. Change the MIGRATION_VERSION value to the current IBM Business Process Manager product version.
    
     * If you have upgrade to 7.5.1.0 change the value to 7.5.1.0 
       
       
     * If you have upgraded to 8.0.1 Fix Pack 1, change the value to 8.0.1.1
       
       
    
    
 4. Repeat the previous step for all of the clusters and nodes in your environment.
    
    
 5. Fully synchronize the node. 
    
    
 6. Restart the cluster members.
    
    
 7. Check the cluster member SystemOut.log file to make sure that an exception does not exist. If an exception does not exist, you see the following informational message:
    
    
    2/10/12 14:39:43:602 EST] 00000000 DetectCluster I com.ibm.bpm.migration.cluster.detection.DetectClusterMigration start CWMCO0907I: The cluster ME.Cluster is running at current version compatible with node Node01.

RELATED INFORMATION
#Version 7.5 Cluster Migration [http://pic.dhe.ibm.com/infocenter/dmndhelp/v7r5mx/index.jsp?topic=/com.ibm.wbpm.imuc.doc/topics/rmig_vtv_bpmmigratecluster.html]


 

PRODUCT ALIAS/SYNONYM
 BPM