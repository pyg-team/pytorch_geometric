Title: IBM Sometimes the default toolbars or menu entries of IBM SPSS Statistics are missing or non-reactive. - United States

Text:
default icon icons toolbar missing lost user defined registry windows spss mac TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 You work with IBM SPSS Statistics on a host computer with Windows or MacOS. The program runs fine but sometimes the default toolbar with the icons are lost on either Data Editor, Syntax Editor or Output Viewer. This can also happen for user-defined toolbars. The issue can either occur when logged in as administrator or when logged in as a restricted user but it does not happen on each installation. 

CAUSE
To explain why this behavior can happen sometimes for some users we need to first explain how Statistics store user preferences. 

IBM SPSS Statistics is a Java application and user preferences are stored as Java user preferences. On Windows platforms, Java stores user preferences in the Windows registry. On other platforms they are stored differently. Regardless, we do not read or write directly to the Windows registry. Java has APIs that manage user preferences and those are what we use.
Preferences for different Major.Minor versions of our application are stored separately. There is no interaction of preferences between versions. Installing an additional version of our application will affect
registered COM interfaces used for Scripting but these are not user preferences. Even for the same Major.Minor version, installing and uninstalling will not add, remove or modify user preferences. Our
installers know nothing about user preferences.

We allow users to run multiple sessions of the same version of our application simultaneously. In fact, this is necessary when running certain features such as the Production Facility. Beginning with Statistics 21, we
manage user preferences for each session separately so that changes to user preferences in one session do not affect other running sessions. This is done by making a working copy of the persisted user preferences when a session starts. The working copy is used during the session and when the session ends, the working copy is written back to the persisted user preferences. Knowing this, it is easy to imagine scenarios where the
sequence of starting and stopping sessions becomes important. 
For example:
User begins session A, which uses a copy of the persisted user preferences.
User changes preferences for session A.
User begins session B, which uses a copy of the same persisted user preferences copied by session A.
User changes preferences for session B.
User ends session A, which writes its working copy to the persisted user preferences.
User ends session B, which overwrites the changes to user preferences written by session A.
User begins session C, which uses a copy of the user preferences written by session B.
User is maybe confused depending on expectations.

Also, if a session crashes or is terminated abnormally (terminated using the Task Manager, for example) any changes to user preferences will be lost. The working copy will not be written back to the persisted user
preferences.

Toolbars are saved as part of user preferences. As such, toolbar customization can seemingly be 'lost' if the user is running multiple sessions simultaneously as illustrated in the scenario above. They will also be lost when the customization are created during a session that terminates abnormally.

Losing not only toolbar customization but also the default toolbars would indicate the user preferences have been corrupted. Or if the user is running multiple sessions, there could be collisions while copying or writing the persisted user preferences, which could potentially corrupt them.

Corrupt user preferences are not easily repaired. It is usually best to manually delete them from the Windows registry using regedit or some other tool. This will reset the application back to its initial as-installed
state with default user preferences.


RESOLVING THE PROBLEM
Microsoft Windows Operating System 


On the Windows operating system, the problem is resolved by restoring the default toolbars as they were after the first install. The steps to restore defaults are made in the System Registry and therefore if you have a System Administrator, you may want to engage her to assist with these steps. User defined toolbars will lost when you reset the defaults, but you can export and import them if you choose unless they are corrupt. If they are corrupt they can not be restored.

Exporting & Import User Preferences

On Windows platforms persistent user preferences can be viewed, exported, and imported using regedit. Using IBM SPSS Statistics 21.0 as an example, they are here (for other versions of Statistics, replace all instances of '21' in the examples below with the two-digit version number of the product, such as '24'):

HKEY_CURRENT_USER\Software\JavaSoft\Prefs\com\ibm\/S/P/S/S\/Statistics\21.0
Deleting this hive will reset the application back to its initial as-installed state with default user preferences.

A working copy of user preferences will look something like this:
HKEY_CURRENT_USER\Software\JavaSoft\Prefs\com\ibm\/S/P/S/S\/Statistics\21.01369250156330
The last part is a creation time-stamp.

Make sure there are no running sessions of our application. Then, registry entries like these indicate the application terminated abnormally at some point in the past:
HKEY_CURRENT_USER\Software\JavaSoft\Prefs\com\ibm\/S/P/S/S\/Statistics\21.0.0
HKEY_CURRENT_USER\Software\JavaSoft\Prefs\com\ibm\/S/P/S/S\/Statistics\21.01369250156330
These are working copies of user preferences that have been abandoned. They can be deleted. 

**The below steps can only be performed by the Administrator of the Windows machine**

a) First, make sure you have installed the latest FixPack's for each SPSS release on the Windows computer. To locate the current Fix Pack for your Statistics product, search the IBM Support Portal [https://www.ibm.com/support/entry/portal/support].

b) Close Statistics.
c) Click on Start - All Programs - Accessories - Run
d) On Run facility type regedit. 
e) Go to HKEY_CURRENT_USER\Software\JavaSoft\Prefs\com\ibm\/S/P/S/S\/Statistics

On computers where release 21 is installed you see for example entries like:

HKEY_CURRENT_USER\Software\JavaSoft\Prefs\com\ibm\/S/P/S/S\/Statistics\21.0
HKEY_CURRENT_USER\Software\JavaSoft\Prefs\com\ibm\/S/P/S/S\/Statistics\21.0 0
HKEY_CURRENT_USER\Software\JavaSoft\Prefs\com\ibm\/S/P/S/S\/Statistics\21.0 1369250156330
If you like you can right click on 
HKEY_CURRENT_USER\Software\JavaSoft\Prefs\com\ibm\/S/P/S/S\/Statistics\21.0
and click 'export' and save this key as .reg file (registration file) on the desktop to copy the original key.

f) Next, right click on all the keys shown above that begin with 21.
Delete them all. This will NOT destroy your Statistics 21.x installation
What will happen is that all settings are reset to the default when you launch the program: this means all settings on Edit - Options are set to default as they was after installation of the software. You will also have no entries on recently used files anymore.
g)Close the registry.
h) Launch 21 while still logged on as Administrator and see if the default toolbar for the data Editor is restored. Then open a new Syntax Editor and a new Viewer window and see if all toolbars are displayed. Close Statistics 21.
i) Log on as the user of this Windows machine, launch Statistics 21 as user and verify if the toolbars are restored to default values for the user as well.

Apple Macintosh OSX Operating System

If you encounter this issue on a Macintosh OSX operating system version 10.9.x or higher then go to (A).
If you encounter this issue on a Macintosh OSX operating system version 10.8.x or lower, then go to (B).


(A)
Since OSX 10.9.x Mavericks, a cached copy of your .plist file is stored using a background process: CFPREFSD
Even after deleting the above .plist file, restarting SPSS Statistics will not create a new copy of these file, but rather, Mavericks will restore the cached copy it has stored. Only by stopping the "cfprefsd" process and starting SPSS Statistics, will generate a new .plist preference file and therefore a default toolbar will be back.

When you go to Finder - Applications - Utilities and open Activity Monitor on the 10.9.x (or higher) computer you should see there is a CFPREFSD process visible for root user and for the current logged in user.
You need to kill the CFPREFSD process for the current user this can only be done via Terminal application by running the command below:

killall -u {CURRENT_USER} cfprefsd

where '{CURRENT_USER}' is replaced with the person's user ID. One can get the user ID by typing "whoami" at a Terminal prompt. 

Once the CFPREFSD process has been 'killed', go to (B).

(B)
On Macintosh OSX the toolbars may be reset by deleting the following file: com.ibm.spss.plist

You can delete it by:

Opening the Finder and locating and deleting 'com.ibm.spss.plist' in the Library/Preferences folder:

/Library/Preferences/com.ibm.spss.plist

OR

Use the Terminal application and perform the following: 

rm -fR ~/Library/Preferences/com.ibm.spss.plist


After deleting 'com.ibm.plist', REBOOT the Macintosh computer.

If simply removing these files and running the program does not resolve the issue you may need to remove the files and then reinstall the program. At your earliest convenience, update your SPSS Statistics product to the most recent fixpack available for it. 

RELATED INFORMATION
 Need more help? Our Statistics forum is Live! [https://developer.ibm.com/answers/topics/statistics.html?smartspace=predictive-analytics]