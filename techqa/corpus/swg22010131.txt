Title: IBM WEBGUI 8.1 TLS 1.2 requirement - United States

Text:
 TECHNOTE (FAQ)

QUESTION
 What are requirement to configure WebGUI to communicate over TLS 1.2? 

CAUSE
Security Concern

ANSWER
WebGUI 8.1 require following configuration for event feed / data source to communicate over TLS 1.2 

1) Configuring FIPS 140-2 and SP800-131 to enable TLS 1.2 on Object server:
https://www.ibm.com/support/knowledgecenter/SSSHTQ_8.1.0/com.ibm.netcool_OMNIbus.doc_8.1.0/omnibus/wip/install/concept/omn_con_fips_configuringsupport.html [https://www.ibm.com/support/knowledgecenter/SSSHTQ_8.1.0/com.ibm.netcool_OMNIbus.doc_8.1.0/omnibus/wip/install/concept/omn_con_fips_configuringsupport.html] 

 

 a) configuring FIPS 140-2 mode

1) Create an empty text file called fips.conf in security directory under $NCHOME/etc (unix) or %NCHOME%\ini\ (windows)
https://www.ibm.com/support/knowledgecenter/SSSHTQ_8.1.0/com.ibm.netcool_OMNIbus.doc_8.1.0/omnibus/wip/install/task/omn_con_fips_creatingfipsconffile.html?view=kc [https://www.ibm.com/support/knowledgecenter/SSSHTQ_8.1.0/com.ibm.netcool_OMNIbus.doc_8.1.0/omnibus/wip/install/task/omn_con_fips_creatingfipsconffile.html?view=kc]

2) Set the PasswordEncryption property of the ObjectServer to the AES setting. 

 * If you want to run the ObjectServer in secure mode, and want to encrypt passwords within the proxy server, probe, or gateway properties files, encrypt the passwords by running the nco_aes_crypt utility and use the -c command-line option to specify AES_FIPS as the encryption algorithm.

https://www.ibm.com/support/knowledgecenter/SSSHTQ_8.1.0/com.ibm.netcool_OMNIbus.doc_8.1.0/omnibus/wip/install/reference/omn_con_fips_configuringservers.html [https://www.ibm.com/support/knowledgecenter/SSSHTQ_8.1.0/com.ibm.netcool_OMNIbus.doc_8.1.0/omnibus/wip/install/reference/omn_con_fips_configuringservers.html] 
 b) Object server to be configure with SP800-131 mode and enable TLS 1.2 https://www.ibm.com/support/knowledgecenter/SSSHTQ_8.1.0/com.ibm.netcool_OMNIbus.doc_8.1.0/omnibus/wip/install/task/omn_con_fips_configureSP800-131.html [https://www.ibm.com/support/knowledgecenter/SSSHTQ_8.1.0/com.ibm.netcool_OMNIbus.doc_8.1.0/omnibus/wip/install/task/omn_con_fips_configureSP800-131.html] 

 

 1) Add following to fips.conf file 

(you can omit parameters that are not required by your operating environment) 

 SP800_131MODE=TRUE 

(this parameter enables TLS 1.2) 

 TLS12_ONLY=TRUE 

(this parameter disables all protocols except TLS 1.2. Use this setting only when the SP800_131MODE parameter is set to TRUE. For Java components, this parameter also enables JSSE2 SP800-131 support ("transition" SP800-131 encryption). When both the SP800_131MODE and STRICT_CERTIFICATE_CHECK parameters are set to TRUE, "strict" SP800-131 encryption is enabled for Java) 

 SHA2_CERTIFICATES_ONLY=TRUE 

(this parameter enables TLS 1.2 Signature and Hash Algorithm Restrictions. Only server certificates that meet the restrictions are accepted. This parameter has no effect on Java components unless the STRICT_CERTIFICATE_CHECK parameter is also set to TRUE) 

 STRICT_CERTIFICATE_CHECK=TRUE 

(this parameter enforces TLS 1.2 Signature and Hash Algorithm Restrictions on all certificates in the chain. Use this setting only when the SP800_131MODE and SHA2_CERTIFICATES_ONLY parameters are also set to TRUE. For Java components, use this setting only when the SP800_131MODE, TLS12_ONLY, and SHA2_CERTIFICATES_ONLY parameters are also set to TRUE) 

 

2) Configuring the Web GUI client for FIPS 140-2 mode
https://www.ibm.com/support/knowledgecenter/SSSHTQ_8.1.0/com.ibm.netcool_OMNIbus.doc_8.1.0/webtop/wip/task/web_con_configfipsclient.html [https://www.ibm.com/support/knowledgecenter/SSSHTQ_8.1.0/com.ibm.netcool_OMNIbus.doc_8.1.0/webtop/wip/task/web_con_configfipsclient.html]

To use the Web GUI client in FIPS 140-2 mode, ensure that the client is configured correctly.

1) Ensure that the internet browsers have Transport Layer Security (TLS) enabled. 

 

 2) If the client-side browser uses the IBM® JRE 1.5, add the –Dhttps.protocols=TLSv1 Java™ runtime parameter to enforce the use of TLS. To add this parameter: 

 a) Click Java Control Panel > Java > View
b) In the Java Runtime Parameter window, double-click the field for the IBM JRE 1.5 under Java Runtime Parameter and type the following entry: 
–Dhttps.protocols=TLSv1

3) Encrypting passwords using FIPS 140–2 mode encryption for WebGUIhttps://www.ibm.com/support/knowledgecenter/SSSHTQ_8.1.0/com.ibm.netcool_OMNIbus.doc_8.1.0/webtop/wip/task/web_con_encryptingpasswordsusingfips.html [https://www.ibm.com/support/knowledgecenter/SSSHTQ_8.1.0/com.ibm.netcool_OMNIbus.doc_8.1.0/webtop/wip/task/web_con_encryptingpasswordsusingfips.html] 

The default Web GUI vault key is located in $WEBGUI_HOME/etc/encrypt/vault.key. This key is used to encrypt the ObjectServer password stored in the ncwDataSourceDefinitions.xml file, and the Dashboard Application Services Hub truststore password stored in the server.init file. After you edit the server.init file, restart the Dashboard Application Services Hub server. 


1) To encrypt the ObjectServer password, enter the following command: 

$WEBGUI_HOME/bin/ncw_fips_crypt -password xxxxxx -key $WEBGUI_HOME/etc/encrypt/vault.key 

If you use the default vault key, omit the key parameter. 

An encrypted password is generated. 

 2) Copy the encrypted password. 

 3) Add the encrypted ObjectServer password:


 a) Take a backup of $WEBGUI_HOME/etc/datasources/ncwDataSourceDefinitions.xml file. 

 b) Open the ncwDataSourceDefinitions.xml file. 

 c) Edit the <ncwDataSourceCredentials> element, as shown in the following example: 

<ncwDataSourceCredentials encrypted="true" userName="xxxxxxx" password="5ZxxxxxxxgA==
” algorithm="FIPS"/>

4) To encrypt the Dashboard Application Services Hub truststore password, enter the following command: 

$WEBGUI_HOME/bin/ncw_fips_crypt -password xxxxx -key $WEBGUI_HOME/etc/encrypt/vault.key 

 5) Copy the encrypted password. 

 6) Add the encrypted Dashboard Application Services Hub truststore password to the initialization file: 

 a) Take a backup of $WEBGUI_HOME/etc/server.init file 

 b) Open the $WEBGUI_HOME/etc/server.init file 

 c) Set the webtop.password.encryption property to fips. 

 d) Set the webtop.ssl.trustStorePassword property to the encryption generated in Step.6.C.4 

 e) To ensure that the default Dashboard Application Services Hub truststore is used, leave the webtop.ssl.trustStore property empty. 

 f) Set the webtop.fips property to on. 

 

4) Configuring SP800-131 compliance for the event feed from the ObjectServer 

(Before you begin ensure TLS1.2 is enforced in the Object Server) 

 1) Take a backup of $WEBGUI_HOME/etc/server.init.

2) Make following changes in the server.init

a) Set the webtop.fips.level parameter to sp800-131.

b) Set the webtop.password.encryption parameter to FIPS, if it is not set already

c) Set the webtop.fips parameter to on, if it is not set already

d) Check the webtop.ssl.trustStorePassword parameter is FIPS encrypted.

]$ cat $WEBGUI_HOME/etc/server.init | grep 'webtop.fips.level\|webtop.password.encryption\|webtop.fips\|webtop.ssl.trustStore\|webtop.ssl.trustStorePassword' 
# webtop.password.encryption: < none | aes | fips >
webtop.password.encryption:FIPS
# webtop.fips: < off | on >
# webtop.fips.level: < fips140-2 | sp800-131 >
webtop.fips:on
webtop.fips.level:sp800-131
# webtop.ssl.trustStore:
# webtop.ssl.trustStorePassword:
webtop.ssl.trustStore:
webtop.ssl.trustStorePassword:xxxxxxxxxxxx
webtop.ssl.trustStoreType:PKCS12

3) Restart the WebGUI

4) Perform validation


WebGUI 8.1 require following configuration for WAS to communicate over TLS 1.2

1) Enabling TLS 1.2 on WAS 

 1) Log in to the WebSphere Application Server Integrated Solutions Console. 

 2) Click Security > SSL certificate and key management, and under Related Items, click SSL configurations.

3) Click the default SSL settings link to open it and, under Additional Properties, click Quality of protection (QoP) settings.

4) For the protocol, ensure that TLSv1.2 is selected, for the Cipher suite groups, ensure that Strong is selected, and then click Update selected ciphers.

5) Click OK and save directly to the master configuration.


[/support/docview.wss?uid=swg22010131&aid=1] [/support/docview.wss?uid=swg22010131&aid=1] 

 6) Take a backup of $JAZZSM_HOME/profile/properties/ssl.client.props
Check and update below property in this file

com.ibm.ssl.protocol=TLSv1.2

7) Restart the WebGUI


 8) Perform validation


 a) Check the ncw and SystemOut.log on the WebGUI server 

 b) Check the AGG Object Server logs. You may check if the WebGUI has logged into the Object Server successfully.