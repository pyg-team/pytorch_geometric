Title: IBM Using DB2 v9 Autonomics with Content Manager - United States

Text:
 TECHNOTE (FAQ)

QUESTION
 Are there any recommendations for using DB2 automatic tuning with Content Manager? 

ANSWER
Overview
Starting with DB2 V9.5, the use of the built in autonomics for database tuning is recommended for use with Content Manager V8.4 This note does not apply to versions of DB2 prior to V9.5.

To learn more about DB2 Autonomic features see the DB2 V9.5 Information Center at http://publib.boulder.ibm.com/infocenter/db2luw/v9r5//index.jsp [http://publib.boulder.ibm.com/infocenter/db2luw/v9r5//index.jsp] and search for the term “Autonomic computing overview”.

There are many ways to use the autonomic features in DB2: 

 *  Turn them all off 
 *  Turn them all on an forget about them 
 *  Turn them on and monitor the system and adjust as appropriate


Each Content Manager implementation is different and workloads vary. While some initial settings are shown below, it is recommended that the last option be implemented. After making initial parameter settings, the system should be monitored over a period of time to understand how the settings are adjusted by DB2. The db2diag.log and the stmm log contain entries when adjustments are made. These logs can be parsed to determine the minimum and maximum sizes that are set for any parameter. If it is determined that a parameter has a very small range, then it might be appropriate to manually set that parameter to the high end of the range and eliminate the constant adjustments. More information on stmm can be found in the DB2 V9.5 Information Center by searching for the phrase “Self tuning memory operational details and limitations”. 

A self-tuning memory manager log parser is available at http://www.ibm.com/developerworks/data/library/techarticle/dm-0708naqvi/index.html [http://www.ibm.com/developerworks/data/library/techarticle/dm-0708naqvi/index.html] DB2 instance settings for the library server 

 * For DB2 V9.5 the use of the Connection Concentrator is not recommended. With previous versions of DB2 it was sometimes recommend for use. The Connection Concentrator is off when the MAX_COORDAGENTS and MAX_CONNECTIONS are set equal. 

 * 
 * 
 * 
 * 
 * 
 * 
 * 

 * When the instance is started it will determine available memory and set these parameters. No change is recommended to these parameters at this time.

 * 
 * 
 * 
 * 
 * 
 * 
 * 

 * The number of pool agents should be set to a good initial number for each customer's unique workload. Customers should monitor the number of agents being created and destroyed and set this parameter to an appropriate value for an average workload.

 * 


DB2 database settings for the library server  * For the following parameters the DB2 default setting is Automatic after installing the library server. By accepting the settings, you allow DB2 to balance the allocation of memory based on the workload. No change is recommended at this time.

 * 
 * 
 * 
 * 
 * 
 * 
 * 

 * Content Manager is a unique application in that it is completely written by using stored procedures. For this environment, it has been determined that setting the DBHEAP and APPLHEAPSZ to these initial settings is appropriate for better memory utilization and scalability. Each workload is different, so the DBHEAP size should be monitored to see what DB2 determines this initial heap size should be. The following changes are recommended for large system.

 * 

 * For Content Manager it is not recommended to set LOCKLIST size and MAXLOCKS to Automatic. The LOCKLIST size should be sized for the customer workload. Each workload is different and the locklist usage should be monitored for a while to determine the correct setting. The following changes are recommended for high performance system.

 * 
 * 
 * 

 * The following are the Automatic Maintenance settings that are initially set when a database is created. It is recommended to leave the three that are currently set to ON as is. The customer might decide to enable other Automatic Maintenance functions based on their needs.

 * 
 * 
 * 
 * 
 * 

DB2 instance settings for the resource manager 

The resource manager is not very database intensive. Several parameters are set to Automatic during the instance creation. No change is recommended at this time.


 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 


DB2 database settings for the resource manager  * For the following parameters the DB2 default setting is Automatic after installation of the resource manager and by accepting these settings you allow DB2 to balance the allocation of memory based on the workload. No change is recommended at this time.

 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 

 * For the resource manager, it has been determined that setting the DBHEAP and APPLHEAPSZ to these initial settings is appropriate for better memory utilization and scalability. Each workload is different, so the DBHEAP size should be monitored to see what DB2 determines this initial heap size should be. The following changes are recommended for large system.

 * 
 * 
 * 

 * The following are the Automatic Maintenance settings that are initially set when a database is created. It is recommended to leave the settings that are currently set to ON as is. The customer might decide to enable other Automatic Maintenance functions based on their needs.

 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 


DB2 Registry Settings Though not associated with autonomics there are three DB2 Registry settings that are recommended
These are set by using the db2set command

[i] DB2_SKIPINSERTED=YES 
[i] DB2_EVALUNCOMMITTED=YES 
[i] DB2_SKIPDELETED=YES

If Content Manager V8.4.1 or later was installed on DB2 V9.5 FP3 or later, the autonomic settings are automatically set on the library server. If you installed Content Manager on a previous fix pack, you must set them manually on the library server. You must always set them manually on the resource manager database server.