Title: IBM PK64409: ZWAS CAN'T RECONNECT TO QMGR AFTER A WMQ FAILURE (RC=2059 AND J2CA0056I RECEIVED WHEN CREATING QUEUECONNECTION) - United States

Text:
z/os  A FIX IS AVAILABLE
Obtain the fix for this APAR.


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  zWAS can't reconnect to the QMGR following a WMQ failure
   (RC=2059 and J2CA0056I are received when creating
   QueueConnection).  The Connection Manager received a fatal
   connection error.  The error causes JMS connections to attempt
   to reuse an old connection handle associated with the current
   TCB, even after MQ has been restarted.
   
   
    
   
   

LOCAL FIX

PROBLEM SUMMARY
 *  ****************************************************************
   * USERS AFFECTED: All users of WebSphere MQ for z/OS Version   *
   *                 6 with the MQ Java Feature.                  *
   ****************************************************************
   * PROBLEM DESCRIPTION: After a queue manager restart, MQ JMS   *
   *                      connections in WebSphere Application    *
   *                      Server receive multiple failures with   *
   *                      MQRC_Q_MGR_NOT_AVAILABLE and J2CA0056I. *
   ****************************************************************
   * RECOMMENDATION:                                              *
   ****************************************************************
   If an MQ server with connections from WAS terminates and is
   restarted, existing JMS connections to MQ will fail when they
   next attempt to perform MQ work. This is expected, and allows
   the stale connections to perform any recovery and cleanup
   operations required.
   
   In addition, however, new JMS connections may also fail with
   Reason code 2059 (MQRC_Q_MGR_NOT_AVAILABLE). This occurs when
   the new JMS object is running on a TCB which was connected
   to the previous instance of the queue manager. Connection
   state relating to the TCB is not cleaned up correctly, so
   no attempt is made to connect to the new queue manager
   instance.
   
   This can result in error J2CA0056I being received an excessive
   number of times.
   
   
    
   
   

PROBLEM CONCLUSION
 *  The Base and Java components of MQ have been changed to detect
   when connection information relates to an old instance of MQ.
   The old state is cleaned up, and an attempt is made to connect
   to the new queue manager instance.
   
   This APAR will ship the portion of the fix which changes the
   base component of MQ.
   
   The changes to the Java component of MQ will ship in
   fixpack 6.0.2.5 (APAR PK67851 [http://www-01.ibm.com/support/docview.wss?uid=swg1PK67851]).
   
   The two parts of the fix can be applied separately, but both
   are required to resolve the problem.
   000Y
   CSQBCON
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   PK64409
   
   
 * REPORTED COMPONENT NAME
   WMQ Z/OS V6
   
   
 * REPORTED COMPONENT ID
   5655L8200
   
   
 * REPORTED RELEASE
   000
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2008-04-14
   
   
 * CLOSED DATE
   2008-06-26
   
   
 * LAST MODIFIED DATE
   2008-09-03
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
    UK37673
   
   

MODULES/MACROS
 *     CSQBCON
   
   
    
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   WMQ Z/OS V6
   
   
 * FIXED COMPONENT ID
   5655L8200
   
   

APPLICABLE COMPONENT LEVELS
 * R000 PSY UK37673 [HTTPS://WWW14.SOFTWARE.IBM.COM/WEBAPP/SET2/ORDERMEDIA/SHOPCART?PTFS=UK37673]
   UP08/08/12 P F808
   
   

FIX IS AVAILABLE
 * SELECT THE PTF APPROPRIATE FOR YOUR COMPONENT LEVEL. YOU WILL BE REQUIRED TO SIGN IN. DISTRIBUTION ON PHYSICAL MEDIA IS NOT AVAILABLE IN ALL COUNTRIES.