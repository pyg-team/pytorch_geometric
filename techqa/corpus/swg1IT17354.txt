Title: IBM IT17354: ADD JMS IBM PROPERTY TO MESSAGE ALLOW SUBSCRIPTION USER DATA TO QUERIED - United States

Text:
 SUBSCRIBE TO THIS APAR
By subscribing, you receive periodic emails alerting you to the status of the APAR, along with a link to the fix after it becomes available. You can track this item individually or track all items by product.

Notify me when this APAR changes.

Notify me when an APAR for this component changes.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  When an administrative durable subscription is defined using the
   MQSC command:
   
     DEFINE SUB
   
   http://www.ibm.com/support/knowledgecenter/SSFKSJ_9.0.0/com.ibm.
   mq.ref.adm.doc/q085760_.htm [http://www.ibm.com/support/knowledgecenter/SSFKSJ_9.0.0/com.ibm.mq.ref.adm.doc/q085760_.htm]
   
   user data that is associated with the subscription can be
   optionally specified using the USERDATA argument. The value is
   a variable length string which is added to messages sent to this
   subscription as a message property.
   
   The USERDATA gets stored in the RFH2 header in the "mqps" folder
   with the key "Sud".
   
   If messages sent to the defined subscription are then consumed
   by an MQ classes for JMS application, the mqps.Sud message
   property is not added to the JMS message that is returned to
   the application.  As a  result, the application does not have
   access this information.
   
   
    
   
   

LOCAL FIX

PROBLEM SUMMARY
 *  ****************************************************************
   USERS AFFECTED:
   This issue affects users of the:
   
     - WebSphere MQ V7.1 classes for JMS
     - WebSphere MQ V7.1 JCA Resource Adapter
   
     - WebSphere MQ V7.5 classes for JMS
     - WebSphere MQ V7.5 JCA Resource Adapter
   
     - IBM MQ V8 classes for JMS
     - IBM MQ V8 JCA Resource Adapter
   
     - IBM MQ V9 classes for JMS
     - IBM MQ V9 JCA Resource Adapter
   
   who are consuming messages from a queue, which were put by an
   administratively defined durable subscription, and want to
   access the user data information associated with the
   subscription that is added to the message as property.
   
   
   Platforms affected:
   MultiPlatform
   
   ****************************************************************
   PROBLEM DESCRIPTION:
   When an administrative durable subscription is defined using the
   MQSC command "DEFINE SUB", for example:
   
   DEFINE SUB('MY.SUBCRIPTION') TOPICSTR('PUBLIC')
   DEST('MY.SUBSCRIPTION.Q') USERDATA('Administrative durable
   subscription to put message to the queue MY.SUBSCRIPTION.Q')
   
   then copies are messages that were published to the topic string
   "PUBLIC" are put to the queue, "MY.SUBSCRIPTION.Q".  The user
   data associated with the durable subscription is then added as a
   property to the message, which is stored in the MQPS folder of
   the RFH2 header with the key "Sud".
   
   If this message was then consumed by an MQ classes for JMS
   application, this property was not added to the JMS Message
   returned to the application.  As such, this information was not
   accessible to the application.
   
   
    
   
   

PROBLEM CONCLUSION
 *  The MQ classes for JMS have been updated such that when a
   message is consumed from a queue that contains an RFH2 header
   with the MQPS folder, the value associated with the "Sud" key
   (should it exist) is now added as a String property to the JMS
   Message object returned to the application.  To enable the
   retrieval of this property from the message, a new constant has
   been added to the JmsConstants interface with name:
   
     JMS_IBM_SUBSCRIPTION_USER_DATA
   
   that can  be used with the method:
   
     javax.jms.Message.getStringProperty(java.lang.String)
   
   in order to get the subscription user data.
   
   
   Continuing the example from the Problem Summary, an application
   can call:
   
   
   javax.jms.Message.getStringProperty(JmsConstants.JMS_IBM_SUBSCRI
   PTION_USER_DATA);
   
   and the String returned will be, "Administrative durable
   subscription to put message to the queue MY.SUBSCRIPTION.Q".
   
   
   ---------------------------------------------------------------
   The fix is targeted for delivery in the following PTFs:
   
   Version    Maintenance Level
   v7.5       7.5.0.8
   v8.0       8.0.0.7
   v9.0 CD    9.0.2
   v9.0 LTS   9.0.0.2
   
   The latest available maintenance can be obtained from
   'WebSphere MQ Recommended Fixes'
   http://www-1.ibm.com/support/docview.wss?rs=171&uid=swg27006037 [http://www-1.ibm.com/support/docview.wss?rs=171&uid=swg27006037]
   
   If the maintenance level is not yet available information on
   its planned availability can be found in 'WebSphere MQ
   Planned Maintenance Release Dates'
   http://www-1.ibm.com/support/docview.wss?rs=171&uid=swg27006309 [http://www-1.ibm.com/support/docview.wss?rs=171&uid=swg27006309]
   ---------------------------------------------------------------
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   IT17354
   
   
 * REPORTED COMPONENT NAME
   WMQ WINDOWS V7
   
   
 * REPORTED COMPONENT ID
   5724H7220
   
   
 * REPORTED RELEASE
   710
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt / Xsystem
   
   
 * SUBMITTED DATE
   2016-10-05
   
   
 * CLOSED DATE
   2017-01-31
   
   
 * LAST MODIFIED DATE
   2017-03-10
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   WMQ WINDOWS V7
   
   
 * FIXED COMPONENT ID
   5724H7220
   
   

APPLICABLE COMPONENT LEVELS
 * R710 PSY
   UP