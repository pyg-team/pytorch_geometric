Title: IBM Tivoli Monitoring for Databases: Sybase Server Agent V6.2.0 - Failed to connect to SYBASE Server - United States

Text:
5724B96SO TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 The Sybase Server agent cannot connect to the Sybase server. 

SYMPTOM
The following error messages are continually shown in the <install_dir>/logs/<hostname>_oy_<instance>_col.log: 

 
CGN1521E (hhmmss) Interval collection failed for cursor HART1 
>ESQ0610E (hhmmss) Setting password for SYBASE Server connection failed 
Unable to retrieve localized message for tivoli
YEM0145E (hhmmss) Setting password for SYBASE Server connection failed 
YEM0155E (hhmmss) Failed to open SYBASE Server connection 
YCD0130E (hhmmss) Unable to connect to SYBASE server:MEM3PROD, 
id:tivoli, Retcode= 0 


CAUSE
This problem occurs when you install the Sybase Software Development Kit (SDK) into the same directory as the Sybase installation directory. 

The Sybase Server agent configures the SYBASE_OCS environment variable as full path. The Sybase server without SDK can be connected with the full path of SYBASE_OCS environment variable, but the Sybase SDK requires SYBASE_OCS environment variable to be a subdirectory to which the open client is set.


RESOLVING THE PROBLEM
Option 1: Apply 6.2.0-TIV-ITM_SYB-IF0011 or above version will solve the issue 


Option 2: If you can't apply 6.2.0-TIV-ITM_SYB-IF0011 or above version, please do the following:

To resolve the problem, change the configuration of the agent by using the following steps:

1) Change the definition of the SYBASE_OCS environment variable in the configuration file (<host_name>_oy_<instanc_name>.cfg under <install_dir>/config directory) from full path to the subdirectory name to which the open client is set. For example:

From 
export SYBASE_OCS="/mmpd12/sybase15/OCS-15_0" 
To 
export SYBASE_OCS="OCS-15_0" 

2) Add the Sybase open client library path $SYBASE/$SYBASE_OCS/lib to the configuration files (<install_dir>/config/oy.ini and <install_dir>/config/oy.config); otherwise, the agent cannot load the Sybase open client libraries.

Change LD_LIBRARY_PATH for Linux or Solaris systems, LIBPATH for AIX.

For example on Solaris systems:
From 
export LD_LIBRARY_PATH='...:/usr/lib' 
To 
export LD_LIBRARY_PATH='...:/usr/lib:/mmpd12/sybase15/OCS-15_0/lib:' 

NOTE: Do not omit the colon (:) from the end of the line. 

3) Restart the agent.

 

PRODUCT ALIAS/SYNONYM
 koy