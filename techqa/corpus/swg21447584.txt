Title: IBM Configuring IBM InfoSphere Content Collector to use a configuration database in an Oracle cluster - United States

Text:
 TECHNOTE (FAQ)

QUESTION
 How can I create an IBM InfoSphere Content Collector configuration database in an Oracle cluster? 

ANSWER
IBM InfoSphere Content Collector requires a configuration database to store configuration settings and data. This database can be created in a variety of different database management systems, for example in an Oracle cluster.
The following instructions exemplify how to create a configuration database in an Oracle cluster consisting of two nodes with host names vdc-vga-ora1 and vdc-vqa-ora2 and virtual host names vdc-vqa-ora1v and vdc-vqa-ora2v. Replace these host names with the names for your cluster setup.


 1. On any of the Oracle machines in the cluster, create a user ID that you want to use for Content Collector. This must be done before you run the IBM InfoSphere Content Collector Initial Configuration wizard. 
 2. On the Content Collector machine, add the following entry to the file <Oracle_installation_directory>/Network/Admin/tnsnames.ora (one line, no line breaks):
    RAC =(DESCRIPTION =(ADDRESS = (PROTOCOL = TCP)(HOST = vdc-vqa-ora1v)(PORT = 1521))(ADDRESS = (PROTOCOL = TCP)(HOST = vdc-vqa-ora2v)(PORT = 1521))(LOAD_BALANCE = yes)(CONNECT_DATA =(SERVER = DEDICATED)(SERVICE_NAME = RAC.WORLD))) 
 3. Launch the Content Collector Initial Configuration wizard. In the Oracle Database Configuration window, specify the following information:
    JDBC driver: Point to the ojdbc14.jar file or the ojdbc6.jar file.
    JDBC connection: Specify the following URL:
    jdbc:oracle:thin:@(DESCRIPTION =(ADDRESS = (PROTOCOL = TCP)(HOST = vdc-vqa-ora1v)(PORT = 1521))(ADDRESS = (PROTOCOL = TCP)(HOST = vdc-vqa-ora2v)(PORT = 1521))(LOAD_BALANCE = yes)(CONNECT_DATA =(SERVER =DEDICATED)(SERVICE_NAME = RAC.WORLD)))
    User ID
    Password
    You do not need to specify the server name, port, and service name, because they are provided in the JDBC connection URL.
    [/support/docview.wss?uid=swg21447584&aid=1] [/support/docview.wss?uid=swg21447584&aid=1] 
 4. Complete the Initial Configuration wizard. The configuration database will be created. 
 5. If the Content Collector Configuration Manager cannot connect to the database, provide the required parameters. Specify RAC for the service name and enter the user name and the password.



If you plan to use the IBM InfoSphere Content Collector Web Applications, you will encounter some errors during the configuration because the IBM InfoSphere Content Collector 2.1.1 Configuration Manager does not support configuring the Web Applications with an Oracle cluster. 
The following instructions exemplify a workaround for this limitation: 
 1. In the Configuration Manager, go to General Settings > Configuration Web Service. Enter some values and save your changes, so that the Web Application server is started. 
 2. Edit the file <Content_Collector_installation_directory>/ctms/scripts/jdbcinstall.cmd and add or edit the following lines:
    
    set JDBCPORT=<port_number>
    set DBNAME = <Oracle_DBNAME>
    set USERID="<user_ID>" 
    set PASSWORD=<password>
    set URL="(DESCRIPTION =(ADDRESS = (PROTOCOL = TCP)(HOST = <node1_vip>)(PORT = <node1_port>))(ADDRESS = (PROTOCOL = TCP)(HOST = <node2_vip>)(PORT = <node2_port>))(LOAD_BALANCE = yes)(CONNECT_DATA =(SERVER = DEDICATED)(SERVICE_NAME = <service_name>)))"
    
    Make sure that there are no line breaks in the URL line.
    For the example above, you would replace the variables with the following values:
    <port_number>: 1521
    <Oracle_DBNAME>: RAC
    <node1_vip>: vdc-vga-ora1v
    <node1_port>: 1521
    <node2_vip>: vdc-vga-ora2v
    <node2_port>: 1521
    <service_name>: RAC.WORLD 
 3. Open a command prompt and run jdbcinstall.cmd 
 4. Clear the log of the WebApplications service and restart the service. 
 5.  Make sure that there are no errors in the log of the WebApplications service. If you are not using additional archiving information, you can ignore errors reported by the Metadata Web application ("cannot connect to port 1527").