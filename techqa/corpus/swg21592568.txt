Title: IBM Remove duplicate entities - United States

Text:
duplicate entities in Model TECHNOTE (FAQ)

QUESTION
 When SNMP access is newly acquired in recent discovery compared to a previous cycle, we could end up with duplicate nodes in final topology - how to prevent such duplicates? 

ANSWER
This is addressed under http://www-01.ibm.com/support/docview.wss?uid=swg1IV13306 [http://www-01.ibm.com/support/docview.wss?uid=swg1IV13306]
The fix does following:


 * Search for any devices for which SNMP access was newly acquired in this discovery 
 * If that new device has multiple IP addresses then search for lingering entities with those IP addresses 
 * If the DeleteRenamedDevices configuration option has been enabled then delete the duplicates


Note this new behavior is not enabled by default and so in addition to the test fix the configuration file named ModelSchema.cfg will need to be modified to look as follows: 

insert into model.config 
( 
LingerTime, 
ChassisCreationEvents, 
IpInterfaceCreationEvents, 
MaintenanceStateEvents, 
ManagedStatusUpdateInterval, 
DeleteRenamedDevices 
) 
values 
( 
3, // LingerTime (3 discoveries) 
0, // Raise creation/deletion events for chassis (0 = no; 1 = yes) 
0, // Raise creation/deletion events for interfaces with IP addresses 
// (0 = no; 1 = yes) 
0, // Raise maintenance state change events for chassis and for 
// interfaces with IP addresses (0 = no; 1 = yes) 
30, // check managedStatus table for changes every 30 seconds 
0 // if set to 1, a renamed devices are deleted, by default linger time is decremented 
); 

Once enabled we can expect to see things like the following in the log file when we re-discover a device for the first time with SNMP access (which hasn't had SNMP in earlier cycle): 

CMdlLingerTime::SearchForLingeringDuplicates: Newly aquired SNMP access to: linux-vm and detected lingering duplicate entity : 192.168.1.15 matching assoc address: 192.168.1.15 
CMdlLingerTime::SearchForLingeringDuplicates: m_DelRenamed = 1 Duplicate entity 192.168.1.15 be deleted 

Also note that this fix does not address the fact that ITNM will not handle duplicate sysNames when sysnaming is enabled and therefore this option will need to be disabled.