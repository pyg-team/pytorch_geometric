Title: IBM The "Add Box Collaboration Folder" menu failed with "The repository login failed. More information" after clicking on "Grant access to Box" - United States

Text:
Box; Collaboration; folder; ICM 5.3; integration; application; token TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 The "Add Box Collaboration Folder" menu failed with "The repository login failed. More information" after clicking on "Grant access to Box" 

SYMPTOM
See the same screen shots below. 

[/support/docview.wss?uid=swg22003215&amp;aid=1]
[/support/docview.wss?uid=swg22003215&amp;aid=2]

Here is the sample error reported in WAS SystemOut.log :

[4/28/17 11:14:00:448 PDT] 0000012a SystemOut O CIWEB Error: [unknown(unknown) @ unknown] [REQUEST 48] com.ibm.ecm.util.OAuthClient.sendRequest()
java.io.IOException: Server returned HTTP response code: 400 for URL: https://account.box.com/api/oauth2/token [https://account.box.com/api/oauth2/token]
at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:86)
at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:58)
at java.lang.reflect.Constructor.newInstance(Constructor.java:542)
at sun.net.www.protocol.http.HttpURLConnection$6.run(HttpURLConnection.java:1689)
at sun.net.www.protocol.http.HttpURLConnection$6.run(HttpURLConnection.java:1687)
at java.security.AccessController.doPrivileged(AccessController.java:452)
at sun.net.www.protocol.http.HttpURLConnection.getChainedException(HttpURLConnection.java:1685)
at sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1258)
at com.ibm.net.ssl.www2.protocol.https.b.getInputStream(b.java:85)
...
...


CAUSE
The root case is that you 've specified the Client ID -server authentication value for the Client ID - standard authentication to be the same as the Client ID -standard authentication value, which is incorrect. In the case of the Box collaboration, it requires two Box applications, the standard Box authentication and the Box server authentication applications, to be created. 

Here is the sample screen shot showing the root cause : 


[/support/docview.wss?uid=swg22003215&aid=3] [/support/docview.wss?uid=swg22003215&aid=3]


ENVIRONMENT
Windows, ICM 5.3



RESOLVING THE PROBLEM
Before running "Configure Box Collaboration" task via the Case Manager configuration tool GUI, you must create two Box applications, the standard Box authentication and the Box server authentication applications as shown in the sample screen shot annotation below. 


[/support/docview.wss?uid=swg22003215&aid=4] [/support/docview.wss?uid=swg22003215&aid=4]

And you must correctly enter the respective value for the Client ID -server authentication and for the Client ID - standard authentication in the "Configure Box Collaboration" task.

See the related "Setting up Box collaboration" in the reference link below. 
https://www.ibm.com/support/knowledgecenter/SSCTJ4_5.3.0/com.ibm.casemgmt.installing.doc/acmcp061.htm [https://www.ibm.com/support/knowledgecenter/SSCTJ4_5.3.0/com.ibm.casemgmt.installing.doc/acmcp061.htm]