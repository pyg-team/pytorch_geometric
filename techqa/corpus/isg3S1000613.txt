Title: IBM IDCAMS DEFINE using RECORDS results in excessive extents. - United States

Text:
CI; CA; SPLIT; SPLITS; CISIZE TECHNOTE (FAQ)

QUESTION
 DEFINE using RECORDS uses too much space. It is stated in the AMS manual that RECORDS will allocate the minimum number of tracks that are required to contain the number of records and achieve device independence. 

ANSWER
Description:
DEFINE using RECORDS uses too much space. It is stated in the AMS manual that RECORDS will allocate the minimum number of tracks that are required to contain the number of records and achieve device independence. It seems that the calculation of variable length VSAM files is selecting the average record size which results in a very small allocation. The IDCAMS DEFINE is:

DEFINE CLUSTER(name(xxxxx) VOL(*) -
REC(600000 25000) -
RECSZ(75 4089)
KEYS(56 0) FSPC(0 0)

Only 260016 records are loaded and the file obtains 45 extents. 


Resolution:


The average record size (AVGREC) specified by the user was inaccurate. The space calculation is based on the average record size and the number of records. If the actual average RECORDSIZE is larger than what is specified, the dataset may take excessive extents. Divide the HI-USED-RBA by the number of records loaded to get a better picture of the real average record size. In this case although 75 was specified actual average record size was 600. 

Access Method Services for Catalogs
RECORDS PARAMETER [http://publibz.boulder.ibm.com/cgi-bin/bookmgr_OS390/BOOKS/DGT2I251/14.1.1?SHELF=EZ2ZO10J&DT=20070124224148]
RECORDSIZE PARAMETER [http://publibz.boulder.ibm.com/cgi-bin/bookmgr_OS390/BOOKS/DGT2I251/14.1.2?SHELF=EZ2ZO10J&DT=20070124224148]



HISTORICAL NUMBER
 5605608