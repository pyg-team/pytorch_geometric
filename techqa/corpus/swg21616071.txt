Title: IBM EJPEC0002E exception during ConfigEngine task 'action-check-legacy-portlet-exists' - United States

Text:
EJPEC0002E action check legacy portlet exists wsadmin transaction timeout WASX7017E BSFException RemoteException rollback state TECHNOTE (TROUBLESHOOTING)

PROBLEM
When executing the ConfigEngine task 'action-check-legacy-portlet-exists', it uses wsadmin scripting to check if the legacy local rendering portlet is deployed. It may fail with this error if the transaction timeout is exceeded. This task is called during many FixPack and CF installations.

SYMPTOM
In the ConfigTrace.log, the following exception is seen: 

===================================
action-check-legacy-portlet-exists:
[logmsg] [10/31/12 18:22:12.635 CDT] EJPCA3100I: Configuration task
"action-check-legacy-portlet-exists" in progress
[...]
[wsadmin] WASX7209I: Connected to process "WebSphere_Portal" on node
PortalNode using SOAP connector; The type of process is: ManagedProcess
[wsadmin] WASX7303I: The following options are passed to the
scripting environment and are available as arguments that are stored in
the argv variable: "[C:/IBM/WebSphere/wp_profile/ConfigEngine, wpsadmin,
ibm.portal.Web.Content.Viewer, WCM Local Rendering Portlet,
C:/IBM/WebSphere/wp_profile/ConfigEngine/config/work/ibm.portal.Web.Content.
Viewer.exists]"
[wsadmin] logged in as
"uid=wpsadmin,o=defaultWIMFileBasedRealm"
[wsadmin] WASX7017E: Exception received while running file
"C:/IBM/WebSphere/wp_profile/ConfigEngine/config/work/WcmLegacyPortletExists
.jacl"; exception information: com.ibm.bsf.BSFException: error while
eval'ing Jacl expression:
[wsadmin] java.rmi.RemoteException: EJPEC0002E: The transaction has
been set to rollback state. The current thread ID is
SoapConnectorThreadPool : 2, Transaction context = , iListSize=0,
iUser=312544065.
[wsadmin] while executing
[wsadmin] "$Portlet search all uniquename $legacyPortletUniqueName"
[wsadmin] invoked from within
[wsadmin] "set portletid [$Portlet search all uniquename
$legacyPortletUniqueName]"
--- Exception Thrown ---
C:\IBM\WebSphere\PortalServer\wcm\prereq.wcm\config\includes\prereq.wcm_cfg.
xml:4884: Java returned: 105
at org.apache.tools.ant.taskdefs.Java.execute(Java.java:87)
at com.ibm.websphere.ant.tasks.WsAdmin.execute(WsAdmin.java:409)
at
org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:275)
[...]
BUILD FAILED
C:\IBM\WebSphere\PortalServer\installer\wp.update\config\includes\cumulative_fix.xml:26: The following error occurred while executing this line:
C:\IBM\WebSphere\PortalServer\installer\wp.update\config\includes\wp.update.fix_cfg.xml:194: The following error occurred while executing this line:
C:\IBM\WebSphere\PortalServer\wcm\prereq.wcm\config\includes\prereq.wcm_cfg.xml:4884: Java returned: 105
Total time: 18 minutes 3 seconds 

===================================

CAUSE
The transaction timeout was exceeded when checking for the legacy local rendering portlet.



RESOLVING THE PROBLEM
1. In the WAS Admin Console, navigate to Servers -> Server Types -> 

Application Servers -> WebSphere_Portal -> Container Services ->
Transaction Service
2. Change the default timeouts for Total Transaction lifetime timeout to 600.
3. Save the changes.
4. Re-execute the failing task or FixPack/CF install.




 * 
 *