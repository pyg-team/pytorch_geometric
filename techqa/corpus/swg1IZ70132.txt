Title: IBM IZ70132: CWTKE0021W DUE TO SCHEDULERNOTAVAILABLEEXCEPTION - United States

Text:
 SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  CWTKE0021W due to SchedulerNotAvailableException:
   com.ibm.db2.jcc.b.yn: DB2 SQL Error: SQLCODE=-302,
   SQLSTATE=22001
   
   stack:
   ExceptionUtil E   CNTR0020E:
   EJB threw an unexpected (non-declared) exception during
   invocation of method "createScheduledItem" on bean
   "BeanId(TaskContainer_default.AppTarget#taskejb.jar#TaskServiceM
   anagerBean, null)". Exception data:
   com.ibm.task.core.SchedulerError: CWTKE0001E: An error occurred
   when setting up the scheduler.
   com.ibm.websphere.scheduler.SchedulerNotAvailableException:
   com.ibm.db2.jcc.b.yn: DB2 SQL Error: SQLCODE=-302,
   SQLSTATE=22001, SQLERRMC=null, DRIVER=3.53.95
   com.ibm.db2.jcc.b.yn: DB2 SQL Error: SQLCODE=-302,
   SQLSTATE=22001, SQLERRMC=null, DRIVER=3.53.95
    at com.ibm.db2.jcc.b.bd.a(bd.java:668)
    at com.ibm.db2.jcc.b.bd.a(bd.java:60)
    at com.ibm.db2.jcc.b.bd.a(bd.java:127)
    at com.ibm.db2.jcc.b.gm.b(gm.java:2142)
    at com.ibm.db2.jcc.b.gm.c(gm.java:2125)
    at com.ibm.db2.jcc.t4.db.k(db.java:353)
    at com.ibm.db2.jcc.t4.db.a(db.java:59)
    at com.ibm.db2.jcc.t4.t.a(t.java:50)
    at com.ibm.db2.jcc.t4.tb.b(tb.java:200)
    at com.ibm.db2.jcc.b.hm.ac(hm.java:2452)
    at com.ibm.db2.jcc.b.hm.e(hm.java:3294)
    at com.ibm.db2.jcc.b.hm.Sb(hm.java:619)
    at com.ibm.db2.jcc.b.hm.executeUpdate(hm.java:602)
    at
   com.ibm.ws.rsadapter.jdbc.WSJdbcPreparedStatement.pmiExecuteUpda
   te(WSJdbcPreparedStatement.java:1098)
    at
   com.ibm.ws.rsadapter.jdbc.WSJdbcPreparedStatement.executeUpdate(
   WSJdbcPreparedStatement.java:765)
    at
   com.ibm.ws.scheduler.TaskStoreImpl.executeUpdateWithRetry(TaskSt
   oreImpl.java:1818)
    at
   com.ibm.ws.scheduler.TaskStoreImpl.create(TaskStoreImpl.java:422
   )
    at
   com.ibm.ws.scheduler.SchedulerImpl$1.run(SchedulerImpl.java:722)
    at java.security.AccessController.doPrivileged(Native Method)
    at
   com.ibm.ws.scheduler.SchedulerImpl.updateOrCreate(SchedulerImpl.
   java:604)
    at
   com.ibm.ws.scheduler.SchedulerImpl.create(SchedulerImpl.java:565
   )
    at
   com.ibm.task.framework.ServiceSessionBean.createScheduledItem(Se
   rviceSessionBean.java:674)
    at
   com.ibm.task.framework.EJSLocalStatelessTaskServiceManagerBean_f
   d52dd76.createScheduledItem(Unknown Source)
    at
   com.ibm.task.core.scheduler.HTMSchedulerImpl.create(HTMScheduler
   Impl.java:141)
    at
   com.ibm.task.core.scheduler.HTMScheduler.createSchedulerItem(HTM
   Scheduler.java:525)
    at
   com.ibm.task.core.scheduler.RefreshStaffQuerySliceAlarmData.queu
   eViaScheduler(RefreshStaffQuerySliceAlarmData.java:139)
    at
   com.ibm.task.core.scheduler.RefreshStaffQueryAlarmData.processAl
   arm(RefreshStaffQueryAlarmData.java:147)
    at
   com.ibm.task.core.scheduler.HTMSchedulerMDB.onMessage(HTMSchedul
   erMDB.java:535)
    at
   com.ibm.ejs.container.MessageEndpointHandler.invokeMdbMethod(Mes
   sageEndpointHandler.java:1014)
    at
   com.ibm.ejs.container.MessageEndpointHandler.invoke(MessageEndpo
   intHandler.java:747)
    at $Proxy128.onMessage(Unknown Source)
    at
   com.ibm.ws.sib.api.jmsra.impl.JmsJcaEndpointInvokerImpl.invokeEn
   dpoint(JmsJcaEndpointInvokerImpl.java:201)
    at
   com.ibm.ws.sib.ra.inbound.impl.SibRaDispatcher.dispatch(SibRaDis
   patcher.java:788)
    at
   com.ibm.ws.sib.ra.inbound.impl.SibRaSingleProcessListener$SibRaW
   ork.run(SibRaSingleProcessListener.java:585)
    at com.ibm.ejs.j2c.work.WorkProxy.run(WorkProxy.java:419)
    at com.ibm.ws.util.ThreadPool$Worker.run(ThreadPool.java:1497)
   
   
    
   
   

LOCAL FIX

PROBLEM SUMMARY
 *  When there are many staff query instances expired, the automated
   refresh staff query process
   might fail with a SchedulerNotAvailableException (in DB2 due to
   a SQLCODE=-302).
   This interim fix prevents this situation by splitting the
   RefreshStaffQuerySliceAlarmData
   into several objects, and storing them separately.
   
   
    
   
   

PROBLEM CONCLUSION
 *  iFix available on top of V620 FP2
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   IZ70132
   
   
 * REPORTED COMPONENT NAME
   BUS PRC CHOREOG
   
   
 * REPORTED COMPONENT ID
   5655FLW11
   
   
 * REPORTED RELEASE
   612
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2010-02-11
   
   
 * CLOSED DATE
   2010-04-15
   
   
 * LAST MODIFIED DATE
   2010-04-15
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
    IZ70131 [http://www-01.ibm.com/support/docview.wss?uid=swg1IZ70131]
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   BUS PRC CHOREOG
   
   
 * FIXED COMPONENT ID
   5655FLW11
   
   

APPLICABLE COMPONENT LEVELS
 * R620 PSY
   UP