Title: IBM MustGather - WPG server Start or Stop problem - United States

Text:
WebSphere Partner Gateway; MustGather; MustGatherDocument; MustGatherReadFirstDocument; startserver; stopserver TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 Collecting data for problems with the start and stop of IBM WebSphere Partner Gateway (WPG) application servers, deployment manager or node agent. Gathering this MustGather information before calling IBM support will help expedite problem analysis. 

RESOLVING THE PROBLEM

This section instructs the items of documentation required by the IBM WPG support team to diagnose the problems, if an WPG application server, deployment manager (bcgdmgr) or nodeagent is not able to start or stop.




Firstly, please fill up the following form with inquired information, copy and paste to the PMR description:
(For instruction on how to get the these information, refer to WPG ReadFirst Technote [http://www.ibm.com/support/docview.wss?rs=2310&uid=swg21281975].)
 *  Operating system, version and patch level: WPG version and fixpack level: Database, version and fixpack level: WAS (or WAS ND) fixpack level: WPG Topology (Simple/Simple Distributed/Full Distributed?): 

Secondly, please select from below for the area which reports start/stop problem. Then collect and upload MustGather data to the PMR:  

WPG SERVER
 

If an WPG application server (for example: bcgmas, bcgserver, bcgconsole..) is not able to start or stop, please take the below steps to collect required data.

1. Backup and purge the logs under the following locations:


 * <bcghub>/wasND/Profiles/<bcgprofile>/logs/server_name
 * 
 * <bcghub>/wasND/Profiles/<bcgprofile>/logs/ffdc 



2. Modify the file server.xml under the following location: 
 * <bcghub>/wasND/Profiles/<bcgprofile>/config/cells/
 * 
 * cell_name/nodes/node_name/servers/server_name
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 1). Change the trace string 
   From: 
   startupTraceSpecification=" *=info" 
   To: 
   startupTraceSpecification=" *=info:com.ibm.ws.*=all" 
   
   2). Change the following string: 
   From: 
   maxNumberOfBackupFiles=" 1" 
   To: 
   maxNumberOfBackupFiles=" 10" 
   
   3). Save the changes. 
 * 


3. Log in as WPG admin user (by default, it is 'bcguser'), go to the directory <bcghub>/wasND/Profiles/<bcgprofile>/bin, then run "startServer servername -trace" command. (This will log trace to the startServer.log file) NOTE: Similarly, if the Application Server does not stop when issuing the command: stopServer server_name, then please follow the same procedure documented above for collecting trace document, running the command stopServer in place of startServer. (This will log trace to the stoptServer.log file)

In case the stopServer command hangs and does not create stopServer.log file, the following actions should be followed, so as to capture the thread dumps:
1. Execute kill -3 on the processid of the server. 
2. Execute for four times at 1 minute intervals. 
(This will write a thread dump to the nativestderr.log, which may help IBM Support to determine what the threads might be hanging.) 
4. When observe problem recurrence, run the WAS Collector tool [http://publib.boulder.ibm.com/infocenter/wasinfo/v6r1/index.jsp?topic=/com.ibm.websphere.nd.doc/info/ae/ae/ttrb_runct.html] (collector script) under the following location:


 * 
 *  HUB
 * 
 * 
 * 
 * 
 * 
 * 
 * DMGR
 * 
 * 
 * 
 * 
 * 
 * 



5. Follow the instruction to send the collected data to IBM Support [http://www.ibm.com/support/docview.wss?rs=180&uid=swg21153852]. 




[/support/docview.wss?uid=swg21452561&amp;aid=1] Back to Top 


WPG BCGDMGR 
 

In a distributed topology, if WPG deployment manager process (i.e. bcgdmgr) is not able to start or stop, please take the below steps to collect required data.

1. Backup and purge the logs under the following locations: 

 * <bcghub-dmgr>/wasND/Profiles/bcgdmgr/logs/bcgdmgr
 * 
 * <bcghub-dmgr>/wasND/Profiles/bcgdmgr/logs/ffdc



2. Modify the file server.xml under the following location:  * <bcghub-dmgr>/wasND/Profiles/bcgdmgr/config/cells/
   wpgCell/nodes/node_name/servers/bcgdmgr
 * 
 * 1). Change the trace string  * 
    * 
    * 
    * *=info
    * 
    * 
    * 
    * 
    * 
    * *=info:com.ibm.ws.*=all
    * 
   
   
   2). Change the following string:  * 
    * 
    * 
    * 1
    * 
    * 
    * 
    * 
    * 
    * 10
    * 
   
   
   3). Save the changes. 
 * 


3. Log in as WPG admin user (by default, it is 'bcguser'), go to the directory <bcghub-dmgr>/wasND/Profiles/bcgdmgr/bin, then run "startServer bcgdmgr -trace" command. (This will log trace to the startServer.log file) NOTE: Similarly, if the deployment manager does not stop when issuing the command: stopServer bcgdmgr. Then please follow the same procedure documented above for collecting trace documents, running the command stopServer in place of startServer. (This will log trace to the stoptServer.log file)

In case the stopServer command hangs and does not create stopServer.log file, the following actions should be followed, so as to capture the thread dumps:
1. Execute kill -3 on the processid of the server. 
2. Execute for four times at 1 minute intervals. 
(This will write a thread dump to the nativestderr.log, which may help IBM Support to determine what the threads might be hanging.) 
4. When observe problem [http://publib.boulder.ibm.com/infocenter/wasinfo/v6r1/index.jsp?topic=/com.ibm.websphere.nd.doc/info/ae/ae/ttrb_runct.html]recurrence, run the WAS Collector tool [http://publib.boulder.ibm.com/infocenter/wasinfo/v6r1/index.jsp?topic=/com.ibm.websphere.nd.doc/info/ae/ae/ttrb_runct.html] on WPG DMGR machine:
<bcghub-dmgr>/wasND/Profiles/bcgdmgr/bin/<collector script>


 * 



5. Follow the instruction to send the collected data to IBM Support [http://www.ibm.com/support/docview.wss?rs=180&uid=swg21153852]. 




[/support/docview.wss?uid=swg21452561&amp;aid=2] Back to Top 


WPG NODEAGENT
 

In a distributed topology, if nodeagent process is not able to start or stop, please take the below steps to collect required data.

1. Backup and purge the logs under the following locations: 

 * <bcghub>/wasND/Profiles/bcgprofile/logs/nodeagent
 * 
 * <bcghub>/wasND/Profiles/bcgprofile/logs/ffdc



2. Modify the file server.xml under the following location:  * <bcghub>/wasND/Profiles/bcgprofile/config/cells/
   wpgCell/nodes/node_name/servers/nodeagent
 * 
 * 1). Change the trace statement  * 
    * 
    * 
    * *=info
    * 
    * 
    * 
    * 
    * 
    * *=info
    * :com.ibm.ws.*=all
    * 
   
   
   2). Change the following string:  * 
    * 
    * 
    * 1
    * 
    * 
    * 
    * 
    * 
    * 10
    * 
   
   
   3). Save the changes. 
 * 


3. Log in as WPG admin user (by default, it is 'bcguser'), go to the directory <bcghub>/wasND/Profiles/bcgprofile/bin, then run "startNode -trace" command. 
(This will log trace to the startServer.log file) [/support/docview.wss?uid=swg21452561&amp;aid=3] NOTE: Similarly, if the nodeagent process does not stop when issuing the command: stopNode. Follow the same procedure documented above for collecting trace documents, running the command stopNode in place of startNode. (This will log trace to the stoptServer.log file)

In case the stopNode command hangs and does not create stopServer.log file, the following actions should be followed, so as to capture the thread dumps:
1. Execute kill -3 on the processid of the server. 
2. Execute for four times at 1 minute intervals. 
(This will write a thread dump to the nativestderr.log, which may help IBM Support to determine what the threads might be hanging.) 
4. When observe problem [http://publib.boulder.ibm.com/infocenter/wasinfo/v6r1/index.jsp?topic=/com.ibm.websphere.nd.doc/info/ae/ae/ttrb_runct.html]recurrence, run the WAS Collector tool [http://publib.boulder.ibm.com/infocenter/wasinfo/v6r1/index.jsp?topic=/com.ibm.websphere.nd.doc/info/ae/ae/ttrb_runct.html] on WPG HUB machine:
<bcghub>/wasND/Profiles/bcgprofile/bin/<collector script>


 * 



5. Follow the instruction to send the collected data to IBM Support [http://www.ibm.com/support/docview.wss?rs=180&uid=swg21153852]. 




[/support/docview.wss?uid=swg21452561&amp;aid=4] Back to Top 



Related information 

 * MustGather: Read first for WebSphere Partner Gateway [http://www.ibm.com/support/docview.wss?rs=2310&uid=swg21281975] 
 * MustGather: Application Server, dmgr, and nodeagent start and stop problems [http://www-01.ibm.com/support/docview.wss?rs=180&context=SSCMPDZ&q1=MustGatherDocument&uid=swg21201014] [http://www.ibm.com/support/docview.wss?rs=180&uid=swg21153852] [http://publib.boulder.ibm.com/infocenter/dmndhelp/v6r2mx/topic/com.ibm.wpg.entadv.doc/Troubleshooting/overview.html] 
 * Troubleshooting Guide [http://publib.boulder.ibm.com/infocenter/dmndhelp/v6r2mx/topic/com.ibm.wpg.entadv.doc/Troubleshooting/overview.html] 
 * Indexed collection of WPG Technotes [http://www-01.ibm.com/support/docview.wss?uid=swg27016406] 
 * Searching solutions by using IBM Knowledge bases [http://publib.boulder.ibm.com/infocenter/dmndhelp/v6r2mx/topic/com.ibm.wpg.entadv.doc/Troubleshooting/Searching_knowledgebases.html] 
   
   

Cross reference information Segment Product Component Platform Version Edition Business Integration WebSphere Partner Gateway Advanced Edition AIX, HP-UX, Linux, Solaris, Windows 6.2.1, 6.2, 6.1.1.1, 6.1 Advanced 
PRODUCT ALIAS/SYNONYM
 WPG
WebSphere Partner Gateway