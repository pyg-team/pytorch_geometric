Title: IBM IllegalStateException or NullPointerException accessing the Rule Team Server/Decision Center console - United States

Text:
JSF error NPE; WODM TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 An IllegalStateException or NullPointerException is thrown in the WebSphere Application Server (WAS) log while accessing the Rule Team Server (RTS)/Decision Center (DC) console in a browser. 

SYMPTOM
When browsing to the RTS/DC console at http://<hostname>:<port>/teamserver (by default), the RTS login page fails to load. 

Instead, a blank page shows which may include one of the following message: 

 * 
 * Error 500: javax.servlet.ServletException: SRVE0207E: Uncaught initialization exception created by servlet
 * or 
 * 
   Error 500: BodyContent is null for tag with handler class: 'com.sun.faces.taglib.html_basic.CommandLinkTag'.


The following stack trace may be generated in the WAS SystemOut.log:

java.lang.NullPointerException
at org.apache.myfaces.taglib.core.ViewTag.doStartTag(ViewTag.java:78)
at com.ibm._jsp._login._jspService(_login.java:153)
at com.ibm.ws.jsp.runtime.HttpJspBase.service(HttpJspBase.java:98)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:831)
at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1583) 

 * ...


or 

SRVE0068E: Uncaught exception created in one of the service methods of the servlet /login.jsp in application RTS7114. Exception created : com.ibm.websphere.servlet.error.ServletErrorReport: com.ibm.ws.jsp.JspCoreException: Unable to convert string &#39;#{ManagerBean.localeStr}&#39; to class javax.el.ValueExpression for attribute locale: java.lang.IllegalArgumentException: Property Editor not registered with the PropertyEditorManager 
at org.apache.jasper.runtime.PageContextImpl.handlePageException(PageContextImpl.java:695) 
at com.ibm._jsp._login._jspService(_login.java:237) 
at com.ibm.ws.jsp.runtime.HttpJspBase.service(HttpJspBase.java:99) 
at javax.servlet.http.HttpServlet.service(HttpServlet.java:831) 
at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1657) 
at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1597) 
at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:131) 
at ilog.rules.teamserver.web.servlets.filter.IlrRemoteSessionFilter.doFilter(IlrRemoteSessionFilter.java:63)  * ...
 * 

or 
Caused by: java.lang.NullPointerException 
at com.sun.faces.config.processor.ManagedBeanConfigProcessor.process(ManagedBeanConfigProcessor.java:241) 
at com.sun.faces.config.processor.AbstractConfigProcessor.invokeNext(AbstractConfigProcessor.java:94) 
at com.sun.faces.config.processor.ValidatorConfigProcessor.process(ValidatorConfigProcessor.java:107) 
... 

or 

SRVE0100E: Uncaught init() exception created by servlet Faces Servlet in application teamserver-WAS7: java.lang.IllegalStateException: Application was not properly initialized at startup, could not find Factory: javax.faces.context.FacesContextFactory 
at javax.faces.FactoryFinder.getFactory(FactoryFinder.java:270) 
at javax.faces.webapp.FacesServlet.init(FacesServlet.java:164) 
at com.ibm.ws.webcontainer.servlet.ServletWrapper.init(ServletWrapper.java:358) 
at com.ibm.ws.webcontainer.servlet.ServletWrapperImpl.init(ServletWrapperImpl.java:169)  * ...
 * 

On WAS V6.1, the error may be: 

SRVE0068E: Uncaught exception thrown in one of the service methods of the servlet: /content/error.jsp. Exception thrown : javax.servlet.ServletException: BodyContent is null for tag with handler class: 'com.sun.faces.taglib.html_basic.CommandLinkTag'. 
at org.apache.jasper.runtime.PageContextImpl.handlePageException(PageContextImpl.java:660) 
at com.ibm._jsp._error._jspService(_error.java:113) 
at com.ibm.ws.jsp.runtime.HttpJspBase.service(HttpJspBase.java:87) 
at javax.servlet.http.HttpServlet.service(HttpServlet.java:856) 
at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1146)  * ...
 * 


For WODM V8, the error for the Decision Center Business console may be: 

SRVE0014E: Uncaught service() exception root cause dispatcher: org.springframework.web.util.NestedServletException: Handler processing failed; nested exception is java.lang.NoSuchMethodError: ilog/rules/commonbrm/extension/extender/impl/IlrExtenderPackageImpl.addEOperation(Lorg/eclipse/emf/ecore/EClass;Lorg/eclipse/emf/ecore/EClassifier;Ljava/lang/String;IIZZ)Lorg/eclipse/emf/ecore/EOperation; 
at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:839) 
at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:719) 
at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:644)  * ...


CAUSE
During setup, the step to set the classloading policy at the web module level to "parent last" was omitted, or performed after the application had been already deployed and started, which may not allow the setting to be properly loaded due to a WAS limitation. 


This step is required to avoid a conflict (causing the error) between the MyFaces libraries provided by the server and those packaged in the RTS application, since they are of different versions.


DIAGNOSING THE PROBLEM
Check the WAS log file and the classloading settings of the web module for the RTS application in the WAS console.



RESOLVING THE PROBLEM
To resolve the issue, perform the following steps: 

 1. Stop the RTS/DC application. 
 2. Change the class loading policy to "Classes loaded with local class loader first (parent last)" for the RTS/DC web module, as explained at WebSphere ILOG JRules BRMS V7.1: Java EE add-ons > Installing on WebSphere Application Server > Installing Rule Team Server > Installing Rule Team Server on WebSphere Application Server V7.0 > Deploying the Rule Team Server EAR on WebSphere V7.0 > Changing the class loading sequence [http://publib.boulder.ibm.com/infocenter/brjrules/v7r1/topic/com.ibm.websphere.ilog.jrules.install.doc/Content/Business_Rules/Documentation/_pubskel/JRules_Application_Servers/ps_Installing_JRules_IC142.html]. 
 3. Delete the directory <WASInstallDir>\profiles\<WASProfileName>\temp\<nodeName>\<serverName>\<RTSApplicationName> (the RTS/DC application name is "ILOG_Rule_Team_Server" by default) 
 4. Start the RTS/DC application.

RELATED INFORMATION
#NoSuchMethodError accessing RES [http://www.ibm.com/support/docview.wss?rs=0&uid=swg21447068]


 

Cross reference information Segment Product Component Platform Version Edition Business Integration IBM Operational Decision Manager Modules:Rule Team Server Platform Independent 8.5, 8.0, 7.5