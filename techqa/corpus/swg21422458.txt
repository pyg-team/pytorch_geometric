Title: IBM Using IBM WebSphere PMI to monitor FileNet P8 Content Engine connection pool resources - United States

Text:
connection pool resources TECHNOTE (FAQ)

QUESTION
 How can I use IBM WebSphere PMI to monitor and log database connection pool resources for FileNet P8 Content Engine? 

ANSWER
WebSphere provides a Performance Monitoring Infrastructure (PMI) to monitor and log various performance counters within the IBM WebSphere Application Server. For general information about WebSphere PMI, refer to the WebSphere application server information center (WebSphere Application Server Version 7.0 Information Center [http://publib.boulder.ibm.com/infocenter/wasinfo/v7r0/index.jsp]). This technical notice describes how to use WebSphere PMI to monitor and log performance counters for the Java DataBase Connectivity (JDBC) connection pool resources for IBM FileNet P8 Content Engine.
The screenshots below are from WebSphere Application Server 6.1.0.19.

Enabling PMI
1. Log on to WebSphere Web-based Integrated Solutions Console as administrator.
2. On the left navigation panel, expand Monitoring and Tuning and click Performance Monitoring Infrastructure (PMI).

[/support/docview.wss?uid=swg21422458&amp;aid=1]

3. On the Configuration tab, select Enable Performance Monitoring Infrastructure (PMI), then click Apply and save the change. Restart WebSphere for the change to take effect.

[/support/docview.wss?uid=swg21422458&amp;aid=2]


Using PMI to monitor live activities
1. Log on to WebSphere Web-based Integrated Solutions Console, expand Monitoring and Tuning, expand Performance Viewer, and click Current Activity.

[/support/docview.wss?uid=swg21422458&amp;aid=3]

2. Select the server to monitor. This opens the Tivoli Performance Viewer page.
3. On the Tivoli Performance Viewer page, expand Performance Modules, expand JDBC Connection Pools, then expand each individual connection pool. Select the Content Engine data source that to monitor. 

[/support/docview.wss?uid=swg21422458&amp;aid=4]

4. After the selection is complete, click View Module(s) to display connection pool statistics.

[/support/docview.wss?uid=swg21422458&amp;aid=5]

5. If desired, switch to the table view by clicking View Table.

[/support/docview.wss?uid=swg21422458&aid=6] [/support/docview.wss?uid=swg21422458&aid=6]

6. By default, the CreateCount, CloseCount and PoolSize counter is selected to be displayed and the refresh rate is set at 30 seconds.
7. Use these counters to monitor the current activities of the connection pools.

Using PMI to log connection pool activities
PMI provides logging for future references.
1. On the Tivoli Performance Viewer page, after aftView Module(s), a Start Logging button is displayed on the top left of the page. When the button is displayed as Start Logging, it means that logging is stopped. When the button is displayed as Stop Logging, it means that logging is in progress.
[/support/docview.wss?uid=swg21422458&amp;aid=7] 
[/support/docview.wss?uid=swg21422458&amp;aid=8]

2. When clicking Start Logging, an XML file is generated under ..\Websphere_Install_Path\profiles\Your_AppServer\logs\tpv.
3. Once enough data is collected, click Stop Logging and the XML log files in the above path will be automatically zipped up to a single file for future reference.

Using PMI to playback historical log files
1. Log on to WebSphere Web-based Integrated Solutions Console, expand the Monitoring and Tuning node, expand Performance Viewer, and click View Logs.

[/support/docview.wss?uid=swg21422458&amp;aid=9]

2. Specify the path to the desired log file and click View Log.

[/support/docview.wss?uid=swg21422458&amp;aid=10]

3. Navigate through the left panel, select the connection pool counter(s), then click View Module(s) to display historical log data for analysis.
4. Once the log files are loaded, rewind, stop, play, fast forward and jump forward as desired.
[/support/docview.wss?uid=swg21422458&amp;aid=11] 

Conclusions
This technical notice provides instruction on how to use WebSphere PMI to monitor, log, and playback FileNet P8 Connection Pool activities. Monitoring the connection pool usage allows Administrators to tune it to match production workload, manage capacity planning by tracking trends, and diagnose problems from workload spikes. 

For connection pool tuning recommendations, refer to the latest FileNet P8 Performance Tuning Guide and FileNet P8 Troubleshooting Guide:

(Product Documentation for FileNet P8 Platform [http://www.ibm.com/support/docview.wss?uid=swg27010422])