Title: IBM The DBupgrade command fails to validate the BPM.properties file for IBM Business Process Manager (BPM) - United States

Text:
 TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 The DBUpgrade command fails to validate the exported deployment environment properties file using the BPMConfig command. 

SYMPTOM
In step 8 of the Profile upgrade instructions for IBM Business Process Manager Version 8.5 Refresh Pack 5 [http://www.ibm.com/support/docview.wss?uid=swg27042066] document, you use the BPMConfig -export command to export the new IBM Business Process Manager deployment properties file. In step 10 of those same instructions, the new deployment environment properties are used with the DBUpgrade command to upgrade the database. However, you might see the following error messages in the log file: 

com.ibm.bpm.config.util.ConfigException: Found 2 validation error(s): 

CWMCB0258E: The property bpm.de.authenticationAlias.2.name has an invalid value [Dmgr/Myalias] because Dmgr/Myalias contains invalid characters. 

CWMCB0345E: LDAP protocol ldaps: is not supported. 


at com.ibm.bpm.config.model.ConfigModelFactory.validateConfigModel(ConfigModelFactory.java:156)
at com.ibm.bpm.config.model.ConfigModelFactory.loadFromPropertiesDelegate(ConfigModelFactory.java:117)
at com.ibm.bpm.config.model.ConfigModelFactory.loadFromConfigFile(ConfigModelFactory.java:95)
at com.ibm.bpm.migration.utils.BPMMigrationDEHelper.<init>(BPMMigrationDEHelper.java:77)
at com.lombardisoftware.ant.LoadDEInfoTask.execute(LoadDEInfoTask.java:148)
at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:288)
at sun.reflect.GeneratedMethodAccessor7.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:37)
at java.lang.reflect.Method.invoke(Method.java:611)
at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)
at org.apache.tools.ant.Task.perform(Task.java:348)


RESOLVING THE PROBLEM
 When you upgrade the database, you might run into validation errors. Check the following files: 

 * Check the failure in the <DmgrProfile>/logs/DBUpgrade_<Timestamp>.log file for the specific problem.
   
   
 * Check the target.config.property.file value, which is specified in the Migration_properties_file, and identify the failure.


The validation code has been enhanced to address the previously listed problem. See 
JR51260: DBUPGRADE FAILS WITH 'CWMCB0258E, CWMCB0260E, OR CWMCB0345E ERRORS WHEN YOU UPGRADE IBM BPM v8.5.0.X TO IBM BPM v8.5.5.0 [http://www.ibm.com/support/docview.wss?uid=swg1JR51260]. Install Interim Fix JR51260 and run the database upgrade command again 





Workaround: 
Check the specific problem in the BPM.properties file to correct the problems. See the following examples:  * Found 1 validation error(s): CWMCB0345E: LDAP protocol ldaps: is not supported.
   
   
   If you have configured LDAP and exported the deployment environment using the BPMConfig -export command, the LDAP information are saved in the the exported BPMConfig properties file
   
   
   The validator, which is called by DBUpgrade command, does not support the secure LDAP information in the exported BPM.properties file and it fails to pass the validation.
   
   
   You can work around the problem by commenting out the complete LDAP related properties in the BPM.properties file and rerun the DBUpgrade command 
   
   
 * Found 2 validation error(s): CWMCB0258E: The property bpm.de.authenticationAlias.2.name has an invalid value [Dmgr/spockalias]
   
   
   This problem indicates that there is a "/" in the bpm.de.authenticationAlias.2.name, which is not recognized by the code. When you create a new alias using the Administrative Console, by default, the node name of the Deployment Manager is automatically added to the alias name You can create the new alias in the Administrative Console by clicking Security > Global Security > JAAS - J2C authentication data. The deployment_manager_node_name/alias_name is saved in the exported deployment environment properties file. See:
   bpm.de.authenticationAlias.2.name=Dmgr/myalias
   bpm.de.authenticationAlias.2.user=newuser
   bpm.de.authenticationAlias.2.password={xor}123123123122LDp+
   
   
   You can avoid this problem by clearing the Prefix new alias names with the node name of the cell (for compatibility with earlier releases) option. See the following screen shot:
   
   
   [/support/docview.wss?uid=swg21683894&aid=1] [/support/docview.wss?uid=swg21683894&aid=1]
   
   




Alternatively, you can use wsadmin command to create a new alias. For more information, see the Configuring new Java 2 Connector authentication data entries using wsadmin [http://www.ibm.com/support/knowledgecenter/SSEQTP_8.5.5/com.ibm.websphere.base.doc/ae/txml_configdataentry.html] topic in the WebSphere Application Server product documentation. 

After you correct the problems in the properties file, you can rerun the DBUpgrade command to upgrade the database. RELATED INFORMATION
 V8.5.5 Profile Upgrade instructions [http://www.ibm.com/support/docview.wss?uid=swg27042066]


 

PRODUCT ALIAS/SYNONYM
 BPM