Title: IBM IC61704: DATAPOWER CANNOT PING LDAP SERVER BY HOST NAME. IPV6 DNS QUERY MARKED AS SERVFAIL WHICH IMPACTS WORKING IPV4 QUERY - United States

Text:
 SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  Message 0x8060011 LDAP authentication: Could not resolve name is
   written to the DataPower log and AAA actions dependent on the
   LDAP server fail.  DataPower CLI ping command to ping the LDAP
   server by host name fails, but ping by IP address succeeds,
   further confirming the issue is DNS related.
   
   DataPower sends two queries for DNS, a standard A and an AAAA
   request. In this case, the A request for IPV4 succeeds. The AAAA
   request is for an IPv6 address and sometimes the response for
   that query is server failure. When the IPV6 query fails, the
   success of the A query was ignored; that is, there was a
   dependency on DataPower receiving a good response for both the
   IPv6 and the IPv4 DNS queries despite having the DataPower
   configured to prefer the version 4 IP addresses.
   
   
    
   
   

LOCAL FIX
 *  One workaround is is to add an SOA record as described in this
   link:   http://support.citrix.com/article/CTX117947 [http://support.citrix.com/article/CTX117947]
   
   Another workaround is to configure the LDAP server in DataPower
   by IP address rather than hostname, so that DNS is not required.
   
   
    
   
   

PROBLEM SUMMARY
 *  When sending both an A & AAAA request make sure to ignore the
   error by one if the other suceeds.
   
   
    
   
   

PROBLEM CONCLUSION
 *  The fix will be in 3.7.3.4
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   IC61704
   
   
 * REPORTED COMPONENT NAME
   DATAPOWER
   
   
 * REPORTED COMPONENT ID
   DP1234567
   
   
 * REPORTED RELEASE
   373
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2009-06-24
   
   
 * CLOSED DATE
   2009-07-20
   
   
 * LAST MODIFIED DATE
   2009-07-20
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   DATAPOWER
   
   
 * FIXED COMPONENT ID
   DP1234567
   
   

APPLICABLE COMPONENT LEVELS
 * R373 PSY
   UP