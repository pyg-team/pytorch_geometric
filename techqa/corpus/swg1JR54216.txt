Title: IBM JR54216: INFORMATION SERVER 11.3 SERVICES STARTUP EXTREMELY SLOW WITH ORACLE METADATA REPOSITORY - United States

Text:
  FIXES ARE AVAILABLE
Download ISF roll-up 5 for InfoSphere Information Server Version 11.3.1.2 [http://www-01.ibm.com/support/docview.wss?uid=swg24042883]
Download ISF roll-up 3 for InfoSphere Information Server Version 11.5.0.1 [http://www-01.ibm.com/support/docview.wss?uid=swg24042884]
Download ISF roll-up 6 for InfoSphere Information Server Version 11.3.1.2 [http://www-01.ibm.com/support/docview.wss?uid=swg24043173]
Download ISF roll-up 5 for InfoSphere Information Server Version 11.5.0.1 [http://www-01.ibm.com/support/docview.wss?uid=swg24043279]
Download ISF roll-up 7 for InfoSphere Information Server Version 11.3.1.2 [http://www-01.ibm.com/support/docview.wss?uid=swg24043280]
Download ISF roll-up 6 for InfoSphere Information Server Version 11.5.0.1 [http://www-01.ibm.com/support/docview.wss?uid=swg24043373]
Download ISF roll-up 8 for InfoSphere Information Server Version 11.3.1.2 [http://www-01.ibm.com/support/docview.wss?uid=swg24044352]


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  The InfoSphere Information Server 11.3 services tier takes an
   excessive time to initialize.  If you look in the application
   server's SystemOut.log file, you can find an entry similar to:
   
   [8/24/15 8:52:58:506 EDT] 00000049 ThreadMonitor W   WSVR0605W:
   Thread "server.startup : 2" (00000068) has been active for
   706327 milliseconds and may be hung.  There is/are 2 thread(s)
   in total in the server that may be hung.
       at java.net.SocketInputStream.socketRead0(Native Method)
       at
   java.net.SocketInputStream.read(SocketInputStream.java:163)
       at
   java.net.SocketInputStream.read(SocketInputStream.java:133)
       at com.ibm.isf.jdbc.oracle.net8.ddf.f(Unknown Source)
       at com.ibm.isf.jdbc.oracle.net8.ddf.ac(Unknown Source)
       at com.ibm.isf.jdbc.oracle.net8.ddf.a(Unknown Source)
       at com.ibm.isf.jdbc.oracle.net8.ddd.z(Unknown Source)
       at com.ibm.isf.jdbc.oracle.net8.ddk.c(Unknown Source)
       at com.ibm.isf.jdbc.oracle.ddal.a(Unknown Source)
       at com.ibm.isf.jdbc.oracle.ddal.a(Unknown Source)
       at com.ibm.isf.jdbc.oracle.ddam.t(Unknown Source)
       at com.ibm.isf.jdbc.oraclebase.dde3.w(Unknown Source)
       at com.ibm.isf.jdbc.oraclebase.dde3.v(Unknown Source)
       at com.ibm.isf.jdbc.oraclebase.dde3.a(Unknown Source)
       at
   com.ibm.isf.jdbc.oraclebase.BaseDatabaseMetaData.getTables(Unkno
   wn Source)
       at com.ibm.isf.jdbcx.oraclebase.ddf.getTables(Unknown
   Source)
       at
   com.ibm.ws.rsadapter.jdbc.WSJdbcDatabaseMetaData.getTables(WSJdb
   cDatabaseMetaData.java:1813)
       at
   com.ibm.iis.isf.reporting.server.engine.impl.jreport.JReportUtil
   ities.testDB2Bound(JReportUtilities.java:507)
       at
   com.ibm.iis.isf.reporting.server.engine.impl.jreport.JReportEngi
   neImpl.getRptServer(JReportEngineImpl.java:1483)
       at
   com.ibm.iis.isf.reporting.server.engine.impl.jreport.JReportEngi
   neImpl.getRptServer(JReportEngineImpl.java:1460)
       at
   com.ibm.iis.isf.reporting.server.engine.impl.jreport.JReportEngi
   neImpl.<init>(JReportEngineImpl.java:180)
       at
   com.ibm.iis.isf.reporting.server.engine.impl.jreport.JReportEngi
   neFactory.connectToReportingEngine(JReportEngineFactory.java:27)
       at
   com.ibm.iis.isf.reporting.server.engine.ReportingEngineManager.c
   onnectToProvider(ReportingEngineManager.java:123)
       at
   com.ibm.iis.isf.reporting.server.engine.ReportingEngineManager.g
   etReportingEngine(ReportingEngineManager.java:184)
       at
   com.ibm.iis.isf.reporting.server.impl.AbstractDAO.getReportingEn
   gine(AbstractDAO.java:1461)
       at
   com.ibm.iis.isf.reporting.server.impl.ReportDAO.initializeOnStar
   tup(ReportDAO.java:2079)
       at
   com.ibm.iis.isf.reporting.server.impl.ReportingServiceInitializa
   tionBean.onStartup(ReportingServiceInitializationBean.java:80)
       at
   com.ibm.iis.isf.admin.server.impl.ISFAdminBean.callInitializatio
   nBeans(ISFAdminBean.java:168)
       at
   com.ibm.iis.isf.admin.server.impl.ISFAdminBean.onStartup(ISFAdmi
   nBean.java:81)
       at
   com.ibm.iis.isf.admin.local.LocalISFAdmin$1.run(LocalISFAdmin.ja
   va:39)
   
   This error indicates that the system is waiting for the Oracle
   JDBC driver to return descriptions of tables in the xmeta schema
   for certain types.  Normally, this command should take very
   little time.
   
   
    
   
   

LOCAL FIX
 *  Updating the Oracle jdbc driver that is used by WebSphere fixed
   the issue.
   
   
    
   
   

PROBLEM SUMMARY
 *  ****************************************************************
   PROBLEM DESCRIPTION:
   The InfoSphere Information Server 11.3 services tier takes an
   excessive time to initialize.  If you look in the application
   server's SystemOut.log file, you can find an entry similar to:
   
   [8/24/15 8:52:58:506 EDT] 00000049 ThreadMonitor W   WSVR0605W:
   Thread "server.startup : 2" (00000068) has been active for
   706327 milliseconds and may be hung.  There is/are 2 thread(s)
   in total in the server that may be hung.
       at java.net.SocketInputStream.socketRead0(Native Method)
       at
   java.net.SocketInputStream.read(SocketInputStream.java:163)
       at
   java.net.SocketInputStream.read(SocketInputStream.java:133)
       at com.ibm.isf.jdbc.oracle.net8.ddf.f(Unknown Source)
       at com.ibm.isf.jdbc.oracle.net8.ddf.ac(Unknown Source)
       at com.ibm.isf.jdbc.oracle.net8.ddf.a(Unknown Source)
       at com.ibm.isf.jdbc.oracle.net8.ddd.z(Unknown Source)
       at com.ibm.isf.jdbc.oracle.net8.ddk.c(Unknown Source)
       at com.ibm.isf.jdbc.oracle.ddal.a(Unknown Source)
       at com.ibm.isf.jdbc.oracle.ddal.a(Unknown Source)
       at com.ibm.isf.jdbc.oracle.ddam.t(Unknown Source)
       at com.ibm.isf.jdbc.oraclebase.dde3.w(Unknown Source)
       at com.ibm.isf.jdbc.oraclebase.dde3.v(Unknown Source)
       at com.ibm.isf.jdbc.oraclebase.dde3.a(Unknown Source)
       at
   com.ibm.isf.jdbc.oraclebase.BaseDatabaseMetaData.getTables(Unkno
   wn Source)
       at com.ibm.isf.jdbcx.oraclebase.ddf.getTables(Unknown
   Source)
       at
   com.ibm.ws.rsadapter.jdbc.WSJdbcDatabaseMetaData.getTables(WSJdb
   cDatabaseMetaData.java:1813)
       at
   com.ibm.iis.isf.reporting.server.engine.impl.jreport.JReportUtil
   ities.testDB2Bound(JReportUtilities.java:507)
       at
   com.ibm.iis.isf.reporting.server.engine.impl.jreport.JReportEngi
   neImpl.getRptServer(JReportEngineImpl.java:1483)
       at
   com.ibm.iis.isf.reporting.server.engine.impl.jreport.JReportEngi
   neImpl.getRptServer(JReportEngineImpl.java:1460)
       at
   com.ibm.iis.isf.reporting.server.engine.impl.jreport.JReportEngi
   neImpl.<init>(JReportEngineImpl.java:180)
       at
   com.ibm.iis.isf.reporting.server.engine.impl.jreport.JReportEngi
   neFactory.connectToReportingEngine(JReportEngineFactory.java:27)
       at
   com.ibm.iis.isf.reporting.server.engine.ReportingEngineManager.c
   onnectToProvider(ReportingEngineManager.java:123)
       at
   com.ibm.iis.isf.reporting.server.engine.ReportingEngineManager.g
   etReportingEngine(ReportingEngineManager.java:184)
       at
   com.ibm.iis.isf.reporting.server.impl.AbstractDAO.getReportingEn
   gine(AbstractDAO.java:1461)
       at
   com.ibm.iis.isf.reporting.server.impl.ReportDAO.initializeOnStar
   tup(ReportDAO.java:2079)
       at
   com.ibm.iis.isf.reporting.server.impl.ReportingServiceInitializa
   tionBean.onStartup(ReportingServiceInitializationBean.java:80)
       at
   com.ibm.iis.isf.admin.server.impl.ISFAdminBean.callInitializatio
   nBeans(ISFAdminBean.java:168)
       at
   com.ibm.iis.isf.admin.server.impl.ISFAdminBean.onStartup(ISFAdmi
   nBean.java:81)
       at
   com.ibm.iis.isf.admin.local.LocalISFAdmin$1.run(LocalISFAdmin.ja
   va:39)
   
   This error indicates that the system is waiting for the Oracle
   JDBC driver to return descriptions of tables in the xmeta schema
   for certain types.  Normally, this command should take very
   little time.
   
   Even with a fixed driver, there are cases where a query to an
   Oracle repository takes an excessive amount of time.
   
   The problem is not present in Information Server 11.5.0.0.
   ****************************************************************
   RECOMMENDATION:
   Install ISF 11.3 Rollup patch 3 to get the fix.
   ****************************************************************
   
   
    
   
   

PROBLEM CONCLUSION
 *  Apply patch to update the driver. In addition to the new driver
   which is sufficient to solve the problem in most cases,  a code
   change was made to only query the database metadata for tables,
   aliases and synonyms if the database type is DB2.  Since this
   call was put in to detect when a customer had applied a DB2
   patch and didn't run the bind command, we don't need to call it
   for Oracle (or SQL Server for that matter) and apparently in
   some cases Oracle is extremely slow to respond to the query.
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   JR54216
   
   
 * REPORTED COMPONENT NAME
   WIS DATASTAGE
   
   
 * REPORTED COMPONENT ID
   5724Q36DS
   
   
 * REPORTED RELEASE
   B31
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2015-09-10
   
   
 * CLOSED DATE
   2015-10-20
   
   
 * LAST MODIFIED DATE
   2015-10-20
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   WIS DATASTAGE
   
   
 * FIXED COMPONENT ID
   5724Q36DS
   
   

APPLICABLE COMPONENT LEVELS
 * RB31 PSY
   UP