Title: IBM Placing a queue manager in STANDBY status - United States

Text:
MQ400L2 TECHNOTE (FAQ)

QUESTION
 How do you get an instance of the queue manager to be in STANDBY status? 

CAUSE

If you do not specify *YES for parameter STANDBY for the "active" queue manager at
startup on the STRMQM command, then you will not be able to place the other queue
manager instance(s) in "standby" mode. Message AMQ7260 will be generated:

Message ID . . . . . . : AMQ7260 Severity . . . . . . . : 00
Message type . . . . . : Diagnostic 

Message . . . . : WebSphere MQ queue manager 'TEST' is already running elsewhere. It does not permit standby instances.
Cause . . . . . : WebSphere MQ queue manager 'TEST' could not obtain a lock on its data in the file-system when it was starting. The lock is held by the active instance of the queue manager. The active instance of the queue manager was started without permitting standby instances. 
Recovery . . . : If you are trying to start multiple instances of a queuemanager to make it highly available, you must start all of the instances using strmqm -x.
Technical Description . . . . . . . . : None.


ANSWER
 

Server1:

Issue ENDMQM for the active queue manager, to terminate all instances: 

End Message Queue Manager (ENDMQM) 

Type choices, press Enter. 

Message Queue Manager name . . . > 'TEST' 

Option . . . . . . . . . > *IMMED *CNTRLD, *IMMED, *WAIT...
Instance To End . . . . . . *ALL *ALL, *STANDBY 
Allow Switchover . . . . . . *NO *NO, *YES 
Reconnect . . . . . . . . . . *NO *NO, *YES
End connected jobs . . . . . . . > *YES *NO, *YES 
Record MQ Object Image . . . . . *YES *NO, *YES
Timeout interval (seconds) . . . 30 0-3600 

Issue STRMQM MQMNAME(TEST) STANDBY(*YES) for the active queue manager to 
allow STANDBY instance of the queue manager. The status of the queue manager will 
go from INACTIVE to ACTIVE. 

Start Message Queue Manager (STRMQM) 

Type choices, press Enter. 

Message Queue Manager name . . . > 'TEST'

Redefine system objects . . . . *NO *YES, *NO
Fix directories . . . . . . . . *NO *YES, *NO
Startup Status Detail . . . . . *ALL *ALL, *MIN 
Service startup . . . . . . . . *YES *YES, *NO
Perform replay only . . . . . . *NO *YES, *NO
Activate backup . . . . . . . . *NO *YES, *NO
Permit Standby Queue Manager . . *YES *YES, *NO 


SERVER2:

On Server2, issue STRMQM MQMNAME(TEST) STANDBY(*YES) to switch the status of 
the instance queue manager from ELSEWHERE to STANDBY.

Start Message Queue Manager (STRMQM) 

Type choices, press Enter. 

Message Queue Manager name . . . > 'TEST'

Redefine system objects . . . . *NO *YES, *NO
Fix directories . . . . . . . . *NO *YES, *NO
Startup Status Detail . . . . . *ALL *ALL, *MIN 
Service startup . . . . . . . . *YES *YES, *NO
Perform replay only . . . . . . *NO *YES, *NO
Activate backup . . . . . . . . *NO *YES, *NO
Permit Standby Queue Manager . . *YES *YES, *NO


The following messages will be found in the enduser joblog:

WebSphere MQ queue manager 'TEST' starting. 
A standby instance of queue manager 'TEST' has been started. The active instance is 
running elsewhere. Standby queue manager. 

Message ID . . . . . . : AMQ7269 
Severity . . . . . . . : 00
Message type . . . . . : Diagnostic 
Message . . . . : A standby instance of queue manager 'TEST' has been started. The active instance is running elsewhere.
Cause . . . . . : You tried to start the queue manager but it is already running elsewhere. A standby instance of the queue manager started, ready to become the active instance if the existing active instance fails. 
Recovery . . . : None.
Technical Description . . . . . . . . : None. 


Message ID . . . . . . : AMQ8478 
Severity . . . . . . . : 40
Message type . . . . . : Diagnostic 
Message . . . . : Standby queue manager.
Cause . . . . . : The queue manager is a standby queue manager instance. You must use the active instance of a queue manager to administer it.
Recovery . . . : Re-issue the command using the active instance of the queue manager.
Technical Description . . . . . . . . : None. 

 

PRODUCT ALIAS/SYNONYM
 WMQ MQ