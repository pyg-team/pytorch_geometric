Title: IBM IC51382: THREADED MCA PROCESS HANG, UNEXPECTED TERMINATION AND LISTENER HANG - United States

Text:
  FIXES ARE AVAILABLE
Download and Installation of WebSphere MQ for HP NonStop Server, V5.3.1 [http://www-01.ibm.com/support/docview.wss?uid=swg24014780]
WebSphere MQ for HP NonStop Server V5.3.1 fix pack 5.3.1.6 [http://www-01.ibm.com/support/docview.wss?uid=swg24025461]
WebSphere MQ for HP NonStop Server V5.3.1 fix pack 5.3.1.7 [http://www-01.ibm.com/support/docview.wss?uid=swg24027369]
WebSphere MQ for HP NonStop Server V5.3.1 fix pack 5.3.1.8 [http://www-01.ibm.com/support/docview.wss?uid=swg24030009]


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  Some socket operations done by a threaded responder channel
   cause the
   entire MCA process to block for their duration.  Other threaded
   channels
   within thesame MCA process can be temporarily blocked. When
   running with
   HP IPV6 without T1265ABJ installed, this block can be permanent,
   causing
   all thread channels within the affected MCA to be permanently
   blocked.
   This MCA block can also affect the TCPIP listener (runmqlsr)
   causing new
   incoming channel connections to hang. When a listener hangs, an
   SCF
   display can show sockets in CLOSE-WAIT state. In some cases the
   affected MCA will abnormally terminate.
   No ZZSA (saveabend) files are produced
   
   
    
   
   

LOCAL FIX
 *  n/a
   
   
    
   
   

PROBLEM SUMMARY
 *   WMQ TCP Listener becomes nonresponsive to new
   incoming connection requests from remote
   channels after a multi-threaded MCA block.
   Other responder channels running in the blocked
   MCA process will no longer function once the
   problem occurs.   Problem occurs using TCP/IP
   IPV6 T1265 AAQ on H-Series systems.  SCF
   display shows sockets in CLOSE-WAIT state.
   
   
    
   
   

PROBLEM CONCLUSION
 *   Problem is caused by a timing defect in IPV6
   (T1265 level AAQ)on H-Series that can, under
   some timing conditions, prevent the delivery
   of socket data to a Multi-threaded MCA.
   Further, a defect within WMQ channel code
   that causes a process block (rather than a
   thread block) to occur, prevents all
   channels within the affected MCA from
   functioning, once this condition occurs.
   Further, the blocked MCA may be unable to
   respond to the Listener process, causing the Listener to become
   non-responsive.
   HP have released SPR T1265ABJ to address the TCPIP IPV6 defect.
   Within WMQ, multi-threaded channel code has been revised to
   correctly thread-block when TCPIP data delivery is delayed,
   causing only the affected channel thread to wait for TCPIP data
   delivery.  Other active channels within the MCA process are not
   disturbed and the MCA process will continue to
   respond to Listener requests normally, preventing the
   Listener hang.
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   IC51382
   
   
 * REPORTED COMPONENT NAME
   WEBS MQ NSS ITA
   
   
 * REPORTED COMPONENT ID
   5724A3902
   
   
 * REPORTED RELEASE
   530
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2006-12-13
   
   
 * CLOSED DATE
   2007-01-30
   
   
 * LAST MODIFIED DATE
   2007-01-30
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   WEBS MQ NSS ITA
   
   
 * FIXED COMPONENT ID
   5724A3902
   
   

APPLICABLE COMPONENT LEVELS
 * R530 PSY
   UP