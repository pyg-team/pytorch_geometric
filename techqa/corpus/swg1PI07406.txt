Title: IBM PI07406: PE AGENT GETS SQL ERROR CODE -803 AFTER DB2 CONNECT MONITORING FAILS ON PE SERVER - United States

Text:
z/os  A FIX IS AVAILABLE
Obtain the fix for this APAR.


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  The following messages may appear in PE agent log
   
   2013-11-26 10:32:58.713|main     |LOGIC    |insertStreamInDB
   |ERROR: Error inserting system data for the host 'NDESA.DFA.ES',
    alias 'D5375763', code [1006] : DB2 SQL Error: SQLCODE=-803,
   SQLSTATE=23505, SQLERRMC=UIXRDB2C;0000000201, DRIVER=3.62.95,
   SQLState=<23505>, ErrorCode=<-803>. SQLCA=<AN INSERTED OR
   UPDATED VALUE IS INVALID BECAUSE INDEX IN INDEX SPACE UIXRDB2C
   CONSTRAINS COLUMNS OF THE TABLE SO NO TWO ROWS CAN CONTAIN
   DUPLICATE VALUES IN THOSE COLUMNS. RID OF EXISTING ROW IS
   X'0000000201'.. SQLCODE=-803, SQLSTATE=23505, DRIVER=3.62.95>.
   ...
   2013-11-26 10:33:00.588|main     |LOGIC    |insertStreamInDB
   |ERROR: Error inserting application data for the host
   'NDESA.DFA.ES', alias 'D5375763', code [1006] : DB2 SQL Error:
   SQLCODE=-803, SQLSTATE=23505, SQLERRMC=UIXRDB2A;0000000601,
   DRIVER=3.62.95, SQLState=<23505>, ErrorCode=<-803>. SQLCA=<AN
   INSERTED OR UPDATED VALUE IS INVALID BECAUSE INDEX IN INDEX
   SPACE UIXRDB2A CONSTRAINS COLUMNS OF THE TABLE SO NO TWO ROWS
   CAN CONTAIN DUPLICATE VALUES IN THOSE COLUMNS. RID OF EXISTING
   ROW IS X'0000000601'.. SQLCODE=-803, SQLSTATE=23505,
   DRIVER=3.62.95>.
   
   That leads to the DB2 connect data collected by the agent will
   be unavailable in online interfaces
   
   
    
   
   

LOCAL FIX
 *  N/A
   
   
    
   
   

PROBLEM SUMMARY
 *  ****************************************************************
   * USERS AFFECTED: OMEGAMON XE for DB2 PE/DB2PM                 *
   *                 users of component                           *
   *                 - PE Server subtask                          *
   ****************************************************************
   * PROBLEM DESCRIPTION: DB2 Connect monitoring data displayed   *
   *                      on user interfaces are not updated.     *
   *                      The PE Agent for DB2 Connect            *
   *                      monitoring can not provide DB2          *
   *                      Connect performance data to the         *
   *                      monitoring PE Server subtask because    *
   *                      the intended insert of the data into    *
   *                      the DB2 Connect tables fails with SQL   *
   *                      error code -803.                        *
   *                      Corresponding error messages are        *
   *                      issued to the PE Agent log.             *
   ****************************************************************
   * RECOMMENDATION: Apply this PTF                               *
   ****************************************************************
   PROBLEM SUMMARY:
   When the PE Agent for DB2 Connect monitoring tries to insert
   DB2 performance data into the DB2 Connect tables hosted by the
   monitoring PE Server subtask, SQL error code -803 is returned
   because the PE Server subtask has not deleted previously
   inserted data from the DB2 Connect tables.
   As a consequence DB2 Connect data displayed in the user
   interfaces are no longer up to date when the display is
   refreshed.
   Clearing of DB2 Connect tables can fail if resources are not
   available or access is denied.
   
   PROBLEM CONCLUSION:
   The code has been corrected. For diagnostic purposes additional
   trace points have been added to the PE Server subtask to
   capture the DB2 Connect processing in more detail.
   
   KEYWORDS:
   PE AGENT SQL -803 DB2 CONNECT MONITORING
   
   
    
   
   

PROBLEM CONCLUSION
 *  The code has been corrected. For diagnostic purposes additional
   trace points have been added to the PE Server subtask to
   capture the DB2 Connect processing in more detail.
   
   KEYWORDS:
   PE AGENT SQL -803 DB2 CONNECT MONITORING
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   PI07406
   
   
 * REPORTED COMPONENT NAME
   OM XE DB2PE/PM
   
   
 * REPORTED COMPONENT ID
   5655OPE00
   
   
 * REPORTED RELEASE
   510
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2013-12-04
   
   
 * CLOSED DATE
   2014-04-02
   
   
 * LAST MODIFIED DATE
   2014-05-02
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
    UI16660 UI16661 UI16662
   
   

MODULES/MACROS
 *  DGOVMSTR DGOVRSFI FPE@WRPA FPE@WR2C FPEVDB2I
   FPEVDB22 FPEVWRPA FPEVWR2C FPEVZMAI FPEVZRAC
   
   
    
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   OM XE DB2PE/PM
   
   
 * FIXED COMPONENT ID
   5655OPE00
   
   

APPLICABLE COMPONENT LEVELS
 * R510 PSY UI16660 [HTTPS://WWW14.SOFTWARE.IBM.COM/WEBAPP/SET2/ORDERMEDIA/SHOPCART?PTFS=UI16660]
   UP14/04/04 P F404
   
   
 * R511 PSY UI16661 [HTTPS://WWW14.SOFTWARE.IBM.COM/WEBAPP/SET2/ORDERMEDIA/SHOPCART?PTFS=UI16661]
   UP14/04/04 P F404
   
   
 * R520 PSY UI16662 [HTTPS://WWW14.SOFTWARE.IBM.COM/WEBAPP/SET2/ORDERMEDIA/SHOPCART?PTFS=UI16662]
   UP14/04/04 P F404
   
   

FIX IS AVAILABLE
 * SELECT THE PTF APPROPRIATE FOR YOUR COMPONENT LEVEL. YOU WILL BE REQUIRED TO SIGN IN. DISTRIBUTION ON PHYSICAL MEDIA IS NOT AVAILABLE IN ALL COUNTRIES.