Title: IBM ISPF abend S806 reason 00000004 in CBKRCNTL when accessing CICS BAC control file - United States

Text:
VSAM files ; Transient data queues ; Transaction IDs ; Programs ; Application groups ; Application lists ; Region properties ; 5697I9400 R111 R11E R11K 5697-I94 FMID HCBK111 JCBK11E JCBK11K kixinfo TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 You receive message text for system abend code 806 and reason code 4 (abend806 rsn4) in external function CBKRCNTL. This occurs when you choose any option 1 through 7 on ISPF panelid CBKPRGRM to access the CICS Batch Application Control for z/OS (CICS BAC) control file. 

SYMPTOM
System abend code 806, reason code 00000004 [http://publib.boulder.ibm.com/infocenter/zos/v1r13/topic/com.ibm.zos.r13.ieah700/h7scc.htm#h7scc]. Abend in external function CBKRCNTL. ISPF message ID of the last message was "CBKM051".

REXX error, , in EXEC CBKRPCRH, at line 347, reason= Incorrect call to routine, source line= cmdrc = CBKRCNTL("DOWNLOAD","cbkhead","objdata").

REXX error, , in EXEC CBKRPCRH, at line 347, reason= Incorrect call to routine, source line= cmdrc = CBKRCNTL("DOWNLOAD","cbkhead","objdata").

CAUSE
CICS BAC uses the CICS EXCI interface to access the BAC control file if the BAC agent is running in CICS. The ISPF administration interface requires the CICS SDFHEXCI library to be allocated in the user's TSO LOGON proc or to be in the system LINKLIST concatenation.

ENVIRONMENT
CICS BAC V1.1.1

DIAGNOSING THE PROBLEM
After receiving the ISPF error message...


 1. Type "TSO ISRDDN [http://publib.boulder.ibm.com/infocenter/zos/v1r13/topic/com.ibm.zos.r13.f54ug00/ispzug90149.htm#wq440]" on the command line and press the enter key. 
 2. Type "MEMBER DFHXCPRX" on the command line and press the enter key. 
 3. If you receive message text "Member not found" in the upper right hand corner of the screen, the SDFHEXCI library has not been allocated.

RESOLVING THE PROBLEM
Make sure that the CICS EXCI load library, SDFHEXCI, is available to the ISPF interface. This means it must either be in the LINKLIST or included in the TSO logon PROC used by users of the ISPF administration interface.

Note: If you add the SDFHEXCI load library to the logon PROC STEPLIB concatenation, it might have to be APF-authorized, depending on your system requirements. CICS BAC does not require SDFHEXCI to be APF-authorized, but it is possible that other TSO applications require all data sets in the STEPLIB concatenation to be APF-authorized.



RELATED INFORMATION
#Specifying access to a CICS region control file [http://publib.boulder.ibm.com/infocenter/cicsts/v4r2/topic/com.ibm.cics.bac.doc/cbka1h0015.htm?path=6_1_7_5_0#wq40]




PRODUCT ALIAS/SYNONYM
 CICS BAC CBAC