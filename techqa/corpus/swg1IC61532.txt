Title: IBM IC61532: SMO HEADER FIELDS UNAVAILABLE IN SMO WHEN USING MULTIPLE        BRANCHES FROM INPUT NODE - United States

Text:
  A FIX IS AVAILABLE
WebSphere Enterprise Service Bus V6.2.0 Fix Pack 2 (6.2.0.2) [http://www-01.ibm.com/support/docview.wss?uid=swg24024407]


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  When using multiple branches in a Mediation Flow component and
   one of the earlier branches terminates with a Callout or uses
   Service Invoke, Some SMO Header fields are unavailable in
   subsequent branches.
   
   
    
   
   

LOCAL FIX

PROBLEM SUMMARY
 *  ****************************************************************
   * USERS AFFECTED: Users of WebSphere Enterprise Service Bus    *
   *                 and WebSphere Process Server v6.2 with       *
   *                 flows that contain branches intending on     *
   *                 using the same input context.                *
   ****************************************************************
   * PROBLEM DESCRIPTION: Some mediation flows that contain a     *
   *                      branch may fail in later branches if    *
   *                      an earlier branch contains a            *
   *                      ServiceInvoke or ends in a Callout.     *
   *                                                              *
   *                      When a mediation flow contains a        *
   *                      branch, the ServiceMessageObjects at    *
   *                      the start of each branch should be      *
   *                      identical to each other, i.e. they      *
   *                      should all start with the same          *
   *                      context, header and body contents. If   *
   *                      one of the branches uses a Service      *
   *                      Invoke or ends in a Callout, the        *
   *                      ServiceMessageObject used in later      *
   *                      branches may contain the headers from   *
   *                      the end of that branch rather than      *
   *                      the start of it. In particular  the     *
   *                      SMOHeader may be restricted to the      *
   *                      fields passed through to the            *
   *                      ServiceInvoke or Callout (Operation,    *
   *                      Action, SourceNode,                     *
   *                      SourceBindingType, Interface). This     *
   *                      could cause the later branches to fail. *
   ****************************************************************
   * RECOMMENDATION: If you encounter this problem then you are   *
   *                 advised to install the fix pack which        *
   *                 contains the code update associated with     *
   *                 this APAR.                                   *
   ****************************************************************
   If using multiple branches in a Mediation Flow component and
   one of the earlier branches terminates with a Callout or uses
   Service Invoke, some SMO Header fields are unavailable in
   subsequent branches.  For example, if the input message is
   wired to both a Service Invoke and a  MessageLogger from the
   same Input Operation and the Service Invoke is called first,
   the message logger will expect all the SMO Header fields to
   be available, however they would have been removed when
   running the Service Invoke.  This may result in the following
   Error:
   
   [5/25/09 16:50:48:056 CEST] 00000034 ExceptionUtil E
   CNTR0020E: EJB
      threw an unexpected (non-declared) exception during
   invocation of method
      "transactionRequiredActivitySessionNotSupported" on bean
      "BeanId(TestApp#TestEJB.jar#Module,
      null)". Exception data:
   
   com.ibm.wsspi.sibx.mediation.flow.MediationRuntimeException:
   CWSXM1025E:
      An unexpected exception occurred when the flow was called:
   No value for
      xpath: /headers/SMOHeader/Version/Version
   
   The SMOHeader here is being restricted to the fields passed
   through to the ServiceInvoke or Callout and therefore failing
   in the Message Logger Primitive.
   
   
    
   
   

PROBLEM CONCLUSION
 *  The code was modified such that this problem no longer occurs.
   
   
   There are no known side effects associated with this fix.
   There is no known alternative workaround should you encounter
   this problem.
   
   
   This code fix was targeted to be included in the following fix
   packs:
         6.2.0 Fix Pack 2 (v6.2.0.2)
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   IC61532
   
   
 * REPORTED COMPONENT NAME
   WEB ESB FOR WIN
   
   
 * REPORTED COMPONENT ID
   5724I8200
   
   
 * REPORTED RELEASE
   612
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2009-06-19
   
   
 * CLOSED DATE
   2009-08-04
   
   
 * LAST MODIFIED DATE
   2009-08-04
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   WEB ESB FOR WIN
   
   
 * FIXED COMPONENT ID
   5724I8200
   
   

APPLICABLE COMPONENT LEVELS
 * R100 PSN
   UP
   
   
 * R200 PSN
   UP
   
   
 * R300 PSN
   UP
   
   
 * R612 PSN
   UP
   
   
 * R620 PSY
   UP