Title: IBM PI30994: OVERLAPPING URIS IN A SINGLE ODR WORKCLASS CAN CAUSE THE ODR TO SELECT THE WRONG COOKIE WHEN ATTEMPTING TO HONOR SERVERAFFINITY - United States

Text:
  FIXES ARE AVAILABLE
8.5.5.5: WebSphere Application Server V8.5.5 Fix Pack 5 [http://www-01.ibm.com/support/docview.wss?uid=swg24039425]
IBM WebSphere Virtual Enterprise Version 7.0 Fix Pack 6, also known as Version 7.0.0.6 is available for download. [http://www-01.ibm.com/support/docview.wss?uid=swg24039270]
8.5.5.6: WebSphere Application Server V8.5.5 Fix Pack 6 [http://www-01.ibm.com/support/docview.wss?uid=swg24040035]
8.5.5.7: WebSphere Application Server V8.5.5 Fix Pack 7 [http://www-01.ibm.com/support/docview.wss?uid=swg24040533]
8.5.5.8: WebSphere Application Server V8.5.5 Fix Pack 8 [http://www-01.ibm.com/support/docview.wss?uid=swg24041178]
8.5.5.9: WebSphere Application Server V8.5.5 Fix Pack 9 [http://www-01.ibm.com/support/docview.wss?uid=swg24041819]
8.5.5.10: WebSphere Application Server V8.5.5 Fix Pack 10 [http://www-01.ibm.com/support/docview.wss?uid=swg24042150]
8.5.5.11: WebSphere Application Server V8.5.5 Fix Pack 11 [http://www-01.ibm.com/support/docview.wss?uid=swg24043005]
8.5.5.12: WebSphere Application Server V8.5.5 Fix Pack 12 [http://www-01.ibm.com/support/docview.wss?uid=swg24043844]
8.5.5.13: WebSphere Application Server V8.5.5 Fix Pack 13 [http://www-01.ibm.com/support/docview.wss?uid=swg24044479]


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  When there overlapping Uniform Resource Identifiers (URIs) in a
   single On Demand Router (ODR) workclass routing to multiple
   Generic Server Clusters (GSCs) it is possible that the wrong
   session cookie will be used when attempting to honor session
   affinity.  This is especially problematic when
   RulesOverAffinity is set in which case a difference in the
   rules cluster and the presumed affinity cluster (using the
   wrong cookie) will result in the ODR breaking session affinity.
   
   
    
   
   

LOCAL FIX
 *  No workaround
   
   
    
   
   

PROBLEM SUMMARY
 *  ****************************************************************
   * USERS AFFECTED:  Any user of Generic Server Clusters with    *
   *                  multiple over-lapping URIs within a single  *
   *                  workclass that require session affinity.    *
   ****************************************************************
   * PROBLEM DESCRIPTION: Overlapping URIs result in multiple     *
   *                      JSESSIONID cookies. The wrong cookie    *
   *                      is sometimes selected breaking server   *
   *                      affinity.                               *
   ****************************************************************
   * RECOMMENDATION:                                              *
   ****************************************************************
   When using GSCs with mutltiple overlapping URIs in a single
   workclass using ODR rules to enforce session affinity can
   sometimes result in broken sessions. This is because multiple
   JSESSIONID cookies are included in the request and the
   previous ODR processing simply looked for any JSESSIONID
   cookie if one was present and used the first one found. The
   code has been changed so that the ODR prefers a cookie
   associated with the target GSC cluster over other cookies
   present on the request.
   
   
    
   
   

PROBLEM CONCLUSION
 *  Corrected the ODR logic to give preference to cookies for the
   target GSC based upon the rules present in the ODR.  This fix
   is being delivered in WVE 7.0.0.6 and WAS 8.5.5.5.
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   PI30994
   
   
 * REPORTED COMPONENT NAME
   WAS VIRTUAL ENT
   
   
 * REPORTED COMPONENT ID
   5725C9203
   
   
 * REPORTED RELEASE
   700
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2014-12-05
   
   
 * CLOSED DATE
   2015-01-27
   
   
 * LAST MODIFIED DATE
   2015-04-07
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   WAS VIRTUAL ENT
   
   
 * FIXED COMPONENT ID
   5725C9203
   
   

APPLICABLE COMPONENT LEVELS
 * R700 PSY
   UP