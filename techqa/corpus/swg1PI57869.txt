Title: IBM PI57869: WHEN USING BINDING MODE AND MQ GOES DOWN, LISTENER KEEPS TRYING TO RECONNECT REGARDLESS OF RETRY COUNT SETTING. - United States

Text:
z/os  FIXES ARE AVAILABLE
8.5.5.10: WebSphere Application Server V8.5.5 Fix Pack 10 [http://www-01.ibm.com/support/docview.wss?uid=swg24042150]
8.5.5.11: WebSphere Application Server V8.5.5 Fix Pack 11 [http://www-01.ibm.com/support/docview.wss?uid=swg24043005]
8.5.5.12: WebSphere Application Server V8.5.5 Fix Pack 12 [http://www-01.ibm.com/support/docview.wss?uid=swg24043844]
8.5.5.13: WebSphere Application Server V8.5.5 Fix Pack 13 [http://www-01.ibm.com/support/docview.wss?uid=swg24044479]


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  This behavior was introduced in level 8.5.5.2.
   When in binding mode and MQ server becomes unavailable, the
   listener keeps trying to reconnect as long as MQ server is down
   regardless of the setting for MAX.RECOVERY.RETRIES.  It also
   does that much more frequently than RECOVERY.RETRY.INTERVAL
   setting.
   
   The following exception and message is expected since MQ server
   is down:
   
   com.ibm.msg.client.jms.DetailedIllegalStateException:
   JMSWMQ1107: A problem with this connection has occur red.
    An error has occurred with the WebSphere MQ JMS connection.
    Use the linked exception to determine the cause of this error.
    at com.ibm.msg.client.wmq.common.internal.Reason.reasonToExcept
   ion(Reason.java:474)
    at com.ibm.msg.client.wmq.common.internal.Reason.createExceptio
   n(Reason.java:216)
    at com.ibm.msg.client.wmq.internal.WMQConnectionBrowser$WMQConn
   ectionBrowserShadow.consumer(WMQConnectionBrowser.java:651)
    at com.ibm.mq.jmqi.local.internal.LocalProxyConsumer.jmqiConsum
   erMethod(LocalProxyConsumer.java:222)
    Caused by: com.ibm.mq.MQException: JMSCMQ0001: WebSphere MQ
   call failed with compcode '2' ('MQCC_FAILED') reason '2161'
   ('MQRC_Q_MGR_QUIESCING').
   
   BBOJ0101I: MDB LISTENER STOPPED SUCCESSFULLY FOR MDB:
   TestEJB.jar#TestMDB, LISTENER PORT: TestListener, DESTINATION:
   queue://Test/Test.MDB
   
   This message comes out right after, but recovery count never
   goes higher than 1.
   
   BBOJ0102I: MDB LISTENER FOR MDB: TestEJB.jar#TestMDB,
   LISTENER PORT: TestListener WILL ATTEMPT TO RESTART IN 25
   SECONDS.  RECOVERY COUNT = 1.
   
   
    
   
   

LOCAL FIX
 *  n/a
   
   
    
   
   

PROBLEM SUMMARY
 *  ****************************************************************
   * USERS AFFECTED:  WebSphere Application Server V8.5 users of  *
   *                  Message Listener Ports                      *
   ****************************************************************
   * PROBLEM DESCRIPTION: Message listener ports do not honor     *
   *                      the MAX.RECOVERY.RETRIES and            *
   *                      RECOVERY.RETRY.INTERVAL settings        *
   ****************************************************************
   * RECOMMENDATION:                                              *
   ****************************************************************
   Post APAR PM98753 [http://www-01.ibm.com/support/docview.wss?uid=swg1PM98753] the algorithm that controlled automatic
   reconnection in the event of a connection failure for
   message listener ports failed to honor either of the configured
   values of the Message Listener Service custom properties
   MAX.RECOVERY.RETRIES and RECOVERY.RETRY.INTERVAL.
   Reconnection would be retried both immediately and until
   successful.
   
   
    
   
   

PROBLEM CONCLUSION
 *  The messaging component was modified to honor the
   MAX.RECOVERY.RETRIES and RECOVERY.RETRY.INTERVAL values for
   message listener ports.
   
   APAR PI57869 is currently targeted for inclusion in Fix Pack
   8.5.5.10 of WebSphere Application Server V8.5.
   
   Please refer to the Recommended Updates page for delivery
   information:
   http://www.ibm.com/support/docview.wss?rs=180&uid=swg27004980 [http://www.ibm.com/support/docview.wss?rs=180&uid=swg27004980]
   
   In addition, please refer to URL:
   http://www.ibm.com/support/docview.wss?rs=404&uid=swg27006970 [http://www.ibm.com/support/docview.wss?rs=404&uid=swg27006970]
   for Fix Pack PTF information.
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   PI57869
   
   
 * REPORTED COMPONENT NAME
   WEBSPHERE FOR Z
   
   
 * REPORTED COMPONENT ID
   5655I3500
   
   
 * REPORTED RELEASE
   850
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt / Xsystem
   
   
 * SUBMITTED DATE
   2016-02-23
   
   
 * CLOSED DATE
   2016-03-26
   
   
 * LAST MODIFIED DATE
   2016-03-26
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   WEBSPHERE FOR Z
   
   
 * FIXED COMPONENT ID
   5655I3500
   
   

APPLICABLE COMPONENT LEVELS
 * R850 PSY
   UP