Title: IBM IV75908: THE SUMMARIZATION AND PRUNING AGENT FAILS IN SUMMARIZING HISTORICAL DATA FOR THE UNIX OS AGENT "UNIX MEMORY" ATTRIBUTE GR - United States

Text:
  FIXES ARE AVAILABLE
IBM Tivoli Monitoring: Unix(R) OS Agent 6.3.0.5-TIV-ITM_UNIX-IF0002 [http://www-01.ibm.com/support/docview.wss?uid=swg24041168]
IBM Tivoli Monitoring 6.3.0 Fix Pack 6 (6.3.0-TIV-ITM-FP0006) [http://www-01.ibm.com/support/docview.wss?uid=swg24040390]


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  The Summarization and Pruning agent fails in adding new columns
   to the
    summarized historical tables for the Unix Memory group. This
   occurs
    because the existing tables are defined in the 4K DB2
   tablespace and
    the addition of memory attributes to the 6.30 FP5 UNIX OS agent
   makes
    these tables exceed such limit.
   
   Affected Platforms / Versions:
    This issue affects only the 6.30 FP5 version.
   
   Diagnostics:
    The following error messages show up in the Summarization and
   Pruning
    RAS1 log at the default tracing level:
   
     == 16092 t=work2 SQL IN ERROR :
        statement name     : Unix_Memory_H.Alt1
        SQL                : ALTER TABLE "ITMUSER"."Unix_Memory_H"
   ADD
                             "AVG_MR" DECIMAL (31, 2)
        template SQL       :
     == 16093 t=work2 SQLException occured. SQL State = 54010 , SQL
   Error
                                  Code = -670
     == 16094 t=work2 com.ibm.db2.jcc.am.SqlException: The
   statement failed
        because the row size of the resulting table would have
   exceeded the
        row size limit. Limit: "4005". Table space: "USERSPACE1"..
        SQLCODE=-670,
   
   Initial Impact:
    Medium, cannot retrieve data from summarized historical Unix
   Memory
    tables after the upgrade to 6.30 FP5
   
   Additional Keywords:
    UNIXMEM,IV67315 [http://www-01.ibm.com/support/docview.wss?uid=swg1IV67315]
   
   
    
   
   

LOCAL FIX

PROBLEM SUMMARY
 *  Missing summarized historical data for the "Unix Memory"
   attribute group after upgrade to 6.30 FP5
   
   
   After the upgrade to 6.30 FP5 the Summarization and Pruning
   Agent starts failing to add new rows to the hourly, daily,
   weekly, monthly, quarterly and yearly summarized tables for the
   "Unix Memory" attribute group in a DB2 Data Warehouse.  This is
   because of new columns added to these tables' definitions that
   make their size cross the DB2 legacy 4Kb limit.
   
   
    
   
   

PROBLEM CONCLUSION
 *  New DB2 sql scripts are provided as part of the UNIX OS Agent
   support files on the Tivoli Enterprise Portal Server to move
   these tables into the 8Kb tablespace.
   
   
   Install Actions:
   There are a set of new SQL scripts named kux_63migr_Memory_*.sql
   which will be located on the portal sever.  These files need
   to be copied to the Warehouse server and run using the steps
   documented in the Procedure section for the "System"
   summarized tables in the Appendix A "Upgrading your warehouse
   for primary key and tablespace changes" of the UNIX OS Agent
   Reference Guide.
   
   If the files are not found on the portal server, they can be
   obtained via the technote:
   http://www.ibm.com/support/docview.wss?uid=swg21964406 [http://www.ibm.com/support/docview.wss?uid=swg21964406]
   
   
   
   The fix for this APAR will be contained in the following
   maintenance packages:
   
   | FixPack    | 6.3.0-TIV-ITM-FP0006
   | InterimFix | 6.3.0.5-TIV-ITM_UNIX-IF0002
   | InterimFix | 6.3.0.5-TIV-ITM_UNIX-IF0003
   | InterimFix | 6.3.0.5-TIV-ITM_UNIX-IF0004
   | InterimFix | 6.3.0.5-TIV-ITM_UNIX-IF0005
   | InterimFix | 6.3.0.5-TIV-ITM_UNIX-IF0006
   | InterimFix | 6.3.0.5-TIV-ITM_UNIX-IF0007
   
   
    
   
   

TEMPORARY FIX
 *  Download and run the required DB2 sql scripts
   from the following technote:
   http://www.ibm.com/support/docview.wss?uid=swg21964406 [http://www.ibm.com/support/docview.wss?uid=swg21964406]
   
   
    
   
   

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   IV75908
   
   
 * REPORTED COMPONENT NAME
   ITM AGENT UNIX
   
   
 * REPORTED COMPONENT ID
   5724C040U
   
   
 * REPORTED RELEASE
   630
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt / Xsystem
   
   
 * SUBMITTED DATE
   2015-08-12
   
   
 * CLOSED DATE
   2015-09-29
   
   
 * LAST MODIFIED DATE
   2017-04-19
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   ITM AGENT UNIX
   
   
 * FIXED COMPONENT ID
   5724C040U
   
   

APPLICABLE COMPONENT LEVELS
 * R630 PSY
   UP
   
   
 * R610 PSN
   UP
   
   
 * R620 PSN
   UP
   
   
 * R621 PSN
   UP
   
   
 * R622 PSN
   UP
   
   
 * R623 PSN
   UP