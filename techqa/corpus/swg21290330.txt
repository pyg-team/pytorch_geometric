Title: IBM Collect troubleshooting data for a Java or JMS problem in WebSphere MQ for z/OS - United States

Text:
java; jms; MustGather; MustGathers; Must Gather; Collect Troubleshooting Data; MustGatherDocument; Collecting; Trouble; Shooting TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 An MQ Javaâ„¢ or Java Message Service (JMS) application is failing, and you need to collect MustGather data to find a solution. 

ENVIRONMENT
These instructions apply only to IBM MQ V9.0, MQ V8.0, V7.1 on z/OS.
First page for instructions on other operating systems:



 * IBM MQ Read First [http://www.ibm.com/support/docview.wss?uid=swg21229861]





IBM recommends using the MQ JMS classes in Java EE application servers such as WebSphere Application Server. If you are using the MQ classes for Java in a Java EE environment, review the restrictions and other considerations for their usage [http://www.ibm.com/support/docview.wss?uid=swg21266535].





RESOLVING THE PROBLEM
 

Please answer these questions about the problem and then follow the steps below:



 * What Java or JMS problem did you observe on the system?
 * What time did the Java or JMS problem start and when did it stop?
 * Were any Java exceptions reported, and did they include a Java call stack?
 * Which queue managers, queues and topics does the Java or JMS application use?



GATHER THIS MUSTGATHER DATA BEFORE CONTACTING IBM SUPPORT:


 * Collecting general data for all problems#1
 * Collecting troubleshooting data for this problem#2
 * Troubleshooting hints and tips
 * Finding the build level for the classes on the current classpath#4
 * Related Informtion 
 * Exchanging data with IBM Support#4





COLLECTING GENERAL DATA FOR ALL PROBLEMS


 *  A complete description of the problem, including the following: 
 * WebSphere MQ version, release, and maintenance level
 * Operating system version, release, and maintenance level
 * Related products version, and release levels if applicable


Back to top



COLLECTING TROUBLESHOOTING DATA FOR THIS PROBLEM


 *  Collecting troubleshooting data for this problem 

 *  Required (MustGather) data: 
 *  OS/390 and z/OS Job logs [http://www.ibm.com/support/docview.wss?uid=swg21172370#z] Dumps generated at the point of failure [http://www.ibm.com/support/docview.wss?uid=swg21173468#z] Logrec [http://www.ibm.com/support/docview.wss?uid=swg21291812] [http://www-01.ibm.com/support/docview.wss?rs=171&uid=swg21291812](JCL to get software LOGREC report) [http://www.ibm.com/support/docview.wss?rs=171&uid=swg21291812] 


 *  Optional (MustGather) data: 
 *  GTF Trace [http://www.ibm.com/support/docview.wss?uid=swg21665047] MSTR Internal Trace [http://www.ibm.com/support/docview.wss?uid=swg21665092] CHIN Trace [http://www.ibm.com/support/docview.wss?uid=swg21665093] WebSphere MQ Standalone Base Java Class Trace [http://www.ibm.com/support/docview.wss?uid=swg21174924#Javat] Enabling Java Message Service (JMS) Trace for WebSphere Application Server [http://www.ibm.com/support/docview.wss?uid=swg21199176] Path and CLASSPATH settings 



Back to top

 



TROUBLESHOOTING HINTS AND TIPS


 * Search the WebSphere MQ Support site [http://www.ibm.com/support/entry/portal/websphere/websphere_mq?productContext=24824631] for known problems using symptoms like the message number and error codes.
 * Gather the documentation and work with the WebSphere MQ Support Team to resolve your problem.
 * The majority of WebSphere MQ Java failures are caused by setup / configuration problems. The path classpath and environment variables must be configured correctly. Please look at the Related Information section for more information.
 * The "java.lang.NoClassDefFoundError" is normally a classpath problem.
 * Java client connectivity issues can be treated just like any other channel failure.
 * Make sure that your Queue Connection Factory (QCF), or Topic Connection Factory (TCF) is configured to connect to the server machine where your queue manager resides.
 * Verify that the queue manager (QMGR), and listener programs are running.
 * Verify that the server connection channel is defined on the server to support the queue and topic connection
 * Test the client connection using WebSphere MQ Java Client or "C" client sample programs.
 * Try a TCP/IP ping from client to server.


Back to top



FINDING THE BUILD LEVEL FOR THE CLASSES ON THE CURRENT CLASSPATH:


 *  Issue the following command 
 *  java com.ibm.mq.MQJavaLevel 
 * or
 *  java com.ibm.mq.jms.MQJMSLevel
   


FINDING THE BUILD LEVEL FOR A JAR FILES IN A SPECIFIC DIRECTORY:
 * Change to the directory containing the jars, and issue: 
 *  java -cp com.ibm.mq.jar com.ibm.mq.MQJavaLevel 
 * or
 *  java -cp com.ibm.mqjms.jar:com.ibm.mq.jar com.ibm.mq.jms.MQJMSLevel 
   
 * If you receive java.lang.NoClassDefFoundError for MQJavaLevel or MQJMSLevel, you need provide a path to the class. You can use one of the following methods:
 *  Specify the CLASSPATH in the command: 
   java -cp path/com.ibm.mq.jar com.ibm.mq.MQJavaLevel 
   where path is the directory path which contains the jar file of interest.
   
   
    *  For Example: 
    * 
    *  java -cp ./com.ibm.mq.jar com.ibm.mq.MQJavaLevel
   
   
   gives version information for the com.ibm.mq.jar file in the current 
   directory 
   
   or 
   
   java -cp /usr/lpp/mqm/V6R0M0/java/lib/com.ibm.mq.jar 
   com.ibm.mq.MQJavaLevel 
   
   (on one line) gives version information for the file /usr/lpp/mqm/V6R0M0/java/lib/com.ibm.mq.jar 
   
   Set up the CLASSPATH and LIBPATH environment variablesas described in the Using Java manual, to match the settings used by the application or WebSphere Application Server. The "env" command in OMVS will show you what your current settings are.
   If you need to set the variables for your OMVS session, the following export commands are an example of what to issue from the OMVS command line or add to your .profile:
   
   export LIBPATH=/usr/lpp/mqm/V6R0M0/java/lib:$LIBPATH
   export CLASSPATH=/usr/lpp/mqm/V6R0M0/java/lib/com.ibm.mq.jar:$CLASSPATH
   export CLASSPATH=/usr/lpp/mqm/V6R0M0/java/lib/com.ibm.mqjms.jar:$CLASSPATH 
   
   
   where /usr/lpp is an install directory that may be different for your environment. These variables are the minimum needed to display the levels, but the run-time CLASSPATH will contain other libraries.
   
   



Back to top

 



RELATED INFORMATION


 * Environment variables relevant to IBM MQ classes for Java [https://www.ibm.com/support/knowledgecenter/SSFKSJ_9.0.0/com.ibm.mq.dev.doc/q030610_.htm]
 * Using WebSphere Application Server with WebSphere MQ [https://www.ibm.com/support/knowledgecenter/prodconn_1.0.0/com.ibm.scenarios.wmqwasusing.doc/topics/planning.htm]
 * Connecting WebSphere Application Server to WebSphere MQ [http://www.ibm.com/support/knowledgecenter/prodconn_1.0.0/com.ibm.scenarios.wmqwas101.doc/topics/scenario_overview.htm]
 * Using WebSphere MQ V7 as JMS Provider for WebSphere Application Server v7, V8.0, and V8.5, and MQ 9.0 for WAS V9.0 [http://www.ibm.com/support/docview.wss?uid=swg27016505] 
 * Using channel exit in WebSphere MQ classes for Java [http://www.ibm.com/support/knowledgecenter/SSFKSJ_8.0.0/com.ibm.mq.dev.doc/q031030_.htm]
 * Using WebSphere MQ classes for JMS [http://www.ibm.com/support/knowledgecenter/SSFKSJ_8.0.0/com.ibm.mq.pro.doc/q031930_.htm]
 * Introduction to WebSphere MQ transport for SOAP [http://www.ibm.com/support/knowledgecenter/SSFKSJ_8.0.0/com.ibm.mq.dev.doc/q032900_.htm]


Back to top



EXCHANGING DATA WITH IBM SUPPORT


 * See Exchanging information with IBM Technical Support [http://www.ibm.com/support/docview.wss?uid=swg21392217] for FTP and E-mail instructions using the IBM Enhanced Customer Data Repository (EcuRep).
 *  Go to the Service Request page [https://www.ibm.com/support/servicerequest/Home.action] to open or update a problem.
   Note: Always update your Service Request (problem record) to indicate that data has been sent.

If you need to speak to an IBM technical support representative call your country representative. [http://www.ibm.com/planetwide] If you need to speak to an IBM technical support representative in the US call 1-800-IBM-SERV. 



Back to top

 



Cross reference information Segment Product Component Platform Version Edition Business Integration WebSphere MQ Documentation OS/390, z/OS Business Integration IBM MQ 
PRODUCT ALIAS/SYNONYM
 WMQ MQ IBMMQ