Title: IBM PM63580: SIBUS LINKS REMAIN IN DELETE_PENDING STATE ALONG WITH CWSIP0065I MESSAGE IN THE SYSTEMOUT.LOG - United States

Text:
  FIXES ARE AVAILABLE
8.5.0.1: WebSphere Application Server V8.5 Fix Pack 1 [http://www-01.ibm.com/support/docview.wss?uid=swg24033606]
7.0.0.27: WebSphere Application Server V7.0 Fix Pack 27 [http://www-01.ibm.com/support/docview.wss?uid=swg24033882]
8.5.0.2: WebSphere Application Server V8.5 Fix Pack 2 [http://www-01.ibm.com/support/docview.wss?uid=swg24034672]
8.0.0.6: WebSphere Application Server V8.0 Fix Pack 6 [http://www-01.ibm.com/support/docview.wss?uid=swg24034673]
7.0.0.29: WebSphere Application Server V7.0 Fix Pack 29 [http://www-01.ibm.com/support/docview.wss?uid=swg24034966]
8.0.0.7: WebSphere Application Server V8.0 Fix Pack 7 [http://www-01.ibm.com/support/docview.wss?uid=swg24035457]
6.1.0.47: WebSphere Application Server V6.1 Fix Pack 47 [http://www-01.ibm.com/support/docview.wss?uid=swg24035508]
8.0.0.8: WebSphere Application Server V8.0 Fix Pack 8 [http://www-01.ibm.com/support/docview.wss?uid=swg24036729]
7.0.0.31: WebSphere Application Server V7.0 Fix Pack 31 [http://www-01.ibm.com/support/docview.wss?uid=swg24036768]
7.0.0.27: Java SDK 1.6 SR13 FP2 Cumulative Fix for WebSphere Application Server [http://www-01.ibm.com/support/docview.wss?uid=swg24035324]
7.0.0.33: WebSphere Application Server V7.0 Fix Pack 33 [http://www-01.ibm.com/support/docview.wss?uid=swg24037573]
8.0.0.9: WebSphere Application Server V8.0 Fix Pack 9 [http://www-01.ibm.com/support/docview.wss?uid=swg24037574]
7.0.0.35: WebSphere Application Server V7.0 Fix Pack 35 [http://www-01.ibm.com/support/docview.wss?uid=swg24038310]
8.0.0.10: WebSphere Application Server V8.0 Fix Pack 10 [http://www-01.ibm.com/support/docview.wss?uid=swg24039242]
7.0.0.37: WebSphere Application Server V7.0 Fix Pack 37 [http://www-01.ibm.com/support/docview.wss?uid=swg24039338]
8.0.0.11: WebSphere Application Server V8.0 Fix Pack 11 [http://www-01.ibm.com/support/docview.wss?uid=swg24040425]
7.0.0.39: WebSphere Application Server V7.0 Fix Pack 39 [http://www-01.ibm.com/support/docview.wss?uid=swg24041013]
8.0.0.12: WebSphere Application Server V8.0 Fix Pack 12 [http://www-01.ibm.com/support/docview.wss?uid=swg24041590]
7.0.0.41: WebSphere Application Server V7.0 Fix Pack 41 [http://www-01.ibm.com/support/docview.wss?uid=swg24041931]
8.0.0.13: WebSphere Application Server V8.0 Fix Pack 13 [http://www-01.ibm.com/support/docview.wss?uid=swg24042746]
7.0.0.43: WebSphere Application Server V7.0 Fix Pack 43 [http://www-01.ibm.com/support/docview.wss?uid=swg24043400]
8.0.0.14: WebSphere Application Server V8.0 Fix Pack 14 [http://www-01.ibm.com/support/docview.wss?uid=swg24044096]
7.0.0.45: WebSphere Application Server V7.0 Fix Pack 45 [http://www-01.ibm.com/support/docview.wss?uid=swg24044551]
8.0.0.15: WebSphere Application Server V8.0 Fix Pack 15 [http://www-01.ibm.com/support/docview.wss?uid=swg24044734]
6.1.0.45: Java SDK 1.5 SR14 Cumulative Fix for WebSphere Application Server [http://www-01.ibm.com/support/docview.wss?uid=swg24033270]
6.1.0.47: Java SDK 1.5 SR16 Cumulative Fix for WebSphere Application Server [http://www-01.ibm.com/support/docview.wss?uid=swg24035649]


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  Error Description?
   CWSIP0065I message keeps on occurring in the logs after
   selecting the SIBus link by deleting the foreign bus
   connections on both ends. It never deletes the links.
   .
   SystemOut.log keeps on throwing the following messages:
   
   SibMessage    I   [:] CWSIP0065I: The local Link <SIB_Link>
   with UUID 971342B1428C64C109CDF3E7 has been marked for deletion.
   .
   The CWSIP0065I will appear each time the message engine is
   restarted and it never delete the SIB_Link.
   .
   recreation scenation:
   -------------
   1. Create a WebSphere Application Server Network Deployment
   edition cell with a single node and two application servers
   "server1" and "server2" (_not_ configured as cluster).
   2. Create two buses "bus1" and "bus2".
   3. Add server1 as a member of bus1 and server2 as member of
   bus2. Use a data store and let Application Server create a
   default data source.
   4. Create a foreign bus connection between bus1 and bus2. When
   configuring the link on both ends, use "Configure a foreign bus
   in the local cell" (so that there is no need configure the
   provider endpoints explicitly).
   5. Save the configuration, synchronize the node and start the
   server.
   6. Wait for the messaging engines to start.
   7. In the administrative console, check that the SIBus link is
   started and working correctly.
   8. Delete the SIBus link by deleting the foreign bus
   connections on both ends.
   9. Save the configuration and synchronize the node. At this
   point, the following messages should appear in the
   SystemOut.log file of both servers:
   
   SibMessage    I   [:] CWSID0019I: Configuration reload is
   starting for messaging engine <ME1>.
   .
   SibMessage    I   [:] CWSIP0065I: The local Link bus1:bus2 with
   UUID <UUID> has been marked for deletion.
   
   SibMessage    I   [:] CWSID0020I: Configuration reload is
   complete for messaging engine <ME1>
   .
   SibMessage    I   [<bus>] CWSIT0033I: The service integration
   bus link TestLink
   from messaging engine <ME_name1> in bus <bus name1>  to
   messaging engine <ME2>  in bus <bus name2> stopped.
   .
   10. Restart the two application servers. The following messages
   appear
   in the SystemOut.log file of both servers:
   
   00000029 SibMessage    I   [<bus>] CWSIP0212I: Messaging engine
   <ME1> on bus bus1 is starting to reconcile the WCCM destination
   and link configuration.
   
   SibMessage    I   <bus1>] CWSIP0065I: The local Link bus1:bus2
   with UUID <UUID> has been marked for deletion.
   
   SibMessage    I   [<bus1> CWSIP0213I: Messaging engine <ME1> on
   bus bus1 has finished reconciling the WCCM destination and link
   configuration.
   
   The CWSIP0065I will appear each time the message engine is
   restarted.
   
   
    
   
   

LOCAL FIX
 *  Local Fix&#65496;
   None
   
   
    
   
   

PROBLEM SUMMARY
 *  ****************************************************************
   * USERS AFFECTED:  Users of the default messaging provider     *
   *                  for                                         *
   *                  IBM WebSphere Application Server            *
   ****************************************************************
   * PROBLEM DESCRIPTION: In a WebSphere Application Server       *
   *                      Service Integration Bus, when a SIB     *
   *                      link is deleted, the state of the       *
   *                      link changes to DELETE_PENDING state    *
   *                      but never actually is deleted.          *
   *                      However, the entry for the              *
   *                      corresponding bus link would be         *
   *                      deleted in the configuration file.      *
   ****************************************************************
   * RECOMMENDATION:                                              *
   ****************************************************************
   When the SIB link is deleted, the state of the link changes to
   DELETE_PENDING state and we see an entry in the SystemOut log
   indicating this. The corresponding entry of the bus link
   would be deleted in the configuration file successfully, but,
   the link would still be in DELETE_PENDING state and never gets
   deleted. You would see the following entry in the SystemOut
   logs on every restart which indicates that the link is still
   in DELETE_PENDING state -
   CWSIP0063I: The local destination <bus_link_name> with UUID
   <bus_link_UUID> has been marked for deletion.
   The repeated entries of the above exception after every
   restart would clearly indicate that the bus link is not yet
   deleted/removed from the message store. A dump of message
   store after the deletion of the Bus link indicates that the
   message store still contains entries related to the Bus link.
   However, the entry would be correctly flagged with
   toBeDeleted=true.
   
   
    
   
   

PROBLEM CONCLUSION
 *  The solution involves flushing the streams related to the bus
   link. This will result in the successful completion of the
   deletion process of the bus link, and would avoid CWSIP0063I
   since the bus link is completely deleted.
   
   The fix for this APAR is currently targeted for inclusion in
   fix packs 6.1.0.45, 7.0.0.27, 8.0.0.6, 8.5.0.1. Please refer
   to the Recommended Updates page for delivery information:
   http://www.ibm.com/support/docview.wss?rs=180&uid=swg27004980 [http://www.ibm.com/support/docview.wss?rs=180&uid=swg27004980]
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   PM63580
   
   
 * REPORTED COMPONENT NAME
   WAS SIB & SIBWS
   
   
 * REPORTED COMPONENT ID
   620800101
   
   
 * REPORTED RELEASE
   300
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2012-04-30
   
   
 * CLOSED DATE
   2012-08-29
   
   
 * LAST MODIFIED DATE
   2012-08-29
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   WAS SIB & SIBWS
   
   
 * FIXED COMPONENT ID
   620800101
   
   

APPLICABLE COMPONENT LEVELS
 * R300 PSY
   UP
   
   
 * R800 PSY
   UP