Title: IBM Query Studio Filter on long text string skips strings with special characters - United States

Text:
 TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 We have noticed an issue when using Query Studio to filter on a large text field that contains special characters (carriage returns, special hyphens, etc) in Oracle 10g.

If we do a 'search' on the field for entries 'Containing all keywords' for 'low', 'potency', 'microparticle', Query Studio returns 11 rows, which is correct. However, if we then select these 11 rows, the resulting query from Query Studio only returns 1 row. 

SYMPTOM
Query studio report doesn't inlclude data selected in filter prompt


CAUSE
In the Select and Search prompt, Cognos emits a where clause like "[string Field] contains ('searchstring'). Oracle is able to process the strings to retrieve the rows. However, when Query Studio attempts to use this to retreive the data, it emits a where clause like "[string Field] in ('String field retrieved from select and search prompt','String 2',...etc). Oracle is unable to match the full string when the string contains special characters.

RESOLVING THE PROBLEM
The ideal solution here is to adjust the FM model so that the 

[String_Field] triggers a filter on the unique row ID instead. We'd do this by 
selecting the [String Field] dataitem in the FM model, and setting the 
"Filter Item Reference" (in the properties, under Prompt Info) to 
the dataitem that represents the unique rowID . What this does is allow us to use the select and search 
prompt to select the rows we want, but the filter for the report will 
be based on the unique ID of the rows we selected. In addition 
to resolving the problem, it should also make the query run much, much 
faster.