Title: IBM PM06058: CBKGSEOR CBKSPX66 EXIT GLUE XEISPOUT DFHAP0701 ABEND ASRJ AKEJ - United States

Text:
z/os  A FIX IS AVAILABLE
Obtain the fix for this APAR.


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  Initializing CICS Batch Application Control for z/OS v1.1.1
   in a CICS TS v4.1 CICS region and performing an SPI action for
   a file, transient data queue, transaction, program or temporary
   storage queue can result in the following back level XPI failure
   messages:
   .
   DFHAP0701 <applid> An abend (code ---/ASRJ) has occurred in exit
                      program CBKSPX66 at exit point XEISPOUT.
   DFHAP0702 <applid> An abend (code 0C4/AKEJ) has occurred in exit
                      program CBKSPX66 at exit point XEISPOUT
                      because a backlevel XPI call has been made.
   DFHAP0001 <applid> An abend (code 0C4/AKEJ) has occurred at
                      offset X'0000BA10' in module CBKSPX66.
   DFHME0116 <applid>
   (Module:DFHMEME) CICS symptom string for message DFHAP0001 is
   PIDS/5655S9700 LVLS/660 MS/DFHAP0001 RIDS/DFHSRP PTFS/UK48256
   AB/S00C4 AB/UAKEJ RIDS/CBKSPX66 ADRS/0000BA10
   DFHDU0201 <applid> ABOUT TO TAKE SDUMP. DUMPCODE: AP0001  ,
                      DUMPID: 1/0001
   .
   The offset within CBKSPX66 may vary.  An AMBLIST of CBKSPX66
   will show the ABEND0C4 occurring within csect CBKGSEOR at
   offset x'708' on the 05EF BALR expansion of XPI call
   DFHDSSRX FUNCTION(WAIT_MVS).  The LFDSPOWN offset used is x'54'
   instead of x'A4' which changed in CICS TS v4.1.  The XPI call
   is CICS TS release specific.
   .
   Additional Symptom(s) Search Keyword(s): CEMT SET ENABLE CLOSE
   OPEN DISABLE ABENDASRJ ABENDAKEJ S0C4 0C4 global user exit
   KIXREVPAD
   
   
    
   
   

LOCAL FIX
 *  Copy the CBKSPX66 load module from SCBKLOAD to a user loadlib
   earlier in the CICS TS RPL concatenation and apply the following
   zap:
   .
   //AMASPZAP JOB <your job statement>
   //STEP       EXEC PGM=AMASPZAP
   //SYSPRINT   DD   SYSOUT=A
   //SYSLIB     DD   DSNAME=<your.usercopy>..SCBKLOAD,DISP=SHR
   //SYSIN      DD   *
   NAME CBKSPX66 CBKGSEOR
   * UK47743 PTF LEVEL
   VER 0700 58E0,D054
   REP 0700 58E0,D0A4
   /*
   .
   Perform a CICS program newcopy for CBKSPX66 and start CICS BAC
   using the KBKM START transaction.
   .
   Added by WJ Bulfin
   
   
    
   
   

PROBLEM SUMMARY
 *  ****************************************************************
   * USERS AFFECTED: All users of CICS BAC V1.1.1                 *
   ****************************************************************
   * PROBLEM DESCRIPTION: An 0C4 AKEJ abend occurs in CICS BAC    *
   *                      exit program CBKSPX66 at global user    *
   *                      exit point XEISPOUT.                    *
   *                      The abend is accompanied by messages    *
   *                      DFHAP0701 and DFHAP0702 and it is due   *
   *                      to a backlevel XPI call having been     *
   *                      made.                                   *
   ****************************************************************
   * RECOMMENDATION:                                              *
   ****************************************************************
   Initializing CICS BAC in a CICS TS v4.1 CICS region and
   performing an SPI action for a file, transient data queue,
   transaction, program or temporary storage queue can result
   in backlevel XPI failure messages:
   .
   DFHAP0701 <applid> An abend (code ---/ASRJ) has occurred in exit
                      program CBKSPX66 at exit point XEISPOUT.
   DFHAP0702 <applid> An abend (code 0C4/AKEJ) has occurred in exit
                      program CBKSPX66 at exit point XEISPOUT
                      because a backlevel XPI call has been made.
   DFHAP0001 <applid> An abend (code 0C4/AKEJ) has occurred at
                      offset X'0000BA10' in module CBKSPX66.
   DFHME0116 <applid>
   (Module:DFHMEME) CICS symptom string for message DFHAP0001 is
   PIDS/5655S9700 LVLS/660 MS/DFHAP0001 RIDS/DFHSRP PTFS/UK48256
   AB/S00C4 AB/UAKEJ RIDS/CBKSPX66 ADRS/0000BA10
   DFHDU0201 <applid> ABOUT TO TAKE SDUMP. DUMPCODE: AP0001  ,
                      DUMPID: 1/0001
   .
   The offset within CBKSPX66 may vary.  An AMBLIST of CBKSPX66
   will show the ABEND0C4 occurring within csect CBKGSEOR at
   offset x'708' on the 05EF BALR expansion of XPI call
   DFHDSSRX FUNCTION(WAIT_MVS).  The LFDSPOWN offset used is x'54'
   instead of x'A4' which changed in CICS TS v4.1.  The XPI call
   is CICS TS release specific.
   .
   To fix this problem a change has been made to program CBKGSEOR
   to correctly load the LFDSPOWN address when running in a CICS TS
   4.1 region.
   
   
    
   
   

PROBLEM CONCLUSION
 *  A change has been made to program CBKGSEOR so that it correctly
   loads the LFDSPOWN address when runs in a CICS TS 4.1 region.
   
   111Y
   CBKAPARS
   CBKGSEOR
   CBKIBM$0
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   PM06058
   
   
 * REPORTED COMPONENT NAME
   CICS BATCH CONT
   
   
 * REPORTED COMPONENT ID
   5697I9400
   
   
 * REPORTED RELEASE
   111
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2010-01-26
   
   
 * CLOSED DATE
   2010-03-17
   
   
 * LAST MODIFIED DATE
   2010-04-02
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
    UK55274
   
   

MODULES/MACROS
 *  CBKAPARS CBKGSEOR CBKIBM$0
   
   
    
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   CICS BATCH CONT
   
   
 * FIXED COMPONENT ID
   5697I9400
   
   

APPLICABLE COMPONENT LEVELS
 * R111 PSY UK55274 [HTTPS://WWW14.SOFTWARE.IBM.COM/WEBAPP/SET2/ORDERMEDIA/SHOPCART?PTFS=UK55274]
   UP10/03/18 P F003
   
   

FIX IS AVAILABLE
 * SELECT THE PTF APPROPRIATE FOR YOUR COMPONENT LEVEL. YOU WILL BE REQUIRED TO SIGN IN. DISTRIBUTION ON PHYSICAL MEDIA IS NOT AVAILABLE IN ALL COUNTRIES.