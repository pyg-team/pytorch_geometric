Title: IBM Getting "BESWebReportsServer dead but subsys locked" error during the ILMT v9.2 all-in-one installation on RedHat Linux v6.6. - United States

Text:
 TECHNOTE (FAQ)

QUESTION
 Getting "BESWebReportsServer dead but subsys locked" error during the ILMT v9.2 all-in-one installation on RedHat Linux v6.6. 

CAUSE
While installing IBM Endpoint Manager (IEM) component as part of the ILMT v9.2 all-in-one installation process, it failed with the following error in the BESInstall.log:
Successfully initialized BESREPOR database.
/home/root/cd_software/prereq/iem
Info: The database for the WebReports component was configured successfully.
/opt/BESServer/bin/BESAdmin -initializewebreportsuser -dbname:"BESREPOR" -dbUsername:"db2inst1" -dbPassword:"********" -dbPort:"50000" -username:"IEMAdmin" -password:"********" -roleID:1
Info: The command 'runBesAdmin -initializewebreportsuser' ran successfully.
BESWebReportsServer dead but subsys locked
Error: An error occurred while starting the service: 'BESWebReportsServer'
Error: An error occurred while installing 'IBM Endpoint Manager'. Refer to the installation log file '/var/log/BESInstall.log' for additional details. 



BESClient, BESFillDB, BESGatherDB, BESRootServer, BESWebReports

Confirmed all the IEM components (BESClient, BESFillDB, BESGatherDB, BESRootServer, and BESWebReportsServer) are installed successfully and IEM's databases are also created.

db2 list db directory 

System Database Directory 
Number of entries in the directory = 2 
Database 1 entry: 
Database alias = BESREPOR 
Database name = BESREPOR 
Local database directory = /home/db2inst1 
Database release level = 10.00 
Comment = 
Directory entry type = Indirect 
Catalog database partition number = 0 
Alternate server hostname = 
Alternate server port number = 
Database 2 entry: 
Database alias = BFENT 
Database name = BFENT 
Local database directory = /home/db2inst1 
Database release level = 10.00 
Comment = 
Directory entry type = Indirect 
Catalog database partition number = 0 
Alternate server hostname = 
Alternate server port number = 


No issue connecting to both databases with db2inst1 user ID.

db2 connect to BESREPOR 

Database Connection Information 
Database server = DB2/LINUXX8664 10.5.5 
SQL authorization ID = DB2INST1 
Local database alias = BESREPOR 




db2 connect to BFENT 

Database Connection Information 
Database server = DB2/LINUXX8664 10.5.5 
SQL authorization ID = DB2INST1 
Local database alias = BFENT 


Just the BESWebReportsServer service keeps crashing with "BESWebReportsServer dead but subsys locked".


ANSWER
Prior to starting the ILMT v9.2 all-in-one installation, ensure the LANG environment variable is set properly at the system level (not user profile level) and it can't be blank. 

 

1) Run "locale" command to verify the setting. 


Example outputs of the locale of the non-working Redhat Linux server: 

 

LANG= 

LC_CTYPE="POSIX" 

LC_NUMERIC="POSIX" 

LC_TIME="POSIX" 

LC_COLLATE="POSIX" 

LC_MONETARY="POSIX" 

LC_MESSAGES="POSIX" 

LC_PAPER="POSIX" 

LC_NAME="POSIX" 

LC_ADDRESS="POSIX" 

LC_TELEPHONE="POSIX" 

LC_MEASUREMENT="POSIX" 

LC_IDENTIFICATION="POSIX" 

LC_ALL= 

 

A good working Redhat Linux server as shown below: 


LANG=en_US.UTF-8
LC_CTYPE="en_US.UTF-8"
LC_NUMERIC="en_US.UTF-8"
LC_TIME="en_US.UTF-8"
LC_COLLATE="en_US.UTF-8"
LC_MONETARY="en_US.UTF-8"
LC_MESSAGES="en_US.UTF-8"
LC_PAPER="en_US.UTF-8"
LC_NAME="en_US.UTF-8"
LC_ADDRESS="en_US.UTF-8"
LC_TELEPHONE="en_US.UTF-8"
LC_MEASUREMENT="en_US.UTF-8"
LC_IDENTIFICATION="en_US.UTF-8"
LC_ALL= 

 

2) Check if this /etc/sysconfig/i18n file is existed with the following settings: 


LANG="en_US.UTF-8"
SYSFONT="latarcyrheb-sun16" 

 

Ensure the above file is exist and it has the above LANG settings defined. Once it is done, the locale command should return the proper outputs. 

 

Note: exporting the LANG setting in the user profile (.bash_profile) might not work. Most likely seeing such problem in a Redhat containers environment where the LANG setting at the top level does not carry over to its containers. 




If the LANG environment variable has already been set correctly and the BESWebReportsServer service is still failing to start up, apply the workaround below to fix the issue.



Modify the WebReports startup script /etc/init.d/beswebreports to add the required variable export in side the start() function: 

start() { 
.... 
export DISPLAY=:0 
LANG=<customer_env_language or empty> 
export LANG 
.... 
} 



Note: Changing this startup script will be overwritten whenever applying a WebReports patch until official fix is released. 


Reference to APAR IV74768.