Title: IBM Performing a silent uninstall of WebSphere Process Server Version 7.0 - United States

Text:
 TECHNOTE (FAQ)

QUESTION
 How can I silently uninstall WebSphere Process Server Version 7.0? 

ANSWER
Use the following procedure to silently uninstall WebSphere Process Server on any platform where the IBM Installation Manager graphical user interface is not available. (Starting in version 7.0, the IBM Installation Manager is used for installing and uninstalling the product.) 


Note: This procedure will completely delete WebSphere Application Server installation and all the dependent feature packs including the Feature Pack for XML, the Feature Pack for SCA, and WebSphere Process Server feature packs. 


Step 1: Stop all servers configured under WPS binary installation. 

Step 2: Download the Sample_UninstallV7.0_ResponseFile.xml file into a temporary directory. This response file contains all of the uninstall actions. 
Sample_UninstallV7.0_ResponseFile.xml [/support/docview.wss?uid=swg21432964&aid=2] [/support/docview.wss?uid=swg21432964&aid=1]


Step 3: Open the Sample_UninstallV7.0_ResponseFile.xml file in a text editor and customize it for your environment.


Use the installed.xml file in the agent data location directory [http://publib.boulder.ibm.com/infocenter/dmndhelp/v7r0mx/index.jsp?topic=/com.ibm.websphere.wesb.doc/doc/rins_installation_paths.html]to find information about your current installation . The default agent database location is:



 * Unix-based operating systems: 
   /var/ibm/InstallationManager 
   
   
 * Windows operating systems: 
   C:\Documents and Settings\All Users\Application Data\IBM\Installation Manager 
   


(You can open the installed.xml file in a web browser or text editor). The following graphic shows a sample installed.xml file. Some of the values are not presented using the browser, you will have to open the file using text editor. 

[/support/docview.wss?uid=swg21432964&aid=3] [/support/docview.wss?uid=swg21432964&aid=3] 

 * 


Step 3a: In the Sample_UninstallV7.0_ResponseFile.xml file, locate the following content: 

<profile installLocation='/opt/IBM/WPS7' id='IBM WebSphere Application Server - ND_20100510_1847'>



Replace /opt/IBM/WPS7 with the directory on your machine where WebSphere Process Server is installed. The directory name is the same as your original WebSphere Application server binary installation. 

Replace all occurrences of "IBM WebSphere Application Server - ND_20100510_1847" with the value of the Package Group Name defined in the installed.xml file. 

 

Step 3b: In the Sample_UninstallV7.0_ResponseFile.xml file, locate the following content: 


<data key='eclipseLocation' value='/opt/IBM/WPS7'/>


Replace occurrences of /opt/IBM/WPS7 with the directory on your machine where WebSphere Process Server is installed. 


Step 3c: In the Sample_UninstallV7.0_ResponseFile.xml file, locate the following content: 


<preference value='/opt/ibm/BPMShared' name='com.ibm.cic.common.core.preferences.eclipseCache'/>


Replace /opt/ibm/BPMShared with the value of the property cacheLocation from the installed.xml file. 

Note: You must open installed.xml in a text editor in order to find the cacheLocation property.



Step 4: Save the modified responsefile and run the silent uninstallation by navigating to the directory where the IBM Installation Manager is installed. Following are the default locations for Installation Manager : 

 *  Unix-based operating systems: 
   /opt/IBM/InstallationManager/eclipse 
   
   Windows operating systems: 
   C:\Documents and Settings\All Users\Application Data\IBM\Installation Manager 


Executing the following command: 
 * Unix-based operating systems: 
   IBMIM "--launcher.ini" silent-install.ini -input Sample_UninstallV7.0_ResponseFile.xml
   
   
 * Windows operating systems: 
   IBMIMc "--launcher.ini" silent -install.ini -input Sample_UninstallV7.0_ResponseFile.xml
   
   
   

Depending on the hardware capability Installation Manager may take more than 30 minutes to complete the uninstallation. You can monitor the progress in installation manager logs created under the <agent data location>/logs directory. 


Step 5: Uninstall verification 
It is normal to see warnings in the Installation Manager logs indicating that "failed to delete some of the directories" . You can verify the successful uninstallation by reviewing the WebSphere logs . 


You will find <message>Returning with return code: INSTCONFSUCCESS</message> under respective feature directories 
For example : 
<WPSInstallDirectory>/logs/uninstall/uninstallconfig.log 
<WPSInstallDirectory>/logs/xml/uninstall/uninstallconfig.log
<WPSInstallDirectory>/logs/sca/uninstall/uninstallconfig.log
<WPSInstallDirectory>/logs/wbi/uninstall/uninstallconfig.log


After successfully uninstalling the product , you can delete and cleanup remaining files in the installation directory.






Note: If you want to uninstall only the WebSphere Process Server feature pack without uninstalling WebSphere Application server, XML feature pack and SCA feature pack. replace the <uninstall> tags with the following line and make the appropriate values from for WebSphere Process Server feature pack . You may also need to include any dependent interim fixes you may have installed for WebSphere Process Server. 


<uninstall >
<offering profile='IBM WebSphere Application Server - ND_20091224_1818' version='7.0.2.20100422_0809' features='wps.client.feature,wps.server.feature,wps.samples.feature,wps.profile.feature,esb.profile.feature' id='com.ibm.ws.WPS'/>
</uninstall>


Note: If you want to remove IBM Installation Manager, follow the instructions in the Installation Manager documentation [http://publib.boulder.ibm.com/infocenter/install/v1r2/topic/com.ibm.cic.agent.ui.doc/topics/t_uninstall_im.html]. Make sure you have removed all products that are installed using the Installation Manager before you remove the Installation Manager.






Troubleshooting Tips while creating response files: 


Following are some of the errors observed due to the problems in the responsefile: 


 * If you see java.lang.NullPointerException exception: 
   
   
   <entry num='111' time='1275958048112' elapsed='00:19.59' level='ERROR' thread='main'>
   <logger>com.ibm.cic.agent.core.Agent</logger>
   <class>com.ibm.cic.agent.internal.application.HeadlessApplication</class>
   <method>run</method>
   <message>java.lang.NullPointerException</message>
   </entry>
   </log>
   
   
   Tips: check if the value used for <offering profile='IBM WebSphere Application Server - ND_20091224' /> is correct . A wrong value - also white space issues can cause the above error. 
   
   
   
 * If you see the following errors: 
   
   
   <entry num='158' time='1275959374596' elapsed='00:30.79' level='ERROR' thread='main'>
   <logger>com.ibm.cic.agent.core.Agent</logger>
   <class>com.ibm.cic.agent.internal.application.HeadlessApplication</class>
   <method>run</method>
   <message>Profiles augmented by IBM WebSphere Application Server V7
   Feature Pack for Service Component Architecture (SCA) must be unaugmented or deleted before the feature pack is uninstalled. Profiles that are unaugmented should be deleted because they might not be valid after the feature pack is uninstalled.
   Specify the key user.confirm.unaugment,com.ibm.websphere.SCA.v10 with value true in the response fileto confirm.</message>
   </entry>
   TIP: Make sure there are following are correct in the response file.
   
   
   <profile installLocation='/opt/IBM/WPS7' id='IBM WebSphere Application Server - ND_20100510_1847'>
   <data key='eclipseLocation' value='/opt/IBM/WPS7'/>
   <data key='cic.selector.nl' value='en'/>
   <data key='user.cic.imported,com.ibm.websphere.ND.v70' value='WAS'/>
   <data key='user.confirm.unaugment,com.ibm.websphere.SCA.v10' value='true'/>
   <data key='user.confirm.unaugment,com.ibm.websphere.XML.v10' value='true'/>
   </profile>
   
   
   
   
 * You are unable to start the Installation Manager with the following error: 
   
   
   The processing instruction target matching "[xX][mM][lL]" is not allowed.
   00:01.00 ERROR [main] com.ibm.cic.agent.internal.application.HeadlessApplication
   run
   The processing instruction target matching "[xX][mM][lL]" is not allowed.
   
   
   TIP: Make sure there is no white space <CR><CL>, empty line as the first line in the response file before <?xml version="1.0" encoding="UTF-8"?> 

RELATED INFORMATION
#Default WebSphere and Insallation manager directories [http://publib.boulder.ibm.com/infocenter/dmndhelp/v7r0mx/index.jsp?topic=/com.ibm.websphere.wesb.doc/doc/rins_installation_paths.html]
Installation Manager response file commands [http://publib.boulder.ibm.com/infocenter/install/v1r2/index.jsp?topic=/com.ibm.silentinstall12.doc/topics/r_silent_inst_commands12.html]
WebSphere Process server Information center Installatio [http://publib.boulder.ibm.com/infocenter/dmndhelp/v7r0mx/index.jsp?topic=/com.ibm.websphere.wps.doc/doc/iins_choose_install.html]