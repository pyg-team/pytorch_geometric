Title: IBM Troubleshooting Lotus Notes client performance on Citrix platforms - United States

Text:
citrix; performance; notes client TECHNOTE (FAQ)

QUESTION
You use a Lotus NotesÂ® client within a Citrix environment, on a Citrix MetaFrame Server or Citrix Presentation Server. How can you troubleshoot performance problems?

ANSWER
Some items to check to improve performance of Notes clients within a Citrix environment are listed below. This list is not meant to be comprehensive but to cover some common topics. For general Notes client performance troubleshooting, refer to "Tips for Enhancing and Troubleshooting Notes 6 Client Performance" (#7006235) [http://www.ibm.com/support/docview.wss?rs=475&uid=swg27006235] . 

1. Use a supported configuration of Notes client and Citrix platform 

Performance issues can occur when the Notes client is installed on an unsupported Citrix platform or operating system. For detailed information regarding which Citrix platform is supported for each version of Lotus Notes, refer to the Release Notes [http://www.lotus.com/ldd/notesua.nsf/RN] that accompany that Lotus Notes client release. For your convenience, technote 1098489 [http://www.ibm.com/support/docview.wss?rs=475&uid=swg21098489] summarizes the supported configurations. 

 

2. Manage memory allocation 

The Citrix server administrator might notice that several Notes users monopolize most of the server's physical memory, while other Notes users who log on after these users are allocated very little memory in comparison. 

To better control the amount of physical memory allocated to each Notes user, you can use the following notes.ini parameter: PercentAvailSysResources 

Add this parameter into each Notes users' notes.ini file. This parameter assigns a certain percentage of the actual available physical memory on the Citrix server for each Notes instance that is launched. 

 More information regarding the use of this parameter, as well as an example of how to calculate the value to set this parameter, can be found in "Managing memory allocation using NOTES.INI variables" (http://www.ibm.com/developerworks/lotus/library/ls-manage_mem_allocation [http://www.ibm.com/developerworks/lotus/library/ls-manage_mem_allocation])



3. Change the cache file location 

To improve performance, the Notes client makes use of a local cache database, located in a user's Notes\Data directory. The cache contains information that is frequently used. However, in a Citrix environment, this cache file is often placed on a remote file server. 

Some customers that are set up in this configuration have reported slower Notes client performance, as well as intermittent corruption of some local databases, such as the bookmark.nsf, whose data is frequently accessed when running Notes. 

To increase the data access speed of the Notes client, as well as to reduce the occurrences of local database corruption, we recommend utilizing the CACHE parameter in each user's notes.ini. Using this parameter allows you to create the cache database on the Citrix server, instead of in the users' data directory located on the file server. For example, each user's notes.ini can contain the following entry: 

CACHE=C:\tempfolder\username_cache.ndk. 

To reduce space, an operating system log off script can be implemented to delete this file when the user closes the Citrix session. The cache file will be created the next time the user launches a Citrix session. This configuration will also work in a Citrix server farm environment. 

Note: This script information is provided as a suggestion only. IBM Support does not assist with creation or implementation of an operating system script. 

 

4. Address any file server or network connectivity issues 

The Notes users' data directories are often stored on a remote network share, rather than on the Citrix server itself. This type of environment poses several unique performance issues to the Notes client. 

 * 
 * 
 * "Is running Client Notes.ini and/or Notes Data directory on a File Server a supported configuration?" (1086958)
 * 


When the users' Notes\Data directories are stored on a remote file server, Notes performance can be affected by data access speeds to the file server. The user's notes ID file and all local databases (bookmark.nsf, cache.ndk, desktop6.ndk and names.nsf) all reside on this share. If there is a bottleneck in accessing the file server, many or all users whose Notes\Data directories reside on the file server might be affected. In some cases, steps can be taken to reduce these performance issues. If the network connection between the Citrix server and the file server times out or is interrupted, and data cannot be read or written to these local databases, the Notes process on the Citrix server for an affected user can spike to 100 percent. This issue has been reported to Quality Engineering as SPR# PBIT6C9EUD and fixed in Notes 6.5.6 and Notes 7.0.2. Refer to the Upgrade Central [http://www.ibm.com/software/lotus/support/upgradecentral/index.html] site for details on upgrading Notes/Domino. 

 * 
 * Excerpt from the Lotus Notes and Domino Release 6.5.6 and 7.0.2 fix list (available at 
 * http://www.ibm.com/developerworks/lotus [http://www.ibm.com/developerworks/lotus]
 * )
 * 
 * 
 *