Title: IBM How to obtain and read LDIF or LDAPSearch results - United States

Text:
obtain; read; ldif; ldapsearch result; sametime TECHNOTE (FAQ)

QUESTION
This document will cover how to obtain the results of a Lightweight Directory Access Protocol (LDAP) search and read its results.

ANSWER
Obtaining an LDIF/LDAP Search result 

Every installation of Lotus Domino will also install the ldapsearch utility. The ldapsearch utility is located in the Domino program directory (ex. \lotus\domino). It is also included on the iSeries and can be run from a Qshell session. To start a Qshell session type strqsh at a command line on the iSeries. 

To search for an entry in LDAP, there are several flags that can be used. 

ldapsearch -h [LDAPHostName] -b [BaseDNforSearch] -D [BindDNUsername] -w [BindDNPassword] -L -p [Port] "[AttributesForSearch]" 

 

The only mandatory flags for search are -h (LDAP Host Name) and the search attribute. The actual flags that are required will vary depending on restriction in your LDAP environment. The -L flag will define whether the output should be in an LDIF format and is optional. 

Many LDAP environments will allow both anonymous and authenticated bind requests. However, it is recommended that an authenticated bind request be used because an anonymous bound search may only return a subset of results.


[LDAPHostName]
This value can be the fully qualified hostname of the LDAP directory server or the numerical IP address. 


[BaseDNforSearch]
This should be a distinguished name for the place that you would like to start searching. For the purpose of testing the directory you may use the highest level dn. The value of the dn will be based solely on the directory structure of your particular directory, but the following examples illustrate how a base might look for a few directories.
Domino: "" (Domino allows anonymous searches from the root, no value must be specified)
Netscape: "o=acme.com" (The domain)
Active Directory: "dc=acme,dc=com" (The domain)


[BindDNUsername]
This is the username that you will use to bind to the directory.


[BindDNPassword]
This is the password that will be used to authenticate the username. 

Below are the most common search strings. 

[Port] 

Port to connect to on the LDAP server 

[AttributesForSearch]
Determines what entries are selected to be returned. In its most basic form it defines an equality that an attribute must match, such as "cn=Joe Shmoe". More complicated filters can be constructed using the AND and OR operators, such as "(&(|(givenname=Joe)(sn=Shmoe))(objectclass=Person))". Wildcard values are legal. To test your directory use "objectclass=*", this will return all entries the directory finds. 

 

 

Anonymous search without a base defined for the user John Doe (common for Domino LDAP) ldapsearch -h server.domain.com "cn=John Doe*" Anonymous search with a base defined for the user John Doe ldapsearch -h server.domain.com -b "O=Organization" "cn=John Doe*" Authenticated search without a base defined for the user John Doe ldapsearch -h server.domain.com -D "cn=Directory Administrator,O=Organization" -w password "cn=John Doe*" Authenticated search with a base defined for the user John Doe ldapsearch -h server.domain.com -b "O=Organization" -D "cn=Directory Administrator,O=Organization" -w password "cn=John Doe*" Authenticated search with a base defined for the user John Doe and a specified port ldapsearch -h server.domain.com -b "O=Organization" -D "cn=Directory Administrator,O=Organization" -w password -p 389 "cn=John Doe*" The output of the LDAPSearch can be outputted to a file by using a pipe, as follows: ldapsearch -h server.domain.com -L "cn=John Doe*">C:\ldapoutput.txt 

 

Reading the LDAPSearch output 

Below is the sample output from an LDAP search for a user in the LDAP directory. 

 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 


The LDAP search results will consist of several pairs of attributes and values. The part in front of the first equal sign (colon if in LDIF format) in the line is referred to as the ldap attribute. The part to the right is the value. In the sample above, uid, givenName, objectClass, sn, cn and mail are attributes. Depending on how the LDAP schema is defined, each attribute may have several values and hence an entry may appear several times. 

Since LDAP is very customizable, certain attributes that appear in one LDAP server may not exist in other servers. When setting up a SametimeÂ® server, the most common attributes you will need are, uid, objectClass, cn and mail. RELATED INFORMATION
#