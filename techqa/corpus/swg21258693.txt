Title: IBM Supplement to the Command Reference Guide on -nremote_admin option to the mkvob and protectvob commands - United States

Text:
CC; mkvob; rmvob; 1258693; protectvob; clearfsimport: Error: Permission denied: VOB owner or privileged user not local PREVENTIVE SERVICE PLANNING

ABSTRACT
 This document is meant to serve as a supplement to the IBM Rational ClearCase Command Reference Guide on the topic of cleartool mkvob and protectvob concerning the -nremote_admin option. 

CONTENT
 

The ClearCase 7.0 Command Reference Guide on the topics of mkvob [http://publib.boulder.ibm.com/infocenter/cchelp/v7r0m0/index.jsp?topic=/com.ibm.rational.clearcase.cc_ref.doc/topics/ct_mkvob.htm] and protectvob [http://publib.boulder.ibm.com/infocenter/cchelp/v7r0m0/index.jsp?topic=/com.ibm.rational.clearcase.cc_ref.doc/topics/ct_protectvob.htm] states that the new option -nremote_admin is designed to disable privileged access to the VOB server by remote users. All ClearCase privileged commands need to be run while logged into the VOB server host with this option enabled. 

 

Intent: 

The intent of the -nremote_admin command was to help provide an extra layer of control for administrators to narrow the location from where privileged users could run ClearCase commands on the VOB server. 

The -nremote_admin functionality is not designed to prevent malicious tampering with the VOB storage area (such as source container removal or database file removal). 


About cleartool rmvob and ClearCase 7.0

The cleartool rmvob command is a client side operation in both 2003.06.00 and 7.0. This means that the operation is initiated from the host upon which the command is run. 

In version 2003.06.00, any privileged user could remove a VOB from any host. 

New code was introduced in 7.0 to prevent a remote rmvob command from occurring by adding a check for permissions on the client side. 

 

Exceptions: 

The -nremote_admin switch only protects against 7.0 clients from removing a VOB, or performing certain cleartool administrative functions remotely from the VOB server. 

Any legacy clients prior to 7.0, will be unaffected by the -nremote_admin functionality. 

 

Additional Implications: 

When this feature is enabled, ClearCase operations that require elevated permissions (such as VOB owner, root, and being a member of the ClearCase administrators group on Windows) will fail if executed from a remote host, even if logged into that host with the privileged login. With this feature enabled the commands will need to be issued on the VOB server itself. 

 

Below is an example of a clearfsimport that fails when issued on a remote host when -nremote_admin is enabled on the VOB. 


For example:

Note: The VOB in the example below is hosted on a machine name 'Twilo'

M:\main\nremote>cleartool desc -l vob:\nremote 

versioned object base "\nremote" 

created 2010-02-01T15:31:40-05:00 by user.group@Twilo 

VOB family feature level: 5 

VOB storage host:pathname "twilo:C:\vobs\nremote.vbs" 

VOB storage global pathname "\\twilo\vobs\nremote.vbs" 

database schema version: 54 

modification by remote privileged user: denied 

VOB ownership: 

owner DOMAIN\user 

group DOMAIN\group 

Attributes: 

FeatureLevel = 5 


Operations such as clearfsimport will fail if executed from a REMOTE host even if logged on as the VOB owner:

M:\main\nremote>hostname
vinyl

M:\main\nremote>creds
Login name: DOMAIN\user
USID: NT:S-1-5-21-141845252-1443263951-584457872-5393
Primary group: DOMAIN\user (NT:S-1-5-21-141845252-1443263951-584457872-1023)
Groups: (13)
Everyone (NT:S-1-1-0)
BUILTIN\Administrators (NT:S-1-5-32-544)
BUILTIN\Users (NT:S-1-5-32-545)
NT AUTHORITY\INTERACTIVE (NT:S-1-5-4)
NT AUTHORITY\Authenticated Users (NT:S-1-5-11)
LOCAL (NT:S-1-2-0)
DOMAIN\clearcase (NT:S-1-5-21-141845252-1443263951-584457872-1022)
DOMAIN\group (NT:S-1-5-21-141845252-1443263951-584457872-5421)
DOMAIN\Domain Users (NT:S-1-5-21-141845252-1443263951-584457872-513)
DOMAIN\tester (NT:S-1-5-21-141845252-1443263951-584457872-7202)
DOMAIN\Domain Admins (NT:S-1-5-21-141845252-1443263951-584457872-512)
DOMAIN\clearcase test group (NT:S-1-5-21-141845252-1443263951-584457872-719

You have ClearCase administrative privileges. 

 

M:\main\nremote>clearfsimport c:\Utilities -r . 

clearfsimport: Error: Permission denied: VOB owner or privileged user not local 

 

clearfsimport: Error: Unable to import into ".". 


Documentation 

 * On-line documentation can be found:
   
   About the ClearCase Information Center [http://www.ibm.com/support/docview.wss?rs=984&uid=swg21255604]
   .