Title: IBM Handling group entries for connection manager using setnet32 - United States

Text:
 TECHNOTE (FAQ)

QUESTION
 HDR (or RSS) with a group option in the SQLHOSTS file is permitted to access the instance using a groupname, so the connection manager can handle a failover. What is needed to set up setnet32 on a Windows machine to permit use of a groupname, so that the automatic failover will work? 

CAUSE
The tool setnet32.exe is not able to accommodate group entries in a clear way that allows for HDR or RSS failover. Beginning with CSDK 3.50.xC2 and above, the code was changed to allow a 'group' keyword in the protocol list and to make the combobox scrollable. The method to allow a group name to be used as the instance name is not easy to understand, since setnet32 does not seem to accommodate multiple entries for this purpose. 

ANSWER
Setnet32.exe is a utility designed to write sqlhosts entries into the windows registry. When using a connection manager, the setup method requires three entries through setnet32, and two additional entries by way of a manual entry, using regedit.exe. 

This example starts with an SQLHOSTS file to see how the connection manager entries for Informix Server connections would appear on a UNIX system:

SQLHOSTS: 
g_hdr group - - i=100 
hdrprim onsoctcp iphost1 iphost_srv1 g=g_hdr 
hdrsec onsoctcp iphost2 iphost_srv2 g=g_hdr 


 
(Some browser fonts make the dash sequence above unclear. The first line is "g_hdr<space>group<space> - <space> - <space> i=100"). 

 

To enable HDR or RSS failover to work properly using setnet32.exe follow the steps below. 

 

1. To begin, the first step is to configure three entries in setnet32: 

Entry 1:
[/support/docview.wss?uid=swg21447622&amp;aid=1] 

Entry 2:
[/support/docview.wss?uid=swg21447622&amp;aid=2] 

Entry 3:
[/support/docview.wss?uid=swg21447622&amp;aid=3] 

2. Once the 3 entries from step one are applied, the registry will contain the starting information 
in the HKEY_LOCAL_MACHINE\SOFTWARE\Informix\SQLHOSTS registry. Using regedit.exe, the starting entries look like this:
[/support/docview.wss?uid=swg21447622&aid=4] [/support/docview.wss?uid=swg21447622&aid=4]

[/support/docview.wss?uid=swg21447622&aid=5] [/support/docview.wss?uid=swg21447622&aid=5]

[/support/docview.wss?uid=swg21447622&aid=6] [/support/docview.wss?uid=swg21447622&aid=6]
3. To complete the connection manager setup, select the g_hdr entry, and proceed as
follows: 

a. g_hdr entry selected:
[/support/docview.wss?uid=swg21447622&aid=7] [/support/docview.wss?uid=swg21447622&aid=7]
b. On the registry editor menu, select Edit->New->Key (press enter). This will generate
a new twig under g_hdr:
[/support/docview.wss?uid=swg21447622&aid=8] [/support/docview.wss?uid=swg21447622&aid=8]
Right click on the 'New Key #1' entry that was just created. Rename it to 'hdrprim':
[/support/docview.wss?uid=swg21447622&aid=9] [/support/docview.wss?uid=swg21447622&aid=9]
c. Re-Select g_hdr (step a); On the registry editor menu, select Edit->New->Key (press enter). 
This will generate a second, parallel twig under g_hdr:
[/support/docview.wss?uid=swg21447622&aid=10] [/support/docview.wss?uid=swg21447622&aid=10]
Right click on the 'New Key #1' entry that was just created. Rename it to 'hdrsec':
[/support/docview.wss?uid=swg21447622&aid=11] [/support/docview.wss?uid=swg21447622&aid=11]
(Note that these new keys under g_hdr ( 'hdrprim' and 'hdrsec') will have no settings
in the right-hand pane).

d. Exit (and save) the regedit window. 


4. With these entries in place in the registry, failover will work correctly. 

5. Registry entries are added automatically starting with CSDK/I Connect 4.10.xC1. 

Note: if this procedure is targeted for several machines, consider writing a batch mode procedure which incorporates reg.exe.