Title: IBM IV53276: AGENT INSTANCE IS NOT RESPONDING TO THE REQUEST AND BECOMES UNRESPONSIVE. - United States

Text:
  DIRECT LINKS TO FIXES
7.2.0-TIV-ITM_VMWVI-FP0003 [http://www.ibm.com/support/fixcentral/quickorder?product=ibm%2FTivoli%2FTivoli+Monitoring+for+Virtual+Servers&fixids=7.2.0-TIV-ITM_VMWVI-FP0003&source=SAR]
7.2.0.2-TIV-ITM_VMWVI-IF0003 [http://www.ibm.com/support/fixcentral/quickorder?product=ibm%2FTivoli%2FTivoli+Monitoring+for+Virtual+Servers&fixids=7.2.0.2-TIV-ITM_VMWVI-IF0003&source=SAR]
IBM Tivoli Monitoring for Virtual Servers:VMware VI 7.2.0.2-TIV-ITM_VMWVI-IF0002 [http://www-01.ibm.com/support/docview.wss?uid=swg24037388]
IBM(R) Tivoli(R) Monitoring for Virtual Environments: VMware VI 7.2.0.2-TIV-ITM_VMWVI-IF0003 [http://www-01.ibm.com/support/docview.wss?uid=swg24039291]
IBM(R) Tivoli(R) Monitoring for Virtual Environments: VMware VI 7.2.0-TIV-ITM_VMWVI-FP0003 [http://www-01.ibm.com/support/docview.wss?uid=swg24040186]


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  ENVIRONMENT:
   IBM Tivoli Monitoring for Virtual Environment: VMware VI Agent
   7.2 FixPack 2
   
   PROBLEM DESCRIPTION:
   
   If multiple data sources are configured for a single agent
   instance and if some of the data sources (could be vCenter or
   ESX Server) are in a non responding mode ("hostd" and "vpxa"
   services for ESX Server and "Vmware VirtualCenter Server"
   service for vCenter has been stopped) then agent hangs on the
   non-responsive data source. It is unable to discover the rest
   of the configured data sources and no response is received for
   the data sources.
   
   To monitor the above behavior. Assign a query as follows:
   1) Query editor >  VMware VI Agent > KVM VCENTERS > vCenters_V7
   This query will not list all configured data sources. Further on
   "Monitored Server" workspace, you will see the ESX Server
   listed as "DOWN" for the data source in question. This will
   confirm delay/hang caused by one or more ESX servers.
   
   2) Once this is confirmed you can request a DEBUG binary from
   L3 to investigate this further. After applying the debug
   binary, traces similar to the following entry will be seen in
   the data provider log after the HANG occurs
   ****
   ?Connection.open: Open()::Step 29 : Trying to login for
   :<dataSourceName>?.
   And after this there will be no entries for the successful
   connection attempt for the particular data source as
   ?Connection.open: Open()::Step 30 : Successful login for
   :<dataSourceName>?.
   ****
   
   
    
   
   

LOCAL FIX

PROBLEM SUMMARY
 *  If multiple data sources are configured for a single agent
   instance and if some of the data sources (could be vCenter or
   ESX Server) are in a non responding mode ("hostd" and "vpxa"
   services for ESX Server and "Vmware VirtualCenter Server"
   service for vCenter has been stopped) then agent hangs on the
   non-responsive data source. It is unable to discover the rest of
   the configured data sources and no response is received for
   the data sources.
   To monitor the above behavior. Assign a query as follows:
   1) Query editor > VMware VI Agent > KVM VCENTERS > vCenters_V7
   This query will not list all configured data sources. Further on
   "Monitored Server" workspace, you will see the ESX Server listed
   as "DOWN" for the data source in question. This will confirm
   delay/hang caused by one or more ESX servers.
   2) Once this is confirmed you can request a DEBUG binary from L3
   to investigate this further. After applying the debug binary,
   traces similar to the following entry will be seen in the data
   provider log after the HANG occurs
   ****
   ?Connection.open: Open()::Step 29 : Trying to login for
   :?.
   And after this there will be no entries for the successful
   connection attempt for the particular data source as
   ?Connection.open: Open()::Step 30 : Successful login for
   :?.
   ****
   
   
    
   
   

PROBLEM CONCLUSION
 *  If some of the configured data sources are delaying the response
   for the connection attempt then provider was waiting to get the
   response from the server, as a result provider blocks all of its
   processing till it get the response.
   To resolve this added a connection timeout for each connection
   attempt in a connection class so that data provider will not
   wait infinitely to receive the response from the problematic
   data source .
   The fix for this APAR is contained in the following maintenance
   packages:
   Interim Fix: 0002, 7.2.0.2-TIV-ITM_VMWVI-IF0002
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   IV53276
   
   
 * REPORTED COMPONENT NAME
   ITMF VE VM WARE
   
   
 * REPORTED COMPONENT ID
   5724L92VI
   
   
 * REPORTED RELEASE
   720
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2013-12-12
   
   
 * CLOSED DATE
   2014-04-19
   
   
 * LAST MODIFIED DATE
   2014-04-19
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   ITMF VE VM WARE
   
   
 * FIXED COMPONENT ID
   5724L92VI
   
   

APPLICABLE COMPONENT LEVELS
 * R720 PSY
   UP