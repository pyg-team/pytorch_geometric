Title: IBM DFHXM0001 AKEF in DFHXMTA after applying maintenance or redefining your local/global catalogs - United States

Text:
DFHXM0001 XM0001 AKEF abendAKEF DFHXMTA DFHPIDM DFHPIDML DFHPIXM RSU0806 initialization initialisation 5655M1500 R640 640 R400 400 HCI6400 R650 650 R500 500 HCI6500 5655-M15 5655M15 5655S9700 R660 660 R600 600 HCI6600 5655-S97 5655S97 5655S9700 R670 670 R700 700 HCI6700 5655-S97 5655S97 kixinfo TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 Your CICS Transaction Server for z/OS (CICS TS) region fails during startup with an abend AKEF. You have just applied maintenance, or have brought up the CICS region with newly defined local and global catalogs . 

SYMPTOM
DFHXM0001 [http://publib.boulder.ibm.com/infocenter/cicsts/v4r2/topic/com.ibm.cics.ts.messages.doc/cics_mc/dfhxm/XM0001.html] An abend (code ---/AKEF [http://publib.boulder.ibm.com/infocenter/cicsts/v4r2/topic/com.ibm.cics.ts.messages.doc/cics_mc/AKxx_abend_codes/AKEF.html]) has occurred at offset X'091E' in module DFHXMTA.

CAUSE
Mismatch in maintenance levels between DFHXMTA and DFHPIDM, or backlevel local and global catalogs.

DIAGNOSING THE PROBLEM
The AKEF abend indicates that the Kernel domain has detected an error while processing a domain call. The error might have been caused by a domain gate that was not yet active during initialization.

CICS trace shows that the AKEF abend occurs immediately following a return from a CREATE_UOW call from module DFHXMTA. The next call from DFHXMTA is a domain call to DFHPIXM for INIT_XM_CLIENT. However, the DFHPIXM_GATE has not yet been initialized, so the request fails with the AKEF abend. CICS trace shows:

RM FA02 RMUC EXIT - FUNCTION(CREATE_UOW) RESPONSE(OK)
XM 1310 XMTA *EXC* - Recovery_entered - FUNCTION(TASK_REPLY)

PK60532 (CICS TS V3.1) and PK56777 (CICS V3.2) are Web services enhancement APARs that added a new DFHPIXM_GATE to the PI domain. During startup, module DFHPIDM should add this new gate which will then be called by DFHXMTA. When the AKEF abend occurs due to a maintenance-mismatch, typically a back-level version of DFHPIDM is running in the CICS region, and the DFHPIXM gate is not correctly initialized. DFHPIDM is included in load module DFHPIDML.In a dump, the Loader domain can be formatted using IPCS with command verbx dfhpdxxx 'ld=1' (where xxx is the appropriate release level for your CICS region).A search for DFHPIDM will show the PTF level of DFHPIDM that is running in the CICS region. 

If the problem occurs after your local and global catalogs have been redefined, a dump will typically show no occurrences of DFHPIxx modules in the Loader domain. In addition, Domain manager will not show any evidence that the PI domain has been initialized. Domain manager domain can be formatted with command verbx dfhpdxxx 'dm=1'.

RESOLVING THE PROBLEM
Ensure that UK33905 (CICS TS V3.1 APAR PK60532 [http://www.ibm.com/support/docview.wss?uid=swg1PK60532]) or UK33821 (CICS TS V3.2 APAR PK56777 [http://www.ibm.com/support/docview.wss?uid=swg1PK56777]) is applied correctly, and that all DFHPIxx modules are being loaded from the correct libraries. 


Delete and redefine your local and global catalogs and ensure that you are using the correct level of CICS libraries and utilities, DFHCCUTL for DFHLCD, and DFHRMUTL for DFHGCD.




PRODUCT ALIAS/SYNONYM
 CICS/TS CICS TS CICS Transaction Server