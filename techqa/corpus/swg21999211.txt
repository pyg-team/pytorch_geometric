Title: IBM Receive SSLHandshakeException when using configuration tool to connect to SSL URI for Content Platform Engine or Content Navigator after upgrading to IBM Case Manager 5.2.1.4 or later. - United States

Text:
 TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 Receive SSLHandshakeException when running configuration tool to connect to SSL URI for Content Platform Engine or Content Navigator after upgrading to IBM Case Manager 5.2.1.4 or later. 

SYMPTOM
When trying to configure IBM Case Manager with configuration tool, the FileNet P8 Content Platform Engine and the IBM Content Navigator URIs are configured on the profile. If the URIs provided are SSL secured and the SSL certificates are self-signed, after upgrading to IBM Case Manager 5.2.1.4 or later, a SSLHandshakeException will be logged in the configuration tool logs. 

A sample of the error message is as follows:
INFO Sat Feb 18 06:19:03 MYT 2017 The URI for server communication cannot be determined from the connection object https://<host>:<port>/wsi/FNCEWS40MTOM/. Message was: Received fatal alert: handshake_failure
FINER Sat Feb 18 06:19:03 MYT 2017 THROW
com.filenet.api.exception.EngineRuntimeException thrown while executing method testWork() of com.ibm.ecm.configmgr.app.acm.server.ContentEngineServer$TestActivity
Stack Trace follows (when available):
com.filenet.api.exception.EngineRuntimeException: FNRCA0031E: API_UNABLE_TO_USE_CONNECTION: The URI for server communication cannot be determined from the connection object https://<host>:<port>/wsi/FNCEWS40MTOM/. Message was: Received fatal alert: handshake_failure
at com.filenet.apiimpl.wsi.ServiceSessionNst.cOpenMultipartOutputStream(ServiceSessionNst.java:287)
at com.filenet.apiimpl.wsi.ServiceSessionNst.cReqRespPath(ServiceSessionNst.java:170)
...
...
Caused by: javax.net.ssl.SSLHandshakeException: Received fatal alert: handshake_failure
at com.ibm.jsse2.j.a(j.java:7)
at com.ibm.jsse2.j.a(j.java:27)
at com.ibm.jsse2.qc.b(qc.java:380)
at com.ibm.jsse2.qc.a(qc.java:271)
at com.ibm.jsse2.qc.h(qc.java:714)
at com.ibm.jsse2.qc.a(qc.java:831)
at com.ibm.jsse2.qc.startHandshake(qc.java:828)
at com.ibm.ws.ssl.config.WSSocket.startHandshake(WSSocket.java:414)


DIAGNOSING THE PROBLEM
If there are URI communication issues against an SSL end point, but no further details, enable Java-level SSL tracing to further diagnose the issue by adding the following line to the configmgr.ini or configmgr_cl.ini files: 

-Djavax.net.debug=all 

The output of the debug will be on the console, and not in the log files. However, the debug might log the SSLHandShakeException in the log file.


RESOLVING THE PROBLEM
To resolve the issue, import the missing self-signed certificate into the JVM keystore for the configuration tool. Information on how to do this is documented in the following technote: 

http://www.ibm.com/support/docview.wss?uid=swg21982251 [http://www.ibm.com/support/docview.wss?uid=swg21982251] 

If SSLHandShakeException or additional SSL issues arise, use the '-Djavax.net.debug=all' to further troubleshoot any additional certificate or SSL related issues.