Title: IBM Database operation failed. A SQL exception has occurred. The SQL error code is '-401'. - United States

Text:
CDC; Infosphere CDC; Infosphere Change Data Capture; Change Data Capture; ISCDC; IS-CDC; UDT; User Defined Type; -401; 42818; Database operation failed; The SQL error code is '-401'; The SQL state is: 42818 TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 Database operation failed.
A SQL exception has occurred. The SQL error code is '-401'. The SQL state is: 42818. The error message is:
DB2 SQL Error: SQLCODE=-401, SQLSTATE=42818, SQLERRMC==, DRIVER=3.65.77 

SYMPTOM
An error is generated (an replication stops) when trying to replicate UPDATE or DELETE: 

Database operation failed.
A SQL exception has occurred. The SQL error code is '-401'. The SQL state is: 42818. The error message is:
DB2 SQL Error: SQLCODE=-401, SQLSTATE=42818, SQLERRMC==, DRIVER=3.65.77

NOTE: 
It has been confirmed that it is possible for such error to be generated on DB2 and Sybase databases.
It has not been confirmed that for other database engines.


CAUSE
The UDT (User Defined Type) is a problem when it is used in WHERE clause for DELETE and UPDATE.

Example of UDT:
CREATE DISTINCT TYPE "<USER_DEFINED_TYPE_SCHEMA_NAME>"."<USER_DEFINED_TYPE_NAME>" AS <DATA_TYPE> WITH <OPTIONS>;


RESOLVING THE PROBLEM
There are 3 approaches in order to address the issue: 


1) Modyfying JDBC parameters

Modify the advance JDBC parameters in the configuration tool and set it to:

progressiveStreaming=2;currentFunctionPath="SYSIBM","SYSFUN","SYSPROC","SYSIBMADM","<USER_DEFINED_TYPE_SCHEMA_NAME>"

where "<USER_DEFINED_TYPE_SCHEMA_NAME>" is user/schema who created the user defined type <USER_DEFINED_TYPE_NAME>. 

This should be done in the config tool of the instance. 
While one is creating an instance, he will be asked "do you need to set advance parameters?". 

One can also edit an instance too by using dmconfigurets tool on the instance.


2) Create a unique index (or primary key) that doesn't involve <USER_DEFINED_TYPE_NAME> as part of the key.


3) Pick key columns in the Management Console.