Title: IBM IV32041: WEBSPHERE MQ V7 JMS CLIENT APPLICATION USING SELECTORS GETS WRONG MESSAGE DELIVERED AFTER MULTI-INSTANCE QMGR FAILOVER. - United States

Text:
  A FIX IS AVAILABLE
WebSphere MQ V7.0 Fix Pack 7.0.1.10 [http://www-01.ibm.com/support/docview.wss?uid=swg24034145]


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  A WebSphere MQ v7 JMS client application using a selector is
   working properly when connected to a multi-instance queue
   manager.  After the primary instance of the queue manager fails
   over to the secondary instance, the client reconnects but
   receives the wrong messages which do not match the selector.
   
   
    
   
   

LOCAL FIX

PROBLEM SUMMARY
 *  ****************************************************************
   USERS AFFECTED:
   This issue affects users of:
   
   - The WebSphere MQ V7.0.1 classes for JMS.
   - The WebSphere MQ V7.0.1 Resource Adapter.
   - The WebSphere Application Server V7 WebSphere MQ messaging
   provider.
   - The WebSphere Application Server V8 WebSphere MQ messaging
   provider.
   - The WebSphere Application Server V6.1 WebSphere MQ messaging
   provider who have configured the WebSphere variable
   MQ_INSTALL_ROOT to point to a WebSphere MQ V7.0.1 installation.
   
   This issue does not effect users of WebSphere classes for JMS
   V7.1 or V7.5
   
   Platforms affected:
   All Distributed (iSeries, all Unix and Windows) +Java +Java zOS
   ****************************************************************
   PROBLEM SUMMARY:
   A JMS Consumer was created with a message selector set which was
   correctly passed to the Queue Manager during the MQOPEN call.
   The multi-instance queue manager then falls over causing the
   WebSphere classes for JMS code to automatically reconnect to the
   secondary instance.
   
   The reconnect was successful but the application then received a
   message on this JMS Consumer that did not match the message
   selector that was original set.
   
   
    
   
   

PROBLEM CONCLUSION
 *  This APAR fixes the problem by ensuring that during the
   reconnect logic the Selection String is correctly set on the
   MQOD when the reconnecting MQOPEN is called.
   
   ---------------------------------------------------------------
   The fix is targeted for delivery in the following PTFs:
   
                      v7.0
   Platform           Fix Pack 7.0.1.10
   --------           --------------------
   Windows            U200352
   AIX                U853055
   HP-UX (PA-RISC)    U853082
   HP-UX (Itanium)    U853087
   Solaris (SPARC)    U853083
   Solaris (x86-64)   U853089
   iSeries            7.0.1.10
   Linux (x86)        U853084
   Linux (x86-64)     U853088
   Linux (zSeries)    U853085
   Linux (Power)      U853086
   zOS                7.0.1.10
   
   The latest available maintenance can be obtained from
   'WebSphere MQ Recommended Fixes'
   http://www-1.ibm.com/support/docview.wss?rs=171&uid=swg27006037 [http://www-1.ibm.com/support/docview.wss?rs=171&uid=swg27006037]
   
   If the maintenance level is not yet available information on
   its planned availability can be found in 'WebSphere MQ
   Planned Maintenance Release Dates'
   http://www-1.ibm.com/support/docview.wss?rs=171&uid=swg27006309 [http://www-1.ibm.com/support/docview.wss?rs=171&uid=swg27006309]
   ---------------------------------------------------------------
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   IV32041
   
   
 * REPORTED COMPONENT NAME
   WMQ LIN PPC V7
   
   
 * REPORTED COMPONENT ID
   5724H7227
   
   
 * REPORTED RELEASE
   701
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2012-11-16
   
   
 * CLOSED DATE
   2012-12-11
   
   
 * LAST MODIFIED DATE
   2012-12-11
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   WMQ LIN PPC V7
   
   
 * FIXED COMPONENT ID
   5724H7227
   
   

APPLICABLE COMPONENT LEVELS
 * R701 PSY
   UP