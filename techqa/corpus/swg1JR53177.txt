Title: IBM JR53177: SEO URL redirect causes an infinite loop and a timeout error occurs - United States

Text:
  FIXES ARE AVAILABLE
JR53438 - Mandatory cumulative Interim Fix for WebSphere Commerce Version 7 Feature Pack 8 [http://www-01.ibm.com/support/docview.wss?uid=swg24040268]
JR57861 - Mandatory cumulative Interim Fix 5 for WebSphere Commerce Version 7 Feature Pack 8 [http://www-01.ibm.com/support/docview.wss?uid=swg24043760]


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  When SEO URL Keywords are modified, any incoming request for the
   old URL is automatically redirected to the new URL. But when
   the new keywords are exactly same as the old keywords, the
   redirect logic goes into an infinite loop and the thread
   eventually times out.
   
   Trace files will include exceptions similar to the following
   message:
   
   TimeoutManage I   WTRN0124I: When the timeout occurred the
   thread with which the transaction is, or was
   most recently, associated was Thread[WebContainer : 16,5,main].
   
   The stack trace of this thread when the timeout occurred was:
    java.util.Collections.replaceAll(Collections.java:2027)
       at
   com.ibm.commerce.seo.redirect.RedirectEngine.remapURL(RedirectEn
   gine.java:232)
       at
   com.ibm.commerce.seo.redirect.RedirectEngine.getRedirectURL(Redi
   rectEngine.java:97)
   
   
    
   
   

LOCAL FIX

PROBLEM SUMMARY
 *  USERS AFFECTED:
   WebSphere Commerce V7 Feature Pack 6 or later.
   
   
   PROBLEM ABSTRACT:
   SEO URL redirect causes an infinite loop and a timeout error
   occurs
   
   BUSINESS IMPACT:
   CPU runs at high utilization and server response will become
   slow and eventually server goes down. When the server goes down,
    shoppers cannot access the store.
   
   RECOMMENDATION:
   
   
    
   
   

PROBLEM CONCLUSION
 *  RedirectEngine.remapURL method was modified to check that the
   new keyword does not equal the old keyword before calling the
   java.util.Collections.replaceAll method:
   
   if (newKeyword != null && !newKeyword.equals(originalKeyword))
   {
   Collections.replaceAll(urlTokens, originalKeyword, newKeyword);
   }
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   JR53177
   
   
 * REPORTED COMPONENT NAME
   WC BUS EDITION
   
   
 * REPORTED COMPONENT ID
   5724I3800
   
   
 * REPORTED RELEASE
   700
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2015-04-21
   
   
 * CLOSED DATE
   2015-06-03
   
   
 * LAST MODIFIED DATE
   2015-06-08
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   WC BUS EDITION
   
   
 * FIXED COMPONENT ID
   5724I3800
   
   

APPLICABLE COMPONENT LEVELS
 * R700 PSY
   UP