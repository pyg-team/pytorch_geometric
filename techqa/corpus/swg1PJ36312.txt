Title: IBM PJ36312: DATABASE ERROR ARITHMETIC OVERFLOW ERROR CONVERTING IDENTITY TO DATA TYPE INT REPORTED IN PROCESS TASK MANAGER OF PA EVERY MINUT - United States

Text:
 SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS DUPLICATE OF ANOTHER APAR.
    
   
   

ERROR DESCRIPTION
 *  ***PLEASE PROVIDE THE FOLLOWING INFORMATION
   THIS FIELD IS REQUIRED.***
   
   Description of Problem (full details)
   
   The error started to occur on the 4th of May. The customer
   states they have made no changes. Suddenly the error started to
   be reported every minute or so and no events are getting
   published.
   
   The customer noticed the error  Arithmetic overflow error
   converting IDENTITY to data type int reported in Process Task
   Manager of PA every minute and events are not getting published.
   Here is the full error stack:
   
   2009.05.04 19:08:21.673 Publisher start SEVERE Database error:
   java.sql.SQLException: [Microsoft][SQLServer 2000 Driver for
   JDBC][SQLServer]Arithmetic overflow error converting IDENTITY to
   data type int.
    at
   com.microsoft.jdbc.base.BaseExceptions.createException(Unknown
   Source)
    at com.microsoft.jdbc.base.BaseExceptions.getException(Unknown
   Source)
    at
   com.microsoft.jdbc.sqlserver.tds.TDSRequest.processErrorToken(Un
   known
   Source)
    at
   com.microsoft.jdbc.sqlserver.tds.TDSRequest.processReplyToken(Un
   known
   Source)
    at
   com.microsoft.jdbc.sqlserver.tds.TDSExecuteRequest.processReplyT
   oken(Unknown
   Source)
    at
   com.microsoft.jdbc.sqlserver.tds.TDSRequest.processReply(Unknown
   Source)
    at
   com.microsoft.jdbc.sqlserver.SQLServerImplStatement.getNextResul
   tType(Unknown
   Source)
    at
   com.microsoft.jdbc.base.BaseStatement.commonTransitionToState(Un
   known
   Source)
    at
   com.microsoft.jdbc.base.BaseStatement.postImplExecute(Unknown
   Source)
    at com.microsoft.jdbc.base.BaseStatement.commonExecute(Unknown
   Source)
    at
   com.microsoft.jdbc.base.BaseStatement.executeInternal(Unknown
   Source)
    at com.microsoft.jdbc.base.BaseStatement.execute(Unknown
   Source)
    at
   filenet.pa.publisher.fact.FactDataEnvironment.bulkInsert(Unknown
   Source)
    at filenet.pa.publisher.fact.BulkFactTable.update(Unknown
   Source)
    at filenet.pa.publisher.fact.FactManager.startUpdate(Unknown
   Source)
    at filenet.pa.publisher.Publisher.start(Unknown Source)
    at filenet.pa.main.PARunnable.run(Unknown Source)
    at java.lang.Thread.run(Thread.java:534)
   
   I could not find the error reported for any PA issue in our
   database. From looking on the web however at what this error
   refers to I found the following:
   
   http://www.sql-server-performance.com/faq/identity_integer_scope [http://www.sql-server-performance.com/faq/identity_integer_scope]
   _p1.aspx
   
   http://stackoverflow.com/questions/261815/upper-limit-for-autoin [http://stackoverflow.com/questions/261815/upper-limit-for-autoin]
   crement-primary-key-in-sql-server
   
   the second link in particular appears helpful and provided two
   possible solutions.
   
   So the error appears to point to a problem with a SQL statement
   trying to insert an integer value that is bigger than the
   maximum possible value allowed by SQL Server. I am unable to
   determine however which table it is referring to or why this
   started to occur.
   
   To try to find out more as to what the table and value is I
   requested the following:
   SQL Server log
   SQL Profiler trace
   
   Unfortunately the trace files that were provided did not show
   the error or any indication as to what the problem may be.
   
   No errors appear in the Application Event log either. One thing
   to note also is that the VMAEDM database is very large: 2061 Gb
   (2 Terrabyte). They have it divided into separate drives. They
   cannot prune as they have to keep the data for legal reasons.
   They have been working for the past two years to try to write
   the information to tiff images but this project has not been
   completed.
   
   How long has the problem been occurring (recent changes)? : It
   started to occur on the 4th of May.
   
   Does this occur on more than one station / server? : no
   
   Is there a workaround? : Not at this time.
   
   What is the impact to the customer/system? :
   The PA server is currently down. The customer is not able to
   publish any events.
   
   Can the problem be replicated on an internal system?  N
   By Who (L3, Support, etc..)
   
   Steps to Reproduce:
    N/A
   
   (Only can be seen at the customer site.)
   
   
   
   Actual Results:
   Customer receives error: Arithmetic overflow error converting
   IDENTITY to data type int
   
   Expected Results:
   That the error does not appear and events get published.
   
   Are there any similar or related Defects? If Y provide ECMDB #s
   N
   
   What logs were collected and where are they located?
   pa.log (Located in zip file PAIssue5609.zip)
   SQL server Error log files.
   SQL Profiler traces. (The later SQL Profiler traces uploaded at
   around 11.46 today have more tracing options enabled including
   Error.)
   inspectpa output. (Located in zip file PAIssue5609.zip)
   
   Attachment location is as follows:
   
   https://ecurep.mainz.de.ibm.com/aex/browseServer.jsp?browseDirec
   tory=/ecurep/pmr/6/2/62423,370,000 [https://ecurep.mainz.de.ibm.com/aex/browseServer.jsp?browseDirectory=/ecurep/pmr/6/2/62423,370,000]
   
   Configuration/Environment :
   Server OS : Windows 2003 SP1
   Client OS :
   Database : SQL Server 2000 SP4
   Network:
   App Server :
   Browser :
   Note if non US Language:
   Other Product Component Versions:
   
   P8PE-3.5.3
   P8PA-3.5.1-003
   
   
   Non Web Environment  Y or N
   
   
    
   
   

LOCAL FIX

PROBLEM SUMMARY

PROBLEM CONCLUSION

TEMPORARY FIX

COMMENTS
 *  This APAR is a duplicate of PJ36313 [http://www-01.ibm.com/support/docview.wss?uid=swg1PJ36313]
   
   
    
   
   

APAR INFORMATION
 * APAR NUMBER
   PJ36312
   
   
 * REPORTED COMPONENT NAME
   PROCESS ANALYZE
   
   
 * REPORTED COMPONENT ID
   5724R7603
   
   
 * REPORTED RELEASE
   352
   
   
 * STATUS
   CLOSED DUB
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2009-05-14
   
   
 * CLOSED DATE
   2009-06-22
   
   
 * LAST MODIFIED DATE
   2010-01-19
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION

APPLICABLE COMPONENT LEVELS