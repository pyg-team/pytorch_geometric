Title: IBM Timeout error while searching for the Document or ICC Mail 3 document class objects in Enterprise Manager - United States

Text:
ORA-12592 TNS bad packet ICC IBM Content Collector CSS Content Search Services FEM FileNet Enterprise Manager CE Content Engine search timeout TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 Attempts to search for "Document" or "ICC Mail 3" document class objects using the IBM ECM P8 FileNet Enterprise Manager (FEM) results in a time out message: ErrorCode 12,592 'ORA-12592: TNS:bad packet' 

SYMPTOM
After an IBM ECM P8 FileNet P8 (P8) system with an IBM Content Collector (ICC) acting as a document injector, and Content Search Services (CSS), acting as an indexing server, reaches around 5 million rows in a specific Object Store DocVersion table, searching for "Document" or "ICC Mail 3" class documents using any number of conditions times-out after 31 minutes with the following error code: 


ErrorCode 12,592 'ORA-12592: TNS:bad packet'


CAUSE
An ICC deployment requires the "ICC Mail 3" document class to be present on the P8 Content Engine (CE) Object Store. Typically, this "ICC Mail 3" document class would have a variable number of document sub classes to cover different kinds of use cases and requirements set forward by the user.

When a search is performed on top of the "ICC Mail 3" document class in FEM, an SQL statement is generated by the application that has a structure similar to the following:

WHERE ((T0.object_class_id IN 
(:1, :2, :3, :4, :5, :6, :7, :8, :9, :10, :11))

These place holders are replaced by the GUID values of the "ICC Mail 3" document class and its subclasses.

This SQL construct could have a detrimental effect when performing the query on the database table.



ENVIRONMENT
IBM ECM P8 FileNet Content Engine 5.1
IBM Content Collector 2.2+
Content Search Services 5.1



RESOLVING THE PROBLEM
 

 * A non-unique index on top of the object_class_id column in the DocVersion table needs to be built by the database administrator. 
 * This operation must be performed while no other client is accessing the actual database and the mentioned table. 
 * It is therefore recommended that the Content Engine, Content Search Services and Content Collector are all shutdown and disengaged from the database at the time of making this change.