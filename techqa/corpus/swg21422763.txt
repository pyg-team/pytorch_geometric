Title: IBM WebSphere Portal Server v6.1 hangs in profiling mode with "memory analysis" mode/option - United States

Text:
transaction timed out; hung; hang; tptp; profiling; WSVR0605W; server; jsdk; jvm; update; j2se; java; server fixpack; websphere; update installer; installation manager; bug; bugzilla; 283199; eclipse; plugin; RAD; RAC TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 While using IBM Rational Application Developer for WebSphere Software v7.5.3 in profile mode, attempts to profile an application by starting the WebSphere Portal Server v6.1 (on WebSphere Application Server 7.0.0.5 or 6.1.0.23) in "memory analysis" mode results in a delayed start, a server hang and the following error is seen "transaction timed out". 

SYMPTOM
The Rational Application Developer server console does not open for more than 45 minutes and threads are hung in server. 

Same problem if using a remote server started in profiling mode. In some cases there is no response on the remote server started in profiling mode, and the Rational Agent Controller profiler is not attached/engaged. 

Note: Works with profiling for "execution time" mode.



CAUSE
This is caused by defects in the WebSphere Application Server v7.0.0.5 or v6.1.0.23 Server J2SE/JDK/Java SDK JVM. The specific sever JDK defects were not identified.



DIAGNOSING THE PROBLEM
The WebSphere Application Server v7.0.0.5 server System.Out trace excerpt shows a hang:

[2/19/10 15:28:17:347 IST] 00000003 ThreadMonitor W WSVR0605W: Thread 
"WebContainer : 0" (0000002a) has been active for 693322 milliseconds 
and may be hung. There is/are 1 thread(s) in total in the server that
may be hung.
at java.util.zip.ZipFile.close(Native Method)
at java.util.zip.ZipFile.close(ZipFile.java:377)
at com.ibm.ws.classloader.ZipFileHandle.close(ZipFileHandle.java:52)
at com.ibm.ws.classloader.SinglePathClassProvider$ZipFileCache.removeEldest
...
..



RESOLVING THE PROBLEM
Upgrade to the following releases: 

 1. Download and install Rational Application Developer for WebSphere Software v7.5.5 [http://www.ibm.com/support/docview.wss?rs=2042&uid=swg24025148] which has latest Portal Server Tools updates and Eclipse TPTP/Profiling Tools Fixes
    
 2. Apply the latest JDK updates for WebSphere Application Server v7.0.0.x and WebSphere Application Server v6.1.0.x. The key being the server JDSK/J2SE/Java SE update (a separate update).  1. If the WebSphere Portal Server v6.1 is installed over a separate/stand-alone WebSphere Application Server v6.1 or 7.0 server instead of the Rational Application Developer v7.5 local WebSphere Application Server v7.0, you will need to download the server and JDK updates from the WebSphere Application Server Support site and use the latest WebSphere Update Installer.
        Latest server updates are on the WebSphere Support Site/Portal - Downloads - Latest Fixpacks: 
        http://www-947.ibm.com/support/entry/portal/Downloads/Software/WebSphere/WebSphere_Application_Server [http://www-947.ibm.com/support/entry/portal/Downloads/Software/WebSphere/WebSphere_Application_Server]
        
        For example, outside of Rational Application Developer, the following server plus JDK updates do not have this profiling hang profiling problem:  * 7.0.0.7: WebSphere Application Server V7.0 Fix Pack 7 for Windows
           http://www.ibm.com/support/docview.wss?rs=180&uid=swg24024587 [http://www.ibm.com/support/docview.wss?rs=180&uid=swg24024587] 
         * 7.0.0.7: Java SDK 1.6 SR6 Cumulative Fix for WebSphere Application Server
           http://www.ibm.com/support/docview.wss?rs=180&uid=swg24024588 [http://www.ibm.com/support/docview.wss?rs=180&uid=swg24024588] 
         * 6.1.0.29: WebSphere Application Server V6.1 Fix Pack 29 for Windows
           http://www.ibm.com/support/docview.wss?rs=180&uid=swg24025190 [http://www.ibm.com/support/docview.wss?rs=180&uid=swg24025190] 
         * 6.1.0.29: Java SDK 1.5 SR11 Cumulative Fix for WebSphere Application Server 
           http://www.ibm.com/support/docview.wss?rs=180&uid=swg24025191 [http://www.ibm.com/support/docview.wss?rs=180&uid=swg24025191]
           
           Latest server updates are on the WebSphere Support Site/Portal - Downloads - Latest Fixpacks:
           http://www-947.ibm.com/support/entry/portal/Downloads/Software/WebSphere/WebSphere_Application_Server [http://www-947.ibm.com/support/entry/portal/Downloads/Software/WebSphere/WebSphere_Application_Server]
           
           
        
        
     2. If the WebSphere Portal Server v6.1 is installed over the Rational Application Developer v7.5 local WebSphere Application Server v7.0 in {Rational Application Developer v7.5 Install dir}\SDP75\runtimes\base_v7 or the local WebSphere Application Server v6.1, when using IBM Installation Manager to upgrade to Rational Application Developer v7.5.5
        you will also have the option to update the local WebSphere Application Server7.0 and v6.1 servers, which will also update the server JDK.
        
        Note: As part of the Rational Application Developer v7.5 WebSphere Application Server v7.0 local install you also have a recent WebSphere Update Installer available on your machine. 
        For example, if you updated to WebSphere Application Server v7.0.0.7 as part of the Rational Application Developer v7.5.5 using IBM Installation Manager, you have installed Update Installer for WebSphere software v7.0.0.5.
        
        In the case of Rational Application Developer v7.5 "local" server updates if you are using IBM Installation Manager, do not use Update Installer for WebSphere software v7.0.0.5. Otherwise you cannot go back to using Installation Manager for Rational Application Developer v7.5 "local" server updates (a current product limitation).
        
        
    
    
 3. Update Rational Agent Controller
    
    First, ensure you are on the minimum WebSphere Application Server v6x/7x server plus JDK updates as per item 2. (above), then apply the appropriate updates below:
    
    Note the Rational Agent Controller version on the two platforms below are different.  * AIX: Rational Agent Controller v8.2.2. This release will contain the official fix and will be released in the near future. Refer to: Available releases of IBM Rational Agent Controller under related information section.
       
       WORKAROUND: Apply Rational Agent Controller v8.2.0.1 [http://www.ibm.com/support/docview.wss?uid=swg24023999] and request a testfix from IBM Rational Support for Eclipse TPTP Bug 283199 [https://bugs.eclipse.org/bugs/show_bug.cgi?id=283199].
       
       
     * Windows Server: Rational Agent Controller v8.1.3 [http://www.ibm.com/support/docview.wss?uid=swg24025026]
       On a local supported Windows or Linux Development Environment, update to Rational Application Developer for WebSphere Software v7.5.5 [http://www.ibm.com/support/docview.wss?rs=2042&uid=swg24025148]
       
       Note: For local integrated Rational Agent Controller profiling in Rational Application Developer v7.5.5 with a local server on Windows, the equivalent of Rational Agent Controller v8.1.3 under this latest plugin: {RAD75x Install Dir}\SDPShared\plugins\org.eclipse.tptp.platform.ac.win_ia32_4.4.104.v200910140007
    
    

RELATED INFORMATION
#Available releases of IBM Rational Agent Controller [http://www.ibm.com/support/docview.wss?uid=swg27013420]