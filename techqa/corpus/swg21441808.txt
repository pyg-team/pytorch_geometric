Title: IBM "Troubleshooting TypeLoadException: Cannot load 'YourPackage.YourClass" when using HTDS - United States

Text:
HTDS; RES.NET TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 A TypeLoadException is generated with a stack trace indicating that an Execution Object model (XOM) class cannot be parsed. 

SYMPTOM
 

An error message similar to this one is logged
Ruleset /MYRuleApp/1.0/MyRuleSet/1.0 parsing error Caused by : System.TypeLoadException was caught Message="Cannot load 'YourPackage.YourClass'" 
Source="ILOG.Rules.RuleEngine" StackTrace: 
at ILOG.Rules.RuleSetBuilder.FindReflectClass(String fullName) 
at ILOG.Rules.RuleSetBuilder.InParameter(String name, String type) 
at ILOG.Rules.RuleSet.CompileRuleSetParameters() 
at ILOG.Rules.RuleSet.LoadBinaryRuleSet(Stream stream) 
at ILOG.Rules.ExecutionServer.Xu.RulesetExecution.InitRuleset(String path, Byte[] data, String displayName, String description, Boolean debugEnabled) 


CAUSE
This indicates that while loading your Executable Assembly, a class referenced by the Business Objects Model (BOM) cannot be accessed. There are two possible causes for this error: 

 1. The class assembly is not available in the Execution Directory (default : C:\Program 
    Files\IBM\WebSphere\ILOG Rules for .NET\Rule Execution Server for 
    .NET\Bin\Execution\ExecutionBaseDir ).  * This parameter is configured by property (ILOG.Rules.ExecutionServer.Execution.BaseDirectory) in C:\Program Files\IBM\WebSphere\ILOG Rules for .NET\Rule Execution Server for .NET\Bin\Execution\IISIntegration\Web.config 
     * The referenced class assembly was not deployed on the Rule Execution Server (RES) machine. Beware of that if you use the sample, as the MSBuild script will only make a local deployment
    
    
 2. YourClass or one of its parent is missing the [Serializable] attribute, and cannot be passed (serialized) to the RES environment.

DIAGNOSING THE PROBLEM
In the RES Console, navigate down to the WSDL service of your ruleset, the previous stack trace would be displayed in case of problem. 

You may find the RES console in ("C:\Program Files\IBM\WebSphere\ILOG Rules for .NET\Rule Execution Server for .NET\Bin\Management\Rule Execution Server Console.msc") , 


RESOLVING THE PROBLEM
If you are working locally, you can copy/edit the MSBuild file in the HTDS Sample [http://publib.boulder.ibm.com/infocenter/brdotnet/v7r1/index.jsp?topic=/com.ibm.websphere.ilog.brdotnet.doc/Content/Business_Rules/Documentation/_pubskel/Rules_for_DotNET/ps_RFDN_Global905.html] to do the deployment. 

Otherwise ensure that persistence is set, launching the RES console would detect it. 

 Deploy the BOM Class Library assembly in the Execution directory. 

Check your code for [Serializable] attribute on each BOM classes (and ancestors). 

RELATED INFORMATION
#MsBuild use in HTDS Sample [http://publib.boulder.ibm.com/infocenter/brdotnet/v7r1/topic/com.ibm.websphere.ilog.brdotnet.doc/Content/Business_Rules/Documentation/_pubskel/Rules_for_DotNET/ps_RFDN_Global905.html]