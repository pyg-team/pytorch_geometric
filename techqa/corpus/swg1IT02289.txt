Title: IBM IT02289: CHANNELS REPORT AMQ9514 ERRORS AND AGENT PROCESSES TERMINATE WITH PROBE ID XC130004 - United States

Text:
 SUBSCRIBE TO THIS APAR
By subscribing, you receive periodic emails alerting you to the status of the APAR, along with a link to the fix after it becomes available. You can track this item individually or track all items by product.

Notify me when this APAR changes.

Notify me when an APAR for this component changes.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  WebSphere MQ (WMQ) v7.5 repeatedly reports AMQ9514: channels
   in use errors for multiple channels.
   AMQ9514: Channel 'CHANNEL.NAME' is in use.
   
   These channels are not able to restart.
   
   First Failure Symptom Reports (FDC) are generated. The first
   one is for the agent process, amqzlaa0, and this process ends.
   This leads to other queue manager FDCs and problems as any
   process using this agent would not be able to continue.
   
   The FDC reports:
   
   Probe Id :- XC130004
   Component :- xehExceptionHandler
   Program Name :- amqzlaa0
   Major Errorcode :- STOP
   Probe Type :- HALT6109
   Comment1 :- SIGSEGV: address not mapped(0xc)
   
   MQM Function Stack
   zlaMainThread
   zlaProcessMessage
   zlaProcessSPIRequest
   zlaSPIKernel
   zsqSPIKernel
   kpiGeneric
   kqiQueryConn
   kqiObjectLLToResponse
   xcsFFST
   
   FDCs are generated by other processes reporting a WaitEvent
   
   Probe Id :- XC332255
   Component :- xlsWaitEvent
   
   MQM Function Stack
   amqzmuc0 (Or other process name)
   xcsWaitEventSem
   xlsWaitEvent
   xcsFFST
   
   If any other applications or processes used by that agent
   had queues open for exclusive use, they would remain in
   that state and errors reporting connection broken will be
   generated.
   
   AMQ9510: Messages cannot be retrieved from a queue.
   EXPLANATION:
   The attempt to get messages from queue 'QUEUE.NAME' on queue
   manager 'QMGR1' failed with reason code 2009.
   
   The connected application for the agent process which
   terminated was runmqsc to display connection status.
   DIS CONN
   
   This is not cleared up until the queue manager is restarted.
   
   
   Additional Symptom(s) Search Keyword(s):
   
   
    
   
   

LOCAL FIX
 *  restart the queue manager
   
   
    
   
   

PROBLEM SUMMARY
 *  ****************************************************************
   USERS AFFECTED:
   This is a small timing window that could potentially affect any
   user of the runmqsc "DIS CONN" command.
   
   
   Platforms affected:
   AIX, HP-UX Itanium, HP-UX PA-RISC, IBM iSeries, Linux on Power,
   Linux on S390, Linux on x86, Linux on x86-64, Linux on zSeries,
   Solaris SPARC, Solaris x86-64, Windows
   
   ****************************************************************
   PROBLEM DESCRIPTION:
   When a connection being queried by the DIS CONN command
   undergoes a significant change of state (for example the
   transaction associated with the connection ends) the DIS CONN
   should recognise the change and collect a fresh, more consistent
   set of data for that connection.
   Under rare circumstances this processing can lead to an
   exception in the queue manager kernel which can lead to a subset
   of connections being broken, and MQ resources locked to those
   connections remaining locked until the queue manager is next
   restarted.
   
   The key facts to look for when identifying duplicates of this
   issue is the presence of kqiQueryConn on the stack of a failing
   thread, and the amqzxma0 process reporting the abrupt
   termination of an amqzlaa0 process.
   
   
    
   
   

PROBLEM CONCLUSION
 *  The code has been altered to prevent the timing window which
   triggered the SIGSEGV.
   
   ---------------------------------------------------------------
   The fix is targeted for delivery in the following PTFs:
   
   Version    Maintenance Level
   v7.5       7.5.0.5
   
   The latest available maintenance can be obtained from
   'WebSphere MQ Recommended Fixes'
   http://www-1.ibm.com/support/docview.wss?rs=171&uid=swg27006037 [http://www-1.ibm.com/support/docview.wss?rs=171&uid=swg27006037]
   
   If the maintenance level is not yet available information on
   its planned availability can be found in 'WebSphere MQ
   Planned Maintenance Release Dates'
   http://www-1.ibm.com/support/docview.wss?rs=171&uid=swg27006309 [http://www-1.ibm.com/support/docview.wss?rs=171&uid=swg27006309]
   ---------------------------------------------------------------
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   IT02289
   
   
 * REPORTED COMPONENT NAME
   WMQ BASE MULTIP
   
   
 * REPORTED COMPONENT ID
   5724H7241
   
   
 * REPORTED RELEASE
   750
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2014-06-05
   
   
 * CLOSED DATE
   2014-07-21
   
   
 * LAST MODIFIED DATE
   2014-07-21
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   WMQ BASE MULTIP
   
   
 * FIXED COMPONENT ID
   5724H7241
   
   

APPLICABLE COMPONENT LEVELS
 * R750 PSY
   UP