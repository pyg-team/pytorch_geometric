Title: IBM Profile Creation as non-root fails on Environment Selection dialog - United States

Text:
profile; creation; pmt; nonroot; non-root; nonadmin; non-admin; Administrator; root; user; permissions; ports; conflicts; serverindex; error; v6.1; v7.0; v6.0; v6.0.2; 6.0.2; admin was appserver app server TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 During profile creation as a non-root user, if you click the Next button on the Environment Selection dialog, it will not appear to do anything. You will be unable to continue creation of a profile regardless of what kind of profile type was chosen. 

DIAGNOSING THE PROBLEM
Using the profile creation tool creates a log of events in <WAS_HOME>/logs/manageprofiles/pmt.log . The messages close to the bottom of the log indicate that the file serverindex.xml is unable to be opened from an existing profile. This file is used to determine any port conflicts when creating a new profile. 




<record>
<date>2009-03-13T15:15:49</date>
<millis>1236971749294</millis>
<sequence>4390</sequence>
<logger>com.ibm.ws.pmt.uiutilities.WSProfileUtilities</logger>
<level>WARNING</level>
<class>com.ibm.ws.install.configmanager.logging.LogUtils</class>
<method>logException</method>
<thread>10</thread>
<message>com.ibm.wsspi.profile.WSProfileException: java.io.FileNotFoundException: 
C:\Program Files\IBM\WebSphere\AppServer\profiles\AppSrv01\config\cells\4235345Cell01\nodes\4235345Node01\serverindex.xml (Access is denied.)
at com.ibm.ws.profile.utils.PortResolutionUtils.createPortConflictResolver(PortResolutionUtils.java:872)
at com.ibm.ws.profile.utils.PortResolutionUtils.recommendPorts(PortResolutionUtils.java:214)
at com.ibm.ws.profile.utils.PortResolutionUtils.determineRecommendedPorts(PortResolutionUtils.java:471)
at com.ibm.ws.pmt.uiutilities.WSProfileUtilities.determineRecommendedPorts(WSProfileUtilities.java:259)
at com.ibm.ws.pmt.wizards.fragments.PortsPanel.getRecomendedPorts(PortsPanel.java:381)
<<REST OF STACK TRACE>>
...
</record> 
RESOLVING THE PROBLEM
This is a permissions issue caused by the automatic port detection routine. If any profiles already exist and were created as a different user, the port detection routine will try to open the serverindex.xml file in each profile and will fail.

Follow the steps below to resolve this issue and allow non-root users to create profiles: 

 1. Read the instructions in the Knowledge Center to allow non-root users to manage profiles. 
    
    WebSphere Application Server V9.0
    Managing profiles for non-root users [http://www.ibm.com/support/knowledgecenter/SSEQTP_9.0.0/com.ibm.websphere.base.doc/ae/tpro_manage_nonroot.html]
    
    WebSphere Application Server V8.5
    Managing profiles for non-root users [http://www.ibm.com/support/knowledgecenter/SSEQTP_8.5.5/com.ibm.websphere.base.doc/ae/tpro_manage_nonroot.html]
    
    WebSphere Application Server V7.0 and V6.1 instructions are the same.
    Managing profiles for non-root users [http://publib.boulder.ibm.com/infocenter/wasinfo/v7r0/topic/com.ibm.websphere.nd.multiplatform.doc/info/ae/ae/tpro_manage_nonroot.html]
    
 2. Set the permissions on all serverindex.xml files so the non-root users can access these files.
    
    
 3. Rerun the profile management tool and create your profile.

 

Cross reference information Segment Product Component Platform Version Edition Application Servers WebSphere Application Server - Express Install and migration AIX, HP-UX, i5/OS, Linux, Solaris, Windows 7.0, 6.1, 6.0.2, 6.0.1, 6.0