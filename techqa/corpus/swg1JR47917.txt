Title: IBM JR47917: IF USER NAME CONTAINS SPECIAL GERMAN CHARACTER "รก" FIRST LOGIN WILL BE SUCCESSFUL, SECOND LOGIN RESULTS IN AN ERROR. - United States

Text:
  FIXES ARE AVAILABLE
Version 7.5.1 Fix Pack 2 for the IBM Business Process Manager products [http://www-01.ibm.com/support/docview.wss?uid=swg24036462]
Version 8.5 Refresh Pack 5 for the IBM Business Process Manager products [http://www-01.ibm.com/support/docview.wss?uid=swg24037683]
Download Version 8.0.1 Fix Pack 3 for the IBM Business Process Manager products [http://www-01.ibm.com/support/docview.wss?uid=swg24037734]


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  The problem occurs because the login userID and the userID
   stored on the database are compared case insensitively using
   the Java toUpperCase method on the login userID. This method
   treats the German '&#65505; ' special - according to the Unicode
   specification - and maps it to 'SS'.
   
   Error in trace:
   
   com.ibm.ws.rsadapter.jdbc.WSJccSQLJConnection@73217321
                                    select
   t0.USER_ID,t0.USER_NAME,t0.FULL_NAME,t0.PROVIDER from
   LSW_USR_XREF t0
   where UPPER(USER_NAME) = ?
                                    TYPE FORWARD ONLY (1003)
                                    CONCUR READ ONLY (1007)
   [12/09/13 13:10:25:900 CEST] 00000071 clientinfoplu <
   prepareStatement
   Exit
   
   com.ibm.ws.rsadapter.jdbc.WSJccPreparedStatement@3d003d00
   [12/09/13 13:10:25:903 CEST] 00000071 wle           1
   com.lombardisoftware.core.ExceptionHandler ensureSerializable
   ensureSerializable(org.springframework.dao.DataIntegrityViolatio
   nExcepti
   on: PreparedStatementCallback; SQL [insert into LSW_USR_XREF
   (USER_ID,USER_NAME,FULL_NAME,PROVIDER) values (?,?,?,?)]; Error
   for
   batch element #1: DB2 SQL Error: SQLCODE=-803, SQLSTATE=23505,
   SQLERRMC=2;DB2ADMIN.LSW_USR_XREF, DRIVER=3.61.65; nested
   exception is
   com.ibm.db2.jcc.am.SqlIntegrityConstraintViolationException:
   Error for
   batch element #1: DB2 SQL Error: SQLCODE=-803, SQLSTATE=23505,
   SQLERRMC=2;DB2ADMIN.LSW_USR_XREF, DRIVER=3.61.65)
   [12/09/13 13:10:25:914 CEST] 00000071 wle           1
   com.lombardisoftware.utility.spring.ProgrammaticTransactionSuppo
   rt
   execute execute ended with exception
   
   com.lombardisoftware.core.TeamWorksRuntimeException:
   com.lombardisoftware.core.TeamWorksException:
   PreparedStatementCallback;
   SQL [insert into LSW_USR_XREF
   (USER_ID,USER_NAME,FULL_NAME,PROVIDER)
   values (?,?,?,?)]; Error for batch element #1: DB2 SQL Error:
   SQLCODE=-803, SQLSTATE=23505, SQLERRMC=2;DB2ADMIN.LSW_USR_XREF,
   ,
   DRIVER=3.61.65; nested exception is
   com.ibm.db2.jcc.am.SqlIntegrityConstraintViolationException:
   Error for
   batch element #1: DB2 SQL Error: SQLCODE=-803, SQLSTATE=23505,
   SQLERRMC=2;DB2ADMIN.LSW_USR_XREF, DRIVER=3.61.65
   
   
    
   
   

LOCAL FIX
 *  n/a
   
   
    
   
   

PROBLEM SUMMARY
 *  If user name contains special German characters "sz" (&#225;), login
   results in an error.
   
   PROBLEM DETAILED DESCRIPTION:
   If the user name contains the special German character "sz" (&#225;),
   the user cannot log-in after a server restart.
   A SQL error similar to the following occurs:
   
   CWLLG2229E: An exception occurred in an EJB call.  Error:
   com.lombardisoftware.core.TeamWorksException:
   PreparedStatementCallback; SQL [insert into LSW_USR_XREF
   (USER_ID,USER_NAME,FULL_NAME,PROVIDER) values (?,?,?,?)];
   Error for batch element #1: DB2
   
   SQL Error: SQLCODE=-803, SQLSTATE=23505,
   SQLERRMC=2;DB2ADMIN.LSW_USR_XREF, DRIVER=3.61.65;
   nested exception is
   com.ibm.db2.jcc.am.SqlIntegrityConstraintViolationException:
   Error for batch element #1: DB2 SQL Error: SQLCODE=-803,
   SQLSTATE=23505, SQLERRMC=2;DB2ADMIN.LSW_USR_XREF, DRIVER=3.61.65
   
   The user cannot log-in because the log-in user ID and the user
   ID stored on the database are compared case insensitively
   using the Java toUpperCase method on the log-in user ID and the
   SQL UPPER function on the user ID stored on the database.
   The Java method, however, treats the German "sz" special and
   maps it to 'SS' while the SQL UPPER function leaves the "sz"
   as-is.
   
   The SQL error occurs because the user is not found using the
   incorrect comparison. Trying to insert the user (again)
   in the LSW_USR_XREF table violates a primary key constraint
   violation. Completion of the requested INSERT would result
   in duplicate user IDs.
   
   
    
   
   

PROBLEM CONCLUSION
 *  This interim fix corrects the comparison code so that the SQL
   UPPER function is applied to the log-in user ID instead of the
   Java toUpperCase method.
   
   
   FIX AVAILABILITY:
   iFix for 7.5.1.1 is available on Fix Central, search for APAR
   JR47917 at http://www.ibm.com/support/fixcentral/ [http://www.ibm.com/support/fixcentral/]
   V7.5.1, BPM 8.0.1
   
   When obtaining any of the above fixes, be sure to download the
   accompanying readme, for itself, and any prerequisite fixes, and
   review them thorougly.
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   JR47917
   
   
 * REPORTED COMPONENT NAME
   BPM STANDARD
   
   
 * REPORTED COMPONENT ID
   5725C9500
   
   
 * REPORTED RELEASE
   751
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2013-09-27
   
   
 * CLOSED DATE
   2013-12-09
   
   
 * LAST MODIFIED DATE
   2013-12-09
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   BPM STANDARD
   
   
 * FIXED COMPONENT ID
   5725C9500
   
   

APPLICABLE COMPONENT LEVELS
 * R751 PSY
   UP