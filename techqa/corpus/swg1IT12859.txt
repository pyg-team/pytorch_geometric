Title: IBM IT12859: Probe ID VP009006 vrcE_BAD_VERSION - AMQ7925 message version 3 is not supported - United States

Text:
 SUBSCRIBE TO THIS APAR
By subscribing, you receive periodic emails alerting you to the status of the APAR, along with a link to the fix after it becomes available. You can track this item individually or track all items by product.

Notify me when this APAR changes.

Notify me when an APAR for this component changes.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  An FFDC is generated by an V5.3 queue manager running on HP
   NonStop Server (NSS) when the MQ Explorer connects to it via an
   intermediary queue manager.  The FFDC generated reports the
   error "AMQ7925: Message version 3 is not supported" as follows:
   
   
   ! WebSphere MQ First Failure Symptom Report
   ! =========================================
    ! Date/Time         :- Wednesday December 23 06:58:44 EST 2015
    ! Host Name         :- myhost (NONSTOP_KERNEL J06.19)
    ! PIDS              :- 5724A3901
    ! LVLS              :- 531.10  FP53110
    ! Product Long Name :- WebSphere MQ for HP NonStop Server
    ! Vendor            :- IBM
   ! Probe Id          :- VP009006
   ! Application Name  :- MQM
   ! Component         :- vwb_admin
   ! Build Date        :- Jun 16 2014
   ! CMVC level        :- L20140616-1608
   ! Build Type        :- IKAP - (Production)
   ! UserID            :- 44,3 (MQM.USER)
   ! Program Name      :- /home/user/wmq531.10/opt/mqm/bin/amqpcsea
   ! Process           :- 0,961 $Z86L OSS(1358954517)
   ! QueueManager      :- MY_QMGR
   ! Major Errorcode   :- vrcE_BAD_VERSION
   ! Minor Errorcode   :- OK
   ! Probe Type        :- MSGAMQ7925
   ! Probe Severity    :- 2
   ! Probe Description :- AMQ7925: Message version 3 is not
   supported.
   ! FDCSequenceNumber :- 0
   ! Arith1            :- 3 3
   +----------------------------------------------------------
   
   This occurs when the intermediary queue manager to which the MQ
   Explorer is connected to is a more recent version (V6 or later)
   than the V5.3 NSS queue manager.
   
   The problem does not occur when the MQ Explorer connects
   directly to the V5.3 NSS queue manager.
   
   
    
   
   

LOCAL FIX
 *  Configure the MQ Explorer to connect directly to the V5.3 NSS
   queue manager and not via an intermediate queue manager.
   
   
    
   
   

PROBLEM SUMMARY
 *  ****************************************************************
   USERS AFFECTED:
   This issue affects users of:
   
   - The IBM MQ v7.5
   - The IBM MQ v8.0
   - The IBM MQ v9.0
   
   who are connecting to lower version queue managers (less than
   v6) via a more recent intermediate queue manager.
   
   
   Platforms affected:
   MultiPlatform
   
   ****************************************************************
   PROBLEM DESCRIPTION:
   The MQ Explorer was attempting to gain some information from the
   queue manager, for example, attempting to determine if the queue
   manager is within a MQ cluster by sending a PCF message with the
   command message:  MQCMD_INQUIRE_CLUSTER_Q_MGR.
   
   One of the options which was being used is to request that the
   queue manager perform some filtering of the responses, which
   requires a specific PCF header version (version 3).  However,
   queue manager side filtering capability was only introduced into
   the queue manager at MQ version 6.0.  When the MQ Explorer sent
   the PCF message with a version 3 header, it resulted in the V5.3
   NSS queue manager generating the FFDC file shown in the Problem
   Description section of this APAR.
   
   The reason why the MQ Explorer sent a version 3 PCF header when
   connected to the older queue manager 'via' another (later
   version) queue manager was that the MQ Explorer was writing PCF
   messages that were suitable for the queue manager version it was
   connected to (the intermediate queue manager), rather than the
   destination queue manager which was processing the message.  If
   the intermediate queue manager was, for example v7.1, and the
   destination queue manager was v5.3, the PCF messages generated
   were not compatible with the v5.3 queue manager.  If the MQ
   Explorer connects directly to the v5.3 queue manager, the
   problem will not be seen and the FDC files will not be
   generated.
   
   
    
   
   

PROBLEM CONCLUSION
 *  The "com.ibm.mq.pcf.PCFAgent" class:
   
   http://www.ibm.com/support/knowledgecenter/SSFKSJ_9.0.0/com.ibm.
   mq.javadoc.doc/WMQJavaClasses/com/ibm/mq/pcf/PCFAgent.html [http://www.ibm.com/support/knowledgecenter/SSFKSJ_9.0.0/com.ibm.mq.javadoc.doc/WMQJavaClasses/com/ibm/mq/pcf/PCFAgent.html]
   
   which is used by the MQ Explorer to send PCF queries to a queue
   manager, has been updated to query the command level of the
   queue manager that is processing the PCF request messages,
   rather than using the command level of the queue manager that
   the PCFAgent code is connected to.  This ensures that the
   correct queue manager command level is used to determine which
   PCF parameters and header structure versions are suitable to use
   in any PCF request messages that are sent.
   
   ---------------------------------------------------------------
   The fix is targeted for delivery in the following PTFs:
   
   Version    Maintenance Level
   v7.5       7.5.0.8
   v8.0       8.0.0.7
   v9.0 CD    9.0.2
   v9.0 LTS   9.0.0.1
   
   The latest available maintenance can be obtained from
   'WebSphere MQ Recommended Fixes'
   http://www-1.ibm.com/support/docview.wss?rs=171&uid=swg27006037 [http://www-1.ibm.com/support/docview.wss?rs=171&uid=swg27006037]
   
   If the maintenance level is not yet available information on
   its planned availability can be found in 'WebSphere MQ
   Planned Maintenance Release Dates'
   http://www-1.ibm.com/support/docview.wss?rs=171&uid=swg27006309 [http://www-1.ibm.com/support/docview.wss?rs=171&uid=swg27006309]
   ---------------------------------------------------------------
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   IT12859
   
   
 * REPORTED COMPONENT NAME
   WMQ BASE MULTIP
   
   
 * REPORTED COMPONENT ID
   5724H7241
   
   
 * REPORTED RELEASE
   750
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt / Xsystem
   
   
 * SUBMITTED DATE
   2015-12-28
   
   
 * CLOSED DATE
   2016-11-30
   
   
 * LAST MODIFIED DATE
   2017-06-01
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
    PI72932
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   WMQ BASE MULTIP
   
   
 * FIXED COMPONENT ID
   5724H7241
   
   

APPLICABLE COMPONENT LEVELS
 * R750 PSY
   UP