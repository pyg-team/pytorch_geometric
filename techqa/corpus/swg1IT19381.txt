Title: IBM IT19381: ANE4993E & ACO3005 NOREPORTED IN ACTIVITY LOG WHEN A LAN-FREE RESTORE FOR SPECTRUM PROTECT FOR DATABASES: DP FOR MS SQL FAILS - United States

Text:
  FIXES ARE AVAILABLE
Download Information: Version 8.1.2 IBM Spectrum Protect Snapshot [http://www-01.ibm.com/support/docview.wss?uid=swg24043705]
Download Information: Version 8.1.2 IBM Spectrum Protect for Databases [http://www-01.ibm.com/support/docview.wss?uid=swg24043715]


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  Abstract: ANE4993E & ACO3005 not reported in activity log when a
   LAN-free restore for IBM Spectrum protect for Databases: DP for
    MS SQL fails
   
   
   
   Error Description:
   
   When a LAN-free restore is initiated by an IBM Spectrum Protect
   for Databases: Data Protection for Microsoft SQL Server,
    the ANE4991I & ACO3010 and ANE4991I & ACO3003 messages are
   correctly reported in the IBM Spectrum Protect server activity
   log at the start of the session:
   
   ANE4991I (Session: <session number>, Node: <node name>)
   TDP MSSQL Win64 ACO3010 Data Protection for
   SQL: Starting restore for server <server name>.
   (SESSION: <session number>)
   ANE4991I (Session: <session number>, Node: <node name>)
   TDP MSSQL Win64 ACO3003 Data Protection for SQL:
   Starting full restore of backup object RecoveryTest to database
   RecoveryTest on server
    <server name>. (SESSION: <session number>)
   
   But in case the restore does terminate for any reason, the
   corresponding ANE4993E & ACO3005 messages are not reported in
   the server activity log even though the failure is correctly
   reported in the Data Protection for Microsoft SQL Server log
   file:
   
   ACO5436E A failure occurred on stripe number (0), rc = 428
   ACO5407E The SQL Server aborted the operation.
   Restore of <DB NAME> failed.
   An exception occurred while executing a Transact-SQL statement
   or batch.
   
   Customer/L2 Diagnostics:
   
   IBM Spectrum Protect Versions Affected: Data Protection for
   Microsoft SQL Server for 6.x and IBM Spectrum Protect for
   Databases: Data Protection for Microsoft SQL Server for 7.1 and
   8.1
   
   Initial Impact: Low
   
   Additional Keywords: ANE4991I ANE4993E ACO3005 restore LAN-free
   end failure session Databases tsm sql mssql
   
   
    
   
   

LOCAL FIX

PROBLEM SUMMARY
 *  ****************************************************************
   * USERS AFFECTED:                                              *
   * Users of:                                                    *
   * IBM Spectrum Protect and IBM Tivoli Storage Manager for      *
   * Databases: Data Protection for Microsoft SQL Server 6.4,     *
   * 7.1, 8.1                                                     *
   * IBM Spectrum Protect Snapshot and IBM Tivoli Storage         *
   * FlashCopy Manager for Microsoft SQL Server 3.2, 4.1, 8.1     *
   ****************************************************************
   * PROBLEM DESCRIPTION:                                         *
   * See ERROR DESCRIPTION                                        *
   ****************************************************************
   * RECOMMENDATION:                                              *
   * Apply fixing level when available. This fix is currently     *
   * scheduled to be in the next targeted release of the Spectrum *
   * Protect for Databases: Data Protection for Microsoft SQL     *
   * Server and Spectrum Protect Snapshot for Microsoft SQL       *
   * Server.                                                      *
   * Note: This information is subject to change at the           *
   * discretion of IBM.                                           *
   ****************************************************************
   
   
    
   
   

PROBLEM CONCLUSION
 *  Spectrum Protect for Databases: Data Protection for Microsoft
   SQL Server and Spectrum Protect Snapshot for Microsoft SQL
   Server have been updated to report ANE4993E and ACO3005 messages
   in TSM Server actlog in case of restore operation failure.
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   IT19381
   
   
 * REPORTED COMPONENT NAME
   TDP FOR SQL WIN
   
   
 * REPORTED COMPONENT ID
   5698DPSAP
   
   
 * REPORTED RELEASE
   71W
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt / Xsystem
   
   
 * SUBMITTED DATE
   2017-02-23
   
   
 * CLOSED DATE
   2017-05-17
   
   
 * LAST MODIFIED DATE
   2017-05-17
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

MODULES/MACROS
 *  tdpsqlc  fcm
   
   
    
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   TDP FOR SQL WIN
   
   
 * FIXED COMPONENT ID
   5698DPSAP
   
   

APPLICABLE COMPONENT LEVELS
 * R64W PSN
   UP
   
   
 * R71W PSN
   UP
   
   
 * R81W PSY
   UP