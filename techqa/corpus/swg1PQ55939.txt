Title: IBM PQ55939: JES DATASET WITH A TOTAL LINE COUNT OF 0 CAUSES AN ABEND001 IN SMTP. - United States

Text:
z/os  A FIX IS AVAILABLE
Obtain the fix for this APAR.


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  Datasets found on the Jes spool with total line count of 0
   causes an ABEND001 in SMTP. The console shows the following
   System Messages:
   IEC020I    001-3,SMTP      ,SMTP     , SMTPINSS,JES
   IEC020I    EROPT IS 'ABE' OR NOT SPECIFIED
   
   
    
   
   

LOCAL FIX
 *  Circumventation: Using SDSF option O to display output queues,
   find the data set with DEST = SMTPjobname and TOT-REC is blank.
   Select the dataset that generated the message NO DATA IN DATASET
   . This dataset needs to be deleted before restarting SMTP.
   
   
    
   
   

PROBLEM SUMMARY
 *  ****************************************************************
   * USERS AFFECTED: All users of the IBM Communications Server   *
   *                 for OS/390 Release 10 IP and z/OS Version    *
   *                 1 Release 2 IP: SMTP                         *
   ****************************************************************
   * PROBLEM DESCRIPTION: JES data set with a total line count of *
   *                      zero causes an ABEND001 in SMTP.        *
   ****************************************************************
   * RECOMMENDATION:                                              *
   ****************************************************************
   JES spool files with the total record count of zero causes
   ABEND001 in the PASCAL function reset() when using the BSAM
   utilities. These files contain no data and are inadvertently
   placed on the JES spool by applications that may have abended.
   These files had to be manually deleted by the customer
   prior to restarting SMTP.
   +-------------------------------------------------------------+
   + Please check our Communications Server for OS/390 homepages +
   + for common networking tips and fixes.  The URL for these    +
   + homepages can be found in Informational APAR II11334 [http://www-01.ibm.com/support/docview.wss?uid=isg1II11334].       +
   +-------------------------------------------------------------+
   
   
    
   
   

PROBLEM CONCLUSION
 *  Code in SMTP has been amended to circumvent the ABEND001 by
   detecting that the JES spool file contains a total record count
   of zero. This was determined by checking the field SSSOLNCT in
   the SSSO extension returned by JES when the job identifier is
   obtained. This spool file is deleted because it effectively has
   no data in it. The deletion of the data set occurs before
   calling the PASCAL routine of reset() and therefore avoids the
   ABEND001. By eliminating the spool file the SMTP code can then
   continue to the next JES spool file. A new message EZA5571E is
   generated when SMTP detects this condition and deletes the spool
   file.
   
   IBM Communications Server
   IP Messages Volume 1
   Document Number SC31-8517-07
   Document Number SC31-8783-01 (z/OS only)
   
   The following documentation should be changed to explain the new
   message.
   
     --------------------------------------------------------------
     EZA5571E <date> <time> SPOOL FILE <jobid> WAS DELETED DUE TO
     RECORD COUNT OF ZERO
   
     Explanation:
     The JES spool job identified in this message was intentionally
     deleted by the SMTP code because it contained a total record
     count (SSSOLNCT) of zero. For more information regarding the
     JES interface used by SMTP see OS/390 MVS Using the Subsystem
     Interface.
   
     date current date stamp.
     time current time stamp.
     jobid the JES spool identifier (SSSOJOBI).
   
     System Action: SMTP deletes the JES spool file. Processing
     continues.
   
     User or Operator Response: None.
   
     System Programmer Response: Check the applications that use
     the JES spool for SMTP. The most probable cause for these
     files being created is an application abend.
   
     Source Data Set: SMTPBTCH
   
     Procedure Name: ServiceReaderMVS
   
   
   * Cross Reference between External and Internal Names
   EZAAA00H (MSSMTP  )  EZABB01Z (SMTPBTCH)  EZACA026 (MVPSSI  )
   EZACA027 (MVPSSIW )  EZAAA00H (MSSMTP  )  EZABB01Z (SMTPBTCH)
   EZACA026 (MVPSSI  )  EZACA027 (MVPSSIW )
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   PQ55939
   
   
 * REPORTED COMPONENT NAME
   TCP/IP V3 MVS
   
   
 * REPORTED COMPONENT ID
   5655HAL00
   
   
 * REPORTED RELEASE
   50A
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt / Xsystem
   
   
 * SUBMITTED DATE
   2001-12-14
   
   
 * CLOSED DATE
   2002-01-14
   
   
 * LAST MODIFIED DATE
   2002-02-02
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
    UQ61872 UQ61873
   
   

MODULES/MACROS
 *  EZAAA00H EZABB01Z EZACA026 EZACA027
   
   
    
   
   

Publications Referenced SC31878301 SC31851707 FIX INFORMATION
 * FIXED COMPONENT NAME
   TCP/IP V3 MVS
   
   
 * FIXED COMPONENT ID
   5655HAL00
   
   

APPLICABLE COMPONENT LEVELS
 * R120 PSY UQ61872 [HTTPS://WWW14.SOFTWARE.IBM.COM/WEBAPP/SET2/ORDERMEDIA/SHOPCART?PTFS=UQ61872]
   UP02/02/01 P F201
   
   
 * R50A PSY UQ61873 [HTTPS://WWW14.SOFTWARE.IBM.COM/WEBAPP/SET2/ORDERMEDIA/SHOPCART?PTFS=UQ61873]
   UP02/02/01 P F201
   
   

FIX IS AVAILABLE
 * SELECT THE PTF APPROPRIATE FOR YOUR COMPONENT LEVEL. YOU WILL BE REQUIRED TO SIGN IN. DISTRIBUTION ON PHYSICAL MEDIA IS NOT AVAILABLE IN ALL COUNTRIES.