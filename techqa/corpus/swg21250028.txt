Title: IBM Slow connect time to Informix when using TCP/IP - United States

Text:
DNS; nslookup; slow connection TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 Client applications using the TCP/IP protocol to connect to Informix experience poor performance during connection. Once the connection has been established the performance is improved. 

CAUSE
 

 * During connection establishment, the IP address of the client is used by the IDS server to look up its host name. The method used to accomplish this is dependent on the configuration of the operating system. If the Domain Name System (DNS) is used, an operation known as a reverse query is used to map the IP address to host name. If the configuration of the DNS server is incomplete this type of query may take some time.
   
   The command line utility nslookup may be used to perform DNS queries. If a reverse lookup operation takes a long time to complete using nslookup then the IDS server will also take a long time to complete the same operation.
   
   The first example shows a reverse lookup operation for an IP address that is known to the DNS server and completes immediately. The second example uses an IP address that is unknown taking several seconds before returning an error.
   
   C:\>nslookup 1.2.3.4
   Server: host1.domain.com
   Address: 9.8.7.6
   
   Name: host222.domain.com
   Address: 1.2.3.4
   
   C:\>nslookup 9.69.1.126
   Server: host1.domain.com
   Address: 9.8.7.6
   
   DNS request timed out.
   timeout was 2 seconds.
   *** Request to host1.domain.com timed-out



 * The lookup for the service name could be taking a while.

 * Another cause may by the use of IPv6 addresses with DNS servers that are not configured for IPv6.

DIAGNOSING THE PROBLEM
To isolate the problem to tcp/ip connections try to connect by way of a shared memory connection. If the connection is now completed quickly then the problem outlined above may be the cause of poor connection performance. 

Follow this link if you need instructions for setting up shared memory connections:
A shared-memory connection (UNIX) [http://publib.boulder.ibm.com/infocenter/idshelp/v115/topic/com.ibm.admin.doc/ids_admin_0215.htm?resultof=%22%73%68%61%72%65%64%22%20%22%73%68%61%72%65%22%20%22%6d%65%6d%6f%72%79%22%20%22%6d%65%6d%6f%72%69%22%20%22%63%6f%6e%6e%65%63%74%69%6f%6e%22%20%22%63%6f%6e%6e%65%63%74%22%20] 


RESOLVING THE PROBLEM
 

 * Refer to your operating system documentation for details of how to configure DNS. If the DNS server runs on the Microsoft WindowsÂ® platform then it is possible that the zone used to implement reverse lookup is not implemented. Details regarding DNS on the Windows operating system can be found in the related URLs below. Ensure that the reverse-lookup zone is populated for all clients that connect to the IDS server.
   
 * Ensure that local hostname resolution is performed before other methods of hostname resolution (NIS, NIS+, DNS, and so on). Files like these are used on various operating systems to determine lookup order:
   
   /etc/netsrv.conf
   /etc/irs.conf
   /etc/nsswitch.conf
   
 * Reconfigure your operating system to not use DNS, for example by including the host names and IP addresses of all client machines in the local hosts file /etc/hosts or %WINDIR%\system32\drivers\etc\hosts on Windows.

 * Change the host name in the sqlhosts file to an IP address.
   
 * Change the service name in the sqlhosts file to the port number.
   
 * Connections to IDS hang [http://www.ibm.com/support/docview.wss?rs=630&uid=swg21392377]

RELATED INFORMATION
 Domain Name System on Microsoft TechNet [http://technet.microsoft.com/en-us/network/bb629410.aspx]
Windows 2000 Domain Name Service [http://technet.microsoft.com/en-us/library/bb742582.aspx]