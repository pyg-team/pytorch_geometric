Title: IBM PK49198: THE BPE DISPATCHER NEEDS TO PRESERVE THE HIGH WORDS OF THE 64-BIT REGISTERS ACROSS BPEWAIT AND BPETCBSW CALLS. - United States

Text:
z/os  A FIX IS AVAILABLE
Obtain the fix for this APAR.


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  The BPE dispatcher needs to preserve the high words of the
   64-bit registers across BPEWAIT and BPETCBSW calls.
   
   
    
   
   

LOCAL FIX

PROBLEM SUMMARY
 *  ****************************************************************
   * USERS AFFECTED: All users of IMS V10 BPE-based               *
   *                 address spaces (CQS, OM, RM, SCI,            *
   *                 IMS Connect).                                *
   ****************************************************************
   * PROBLEM DESCRIPTION: The BPE dispatcher does not             *
   *                      currently save the high words of        *
   *                      the caller's 64-bit registers           *
   *                      across BPEWAIT and BPETCBSW calls.      *
   *                                                              *
   *                      MESSAGEIKJ65645I when using the BPE     *
   *                      1.6 dump formatter initialization       *
   *                      CLIST to initialize a BPE 1.5 dump.     *
   ****************************************************************
   * RECOMMENDATION: INSTALL CORRECTIVE SERVICE FOR APAR/PTF      *
   ****************************************************************
   The BPE dispatcher does not currently save the values of the
   high words of a caller's 64-bit registers when the caller
   issues a BPEWAIT or BPETCBSW call.  In a thread
   sub-dispatching environment, this means that one thread could
   get another thread's high register values across a thread
   context switch.  Although there is no current 64-bit register
   use in BPE address spaces today, this support should be added
   to allow for future 64-bit exploitation.
   
   Also, the BPE dump formatter initialization CLIST, BPEAACI0,
   has an incorrect label in the "branch table" used to set BPE
   control block offsets based on the BPE release in the dump.
   Label V010500 is incorrectly spelled as x010500.  If the BPE
   1.6 (IMS V10) CLIST is used against a BPE 1.5 (IMS V9) dump,
   the following error is generated in the IPCS output:
   
     GOTO V010500
     IKJ56545I THIS STATEMENT HAS REFERENCED AN INVALID OR
     UNDEFINED LABEL
   
   
    
   
   

PROBLEM CONCLUSION
 *  AIDS: RIDS/SYS RIDS/CNTRL SYS CNTRL
     DEP: NONE
     GEN:
   64BITIMS
   
   *** END IMS KEYWORDS ***
   This APAR is a preconditioning APAR to allow BPE to support
   code that uses the full 64-bit register set.  It changes the
   BPE thread dispatcher to save and restore the contents of a
   caller's 64-bit registers (R2 thru R13) across BPEWAIT and
   BPETCBSW calls.  This allows code to be written that uses the
   full z/Architecture 64-bit registers without losing the high
   words' contents across waits and TCB switches.  Note that
   this is not any kind of external 64-bit support -- BPE is an
   internal environment used by IBM code.
   
   The incorrectly-spelled label in BPEAACI0 is corrected.
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   PK49198
   
   
 * REPORTED COMPONENT NAME
   IMS V10
   
   
 * REPORTED COMPONENT ID
   5635A0100
   
   
 * REPORTED RELEASE
   010
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt / Xsystem
   
   
 * SUBMITTED DATE
   2007-07-17
   
   
 * CLOSED DATE
   2007-07-27
   
   
 * LAST MODIFIED DATE
   2008-04-30
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
    014PC3Å¸ UK27573
   
   

MODULES/MACROS
 *  BPEAACI0 BPECBT00 BPEDSSW0 BPEDSTC0 BPEDSWT0
   BPEDS000 BPEFM030 BPEFM100 BPETCBSW BPETHCB  BPEWAIT
   
   
    
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   IMS V10
   
   
 * FIXED COMPONENT ID
   5635A0100
   
   

APPLICABLE COMPONENT LEVELS
 * R010 PSY UK27573 [HTTPS://WWW14.SOFTWARE.IBM.COM/WEBAPP/SET2/ORDERMEDIA/SHOPCART?PTFS=UK27573]
   UP07/07/31 P F707
   
   

FIX IS AVAILABLE
 * SELECT THE PTF APPROPRIATE FOR YOUR COMPONENT LEVEL. YOU WILL BE REQUIRED TO SIGN IN. DISTRIBUTION ON PHYSICAL MEDIA IS NOT AVAILABLE IN ALL COUNTRIES.