Title: IBM Cmusshftpd daemon is on DMZ, where are stored SSH public and private keys - United States

Text:
License; Key; Authorization; STERLINGFAQ TECHNOTE (FAQ)

QUESTION
 You have a question about a Remote SSHFTP daemon.
If you install the cmusshftpd daemon on a remote server (in a DMZ), where are stored SSH public and private keys? 

ANSWER
--> In the DMZ directories 

I know that the SIPS encryption key must be stored on the server running the cmusshftpd daemon. 

As far as I can see private and public host keys are also stored in this server, which can be a security hole : if this server is hacked then it offers a way for identity usurpation... 

--> Correct, and yes it can be considered a security risk by some. If this is the case, you might consider the use of the Sterling Secure Proxy instead of installing the SSHFTP daemon in the DMZ. 

But where must be stored the "client" keys, those associated with RSDs (remote or mailbox) or with the cmusshftpd daemon? 

Yes or in the core C:Enterprise server 

--> and also yes regarding the client public key. Refer to 6,7,8 below 

Special Considerations: 

 1. If remote SSH clients were previously connecting to the internal server, the connections may 
    fail going to the DMZ server. This is due to the fingerprint being different for the ssh_host_key.pub because it was generated new on the DMZ host. To correct this problem you can do one of 2 things:  * Have the client remove the server's public key on their side and let the client application 
       store a new key.
       OR 
     * Copy the $CMUHOME/ssh/system keys on the internal server to the DMZ. Permissions on these files are critical so after you copy them be sure the permissions are the same as the original keys.
    
    
 2. Always run "cmusshkey -k -r <rsdname>" on the DMZ server. 
 3. If SIPS encryption is being done on the Connect:Enterprise internal system the $CMUHOME/keys/sipskeys file needs to be moved over to the DMZ server to the same directory. 
 4. Be sure to assign a port range for the cmusshftpd daemon and internal daemons and open that range in the internal firewall. Use the -p parameter for starting the daemons. 
 5. Be sure the profile is sourced on the DMZ for CMUHOME, CMUHOST, CMUPORT. 
 6. If you are running the SSH daemon in a DMZ or any remote system, all the SSH subdirectories and files must be in DMZ. 
 7. You need to run the cmusshkey utility in the DMZ to create the keys for individual rsd accounts. 
 8. When a client is doing public key authentication their public key needs to be added to the authorized_keys file in $CMUHOME/ssh/users/<rsdname> directory on the internal system. If that 
    directory does not exist on the internal system you will need to manually create it.

 

HISTORICAL NUMBER
 FAQ1310