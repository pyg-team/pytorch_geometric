Title: IBM JR42957: UPGRADE FROM 6.1 to 7.5.x FAILS WHEN A SQL CONNECTOR THAT ALLOWS TO SET THE RETURN TYPE AS A PARAMETER IS BEING USED. - United States

Text:
  A FIX IS AVAILABLE
Version 7.5.1 Fix Pack 1 for the IBM Business Process Manager products [http://www-01.ibm.com/support/docview.wss?uid=swg24033036]


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  The problem appears when the model contains an SQLConnector,
   which returns some value to Complex Variable. If it is mapped to
   BPD, upgrade fails on instance level, if it is private inside
   the service then upgrade fails on tasks level. This
   problem can be reproduced only when upgrading from TW6.1.
   
   
   Reproduction steps :
   
   (1) Create a Service 'serv1' with SQL Execute Statement
   subservice from System Data.
   (2) Create a Complex Variable Type 'uNamePair' with the
   following parameters:
   -- USER_NAME of String;
   -- FULL_NAME of String.
   (3) For created above service, navigate to Variables type and
   create a new output variable 'outVar' of created above Complex
   Type 'uNamePair'.
   (4) For SQL Execute Statement subservice specify the following
   parameters on Data Mapping tab:
   -- sql: "SELECT USER_NAME, FULL_NAME from LSW_USR"
   -- parameters: leave default
   -- maxRows: 10
   -- returnType: "uNamePair"
   -- dataSourceName: leave default
   -- results: tw.local.outVar
   (5) Create a BPD with the nested service 'serv1', which created
   above.
   (6) Automap the output variable on Data Mapping tab.
   (7) Create one more activity with the default service.
   (8) Save and start few instances of this BPD.
   (9) Perform the upgrade to BPM 7.5.1
   ===> Exception appears:
   TWU-0013: Failed to read serialized form
   java.lang.UnsupportedOperationException
   
   
    
   
   

LOCAL FIX
 *  n/a
   
   
    
   
   

PROBLEM SUMMARY
 *  ****************************************************************
   * USERS AFFECTED:  Users upgrading from Teamworks 6.x to       *
   *                  BPM 7.5.x.                                  *
   ****************************************************************
   * PROBLEM DESCRIPTION: The problem appears when the model      *
   *                      contains an SQLConnector,               *
   *                      which returns some value to Complex     *
   *                      Variable. If it is mapped to            *
   *                      BPD, upgrade fails on instance level,   *
   *                      if it is private inside                 *
   *                      the service then upgrade fails on       *
   *                      tasks level. This                       *
   *                      problem can be reproduced only when     *
   *                      upgrading from TW6.1.                   *
   *                      Reproduction steps :                    *
   *                      (1) Create a Service 'serv1' with SQL   *
   *                      Execute Statement                       *
   *                      subservice from System Data.            *
   *                      (2) Create a Complex Variable Type      *
   *                      'uNamePair' with the                    *
   *                      following parameters:                   *
   *                      -- USER_NAME of String;                 *
   *                      -- FULL_NAME of String.                 *
   *                      (3) For created above service,          *
   *                      navigate to Variables type and          *
   *                      create a new output variable 'outVar'   *
   *                      of created above Complex                *
   *                      Type 'uNamePair'.                       *
   *                      (4) For SQL Execute Statement           *
   *                      subservice specify the following        *
   *                      parameters on Data Mapping tab:         *
   *                      -- sql: "SELECT USER_NAME, FULL_NAME    *
   *                      from LSW_USR"                           *
   *                      -- parameters: leave default            *
   *                      -- maxRows: 10                          *
   *                      -- returnType: "uNamePair"              *
   *                      -- dataSourceName: leave default        *
   *                      -- results: tw.local.outVar             *
   *                      (5) Create a BPD with the nested        *
   *                      service 'serv1', which created          *
   *                      above.                                  *
   *                      (6) Automap the output variable on      *
   *                      Data Mapping tab.                       *
   *                      (7) Create one more activity with the   *
   *                      default service.                        *
   *                      (8) Save and start few instances of     *
   *                      this BPD.                               *
   *                      (9) Perform the upgrade to BPM 7.5.1    *
   *                      ===> Exception appears:                 *
   *                      TWU-0013: Failed to read serialized     *
   *                      form                                    *
   *                      java.lang.UnsupportedOperationException *
   *                                                              *
   ****************************************************************
   * RECOMMENDATION:                                              *
   ****************************************************************
   The problem appears when the model contains an SQLConnector,
   which returns some value to Complex Variable. If it is mapped
   to
   BPD, upgrade fails on instance level, if it is private inside
   the service then upgrade fails on tasks level. This
   problem can be reproduced only when upgrading from TW6.1.
   Reproduction steps :
   (1) Create a Service 'serv1' with SQL Execute Statement
   subservice from System Data.
   (2) Create a Complex Variable Type 'uNamePair' with the
   following parameters:
   -- USER_NAME of String;
   -- FULL_NAME of String.
   (3) For created above service, navigate to Variables type and
   create a new output variable 'outVar' of created above Complex
   Type 'uNamePair'.
   (4) For SQL Execute Statement subservice specify the following
   parameters on Data Mapping tab:
   -- sql: "SELECT USER_NAME, FULL_NAME from LSW_USR"
   -- parameters: leave default
   -- maxRows: 10
   -- returnType: "uNamePair"
   -- dataSourceName: leave default
   -- results: tw.local.outVar
   (5) Create a BPD with the nested service 'serv1', which created
   above.
   (6) Automap the output variable on Data Mapping tab.
   (7) Create one more activity with the default service.
   (8) Save and start few instances of this BPD.
   (9) Perform the upgrade to BPM 7.5.1
   ===> Exception appears:
   TWU-0013: Failed to read serialized form
   java.lang.UnsupportedOperationException
   
   
    
   
   

PROBLEM CONCLUSION
 *  Problem was fixed in an interim fix and in future
   releases/fixpacks.
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   JR42957
   
   
 * REPORTED COMPONENT NAME
   BPM STANDARD
   
   
 * REPORTED COMPONENT ID
   5725C9500
   
   
 * REPORTED RELEASE
   751
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2012-05-31
   
   
 * CLOSED DATE
   2012-08-08
   
   
 * LAST MODIFIED DATE
   2012-08-08
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   BPM STANDARD
   
   
 * FIXED COMPONENT ID
   5725C9500
   
   

APPLICABLE COMPONENT LEVELS
 * R750 PSY
   UP