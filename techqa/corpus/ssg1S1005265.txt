Title: IBM SONAS / Storwize V7000 Unified Machines might be affected by Leap Seconds - United States

Text:
 TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 Leap seconds are a periodic one-second adjustment of Coordinated Universal Time(UTC) in order to keep a system's time of day close to the mean solar time. The next leap second insertion is scheduled for June 30th, 2015 at 23:59:60 UTC. 

SYMPTOM
Certain applications might show clock related problems like incorrect event sorting or triggering. 

There may be high CPU utilization symptoms, as described in Red Hat article on this topic, seen on SONAS / Storwize V7000 Unified nodes for a short duration when the leap second occurs.
Tests within IBM did not show any impact on the test systems.


CAUSE
LEAP seconds are defined as a 60th second, which is added after 23:59:59 UTC. Linux/Unix did not implement a 60th second and therefore the second 59 is executed twice.
As processes do not expect a timestamp to occur twice unpredictable behavior might be encountered.
Red Hat lists this Problem under:
https://rhn.redhat.com/errata/RHBA-2015-0690.html [https://rhn.redhat.com/errata/RHBA-2015-0690.html]


ENVIRONMENT
SONAS and IBM Storwize V7000 Unified systems running code level 1.5.2.0 are exposed to this issue. 

Systems running older code levels may be exposed if the NTP configuration is not set up as expected on the system.


DIAGNOSING THE PROBLEM
Run the CLI command lsnode to determine the installed code level. 

 *  If the SONAS / IBM Storwize V7000 Unified system is running V1.5.2.0, then the exposure exists. For systems running pre-1.5.2.0 code level, check the NTP configuration by running the lsnwntp command.
   $ lsnwntp
   EFSSG0100I There are no values to return.
   If the output is as shown above, then the exposure exists. 

RESOLVING THE PROBLEM
Though the tests within IBM did not show any impact on the test systems, it is suggested to apply the fix / mitigation in order to eliminate any risk of exposure. 


Upgrade to 1.5.2.1 or above that includes the RHEL fix for this issue.

For systems at pre-1.5.2.0 code levels that are not configured with NTP, the mitigation is to ensure that NTP is properly configured by running the setnwntp command on the active management node to avoid exposure to this issue.

 


Cross reference information Segment Product Component Platform Version Edition Disk Storage Systems IBM Storwize V7000 Unified (2073)