Title: IBM Collecting Data: Problems with modular-based themes in WebSphere Portal - United States

Text:
Collecting Data; Collecting Data; Collecting Data; MustGather; MustGather; MustGather; MustGatherDocument; 7002 theme; 7.0.0.2 theme; modularized theme; modular-based theme NEWS

ABSTRACT
 Collecting troubleshooting data for problems with modular-based themes in WebSphere Portal with IBM® WebSphere® Portal expedites time to resolution by enabling IBM Support to provide informed problem analysis. 

CONTENT
If you have already contacted IBM Support and must collect data to determine the nature of a problem in WebSphere Portal, review the information below for the available methods of data collection. Otherwise, review Collecting Data: Read first for WebSphere Portal. [http://www.ibm.com/support/docview.wss?rs=688&uid=swg21591590] 

Before collecting this mustgather, we recommend reviewing the theme related questions & answers [https://developer.ibm.com/answers/search.html?f=&type=question&redirect=search%2Fsearch&sort=relevance&q=%2B%5Bdigexp%5D+%2B%5Bportal%5D+%2B%5Btheme%5D] posted on dW Answers. 

 

Collecting modular-based theme information

Data Collection

Use the following instructions for manually collecting the necessary information.

1. Does the problem persist after: 
-- Clearing the cache?
-- Clearing all cookies?
-- Restarting the browser?
-- Logging out and back in?
-- (For versions 7002 or 8.0) Changing to the full profile?
-- Bypassing IHS, WebSeal etc and access Portal directly (ie http://{hostname}:{port}/wps/portal/)?

2. Answer the following questions: 
-- Is the problem specific to a single browser?
-- Does the issue only occur while using Internet Explorer? If yes, is compatibility mode being used?
-- Is the problem specific to admin or non-admin users?
-- Is the problem specific to a certain portlet/widget/page or user action? If yes, please provide more details.
-- What profile is used on the failing page?

If the problem still persists, collect the following information. 

3. Provide the theme/skin static files:

--If on WebDav, use the URLs below to collect both theme and skin:
http://<host>:<port>/wps/mycontenthandler/dav/themelist/<theme_dir>?mime-type=application/zip

http://<host>:<port>/wps/mycontenthandler/dav/skinlist/<skin_dir>?mime-type=application/zip

-- If contained within a WAR file:
a) Open the WAS administration console
b) Select "Applications :: Application Types :: WebSphere enterprise applications"
c) Locate the application then select the check box on the left
d) Select the "Export" button towards the top middle

4. Provide the theme/skin dynamic files. This includes the following artifacts:
-- WAR file.
-- Any required custom modules.
-- Any additional resources (such as JAR files) or special instructions for IBM Product Support to run the theme locally.
-- Theme deployment script

5. Enable debug:

Manually
When debug is enabled, the modules that contribute to the theme provide their uncompressed Javascript or CSS files if available. Additionally, all the files are retrieved with separate requests. This makes it much easier to find the offending file. 

To debug a module or theme, enable portal tracing using the following trace string:
com.ibm.wps.resourceaggregator.CombinerDataSource.RemoteDebug=all

Using the Theme Optimization Analyzer shipped with Portal 8.5
a) Open the Portal Administration page
b) Navigate to "Portal Analysis :: Theme Analyzer :: Utilities :: Control Center"
c) Under the "Remote Debugging" section, locate "Remote Debug (Server, all users, individual requests)"
d) Select "Click to turn on"

6. Use Fiddler to capture HTTP traffic for the failing scenario. Use the following steps: 
a) Download Fiddler at http://www.telerik.com/download/fiddler [http://www.telerik.com/download/fiddler].
b) Open Fiddler

NOTE: If the target site will be accessed over HTTPS, the traffic will need to be decrypted see this article for steps -- http://docs.telerik.com/fiddler/Configure-Fiddler/Tasks/DecryptHTTPS [http://docs.telerik.com/fiddler/Configure-Fiddler/Tasks/DecryptHTTPS].

c) Open your browser

NOTE: Browsers do not send localhost or 127.0.0.1 traffic through proxies so you must use the machine's IP address or machine name directly.

d) Clear the browser's cookies and cache
e) In Fiddler, select "Edit :: Remove :: All Sessions"
f) Reproduce the issue and watch the HTTP traffic in Fiddler's left panel.
g) Once done, select "File :: Save :: All Sessions". This will produce a file with a SAZ extension.

7. While reproducing the issue in the browser document the behavior you see, either through edited screen shots or text and expected behavior.

8. Provide a text file containing the contents of the browser's error console:

While in the browser, to create this text file:
-- Press F12
-- Select "Console"
-- The next step depends on the browser:
a) In Chrome, right-click then select "Save as..."
b) In Internet Explorer, right-click then select "Copy all" then paste into a text document
c) In Firefox
* Right-click then select "Select All"
* Right-click again then select "Copy"
* Paste into text document

9. Collect an xmlaccess export of your system using the instructions inDocument #1260098 [http://www.ibm.com/support/docview.wss?rs=899&uid=swg21260098], "How to generate a complete XMLAccess export of a Portal configuration."

NOTE: The export from step #11 will contain this information.
NOTE: If the issue resides in a Virtual Portal, the Theme Optimization Analyzer should be accessed from there.

10. Collect the resources.xml file that contains the Resource Environment property, "WP DynamicContentSpotMappings" (default location iswp_profile\config\cells\<cell name>\nodes\<node name>\servers\WebSphere_Portal). This file should be at the cell level when clustered.

NOTE: The export from step #11 will contain this information.

11. Please download the Theme Optimization Analyzer Portlet based on the Portal version from the catalog site:

For Portal 7x -- https://greenhouse.lotus.com/plugins/plugincatalog_draft.nsf/assetDetailsForSubmission.xsp?action=editDocument&documentId=BF0EABD9CCD7574D85257B940066DA9B [https://greenhouse.lotus.com/plugins/plugincatalog_draft.nsf/assetDetailsForSubmission.xsp?action=editDocument&documentId=BF0EABD9CCD7574D85257B940066DA9B]

For Portal 8.0 -- https://greenhouse.lotus.com/plugins/plugincatalog.nsf/assetDetails.xsp?action=editDocument&documentId=6F106EACA45124D685257B9400682966 [https://greenhouse.lotus.com/plugins/plugincatalog.nsf/assetDetails.xsp?action=editDocument&documentId=6F106EACA45124D685257B9400682966]

For Portal 8.5 -- 
Theme Optimization Analyzer is installed with the product.

NOTE: Theme Optimization Analyzer Portlet version 2.0 or above is required to collect the mustgather information. 

Once installed, navigate to the portlets Utilities links. Select the "Click here to export data" to generate the export.

12. Send the following files to Product Support by using the instructions outlined in Exchanging information with IBM Technical Support for problem determination: 
a) The answers to the questions in Step 1 and Step 2 above.
b) The zip file from WebDav with your theme (Step 3).
c) The WAR file for your custom theme if created and all required resources (Step 4).
d) SAZ file collected from Fiddler in Step 6.
e) Screen shots in Step 7.
f) Text file containing contents of the browser error console in Step 8.
g) The xmlaccess export of your system as in Step 9.
h) The resources.xml file collected in Step 10.
i) Provide the export that was generated from Step 11.

Send the files to IBM Support by using the instructions outlined in Exchanging information with IBM Technical Support for problem determination [http://www.ibm.com/support/docview.wss?rs=688&uid=swg21201571]. 

Note: When sending in logs for review, include any relevant screenshots, timestamps, userIds, etc. in order to expedite analysis of the issue. 

Related Information 

 * IBM Support Portal: WebSphere Portal Troubleshooting [http://www.ibm.com/support/entry/portal/Troubleshooting/Software/WebSphere/WebSphere_Portal] [http://www.ibm.com/support/docview.wss?rs=688&uid=swg21201571] 
 * WebSphere Portal Knowledge Center: Troubleshooting [http://www-01.ibm.com/support/knowledgecenter/SSHRKX_8.5.0/mp/trouble/troubleshooting.dita] 
 * Collecting Data: Read first for WebSphere Portal [http://www.ibm.com/support/docview.wss?rs=688&uid=swg21672901]