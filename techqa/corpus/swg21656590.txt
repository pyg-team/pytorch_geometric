Title: IBM Unable to deploy BAR file due to BIP2558E: Undefined function error - United States

Text:
 TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 You created a IBM Integration Bus (IIB) or WebSphere Message Broker (WMB) BAR file by using the following command:

mqsicreatebar -data <workspace> -b <workspace>\barfile.bar -p <Project> -l <Library> -o flow.msgflow message_set.mset

and even though the BAR file was created successfully, BAR deployment failed with the following error: 

"BIP2558E: Undefined function"

The same BAR file can be deployed successfully when deploying using the WebSphere Message Broker Toolkit. 

DIAGNOSING THE PROBLEM
Reviewing BAR files, by using the mqsireadbar command, shows that the contents of BAR files created with the Toolkit and command line are not exactly the same.
The resources in the BAR file created in the Toolkit are not compiled by default, so it includes all resources (.msgflows and .esql files) in the library or application. This indicates that you did not select the build option "Compile and in-line resources" when creating the BAR file. 

The resources in the BAR file created with the mqsi command are compiled (.cmf) files, so the compiled message flows already have the ESQL code embedded in the .cmf, and some .esql files are not added as individual resources. 


RESOLVING THE PROBLEM
To correct the issue, add the parameter -deployAsSource when building the BAR file using the mqsi command. By using this parameter, the source .esql and .msgflow files are included explicitly in the BAR file, instead of the .cmf. 


The default options used to build both BAR files are not exactly the same for the Toolkit and mqsicreatebar command. When the BAR file is built using the Toolkit, the option "Compile and in-line resources" is not selected by default, but this option is enabled by default in the mqsicreatebar command.

 



Cross reference information Segment Product Component Platform Version Edition Business Integration IBM Integration Bus Linux, Windows 9.0 All Editions 
PRODUCT ALIAS/SYNONYM
 WMB MB WebSphere Message Broker IBM Integration Bus IIB IBMIB MQ Integrator WBIMB WBI-MB MQSI WMQI