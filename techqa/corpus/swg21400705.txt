Title: IBM Third party jar conflicts with Rule Execution Server - United States

Text:
conflict; jar; version; libraries; API; NoSuchMethodError; NoClassDefFound; LinkageError TECHNOTE (FAQ)

QUESTION
 Why do I get third-party JAR conflicts with my Web applications after I have set up Rule Execution Server? 

ANSWER
In certain Java EE server environments, you might get one of the following errors: 

 * NoSuchMethodError 
 * NoClassDefFound 
 * LinkageError
   


These errors sometimes occur in relation with third-party library classes such as: 
 * log4j classes 
 * commons-logging classes 
 * asm classes 
 * Xerces driver classes 
 * One of the other third-party JAR files deployed in jrules-bres-xu-<appserver>.rar/jrules-res-xu-<appserver>.rar (XU rar)



Such messages usually indicate a class loading problem with concurrent instances of same JAR files, particularly in application servers that maintain multiple active Web applications. 

By default, the standard JRules Rule Execution Server installation procedure deploys the Execution Unit (XU) RAR file to the system-level class path of the application server. On some systems, the Web application class loader goes to the system-level class path instead of going to its own archive. Problems can occur if the system-level class path has versions of the JAR files that are different from the versions it expects. 

To eliminate these errors, you can use two approaches (possibly in combination) to modify the way in which classes are loaded: 
 * Change your application class loading policy. Most application servers that choose to refer to the system class path first can be configured to look at the system class path at the end of the process. For instance, in WebSphere, you can change the application class loader policy from PARENT_FIRST to PARENT_LAST ("Classes loaded with local class loader first (parent last)"). For more information, see the documentation of your application server for class loading policies. 
 * Repackage the XU RAR archive with your .ear file. Basically, you can include the resource adapter archive directly with your application. Rule Execution Server is scoped exclusively to one application. For more information, see the JRules documentation:  * In JRules 5, see "Application-Scoped Use Case" section in chapter "Assembling and Packaging a J2EE BRE Server Application" of the "BRE Server" manual. 
    * In JRules 6, see the following section of ILOG JRules User Guide: "Packaging an Application-Scoped Rule Execution Server" in chapter "Executing Rules > Tasks > Assembling and Packaging a Rule Execution Server Application". 
    * In JRules/WODM 7, see the documentation at WebSphere ILOG JRules BRMS V7.1 > Installing > Installing Rule Execution Server as a scoped Java EE application [http://pic.dhe.ibm.com/infocenter/brjrules/v7r1/topic/com.ibm.websphere.ilog.jrules.doc/Content/Business_Rules/Documentation/_pubskel/JRules/ps_JRules_Global287.html] or Decision Server Rules V7.5 > Configuring Decision Server > Configuring Rule Execution Server > Configuring Rule Execution Server as a scoped Java EE application [http://pic.dhe.ibm.com/infocenter/dmanager/v7r5/topic/com.ibm.dserver.configuring/Content/Business_Rules/_pubskel/Infocenter_Primary/ps_DS_Configuring318.html]. 
    * In ODM 8, see the documentation at Decision Server V8.0 > Decision Server Rules > Configuring Decision Server Rules > Configuring Rule Execution Server > Configuring Rule Execution Server in scoped mode [http://pic.dhe.ibm.com/infocenter/dmanager/v8r0/topic/com.ibm.wodm.dserver.rules.config/config_ds_res/tsk_res_config_scoped.html].
   
   



Cross reference information Segment Product Component Platform Version Edition Business Integration IBM Operational Decision Manager Platform Independent 8.5, 8.0, 7.5 
HISTORICAL NUMBER
 jrules/FAQ/258