Title: IBM Silent install using -updateAll in the IBM Installation Manager fails with the error "JVM terminated. Exit code=1" if there was already a license enablement kit applied - United States

Text:
PK77372; RATLC01243367 TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 Launching the silent update of a product with the Activation Kit already applied causes an error stating: "JVM terminated. Exit code=1". 

SYMPTOM
Launching the silent update of IBM® Rational® Application Developer v7.0.0.x with the Activation Kit already applied according to the Installation Manager v1.2 InfoCenter link in the Related information section with a command like: 

 

 * 
   "C:\Program Files\IBM\Installation Manager\eclipse\IBMIMc.exe" --launcher.ini silent-install.ini -updateAll 
   


produces the error: 
 *  
   JVM terminated. Exit code=1 
   


However the product is actually upgraded. 
DIAGNOSING THE PROBLEM
The following steps reproduce the problem: 

 
1. Install Rational Application Developer v7.0.0.x interactively and apply the Activation Kit to install the license. 
2. Upgrade Installation Manager to v1.2.1 
3. Configure an Installation Manager repository containing Rational Application Developer 7.0.0.y where y > x 
4. Launch the silent update of Rational Application Developer 7.0.0.x with a command like: 

 * 
   "C:\Program Files\IBM\Installation Manager\eclipse\IBMIMc.exe" --launcher.ini silent-install.ini -updateAll 
   


5. You will eventually see the following error in the console: 

null 
IBMIMc: 
JVM terminated. Exit code=1 
C:\Program Files\IBM\Installation 
Manager\eclipse\jre_5.0.3.sr8a_20080811b\jre\bin\java.exe 
-Xquickstart 
-Xgcpolicy:gencon 
-jar C:\Program Files\IBM\Installation 
Manager\eclipse\plugins\org.eclipse.equinox.launcher_1.0.100.v20080303.j 
ar 
-os win32 
-ws win32 
-arch x86 
-launcher C:\Program Files\IBM\Installation Manager\eclipse\IBMIMc.exe 
-name IBMIMc 
--launcher.library C:\Program Files\IBM\Installation 
Manager\eclipse\plugins\org.eclipse.equinox.launcher.win32.win32.x86_1.0 
.100.v20080201a\eclipse_1108.dll 
-startup C:\Program Files\IBM\Installation 
Manager\eclipse\plugins\org.eclipse.equinox.launcher_1.0.100.v20080303.j 
ar 
-exitdata 6b8_7c4 
-accessRights admin 
-silent 
-updateAll 
-vm C:\Program Files\IBM\Installation 
Manager\eclipse\jre_5.0.3.sr8a_20080811b\j 
re\bin\java.exe 
-vmargs 
-Xquickstart 
-Xgcpolicy:gencon 
-jar C:\Program Files\IBM\Installation 
Manager\eclipse\plugins\org.eclipse.equinox.launcher_1.0.100.v20080303.jar 


6. The Installation Manager log finishes with: 

86 INFO 17:17.29 Elapsed time 17:02.79 for: 
Updating com.ibm.rational.application.developer to 7.0.0.6_20080320_1728
features: 
com.ibm.rad.sdpcore,com.ibm.rad.jre,com.ibm.rad.clearcase,com.ibm.rad.co
de_review,com.ibm.rad.tptp,com.ibm.rad.pde,com.ibm.rad.birt,com.ibm.rad.
crystal_tools,com.ibm.rad.data_tools,com.ibm.rad.j2ee_web_services,com.i
bm.rad.jve,com.ibm.rad.rup,com.ibm.rad.viz_editors,com.ibm.rad.was_compi
le_dep,com.ibm.rad.was_core,com.ibm.rad.was60_ute,com.ibm.rad.was61_ute,
com.ibm.rad.webtools_core 
Uninstalling fix com.ibm.rational.application.developer.7002.ifix001
7.0.0.2_20070418_1400 
87 ERROR 18:28.04 Status ERROR: com.ibm.cic.agent.core code=0 null


7. If you relaunch Installation Manager and version 7.0.0.y appears to be installed 
8. If you launch the product, Help->About shows version 7.0.0.y 


RESOLVING THE PROBLEM
 

Create a response file to uninstall the license silently: 


<?xml version="1.0" encoding="UTF-8"?>
<agent-input acceptLicense='true'>
<uninstall> 
<offering profile='SDP Licenses' id='com.ibm.rad.pek'/> 
</uninstall>
</agent-input> 


Note that the profile id, namely SDP Licenses, and the offering id for the license com.ibm.rad.pek can be found in the installRegistry.xml located in:


C:\Documents and Settings\All Users\Application Data\IBM\Installation Manager 


Note that for other products the profile id and/or the offering id might differ.

1. Install Rational Application developer 7.0.0.x 
2. Apply the license (Activation Kit) 
3. Uninstall the license in silent mode using the script above 
4. Run the silent update with -updateAll 

Alternatively, you can have <updateAll> in a response file with both the Rational Application Developer update repository and license repository (file location) specified. When Installation Manager runs silently it will update Rational Application Developer and apply the license as well.




RELATED INFORMATION
#Silent installation commands [http://publib.boulder.ibm.com/infocenter/radhelp/v7r5/index.jsp?topic=/com.ibm.rad.install.doc/topics/r_silent_inst_commands12.html]