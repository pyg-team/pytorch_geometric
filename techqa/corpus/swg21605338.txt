Title: IBM Fix pack install fails for IBM WebSphere Application Server - Express version 8.0 - United States

Text:
 TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 If IBM WebSphere Application Server - Express version 8.0 was ordered as a pre-loaded product with your IBM i, the first fix pack you attempt to apply to Application Server - Express might fail to install.

This problem does not occur if you installed Application Server - Express version 8.0 using the installation media or downloads. 

SYMPTOM
Messages similar to the following appear in the output of the "imcl install" command: 

 CRIMA1156E ERROR: Error preparing IBM Web Enablement for IBM i
ERROR: 'plug-in com.ibm.was.license.v80_8.0.0.201105030056' not found in
/QIBM/WAS/WASFIXPACKS/WAS/8003/FIXPACK.
ERROR: 'plug-in com.ibm.ws.persist.installregistries_8.0.0.20110415_1149'
not found in/QIBM/WAS/WASFIXPACKS/WAS/8003/FIXPACK.
ERROR: 'plug-in com.ibm.was.msl.prereq.v80_8.0.0.20110420_0200' not found
in/QIBM/WAS/WASFIXPACKS/WAS/8003/FIXPACK.



DIAGNOSING THE PROBLEM
The output from invoking /QIBM/ProdData/WebSphere/AppServer/V8/Express/bin/versionInfo shows the build level is u1114.31.



RESOLVING THE PROBLEM
To resolve the problem, reinstall the product using both the product installation repository and the fix pack repository for the most recent fix pack. 


Before reinstalling the product:


 1. Install the latest WebSphere Application Server version 8.0 PTF group to get the most recent fix pack. 
    
    
 2. Optionally copy your profile files to a temporary directory. Reinstalling will result in the loss of existing profiles. So, you'll need to create new profiles after reinstalling, and a copy of your old profiles may be useful as a reference.
    
    
 3. Stop your application servers.
    
    
 4. Uninstall the product. This step may result in removal of all 5733W80 PTFs but that will not affect the availability of Fix Pack installation files contained in the PTF group.  1. On the QShell command line, type "cd /QIBM/ProdData/InstallationManager/eclipse/tools" and press enter 
     2. Type "imcl uninstall com.ibm.websphere.WEBENAB.v80 -installationDirectory /QIBM/ProdData/WebSphere/AppServer/V8/Express 
     3. After the uninstall completes, remove the /QIBM/ProdData/WebSphere/AppServer/V8/Express and /QIBM/UserData/WebSphere/AppServer/V8/Express directories. 
        For example:
        rm -rf /QIBM/ProdData/WebSphere/AppServer/V8/Express 
        rm -rf /QIBM/UserData/WebSphere/AppServer/V8/Express
        
        
    
    
 5. Provide local access to the WebSphere Application Server - Express version 8.0 installation files using the "Web Enablement for i V7.1" DVD or electronic image (.iso file):  1. If you do not have the "Web Enablement for i V7.1" DVD, see http://www-03.ibm.com/systems/i/software/websphere/express/indexwe2.html [http://www-03.ibm.com/systems/i/software/websphere/express/indexwe2.html] for information about obtaining the product installation media. Also, see http://www-912.ibm.com/s_dir/slkbase.NSF/DocNumber/637999413 [http://www-912.ibm.com/s_dir/slkbase.NSF/DocNumber/637999413] to download WebEnablement for IBM i from the Entitled Software Support (ESS) web site. 
     2. If your IBM i has an optical drive attached and it is accessible to you:  1. Invoke the IBM i Change Optical Attributes command to enable extended format support for the optical file system: 
            CHGOPTA EXTMEDFMT(*YES) 
         2. Place the DVD in the optical drive
        
        
     3. If your IBM i does not have an optical drive attached or it is not accessible to you:  1. Copy or FTP the .iso file to your IBM i. For example, to FTP file was.dvd.8000.webenab.iso from a Windows work station to IFS directory /MYVOPT on myhost.mydomain.com:  1.  From an IBM i command line, type "QSH" and press enter 
             2.  Type "mkdir /MYVOPT", and press enter 
             3.  Open a Windows command prompt 
             4.  CD to the directory containing file was.dvd.8000.webenab.iso 
             5.  Type "ftp myhost.mydomain.com", and press enter 
             6.  Provide your userid and password when prompted 
             7.  Type "cd /MYVOPT", and press enter 
             8.  Type "binary", and press enter 
             9.  Type "put was.dvd.8000.webenab.iso", and press enter 
             10. Type "quit", and press enter
            
            
         2. Invoke the IBM i Change Optical Attributes command to enable extended format support for the optical file system: 
            CHGOPTA EXTMEDFMT(*YES) 
         3. Create a virtual device. Here we use MYVOPT, but the device name can be anything you want to call it.:
            CRTDEVOPT DEVD(MYVOPT) RSRCNAME(*VRT) 
         4. The virtual device needs to be made into a ready state:
            VRYCFG CFGOBJ(MYVOPT) CFGTYPE(*DEV) STATUS(*ON) 
         5. Create the image catalog and directory for where the .iso file is to be placed for the image catalog. Here we name the image catalog the same name as the virtual device, MYVOPT. The place to ftp the .iso files to is in the iSeries IFS in directory /MYVOPT:
            
            CRTIMGCLG IMGCLG(MYVOPT) DIR('/MYVOPT') CRTDIR(*YES) CLGASPTHLD(*MAX)
            
         6. Add the .iso file to the image catalog:
            ADDIMGCLGE IMGCLG(MYVOPT) FROMFILE('/MYVOPT/was.dvd.8000.webenab.iso') REPLACE(*YES)
            
         7. Make the imagage catalog ready. This command can take several minutes to complete:
            LODIMGCLG IMGCLG(MYVOPT) DEV(MYVOPT)
            
         8. Verify the image catalog is "ok". 
            VFYIMGCLG IMGCLG(MYVOPT) TYPE(*OTHER) SORT(*YES) 
            
            
        
        
    
    
 6. To ensure both the initial installation and fix pack packages for the WEBENAB offering are available, invoke the imcl listAvailablePackages command from the QShell command line with both the fix pack and the installation repository locations specified in the repositories list. For example, if the PTF group containing Fix Pack 3 was previously installed and the "Web Enablement for i V7.1" DVD is in the optical drive:
    
    /QIBM/ProdData/InstallationManager/eclipse/tools/imcl listAvailablePackages -repositories file:///QIBM/WAS/WASFIXPACKS/WAS/8003/FIXPACK,file:///QOPT/WASV8_WEBENAB
    com.ibm.websphere.BASE.v80_8.0.3.20120320_0536 
    com.ibm.websphere.EXPRESS.v80_8.0.3.20120320_0536
    com.ibm.websphere.ND.v80_8.0.3.20120320_0536 
    com.ibm.websphere.WEBENAB.v80_8.0.3.20120320_0536
    com.ibm.websphere.WEBENAB.v80_8.0.0.20110503_0200
    
    

Reinstalling the product: 

To reinstall the product and apply the fix pack, invoke the imcl install command from the QShell command line with both the fix pack and the installation repository locations specified in the repositories list. For example, if the PTF group containing Fix Pack 3 was previously installed and the "Web Enablement for i V7.1" DVD is in the optical drive: 

/QIBM/ProdData/InstallationManager/eclipse/tools/imcl install com.ibm.websphere.WEBENAB.v80 -repositories file:///QIBM/WAS/WASFIXPACKS/WAS/8003/FIXPACK,file:///QOPT/WASV8_WEBENAB -installationDirectory /QIBM/ProdData/WebSphere/AppServer/V8/Express -properties was.install.os400.profile.location=/QIBM/ProdData/WebSphere/AppServer/V8/Express -acceptLicense 

Note: The command might not fit on the QShell command line. So, you should add lines by typing the total number of lines desired on the QSH Command Entry panel and pressing F14 (or <shift> F2). 

After reinstalling the product:  1. Reinstall the WebSphere Application Server version 8.0 PTF group. Uninstalling the product may result in PTFs being removed. 
 2. Optionally, if using a virtual device to access the installation files, remove the image catalog and the virtual device:
    VRYCFG CFGOBJ(MYVOPT) CFGTYPE(*DEV) STATUS(*OFF)
    LODIMGCLG IMGCLG(MYVOPT) OPTION(*UNLOAD) DEV(MYVOPT)
    DLTIMGCLG IMGCLG(MYVOPT) KEEP(*NO)
    DLTDEVD DEVD(MYVOPT)

RELATED INFORMATION
#Web Enablement for IBM i [http://www-03.ibm.com/systems/i/software/websphere/express/indexwe2.html]
Download Web Enablement for IBM i [http://www-912.ibm.com/s_dir/slkbase.NSF/DocNumber/637999413]