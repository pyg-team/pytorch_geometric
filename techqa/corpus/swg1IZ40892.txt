Title: IBM IZ40892: MSSQL AGENT DATA COLLECTOR STOPS RUNNING, AFTER RESTARTING SQL AGENT, IT WORKS AGAIN FOR A WHILE. - United States

Text:
  FIXES ARE AVAILABLE
IBM Tivoli Monitoring for Database Microsoft SQL Server 6.2.0-TIV-ITM_SQL-IF0005 [http://www-01.ibm.com/support/docview.wss?uid=swg24023163]
IBM Tivoli Monitoring for Database Microsoft SQL Server 6.2.0-TIV-ITM_SQL-IF0007 [http://www-01.ibm.com/support/docview.wss?uid=swg24024095]
IBM Tivoli Monitoring for Database Microsoft SQL Server 6.2.0-TIV-ITM_SQL-IF0010 [http://www-01.ibm.com/support/docview.wss?uid=swg24027415]


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  Environment:
   Windows 2003 5.2 SP2
   SQL Server Agent 6.1.2 LA0001.
   MSSQL Server 2005 Enterprise Edition.
   
   Problem Description: SQL agent starts and works correctly but
   data
   collector fails after processing a job name with a single
   quote. After
   restarting SQL Server agent the collector works again for a
   while.
   
   
   Detailed Recreation Procedure:
   1. While configuring any database job put multiple single quotes
   in the
   job name.
   2. Start the SQL Agent
   3. After some time MSSQL Agent data collector should stop.
   
   
   Related Files and Output:
   Look for collector log file on agent machine under
   <CANDLE_HOME>\TMAITM6\LOGS.
   
   The log file shows an error statement containing:
   "Unclosed quotation mark before the character string
   'xxxxxxxx''"
   The query "exec msdb..sp_help_job"  when issued from the command
   line
   will retrieve the names of database jobs .  The output can be
   used to
   confirm the problem.
   
   
    
   
   

LOCAL FIX

PROBLEM SUMMARY
 *  The agent cannot retrieve data when there are job names with
   quotation marks. The quote marks cause the data collector to
   fail.  The agent continues to run but has no data.
   
   The log file shows an error statement containing:
   "Unclosed quotation mark before the character string
   'xxxxxxxx''"
   The problem can be confirmed by submitting the query
    "exec msdb..sp_help_job"
   from the command line and searching for quotes in the names of
   the retrieved database jobs.
   
   
    
   
   

PROBLEM CONCLUSION
 *  The fix for this APAR is included in the following maintenance
   vehicle:
   
         | LA          | 6.1.2-TIV-ITM_SQL-LA0003
         | interim fix | 6.2.0-TIV-ITM_SQL-IF0004
         | interim fix | 6.2.1-TIV-ITM_SQL-IF0001
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   IZ40892
   
   
 * REPORTED COMPONENT NAME
   TIV MON MS SQL
   
   
 * REPORTED COMPONENT ID
   5724B96MO
   
   
 * REPORTED RELEASE
   612
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2009-01-06
   
   
 * CLOSED DATE
   2009-01-22
   
   
 * LAST MODIFIED DATE
   2010-02-01
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   TIV MON MS SQL
   
   
 * FIXED COMPONENT ID
   5724B96MO
   
   

APPLICABLE COMPONENT LEVELS
 * R612 PSY
   UP