Title: IBM PM89301: NUMBERFORMATEXCEPTION WHEN RUNNING COVERTTOCLUSTER AND CREATING MAINTENANCE MODE ROUTING RULES VIA ADMIN CONSOLE FAILS - United States

Text:
  FIXES ARE AVAILABLE
8.5.5.1: WebSphere Application Server V8.5.5 Fix Pack 1 [http://www-01.ibm.com/support/docview.wss?uid=swg24035935]
8.5.5.2: WebSphere Application Server V8.5.5 Fix Pack 2 [http://www-01.ibm.com/support/docview.wss?uid=swg24037250]
8.5.5.3: WebSphere Application Server V8.5.5 Fix Pack 3 [http://www-01.ibm.com/support/docview.wss?uid=swg24038133]
8.5.5.4: WebSphere Application Server V8.5.5 Fix Pack 4 [http://www-01.ibm.com/support/docview.wss?uid=swg24038539]
8.5.5.5: WebSphere Application Server V8.5.5 Fix Pack 5 [http://www-01.ibm.com/support/docview.wss?uid=swg24039425]
8.5.5.6: WebSphere Application Server V8.5.5 Fix Pack 6 [http://www-01.ibm.com/support/docview.wss?uid=swg24040035]
8.5.5.7: WebSphere Application Server V8.5.5 Fix Pack 7 [http://www-01.ibm.com/support/docview.wss?uid=swg24040533]
8.5.5.8: WebSphere Application Server V8.5.5 Fix Pack 8 [http://www-01.ibm.com/support/docview.wss?uid=swg24041178]
8.5.5.9: WebSphere Application Server V8.5.5 Fix Pack 9 [http://www-01.ibm.com/support/docview.wss?uid=swg24041819]
8.5.5.10: WebSphere Application Server V8.5.5 Fix Pack 10 [http://www-01.ibm.com/support/docview.wss?uid=swg24042150]
8.5.5.11: WebSphere Application Server V8.5.5 Fix Pack 11 [http://www-01.ibm.com/support/docview.wss?uid=swg24043005]
8.5.5.12: WebSphere Application Server V8.5.5 Fix Pack 12 [http://www-01.ibm.com/support/docview.wss?uid=swg24043844]
8.5.5.13: WebSphere Application Server V8.5.5 Fix Pack 13 [http://www-01.ibm.com/support/docview.wss?uid=swg24044479]


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  If an On-Demand Router (ODR) has an ODR level routing rule for
   maintenance mode the covertToCluster command to move the ODR
   into a ODR static cluster will fail with a similar exception
   to the one below:
   
   Exception:java.lang.NumberFormatException
   SourceId:com.ibm.ws.xd.config.rules.commands.PromoteRulesToClust
   erComman
   dStep.executeStep ProbeId:101
   Reporter:com.ibm.ws.xd.config.rules.commands.PromoteRulesToClust
   erComman
   dStep@f789c649
   java.lang.NumberFormatException: For input string: "Failover"
   at
   java.lang.NumberFormatException.forInputString(NumberFormatExcep
   tion.jav
   a:59)
   at java.lang.Integer.parseInt(Integer.java:460)
   at java.lang.Integer.<init>(Integer.java:671)
   at
   com.ibm.ws.xd.config.rules.manager.impl.ClusterRoutingRulesManag
   erImpl.a
   ddRule(ClusterRoutingRulesManagerImpl.java:127)
   
   Also, once an ODR static cluster is created using the
   administrative console to define ODR level routing rules for
   maintenance mode permits will fail.
   
   The errors can be:
   SRVE0292I: Servlet Message - [isclite#isclite.war]:.action:
   OdrClusterDetailForm was null.Creating new form bean and storing
   in session
   
   or
   
   ServletException
   in:/com.ibm.ws.console.servermanagement/tabsLayout.jsp]
   Cannot find bean com.ibm.ws.console.proxy.ProxyDetailForm in
   any scope'
   
   When tracing the same NumberFormatException exception from the
   scripting case can be seen for the administrataive console
   case.
   
   
    
   
   

LOCAL FIX
 *  Remove any maintenance mode rules before running
   convertToCluster.  Then add the ODR level maintenance mode
   routing rules by using scripting.
   
   Such as:
   AdminTask.addRoutingRule('-clustername CLUSTER_NAME -protocol
   HTTP -priority 0 -expression "serverhost = \'localhost\'"
   -actionType permitstickyMM -multiclusterAction WLOR
   -routingLocations cluster=*/*')
   
   
    
   
   

PROBLEM SUMMARY
 *  ****************************************************************
   * USERS AFFECTED:  All users of IBM WebSphere Application      *
   *                  Server V8.5 on-demand router (ODR)          *
   ****************************************************************
   * PROBLEM DESCRIPTION: Converting an ODR server to an ODR      *
   *                      cluster fails if a routing rule         *
   *                      uses a permit action type other than    *
   *                      the default "permit".                   *
   ****************************************************************
   * RECOMMENDATION:                                              *
   ****************************************************************
   The conversion of an ODR server to an ODR cluster fails if a
   rule with "permitstickyMM" is used. Any 'permit' type other
   than "permit" will cause the issue.
   
   
    
   
   

PROBLEM CONCLUSION
 *  The code was updated to properly handle all flavors of
   "permit" for a routing rule.
   
   The fix for this APAR is currently targeted for inclusion in
   fix pack 8.5.5.1.  Please refer to the Recommended Updates
   page for delivery information:
   http://www.ibm.com/support/docview.wss?rs=180&uid=swg27004980 [http://www.ibm.com/support/docview.wss?rs=180&uid=swg27004980]
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   PM89301
   
   
 * REPORTED COMPONENT NAME
   WEBS APP SERV N
   
   
 * REPORTED COMPONENT ID
   5724H8800
   
   
 * REPORTED RELEASE
   850
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2013-05-17
   
   
 * CLOSED DATE
   2013-06-07
   
   
 * LAST MODIFIED DATE
   2013-06-07
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   WEBS APP SERV N
   
   
 * FIXED COMPONENT ID
   5724H8800
   
   

APPLICABLE COMPONENT LEVELS
 * R850 PSY
   UP