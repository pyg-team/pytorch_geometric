Title: IBM IZ25849: TACMD STOP AGENT -T OR-FAILS KDDEXEC: CAN'T CONTINUE W/STOP - United States

Text:
  FIXES ARE AVAILABLE
IBM Tivoli Monitoring for Databases:Sybase Server Agent 6.1.0-TIV-ITM_SYB-LA0006 [http://www-01.ibm.com/support/docview.wss?uid=swg24021335]
IBM Tivoli Monitoring for Databases:Sybase Server Agent 6.1.0-TIV-ITM_SYB-IF0008 [http://www-01.ibm.com/support/docview.wss?uid=swg24029755]


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  Environment:
   ITM 6.1 FP4 or FP5 TEMA/TEMS/TEPS
     ITM 6.1 Oracle Agent with FP01 and any LA
             ( Customer had LA04 )
   .
   Problem Description:
   
   - Execute tacmd stop agent -t or fails with kddexec: Can't
   continue with
   the stop
   
   - This problem only happened if the OS of target agent is
   UNIX/Linux.
   
   For example)
   itmcmd agent : considering servers: ORA92 ORA92I01 ORA92I08
   ORA92I10.
   itmcmd agent warning: cannot stop ORA92, running=no,continuing
   ...
   itmcmd agent warning: cannot stop ORA92I01,
   running=no,continuing ...
   kddexec: Can't continue with the stop
   kddexec: Can't continue with the stop
   .
   However, if the agent started locally, there's no problem to
   stop the
   processes.
   .
   1. Install Oracle LA locally
   2. execute ./itmcmd agent stop or
   ..logs/agentstopfail.logs shows:
   kddexec: stop request for PID 1781936 is not acceptable
   kddexec: stop request for PID 3059878 is not acceptable
   kddexec: stop request for PID 3059878 is not acceptable
   .
   When the ITM 6.1 Oracle gent started by remote deploy, during it
   passed the OS agent, it maked the signal. As a result fo that,
   it failed
   to stop by 'tacmd stop' against ITM 6.1 Oracle Agent because it
   even
   masked the kill signal passed when 'tacmd stop' executed.
   .
   This issue also affects tacmd updateAgent against other agent
   (like UA), because during the updateAgent, it stops all the
   existing running ITM agents, but but it failed to stop them.
   This is only ITM6.1 Oracle/sybase agent problem on UNIX/Linux.
   We did major design change in ITM 6.2 and this problem doesn't
   happen in ITM 6.2.
   .
   Detailed Recreation Procedure:
   - Before applying oracle LA, start the oracle agent on TEMA box
   .
   For example...
   This is the TEMS info before executing "tacmd updateAgent"
   # ./tacmd listSystems
   Managed System Name       Product Code      Version     Status
   SUBTEST:itm64suse1:ORA            OR       06.10.01.00    N
   CANDLEX2E:Warehouse               HD       06.10.03.00    Y
   candlesun3:KUX                    UX       06.10.05.01    Y
   ora920:itm64suse1:ORA             OR       06.10.01.00    Y
   test:itm64suse1:ORA               OR       06.10.01.00    Y
   ORATEST                           EM       06.10.05.01    Y
   itm64suse1.tivlab.raleigh.ibm.co  LZ       06.10.05.01    Y
   .
   This is the tacmd updateAgent result.
   .
   - Install the new LA and execute 'tacmd updateAgent'
   .
   For example...
   # ./tacmd updateAgent -t or -n
   itm64suse1.tivlab.raleigh.ibm.com:LZ -v 061001004
   KUICUA012I: Are you sure you want to update the or agents that
   manage
   SUBTEST:itm64suse1:ORA,ora920:itm64suse1:ORA,test:itm64suse1:ORA
   to version 061001004? Updating these agents stops any that are
   running, applies the changes, and restarts them.
    Enter Y for yes or N for no:y
   .
   KUICUA011I: Updating the or agents.
   .
   KUICUA015E:  The updateAgent command did not complete because an
   error occurred. Refer to the following error returned from the
   server:
   .
   The monitoring server encountered an error while updating the
   managed system type.
   The kuiras1.log file may provide more information about this
   error. If you require further assistance resolving the error,
   contact IBM Software Support.
   A timeout occurred while waiting for an agent task to complete
   on itm64suse1.
   The agent task did not complete within the configured time out
   period.
   .
   Approver:sm
   
   
    
   
   

LOCAL FIX

PROBLEM SUMMARY
 *  The code was rewritten to accept the signals correctly
   
   
    
   
   

PROBLEM CONCLUSION
 *  The fix for this APAR is contained in the following maintenance
   package:
    | LA interim fix | 6.1.0.1-TIV-ITM_ORA-LA0009
   
   This maintenance delivery vehicle is a limited availability
   patch and therefore is in a "hidden directory." Level 2 Support
   can
   provide down load instructions to you. Contact level 2 support
   at:
   
   http://www.ibm.com/software/sysmgmt/products/support/Contact_L2_
   Support.html [http://www.ibm.com/software/sysmgmt/products/support/Contact_L2_Support.html]
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   IZ25849
   
   
 * REPORTED COMPONENT NAME
   TIV MON ORACLE
   
   
 * REPORTED COMPONENT ID
   5724B96OO
   
   
 * REPORTED RELEASE
   610
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2008-06-27
   
   
 * CLOSED DATE
   2008-08-29
   
   
 * LAST MODIFIED DATE
   2008-08-29
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   TIV MON ORACLE
   
   
 * FIXED COMPONENT ID
   5724B96OO
   
   

APPLICABLE COMPONENT LEVELS
 * R610 PSY
   UP