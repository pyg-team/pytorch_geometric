Title: IBM PI24496: CSQX191I MESSAGES FOR CLUSTER CHANNELS DURING CHINIT SHUTDOWN - United States

Text:
z/os  A FIX IS AVAILABLE
Obtain the fix for this APAR.


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  CSQX191I messages following a STOP QMGR command for cluster
   channels.
   Looks like CSQXADPC should be getting invoked to post the
   get-waiters, but that isn't happening.
   
   Additional symptoms:
   CSQX208E & CSQx206E messages with TRPTYPE=TCP RC=00000480
   .
   Cluster channels that experience the problem may be in the
   STOPPED status when the CHIN restarts, requiring manual
   intervention to restart the channel.
    This also applies non-cluster channels.
   
   
    
   
   

LOCAL FIX

PROBLEM SUMMARY
 *  ****************************************************************
   * USERS AFFECTED: All users of WebSphere MQ for z/OS Version 7 *
   *                 Release 1 Modification 0.                    *
   ****************************************************************
   * PROBLEM DESCRIPTION: When a STOP QMGR command is issued,     *
   *                      CSQX191I messages are issued for        *
   *                      cluster-sender channels indicating      *
   *                      that the channel is entering message    *
   *                      reallocation, accompanied by either     *
   *                      message CSQX208E or CSQX206E with       *
   *                      TRPTYPE=TCP RC=00000480.                *
   ****************************************************************
   * RECOMMENDATION:                                              *
   ****************************************************************
   When a channel initiator is stopping because the queue manager
   is quiescing after a STOP QMGR command has been issued, sender
   channels that are in a get-wait are not posted until after
   TCP/IP calls have been cancelled for the process. This means
   that when the channel attempts to send a heartbeat, the send()
   fails with RC=00000480 (ECANCELED) and message CSQX206E is
   issued. Alternatively, if a get-wait expires before TCP/IP
   calls have been cancelled, the channel's attempt to receive a
   reply to a heartbeat may fail as uninitialized storage in
   CSQXADPO can cause the sender channel to be treated as a
   receiver channel, resulting in the recv() call failing with
   RC=00000480 (ECANCELED) and message CSQX208E being issued.
   Either of these failures cause message reallocation to be
   started for cluster-sender channels and message CSQX191I to be
   issued.
   
   
    
   
   

PROBLEM CONCLUSION
 *  CSQXSPRT has been updated to call CSQXADPC to post channels
   in a get-wait earlier during channel initiator shutdown when
   the connection to the queue manager is quiescing.
   CSQXADPO has been updated to initialize the storage used to
   indicate whether a sender or a receiver channel is being
   processed.
   100Y
   CSQXADPC
   CSQXADPO
   CSQXSPRT
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   PI24496
   
   
 * REPORTED COMPONENT NAME
   WMQ Z/OS V7
   
   
 * REPORTED COMPONENT ID
   5655R3600
   
   
 * REPORTED RELEASE
   100
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt / Xsystem
   
   
 * SUBMITTED DATE
   2014-08-22
   
   
 * CLOSED DATE
   2014-12-19
   
   
 * LAST MODIFIED DATE
   2016-05-16
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
    PI30429 [http://www-01.ibm.com/support/docview.wss?uid=swg1PI30429] UI24061
   
   

MODULES/MACROS
 *  CSQXADPC CSQXADPO CSQXSPRT
   
   
    
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   WMQ Z/OS V7
   
   
 * FIXED COMPONENT ID
   5655R3600
   
   

APPLICABLE COMPONENT LEVELS
 * R100 PSY UI24061 [HTTPS://WWW14.SOFTWARE.IBM.COM/WEBAPP/SET2/ORDERMEDIA/SHOPCART?PTFS=UI24061]
   UP15/01/16 P F501
   
   

FIX IS AVAILABLE
 * SELECT THE PTF APPROPRIATE FOR YOUR COMPONENT LEVEL. YOU WILL BE REQUIRED TO SIGN IN. DISTRIBUTION ON PHYSICAL MEDIA IS NOT AVAILABLE IN ALL COUNTRIES.