Title: IBM AICG and EYUCS0204W timeouts and CMAS hangs after daylight saving time change - United States

Text:
EYUCL0016I MSGEYUCL0016I AZI2 AZI9 AZI4 ABENDAZI2 ABENDAZI9 ABENDAZI4 XSWI LOCK EYU0CPLK EYU0CPFL EYU0CPRL EYU0CPRT LINKGONE ABENDAICG AICG COSD TERMINATE TERMINATION ; ETR SYSPLEX TIME ; ICE RTA000167294 MSGEYUCS0204W EYUCS0105E UNABLE TO ASSIGN LINKSET MRO RESET XLEV XSWI HANG HUNG WAIT WAITS DST ; daylight savings time change ; day light savings time; day-light savings time ; 5655S9700 R660 660 R600 600 HCI6600 R670 670 R700 700 HCI6700 5655-S97 5655S97 ; 5655Y0400 R680 680 R800 800 HCI6800 R690 690 R900 900 HCI6900 R700 700 R000 000 HCI7000 R710 710 R100 100 HCI7100 5655Y0401 5655-Y04 5655Y04 KIXINFO CPSM CPSMPDDB TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 You continually receive message EYUCS0204W for timeouts between systems after a process or time change. The CICSPlex SM address space (CMAS) might also hang during a subsequent shutdown request. You also receive an abend AICG (abendAIG) in method XSWI. 

CAUSE
The Sysplex external time reference (ETR) was changed to test a time change but the CMAS was not recycled, nor had a CICS PERFORM RESETTIME been issued. This situation resulted in message DFHIC00801 indicating the time change from 24.00.00 to 23.00.00.

Messages in the CMAS EYULOG began showing up with a timestamp of 00:00:00 as a result of retrieving the time from an EXEC CICS ASKTIME command.

The reason for the repeated EYUCS0204W timeouts every 10 minutes is due to a link timeout occurring and the receive link task LNMI being driven with a LOST_CONTACT status. CLMU will invoke CPRL to remove the link locally. CPRL will spawn a LPLK task to obtain the netlock and this LPLK task is in XSWX waiting to be posted to free the netlock. 

At the time of the dump, the spawning LNMI task had already ended and issued no exceptions or error messages. The only way the LNMI task can go away normally without calling CPFL to free the netlock is if CPRL determined that it needed to invoke CPRT as a method mode TRAN as a separate CICS task. Further investigation of the dump indicates that CPRL just past label REML_FIRE_CPRT did cause a new CICS task to run. CPRT issues a 15 interval delay out of XSWI. It can be seen that this task has been suspended for several hours due to the time change and no PERFORM RESETTIME being issued.

The CMAS JESMSGLG shows other tasks receiving abend AICG in method XSWI due to timeout because interval control is no longer functioning properly.

If the time interval had been processed correctly in the spawned LPRT task, CPRT would have eventually invoked CPFL to free the lock. CPFL simply invokes CPLK and the CMASDIR_LBADDR contains the CPLB_CPLK_ECB to be posted to satisfy the waiting CPLK task.

RESOLVING THE PROBLEM
Specify the CICS system initialization table (SIT) parameter AUTORESETTIME=IMMEDIATE [https://www.ibm.com/support/knowledgecenter/SSGMCP_5.4.0/reference/sit/dfha2_autoresettime.html] in your CMASs. Alternatively, do one of the following when the runtime processor clock is updated: 

 * Use the CEMT PERFORM RESET [https://www.ibm.com/support/knowledgecenter/SSGMCP_5.4.0/reference/transactions/dfha7my.html] or EXEC CICS RESETTIME [https://www.ibm.com/support/knowledgecenter/SSGMCP_5.4.0/reference/commands-spi/dfha8_performresettime.html] command in the CMAS
   
 * Recycle the CMAS

RELATED INFORMATION
 Daylight Saving Time changes effect on CICS TS [https://developer.ibm.com/answers/questions/177632/daylight-saving-time-changes-effect-on-cics-ts.html]




PRODUCT ALIAS/SYNONYM
 CICSPlex SM CICSPlexSM CPSM CP/SM