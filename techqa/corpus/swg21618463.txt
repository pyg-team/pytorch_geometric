Title: IBM JVMJ9VM030E Invalid UTF8 used in JNI function when initializing JVM in CICS TS 5.1 - United States

Text:
JVMJ9VM030E JVMJ9VM030 MSGJVMJ9VM030E 5655Y0400 R680 680 R800 800 HCI6800 5655-Y04 5655Y04 KIXINFO kixdcfcic680 TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 You are unable to initialize a Java™ Virtual Machine (JVM) in CICS Transaction Server for z/OS (CICS TS) V5.1. When trying to initialize a JVM, the first message you see is JVMJ9VM030E Invalid UTF8 used in JNI function. This is followed by message JVMDUMP006I and a series of dumps. 

SYMPTOM
These are the messages from the dfhjvmerr file: 

JVMJ9VM030E Invalid UTF8 used in JNI function
JVMDUMP006I Processing dump event "abort", detail "" - please wait.
JVMDUMP032I JVM requested System dump using 'HLQ.JVM.DBA.D121109.T115313.X&DS' in response to an event
IEATDUMP in progress with options SDATA=(LPA,GRSQ,LSQA,NUC,PSA,RGN,SQA,SUM,SWA,TRT)
IEATDUMP success for DSN='HLQ.JVM.DBA.D121109.T115313.X&DS'
JVMDUMP010I System dump written to HLQ.JVM.DBA.D121109.T115313.X&DS
JVMDUMP032I JVM requested Java dump using '/u/userid/cics680/work_dir/javacore.20121109.115313.34015214.0002.txt' in response to an event
JVMDUMP010I Java dump written to /u/userid/cics680/work_dir/javacore.20121109.115313.34015214.0002.txt
JVMDUMP032I JVM requested Snap dump using '/u/userid/cics680/work_dir/Snap.20121109.115313.34015214.0003.trc' in response to an event
JVMDUMP010I Snap dump written to /u/userid/cics680/work_dir/Snap.20121109.115313.34015214.0003.trc
JVMDUMP013I Processed dump event "abort", detail "".
CEE3250C The system or user abend U 501 R=NULL was issued.
From entry point message_put at compile unit offset +000000003E771658 at entry offset +000000000000FF98 at address 000000003E771658.

These are the messages in the CICS job log:
DFHSJ0910 IY2CZCDI CICSUSER JVMSERVER DFH£JVMS has been created.
JVMJ9VM030E Invalid UTF8 used in JNI function
JVMDUMP006I Processing dump event "abort", detail "" - please wait
JVMDUMP032I JVM requested System dump using 'HLQ.JVM.DBA.D121 239
239 109.T115313.X&DS' in response to an event 
IGD101I SMS ALLOCATED TO DDNAME (SYS00014) 240
240 DSN (HLQ.JVM.DBA.D121109.T115313.X001)
240 STORCLAS(STANDARD) MGMTCLAS(STANDARD)DATACLAS ()
240 VOL SER NOS= P2P860
IEA827I COMPLETE TRANSACTION DUMP WRITTEN TO 00001 DATASETS 244
244 STARTING FROM 'HLQ.JVM.DBA.D121109.T115313.X001'
244 PLEASE COMBINE USING COPYDUMP PRIOR TO VIEWING IN IPCS
IGD104I HLQ.JVM.DBA.D121109.T115313.X001RETAINED, DDNAME=SYS00014
JVMDUMP032I JVM requested Java dump using '/u/userid/cics680/work_dir 246 
246 /javacore.20121109.115313.34015214.0002.txt' in response to an event
JVMDUMP032I JVM requested Snap dump using '/u/userid/cics680/work_dir 247
247 /Snap.20121109.115313.34015214.0003.trc' in response to an event
CEE3798I ATTEMPTING TO TAKE A DUMP FOR ABEND U4094 TO DATA SET: HLQ.D314.T1153177.DBA 
IGD101I SMS ALLOCATED TO DDNAME (SYS00015) 251
251 DSN (HLQ.D314.T1153177.DBA)
251 STORCLAS(STANDARD) MGMTCLAS(STANDARD) DATACLAS()
251 VOL SER NOS= P2P831
IGD104I HLQ.D314.T1153177.DBA RETAINED, DDNAME=SYS00015
IEA822I COMPLETE TRANSACTION DUMP WRITTEN TO HLQ.D314.T1153177.DBA
CEE3797I LANGUAGE ENVIRONMENT HAS DYNAMICALLY CREATED A DUMP

CAUSE
Attempt was made to initialize a JVM in CICS TS V5.1 with Java V7 but it was not at the required Service Refresh 1 level.



RESOLVING THE PROBLEM
Install IBM 64-bit SDK for z/OS, Java Technology Edition, V7 at Service Refresh 1, as is described in the product specific prerequisites. Follow these steps to view the prerequisites: 

 1. Go to the CICS TS V5.1 detailed system requirements [http://www.ibm.com/support/docview.wss?uid=swg27035673] document 
    
    
 2. Click on the link for CICS TS V5.1 detailed system requirements to view the "dynamically generated detailed system requirements for CICS Transaction Server for z/OS V5.1"
    
    
 3. Click on the Prerequisites tab
    
    
 4. Scroll down to the "Java SDK" Capability section in the "Summary". As of 26 November, this section contains the following Supported prerequisite products and Notes:
    Supported prerequisite products Notes IBM Runtime Environment, Java Technology Edition 7.0.1 7.0.2 7.0.3 IBM 64-bit SDK for z/OS, Java Technology Edition, V7 [http://www.ibm.com/systems/z/os/zos/tools/java/products/sdk7_64.html] at Service Refresh 1 (SR1) or higher service refresh is required to run CICS Java applications, WebSphere Application Server Liberty Profile, Axis2, web services validation, the CICS web services assistant, and the CICS XML assistant. . 



PRODUCT ALIAS/SYNONYM
 CICS/TS CICS TS CICS Transaction Server