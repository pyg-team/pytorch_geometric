Title: IBM Receive a ClassCastException for UrlTag error while using the store preview tool with workspaces - United States

Text:
wcf:url; langId; UrlTag; ClassCastException TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 Receive a ClassCastException for UrlTag class error when viewing a page that uses wcf:url in the WebSphere Commerce Management Center store preview tool while using workspaces. 

SYMPTOM
An error is reported in the logs, similar to: 

[8/21/11 4:01:52:921 CDT] 000000b9 logging E /GenericJSPPageError.jsp - java.lang.Integer incompatible with java.lang.String
java.lang.ClassCastException: java.lang.Integer incompatible with java.lang.String
at com.ibm.commerce.foundation.internal.client.taglib.UrlTag.doEndTag(UrlTag.java:233)
at com.ibm._jsp._TopCategoriesDisplay._jspx_meth_wcf_url_3(_TopCategoriesDisplay.java:15323)
at com.ibm._jsp._TopCategoriesDisplay._jspx_meth_c_if_15(_TopCategoriesDisplay.java:15541)
at com.ibm._jsp._TopCategoriesDisplay._jspx_meth_c_forEach_2(_TopCategoriesDisplay.java:15592)
at com.ibm._jsp._TopCategoriesDisplay._jspService(_TopCategoriesDisplay.java:1568)


CAUSE
The error is thrown when the wcf:url tag cannot locate the language id from the page context. The language id is not set when in the store preview tool when using workspaces.


DIAGNOSING THE PROBLEM
Examine the JSP in question for the page context definition of the language id. In the example above, the JSP in question would be TopCategoriesDisplay.jsp.



RESOLVING THE PROBLEM
Modify the JSP page experiencing the issue and set the page context attribute langId to a language identifer number. For example: 


<% pageContext.setAttribute("langId", "-1"); %>

 


Cross reference information Segment Product Component Platform Version Edition Commerce WebSphere Commerce Enterprise Staging Server / Workspaces / Authoring Server AIX, i5/OS, Linux, Solaris, Windows 7.0 All Editions