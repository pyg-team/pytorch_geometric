Title: IBM PM06420: OBJECTGRID JPA PLUGIN FAILS TO INITIALIZE - United States

Text:
 SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  In Websphere Application Server 7.0.0.5, the ObjectGrid
   datacache plugin for JPA fails to initialize.
   
   
    
   
   

LOCAL FIX

PROBLEM SUMMARY
 *  ****************************************************************
   * USERS AFFECTED:  All users of IBM WebSphere Application      *
   *                  Server V7.0                                 *
   ****************************************************************
   * PROBLEM DESCRIPTION: OpenJPA datacache plugins that are      *
   *                      not reentrant-safe fail to start.       *
   ****************************************************************
   * RECOMMENDATION:                                              *
   ****************************************************************
   A deadlock situation may occur during OpenJPA initialization
   when a datacache implementation which is not reentrant-safe on
   initialization is utilized.  The following Exception is an
   example of this problem that was introduced in 7.0.0.5:
   
   [9/1/09 15:56:31:890 CDT] 00000022 ThreadMonitor W
   WSVR0605W: Thread "WebContainer : 0" (0000002a) has been
   active for 765125 milliseconds and may be hung.  There is/are
   3 thread(s) in total in the server that may be hung.
    at java.lang.Object.wait(Native Method)
    at java.lang.Object.wait(Object.java:167)
    at java.lang.J9VMInternals.initialize(J9VMInternals.java:236)
    at
   com.ibm.ws.objectgrid.em.EMFactoryImpl.<init>(EMFactoryImpl.java
   :437)
    at
   com.ibm.ws.objectgrid.ObjectGridManagerImpl.getObjectGrid(Object
   GridManagerImpl.java:1781)
    at
   com.ibm.ws.objectgrid.ObjectGridManagerImpl.getObjectGrid(Object
   GridManagerImpl.java:1673)
    at
   com.ibm.ws.objectgrid.openjpa.ObjectGridResourceFactory.getObjec
   tGrid(ObjectGridResourceFactory.java:1090)
    at
   com.ibm.ws.objectgrid.openjpa.ObjectGridResourceFactory.getObjec
   tGridResource(ObjectGridResourceFactory.java:904)
    at
   com.ibm.ws.objectgrid.openjpa.ObjectGridCacheMap.initializeObjec
   tGrid(ObjectGridCacheMap.java:300)
    at
   com.ibm.websphere.objectgrid.openjpa.ObjectGridDataCache.initial
   ize(ObjectGridDataCache.java:217)
    at
   org.apache.openjpa.datacache.DataCacheManagerImpl.initialize(Dat
   aCacheManagerImpl.java:51)
    at
   org.apache.openjpa.conf.OpenJPAConfigurationImpl.getDataCacheMan
   agerInstance(OpenJPAConfigurationImpl.java:620)
    at
   org.apache.openjpa.meta.ClassMetaData.isCacheable(ClassMetaData.
   java:2415)
    at
   org.apache.openjpa.meta.ClassMetaData.getDataCacheName(ClassMeta
   Data.java:1358)
   
   
    
   
   

PROBLEM CONCLUSION
 *  The feature that introduced this issue in 7.0.0.5 has been
   corrected, eliminating the risk of the datacache's initializer
   being invoked recursively.
   
   The fix for this APAR is currently targeted for inclusion in
   fix pack 7.0.0.7.  Please refer to the Recommended Updates
   page for delivery information:
   http://www.ibm.com/support/docview.wss?rs=180&uid=swg27004980 [http://www.ibm.com/support/docview.wss?rs=180&uid=swg27004980]
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   PM06420
   
   
 * REPORTED COMPONENT NAME
   WAS EJB3 FEATUR
   
   
 * REPORTED COMPONENT ID
   5724J0851
   
   
 * REPORTED RELEASE
   610
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2010-01-29
   
   
 * CLOSED DATE
   2010-01-29
   
   
 * LAST MODIFIED DATE
   2010-03-31
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
    PK97577 [http://www-01.ibm.com/support/docview.wss?uid=swg1PK97577]
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   WAS EJB3 FEATUR
   
   
 * FIXED COMPONENT ID
   5724J0851
   
   

APPLICABLE COMPONENT LEVELS
 * R610 PSY
   UP