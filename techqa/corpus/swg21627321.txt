Title: IBM 8001 upgrade fails in a cluster if the context root has been changed - United States

Text:
SRVE8109W; SRVE0190E; login; wcm; run-wcm-admin-task TECHNOTE (TROUBLESHOOTING)

PROBLEM
If you have changed the WebSphere Portal context root from /wps to something else prior to applying the 8001 fixpack in a clustered environment, the upgrade will fail.

SYMPTOM
In the ConfigTrace.log at the time of the failure, the following error can be seen:

==================
run-wcm-admin-task:
[echo] VirtualPortalContext = , VirtualPortalHost = 
[echo] Initialized: host my.portal.com vpContext 
[echo] To call ConfigModuleClient: host wpl2ins11.rtp.raleigh.ibm.com vpContext 
[ConfigModuleClient] Connecting to login address: "hxxp://my.portal.com:10039/custom/wcm/login"
[ConfigModuleClient] Connecting to task address: "hxxp://my.portal.com:10039/custom/wcm/myconnect?MOD=data&processLibraries=false&taskType=import&input.dir=%2Fopt%2FIBM%2FWebSphere%2Fwp_profile%2FConfigEngine%2Fconfig%2Fwork%2Fct_import%2Fweb+content+templates&importLibrary=%24%7Bimport.library%7D" with user name: uid=wpsadmin,o=defaultWIMFileBasedRealm
[ConfigModuleClient] No output will be shown while this task is running. Check the SystemOut.log for progress information.
--- Exception Thrown ---
/opt/IBM/WebSphere/PortalServer/wcm/prereq.wcm/config/includes/prereq.wcm_cfg.xml:3829: An exception occurred while executing the task: Header field 'Set-Cookie' is null. The login failed. Can not continue.
at com.ibm.workplace.wcm.maintenance.module.ConfigModuleClient.execute(ConfigModuleClient.java:103)
at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:275)
at org.apache.tools.ant.Task.perform(Task.java:364)
==================

And in the SystemOut.log at the same time, the following message is seen:

=====================
[1/30/13 8:20:30:561 GMT] 0000004f filter E
com.ibm.ws.webcontainer.filter.FilterInstanceWrapper doFilter SRVE8109W:
Uncaught exception thrown by filter Extensible Filter:
java.io.FileNotFoundException: SRVE0190E: File not found: /wcm/login
at
com.ibm.ws.webcontainer.extension.DefaultExtensionProcessor._processEDR(
DefaultExtensionProcessor.java:893)
=====================


CAUSE
During the upgrade, the wcm application is redeployed and uses the original context root. This has been identified as a product defect under APAR PM83551 and is included in Cumulative Fix 4.

RESOLVING THE PROBLEM
To resolve the problem, you must install Fixpack 8001 and CF4 (or higher) at the same time. Check the 'Related URL' section for the most recent Portal cumulative fixes.

RELATED INFORMATION
#Recommended Updates for WebSphere Portal and IBM Web Co [http://www-01.ibm.com/support/docview.wss?uid=swg24031246]