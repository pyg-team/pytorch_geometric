Title: IBM How to reduce user search resource consumption in the archive - United States

Text:
 TECHNOTE (FAQ)

QUESTION
 Can the resource consumption on the archive server be reduced when there are many concurrent search sessions? 

CAUSE
A search session allocates archive resources that are not released until the session times out. For example, a held resource is a database cursor kept for the search result. Resources consumption on the archive server can then be so high that new incoming requests cannot be processed. 
The error message in the trace file states that the getCursor call failed. If the archive server is a Content Manager system based on DB2, an error like the following is reported:

com.ibm.mm.sdk.common.DKException: DB2 SQL Error: SQLCODE=-1022, SQLSTATE=57011



ANSWER
As long as a search session is active, users might browse the result list and might call preview or restore functions on e-mail in that list. Therefore, archive resources are allocated for an active search session. These resources are held even if a session is inactive for a certain time. 

This allows a user to browse a result list, read an e-mail in preview mode for some minutes, and then scroll the result list to see more entries or run further queries. 

By default, a search session times out after 30 minutes of inactivity. In this case, the user must restart the search application from within the e-mail client program. 

If the average time that a user spends working with a search session is less than the default of 30 minutes, you can reduce this timeout value and thus reduce the amount of archive resources that are kept active for inactive sessions. 

To change the session timeout value, edit the web.xml file in one of these directories:

For the embedded Web Application Server:
<ContentCollector installDir>\AFUWeb\profiles\AFUWeb\installedApps\<cellName>\afu_web.ear\afu_web.war\WEB-INF

For an external Web Application Server: 
<WAS installDir>\profiles\AFUWeb\installedApps\<cellName>\afu_web.ear\afu_web.war\WEB-INF

At the end of the file but before the line containing </web-app>, add the following element 
to define a new value for the session timeout:

<session-config>
<session-timeout>minutes</session-timeout>
</session-config>

Where minutes is the new timeout value and defines how many minutes a session is kept alive. For example, if you specify <session-timeout>15</session-timeout>, a session becomes invalid after being inactive for 15 minutes. When you set a timeout value, consider that setting the value too small, such as less than 5 minutes, might cause sessions to terminate too soon for your users' requirements. Setting the value too large ties up the server if the user has abandoned the session. 

Save the file and restart the Web Application Server.