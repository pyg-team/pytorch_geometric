Title: IBM PM76995: CANCELING A LONG RUNNING BATCH JOB CAN CAUSE ABEND 6C6 00E8011D AND THE QMGR COMES DOWN. - United States

Text:
z/os  A FIX IS AVAILABLE
Obtain the fix for this APAR.


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  The customer migrated from MQ V701 to MQ V710. The customer
   has many long running batch jobs that they have used prior to
   the upgrade. They have been using an Auto OPS program to
   shutdown these batch jobs. When they were on V701 of MQ,
   they did not see this behavior. Using MQ V710, they will see
   this after the abend 13E:
   .
   Dump Title: MQ1C,ABN=0C4-00000011,U=        ,C=R3600.710.IPC
   -CSQYAGCS,M=CSQYEATE,LOC=CSQSLD1 .CSQSTERM+00000778
   .
   One time after the abend0C4, they received an abend 6c6
   00E8011D. The 00E8011D means that the allied task primary
   ESTAE test must complete function failure. The QMGR came down.
   .
   The change team has taken a look at the docs and can see the
   cause of the problem. If an abend (e.g. S13E due to a CANCEL)
   occurs while CSQSTERM is performing clean-up processing for the
   address space, recovery routine CSQSRTRM is invoked and
   incorrectly expects R7 to contain the address of the GPVT.
   This leads to the 0C4. Depending on where the initial abend
   (e.g. S13E) hits, CSQSTERM may be holding a latch, in which
   case the queue-manager will be terminated with reason code
   00E8011D.
   
   
    
   
   

LOCAL FIX

PROBLEM SUMMARY
 *  ****************************************************************
   * USERS AFFECTED: All users of WebSphere MQ Version 7          *
   *                 Release 1 Modification 0.                    *
   ****************************************************************
   * PROBLEM DESCRIPTION: MQ applications can experience abend    *
   *                      0C4 in CSQSLD1.CSQSTERM after the       *
   *                      application issues MQDISC or the TCB    *
   *                      terminated without MQDISC.              *
   *                      Occasionally, queue manager terminates  *
   *                      with abend 6C6-00E8011D.                *
   ****************************************************************
   * RECOMMENDATION:                                              *
   ****************************************************************
   If an abend happens (e.g. S13E due to a cancel) whilst CSQSTERM
   is performing clean-up for the address space, the recovery
   routine CSQSRTRM is invoked and it is receiving an invalid
   pointer that causes abend 0C4. If the initial abend happens
   while CSQSTERM is holding a latch then queue manager is
   terminated with abend 6C6-00E8011D.
   
   
    
   
   

PROBLEM CONCLUSION
 *  CSQSRTRM is now receiving a valid pointer address avoiding the
   0C4 abend.
   100Y
   CSQSTERM
   
   
    
   
   

TEMPORARY FIX
 *  *********
   * HIPER *
   *********
   
   
    
   
   

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   PM76995
   
   
 * REPORTED COMPONENT NAME
   WMQ Z/OS V7
   
   
 * REPORTED COMPONENT ID
   5655R3600
   
   
 * REPORTED RELEASE
   100
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   YesHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2012-11-13
   
   
 * CLOSED DATE
   2013-01-10
   
   
 * LAST MODIFIED DATE
   2013-03-04
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
    UK90863
   
   

MODULES/MACROS
 *  CSQSTERM
   
   
    
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   WMQ Z/OS V7
   
   
 * FIXED COMPONENT ID
   5655R3600
   
   

APPLICABLE COMPONENT LEVELS
 * R100 PSY UK90863 [HTTPS://WWW14.SOFTWARE.IBM.COM/WEBAPP/SET2/ORDERMEDIA/SHOPCART?PTFS=UK90863]
   UP13/02/05 P F302
   
   

FIX IS AVAILABLE
 * SELECT THE PTF APPROPRIATE FOR YOUR COMPONENT LEVEL. YOU WILL BE REQUIRED TO SIGN IN. DISTRIBUTION ON PHYSICAL MEDIA IS NOT AVAILABLE IN ALL COUNTRIES.