Title: IBM Troubleshooting a General IO error. java.net.SocketException in Rational Synergy web mode - United States

Text:
informix; SocketException; How to troubleshoot TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 Attempts to use Rational Synergy webmode client (GUI or CLI) result in a message in the client logs when running an IBM Rational Synergy operation or command. The error appears such as:
General IO error. java.net.SocketException: Connection reset 
IO related error. 
Connection reset 
Recommendation: Please check data communication, protocol data, etc. {cli} 

SYMPTOM
The client log shows something like the following example: 

 

2011-04-11T11:32:29.291+0300 INFO : 

 CliSessionContext (CCM_ADDR=myhost192:54049:x.x.128.186, user=ccm_root, server=http:/myserver:8400, database=/ccmdb/mydb): Received command [finduse, myscript.sh,3.1:shsrc:1] {cli} 

2011-04-11T11:32:29.293+0300 WARNING: 

CliSessionContext (CCM_ADDR=myhost192:54049:x.x..128.186, user=ccm_root, server=http://myserver:8400, database=/ccmdb/mydb): General IO error. java.net.SocketException: 

Connection reset IO related error. Connection reset 

Recommendation: Please check data communication, protocol data, etc. {cli} 

General IO error. java.net.SocketException 

2011-04-11T11:32:29.297+0300 INFO : 

CliSessionContext (CCM_ADDR=myhost192:54049:x.x.128.186, user=ccm_root, server=http://myserver:8400, database=/ccmdb/mydb): Command completion status 4, time 280 ms {cli}





CAUSE
Errors in the Synergy Web Mode backend session API may be caused by the API itself (ie. this may be a code issue) or by the backend session Accent code (ie. this may be an Accent code issue or a database corruption)



ENVIRONMENT
IBM Rational Synergy clients operating in Web Mode connect to a pool of backend Synergy sessions which run on the Synergy Web Server. The Web Server manages the web client connections and distributes queries and requests for data amongst the backend sessions in a round robin fashion.



DIAGNOSING THE PROBLEM
It is important to determine whether it is the API itself or the backend sessions which are the source of the problem. This is not obvious from the error messages in the logs. 

1. Issues of incompatibility between the Synergy server and client binaries must be eliminated as possible causes. 

2. Also the database should be checked for any corruption. 

3. If necessary the backend sessions can be traced for any Accent errors


RESOLVING THE PROBLEM
 

1. Run the command "ccm version -a" on the server and on the client to ensure thay are at the same patch and ifix level. Check the <database path>/db/MDL_INFO file to ensure the database matches the binaries on the server and client. 

 

2. Log onto the Synergy server as the Synergy admin user (usually ccm_root) and run the command... 

 

ccmdb check <database path> 





 

......to ensure that there is no database corruption. 

Resolve any database corruption with reference to the following technotes: 


http://www.ibm.com/support/docview.wss?uid=swg21325223 [http://www.ibm.com/support/docview.wss?uid=swg21325223] # for Informix databases
http://www.ibm.com/support/docview.wss?uid=swg21325720 [http://www.ibm.com/support/docview.wss?uid=swg21325720] # for Oracle databases

If steps 1. or 2. above show any issues which require resolution then, once the issues are resolved, retry the Synergy Web Mode operation which resulted in the original "General IO error. java.net.SocketException" error to see if the problem is now cleared. If, however, the problem persists continue to get an Accent trace of the Synergy backend sessions.


3. Accent tracing
The suspicion should be that there may be an underlying Accent code error which is coming back to the java-based Synergy Web Mode API and causing the IO error. To check this we can try to get an Accent trace. 

Tracing can be done of Accent backend sessions within web mode based clients. The Accent code will be traced from the incoming call from the API until that call is returned from the Accent code. Every call is traced until the Accent tracing is turned off regardless if the call is executed using different backend sessions. This means that trace output can be interlaced because of calls from the client being executed in parallel by different backend sessions.


Turning on tracing using GUI
Accent tracing within the GUI is turned on using the "hidden" options within the Tools menu in the Synergy GUI. Open the Tools Menu > Options dialog, Press Ctrl+D, click Ok. Open the Tools Menu again, this menu will now have a number of new menu items, use the Start Accent tracing menu item.

Turning on tracing using CLI 
The "ccm trace_on " command will turn on the Accent tracing from the web mode CLI. 
Log files will be found in <server runarea>/log/<user>_ui.log and <server runarea>/log/<user>_eng.log ....where <user> is the name of the user who will reproduce the error.



Make sure these log files are cleared down before turning on the trace and reproducing the error condition. Accent traces can be rather large and customers may need the help of Technical Support to analyse them. Look for calls to svm_api in engine log to see what calls are made to the work area server.

If difficulties continue with the Web Mode and "General IO error..." please contact Technical Support for additional troubleshooting options.