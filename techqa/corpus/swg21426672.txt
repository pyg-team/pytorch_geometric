Title: IBM SQLJ Direct Call to Translator class causes OutOfMemoryError - United States

Text:
RSA; RAD4WS; PM02459; RATLC01495739; OutOfMemoryError; java.lang.OutOfMemoryError; out of memory; java.util.zip.Inflater; java.util.zip.ZipFile; translator; SQLJ; direct call; project interchange TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 Sometimes importing a Project Interchange file from a previous version of IBM Rational Application Developer causes an OutOfMemoryError during project build. This happens especially when the translator for SQLJ files is called in-process. 

SYMPTOM
When building a project containing a large number of SQLJ files, the application gives an Out Of Memory Error and exits the workbench. 

This only happens when the SQLJ translation option is set to 'Direct Call to Translator class' (Windows > Preferences > Data Management > SQL Development > SQLJ Applications)

Rational Application Developer uses the garbage collection policy 'gencon'. 

Not enough global Garbage Collectors are kicked off with the gencon GC policy causing a large number of classloaders to accumulate. This build up of classloaders causes a native memory increase which could possibly lead to an out of memory. 

Review the Related document about APAR IZ76742 [http://ibm.com/support/docview.wss?uid=swg1IZ76742] for more details.


Symptoms include an OutOfMemoryErrorstack trace like this one: 


java.lang.OutOfMemoryError
at java.util.zip.Inflater.init(Native Method)
at java.util.zip.Inflater.<init>(Unknown Source)
at java.util.zip.ZipFile.getInflater(Unknown Source)
at java.util.zip.ZipFile.getInputStream(Unknown Source)
at java.util.zip.ZipFile.getInputStream(Unknown Source) 

will appear in the file<workspace>\.metadata\.log



CAUSE
This issue has been identified as a product defect and has been logged under APAR PM02459.



RESOLVING THE PROBLEM
Use a different GC policy if carrying out SQLJ translations.

For example use -Xgcpolicy:optavgpause 


Procedure:


 1. Stop the product (if running)
    
    
 2. Open the file:
    
    C:\Program Files\IBM\SDP\eclipse.ini
    
    where: C:\Program Files\IBM\SDP is the default installation directory
    
    
 3. Replace the line:
    
    -Xgcpolicy:gencon
    
    with: -Xgcpolicy:optavgpause
    
    
 4. Save the file
    
    
 5. Start the product




WORKAROUND: 

Go to Windows > Preferences > Data > SQLJ Applications. 

When invoking SQLJ translator, change the default value to create a new process for every translation. 

The build is slow, but it completes successfully. 




Cross Reference information Segment Product Component Platform Version Edition Software Development Rational Software Architect for WebSphere Software Database Tooling Windows 7.5.3, 7.5.4, 7.5.5, 7.5.5.1