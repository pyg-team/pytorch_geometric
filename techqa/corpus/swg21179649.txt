Title: IBM Unable to set to UCM Activity that is set to an unavailable or nonexistent view - United States

Text:
Cannot get view info for current view; Unable to set activity; removed; deleted; setactivity; unset; non-existent; non-existing; 1179649; ClearCase object not found TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 This technote explains why attempts to set to a IBM® Rational® ClearCase® UCM activity that is set to a view that is unavailable results in the error, cleartool: Error: Cannot get view info for current view. cleartool: Error: Unable to set activity., and provides information on how to resolve the issue. 

SYMPTOM
 

Trying to set to an activity results in the following error:

M:\testproj_int_del>cleartool setact UCMAC00000050

cleartool: Error: View tag "testproj_int_del": ClearCase object not found
cleartool: Error: Cannot get view info for current view.
cleartool: Error: Unable to set activity.

CAUSE
 

The UCM activity cannot be used because it is set to a view that is unavailable or no longer exists.

The problem is due to the fact that the view's database in the view storage directory (normally a *.vws folder) is unavailable. For example, if this activity was set to a local snapshot view on a laptop that was not connected to the network or if a view was not properly removed, one would see the above error message.


RESOLVING THE PROBLEM

This issue can be resolved by either of the following: 

 

 * If the view still exists, the view storage database needs to be made available. In the disconnected view issue mentioned above, the laptop should connect to the network and re-establish the connection with ClearCase. Review the ClearCase Developing Software manual on the topic of Workflow for disconnected use [http://publib.boulder.ibm.com/infocenter/cchelp/v7r0m1/index.jsp?topic=/com.ibm.rational.clearcase.dev.doc/topics/cc_dev/wflow_disconnected_use.htm]for more information. 
   
    
   
   
 * If the view is no longer available, the activity needs to be unset from the unavailable view.
   
   Note: If there is an element in the activities changeset list that is checked out to the inaccessible view, following the procedure below the user will notice that the entry for that particular checkedout version will no longer appear in the changeset list. This is expected since the checked out reference will be cleaned out during the "rmview -uuid" command. Since the checkedout version of the file will be inaccessible because the view will be inaccessible, this shouldn't be of too much concern.
   Remove the stranded checkout references left over from the non-existent view. This will have to be done using the view's uuid since the view is no longer available.
   
   
   
   
    1. Run cleartool dump on the activity to obtain the view uuid:
       
       M:\project_int\cvob>cleartool dump activity:cqcc100000087@\pvob
       
       cqcc100000087
       oid=7985deaf.7cb14459.a353.97:fa:0c:fe:04:95 dbid=783 (0x30f)
       mtype=activity name="cqcc100000087" type=73
       usid=NT:S-1-5-21-677485609-156640315-1538417202-1012
       gsid=NT:S-1-5-21-67748560
       -156640315-1538417202-1033
       master replica dbid=3
       title="prevent modification on int stream"
       process definition 
       uuid=190f3f00.ca15481b.9fef.04:62:12:de:f1:b0
       state dbid=64
       role dbid=52
       user dbids: 105
       view=""
       planned effort=0.00
       actual start=13/09/2005 3:27:22 PM
       priority=50
       dtsm=1126589242
       mod count=0
       flags=0x4, Setwork
       parent dbid=121
       work items:
       user=105 view=83799c95.5f844261.b8f0.8c:aa:b6:18:66:e2
       Process variables:
       name=SQUID_ACT_ENTITYDEF_NAME value=Defect
       name=SQUID_ACT_DISPLAY_NAME value=cqcc100000087
       
       Note: The view uuid (in bold above) is under the work items section.
       
    2. Run cleartool rmview -all -uuid <view-uuid> to clean up all the references to this view from all 
       VOBs.
       Example: cleartool rmview -all -uuid 83799c95.5f844261.b8f0.8c:aa:b6:18:66:e2
       
       Review technote 1122515 [http://www-1.ibm.com/support/docview.wss?rs=984&uid=swg21122515] for more information about removing checkedout references from a view 
       that no longer exists.
   
   
   3. You will now be able to set the activity to the new view.
   
   


Note: Your changeset list may appear different than expected if this view happened to have a changeset checked out. However, since those versions will not be accessible anyway, they can be ignored. 

RELATED INFORMATION
#cleartool rmview -uuid not removing view references [http://www.ibm.com/support/docview.wss?uid=swg21146797]
How to create UCM Activities without a UCM view [http://www.ibm.com/support/docview.wss?uid=swg21257541]






Cross reference information Segment Product Component Platform Version Edition Software Development Rational ClearCase UCM: Activity