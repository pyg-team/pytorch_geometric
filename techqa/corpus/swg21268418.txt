Title: IBM Collecting concurrent dynamic binary and ascii server traces on Directory Server. - United States

Text:
ascii and binary tracing; diagnostics; debug; full tracing TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 In order to diagnose an issue involving a specific operation, it is often useful to collect both an ascii and binary server trace. This document will detail the steps for collecting a concurrent ascii and binary server trace for Directory Server. 

RESOLVING THE PROBLEM
Dynamic Binary and Ascii Server Trace Instructions: 

**Note: The server and admin daemon must be running 

1. Enable dynamic binary tracing. 

 From a command prompt, type: 

 ldtrc on -t -l 50000000 

In the above command, the value for the buffer size is 50 million-byte. This will keep the last 50 million bytes of trace record data in shared memory (i.e. it flushes the oldest data once the 50 MB value is reached). If for some reason the command fails due to what may appear to be not enough shared memory resources, feel free to scale the number down, but less than 20 million may not provide the information desired. 

2. Enable dynamic ascii tracing 

**Note: Issue "idsilist -a" to confirm the ports used for your instance.

idsldaptrace -p <port> -a <admin port> -h <hostname> -D <adminDN> -w <adminpw> -l on -t start -m 65535 -o <output file>


3. Recreate the Problem 

 Reproduce the error or condition you want to trace. 

4. Collect the trace records 

 Once the error or the condition you want to trace occurs, immediately issue the following command: 

 ldtrc dump trace.raw 

 Where trace.raw is the pathname and filename that will be used to 

 capture the records in shared memory. 

5. Stop the Trace 

 From a command prompt type:
idsldaptrace -p <port> -a <admin port> -h <hostname> -D <adminDN> -w <adminpw> -t stop 

6. Copy the trace.raw file into the <IDS install home>/etc directory 

 For SDS v6.4: 

 On AIX, HP and Solaris: /opt/IBM/ldap/V6.4/etc 

 On Linux: /opt/ibm/ldap/V6.4/etc 

 On Windows: <Install_Drive>:\Program Files\IBM\LDAP\V6.4\etc
Note: On windows if SDS is installed into custom location then etc folder inside that location. 

 For SDS v 6.3.1: 

 On AIX, HP and Solaris: /opt/IBM/ldap/V6.3.1/etc 

 On Linux: /opt/ibm/ldap/V6.3.1/etc 

 On Windows: <Install_Drive>:\Program Files\IBM\LDAP\V6.3.1\etc
Note: On windows if SDS is installed into custom location then etc folder inside that location. 

 For TDS v 6.3: 

 On AIX, HP and Solaris: /opt/IBM/ldap/V6.3/etc 

 On Linux: /opt/ibm/ldap/V6.3/etc 

 On Windows: <Install_Drive>:\Program Files\IBM\LDAP\V6.3\etc
Note: On windows if TDS is installed into custom location then etc folder inside that location. 

 For TDS v 6.2: 

 On AIX, HP and Solaris: /opt/IBM/ldap/V6.2/etc 

 On Linux: /opt/ibm/ldap/V6.2/etc 

 On Windows: <Install_Drive>:\Program Files\IBM\LDAP\V6.2\etc
Note: On windows if TDS is installed into custom location then etc folder inside that location. 

 For TDS v 6.1: 

 On AIX, HP and Solaris: /opt/IBM/ldap/V6.1/etc 

 On Linux: /opt/ibm/ldap/V6.1/etc 

 On Windows: <Install_Drive>:\Program Files\IBM\LDAP\V6.1\etc
Note: On windows if TDS is installed into custom location then etc folder inside that location. 

 For TDS v 6.0: 

 On AIX, HP and Solaris: /opt/IBM/ldap/V6.0/etc 

 On Linux: /opt/ibm/ldap/V6.0/etc 

 On Windows: <Install_Drive>:\Program Files\IBM\LDAP\V6.0\etc
Note: On windows if TDS is installed into custom location then etc folder inside that location. 

 

7. Collect the Format and Flow of the Binary Trace 

 cd to the etc directory as shown in step 7 

 ldtrc fmt trace.raw trace.fmt 

 ldtrc flw trace.raw trace.flw 

 Provide the trace.fmt and trace.flw files to support, along with output file specified in step 2. 

8. Disable Tracing 

 From a command prompt, type: 

 idsldaptrace -p <port> -a <admin port> -h <hostname> -D <adminDN> -w <adminpw> -l off



PRODUCT ALIAS/SYNONYM
 TDS
SDS
ITDS
ISDS
Directory Server
Tivoli Directory Server
Security Directory Server