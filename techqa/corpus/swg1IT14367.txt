Title: IBM IT14367: SFTP GET SERVICE HANGS AT "WAITING_ON_IO" DUE TO AN INVALID XML CHARACTER - United States

Text:
  DIRECT LINKS TO FIXES
iSeries_Media_5020601_2 [http://www.ibm.com/support/fixcentral/quickorder?product=ibm%2FOther+software%2FSterling+B2B+Integrator&fixids=5.2.6.1-OtherSoftware-B2Bi-Iseries-IF0002&source=SAR]
Media_IM_5020601_2 [http://www.ibm.com/support/fixcentral/quickorder?product=ibm%2FOther+software%2FSterling+File+Gateway&fixids=5.2.6.1-OtherSoftware-SFG-All-IF0002&source=SAR]
iSeries_Media_5020601_2 [http://www.ibm.com/support/fixcentral/quickorder?product=ibm%2FOther+software%2FSterling+File+Gateway&fixids=5.2.6.1-OtherSoftware-SFG-Iseries-IF0002&source=SAR]


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  SFTP Client Get Service hangs at "Waiting_on_io" state when
   you try to download more than 1 file and at least one of
   filenames contain brace (or any invalid XML char) in file name
   e.g., z_kktest(1).txt
   
   sftpclient.log prints
   [2015-02-13 09:21:50.666] ERROR resumeWorkFlow
   [2015-02-13 09:21:50.666] ERROR [1423837310666]
   INVALID_CHARACTER_ERR: An invalid or illegal XML character is
   specified.
   [2015-02-13 09:21:50.666] ERRORDTL
   [1423837310666]org.w3c.dom.DOMException: INVALID_CHARACTER_ERR:
   An invalid or illegal XML character is specified.
   at org.apache.xerces.dom.CoreDocumentImpl.createElement(Unknown
   Source)
   at
   com.sterlingcommerce.woodstock.xpathutil.XPathHelper.createNode(
   XPathHelper.java:1467)
   at
   com.sterlingcommerce.woodstock.xpathutil.XPathHelper.createTarge
   tContext(XPathHelper.java:1141)
   at
   com.sterlingcommerce.woodstock.xpathutil.XPathHelper.createTarge
   tContext(XPathHelper.java:1053)
   at
   com.sterlingcommerce.woodstock.workflow.WFCUtil.setDataInTree(WF
   CUtil.java:1113)
   at
   com.sterlingcommerce.woodstock.workflow.WFCUtil.setDataInTree(WF
   CUtil.java:784)
   at
   com.sterlingcommerce.woodstock.workflow.WorkFlowContext.setWFCon
   tent(WorkFlowContext.java:3059)
   at
   com.sterlingcommerce.woodstock.workflow.WorkFlowContext.setWFCon
   tent(WorkFlowContext.java:3029)
   at
   com.sterlingcommerce.woodstock.workflow.WorkFlowContext.setWFCon
   tent(WorkFlowContext.java:3013)
   at
   com.sterlingcommerce.woodstock.workflow.WorkFlowContext.putDocum
   ent(WorkFlowContext.java:1963)
   at
   com.sterlingcommerce.woodstock.workflow.WorkFlowContext.<init>(W
   orkFlowContext.java:1208)
   at
   com.sterlingcommerce.woodstock.workflow.engine.WorkFlowEngineRMI
   Impl.syncContinueDispatch(WorkFlowEngineRMIImpl.java:1797)
   at
   com.sterlingcommerce.woodstock.workflow.engine.WorkFlowEngineRMI
   Impl.continueDispatch(WorkFlowEngineRMIImpl.java:1653)
   at
   com.sterlingcommerce.woodstock.workflow.InitialWorkFlowContext.c
   ontinueWorkFlow(InitialWorkFlowContext.java:2061)
   at
   com.sterlingcommerce.woodstock.workflow.InitialWorkFlowContext.c
   ontinueWorkFlow(InitialWorkFlowContext.java:1954)
   at
   com.sterlingcommerce.woodstock.services.sftpclient.services.Resp
   onse.resumeWorkFlow(Response.java:184)
   at
   com.sterlingcommerce.woodstock.services.sftpclient.services.Resp
   onse.sendResults(Response.java:152)
   at
   com.sterlingcommerce.woodstock.services.sftpclient.client.Sessio
   n.freeSession(Session.java:613)
   at
   com.sterlingcommerce.woodstock.services.sftpclient.client.Sessio
   n.completedSequence(Session.java:454)
   at
   com.sterlingcommerce.woodstock.services.sftpclient.client.Sessio
   n.access$1600(Session.java:107)
   at
   com.sterlingcommerce.woodstock.services.sftpclient.client.Sessio
   n$5.run(Session.java:793)
   at
   EDU.oswego.cs.dl.util.concurrent.PooledExecutor$Worker.run(Unkno
   wn Source)
   at java.lang.Thread.run(Thread.java:804)
   
   
    
   
   

LOCAL FIX
 *  STRRTC 456426
   KK/KK
   
   Circumvention :
   Make sure the server hosts files whose names do not contain
   special characters when using RemoteFilePattern as wildcard
   pattern in SFTP Client Get Service.
   
   
    
   
   

PROBLEM SUMMARY
 *  USERS AFFECTED:
   All
   
   PROBLEM DESCRIPTION:
   SFTP GET SERVICE hangs at "waiting_on_io" due to an invalid XML
   character.
   
   PLATFORMS AFFECTED:
   All
   
   
    
   
   

PROBLEM CONCLUSION
 *  RESOLUTION SUMMARY:
   
   A code fix is provided.
   
   A new property called xmlCompliantList is introduced in the
   sftp.properties file, which is set to 'false' by default.
   
   This property governs the filenames that are displayed
   as the xml tag values or xml tag name in the process data when
   SFTP MGET operation is performed.
   Setting this property to true displays the filenames as
   the xml tag values and false will make the file name as the xml
   tag names.
   This property is useful in case the xml filename contains
   special characters that are not allowed for the tag names as per
   the xml spec.
   Leaving this property blank ensure the filenames will be the
   xml tag names
   
   DELIVERED IN:
   5020601_2
   5020500_16
   5020603_3
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   IT14367
   
   
 * REPORTED COMPONENT NAME
   STR B2B INTEGRA
   
   
 * REPORTED COMPONENT ID
   5725D0600
   
   
 * REPORTED RELEASE
   524
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt / Xsystem
   
   
 * SUBMITTED DATE
   2016-03-17
   
   
 * CLOSED DATE
   2016-04-14
   
   
 * LAST MODIFIED DATE
   2017-11-15
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   STR B2B INTEGRA
   
   
 * FIXED COMPONENT ID
   5725D0600
   
   

APPLICABLE COMPONENT LEVELS
 * R526 PSY
   UP