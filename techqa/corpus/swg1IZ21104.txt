Title: IBM IZ21104: CHANGING SEC_MASTER PASSWORD CAUSES JACC ENVIRONMENT TO FAIL TO INITIALIZE AT DMGR STARTUP. - United States

Text:
 SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  Problem Description: When customer changes the sec_master
   password and then tries to update the JACC configuration, the
   DMgr will not start. Customer received the following error in
   the SystemOut.log:
   
   --------------------------------------------------------------
   
   [3/17/08 14:12:43:660 CET] 0000000a SystemOut     O
   com.tivoli.pd.as.jacc.cfg.TAMConfigService initialize() About to
   initialize PDAdmin with the value /mount/appl00829/was6/java/jre
   [3/17/08 14:12:43:980 CET] 0000000a AMWASConfigMe I
   com.tivoli.pd.as.jacc.cfg.TAMConfigService
   processAction(Properties) IBM AMAS config About to perform the
   embedded Tivoli Access Manager configuration action, config, in
   the following WebSphere Application Server context:
   cell=kl110cx7_Network,node=kl110cx7,server=JEFFREY_test_clone.
   [3/17/08 14:12:46:375 CET] 0000000a AMWASConfigMe I
   com.tivoli.pd.as.jacc.cfg.TAMConfigController execute() IBM AMAS
   config AWXJC0048E   An error occurred during the configuration.
   The details are:
   com.tivoli.pd.as.jacc.cfg.ConfigActionFailedException:
   [
   HPDIA0200W   Authentication failed. You have used an invalid
   user name, password or client certificate.
   ].
   [3/17/08 14:12:46:387 CET] 0000000a distSecurityC E   SECJ0412E:
   An Error occured when initializing the initialization class
   com.tivoli.pd.as.jacc.cfg.TAMConfigInitialize of the JACC
   provider. The exception or the error code is
   com.tivoli.pd.as.jacc.cfg.TAMConfigException: AWXJC0048E   An
   error occurred during the configuration. The details are:
   com.tivoli.pd.as.jacc.cfg.ConfigActionFailedException:
   [
   HPDIA0200W   Authentication failed. You have used an invalid
   user name, password or client certificate.
   ].
    at
   com.tivoli.pd.as.jacc.cfg.TAMConfigController.execute(TAMConfigC
   ontroller.java:156)
    at
   com.tivoli.pd.as.jacc.cfg.TAMConfigService.processAction(TAMConf
   igService.java:492)
    at
   com.tivoli.pd.as.jacc.cfg.TAMConfigService.initialize(TAMConfigS
   ervice.java:642)
    at
   com.tivoli.pd.as.jacc.cfg.TAMConfigInitialize.initialize(TAMConf
   igInitialize.java:72)
    at
   com.ibm.ws.security.core.distSecurityComponentImpl.initializeJac
   cProxy(distSecurityComponentImpl.java:1121)
    at
   com.ibm.ws.security.core.distSecurityComponentImpl.initializeJav
   a2Sec(distSecurityComponentImpl.java:1195)
    at
   com.ibm.ws.security.core.distSecurityComponentImpl.initialize(di
   stSecurityComponentImpl.java:230)
    at
   com.ibm.ws.security.core.SecurityComponentImpl.initialize(Securi
   tyComponentImpl.java:90)
    at
   com.ibm.ws.runtime.component.ContainerImpl.initializeComponent(C
   ontainerImpl.java:1338)
    at
   com.ibm.ws.runtime.component.ContainerImpl.initializeComponents(
   ContainerImpl.java:1136)
    at
   com.ibm.ws.runtime.component.ServerImpl.initialize(ServerImpl.ja
   va:356)
    at
   com.ibm.ws.runtime.WsServerImpl.bootServerContainer(WsServerImpl
   .java:178)
    at com.ibm.ws.runtime.WsServerImpl.start(WsServerImpl.java:140)
    at com.ibm.ws.runtime.WsServerImpl.main(WsServerImpl.java:461)
    at com.ibm.ws.runtime.WsServer.main(WsServer.java:59)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at
   sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessor
   Impl.java:79)
    at
   sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethod
   AccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:618)
    at
   com.ibm.wsspi.bootstrap.WSLauncher.launchMain(WSLauncher.java:18
   3)
    at com.ibm.wsspi.bootstrap.WSLauncher.main(WSLauncher.java:90)
    at com.ibm.wsspi.bootstrap.WSLauncher.run(WSLauncher.java:72)
    at
   org.eclipse.core.internal.runtime.PlatformActivator$1.run(Platfo
   rmActivator.java:78)
    at
   org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.run
   Application(EclipseAppLauncher.java:92)
    at
   org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.sta
   rt(EclipseAppLauncher.java:68)
    at
   org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStart
   er.java:400)
    at
   org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStart
   er.java:177)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at
   sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessor
   Impl.java:79)
    at
   sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethod
   AccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:618)
    at
   org.eclipse.core.launcher.Main.invokeFramework(Main.java:336)
    at org.eclipse.core.launcher.Main.basicRun(Main.java:280)
    at org.eclipse.core.launcher.Main.run(Main.java:977)
    at
   com.ibm.wsspi.bootstrap.WSPreLauncher.launchEclipse(WSPreLaunche
   r.java:336)
    at
   com.ibm.wsspi.bootstrap.WSPreLauncher.main(WSPreLauncher.java:91
   )
   
   ----------------------------------------------------------------
   
   Here are the recreate steps:
   
   > 1) Make sure TAM is at 6.0.0.13
   > 2) Install WAS to lever 6.1.0.13
   > 3) Replace the <WAS_HOME>/java/jre/lib/ext/PD.jar file with
   the one
   >    from TAM PDJRTE fp13
   > 4) Enable WAS Security
   > 5) configure AMWAS using wsadmin.sh -configureTAM ineractive
   > 6) Restart the Dmgr --> notice that ObjectSpace objects are
   created
   >    for the adminconsole
   > 7) Make sure you can login to the WAS adminconsole
   > 8) change the sec_master password using pdadmin
   > 9) go in the adminconsole to the TAM configration page (inside
   the
   >    security panel)
   > 10) Change the sec_master password in the appropriate field to
   the new
   >     value
   > 11) Click apply --> ok --> save and synchronize to nodes
   > 12) Restart the Dmgr --> It will fail at this point....
   
   ----------------------------------------------------------------
   
   Customer is running TAM 6.1.0.13 and WAS 6.1.0.13. Operating
   System is AIX 5.3.
   
   After making the configuration change, the amwas.properties file
   is not updated with the new password.
   
   Customer has a requirement to change the sec_master password at
   regular intervals.
   
   L3 has proposed a testfix which adds a 'modifyTAM' wsadmin
   command which would update the amwas.properties file and would
   not cause a restart. That code has been built and is awaiting
   WAS to pick up the code to generate an i-fix.
   
   
    
   
   

LOCAL FIX

PROBLEM SUMMARY
 *  PROBLEM WITH CHANGING PASSWORD FOR SEC_MASTER
   IN DMGR DEPLOYMENT OF JACC
   
   
    
   
   

PROBLEM CONCLUSION
 *  PROBLEM SUMMARY:  FIX DELIVERED AS PART OF WEBSPHERE 6.1.0.17
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   IZ21104
   
   
 * REPORTED COMPONENT NAME
   ETAM COMPONENTS
   
   
 * REPORTED COMPONENT ID
   TIVETAM00
   
   
 * REPORTED RELEASE
   600
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2008-04-28
   
   
 * CLOSED DATE
   2008-05-29
   
   
 * LAST MODIFIED DATE
   2008-05-29
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   ETAM COMPONENTS
   
   
 * FIXED COMPONENT ID
   TIVETAM00
   
   

APPLICABLE COMPONENT LEVELS
 * R600 PSY
   UP
   
   
 * R510 PSN
   UP