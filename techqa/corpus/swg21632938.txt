Title: IBM Deploying a snapshot for IBM Business Process Manager (BPM) fails with a branch not found error - United States

Text:
branchID snapshot install deploy Installation failed check server logs TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 When you deploy a snapshot for IBM Business Process Manager, it fails to install. When you check the SystemOut.log file for the target Process Server, you see the following error:
com.ibm.bpm.pal.PALException: Branch with ID Branch.f976ded0-3eb5-486f-a530-645a90b5337c not found. 

SYMPTOM
The two main factors for this issue are: 

 * This issue generally does not occur on the first installation attempt after you restart the server. 
 * In the error stack, during the installation process, you can see text that is similar to the following messages:
   CWLLG2229E: An exception occurred in an EJB call. Error: Branch with ID Branch.1c965df4-3789-4712-aa1d-0194421e6b07 not found.
   com.ibm.bpm.pal.PALException: Branch with ID Branch.1c965df4-3789-4712-aa1d-0194421e6b07 not found.
   at com.ibm.bpm.pal.Container.<init>(Container.java:63)
   at com.lombardisoftware.core.deployment.InstallmentStateMachine$5.call(InstallmentStateMachine.java:380)
   at com.lombardisoftware.core.deployment.InstallmentStateMachine$5.call(InstallmentStateMachine.java:330)
   at com.lombardisoftware.server.ejb.persistence.versioning.BranchManager$5.call(BranchManager.java:582)
   ...
   at com.lombardisoftware.server.ejb.persistence.versioning.BranchManager.mutateInSingleTransaction(BranchManager.java:577)
   at com.lombardisoftware.core.deployment.InstallmentStateMachine.installPackage(InstallmentStateMachine.java:330)
   


CAUSE
The cache that is used to store the snapshot details has become corrupted. This situation occurs because the snapshot exists in the cache, but it is not in the Process Server database. This corruption can be caused by previous installation failures or product defects. Although this issue should not occur in most versions, you might see this problem after deleting a snapshot if the cache is not properly cleared. 
The problems described in the following documents can also cause this issue: 

 * Using an HTTP server causes duplicate snapshot deployments for IBM Business Process Manager [http://www.ibm.com/support/docview.wss?uid=swg21626369] 
 * Snapshot deployment for IBM Business Process Manager (BPM) fails, but returns a success message [http://www.ibm.com/support/docview.wss?uid=swg21633278]

RESOLVING THE PROBLEM
To work around the issue, you can restart the target Process Server (application cluster). 
Also, you need to investigate any previous failures that have occurred when you have installed the same snapshot. If there are previous failures, then these issues need to be resolved to prevent the branch errors. 




This issue also can be caused by duplicate deployment attempts for the snapshot running concurrently. If this issue occurs, then restart the server and ensure that only one deployment attempt is triggered. You can look for the following messages that refer to the start and end of a deployment on the Process Center to determine whether you have concurrent deployment attempts:
CWLLG0146I: Beginning export install for snapshot MySnapshot to server MyBPMServer.
CWLLG0156I: MySnapshot Install succeeded

 


Cross reference information Segment Product Component Platform Version Edition Business Integration IBM Business Process Manager Advanced Application Deployment AIX, Linux, Linux zSeries, Solaris, Windows, z/OS 8.0.1, 8.0, 7.5.1, 7.5 Business Integration IBM Business Process Manager Express Application Deployment Linux, Linux zSeries, Windows 8.0.1, 8.0, 7.5.1, 7.5 
PRODUCT ALIAS/SYNONYM
 BPM