Title: IBM IC65985: MQ AND MQ/JMS BINDINGS DO NOT RETHROW SERVICE RUNTIME           EXCEPTIONS RECEIVED FROM TARGET COMPONENT - United States

Text:
  A FIX IS AVAILABLE
WebSphere Enterprise Service Bus V6.2.0 Fix Pack 3 (6.2.0.3) [http://www-01.ibm.com/support/docview.wss?uid=swg24027123]


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  The MQ and MQ/JMS Bindings can in some cases not thow an
   Exception for messages that cause an Exception further along
   the flow. The result is that rollback will not occur.  This
   in turn could cause messages to be lost.
   
   
    
   
   

LOCAL FIX
 *  n/a
   
   
    
   
   

PROBLEM SUMMARY
 *  ****************************************************************
   * USERS AFFECTED: Users of WebSphere Enterprise Service Bus    *
   *                 or WebSphere Process Server V6.2 who are     *
   *                 using MQ or MQ/JMS Bindings and experience   *
   *                 message loss.                                *
   ****************************************************************
   * PROBLEM DESCRIPTION: If a message is passed through an MQ    *
   *                      or MQ/JMS binding and a parse failure   *
   *                      occurs further up the flow then a       *
   *                      Service Runtime Exception will be       *
   *                      thrown back to the Export.  The         *
   *                      Export should re-throw this exception   *
   *                      in order for rollback to occur.  this   *
   *                      does not happen and can result in       *
   *                      message loss.                           *
   ****************************************************************
   * RECOMMENDATION:                                              *
   ****************************************************************
   Messages not rolling back to MQ queues or internal SCA queues
   and in turn the Failed Event Manager can occur due to this
   issue in different scenarios.  An example would be..
   
   1) An MQ Export Binding receives a message
   
   2) The Export Binding parses the message, gets a data object
   and passes it on to SCA
   
   3) SCA has an issue parsing due to an invalid value, for
   example Unicode 0x1d.
   
   4) SCA throws a runtime exception and sends this exception
   back to the Export Binding within the body of a response
   message
   
   5) In this example the binding discards the runtime
   exception, rollback doesn't occur and the message therefore
   doesn't go anywhere or appear on either an MQ backout queue or
   FEM as configured.
   
   
    
   
   

PROBLEM CONCLUSION
 *  The code was modified such that the Export re-throws the
   Exception, resulting in correct rollack.
   
   There are no known side effects associated with this fix.
   There is no known alternative workaround should you encounter
   this problem.
   
   This code fix was targeted to be included in the following fix
   packs:
        6.2.0 Fix Pack 3 (v6.2.0.3)
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   IC65985
   
   
 * REPORTED COMPONENT NAME
   WEB ESB FOR WIN
   
   
 * REPORTED COMPONENT ID
   5724I8200
   
   
 * REPORTED RELEASE
   620
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2010-02-02
   
   
 * CLOSED DATE
   2010-03-04
   
   
 * LAST MODIFIED DATE
   2010-03-04
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   WEB ESB FOR WIN
   
   
 * FIXED COMPONENT ID
   5724I8200
   
   

APPLICABLE COMPONENT LEVELS
 * R100 PSN
   UP
   
   
 * R200 PSN
   UP
   
   
 * R300 PSN
   UP
   
   
 * R612 PSN
   UP
   
   
 * R620 PSY
   UP
   
   
 * R700 PSN
   UP