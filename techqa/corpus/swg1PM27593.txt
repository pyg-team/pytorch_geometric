Title: IBM PM27593: CSQT882E FOR REASON 2052 AND CSQX053E ARE RECEIVED WHEN TRYING TO PUT TEMPORARY_DYNAMIC QUEUES THAT ARE LOGICALLY DELETED. - United States

Text:
z/os  A FIX IS AVAILABLE
Obtain the fix for this APAR.


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  The customer is using PUBSUB and they are receiving the
   following messages repeatedly:
   .
   CSQT882E CSQ1 CSQXFCTL Message written to the dead-letter queue,
   for reason 2052
   CSQT882E CSQ1 CSQXFCTL Message written to the dead-letter queue,
   for reason 2052
   CSQT882E CSQ1 CSQXFCTL Message written to the dead-letter queue,
   for reason 2052
   CSQT882E CSQ1 CSQXFCTL Message written to the dead-letter queue,
   for reason 2052
   CSQX053E CSQ1 CSQXFFST Error information recorded in CSQSNAP
   data set
   .
   The queues which are causing the reason 2052 are
   TEMPORARY_DYNAMIC queues which are already "marked Logically
   Deleted". The SNAPs are for fqxCheckAuthority - a check is made
   to see if a user is authorized to put to a queue.
   .
   The Change Team is able to successfully recreate the CSQSNAPs
   that occurred in the publisher applications. The CSQSNAPS only
   occur when fqxCheckAuthority gets returned MQRC 2052
   MQRC_Q_DELETED. If the MQRC 2052 is received elsewhere in the
   process of putting to the reply queue, no CSQSNAP is issued.
   This is inconsistent, and suggests that the CSQSNAPs should not
   be being issued in this circumstance. A secondary problem is the
   issuing of the CSQT882E error messages - the description of this
   message suggests it should only be issued periodically for a
   particular stream, but currently every reply message being
   written to the DLQ by the stream is causing the message to be
   issued.
   
   
    
   
   

LOCAL FIX

PROBLEM SUMMARY
 *  ****************************************************************
   * USERS AFFECTED: All users of WebSphere MQ for z/OS Version 7 *
   *                 Release 0 Modification 1.                    *
   ****************************************************************
   * PROBLEM DESCRIPTION: CSQT882E reports a message being        *
   *                      written to the dead letter queue for    *
   *                      every such message put by a queued      *
   *                      pubsub stream.                          *
   *                                                              *
   *                      The error may be accompanied by a       *
   *                      CSQSNAP in fqxCheckAuthority, reported  *
   *                      by CSQX053E.                            *
   ****************************************************************
   * RECOMMENDATION:                                              *
   ****************************************************************
   A request message is put to the stream queue for a stream
   running in the queued pubsub daemon. A temporary dynamic queue
   is specified as the reply queue, and the report options request
   a reply message is generated.
   If the application closes the reply queue (causing it to be
   deleted) before the reply message is written, the reply message
   will be put to the dead letter queue.
   Each time a message is written to the dead letter queue,
   CSQT882E is issued, resulting in a flood of messages to the
   joblog.
   Additionally, if the reply queue is marked logically deleted
   because another job still has a handle, and the reply message
   is being written for a different user and/or queue than the
   last processed by the stream, fqxCheckAuthority will get
   MQRC_Q_DELETED (2052) returned by MQOPEN. In this scenario
   it incorrectly takes a CSQSNAP.
   
   
    
   
   

PROBLEM CONCLUSION
 *  When messages are put to the deadletter queue by a pubsub
   stream, CSQT882E will only be issued periodically as documented
   in the description of the message.
   The CSQSNAP will no longer be taken if fqxCheckAuthority gets
   MQRC_Q_DELETED when issuing MQOPEN for the reply queue.
   010Y
   CMQXFQXA
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   PM27593
   
   
 * REPORTED COMPONENT NAME
   WMQ Z/OS V7
   
   
 * REPORTED COMPONENT ID
   5655R3600
   
   
 * REPORTED RELEASE
   010
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2010-11-26
   
   
 * CLOSED DATE
   2010-12-23
   
   
 * LAST MODIFIED DATE
   2011-02-14
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
    UK63465
   
   

MODULES/MACROS
 *  CMQXFQXA
   
   
    
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   WMQ Z/OS V7
   
   
 * FIXED COMPONENT ID
   5655R3600
   
   

APPLICABLE COMPONENT LEVELS
 * R010 PSY UK63465 [HTTPS://WWW14.SOFTWARE.IBM.COM/WEBAPP/SET2/ORDERMEDIA/SHOPCART?PTFS=UK63465]
   UP11/01/15 P F101
   
   

FIX IS AVAILABLE
 * SELECT THE PTF APPROPRIATE FOR YOUR COMPONENT LEVEL. YOU WILL BE REQUIRED TO SIGN IN. DISTRIBUTION ON PHYSICAL MEDIA IS NOT AVAILABLE IN ALL COUNTRIES.