Title: IBM WebSphere Application Server fails to install when using network file system (NFS) - United States

Text:
 TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 During WebSphere Application Server fails to install with INSTCONFFAILED on a network file system(NFS). 

SYMPTOM
The following exception stack is found in the install logs. 

Process, 

com.ibm.ws.install.ni.ismp.mediaspanning.InstallNIFMaintenanceMediaSpanning, err, com.ibm.ws.install.ni.framework.NIFException 

 at 

com.ibm.ws.install.ni.ismp.mediaspanning.InstallNIFMaintenanceMediaSpanning.executeThisInstallPackage(InstallNIFMaintenanceMediaSpanning.java:270) 

 at 

com.ibm.ws.install.ni.ismp.actions.InstallNIFMaintenance.performExecution(InstallNIFMaintenance.java:379) 

 at 

com.ibm.ws.install.ni.ismp.actions.InstallNIFMaintenance.execute(InstallNIFMaintenance.java:77) 

 at 

com.installshield.wizard.RunnableWizardBeanContext.run(RunnableWizardBeanContext.java:21) 

Caused by: java.nio.channels.OverlappingFileLockException 

 . . . 

com.ibm.ws.install.ni.ismp.actions.InstallNIFMaintenance.executeThisInstallPackage(InstallNIFMaintenance.java:500) 

 at 

com.ibm.ws.install.ni.ismp.actions.InstallNIFMaintenance.executeThisInstallPackage(InstallNIFMaintenance.java:432) 

 at 

com.ibm.ws.install.ni.ismp.mediaspanning.InstallNIFMaintenanceMediaSpanning.executeThisInstallPackage(InstallNIFMaintenanceMediaSpanning.java:129) ... 3 more 

(Jun 8, 2011 5:25:59 AM), Process, com.ibm.ws.install.ni.ismp.actions.SettleNIFRegistryAction, msg1, Current install/uninstall process failed. 

(Jun 8, 2011 5:25:59 AM), Process, com.ibm.ws.install.ni.ismp.actions.SetExitCodeAction, msg1, CWUPI0000I: EXITCODE=1 

(Jun 8, 2011 5:25:59 AM), Process, com.ibm.ws.install.ni.ismp.actions.ISMPLogSuccessMessageAction, msg1, INSTCONFFAILED


CAUSE
The failure is cause when the install process is not able to access a file which already has a lock on it. 

The underlying issue is from the NFS allowing a configuration file to be locked. 


ENVIRONMENT
Network shared file system



RESOLVING THE PROBLEM
Installing and running WebSphere Application Server or a profile on an NFS is not officially supported. If the networked filesystem that WebSphere Application Server is installed on becomes unavailable, 

WebSphere Application Server will crash as seen above. There is no retry logic when installing. 


Referencing a technote from sun: 

http://java.sun.com/javase/6/webnotes/compatibility.html [http://java.sun.com/javase/6/webnotes/compatibility.html] 

Try adding this JVM command line parameter to your install script which may resolve the . -Dsun.nio.ch.disableSystemWideOverlappingFileLockCheck=true 

 

Another user was able to resolve by adding "nolock" option to their /etc/fstab file. 

For example: 

<filername>:/vol/prod/ /apps nfs rw,bg,hard,nointr, nolock,timeo=600,rsize=32768,wsize=32768,vers=3,tcp 0 0