Title: IBM Unable to access WebSphere Portal on i5/OS: SCHD0124E "Unable to initialize wps/Scheduler due to error" - United States

Text:
i5/OS; iseries; SCHD0124E "Unable to initialize wps/Scheduler due to error" TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 WebSphere Portal server on i5/OS cannot be accessed. The SystemOut.log reports the Portal server starting successful, but there are errors. 

SYMPTOM
WebSphere Portal on i5/OS starts successfully, but you are unable to connect. The SystemOut.log file contains: 

[ 8:11:26:608 CST] 00000014 SchedulerImpl E SCHD0124E: Unable to initialize wps/Scheduler due to error: com.ibm.ws.extensionhelper.exception.UnableToInitializeException: com.ibm.websphere.ce.cm.StaleConnectionException: The application requester cannot establish the connection. (A remote host refused an attempted connect operation.)DSRA0010E: SQL State = 08001, Error Code = -99,999
at java.lang.Exception.<init>(Exception.java:77)
at com.ibm.ws.extensionhelper.exception.UnableToInitializeException.<init>(UnableToInitializeException.java:60)
at com.ibm.ws.extensionhelper.db.impl.DatabaseHelperImpl.connect(DatabaseHelperImpl.java:689)
at com.ibm.ws.extensionhelper.db.impl.DatabaseHelperImpl.initialize(DatabaseHelperImpl.java:472)
at com.ibm.ws.extensionhelper.db.impl.DatabaseHelperImpl.<init>(DatabaseHelperImpl.java:249)
at com.ibm.ws.extensionhelper.impl.ExtensionHelperServiceImpl.getDatabaseHelper(ExtensionHelperServiceImpl.java:116)
at com.ibm.ws.scheduler.DBHelperImpl.<init>(DBHelperImpl.java:106)
etc...

Other errors found in the SystemOut.log:

[8:11:27:429 CST] 00000014 ExceptionUtil E CNTR0020E: EJB threw an unexpected (non-declared) exception during invocation of method "getUniqueTask" on bean "BeanId(wps#wp.scheduler.ejb.jar#SchedulerManager, null)". Exception data: java.rmi.RemoteException: An exception occurred when searching for task WPS_UNIQUE_TASK_com.ibm.portal.datastore.task.ResourceCleanup; nested exception is: 
com.ibm.websphere.scheduler.SchedulerNotAvailableException: SCHD0124E: Unable to initialize wps/Scheduler due to error: com.ibm.ws.extensionhelper.exception.UnableToInitializeException: com.ibm.websphere.ce.cm.StaleConnectionException: The application requester cannot establish the connection. (A remote host refused an attempted connect operation.)DSRA0010E: SQL State = 08001, Error Code = -99,999
at java.lang.Throwable.<init>(Throwable.java:196)
at java.lang.Exception.<init>(Exception.java:41)
at java.io.IOException.<init>(IOException.java:40)
at java.rmi.RemoteException.<init>(RemoteException.java:75)
at com.ibm.wps.datastore.ejb.cleanup.SchedulerManagerBean.getTasksByName(SchedulerManagerBean.java:468)
etc...

[8:11:27:873 CST] 00000014 InternalGetSc E com.ibm.wps.command.scheduler.internal.InternalGetSchedulerTaskCommand AbstractCommand.throwCommandException EJPDD0002E: Scheduler Manager call failed during getUniqueTask call.
java.rmi.ServerException: RemoteException occurred in server thread; nested exception is: 
java.rmi.RemoteException: An exception occurred when searching for task WPS_UNIQUE_TASK_com.ibm.portal.datastore.task.ResourceCleanup; nested exception is: 
com.ibm.websphere.scheduler.SchedulerNotAvailableException: SCHD0124E: Unable to initialize wps/Scheduler due to error: com.ibm.ws.extensionhelper.exception.UnableToInitializeException: com.ibm.websphere.ce.cm.StaleConnectionException: The application requester cannot establish the connection. (A remote host refused an attempted connect operation.)DSRA0010E: SQL State = 08001, Error Code = -99,999
at java.lang.Throwable.<init>(Throwable.java:196)
at java.lang.Exception.<init>(Exception.java:41)
at java.io.IOException.<init>(IOException.java:40)
at java.rmi.RemoteException.<init>(RemoteException.java:75)
at java.rmi.ServerException.<init>(ServerException.java:48)
at com.ibm.CORBA.iiop.UtilDelegateImpl.mapSystemException(UtilDelegateImpl.java:218)
etc. ...

[8:11:33:159 CST] 00000014 DataStoreCont E com.ibm.wps.datastore.impl.DataStoreContext handleException EJPDB0002E: Error occurred during database access.
com.ibm.wps.datastore.domains.DomainUnavailableException: EJPDB0101E: Database domain [Domain: rel] is currently unavailable.
at java.lang.Throwable.<init>(Throwable.java:181)
at java.lang.Exception.<init>(Exception.java:29)
at com.ibm.portal.WpsException.<init>(WpsException.java:89)
at com.ibm.portal.WpsException.<init>(WpsException.java:132)
at com.ibm.wps.util.DataBackendException.<init>(DataBackendException.java:61)
at com.ibm.wps.datastore.domains.DomainUnavailableException.<init>(DomainUnavailableException.java:70)
etc. ...


CAUSE
Because the Scheduler is one of the first tasks to initialize, this error will typically be seen first when there are issues connecting to the database server. 

The connection to the database server is failing with the following error: 

 * 
 * 

ENVIRONMENT
WebSphere Portal on i5/OS



DIAGNOSING THE PROBLEM
Review the Portal database (DB2) connection.



RESOLVING THE PROBLEM
In this case after verifying that the passwords for the DB2 connection were correct, it was found that the i5/OS Host server for Database was not started. This would prevent any local or remote database connections to the DB2 server on i5/OS. 

Start the database host server on the i5/OS: 

 * 
 * 


Restarting Portal after starting the database host server resolved the errors, and the Portal server was accessible.