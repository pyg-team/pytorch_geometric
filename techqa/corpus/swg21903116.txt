Title: IBM Tivoli Storage Manager server fails to start due to insufficient memory available - United States

Text:
ulimit allocation insufficient memory TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 Server will fail to start during action ActivateDatabase due to insufficient memory available 

SYMPTOM
Following messages are displayed when running dsmserv in the foreground: 

 * 
 * 
 * 
 * 
 * 
 * 


The db2diag.log shows the below error: 

 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 


CAUSE
There is not enough memory allocated from the operating system

DIAGNOSING THE PROBLEM
Run the command "ulimit -a" to see how much memory is allocated. For example: 

 

 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 


In above example, the system has 67 GB allocated, but DB2 can not access the memory it needs to run. The ulimit setting "memory" is only set to 32768 kbytes (32 GB), which is not enough for DB2 in this case. 
RESOLVING THE PROBLEM
Review ulimit setting and add more memory if available. This link explains required ulimit settings for DB2: 


http://www-01.ibm.com/support/knowledgecenter/SSEPGG_9.7.0/com.ibm.db2.luw.qb.server.doc/doc/r0052441.html?lang=en [http://www-01.ibm.com/support/knowledgecenter/SSEPGG_9.7.0/com.ibm.db2.luw.qb.server.doc/doc/r0052441.html?lang=en]


RELATED INFORMATION
 Ulimit Settings for Db2 on Unix and Linux [http://www-01.ibm.com/support/knowledgecenter/SSEPGG_9.7.0/com.ibm.db2.luw.qb.server.doc/doc/r0052441.html?lang=en]