Title: IBM Collecting Data: IBM Connections Profiles Integration with Sametime and Sametime Advanced - United States

Text:
MustGatherDocument; Mustgather; Must Gather; Sametime; ST proxy; STPROXY sametime Advanced; Lotus Connections TECHNOTE (TROUBLESHOOTING)

PROBLEM
What data should you collect for problems with IBM Connections to Sametime Advanced Server integration?

RESOLVING THE PROBLEM
Collecting the following data before contacting support will help expedite problem determination and resolution of the problem: 
1. Provide a precise description of the issue, screen shots, error messages, and steps to reproduce. 

2. Please provide Connection environment details:
IBM Connections version and fix level.
ST Proxy version and fix level.
LDAP type, version, fix level, and if both servers are using the same LDAP.
Amount of RAM on each of the server nodes
Is this a pilot or production installation?
Is this a new installation or an upgrade from an earlier version of the server?
How many nodes in the cluster and are components installed to a single or multiple jvm's?
Is the problem reproducible on all nodes?
What browser types and versions are in use and is the issue reproducible on the supported browsers? 
Is there a SSO solution in front of IBM Connections (Siteminder, TAM, Spnego)?
Please outline any customization that you may have.
What changes occurred in the environment prior to the issue

3. Tracing can be very verbose. If tracing is requested by support, follow these steps. 

a. Log in to the IBM WebSphere Application Server (WAS) administration console using an administrator ID
b. Go to Troubleshooting -> Logs and Trace -> Logging and Tracing -> Server 1 (or server ST Proxy is installed on) -> Diagnostic Trace Server -> Change Log Detail Levels -> please add the following *string and click Apply -> OK

Component Trace: 


Sametime Advanced server:  * Use the following table to determine what type of logging that you want to enable. The table lists the components that you would typically choose. This list of components is not complete. Other components might be chosen depending on the issue being tracked. 
   
   com.ibm.collaboration.realtime.persistentchat.level=FINEST
   com.ibm.collaboration.realtime.bcs.level=FINEST
   com.ibm.rtc.web.utils.level=FINEST
   com.ibm.collaboration.realtime.pubsub.level=FINEST Type of logging Choose this detail level Persistence com.ibm.sametime.persistence.* General Administration page logging com.ibm.rtc.servlet.* Chat com.ibm.rtc.polled.* Community com.ibm.collaboration.services.* Skill tap com.ibm.collaboration.realtime.bcs.skilltap.services.
   SkilltapAccess LDAP com.ibm.collaboration.services.beans.* 

 * From the context menu, select All Messages and Traces. You should now see text similar to the following example in the log detail level field: *=info: com.ibm.sametime.persistence.*=all



Connections Server  * Enable trace on the Profiles servercom.ibm.lconn.core.services.shindig.ext.config.*=all:com.ibm.lconn.core. 
   services.cre.proxy.rulemanager.rule.*=all:org.apache.commons.httpclient. 
   *=all 


c. Restart the WAS servers after moving existing logs to another directory (or deleting) 

Reproduce the problem. 
Note: If the issue can be reproduced on a single node, shut down all other nodes prior to reproducing the problem. 

e. Provide support a compressed copy of the logs directory %WAS_HOME%/profiles/appSrv01/logs ( trace.log, systemout.log, systemerr.log and FFDC logs) from the node. 
along with following files: 
uiextensions-config.xml 
LotusConnections-config.xml 
located in directory %WAS_HOME%\profiles\(your profile)\config\cells\(your cell)\LotusConnections-config 

f. The exact version of ST proxy, including all fixes, and if there is no Edge server a copy of the httpd.conf to show redirects. 

4. To make sure STproxy is working: 
a. Verify that http://<SametimeProxyServer>: portno/stwebclient/popup.jsp is launching a ST Proxy Web Client 
b. Make sure SSO works from Connections to ST Proxy by signing into Connections, then change the url in the browser to 
stproxy.domain.com:9080/stwebclient/popup.jsp 
you should be automatically logged into the stproxy web client. 


Collect a Fiddler Trace 

Fiddler is a tool for monitoring requests made and received by a web browser. This information is often invaluable when troubleshooting a problem with IBM Connections. Due to the AJAX nature Connections, an error message may not always display the true cause of the error. A fiddler trace helps all requests or responses that may have been made. 

Fiddler can be downloaded from http://www.fiddler2.com [http://www.fiddler2.com/] 

Close all other browser windows before opening fiddler, log into connections. Run the fiddler application. Have the user perform the operation that is causing the error. When the action has been completed, save the results in fiddler by choosing “File”->”Save”->”All Sessions”. 


[/support/docview.wss?uid=swg21610908&amp;aid=1] 

Please configure fiddler to decrypt the https request: 
Select "Decrypt HTTP traffic" and ""Ignore server Certificate errors 

[/support/docview.wss?uid=swg21610908&aid=2] [/support/docview.wss?uid=swg21610908&aid=2] 


Collect a Firebug Trace 
Append 'debug=true' to your browser URL and collect the console contents of a Firebug trace and provide that. 
connections.domain.com:9080/profiles ?debug=true 

To make sure STproxy is working: 
Check DOM tab in Firebug or search for stproxy object 
Check for stproxy.isLoggedIn = true 

Defines stproxyConfig = {server: "${sametimeProxyUrl}", isConnectClient: $isSametimeConnectClient}, 

This results is only for Sametime 8.5.2 - 
tokenLogin: true, 
tunnelURI:'complete url to tunnel.html' RELATED INFORMATION
 Must Gather to Troubleshoot Sametime clients logging in [http://www.ibm.com/support/docview.wss?uid=swg21327357]