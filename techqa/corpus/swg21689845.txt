Title: IBM Warning message is occurred while performing the Staging Cleanup in IBM FileNet Content Engine(CE) - United States

Text:
Staging Cleanup; folder does not exist TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 While the CE is performing the Staging Cleanup, receive the error below:

WARN StagingCleanup.doCleanup.doCleanup: content folder 
[/<Fixed Content Device_Staging Area_PATH>/content/FNx/FNx/FNx] doesn't exist 

DIAGNOSING THE PROBLEM
From the above error, we can see the warning message is indicating the directory [/<Fixed Content Device_Staging Area_PATH>/content/FNx/FNx/FNx] does not exist, which is a three layer structure (FNx/FNx/FNx) storage area. We need to verify if the directory mentioned in above error ([/<Fixed Content Device_Staging Area_PATH>/content/FNx/FNx/FNx]) is exist or not. However, we only see two layer structure directory on physical location of this staging area. 

Then we can open the FileNet Enterprise Manager (FEM) or ACCE and right click on your storage area which the root directory path is /<Fixed Content Device_Staging Area_PATH>, then navigate to the properties page and check the value of property "Directory Structure".

The DirectoryStructure class has constants defined for the directory structure type settings. Valid settings are: 

DIRECTORY_STRUCTURE_SMALL (default setting): 

Specifies a small directory structure. Small structures consist of two levels of directories with 23 nodes at each level (total of 529 directories at the 2nd level). Content is stored only at the 2nd level. 

DIRECTORY_STRUCTURE_LARGE: 

Specifies a large directory structure. Large structures extend the small structure with a third level of 23 nodes, for a total of 12,167 directories at the 3rd level. Content is stored only at the 3rd level. 

If we can see the value of Directory Structure of the storage area is 94546, we can confirm this is a large storage area. So it should contains the 3rd level structure.


RESOLVING THE PROBLEM
Each storage area contains a file fn_stakefile.xml under the root directory path of the specific storage area, the content likes the following: 


<?xml version="1.0" encoding="UTF-8"?><stakefile version="1" createdate="dddd-yy-mm hh:mm:ss.xxx" areaid="{XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX}" name="XXX" structuretype="1" bitsperslice="16" directoriesperlevel="23" inbounddirectories="64"/>

The parameter structuretype determines if this is a large file storage area or small storage area structure.

1 = small
2 = large

If the value is incorrect, update to the correct one then recycle your CE WebSphere JVM. After that, this issue should be resolved.