Title: IBM IZ38672: Rollforward Recovery may fail if free memory in database-heap is low, however unreserved memory is not taken into account. - United States

Text:
AIX  FIXES ARE AVAILABLE
DB2 Version 9.1 Fix Pack 7 for Linux, UNIX and Windows [http://www-01.ibm.com/support/docview.wss?uid=swg24022678]
DB2 Version 9.1 Fix Pack 7a for Linux, UNIX and Windows [http://www-01.ibm.com/support/docview.wss?uid=swg24024113]
DB2 Version 9.1 Fix Pack 8 for Linux, UNIX and Windows [http://www-01.ibm.com/support/docview.wss?uid=swg24024502]
DB2 Version 9.1 Fix Pack 9 for Linux, UNIX and Windows [http://www-01.ibm.com/support/docview.wss?uid=swg24026384]
DB2 Version 9.1 Fix Pack 10 for Linux, UNIX and Windows [http://www-01.ibm.com/support/docview.wss?uid=swg24029027]
DB2 Version 9.1 Fix Pack 11 for Linux, UNIX and Windows [http://www-01.ibm.com/support/docview.wss?uid=swg24031281]
DB2 Version 9.1 Fix Pack 12 for Linux, UNIX and Windows [http://www-01.ibm.com/support/docview.wss?uid=swg24033023]


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  When the amount of free memory in db-heap is very low (approx
   less then 1MB), Rollforward Recovery may fail with
   out-of-memory error, similar to the example pasted below.
   The calculation that resulted in this error was not taking into
   consideration the amount of unreserved memory in the heap. This
   apar fix attemps to take the available unreserved heap into
   consideration before failing with an out-of-memory error.
   2006-10-25-11.23.39.784433-240 I44361A432 LEVEL: Error
   PID : 1413154 TID : 1 PROC : db2redom (SVTAIX01)
   INSTANCE: svtreg8 NODE : 000 DB : SVTAIX01
   APPHDL : 0-28
   FUNCTION: DB2 UDB, recovery manager, sqlpParallelRecovery,
   probe:780
   DATA #1 : String, 113 bytes
   DBHEAP out of Memory. Increase DPHEAP and retry operation.
   memLeft 226348 shrScanMemBytes 17817600 newVal 523136
   n/a
   n/a
   
   
    
   
   

LOCAL FIX
 *  increase DBHEAP and re-issue the Rollforward.
   
   
    
   
   

PROBLEM SUMMARY
 *  Rollforward Recovery may fail if free memory in database-heap is
    low, however unreserved memory is not taken into account.
   
   
    
   
   

PROBLEM CONCLUSION
 *  ERROR DESCRIPTION:
   When the amount of free memory in db-heap is very low (approx
   less then 1MB), Rollforward Recovery may fail with
   out-of-memory error, similar to the example pasted below.
   The calculation that resulted in this error was not taking into
   consideration the amount of unreserved memory in the heap. This
   apar fix attemps to take the available unreserved heap into
   consideration before failing with an out-of-memory error.
   2006-10-25-11.23.39.784433-240 I44361A432 LEVEL: Error
   PID : 1413154 TID : 1 PROC : db2redom (SVTAIX01)
   INSTANCE: svtreg8 NODE : 000 DB : SVTAIX01
   APPHDL : 0-28
   FUNCTION: DB2 UDB, recovery manager, sqlpParallelRecovery,
   probe:780
   DATA #1 : String, 113 bytes
   DBHEAP out of Memory. Increase DPHEAP and retry operation.
   memLeft 226348 shrScanMemBytes 17817600 newVal 523136
   n/a
   n/a
   
   LOCAL FIX:
   increase DBHEAP and re-issue the Rollforward.
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   IZ38672
   
   
 * REPORTED COMPONENT NAME
   DB2 UDB ESE AIX
   
   
 * REPORTED COMPONENT ID
   5765F4100
   
   
 * REPORTED RELEASE
   910
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2008-11-25
   
   
 * CLOSED DATE
   2009-04-06
   
   
 * LAST MODIFIED DATE
   2009-04-06
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   DB2 UDB ESE AIX
   
   
 * FIXED COMPONENT ID
   5765F4100
   
   

APPLICABLE COMPONENT LEVELS
 * R910 PSY
   UP