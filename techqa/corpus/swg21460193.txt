Title: IBM Configuring a secondary schema in an Oracle database with WebSphere Lombardi Edition - United States

Text:
Configuring; secondary schema ; Oracle TECHNOTE (FAQ)

QUESTION
 How and why do I configure a secondary schema for additional nodes in my clustered environment? 

ANSWER
The product requires a unique schema for each node in a cluster to store Javaâ„¢ Message Service (JMS) messages. JMS messages are stored on the database in System Integration Bus (SIB) tables. While each node of a cluster shares the Lombardi-specific tables (LSW_*), the nodes do NOT share SIB tables. 

To configure this scenario with an Oracle 11g database, complete the following steps: 

 1.  Create two new Oracle users for the additional node; one for the process-server SIB tables and one for the performance-data-warehouse SIB tables.
     
     
 2.  Grant each of these new users the DBA role in the Oracle database.
     
     
 3.  In the WebSphere Administrative Console (Integrated Solutions console), navigate to Resources > JDBC > Data sources. This console is typically at http://<host>:9060/ibm/console or https://<host>:9043/ibm/console.
     
     
 4.  Select one of the existing data sources. For example, TeamWorks Performance Server DataSource.
     
     
 5.  On the right-hand side, click JAAS - J2C authentication data. This action takes you to a general JAAS - J2C authentication page for all of the data sources.
     
     
 6.  Clear the Prefix new alias names with the node name of the cell option and click Apply.
     
     
 7.  Click New.
     
     
 8.  Enter a name for the alias (for example, LombardiCell01/node2procsiblogon) and enter process-server SIB table database credentials, which yo created in step 1, in the User ID and Password fields. The alias name is something that you are creating for the first time; not an existing value.
     
     
 9.  Repeat steps 7 and 8 for the performance-data-warehouse so that both new aliases show up in the list on the JAAS - J2C authentication data screen.
     
     
 10. Navigate back to Resources > JDBC > Data sources page.
     
     
 11. From the Scope menu, select Cell=LombardiCell01. This value might differ based on the cell name that you chose at installation time.
     
     
 12. Click New in the table to add a new data source for the Process Server SIB tables.
     
     
 13. Enter the data source name (For example, WLE Cluster Node 2 ProcSIB Datasource) and the JNDI name (for example, jdbc/Node2ProcSIB). These are new names that you are creating for the first time.
     
     
 14. Click Next.
     
     
 15. Select the existing database Java database connectivity (JDBC) provider and click Next:
     
     
     [/support/docview.wss?uid=swg21460193&aid=1] [/support/docview.wss?uid=swg21460193&aid=1]
     
     
 16. Enter the URL for the connection information of the Oracle database that will host the SIB tables for the additional node and click Next.
     
     
     [/support/docview.wss?uid=swg21460193&aid=2] [/support/docview.wss?uid=swg21460193&aid=2]
     
     
 17. Select the values as shown in the following screen shot on the Setup security aliases page and then click Next.
     
     
     [/support/docview.wss?uid=swg21460193&aid=3] [/support/docview.wss?uid=swg21460193&aid=3]
     
     
 18. Review the settings on the Summary page and then click Finish.
     
     
 19. Return to the Resources > JDBC > Data sources > <Datasource_name> > WebSphere Application Server data source properties page and select the Validate new connections and Validate existing pooled connections options.
     
     
 20. For the Validate existing pooled connections setting, change the Retry interval to 3 seconds.
     
     
 21. Return to the Resources > JDBC > Data sources page, check the new data source, and click Test connection to verify that the product can access this new data source.
     
     
 22. Repeat steps 10 to 21 for the performance-data-warehouse.


If you have problems when you test the connection, the user name and password information might be missing. To fix this issue, complete the following steps: 

 *  Return to the Resources > JDBC > Data sources page.
   
   Select the data source.
   
   Under Additional properties on the right-hand side, click Custom properties.
   
   Enter your user name and password as strings for the user and password properties. They should already exist in the list of custom properties. 
 * Finally, there is one more place that you will specify the new schema names during the addition of a node to a cluster. You will specify these schema names when you run the configure_cluster_member.cmd command, as detailed in the standard installation documentation. For the -schema flag, you will specify this new schema name. 
   
   Remember: This command is run for both the process-server and the performance-data-warehouse.

 

PRODUCT ALIAS/SYNONYM
 WLE Lombardi