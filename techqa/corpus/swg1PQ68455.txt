Title: IBM PQ68455: ABENDU0732 RC0C DFSCON20 ( ENTRY DFSCONX0 ) ATTEMPTING TO OBTAIN A HIOP BUFFER. HIOP IS FULL OF SPA BUFFERS OBTAINED BY DFSCONX0. - United States

Text:
 SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  An ABENDU0732 RC0C occurred in module DFSCON20 entry DFSCONX0
   attempting to obtain a HIOP buffer. HIOP is full of SPA buffers
   obtained by DFSCONX0, but never freed. When a /EXIT is entered
   or the signoff exit DFSSGFX0 requests that the conversation be
   terminated, the /EXIT command processor DFSICLH0 calls DFSCONX0
   with a vector x'08000008' if the input transaction has been dis-
   carded. This will only happen if a conversational input message
   is waiting on the queue to be processed when DFSICLH0 checks for
   input to discard. With an entry vector of x'08000008' DFSCON20
   will incorrectly bypass the code which frees the SPA buffers
   obtained by DFSCONX0.
   
   
    
   
   

LOCAL FIX

PROBLEM SUMMARY
 *  ****************************************************************
   * USERS AFFECTED: All IMS R810 users using the /EXIT command   *
   *                 or using signoff exit DFSSGFX0 to exit       *
   *                 conversations.                               *
   ****************************************************************
   * PROBLEM DESCRIPTION: Abendu0732 RC0C when /EXIT is entered   *
   *                      or the signoff exit DFSSGFX0 requested  *
   *                      conversation termination while a        *
   *                      conversational input message is         *
   *                      waiting to be processed.                *
   ****************************************************************
   * RECOMMENDATION: INSTALL CORRECTIVE SERVICE FOR APAR/PTF      *
   ****************************************************************
   When /EXIT is entered or the signoff exit requested
   conversation termination while a conversational input message
   is waiting to be processed, the /EXIT command processor
   DFSICLH0 will discard the message. DFSCONX0 is called to
   terminate the conversation with a vector in R0 with value of
   '08......'.  x'08' in byte 0 indicates that /EXIT processing
   discarded the transaction.
   DFSCONF0 in DFSCON20 also uses byte 0 ( SAVVSPAB=x'08' )
   to represent it has obtained SPA buffers.
   DFSCON20 checks SAVVSPAB to determine whether DFSCONF0 or
   DFSCONX0 needs its buffers freed.
   When byte 0 is x'08', DFSCON20 will free the buffers obtained by
   DFSCONF0. In this case, DFSCONF0 has no buffers and the build up
   of buffers obtained by DFSCONX0 resulted in an ABENDU0732 ,
   RC=0C RC0C.
   SAVEFLOW:
   DFSICIO0 -> N254239 -> DFSCVCF0 -> DFSNCLY0 -> DFSNCLZ0
   ->  DFSNCL40  -> DFSNCS30 -> DFSICLH2 -> DFSICLH0
   
   
    
   
   

PROBLEM CONCLUSION
 *   AIDS: RIDS/DCS RIDS/CNTRL DCS CNTRL
     DEP: NONE
     GEN:
   
   *** END IMS KEYWORDS ***
   CONSAVE has been changed and SAVVSPAB is moved to SAVVFLG1.
   DFSCON20 has been changed so that the code is testing SAVVSPAB
   against SAVVFLG1.
   DFSICLH0 has been changed to set the current terminal exit
   vector once it get to label EXIFRERE.
   
   
    
   
   

TEMPORARY FIX
 *  *********
   * HIPER *
   *********
   
   
    
   
   

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   PQ68455
   
   
 * REPORTED COMPONENT NAME
   IMS V8
   
   
 * REPORTED COMPONENT ID
   5655C5600
   
   
 * REPORTED RELEASE
   802
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   YesHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2002-11-20
   
   
 * CLOSED DATE
   2002-12-09
   
   
 * LAST MODIFIED DATE
   2003-04-23
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
    PQ67308
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
    UQ72460 UQ72464
   
   

MODULES/MACROS
 *     CONSAVE  DFSCON20 DFSICLH0
   
   
    
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   IMS V8
   
   
 * FIXED COMPONENT ID
   5655C5600
   
   

APPLICABLE COMPONENT LEVELS
 * R800 PSY UQ72460
   UP02/12/17 P F212
   
   
 * R802 PSY UQ72464
   UP02/12/17 P F212