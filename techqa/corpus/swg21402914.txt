Title: IBM Running IBM Rational Quality Manager 2.0 server as a Windows Service - United States

Text:
RQM; Quality Manager; RQM Server; Rational Quality Manager; 2.0; server; system service; windows service; service; tomcat; services.msc; run; run as; configure as; tomcat5; tomcat5w.exe; apache; apache tomcat TECHNOTE (FAQ)

QUESTION
How do I configure IBM Rational Quality Manager 2.0 to run as a Microsoft Windows Service using Apache Tomcat web server?

CAUSE
Apache Tomcat has the ability to run as a Microsoft Windows service. As the administrator of an IBM Rational Quality Manager 2.0 server, this configuration can be useful because it maintains access to your Rational Quality Manager server for your users, even when no one is logged in to Windows on the server.

ANSWER
This technote applies to Rational Quality Manager versions 2.0 and 2.0.0.1 only. It does not apply to Rational Quality Manager version 2.0.1. 



Rational Quality Manager 2.0.1
If you are using Rational Quality Manager 2.0.1 or higher, reference the following articles in the Rational Quality Manager Information Center for instructions on configuring Rational Quality Manager to run as a Windows service: 

 * Running Rational Quality Manager as a Windows service on a 32-bit computer [http://publib.boulder.ibm.com/infocenter/rqmhelp/v2r0/topic/com.ibm.rational.test.qm.install.doc/topics/t_run_rqm_win_service.html] 
 * Running Rational Quality Manager as a Windows service on a 64-bit computer [http://publib.boulder.ibm.com/infocenter/rqmhelp/v2r0/topic/com.ibm.rational.test.qm.install.doc/topics/t_run_rqm64_win_service.html]


Rational Quality Manager 2.0 and 2.0.0.1 
By default, to run IBM Rational Quality Manager server you must  1. Log in to the server machine (either a physical or console session). 
 2. Run C:\Program Files\IBM\RQM20\server\server.startup.bat. 
 3. Keep the resulting Tomcat command prompt window open. 
 4. Remain logged into your Windows session on the server machine.


The procedure below explains how to configure IBM Rational Quality Manager to run as a Windows Service. With this configuration, the Rational Quality Manager server will always be available to users whenever the server machine is running, regardless of whether anyone is logged in to Windows. The procedure below requires that you use Apache Tomcat as the web server. 

The paths in the procedure below are only an example, and assume that Rational Quality Manager 2.0 is installed in the default location on a Windows XP machine. You will need to modify this procedure if you are using a non-default location or a different operating system. 

 1.  Stop the IBM Rational Quality Manager server by running
     C:\Program Files\IBM\RQM20\server\server.shutdown.bat 
 2.  Open a Command Prompt window and type the following commands, pressing return after each:
     CD "C:\Program Files\IBM\RQM20\server\tomcat\bin\"
     service.bat install tomcat5
     The following message will be returned: The service 'tomcat5' has been installed.
     
     [/support/docview.wss?uid=swg21402914&aid=1] [/support/docview.wss?uid=swg21402914&aid=1] 
 3.  If you are using a Derby database, open 
     C:\Program Files\IBM\RQM20\server\conf\jazz\teamserver.properties
     in a text editor. Change
     com.ibm.team.repository.db.jdbc.location=repositoryDB
     to
     com.ibm.team.repository.db.jdbc.location=C:\\program files\\IBM\\RQM20\\server\\repositoryDB
     
     [/support/docview.wss?uid=swg21402914&aid=2] [/support/docview.wss?uid=swg21402914&aid=2]
     Save and closeteamserver.properties. 
 4.  Run
     C:\Program Files\IBM\RQM20\server\tomcat\bin\tomcat5w.exe
     to open the Apache tomcat5 Properties window. 
 5.  In the General tab, set Startup type to Automatic
     [/support/docview.wss?uid=swg21402914&amp;aid=3] 
 6.  In the Java tab, uncheck Use default 
 7.  In the Java tab, set Java Virtual Machine to C:\Program Files\IBM\RQM20\server\jre\bin\j9vm\jvm.dll 
 8.  In the Java tab, remove the default Java Options.
     
     Add the follow (for all database types):
     
     -Dcatalina.base=C:\Progra~1\IBM\RQM20\server\tomcat
     -Dcatalina.home=C:\Progra~1\IBM\RQM20\server\tomcat
     -Djava.endorsed.dirs=C:\Progra~1\IBM\RQM20\server\tomcat\common\endorsed
     -Djava.io.tmpdir=C:\Progra~1\IBM\RQM20\server\tomcat\temp
     -Dcom.ibm.team.server.configURL=file:///C:/Program%20Files/IBM/RQM20/server/conf/jazz/teamserver.properties [file:///C:/Program%20Files/IBM/RQM20/server/conf/jazz/teamserver.properties]
     -Dcom.ibm.team.repository.provision.profile= file:///C:/Program%20Files/IBM/RQM20/server/conf/jazz/provision_profiles [file:///C:/Program%20Files/IBM/RQM20/server/conf/jazz/provision_profiles]
     -Dlog4j.configuration=file:///C:/Program%20Files/IBM/RQM20/server/log4j.properties
     -Djava.awt.headless=true
     -Dorg.eclipse.emf.ecore.plugin.EcorePlugin.doNotLoadResourcesPlugin=true
     -Dcom.ibm.team.repository.tempDir=%TEMP%
     
     
     If you are using Oracle Database, add
     -DORACLE_JDBC=[path to Oracle JDBC driver jar]
     
     If you are using DB2 Database, add
     -DDB2I_JDBC=C:\Progra~1\IBM\RQM20\server\update-site\plugins\com.ibm.team.repository.jdbcdriver.db2i_0.6.0.I200805291754.jar
     -DDB2Z_JDBC=C:\Progra~1\IBM\RQM20\server\update-site\plugins\com.ibm.team.repository.jdbcdriver.db2z_0.6.0.I200805291754.jar
     
     If you are using SQL Server Database, add
     -DSQLSERVER_JDBC=[path to directory containing SQL Server JDBC driver jar] 
 9.  In the Java tab, set Maximum memory pool to 700 
 10. In the Java tab, set Thread stack size to 1024.
     [/support/docview.wss?uid=swg21402914&amp;aid=4] 
 11. In the Startup tab, set Mode to jvm.
     [/support/docview.wss?uid=swg21402914&amp;aid=5] 
 12. In the Shutdown tab, set Mode to jvm.
     [/support/docview.wss?uid=swg21402914&amp;aid=6] 
 13. Click OK to save changes.
     [/support/docview.wss?uid=swg21402914&amp;aid=7] 
 14. Open the following files in a text editor.
     C:\Program Files\IBM\RQM20\server\conf\jazz\provision_profiles\profile.ini
     C:\Program Files\IBM\RQM20\server\conf\jazz\provision_profiles\rqm-license-profile.ini
     C:\Program Files\IBM\RQM20\server\conf\jazz\provision_profiles\rqm-profile.ini
     
     Replace all instances of
     url=file:../
     with
     url=file:///C:/Program Files/IBM/RQM20/server/
     [/support/docview.wss?uid=swg21402914&amp;aid=8]
     [/support/docview.wss?uid=swg21402914&aid=9] [/support/docview.wss?uid=swg21402914&aid=9]
     [/support/docview.wss?uid=swg21402914&aid=10] [/support/docview.wss?uid=swg21402914&aid=10]
     Save and close profile.ini, rqm-license-profile.ini, and rqm-profile.ini. 
 15. ClickStart > Run > type "services.msc" > click OK.
     [/support/docview.wss?uid=swg21402914&amp;aid=11] 
 16. In the Services list, right-click Apache Tomcat tomcat5. 
     In the context menu, click Properties.
     
     [/support/docview.wss?uid=swg21402914&aid=12] [/support/docview.wss?uid=swg21402914&aid=12] 
 17. In the General tab, set Startup type to Automatic. Click OK to close Apache Tomcat tomcat5 Properties.
     
     [/support/docview.wss?uid=swg21402914&amp;aid=13] 
 18. In the Services list, right-click Apache Tomcat tomcat5. 
     In the context menu, click Start.
     
     [/support/docview.wss?uid=swg21402914&aid=14] [/support/docview.wss?uid=swg21402914&aid=14]
     
     The IBM Rational Quality Manager 2.0 server is now running as a Windows Service, and will automatically start every time your machine starts up (even when no user is logged in to Windows). 
 19. To stop the server, right-lick Apache Tomcat tomcat5, in the Services list, and click Stop.
     
     [/support/docview.wss?uid=swg21402914&aid=15] [/support/docview.wss?uid=swg21402914&aid=15]


For more information, see:  * Apache Tomcat 5.5 Documentation [http://tomcat.apache.org/tomcat-5.5-doc/] 
 * Wikipedia: Windows Service [http://en.wikipedia.org/wiki/Windows_service] 
 * IBM Rational Quality Manager 2.0 Information Center [http://publib.boulder.ibm.com/infocenter/rqmhelp/v2r0/index.jsp]




DISCLAIMER: 
All source code and/or binaries attached to this document are referred to here as "the Program". IBM is not providing program services of any kind for the Program. IBM is providing the Program on an "AS IS" basis without warranty of any kind. IBM WILL NOT BE LIABLE FOR ANY ACTUAL, DIRECT, SPECIAL, INCIDENTAL, OR INDIRECT DAMAGES OR FOR ANY ECONOMIC CONSEQUENTIAL DAMAGES (INCLUDING LOST PROFITS OR SAVINGS), EVEN IF IBM, OR ITS RESELLER, HAS BEEN ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. 

BACKING UP FILES: 
Always make new database back-ups of your schema repository and users databases prior to making schema changes and performing database upgrades. Failure to create back-up copies can limit your ability to recover from a an upgrade failure, design change issues or other unforeseen failures.