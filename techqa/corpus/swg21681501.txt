Title: IBM The Self Service Offering for IBM SmartCloud Orchestrator fails with a CTJCO0011E error - United States

Text:
CTJCO0011E; CWPKI0022E TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 During the IBM Business Process Manager code promotion process from one environment to another environment, a CTJCO0011E error is seen. 

SYMPTOM
The following error message is seen in the IBM SmartCloud Orchestrator user interface:
Detailed information: CTJCO0011E: An unexpected exception occurred:
javax.net.ssl.SSLHandshakeException: com.ibm.jsse2.util.j: PKIX path building failed: java.security.cert.CertPathBuilderException: unable to find valid certification path to requested target in com.ibm.orchestrator.restcall.GenericREST

The following error occurs in the SystemOut.log file for IBM Business Process Manager:
[8/8/14 14:10:33:185 EDT] 00000122 WSX509TrustMa E CWPKI0022E: SSL HANDSHAKE FAILURE: A signer with SubjectDN "CN=192.168.1.28, O=Websphere Cloudburst, OU=IBM" was sent from target host:port
"192.168.1.28:443". The signer may need to be added to local trust store "/opt/ibm/BPM/v8.5/profiles/Node1Profile/config/cells/PCCell1/trust.p12" located in SSL configuration alias "NodeDefaultSSLSettings" loaded from SSL configuration file "security.xml". The extended error message from the SSL handshake exception is: "PKIX path building failed: java.security. cert.CertPathBuilderException: unable to find valid certification path to requested target". 


CAUSE
This problem occurs when the SCOrchestrator_Support_toolkit is updated by an installation of an updated IBM Business Process Manager toolkit (.twx file). However, the IBM Business Process Manager toolkit has a dependency on a newer SCOrchestrator_Support_toolkit. The updated SCOrchestrator_Support_toolkit is not already installed at the target system level. 

For instance, the target system is missing the Fix Pack 1 installation for IBM SmartCloud Orchestrator Version 2.3.0. However, the source system where the new IBM Business Process Manager toolkit (.twx file) was developed already has Fix Pack 1 applied. This situation also occurs if 2.3.0.1-CSI-ISCO-LA0001 is installed at the system where the toolkit is developed and it declares a dependency to the updated SCOrchestrator_Support_toolkit. However, the update is not available at the target system. 

In these situations, the updated SCOrchestrator_Support_toolkit is shown on the import display message box to be imported in addition to the toolkit that was really updated.

Thus, if all of the systems use the same maintenance level, this problem should not occur.


RESOLVING THE PROBLEM
If you run into this problem, run the following commands in order to resolve the error situation: 

 1.  /iaas/scorchestrator/SCOrchestrator.py --stop -p bpm (on central-server1)
     
     
 2.  ssh central-server1
     
     
 3.  su - db2inst1
     
     
 4.  db2 list database directory
     
     
 5.  db2 connect to BPMDB
     
     
 6.  db2 set schema bpmuser
     
     
 7.  db2 "update LSW_ENV_VAR set default_value='https://<IP central-server3>' where name = 'restEndpoint'"
     
     
     Note: Replace https://<IP central-server3> with the IP address of your Central Server 3 (IBM Workload Deployer Server).
     
     
 8.  db2 "update LSW_ENV_VAR set default_value='IWD_Auth_Alias' where name = 'iwdAuthAlias'"
     
     
 9.  db2 commit
     
     
 10. db2 connect reset
     
     
 11. /iaas/scorchestrator/SCOrchestrator.py --start -p bpm (on Central Server 1)