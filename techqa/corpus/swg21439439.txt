Title: IBM Locale Messages on Solaris - United States

Text:
locale; lang; solaris; couldn't set locale correctly; LC_ALL; LANG; en_US.UTF-8 TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 If the locale is not properly set in the Solaris environment, Directory server commands may display "couldn't set locale correctly" messages. 

SYMPTOM
When attempting to run Directory Server commands such as idsicrt or idscfgdb as shown below you may see "couldn't set locale correctly" messages embedded in the command output. These are not product messages but rather messages generated by the OS. This is because the locale is not correctly set in the environment. 

# idscfgdb -I ldapdb2 -a ldapdb2 -w ldapdb2 -t ldapdb2 -l /export/home/ldapdb2

couldn't set locale correctly
couldn't set locale correctly
couldn't set locale correctly
You have chosen to perform the following actions:
GLPCDB023I Database 'ldapdb2' will be configured.
GLPCDB024I Database 'ldapdb2' will be created at '/export/home/ldapdb2'
GLPCDB035I Adding database 'ldapdb2' to directory server instance:
... 


RESOLVING THE PROBLEM
By default, LANG and/or any of LC_ALL variables may not be correctly set to a valid locale. 

To stop these messages from occurring, set a valid locale to LANG and all LC_ALL variables. 

 

For example, In order to set the locale to en_US.UTF-8 locale, perform the following steps. 

 

1.) Make sure the "en_US.UTF-8" locale is installed, by issuing "locale -a" 

 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * ...

2.) Then export the LANG and LC_ALL parameters as shown below: 
**Note: Check current settings by issuing "locale" command. 
 * 
 * 
 * 


3.) Then update the /etc/default/init file to reflect the correct LANG variable as described below: 

As superuser, manually edit the /etc/default/init file to set the correct LANG variable. Then reboot the system. 

Example init file: 

# 
# Copyright 1992, 1999-2002 Sun Microsystems, Inc. All rights reserved. 
# Use is subject to license terms. 
# 
#ident "@(#)init.dfl 1.7 02/12/03 SMI" 
# 
# This file is /etc/default/init. /etc/TIMEZONE is a symlink to this file. 
# This file looks like a shell script, but it is not. To maintain 
# compatibility with old versions of /etc/TIMEZONE, some shell constructs 
# (i.e., export commands) are allowed in this file, but are ignored. 
# 
# Lines of this file should be of the form VAR=value, where VAR is one of 
# TZ, LANG, CMASK, or any of the LC_* environment variables. value may 
# be enclosed in double quotes (") or single quotes ('). 
# 
TZ=US/Central 
CMASK=022 
LANG=en_US.UTF-8