Title: IBM IC62454: PROCESSES TERMINATE WHEN SERVICES TAB IS SELECTED IN MQ         EXPLORER. - United States

Text:
  FIXES ARE AVAILABLE
WebSphere MQ V7.0 Fix Pack 7.0.1.1 [http://www-01.ibm.com/support/docview.wss?uid=swg24024528]
WebSphere MQ V7.0.1 for i5/OS Fix Pack 7.0.1.1 [http://www-01.ibm.com/support/docview.wss?uid=swg24025627]
WebSphere MQ V7.0 Fix Pack 7.0.1.2 [http://www-01.ibm.com/support/docview.wss?uid=swg24026518]
WebSphere MQ V7.0.1 for i5/OS Fix Pack 7.0.1.2 [http://www-01.ibm.com/support/docview.wss?uid=swg24026566]


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  When the services tab is selected in the MQ Explorer, the queue
   manager agent process encounters an access violation exception
   while trying to fetch the status of service objects.
   
   The application event log shows the following error:
   
   Faulting application amqzlaa0.exe, version 7.0.200.9114, time
   stamp 0x49f1e495, faulting module MSVCR80.dll, version
   8.0.50727.3053, time stamp 0x4889d619, exception code
   0xc0000005, fault offset 0x0001500a, process id 0x8ef20,
   application start time 0x01ca057458a54c42.
   
   After the access violation exception, all the services shut
   down, the command server stops and the queue manager ends
   abnormally.
   
   A lot of MQ processes such as amqrrmfa lose contact with the
   agent process and terminate after generating FDC's which are
   characterized by probes ZX005035, RM220005, ZX005025, ZX092016
   etc..
   
   zrcX_AGENT_DEAD, rrcE_MQGET_FAILED, zrcX_PROCESS_MISSING,
   MQRC_CONNECTION_BROKEN, xecF_E_UNEXPECTED_SYSTEM_RC etc are some
   of the error codes that could be seen in the FDCs that are
   generated.
   
   This problem occurs on a V7 queue manager which has more than 16
   server service objects (SERVTYPE set to SERVER) defined.
   
   This problem also occurs if the MQSC command "DISPLAY
   SVSTATUS(*)" is issued on the queue manager with above set up.
   The agent process encounters an access violation and the same
   set of FDC's are generated as mentioned above. The error
   reported on the MQSC prompt is as follows:
   
   display SVSTATUS(*)
        2 : display SVSTATUS(*)
   AMQ8101: WebSphere MQ error (BC0) has occurred.
   
   
    
   
   

LOCAL FIX

PROBLEM SUMMARY
 *  ****************************************************************
   USERS AFFECTED:
   1) All WebSphere MQ users who use MQ Explorer to display service
   objects within a V7 queue manager.
   2) All WebSphere MQ users who issue the MQSC command "DISPLAY
   SVSTATUS" to display the status of the service objects.
   
   Note: users will encounter this problem only if 17 or
   more service objects of SERVTYPE(SERVER)are defined within the
   queue manager.
   
   Platforms affected:
    All Distributed (iSeries, all Unix and Windows)
   ****************************************************************
   PROBLEM SUMMARY:
   When the services tab is clicked on the MQ Explorer or DISPLAY
   SVSTATUS command is issued from an MQSC prompt, agent process
   (amqzlaa0) receives a request to query the service status. The
   agent process then contacts the process manager (amqzmgr0
   process) to get the status of service objects. Once the agent
   get the reply, it tries to copy the list of service objects
   from the temporary receive buffer to another array. It is
   during this copy that an access violation is being encountered,
   due to a miscalculation of the length of the array.
   
   
    
   
   

PROBLEM CONCLUSION
 *  The code changes have been done to ensure that we calculate the
   array size correctly thus preventing the access violation
   exception.
   
   ---------------------------------------------------------------
   The fix is targeted for delivery in the following PTFs:
   
                      v7.0
   Platform           Fix Pack 7.0.1.1
   --------           --------------------
   Windows            U200310
   AIX                U827232
   HP-UX (PA-RISC)    U826485
   HP-UX (Itanium)    U826884
   Solaris (SPARC)    U827125
   Solaris (x86-64)   U827374
   iSeries            tbc_p700_0_1_1
   Linux (x86)        U826321
   Linux (x86-64)     U827231
   Linux (zSeries)    U827105
   Linux (Power)      U826779
   
   The latest available maintenance can be obtained from
   'WebSphere MQ Recommended Fixes'
   http://www-1.ibm.com/support/docview.wss?rs=171&uid=swg27006037 [http://www-1.ibm.com/support/docview.wss?rs=171&uid=swg27006037]
   
   If the maintenance level is not yet available, information on
   its planned availability can be found in 'WebSphere MQ
   Planned Maintenance Release Dates'
   http://www-1.ibm.com/support/docview.wss?rs=171&uid=swg27006309 [http://www-1.ibm.com/support/docview.wss?rs=171&uid=swg27006309]
   ---------------------------------------------------------------
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   IC62454
   
   
 * REPORTED COMPONENT NAME
   WMQ WINDOWS V7
   
   
 * REPORTED COMPONENT ID
   5724H7220
   
   
 * REPORTED RELEASE
   700
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2009-08-10
   
   
 * CLOSED DATE
   2009-09-11
   
   
 * LAST MODIFIED DATE
   2009-11-20
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   WMQ WINDOWS V7
   
   
 * FIXED COMPONENT ID
   5724H7220
   
   

APPLICABLE COMPONENT LEVELS
 * R700 PSY
   UP