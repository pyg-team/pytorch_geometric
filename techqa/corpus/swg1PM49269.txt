Title: IBM PM49269: DFHAP0001 0C4/AKEA IN DFHZRST - United States

Text:
z/os  A FIX IS AVAILABLE
Obtain the fix for this APAR.


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  From the dump there are two tasks (A and B) which are using
   CSAOSRSA at the same time. One is for abend processing(B) and
   one is for the call to VTAM for RESETSR(A).
   .
   DFHZRST is trying to do a RESETSR for this task A and set up
   the FIXED RPL which would have been passed to VTAM on the
   request using R13 savearea pointing to the CSA, which it
   always uses..
   .
   Problem is task B experiences a pipeline error and DFHPIRT in
   error processing leaves R13 pointing to the CSA running on an
   L8.
   .
   L8CWW AP 09DC PIRT  *EXC* OUTBOUND_PIPELINE_FAILURE
   .
   At this point we have a conflict of 2 tasks using the
   CSAOSRSA. This leads to task A using the registers and other
   information from task B.
   .
   ADDITIONAL KEYWORDS: 0C4 DFHZOPN
   KIXREVRJS
   DFHSR0601  Program interrupt occurred with system task
              TCP in control
   A task running on an L8 TCB has failure in DFHPIRT:
   OUTBOUND_PIPELINE_FAILURE
   and was abending APIB, and left R13 pointing to the CSA.
   This save area was being used by the TCP task for a VTAM
   request and caused VTAM to branch to an incorrect location,
   leading to ABEND0C1 0C1.
   
   
    
   
   

LOCAL FIX

PROBLEM SUMMARY
 *  ****************************************************************
   * USERS AFFECTED: All CICS users.                              *
   ****************************************************************
   * PROBLEM DESCRIPTION: DFHZRST abend 0C4 following             *
   *                      EXEC CICS LINK PROGRAM('DFHPIRT')       *
   *                      when container DFHWS-URI contain an     *
   *                      invalid URI value.                      *
   ****************************************************************
   * RECOMMENDATION:                                              *
   ****************************************************************
   A user application has issued an EXEC CICS LINK PROGRAM
   ('DFHPIRT') specifying an invalid URI in container
   DFHWS-URI.
   The invalid URI is detected, message DFHPI0997 is issued and
   DFHPIRT issues an exception trace entry before returning with
   an EXEC CICS ABEND ABCODE('APIB') command.
   Before the EXEC call, DFHPIRT failed to initialized register
   13 to point to EISTG. The registers were saved where register
   13 was pointing at the time, which was the CICS CSA.
   During abend processing the task got suspended.
   
   Another unrelated task which had an active RESETSR request
   to VTAM at the time completed. Upon completion the registers
   saved in the CSA, CSAOSRSR, before the request was issued were
   restored. Control was returned to DFHZRST causing it to
   abends0C4.
   
   
    
   
   

PROBLEM CONCLUSION
 *  DFHPIRT has been changed to ensure that register 13 is
   correctly initialized with the address of EISTG before
   issuing an EXEC CICS ABEND or RETURN call after an invalid URI
   has been detected.
   
   
    
   
   

TEMPORARY FIX
 *  FIX AVAILABLE BY PTF ONLY
   
   
    
   
   

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   PM49269
   
   
 * REPORTED COMPONENT NAME
   CICS TS Z/OS V4
   
   
 * REPORTED COMPONENT ID
   5655S9700
   
   
 * REPORTED RELEASE
   600
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt / Xsystem
   
   
 * SUBMITTED DATE
   2011-10-04
   
   
 * CLOSED DATE
   2011-12-01
   
   
 * LAST MODIFIED DATE
   2016-03-11
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
    UK74394 UK74395
   
   

MODULES/MACROS
 *     DFHPIRT
   
   
    
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   CICS TS Z/OS V4
   
   
 * FIXED COMPONENT ID
   5655S9700
   
   

APPLICABLE COMPONENT LEVELS
 * R600 PSY UK74394 [HTTPS://WWW14.SOFTWARE.IBM.COM/WEBAPP/SET2/ORDERMEDIA/SHOPCART?PTFS=UK74394]
   UP11/12/09 P F112
   
   
 * R700 PSY UK74395 [HTTPS://WWW14.SOFTWARE.IBM.COM/WEBAPP/SET2/ORDERMEDIA/SHOPCART?PTFS=UK74395]
   UP11/12/09 P F112
   
   

FIX IS AVAILABLE
 * SELECT THE PTF APPROPRIATE FOR YOUR COMPONENT LEVEL. YOU WILL BE REQUIRED TO SIGN IN. DISTRIBUTION ON PHYSICAL MEDIA IS NOT AVAILABLE IN ALL COUNTRIES.