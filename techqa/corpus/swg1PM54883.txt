Title: IBM PM54883: UNCOMMITTED ACTIVITY ON THE TEMPDYN QUEUES CAN NOT BE DELETED WHEN USING SHARECNV GREATER OR EQUAL TO ONE (SHARECNV>= 1) - United States

Text:
z/os  A FIX IS AVAILABLE
Obtain the fix for this APAR.


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  The problem occurs when using multiplexed svrconn
   channels SHARECNV>= 1.
   Any API calls performed by a channel exit take
   place using the primary conversation's connection
   to the qmgr, rather than the connection relating
   to a particular conversation.
   When the channel ends (i.e. the last shared
   conversation on the channel ends), the connection
   for the primary conversation is not ended correctly.
   This leaves any in  syncpoint work performed by the
   exits inflight, and in the case of a
   temporary dynamic queue, this uncommitted work on
   the queue prevents it from being deleted.
   
   
    
   
   

LOCAL FIX
 *  The problem can be avoided by changing channel exits
   to work out of syncpoint, or by using SHARECNV(0)
   on the channel.
   
   
    
   
   

PROBLEM SUMMARY
 *  ****************************************************************
   * USERS AFFECTED: All users of WebSphere MQ for z/OS Version 7 *
   *                 Release 1 Modification 0.                    *
   ****************************************************************
   * PROBLEM DESCRIPTION: In syncpoint MQI calls made by channel  *
   *                      exits are left uncommitted after the    *
   *                      channel ends when SHARECNV is set to 1  *
   *                      or above on a SVRCONN channel.          *
   *                      If the exits put or got messages from a *
   *                      temporary dynamic queue in syncpoint,   *
   *                      the uncommitted work will prevent the   *
   *                      TDQ from being deleted until the chinit *
   *                      ends.                                   *
   ****************************************************************
   * RECOMMENDATION:                                              *
   ****************************************************************
   When Channel Exits are invoked for multiplexed svrconn channels
   (i.e. SHARECNV(1+) ), they connect to the qmgr using an hConn
   associated with the physical channel, rather than the hConn used
   by any particular instance of a channel sharing the
   conversation.
   When the channel ends, this hConn is not disconnected, and any
   in syncpoint work performed by the exits is left uncommitted.
   
   
    
   
   

PROBLEM CONCLUSION
 *  When a multiplexed channel ends, any in syncpoint work performed
   by channel exits will be rolled back, and the hconn disconnected
   from the queue manager.
   100Y
   CSQXRMAS
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   PM54883
   
   
 * REPORTED COMPONENT NAME
   WMQ Z/OS V7
   
   
 * REPORTED COMPONENT ID
   5655R3600
   
   
 * REPORTED RELEASE
   100
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2011-12-22
   
   
 * CLOSED DATE
   2012-03-26
   
   
 * LAST MODIFIED DATE
   2012-05-02
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
    PM54201 [http://www-01.ibm.com/support/docview.wss?uid=swg1PM54201]
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
    UK77352
   
   

MODULES/MACROS
 *  CSQXRMAS
   
   
    
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   WMQ Z/OS V7
   
   
 * FIXED COMPONENT ID
   5655R3600
   
   

APPLICABLE COMPONENT LEVELS
 * R100 PSY UK77352 [HTTPS://WWW14.SOFTWARE.IBM.COM/WEBAPP/SET2/ORDERMEDIA/SHOPCART?PTFS=UK77352]
   UP12/04/21 P F204
   
   

FIX IS AVAILABLE
 * SELECT THE PTF APPROPRIATE FOR YOUR COMPONENT LEVEL. YOU WILL BE REQUIRED TO SIGN IN. DISTRIBUTION ON PHYSICAL MEDIA IS NOT AVAILABLE IN ALL COUNTRIES.