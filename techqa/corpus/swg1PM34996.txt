Title: IBM PM34996: ABENDS0C4 IN CREATEDIRECTORY WHEN USING SHARED CLASSES - United States

Text:
z/os SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  When attempting to use the Shared Classes feature of the JVM,
   the JVM fmay fail to initialize and crash with an ABEND0C4.
   
   The problem is due to a mis-specification of the "cacheDir"
   where java stores shared class control files.
   
   The following scenarios are known to result in this problem:
   1) The /tmp directory does not exist or is not writable
   2) The /tmp/javasharedresources direcory is not creatable
   3) The cacheDir or controlDir options are in use, and any part
   of the specified path does not exist and is uncreatable
   
   
   This APAR will be resolved by properly detecting the problem
   condition and issuing a message regarding the Shared Classes
   Initialization error.
   User Intervention will still be required to correct the cacheDir
   or controlDir specifications.
   
   VERIFICATION STEPS
   You must have Shared Classes active to hit this problem.
   
   The relevant stack trace portions at time of failure are:
   createDirectory+0x268   <-- Failure Point. (statement 210)
   ensureDirectory+0x324
   j9shmem_getDir+0xe
   SH_OSCache::commonStartup
   SH_OSCachesysv::startup
   SH_CompositeCacheImpl::startup
   SH_CacheMap::startup
   j9shr_init+0x7f4
   ...
   
   Depending on the level of Java in use, this offset may vary by
   +- 0x100.
   
   KEYWORDS:
   j9shr j9shared ABENDS0C4 ABEND0c4 0C4 createDirectory
   javasharedresources libj9prt24.so Xshareclasses
   
   
    
   
   

LOCAL FIX
 *  Specify a pre-existing or readable/writable path as the Shared
   Class CacheDir.
   
   If you are using a middleware or application product that
   specifies the CacheDir or ControlDir for you, contact that
   Middleware or Application team for instructions on how to
   override the specification.
   
   Alternatively disable shared classes to avoid the problem
   altogether.
   
   If you are using a middleware or application product that
   activates Shared Classes for you, contact that Middleware or
   Application team for instructions on how to disable Shared
   Classes.
   
   
    
   
   

PROBLEM SUMMARY
 *  JVM crashes when the cache directory for shared classes does not
   exist and can not be created.
   
   
    
   
   

PROBLEM CONCLUSION
 *  This defect will be fixed in:
   6.0.0 SR10
   6.0.1 SR1
   
   The JVM has been updated so that a proper message will show up
   if the cache directory for shared classes does not exist and can
   not be created.
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   PM34996
   
   
 * REPORTED COMPONENT NAME
   JAVA 6 Z/OS 31
   
   
 * REPORTED COMPONENT ID
   620700105
   
   
 * REPORTED RELEASE
   600
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2011-03-16
   
   
 * CLOSED DATE
   2011-03-30
   
   
 * LAST MODIFIED DATE
   2012-07-03
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   JAVA 6 Z/OS 31
   
   
 * FIXED COMPONENT ID
   620700105
   
   

APPLICABLE COMPONENT LEVELS
 * R600 PSY
   UP