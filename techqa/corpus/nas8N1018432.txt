Title: IBM Printing Control Characters - United States

Text:
LPD; LPR; TCPIP TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 This document provides information about why various aspects are incorrect when sending a file from an IBM RS/6000 system. 

RESOLVING THE PROBLEM
Problem: From an IBM RS/6000 system, the user is sending a spooled file via LPR to the IBM OS/400 LPD daemon. It uses the printer file QTCP/QPTMPLPD. This file is set to Page Size Length = 66, LPI = 6, and CPI = 10. Then it gets sent to local SCS printers (d/t6200 and d/t6400) with a Form Feed of Continuous. The user is getting output with 55 lines per page, starting on line 6. He wants it to print beginning on line 1 through 66 continuously because these are mailing labels. 

Resolution: The customer displayed the spooled file, and it showed the first line on line 6. This indicates the spooled file is printing as it is being told. Support collected a communications trace, a dump of the spooled file, and the command with all of the parameters used to send the file to the operating system. The printer file should have total control of the output. When the file comes across, any controls that it might have in it are ignored. The overflow is set to 60, which is why the page is only printing 55 lines; if we change the spooled file attributes for overflow of 66, that will help print more lines.

Support reviewed the documentation, and the communications trace shows the data coming in without any controls to tell it where to begin printing. The dump of the spooled file shows positioning to line 6. The line 6 is a system default because there is nothing in the data stream for line positioning. 

The user also has a problem of not getting form feeds where he needs them. It is breaking at 60 lines no matter where the breaks are. Unless we get form feeds, this will be the default. LPR/LPD technically use an ASCII data stream and the 'f' filter strips ASCII HT, CR, FF, and so on, characters, not *SCS characters. LPD will assume the stream is ASCII when searching for the characters to strip, unless the 'l' or 'v' filters are specified. For *SCS spooled files, printer control characters get discarded from the spooled file created when the printer file is *SCS type. This is not LPD discarding the characters, but the spooled file subsystem. All LPD is doing is opening a spooled file and simply writing the data into it. If the *SCS setting is used in the printer file, and if the 'l' filter is used, then HT, CR, FF, and so on, do get written to the spooled file by LPD, but the spooled file subsystem sees them and rejects them. This effect can be stopped by enhancing LPD to use passthrough mode when creating *SCS type spooled files, as is done by Client Access or some other products.

Passthrough support is a work item that has not been assigned headcount. Because *SCS was never technically supported, development is not required to fix this kind of error.

 


Cross reference information Segment Product Component Platform Version Edition Operating System IBM i 7.1 Operating System IBM i 6.1 
HISTORICAL NUMBER
 11241312