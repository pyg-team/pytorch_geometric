Title: IBM Understanding Situation Reflex Actions - United States

Text:
probe reflex automation kraaauto TECHNOTE (FAQ)

QUESTION
 What is a Situation Reflex Action, and how does the behavior differ depending on the Action tab of the Situation Editor? 

ANSWER
The term "reflex action" refers to the actions that are taken on the Agent and/or TEMS based on a Situation's settings in the "Action" tab of the Situation Editor. In general, there are 3 types of reflex action; each depends on where the decision to execute the action is made (Agent or TEMS), on other Situation "Action" settings, and on the Situation formula itself.
1) 'True Reflex' involves only the Agent; i.e. the Agent decides how to build and execute the command.

2) With 'Reflex Emulation', the Agent returns data to the TEMS and the TEMS decides and builds the command string, but the TEMS returns the info to the Agent, and the action is executed at the Agent.

3) The third type is a variation on the second where the Agent returns data to the TEMS, and the TEMS decides, builds, and executes the Action.

On the Reflex tab of the Situation Editor, there are 3 sets of radio buttons that allow the user to control:

a) Where the command should be executed, at Agent or at TEMS.
b) If multiple data rows meet the Situation criteria, whether the action occurs only once or for every row in the sample.
c) If the Situation remains true across consecutive intervals, whether to execute the command only when the state changes from False to True or every interval that the Situation remains True.

The chosen settings are saved in 3 one-byte flags, ('Y' or 'N'), in the Situation definition in the TSITDESC table, column AUTOSOPT:

Flag 1 : 'Y' = execute command for every row
Flag 2 : 'Y' = execute every interval
Flag 3 : 'Y' = execute at TEMS

If Flag 3 = 'Y', then the third type of Reflex above is done; data is returned from the agent to the TEMS where the command is built and executed at the TEMS.

If Flag 3 = 'N', but any of the following conditions are true, then Reflex Emulation will be used:


 1. If the formula embeds another Situation 
 2. If the formula includes TEMS-side data server-implemented functions, such as COUNT, SUM, AVG, MIN, MAX, 
 3. If the Situation uses Event Persistence


If Flag 3 = 'N' and none of the above 3 conditions are true, then True Reflex will be employed to execute the action at the Agent. 

TROUBLESHOOTING: 

If True Reflex is in effect, the Sitmon component of the TEMS sends two requests to the agent when the Situation is started: 

--one returns data to the TEMS, which is used by the infrastructure in the usual way to track the state of the Situation 
--the other is used by the agent framework to control the Reflex actions 

In the True Reflex case, a KBB_RAS1 tracing value of at least "ERROR (UNIT:ko4sit ALL)" on the TEMS will show that the Situation was started successfully and the content of the Reflex command that was sent to the agent. On the agent-side, having at least "ERROR (UNIT:kra ALL)" will trace what the automation probe is doing when the Situation fires. 

If Reflex Emulation is in effect, or the action is being executed at the TEMS, these TEMS traces are useful: 

KBB_RAS1=ERROR (UNIT:ko4sit ALL) (UNIT:ko4async ALL) (UNIT:ko4ib ALL) (UNIT:ko4ibu ER) (UNIT:ko4tobje ALL) (UNIT:ko4cmdst ALL) (UNIT:ko4auto ALL) (UNIT:ko4sod ALL) (UNIT:kpxrpcrq ER ST) (UNIT:kdssqprs ER IN)