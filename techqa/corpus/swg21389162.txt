Title: IBM How to use the DOORS Database Server Administration Tool - United States

Text:
db admin; dbsadmin tool; database file locks; database utility; database file locks; system locked files TECHNOTE (FAQ)

QUESTION
 How do you use the IBM Rational DOORS Database Server Admin (dbsAdmin) Tool? 

CAUSE
The DOORS database server administration tool is installed on the database server machine, by default. but there are no instructions describing what it does or how to use it.

ANSWER
The Database Server Admin Tool provides DOORS administrators the ability to 

 * Stop the DOORS database
   
   
 * Manage Connections
   
   
 * Unlock system locked files in the database
   


Warning: DBSAdmin is a tool intended to be used only by DOORS administrators under the guidance of a Support technician. Using the tool can have severe consequences to your database if it is used in an improper manner. 
It it important to understand that the DBSAdmin tool represents actually a front end for the dbadmin.exe command line utility. Further help regarding this can be found by typing ‘dbadmin /help’ from the command line when you are in $DOORSHOME/bin. The DOORS Database Server Admin Tool, also known as the DBSAdmin tool is an application intended for managing three DOORS aspects: 






I. Stopping the DOORS DB


II. Managing Connections


III. Dealing with system locked files in the database 


Note: The Locks displayed by the DBSAdmin tool are not the same as locks shown in the Manage Locks option available from the DOORS Tool menu in the database explorer window. They are for different purposes as described below: 

 * Manage Locks shows you DOORS locks that users have placed on items in the database.
   
   
 * DBSAdmin tool shows you file database server system locks on the files that represent database components.
   This tool allows you to remove locks associated with database server transaction updates
   File locking should be a transient operation, generally not lasting for a long period of time. If a lock persists you can use the tool to unlock that file rather than restarting the doorsd service.
   





I .Stopping the DOORS DB server: 

image 

[/support/docview.wss?uid=swg21389162&aid=1] [/support/docview.wss?uid=swg21389162&aid=1]

The DBSAdmin tool can be used to stop the DOORS Database Server (ddbs). 

By default it is available as an option on the Windows machine where ddbs is installed.
For Unix or Linux installations refer to the section below for dbadmin commands. 

 

 1. Click Start > Programs > IBM Rational > IBM Rational Tools > IBM Rational 9.5 > 
    DOORS Database Server Admin
    
    This runs the DOORS Database Server Administration Tool
    
    
 2. Connect to the server you want to stop:  1. In the Database server box, specify the location of the server, using the format port@servername:
        
        
     2. In the Password box, type the db server password if required.
        
        
     3. Click Refresh List
        
        
    
    
 3. Click Shutdown Server
    A message is displayed asking you to confirm that you really want to stop the server. 
    
    
 4. Click Yes
    
    
 5. Click Close to exit the Server Manager



Note: The password field is a database password and by default the password is not set.
The database password is not the same as the Administrator password - see below:


 * Should you need to restrict access to this tool you can set the password for the database by clicking change password. Once you set the password it will be a required field in the connection details.
   
   
 * Setting the database password also restricts who can reset the DOORS Administrator password. 
   In order for users to successfully accomplish reset they would need to also provide the database password.





 Back to top 

 

II. Managing Connections: 

 

To check which users currently have a connection to a server running on Windows: 

 1. Click Start > Programs > IBM Rational > IBM Rational Tools > IBM Rational 9.5 > 
    DOORS Database Server Admin
    
    This runs the DOORS Database Server Administration Tool.
    
    
 2. Connect to the server whose connections you want to check:  1. In the Database box, specify the location of the server, using the format: 
        
        port@servername
        
        where:
        port is the port number of the database server 
        
        servername: the computer name (or IP address) of the DOORS database server 
        
        
     2. In the Password box type the db server password if required
        
        
     3. Click Refresh List
        
        
    
    
 3. In the Users and locked files area a list displays of all the users who currently have a connection
    in the form username@computer. Indented below the username may be a list of all the files the user currently has locked
    
    
 4. Click Refresh List to refresh the list of users and locked files
    
    
 5. Click Close to exit the Server Manager


image [/support/docview.wss?uid=swg21389162&aid=2] [/support/docview.wss?uid=swg21389162&aid=2]

It is important to remember that removing connections should be the last resort due to the high risk of corrupting the database if you disconnect the user during a save operations. 






 Back to top 

 

III. Unlock system locked files in the database: 

 

The DBSAdmin tool will allow you to unlock files which have system locks on them. 
For example, when you open a module, you have to read all the files in the module directory from the server to the client and store them in memory. The DOORS database server reads each file and for the length of time it takes to be read, a system lock will be in place. 

Associated with locked files are state indicators for the type of lock [R] for READ 
when opening modules 

image 

[/support/docview.wss?uid=swg21389162&aid=3] [/support/docview.wss?uid=swg21389162&aid=3]




[W] for Write when saving modules 

image
[/support/docview.wss?uid=swg21389162&aid=4] [/support/docview.wss?uid=swg21389162&aid=4]


Click Unlock File to release a persistent lock. 
You will be prompted to confirm the action 


image 

[/support/docview.wss?uid=swg21389162&aid=5] [/support/docview.wss?uid=swg21389162&aid=5]




 

In case of a system crash there might be some file system lock files that can lock a module;
this can be cleared using the DBSAdmin tool 

image 

[/support/docview.wss?uid=swg21389162&aid=6] [/support/docview.wss?uid=swg21389162&aid=6]



You also can use the dbadmin command to manage the DOORS database server: 

Use the following command: 


dbadmin -data port@computer [switches]


List of parameters that can be passed as arguments: Command line switches [http://pic.dhe.ibm.com/infocenter/doorshlp/v9/index.jsp?topic=%2Fcom.ibm.doors.administering.doc%2Ftopics%2Fc_dbadmincommandswitches.html]