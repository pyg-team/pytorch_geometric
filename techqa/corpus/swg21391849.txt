Title: IBM Traps from Proviso Self-Monitoring AP appears as 1.1.1.1 on Omnibus Event List - United States

Text:
Omnibus; Proviso; Event List; Proviso Self-Monitoring; traps; "1.1.1.1"; THRSHEVENT; threshold; DL.1_<NULL> TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 Whenever traps sent by the Netcool/Proviso "Self Monitoring" Application Pack are displayed by the Omnibus Event List, an IP-address of "1.1.1.1" appears, as opposed to the actual IP-address of the device issuing the trap 

SYMPTOM
The IP under "Node" column on the Omnibus Event List is "1.1.1.1" for traps coming from Proviso: 

[/support/docview.wss?uid=swg21391849&amp;aid=1]




CAUSE
The IP seen in the THRSHEVENT log entries for "DL.x_<NULL>" SubElements from the Proviso Self-Monitoring AP is not in the database: 


2009.06.04-02.32.28 UTC CME.1.1-19742 I THRSHEVENT trap log : ProvisoCriticalViolationBurstThr 9.34.239.95 200000001::DL.1::DL.1_<NULL>::DL SNMP panzer(1.1)::undef::PROVISO_MONITORING::AP~PROVISO~Targets~Device SNMP Response Time (ms) (avg last hour)::41.0d::49.327356557377d::1244082600::0::813::::2::15::undef::undef::undef::undef::undef::undef::undef::200000094::15500

and therefore can't be used as a token in the "mttrapd.rule" file


DIAGNOSING THE PROBLEM
"proviso.log" shows: 


"Elmt=UNKNOWN_IP" (SubElmts={DL.1_<NULL>}):

this means there's no associated IP address to the SubElement


RESOLVING THE PROBLEM
Add property "ipAddress" to the "DL.x_<NULL>" SubElement, then add the tokenised varbind to the "mttrapd.rule" file: 


case "1110": ### - provisoCMEWarningViolationBurstThr
# SNMPv1
# Trap sent by PROVISO CME in case of a Warning Burst Violation threshold
$provisoSubElementIndex = $1
$provisoElementName = $2
$provisoSubElementName = $3
$provisoSubElementLabel = $4
$provisoSubElementCustomerLabel = $5
$provisoSubElementFamily = $6
$provisoFormulaName = $7
$provisoThresholdValue = $8
$provisoFormulaValue = $9
$provisoViolationTime = $10
$provisoDurationLimit = $11
$provisoDurationValue = $12
$provisoSLAPeriod = $13
$provisoThresholdMode = $14
$provisoPollingPeriod = $15
$provisoSubElementPropertyIpAddress =$xx
$provisoSubElementPropertyCustomer = $16
$provisoSubElementPropertyLocation = $17
$provisoSubElementPropertyArea = $18
$provisoSubElementPropertyCoS = $19
$provisoSubElementPropertyCIR = $20
$provisoSubElementPropertySpeed = $21
$provisoSubElementPropertyGeneric = $22
$provisoSubElementGroupIndex = $23
$provisoFormulaIndex = $24
@AlertGroup = "quallaby"
@Agent = "quallaby"
@Summary = $specific-trap + " " + $1 + " " + $2 + " " + $3 + " " + $4 + " " + $5 + " " + $6 + " " + $7 + " " + $8 
@Severity = 1
@Type = 0
@Identifier = @Node + @Summary