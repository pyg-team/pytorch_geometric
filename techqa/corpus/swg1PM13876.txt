Title: IBM PM13876: AFTER PM09459, MENUS EXCLUDING CURRENT CONTENT AND              MENU.INCLUDECONTENTLINKSNONSITEAREAS=FALSE THROW EXCEPTION - United States

Text:
  FIXES ARE AVAILABLE
6.1.0.5 Download: WebSphere Portal and WCM V6.1.0 fix pack 5 [http://www-01.ibm.com/support/docview.wss?uid=swg24027475]
6.1.0.6 Download: WebSphere Portal and WCM V6.1.0 fix pack 6 [http://www-01.ibm.com/support/docview.wss?uid=swg24030970]
7.0.0.2 Download: WebSphere Portal and WCM V7.0 fix pack 2 [http://www-01.ibm.com/support/docview.wss?uid=swg24031676]


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  After PM09459 [http://www-01.ibm.com/support/docview.wss?uid=swg1PM09459], menus excluding current content and
   menu.includeContentLinksNonSiteAreas=false throw exception
   
   Specifically, DB2 exception thrown when using DB z/OS:
   
   [3/24/10 17:38:32:672 CET] 0000003c Query E
   
   com.ibm.icm.da.portable.query.Query openQueryCursor()
   com.ibm.db2.jcc.c.SqlException: DB2 SQL error: SQLCODE: -302,
   SQLSTATE:
   22001, SQLERRMC: 4
   com.ibm.db2.jcc.c.SqlException: DB2 SQL error: SQLCODE: -302,
   SQLSTATE:
   22001, SQLERRMC: 4
   at com.ibm.db2.jcc.c.tf.e(tf.java:1680)
   
   This occurs because WCM not removing link specific node
   attribute from the xpath query when using the
   
   menu.includeContentLinksNonSiteAreas=false
   
   
    
   
   

LOCAL FIX

PROBLEM SUMMARY
 *  AFTER PM09459 [http://www-01.ibm.com/support/docview.wss?uid=swg1PM09459], MENUS EXCLUDING CURRENT CONTENT AND
   MENU.INCLUDECONTENTLINKSNONSITEAREAS=FALSE THROW EXCEPTION
   
   This only happens on DB z/OS
   
   Specifically, DB2 exception thrown when using DB z/OS:
   
   [3/24/10 17:38:32:672 CET] 0000003c Query E
   
   com.ibm.icm.da.portable.query.Query openQueryCursor()
   com.ibm.db2.jcc.c.SqlException: DB2 SQL error: SQLCODE: -302,
   SQLSTATE:
   22001, SQLERRMC: 4
   com.ibm.db2.jcc.c.SqlException: DB2 SQL error: SQLCODE: -302,
   SQLSTATE:
   22001, SQLERRMC: 4
   at com.ibm.db2.jcc.c.tf.e(tf.java:1680)
   
   This occurs because WCM not removing link specific node
   attribute from the xpath query when using the
   
   menu.includeContentLinksNonSiteAreas=false
   
   
    
   
   

PROBLEM CONCLUSION
 *  WCM Changed to take the xpath query change into account
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   PM13876
   
   
 * REPORTED COMPONENT NAME
   WEBSPHERE PORTA
   
   
 * REPORTED COMPONENT ID
   5724E7600
   
   
 * REPORTED RELEASE
   610
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2010-05-06
   
   
 * CLOSED DATE
   2010-05-06
   
   
 * LAST MODIFIED DATE
   2010-05-06
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   WEBSPHERE PORTA
   
   
 * FIXED COMPONENT ID
   5724E7600
   
   

APPLICABLE COMPONENT LEVELS
 * R615 PSY
   UP
   
   
 * R61A PSY
   UP