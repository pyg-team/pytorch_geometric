Title: IBM New syndication pair created on 8001 CF06 or CF07 fails to syndicate if the subscriber is a virtual portal with a different hostname. - United States

Text:
 TECHNOTE (TROUBLESHOOTING)

PROBLEM
 

New syndication pair created on 8001 CF06 or CF07 fails to syndicate if the subscriber is a virtual portal with a different hostname.


SYMPTOM
 

Syndication does not work when a new syndication pair is created on 8001 CF06 or CF07 and the subscriber is a virtual portal with a different hostname. Even though the syndicator and subscriber is created successfully, all syndication updates will fail.

Note: Any existing syndication pair created before applying CF06/CF07 will continue to work as expected.

The following errors will be seen in the SystemOut log on the subscriber server whenever syndication is initiated:
AbstractConne W Syndication exception occurred during response: com.aptrix.syndication.SyndicationException: Message: IWKWC0004I: Code #405, phrase: Unrecognized sender, detail: Failed to retrieve subscriber.
Cause: com.ibm.workplace.wcm.services.content.ItemNotFoundException: Failed to find controllable{746aeb11-629d-4759-9865-aeb754e094ea, com.aptrix.pluto.control.Controllable}in vp instance: 0 with context pathnull and hostname: null)
AbstractConne E Syndication exception occurred while processing error response: java.lang.NullPointerException
webapp E com.ibm.ws.webcontainer.webapp.WebApp logServletError SRVE0293E: [Servlet Error]-[WCM Framework]: com.ibm.ws.webcontainer.webapp.WebAppErrorReport: SRVE0295E: Error reported: 500
at com.ibm.ws.webcontainer.webapp.WebAppDispatcherContext.sendError(WebAppDispatcherContext.java:626)
at com.ibm.ws.webcontainer.webapp.WebAppDispatcherContext.sendError(WebAppDispatcherContext.java:656)
at com.ibm.ws.webcontainer.srt.SRTServletResponse.sendError(SRTServletResponse.java:1236)
at com.ibm.ws.webcontainer.srt.SRTServletResponse.sendError(SRTServletResponse.java:1210)
at com.presence.connect.ServletClient.sendResponse(ServletClient.java:481)
at com.presence.connect.ConnectServlet.process(ConnectServlet.java:317)
at com.presence.connect.ConnectServlet.doPost(ConnectServlet.java:140)

The following errors will be seen in the SystemOut log on the syndicator server:
UpdateSyndica E Could not update syndicator with name sample_syndicator
com.aptrix.deployment.DeploymentException: Message: IWKWC0004I: Code #300, phrase: Generic payload error, detail: Response code was not OK: 500,
Cause: com.aptrix.syndication.messaging.GenericPayloadException: IWKWC0004I: Code #300, phrase: Generic payload error, detail: Response code was not OK: 500
at com.aptrix.deployment.syndicator.PlutoSyndicatorImpl.sendUpdateRequest(PlutoSyndicatorImpl.java:531)
at com.ibm.workplace.wcm.app.ui.admin.syndicator.UpdateSyndicatorCommand.doCommand(UpdateSyndicatorCommand.java:173)
at com.ibm.workplace.wcm.app.ui.portlet.command.AbstractCommand.commandPerformed(AbstractCommand.java:217)
.....
Caused by: com.aptrix.syndication.messaging.GenericPayloadException: IWKWC0004I: Code #300, phrase: Generic payload error, detail: Response code was not OK: 500
at com.aptrix.syndication.messaging.HttpMessaging.sendIceHttpRequest(HttpMessaging.java:89)
at com.aptrix.syndication.business.AbstractRequestBL.sendRequest(AbstractRequestBL.java:107)
at com.aptrix.syndication.business.AbstractRequestBL.sendRequest(AbstractRequestBL.java:87)
at com.aptrix.syndication.business.AbstractRequestBL.sendRequest(AbstractRequestBL.java:76)
at com.aptrix.syndication.business.syndicator.RequestBL.getCurrentState(RequestBL.java:94)
at com.aptrix.syndication.business.syndicator.SyndicatorTaskManager.addSubscriptionUpdate(SyndicatorTaskManager.java:899)
at com.aptrix.deployment.syndicator.PlutoSyndicatorImpl.sendUpdateRequest(PlutoSyndicatorImpl.java:495)


CAUSE
 

The generated subscriber URL that is stored on the syndicator object incorrectly uses the hostname of the base Portal instance of the subscriber server instead of the subscriber virtual portal hostname.


RESOLVING THE PROBLEM
 

Interim fix PM95142 has been created to address this issue. This fix will be integrated into Combined WP & WCM CF08 for 8001.

Temporary workaround:
After the new syndicator pair is created, manually edit the syndicator object and correct the Subscriber URL field using the hostname of the subscriber virtual portal.
eg: subscriber_vp_hostname:10039/wps/wcm/connect/?MOD=Subs



Cross reference information Segment Product Component Platform Version Edition Enterprise Content Management Workplace Web Content Management Replication & Syndication AIX, Linux, Windows