Title: IBM Failover polling does not generate events with ITNM - United States

Text:
conf.key; failover; virtualdomain TECHNOTE (TROUBLESHOOTING)

THIS DOCUMENT APPLIES ONLY TO THE FOLLOWING LANGUAGE VERSION(S):
 English 

PROBLEM(ABSTRACT)
 When primary ITNM is running poller creates events in the objectserver. When it fails over to the backup this appears to stop. 

SYMPTOM
Polling should be identical


ENVIRONMENT
On closer examination it appears that ping polling works, snmp polling does not 

This configuration environment is shared ncim for failover. This can be determined from the $NCHOME/etc/precision/ConfigItnm.DOMAIN.cfg file.


DIAGNOSING THE PROBLEM
Looking at raw capture, or ITNM poller, events are shown as 'snmp timeout'. Also "failed to decode" messages are in the backup poller.



RESOLVING THE PROBLEM
This is a key encryption problem. The backup poller is taking passwords from the shared ncim and not able to decrypt them. Several changes are necessary now since the ITNM has already been configured. 

Stop ITNM on the backup. 

Make a copy of the $NCHOME/etc/security/keys/conf.key on the backup. 

Copy this file from the primary ITNM server to the backup ITNM server. 

Make copies of the $NCHOME/etc/precision DbLogins.DOMAIN.cfg and MibDbLogin.DOMAIN.cfg on the backup. 

Make sure the passwords in DbLogins and MibDbLogin file are known! 

Edit the $NCHOME/etc/precision DbLogins.DOMAIN.cfg file and MibDbLogin file and remove the encrypted passwords. 

Run ncp_crypt -password against the password, and add the new encrypted strings back into DbLogins and MibDbLogin. 

Now start the backup ITNM again. 

The passwords will now be correctly decrypted by the poller. Existing encrypted passwords have also been regenerated on the backup for connection to ncim.