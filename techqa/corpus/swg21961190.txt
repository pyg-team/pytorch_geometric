Title: IBM SQL1598N connecting to DB2 for z/OS from DB2 Connect even though db2connectactivate has been done - United States

Text:
sql1598; sql0804; FFFFFCDC; db2connectactivate; downlevel; license error; i-Series; AS400 TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 Even after using db2connectactivate to enable non-LUW (DB2 z/OS, i-Series (AS400), VM/VSE) system for server based licensing for DB2 Clients, the following error may be encountered from a remote connection from a DB2 Client.

SQL1598N An attempt to connect to the database server failed because of a licensing problem. 

SYMPTOM
Additional symptoms: 

(A) Not applicable. 

(B) DB2 traces will show FFFFFCDC or DCFCFFFF which using db2diag -rc FFFFFCDC [https://www.ibm.com/support/knowledgecenter/SSEPGG_11.1.0/com.ibm.db2.luw.admin.cmd.doc/doc/r0011728.html] translates to SQL0804N 


SQL0804N The application program parameters for the current request are
not valid. Reason code "<reason-code>". If a host variable or
SQLVAR in the SQLDA is invalid then: host variable/SQLVAR number =
"<var-number>", SQLTYPE = "<sqltype>", SQLLEN = "<LEN>", host
variable/SQLVAR type = "<input-or-output>".


CAUSE
 

Root cause could be one of the following:

(A) DB2 Connect license release is older than DB2 client release

In the documentation for db2connectactivate [http://www.ibm.com/support/knowledgecenter/SSEPGG_10.5.0/com.ibm.db2.luw.licensing.doc/doc/r0057377.html?cp=SSEPGG_10.5.0&lang=en]it states: "You can install only one DB2 Connect license. If you are using multiple DB2 Connect versions, you must install the license for the highest version of DB2 Connect."

So for example:
db2connectactivate from 9.7 will allow only 9.7 client. 
db2connectactivate from 10.1 will allow 10.1 and 9.7 clients.
db2connectactivate from 10.5 will allow 10.5, 10.1 and 9.7 clients
etc...

(B) Operating system network configuration issue

When DB2 client connects to non Linux/Unix/Windows like DB2 z, i-Series, etc... it calls a stored procedure with parameters containing hostname and IP address of the DB2 client. In some cases these will be empty due to operating system configuration issue outside of DB2's control thus causing the stored procedure to fail.

The operating system should be able to translate host name to IP address and vice versa.

Unix/Linux:
nslookup <DB2 client hostname>
host <DB2 client IP address>

Windows:
nslookup <DB2 client hostname>
nslookup <DB2 client IP address>

Re-test connectivity, if a DB2 license has bee installed in the <Data Server Client>/license subdirectory it can be bypassed using "-useserverlic".

db2cli [https://www.ibm.com/support/knowledgecenter/SSEPGG_11.1.0/com.ibm.db2.luw.admin.cmd.doc/doc/r0002045.html] validate -database SAMPLEDB:test.ibm.com:446 -connect -useserverlic -user db2inst1 -passwd xxxxxxx




RESOLVING THE PROBLEM
 

(A) Run db2connectactivate from a release higher or the same level as your DB2 client release. 

(B) Contact your system administrator to resolve this operating system issue. 

Can work around by adding DNS entry or modifying /etc/host file to contain host name and IP address of DB2 Client. 

Unix/Linux: /etc/hosts 

Windows: C:\Windows\System32\drivers\etc\hosts 

 




Cross reference information Segment Product Component Platform Version Edition Information Management DB2 Connect