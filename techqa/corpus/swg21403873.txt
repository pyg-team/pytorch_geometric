Title: IBM RMIC Errors during Deploy/Prepare for Deployment for EJB Projects - United States

Text:
rmic; jdk; ejbdeploy; prepare; deploy TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 RMIC Errors during Deploy/Prepare for Deployment for EJB Projects 

SYMPTOM
When invoking the Deploy (Rational Application Developer 6) or Prepare for Deployment (IBM Rational Application Developer 7 and above) action you may see RMIC errors like the following in the error dialog (under Details) and/or in <Workspace>/.metadata/.log: 

java.lang.NoSuchFieldError: 
com/ibm/CORBA/iiop/PartnerVersion.UNKNOWN 
at com.ibm.rmi.util.RepositoryId.<clinit>(RepositoryId.java:162) 
at java.lang.Class.initializeImpl(Native Method) 
at java.lang.Class.initialize(Class.java:339) 
at com.ibm.tools.rmic.iiop.Type.setRepositoryID(Type.java:1030) 

or

java.lang.NoSuchMethodError: com/ibm/jtc/orb/map/CacheFactory.create(Lcom/ibm/jtc/orb/map/MapFactory;Lcom/ibm/jtc/orb/map/ObjectFactory;)Lcom/ibm/jtc/orb/map/Cache;

or

error: Could not load class <class A>.
error: Class <class B> contains an invalid return type.



CAUSE
Changes or defects in the JDK of the targeted WebSphere Application Server which causes breakage when used with the JDK of Rational Application Developer.



DIAGNOSING THE PROBLEM
In the V7.0.0.9 and V7.5.3 Rational Application Developer fixpack releases a new preference (Window> Preferences > Java EE > WebSphere Application Server > Always run RMIC in a separate process) was introduced. This preference will cause the RMIC process to always use the JDK of the targeted WebSphere Application Server.



RESOLVING THE PROBLEM
There are multiple solutions to resolving this problem: 

 

 1. For Rational Application Developer V7.0.0.9 and 7.5.3 or newer, the preference Always run RMIC in a separate process may resolve the issue. 
 2. For Rational Application Developer version 6.0.x, contact IBM support for a test fix. 
 3. If there is a dependent JAR file that contains the Javaâ„¢ source files which are newer than the corresponding .class files, the "Could not load class" errors may still occur even with the preference Always run RMIC in a separate process. In that case, update the WebSphere Application Server JDK to the latest level or contact IBM Support for iFix for IZ60215.