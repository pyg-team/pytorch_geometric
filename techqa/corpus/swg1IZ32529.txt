Title: IBM IZ32529: PLOT CHART LEGEND INCORRECT AFTER AGENT STOP/START - United States

Text:
 SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  Severity: 3
   Approver: BS
   Compid:  5724C04EP Tivoli Enterprise Portal
   Abstract: Plot chart legend incorrect after agent stop/start
   
   Environment:
   TEMS/TEPS: AIX 5.3 - ITM 6.2 FP01
   TEP:       Windows 2003 - ITM 6.2 FP01 (using Java Web Start)
   Agent:     OMEGAMON XE 4.2 for z/OS, ITM 6.2 FP01 Unix OS agent
              for AIX 5.3
   
   Problem Description:
   Customer creates a plot chart view to have two Agents' data
   drawn simultaneously in one window with refreshing every 30
   seconds.  For detailed steps of creating the workspace, please
   refer to the "Detailed Recreation Procedure:" below.   When two
   agents are online, two plot charts are drawn in the view as
   expected.  From this situation, this APAR addresses the
   following two symptoms of Legend in the plot chart view.
   
   Symptom #1) When one agent goes offline, the only online Agent
   continues to plot correctly.  However, after he switches to
   another workspace and then back to the plot chart view, he
   notices that instead of the expected display he now has a
   "default" display, where the Legend box has been rebuilt,
   ignoring the customization he made, and the line plot colour has
   changed for the online Agent.
   
   Symptom #2) When one agent goes offline, the offline Agent has
   correctly stopped plotting.  After a period of time, he notices
   that the offline Agent is removed from the plot and removed from
   the Legend box.  However, after he restarts the offline agent,
   he notices instead of the expected display he now has a
   "default" display, where the Legend box has been rebuilt,
   ignoring the customization he made, and the line plot colour has
   changed for the restarted Agent.
   
   I wrote detailed TEP operation steps with screen copies in
   "PMR_04506" and "PMR_04513" sheets in
   pmr04506_steps_to_create_problem.xls and
   pmr04513_steps_to_create_problem.xls.  Please see the sheets to
   understand the problem.
   
   Expected Result:
   Plot chart of the online agent is redrawn correctly with the
   specified color and the text in Legend box after switching the
   workspace, and also after agent is restarted.
   
   Detailed Recreation Procedure:
   The problem can be reproduced on 62fp1 or 62fp1if1 using Unix OS
   Agents on AIX5.3.  The TEP screen copies are stored in
   pmr04506_steps_to_create_problem.xls and
   pmr04513_steps_to_create_problem.xls in ECuRep.
   
   [1] Create a new Logical Navigator
   [2] Assign 2 Unix Agents
   [3] Navigate to the Enterprise Level of the new Logical
       Navigator tree
   [4] Create / amend the workspace/view to a Plot Chart
   [5] Assign the Unix OS/System/System Load Average query to the
       view
   [6] On View Properties, change the tab to 'Style'
   [7] Click on Legend graphic to display Legend props
   [8] Click on Legend Label
   [9] Amend 'Text' from existing value to new value, ie from
       'vedbaek:KUX\Load Average (1min)' to  'vedbaek'
   [10] Amend 'Color' in 'Line Style' from existing value to new
        value, ie from yellow to orange
   [11] Repeat for other Managed System in the Legend, ie from
        'soro:KUX\Load Average (1 Min) to  'soro', and from yellow
        to green
   [12] Apply and OK the changes.
   [13] Start both UNIX OS Agents.
   [14] Notice that both Agents plot correctly.
   
   Symptom #1)
   [15] Stop one of the Agents
   [16] Notice that one Agent no longer plots (correct)
   [17] Change to Enterprise Level in Logical Navigator tree
   [18] Change back to Child Level in Navigator tree
   [19] Notice that instead of the expected display we now have a
        "default" display, where the Legend box has been rebuilt,
        ignoring the customization we made in step 9 and 10 above,
        and the line plot colour has changed for the online Agent
        (different colour from that in Step 16).
   
   Symptom #2)
   [15] Stop an Agent
   [16] Notice that one Agent no longer plots (correct)
   [17] After a period of time, notice that the now offline Agent
        is removed from the plot and removed from the Legend box
   [18] Start the offline Agent
   [19] Notice that instead of the expected display we now have a
        "default" display, where the Legend box has been rebuilt,
        ignoring the customization we made in step 9 and 10 above,
        and the line plot colour has changed for the restarted
        Agent (different colour from that in Step 14).
   
   Related Files and Output:
   
   The following files are put in 04506.69C.760.20080901a.tar.Z and
   04513.69C.760.20080901a.tar.Z for each symptoms respectively.
   Directory is  ECuRep:/ecurep/pmr/0/4/04506,69C,760, or
   04513,69C,760.
   TEP: kjr.trace.params=ERROR (UNIT:Navigator ALL) (UNIT:DataBus
   ALL)(UNIT:Attribute ALL) (UNIT:Workspace ALL) (UNIT:Adapter
   ALL))(UNIT:Graph ALL)
   - pmr04506_steps_to_create_problem.xls
   - pmr04513_steps_to_create_problem.xls
   - TEP/KCJvedbaek.LOG
   - TEP/kincinfo-i.out
   - TEP/kcjerror_vedbaek.log
   - TEP/kcjras1_vedbaek.log
   
   
    
   
   

LOCAL FIX

PROBLEM SUMMARY
 *  If the legends for a chart view are customized while it is
   charting data from two or more agents and later the number of
   online agents is reduced to one, the customizations are lost
   following a workspace switch or agent restart.
   
   The legends for a chart view are customized while it is charting
   data from two agents.  Later the number of online agents is
   reduced to one.  If the symptoms of IZ31919 [http://www-01.ibm.com/support/docview.wss?uid=swg1IZ31919] do not occur, the
   following may be observed:
   
   Variation #1:  The online agent continues to plot correctly.
   However, after the user switches to another workspace and then
   back to the one with the Plot Chart view, the legend and colors
   revert to the default settings.  This is most noticeable with
   Plot Charts of realtime data but it may affect other chart views
   as well.
   
   Variation #2:  The data for the offline agent correctly stops
   plotting and previously plotted values gradually scroll off the
   chart.  After the data for the offline agent has scrolled off,
   the legend box only contains an entry for the single online
   agent.  If the offline agent is restarted, the legend and colors
   for that agent revert to the default settings.
   
   
    
   
   

PROBLEM CONCLUSION
 *  The logic was changed to remove special handling of single-row
   result sets that was causing the association between customized
   settings and the data series to be lost when agents went online
   and offline.
   
   After installing the fix, it may be necessary to repeat the
   customization of some previously saved legend settings.  Not all
   views will be affected and it is not practical to identify those
   that could be affected because there are too may factors
   involved.  For those that are impacted, the settings should only
   need to be re-customized the first time the affected view is
   visited after the fix has been installed.  For views displaying
   data from more than one managed system, the customizations
   should be done while all the managed systems providing data to
   the view are online.
   
   
   The fix for this APAR is contained in the following maintenance
   packages:
   
      | interim fix | 6.2.0.2-TIV-ITM-IF0001
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   IZ32529
   
   
 * REPORTED COMPONENT NAME
   TEP
   
   
 * REPORTED COMPONENT ID
   5724C04EP
   
   
 * REPORTED RELEASE
   620
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2008-09-17
   
   
 * CLOSED DATE
   2009-02-17
   
   
 * LAST MODIFIED DATE
   2009-02-17
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   TEP
   
   
 * FIXED COMPONENT ID
   5724C04EP
   
   

APPLICABLE COMPONENT LEVELS
 * R620 PSY
   UP