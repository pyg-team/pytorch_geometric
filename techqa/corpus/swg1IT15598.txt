Title: IBM IT15598: MQIPT V2.1.0.2 FAILS TO CONNECT WITH HTTPS AND SSL CONNECTION QUEUE MANAGER SHOWS ERROR AMQ9641/AMQ9616. - United States

Text:
 SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  When HTTP or HTTPS is used as a bridge between two MQIPT routes
   and the final route to the MQ queue manager is secured with
   SSL/TLS, the connection fails.
   In the MQIPT trace, the message "Input stream not available" and
   "IPTException: closeId=ERROR, closeMsg=, rc=60010" is indicated
   and the HTTP connection is closed.
   
   One or more of the following errors may also appear in the IBM
   MQ queue manager error logs:
   &#09;-AMQ9641: Remote CipherSpec error for channel
   &#09;-AMQ9616: The CipherSpec proposed is not enabled on the
   server.
   &#09;-AMQ9633: Bad SSL certificate for channel
   &#09;-AMQ9665: SSL connection closed by remote end of channel
   
   Queue manager channels show Binding, then retry, will not start.
   
   
    
   
   

LOCAL FIX
 *  An alternative connection using the MQIPT SSLProxyMode may be
   used, to SSL encrypt the channel and proxy transfer the
   encrypted packets over HTTP link between two MQIPT nodes.
   Both MQIPT routes would be set to SSLProxyMode=true and in
   addition the first MQIPT route would be set to HTTP=true with
   HTTPServer/HTTPServerPort set to the url/port of the second
   MQIPT node.
   The IBM MQ channel and authentication may be configured in the
   same was as for a channel without MQIPT in the path.
   
   
    
   
   

PROBLEM SUMMARY
 *  ****************************************************************
   USERS AFFECTED:
   Users of "IBM MQ Internet Pass-Thru" (MQIPT) using HTTP or HTTPS
   with SSL/TLS channel connection to the IBM MQ server queue
   manager.
   
   
   Platforms affected:
   MultiPlatform
   
   ****************************************************************
   PROBLEM DESCRIPTION:
   An omission in the code path for the SSL connection failed to
   correctly initialize a worker thread to handle the connection,
   which caused the the incoming HTTP stream connection to be lost
   and the channel connection to fail with an SSL error.
   
   
    
   
   

PROBLEM CONCLUSION
 *  The MQ IPT code has been changed in the case of HTTP->SSL, in
   order to correctly initialize the worker thread to handle the
   connection.
   
   ---------------------------------------------------------------
   The fix is targeted for delivery in the following PTFs:
   
   Version    Maintenance Level
   v2.1       2.1.0.3
   
   The latest available maintenance can be obtained from
   'WebSphere MQ Recommended Fixes'
   http://www-1.ibm.com/support/docview.wss?rs=171&uid=swg27006037 [http://www-1.ibm.com/support/docview.wss?rs=171&uid=swg27006037]
   
   If the maintenance level is not yet available information on
   its planned availability can be found in 'WebSphere MQ
   Planned Maintenance Release Dates'
   http://www-1.ibm.com/support/docview.wss?rs=171&uid=swg27006309 [http://www-1.ibm.com/support/docview.wss?rs=171&uid=swg27006309]
   ---------------------------------------------------------------
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   IT15598
   
   
 * REPORTED COMPONENT NAME
   WMQ BASE MULTIP
   
   
 * REPORTED COMPONENT ID
   5724H7251
   
   
 * REPORTED RELEASE
   800
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt / Xsystem
   
   
 * SUBMITTED DATE
   2016-06-06
   
   
 * CLOSED DATE
   2016-06-30
   
   
 * LAST MODIFIED DATE
   2016-07-04
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   WMQ BASE MULTIP
   
   
 * FIXED COMPONENT ID
   5724H7251
   
   

APPLICABLE COMPONENT LEVELS
 * R800 PSY
   UP