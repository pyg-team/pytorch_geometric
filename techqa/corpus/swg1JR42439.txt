Title: IBM JR42439: CMVC 220771 - handle nullpointerexception when cookie.getValue()is null and passed into URLDecoder in RuntimeServletFilter class - United States

Text:
  DIRECT LINKS TO FIXES
7.0.0.9 for Developer Express [http://www.ibm.com/support/fixcentral/quickorder?product=ibm%2FWebSphere%2FWebSphere+Commerce&fixids=7.0.0-WS-WCDeveloperExpress-FP009&source=SAR]
7.0.0.9 for Developer Professional [http://www.ibm.com/support/fixcentral/quickorder?product=ibm%2FWebSphere%2FWebSphere+Commerce&fixids=7.0.0-WS-WCDeveloperProfessional-FP009&source=SAR]
7.0.0.9 for Developer Enterprise [http://www.ibm.com/support/fixcentral/quickorder?product=ibm%2FWebSphere%2FWebSphere+Commerce&fixids=7.0.0-WS-WCDeveloperEnterprise-FP009&source=SAR]
7.0.0-WS-WCServer-FP009 [http://www.ibm.com/support/fixcentral/quickorder?product=ibm%2FWebSphere%2FWebSphere+Commerce&fixids=7.0.0-WS-WCServer-FP009&source=SAR]
WebSphere Commerce Version 7.0.0.7 Fix Pack [http://www-01.ibm.com/support/docview.wss?uid=swg24034686]
WebSphere Commerce Version 7.0.0.9 Fix Pack [http://www-01.ibm.com/support/docview.wss?uid=swg24038826]


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  Null Pointer Exception being thrown when cookie.getValue() is
   null and being passed into URLDecoder in
   RuntimeServletFilter.class
   
   [3/13/12 9:33:53:641 EDT] 0000006c webapp E
   com.ibm.ws.webcontainer.webapp.WebApp logServletError SRVE0293E:
   [Servlet Error]-[Stores Request Servlet]:
   java.lang.NullPointerException
   at java.net.URLDecoder.decode(URLDecoder.java:130)
   at
   com.ibm.commerce.webcontroller.RuntimeServletFilter.doFilter(Run
   timeServletFilter.java:249)
   at
   com.ibm.ws.webcontainer.filter.FilterInstanceWrapper.doFilter(Fi
   lterInstanceWrapper.java:188)
   at
   com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebApp
   FilterChain.java:116)
   at
   com.ibm.ws.webcontainer.filter.WebAppFilterChain._doFilter(WebAp
   pFilterChain.java:77)
   at
   com.ibm.ws.webcontainer.filter.WebAppFilterManager.doFilter(WebA
   ppFilterManager.java:908)
   at
   com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(Ser
   vletWrapper.java:934)
   at
   com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(Ser
   vletWrapper.java:502)
   at
   com.ibm.ws.webcontainer.servlet.ServletWrapperImpl.handleRequest
   (ServletWrapperImpl.java:179)
   at
   com.ibm.ws.webcontainer.servlet.CacheServletWrapper.handleReques
   t(CacheServletWrapper.java:91)
   at
   com.ibm.ws.webcontainer.WebContainer.handleRequest(WebContainer.
   java:864)
   at
   com.ibm.ws.webcontainer.WSWebContainer.handleRequest(WSWebContai
   ner.java:1583)
   at
   com.ibm.ws.webcontainer.channel.WCChannelLink.ready(WCChannelLin
   k.java:186)
   at
   com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleDiscr
   imination(HttpInboundLink.java:452)
   at
   com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleNewRe
   quest(HttpInboundLink.java:511)
   at
   com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.processRequ
   est(HttpInboundLink.java:305)
   at
   com.ibm.ws.http.channel.inbound.impl.HttpICLReadCallback.complet
   e(HttpICLReadCallback.java:83)
   at
   com.ibm.ws.tcp.channel.impl.AioReadCompletionListener.futureComp
   leted(AioReadCompletionListener.java:165)
   at
   com.ibm.io.async.AbstractAsyncFuture.invokeCallback(AbstractAsyn
   cFuture.java:217)
   at
   com.ibm.io.async.AsyncChannelFuture.fireCompletionActions(AsyncC
   hannelFuture.java:161)
   at com.ibm.io.async.AsyncFuture.completed(AsyncFuture.java:138)
   at
   com.ibm.io.async.ResultHandler.complete(ResultHandler.java:204)
   at
   com.ibm.io.async.ResultHandler.runEventProcessingLoop(ResultHand
   ler.java:775)
   at com.ibm.io.async.ResultHandler$2.run(ResultHandler.java:905)
   at com.ibm.ws.util.ThreadPool$Worker.run(ThreadPool.java:1604)
   
   
    
   
   

LOCAL FIX

PROBLEM SUMMARY
 *  USERS AFFECTED:
   Some customers use third party cookie and it can be expected to
   be null sometime and commerce code should handle this situation
   in this particular class
   
   PROBLEM ABSTRACT:
   Null Pointer Exception being thrown when cookie.getValue() is
   null and being passed into URLDecoder in
   RuntimeServletFilter.class
   
   BUSINESS IMPACT:
   Customer is not able to turn on trace because
   RuntimeServletFilter.class will throw null pointer exception
   when cookie is null
   
   RECOMMENDATION:
   
   
    
   
   

PROBLEM CONCLUSION
 *  The NPE should be handled in our code, and if cookie value is
   null, it should be printed as "cookie is null" instead of
   throwing NPE.
   
   -------------------------------------------------------------
   The latest available maintenance information can be obtained
   from the Recommended Fixes for WebSphere Commerce technote:
   http://www.ibm.com/support/docview.wss?rs=3046&uid=swg21261296 [http://www.ibm.com/support/docview.wss?rs=3046&uid=swg21261296]
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   JR42439
   
   
 * REPORTED COMPONENT NAME
   WC BUS EDITION
   
   
 * REPORTED COMPONENT ID
   5724I3800
   
   
 * REPORTED RELEASE
   700
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   YesSpecatt / Xsystem
   
   
 * SUBMITTED DATE
   2012-04-04
   
   
 * CLOSED DATE
   2012-06-25
   
   
 * LAST MODIFIED DATE
   2012-06-25
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   WC BUS EDITION
   
   
 * FIXED COMPONENT ID
   5724I3800
   
   

APPLICABLE COMPONENT LEVELS
 * R700 PSY
   UP