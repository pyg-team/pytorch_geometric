Title: IBM PK31860: DFHSN1129 ISSUED WHEN USER ATTEMPTS TO SIGNON AT ANY TERMINALS AFTER USER SHUTDOWNS TERMINAL WITHOUT SIGNOFF. - United States

Text:
z/os  A FIX IS AVAILABLE
Obtain the fix for this APAR.


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  A userid has signed on at a terminal.  After the user tries to
   shutdown the dumb terminal without signoff, the userid cannot
   signon again at any other terminal.  The following message is
   received:
   
   DFHSN1129 mm/dd/yyyy hh:mm:ss xxxxCICS Signon at netname xxxx by
   user xxxxxxxx has failed because the user is already signed on
   elsewhere.
   
   The user id has signed on at TOR CICS and then using "CRTE" to
   route to AOR CICS so that a remote terminal session is
   established.
   The MVS ENQ for the userid is not MVS DEQ when a terminal error
   (DFHZC3477) occurs in the TOR after a successful signon took
   place in the AOR under CRTE.  In fact, there is no signoff done
   when the terminal is being deleted in the AOR.
   
   
    
   
   

LOCAL FIX

PROBLEM SUMMARY
 *  ****************************************************************
   * USERS AFFECTED: All CICS users.                              *
   ****************************************************************
   * PROBLEM DESCRIPTION: Message DFHSN1129 issued when           *
   *                      attempting to sign on following         *
   *                      abnormal exit from previous             *
   *                      CRTE environment.                       *
   ****************************************************************
   * RECOMMENDATION:                                              *
   ****************************************************************
   The CESN signon transaction is transaction routed to an AOR over
   a MRO connection via CRTE. As part of SIGNON_TERMINAL_USER
   processing in the AOR an MVS ENQUEUE is obtained because
   SNSCOPE=CICS is specified.
   
   Following a terminal error the CRTE environment is destroyed in
   the TOR while a task is still attached to the terminal (either
   in a screen I/O like CEDF or executing in the AOR).
   This results in the Surrogate in the AOR being freed or reused
   without first issuing the SIGNOFF_TERMINAL_USER, therefore the
   enqueue is not released.
   
   Any further attempt to sign that user on at this or another
   terminal in that region will fail with message DFHSN1129 because
   of the outstanding MVS enqueue.
   
   Additional keywords
   msgDFHSN1129 TCTERTE TCTEERT
   
   
    
   
   

PROBLEM CONCLUSION
 *  DFHZTSP and DFHTFP have been changed to ensure
   SIGNOFF_TERMINAL_USER processing is driven when the surrogate is
   freed following the terminal error on the TOR while running
   under CRTE across an MRO connection.
   
   
    
   
   

TEMPORARY FIX
 *  FIX AVAILABLE BY PTF ONLY
   
   
    
   
   

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   PK31860
   
   
 * REPORTED COMPONENT NAME
   CICSTS 3.1 Z/OS
   
   
 * REPORTED COMPONENT ID
   5655M1500
   
   
 * REPORTED RELEASE
   400
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2006-09-25
   
   
 * CLOSED DATE
   2006-10-26
   
   
 * LAST MODIFIED DATE
   2006-11-02
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
    PK27065
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
    UK19147
   
   

MODULES/MACROS
 *     DFHTFP   DFHZTSP
   
   
    
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   CICSTS 3.1 Z/OS
   
   
 * FIXED COMPONENT ID
   5655M1500
   
   

APPLICABLE COMPONENT LEVELS
 * R400 PSY UK19147 [HTTPS://WWW14.SOFTWARE.IBM.COM/WEBAPP/SET2/ORDERMEDIA/SHOPCART?PTFS=UK19147]
   UP06/11/01 P F610
   
   

FIX IS AVAILABLE
 * SELECT THE PTF APPROPRIATE FOR YOUR COMPONENT LEVEL. YOU WILL BE REQUIRED TO SIGN IN. DISTRIBUTION ON PHYSICAL MEDIA IS NOT AVAILABLE IN ALL COUNTRIES.