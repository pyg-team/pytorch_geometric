Title: IBM IC75309: "QUIESCE TABLESPACES FOR TABLE <TABLE_NAME> RESET" FAILS TO RESET TABLESPACE STATE - United States

Text:
z/os  FIXES ARE AVAILABLE
DB2 Version 9.5 Fix Pack 8 for Linux, UNIX, and Windows [http://www-01.ibm.com/support/docview.wss?uid=swg24030302]
DB2 Version 9.5 Fix Pack 9 for Linux, UNIX, and Windows [http://www-01.ibm.com/support/docview.wss?uid=swg24032087]
DB2 Version 9.5 Fix Pack 10 for Linux, UNIX, and Windows [http://www-01.ibm.com/support/docview.wss?uid=swg24033308]


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  The problem occurs when using the QUIESCE TABLESPACES FOR TABLE
   command to quiesce a tablespace that has already been quiesced
   for a different table using a compatible mode.  Once in the
   state the "QUIESCE TABLESPACES FOR TABLE <TABLE_NAME> RESET", if
   run in a certain order, may return successfully without actually
   resetting the tablespace state.
   
   
    
   
   

LOCAL FIX
 *  1.  Issue the "GET SNAPSHOT FOR TABLESPACES ON <databaseName>"
   command and to determine the tablespace and object IDs of the
   tables for which the tablespace is quiesced along with the
   authorization ID used to quiesce the tablespace.
   
   Example output from "GET SNAPSHOT FOR TABLESPACES ON
   <databaseName>"
   
   ...
   Tablespace name                            = TS1
     Tablespace ID                            = 3
     Tablespace Type                          = Database managed
   space
     ...
     Tablespace State                        = 0x'00000001'
     Detailed explanation:
       Quiesced: SHARE
     ...
     Number of quiescers                      = 2
   
     Quiescer authorization ID                = ZTOTH
         Quiescer agent ID                    = 7
         Quiescer tablespace ID              = 3
         Quiescer object ID                  = 4
         Quiesce state                        = 1
   
     Quiescer authorization ID                = ZTOTH
         Quiescer agent ID                    = 7
         Quiescer tablespace ID              = 3
         Quiescer object ID                  = 5
         Quiesce state                        = 1
   ...
   
   
   2.  Query the SysCat.Tables catalogue table to determine the
   table names from the tablespace and object IDs.
   Examples:
   SELECT TabSchema,TabName FROM SysCat.Tables WHERE TbSpaceID=3
   AND TableID=4
   and
   SELECT TabSchema,TabName FROM SysCat.Tables WHERE TbSpaceID=3
   AND TableID=5
   Result:  The tables are ZTOTH.T1 and ZTOTH.T2.
   
   3.  Using the authorization ID in the "GET SNAPSHOT FOR
   TABLESPACES ON <databaseName>" output, connect to the database
   and issue "QUIESCE TABLESPACES FOR TABLE <TableName> RESET" for
   each of the tables.
   
   4.  Due to the bug this APAR is fixing, at least one of the
   "QUIESCE TABLESPACES FOR TABLE <TableName> RESET" will work, but
   possibly not all of them on the first try, so repeat steps 1 and
   3 until the tablespace is no longer quiesced, or simply repeat
   step 3 X times where X is the number of quiescers displayed in
   the "GET SNAPSHOT FOR TABLESPACES ON <databaseName>" output.
   
   
    
   
   

PROBLEM SUMMARY
 *  ****************************************************************
   * USERS AFFECTED:                                              *
   * All users.                                                   *
   ****************************************************************
   * PROBLEM DESCRIPTION:                                         *
   * The problem occurs when using the QUIESCE TABLESPACES FOR    *
   * TABLE command to quiesce a tablespace that has already been  *
   * quiesced for a different table using a compatible mode.      *
   * Once in the state the "QUIESCE TABLESPACES FOR TABLE         *
   * <TABLE_NAME> RESET", if run in a certain order, may return   *
   * successfully without actually resetting the tablespace       *
   * state.                                                       *
   ****************************************************************
   * RECOMMENDATION:                                              *
   * Upgrade to DB2 9.5.0.8.                                      *
   ****************************************************************
   
   
    
   
   

PROBLEM CONCLUSION
 *  The problem will be fixed in DB2 9.5.0.8.
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   IC75309
   
   
 * REPORTED COMPONENT NAME
   DB2 FOR LUW
   
   
 * REPORTED COMPONENT ID
   DB2FORLUW
   
   
 * REPORTED RELEASE
   950
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2011-03-28
   
   
 * CLOSED DATE
   2011-06-27
   
   
 * LAST MODIFIED DATE
   2011-06-27
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   DB2 FOR LUW
   
   
 * FIXED COMPONENT ID
   DB2FORLUW
   
   

APPLICABLE COMPONENT LEVELS
 * R950 PSN
   UP