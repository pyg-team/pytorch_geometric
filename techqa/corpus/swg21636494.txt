Title: IBM CRMAP7009: CCRC command "Login" failed: Error: "Unable to connect to server at URL" - United States

Text:
CTE; CCRC; ClearCase; web; WAN TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 Attempts of the IBM Rational ClearCase Remote Client (CCRC) result in error "SRVE0293E: [Servlet Error]-[ccrc]: java.lang.NullPointerException". 

SYMPTOM
IBM Rational ClearCase CM server (CCRC WAN server) runs under a 64-bit Microsoft Windows Server 2008 R2. Every ClearCase Remote Client that tries to connect to the server receives the following error message. 


CRMAP7009: CCRC command "Login" failed: Error: "Unable to connect to server at URL "http://servername/ccrc""


The systemout.log of the CCRC profile on the CCRC web server shows the following entry.

Host Operating System is Windows Server 2008 R2, version 6.1
Java version = 1.6.0, Java Compiler = j9jit26, Java VM name = IBM J9 VM
was.install.root = C:\Program Files (x86)\IBM\WebSphere\AppServer
user.install.root = C:\Program Files (x86)\IBM\RationalSDLC\common\ccrcprofile
Java Home = C:\Program Files (x86)\IBM\WebSphere\AppServer\java\jre

...

[30.04.13 10:39:41:645 CEST] 0000001c CCRCLogger W com.ibm.rational.cc.server.servlet.CcServlet getServerConfigParams CRMSV6000E:: Serverkonfigurationsparameter konnten nicht initialisiert werden
[30.04.13 10:39:41:645 CEST] 0000001c servlet E com.ibm.ws.webcontainer.servlet.ServletWrapper init Uncaught.init.exception.thrown.by.servlet
[30.04.13 10:39:41:645 CEST] 0000001c webapp E com.ibm.ws.webcontainer.webapp.WebApp logServletErrorSRVE0293E: [Servlet Error]-[ccrc]: java.lang.NullPointerException
at java.io.File.<init>(File.java:233)
at com.ibm.rational.cc.server.servlet.Util.getClearCaseInstallDir(Util.java:62)
at com.ibm.rational.cc.server.servlet.CcServerConfig.getConfigFile(CcServerConfig.java:232)
at com.ibm.rational.cc.server.servlet.CcServerConfig.<init>(CcServerConfig.java:110)
at com.ibm.rational.cc.server.servlet.CcServlet.getServerConfigParams(CcServlet.java:798)
at com.ibm.rational.cc.server.servlet.CcServlet.init(CcServlet.java:109)


CAUSE
Thie following part of the error message is pointing to the cause of the problem:



SRVE0293E: [Servlet Error]-[ccrc]: java.lang.NullPointerException
at java.io.File.<init>(File.java:233)
at com.ibm.rational.cc.server.servlet.Util.getClearCaseInstallDir(Util.java:62)



You see a null pointer exception, because getClearCaseInstallDir did not provide the required data.
In other words: the ccservlet did not find the ClearCase install or home directory.

GetClearCaseInstallDir was trying to read ProductHome from HKEY_LOCAL_MACHINE\Software\Atria. The return value was empty because the Atria key was present but did not contain the ProductHome value. This happened, because the location of the Atria registry key is as follows on 64-bit Windows. 

HKEY_LOCAL_MACHINE\Software\Wow6432Node\Atria 

GetClearCaseInstallDir will only search inHKEY_LOCAL_MACHINE\Software\Wow6432Node\Atria if the HKEY_LOCAL_MACHINE\Software\Atria key is missing.



ENVIRONMENT
IBM Rational ClearCase CCRC WAN server on 64-bit Microsoft Windows server



DIAGNOSING THE PROBLEM
Open the Windows registry by running regedt32.exe. 

Navigate to HKEY_LOCAL_MACHINE\Software and check if the Atria key is present.



RESOLVING THE PROBLEM


Disclaimer This solution contains information about modifying the system registry. Before making any modifications to the Microsoft Registry Editor, it is strongly recommended that you make a backup of the existing registry. For more information describing how to back up the registry, refer to Microsoft Knowledge Base article 256986 [http://support.microsoft.com/kb/256986]

Delete the Atria registry key: HKEY_LOCAL_MACHINE\Software\Atria 

You do not need this key on 64-bit Microsoft Windows operating systems.