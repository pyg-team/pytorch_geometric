Title: IBM Connections refused when accessing Meeting server - United States

Text:
meeting; connection; refused TECHNOTE (TROUBLESHOOTING)

PROBLEM
Note: This technote applies to IBM Sametime 8.5.2 Interim Feature Release 1. 

Anything over 200 simultaneous connections to a Meeting server will be refused.


SYMPTOM
Any time there are a large number of users attempting to perform the same action at the same time on a single Meeting server, this issue may be at play. For example, let's say 1000 users are in a meeting room where a document is being shared. The first page is being shared and discussed audibly, leading to several minutes of room inactivity. Then, the presenter moves to the tenth page in the document. Many of the users in the room may not see the new page because there were too many clients all requesting that page that were coming from a state of inactivity.


CAUSE
In Windows Server 2008, Microsoft disabled the ability to configure the Connection Backlog; therefore, the maximum backlog allowed is 200 simultaneous connection requests.



ENVIRONMENT
Sametime Meetings on Windows Server 2008



RESOLVING THE PROBLEM
A keep-alive was introduced into the Meetings Connect and web clients. This keep-alive always maintains at least one open connection between a client and a server, even during times of room inactivity. Because of this, 1000 users suddenly requesting a new slide from the server will not result in connection refusal because the connections already exist. 

By default, WebSphere sets a timeout of 60 seconds for persistent HTTP and HTTPS connections. This setting can be found by accessing the WebSphere Admin Console and going to Servers -> Server Types -> WebSphere application servers -> STMeetingServer -> Web Container Settings -> Web container transport chains. Click on "WCInboundDefault" for HTTP or "WCInboundDefaultSecure" for HTTPS. On each page, look for "Persistent timeout" under "HTTP inbound channel" to see what the timeout setting is. 

Because the WebSphere default timeout is 60 seconds, our keep-alive is set to occur every 55 seconds so that the connections always remain active. If, however, you have changed the WebSphere Inbound Persistent Connection timeout to a different value, you should change the Meetings keep-alive value so that it is just less than the persistent timeout value. This Meetings keep-alive setting is stored as a server configuration item. Using your Sametime System Console, you can change this value by editing your Meeting server configuration and changing the value for "meetingroom.keepAliveTime" (value is in milliseconds).