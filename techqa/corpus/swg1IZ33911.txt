Title: IBM IZ33911: INVALIDNAMEEXCEPTION ON ZWAS - United States

Text:
 SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  Error Message: On zWAS,  a resolve_complete_info() call for a
   remote service that is down results in a
   javax.naming.NamingException which curiously is caused by
   CORBA.MARSHAL exception as below.
   .
   Stack Trace: Context name:
   d1cell/nodes/d1node1/servers/nodeagent
      Target name: cell/clusters/d1sr02/ejb/InteropEJBHome
      Exception stack trace: javax.naming.NamingException: Error
   during
      resolve.  Root exception is org.omg.CORBA.MARSHAL: vmcid: IBM
    minor
      code: 8A6 completed: Maybe
      ..
      at com.ibm.ws390.orb.ClientDelegate.invoke(Unknown Source)
      at
   org.omg.CORBA.portable.ObjectImpl._invoke(ObjectImpl.java(Compil
   ed
      Code))
      at
   com.ibm.WsnOptimizedNaming._NamingContextStub.resolve_complete_i
   nfo(U
      nknown Source)<<<<
      ..
      at
   com.ibm.ws.naming.util.WsnInitCtx.lookup(WsnInitCtx.java:145)
      at
   javax.naming.InitialContext.lookup(InitialContext.java:361)
      ...
      Tracking up the orb trace, the cause of this MARSHAL
   exception is a ClassNotFoundException thrown for
   org.omg.CORBA.ORBPackage.InvalidHelper class. ie:
      Once the remote service is not resolved, an InvalidName
   exception is thrown.
    ExtendedMessage: ORB.locateUsingBootstrap;
   org.omg.CORBA.ORBPackage.InvalidName: Unknown object reference
   NameServiceServerRooot
    at
   com.ibm.ws390.orb.ORB.resolve_initial_references_remote_host(ORB
   .java:692)
    at com.ibm.ws390.orb.ORB.locateUsingBootstrap(ORB.java:999)
    at com.ibm.ws390.orb.ORB.objectURLToObject(ORB.java:904)
    at com.ibm.rmi.corba.ORB.string_to_object(ORB.java:3616)
    ....
   Which is caught and rethrown as a BAD_PARAM
     ExtendedMessage: FirstException.set; org.omg.CORBA.BAD_PARAM:
   could not locate rir object NameServiceServerRoot: org.omg.CORB
   Package.InvalidName: Unknown object reference
   NameServiceServerRoot  vmcid: OMG  minor code: A  completed: No
      at com.ibm.ws390.orb.ORB.locateUsingBootstrap(ORB.java:1011)
      at com.ibm.ws390.orb.ORB.objectURLToObject(ORB.java:904)
      at com.ibm.rmi.corba.ORB.string_to_object(ORB.java:3616)
      ..
      Caused by: org.omg.CORBA.ORBPackage.InvalidName: Unknown
   object reference NameServiceServerRoot
      at
   com.ibm.ws390.orb.ORB.resolve_initial_references_remote_host(ORB
   .java:692)
   When marshalling back the InvalidName exception, ORB fails with
   a CNFE on org.omg.CORBA.ORBPackage.InvalidHelper that is duly
   wrapped into a MARSHAL exception and sent back.
   ExtendedMessage: invoke Unexpected Exception;
   org.omg.CORBA.MARSHAL: ClassNotFoundException:
   org.omg.CORBA.ORBPackage.InvalidHelper (no security manager: RMI
   class loader disabled)  vmcid: IBM  minor code: 8A6  completed:
   No
      at
   com.ibm.rmi.iiop.CDRWriter.writeIDLEntity(CDRWriter.java:1992)
      ..
      Caused by: java.lang.ClassNotFoundException:
   org.omg.CORBA.ORBPackage.InvalidNameHelper (no security manager:
   RMI class loader
   led)
   .
   
   
    
   
   

LOCAL FIX
 *  Ensure that the service for which NamingException is thrown is
   actually up and available so that the exception path is not hit
   
   
    
   
   

PROBLEM SUMMARY
 *  The problem occurs because a JDK helper class needed to marshal
   an exception is not available.
   
   
    
   
   

PROBLEM CONCLUSION
 *  This defect will be fixed in:
   5.0.0 SR9
   .
   JDK has now been packaged with all the CORBA helper classes that
   were missing before.
   .
   To obtain the fix:
   Install build 20081016 or later
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   IZ33911
   
   
 * REPORTED COMPONENT NAME
   JAVA 5 ORB
   
   
 * REPORTED COMPONENT ID
   620500123
   
   
 * REPORTED RELEASE
   500
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2008-10-08
   
   
 * CLOSED DATE
   2008-10-15
   
   
 * LAST MODIFIED DATE
   2008-10-15
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   JAVA 5 ORB
   
   
 * FIXED COMPONENT ID
   620500123
   
   

APPLICABLE COMPONENT LEVELS
 * R500 PSN
   UP