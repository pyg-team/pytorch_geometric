Title: IBM ITCAM for WAS 7.1.0.x Managing Server Trap Action History > Method Trace showing 'Unknown' for SQL entries. - United States

Text:
ITCAM SQL textstring TECHNOTE (FAQ)

THIS DOCUMENT APPLIES ONLY TO THE FOLLOWING LANGUAGE VERSION(S):
 US English 

QUESTION
 What is causing the SQL entries in the method trace to show "Unknown", rather than the entire SQL? 

CAUSE
The SQL text string limit is not set high enough.

ANSWER
The SQL text string can be increased from the default value of 255. To 

increase the value, modify the aa1.properties and aa2.properties files 
on the Managing Server. The files are located in the MS_HOME/etc 
directory. 

Increase the value for the DB2_SQL_TEXTSTRING to something higher, but 
lower than 1024. 
Then restart the Managing Server. 

The stanza in the properties file will look like the following: 

# SQL_TEXTSTRING_LENGTH property below can be used to increase the 
length of SQL statements captured in the ITCAM database table 
TEXTSTRING. 
# Upper limit for this property : DB2=1024 and Oracle=1000 (Do not 
exceed this limit). 
# The default value is 255. If using multi byte character set, run 
MSHOME/etc/altertextstring2.sql script to increase the size of 
TEXTSTRING.TEXTSTRING column 
ORACLE_SQL_TEXTSTRING_LENGTH=255 
DB2_SQL_TEXTSTRING_LENGTH=255 

==

In addition,

The DB2_SQL_TEXTSTRING_LENGTH setting is used to truncate the SQL 
string, before storing it in the database table. Therefore, 
the existing data - captured before this setting was increased, will 
still show "Unknown", which is a string used in case the insert into the
table fails. 

If ARCHIVE AGENT was restarted and data recaptured - and the problem 
persisted with new method trace, then another possibility is that the 
SQL exceeds 1000 limit of TEXTSTRING field in 
the table definition, and code tries to write > 1000 characters as 
the limit used by code is DB2_SQL_TEXTSTRING_LENGTH = 1024 characters. 

You should reduce the DB2_SQL_TEXTSTRING_LENGTH to 1000 characters to 
prevent this case. 

 

PRODUCT ALIAS/SYNONYM
 ITCAM for WAS
ITCAM for AD