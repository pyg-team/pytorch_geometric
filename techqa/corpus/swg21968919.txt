Title: IBM After configuring BIRT runtime for use with ClearQuest Report Launcher, WebSphere Plug-In plugin-cfg.xml file loses CCRC WAN Server mapping context, when using these features together on a single web server host - United States

Text:
CCRC; clearcase remote client; CCRC WAN Server; CCRC WAN; WAN server; cqweb; plugin; plug-in; plugin-cfg.xml; IHS; WAS; Application Server; AppServer; BIRT; report launcher; regenerate; was console; mapping; map; context; web root PREVENTIVE SERVICE PLANNING

ABSTRACT
 This technote explains how to resolve missing info "...jsessionid" Name="/ccrc/*"/>..." in IBM WebSphere Application Server (WAS) Plug-In plugin-cfg.xml file. This omission will occur after installing the BIRT (Business Intelligence Reporting Tool) runtime into your CQ Web WAS profile, when IBM Rational ClearQuest (CQ) and IBM Rational ClearCase Remote Client (CCRC) WAN Server are already configured for use with IHS with Plug-In. 

CONTENT
Background:

Deploying a BIRT runtime (for use in environments which use CQ Data Pull reporting with BIRT technology) will cause the plugin-cfg.xml to lose an existing CCRC context root needed to map IBM HTTP Server (IHS) requests to CCRC WAN Server within a WAS profile.

CCRC WAN Server serves IBM ClearCase Team Explorer (CTE) clients and may be co-deployed on a host running the CQ Change Management (CM) server which provides CQ Web capability (a common scenario).

Prior to deploying the BIRT runtime when CCRC WAN Server and CQ Web profile are both installed as part of CQ and CC product installations onto a single host, the plugin-cfg.xml may automatically be configured with web context roots for CCRC WAN server such as:
"...jsessionid" Name="/ccrc/*"/>..."

The WebSpherePluginConfig file (plugin-cfg.xml) path is typically defined on one of the final lines in the IHS httpd.conf file. For example:
IHS httpd.conf file located in path:
C:\IBM\HTTPServer\conf\httpd.conf

The httpd.conf file lists the plugin-cfg.xml in the path for example:
C:\IBM\WebSphere\Plugins\config\webserver1\plugin-cfg.xml
as illustrated here:
Note the WebSpherePluginConfig path illustrated here is [/support/docview.wss?uid=swg21968919&aid=1] [/support/docview.wss?uid=swg21968919&aid=1]

Typical Procedure:

Note: The following instructions presume use of IHS and WAS versions 8.x.x.x.


 1.  Install ClearQuest with the CQ Web 8.0.x.x feature and Report Launcher Component where you permit IBM Installation Manager (IM) to manage the deployment of the CQ Web WAS profile ("create new profile" choice). 
 2.  After installation, check the WAS Plug-In plugin-cfg.xml file and review that it is including appropriate CQ Web context entry to map cqweb through IHS as follows:
     ...jsessionid" Name="/cqweb/*"/>... 
 3.  Install the ClearCase CCRC Server Component and note the file plugin-cfg.xml now includes both the cqweb and ccrc relevant context mapping entries as follows:
     ...jsessionid" Name="/cqweb/*"/>...
     ...jsessionid" Name="/ccrc/*"/>...
     screenshot of mappings as described above [/support/docview.wss?uid=swg21968919&aid=2] [/support/docview.wss?uid=swg21968919&aid=2] 
 4.  Setup CQ Report Launcher as documented. 
 5.  Setup the BIRT runtime per the newer preferred method in technote:
     How to use a script to deploy the BIRT runtime into the ClearQuest Report Launcher (1960057) [http://www.ibm.com/support/docview.wss?uid=swg21960057]:
     
     or the existing documented method here:http://pic.dhe.ibm.com/infocenter/cqhelp/v8r0m1/topic/com.ibm.rational.clearquest.reporting.doc/topics/t_rpt_rl4birt_instal_on_WAS.htm [http://pic.dhe.ibm.com/infocenter/cqhelp/v8r0m1/topic/com.ibm.rational.clearquest.reporting.doc/topics/t_rpt_rl4birt_instal_on_WAS.htm] 
 6.  After completing the BIRT installation, the plugin-cfg.xml correctly includes the BIRT entry as follows:
     ...jsessionid" Name="/birt/*"/>...
     though is now missing the CCRC entry that was present after deploying CCRC WAN Server in step 3 above. 
 7.  Resolving the problem
     Login to the WAS console, typically at http://serverhost:12060/ibm/console
     (by click Log in with no userid specified, or use credentials if additional WAS security is enabled).
     picture of WAS console login prompt showing userID field blank, just click Log In, or put username and password and click Log In when WAS security is enabled [/support/docview.wss?uid=swg21968919&aid=3] [/support/docview.wss?uid=swg21968919&aid=3] 
 8.  Click Environment -> Update global Web server plug-in configuration -> Overwrite.
     [/support/docview.wss?uid=swg21968919&aid=4] [/support/docview.wss?uid=swg21968919&aid=4]
     The missing entry will be included correctly. 
 9.  Download the file by clicking "view or download the current web server plug-in configuration file" or notate the path of the updated file, for example here:
     C:\IBM\RationalSDLC\ClearQuest\cqweb\cqwebprofile\config\cells\plugin-cfg.xml 
 10. Take a backup of the active webserver1 Plug-In file for example located here:
     C:\IBM\WebSphere\Plugins\config\webserver1\plugin-cfg.xml (take a backup by renaming to .old). 
 11. Replace the original plugin-cfg.xml file in the webserver1 Plug-In configuration with the copy you have updated from the WAS console, for example:
     From:
     C:\IBM\RationalSDLC\ClearQuest\cqweb\cqwebprofile\config\cells\plugin-cfg.xml
     (note recent time stamp)
     to
     C:\IBM\WebSphere\Plugins\config\webserver1\plugin-cfg.xml 
 12. Restart the IBM HTTP Server and WebSphere Application Server cqwebprofile service for changes to take affect.

 

Cross reference information Segment Product Component Platform Version Edition Software Development Rational ClearQuest CM Server Software Development Rational ClearCase CCRC WAN Server