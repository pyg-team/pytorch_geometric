Title: IBM Employing Certificate Signing Request (CSR) files for cryptographic operations - United States

Text:
datapower; verisign; certificate authority; ca; csr; certificate signing request; certificate import; certificate; certificate authority; Verisign; Thwarte; Entrust; keygen; key; private key; certificate; certificate object; indentification credentials; idcred TECHNOTE (FAQ)

QUESTION
 You would like to perform various cryptographic operations on the WebSphere DataPower appliance, including message encryption/decryption/, message signing and SSL communications. You need a cryptographic private key/public key pair that has been signed and issued by a well-known external Certificate Authority (CA) such as VeriSign, Thwarte, Entrust, etc.

You have created a Certificate Signing Request (CSR) on your external appliance to order a cert from an external Certificate Authority (CA). This created a private key file "name-privkey.pem" and a pub cert file "name-sscert.pem" in "cert:" folder. You received the cert file (.cer) file from the external CA.

How do you use this cert file from the external CA with the DataPower appliance? 

ANSWER
When you generate a key, you get a KEY file and a CSR file. Note that the CSR file from the initial key generation is not a signed key. It's an unsigned key generated at keygen time. This CSR file does not get loaded on the appliance. It needs to be sent to the external CA.

When the external CA receives your CSR, they sign it and return it to you, effectively turning it into a CERTIFICATE. This is the real certificate that you want to put on the DataPower appliance.

Following are the steps: 

 1. The "keygen" operation creates a PRIVATE KEY and a CERTIFICATE SIGNING REQUEST (CSR). 
 2. Place the PRIVATE KEY on the appliance. 
 3. Create a "Private Key" object that references the PRIVATE KEY. 
 4. Send the CERTIFICATE SIGNING REQUEST to the external CA. Do not place the CSR on the appliance. 
 5. When the external CA returns your signed CERTIFICATE, place this CERTIFICATE on the box and create a "Certificate" object that references the CERTIFICATE.


You may optionally create an "Identification Credentials" object on the appliance that references the "Private Key" and "Certificate" objects created on the appliance above. When you click the "Apply" button to create the "Identification Credentials" object, the appliance will perform a test to verify that the "Private Key" and "Certificate" match, thereby ensuring that this keypair is ready to be used. It's not necessary to do this but it's a handy check to ensure that the key/cert are ready to go.