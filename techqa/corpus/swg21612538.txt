Title: IBM System error encountered using "Add All" option from notice recipients screen - United States

Text:
 TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 System error encountered in the Atlas application when editing the recipients of a hold or release notice and the Add All option is used to include everyone from the People in Scope. 

SYMPTOM
After clicking on the "Add All" option when editing the notice recipients the system error screen is displayed. In the Atlas application logs the following error is found: 

Caused by: java.lang.NullPointerException
at com.secretseal.policyatlas.dao.LegalNoticeDAO.constructReasonQuery(LegalNoticeDAO.java:2339)


CAUSE
Some or all of the People in Scope records for the request that was selected when using the "Add All" option have data issues where they are missing the email address values.


DIAGNOSING THE PROBLEM
Identify the request ID for the People in Scope records that are being added as notice recipients. This can be done by either viewing the web URL for the notice details or the request details. Once the request ID is identified the following query can be run against the Atlas database to view the SCOPETARGET table records which make up the People in Scope for the request. 

select * from scopetarget where requestid = ?; 

Check for records where the TARGETEMAIL value is not populated. This error occurs when the email is a null value.


RESOLVING THE PROBLEM
First identify the correct email addresses for the people represented by the People in Scope records in the SCOPETARGET table that are missing the TARGETEMAIL values. 

Next based on the query from the diagnosing the problem section, the scope target ID value will be used to help update the database record. Here is the SQL update that can be used to fix the data in the SCOPETARGET table: 

update scopetarget
set targetemail = '?'
where scopetargetid = ?; 

After updating the data the changes need to be committed to the database. At that point, the error should be resolved and the notice recipients can be modified successfully. 

Note that as this solution involves manually updating the database, the DBA should be aware of the issue at hand, and appropriate backups should be taken if working on a production environment.