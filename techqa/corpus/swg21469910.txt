Title: IBM Creating virtual portal using the Virtual Portal Manager results in EJPAH2012E - United States

Text:
virtual portal; vp; role; security; WAS; websphere application server; admin; administrative; user; monitor; error; exception; EJPAH2012E; CWWMH0276E; initialize; initialise; script; xmlaccess; virtualportal; virtualportal.zip; access; permission; location; file; SCRIPT_INIT_VP; PM39581 TECHNOTE (TROUBLESHOOTING)

PROBLEM
Attempting to create a virtual portal from the Virtual Portal Manager portlet results in: 

EJPAH2012E: Can not find xmlaccess script WebSphere:assetname=VirtualPortal.zip:InitVirtualPortal.xml.



SYMPTOM
The virtual portal is created. However, when users access this virtual portal, the page just displays: 

Loading ...
This page does not support content. 

If the Portal administrator attempts to re-initialize the virtual portal from the Virtual Portal Manager portlet, the same exception (EJPAH2012E) is thrown. 

 


CAUSE
Initially, when WebSphere Portal was installed, the user "wasadmin" was used as the administrative ID for both WebSphere Application Server (WAS) and Portal. Sometime afterward, the ConfigEngine task "wp-change-portal-admin-user" was run to change the Portal administrative user from "wasadmin" to "portaladmin". The "portaladmin" is the administrative user for Portal but has no proper privileges on the WAS, thus cannot access the file used to initialize the virtual portal. 

 (In a Portal 7.0 stand-alone installation, the VirtualPortal.zip is located in the directory:

.../<profile_name>/config/cells/<cell_name>/assets/VirtualPortal.zip/aver/BASE/bin )


DIAGNOSING THE PROBLEM
Collect data as noted in the related URLs. With tracing enabled, trace.log records the following: 

 

[3/3/11 12:12:02:281 EST] 00000033 AssetMgrImpl 1 Created exportAsset 

[3/3/11 12:12:02:281 EST] 00000033 AssetMgrImpl 1 Set assetID parameter to WebSphere:assetname=VirtualPortal.zip 

... 

[3/3/11 12:12:02:531 EST] 00000033 AssetMgrImpl E Cannot process command parameters 

com.ibm.wps.portlets.managevirtualportals.utils.VpFFDCException: Cannot process command parameters 

 at com.ibm.wps.portlets.managevirtualportals.asset.AssetMgrImpl.exportAsset(AssetMgrImpl.java:462) 

 at com.ibm.wps.portlets.managevirtualportals.asset.AssetMgrImpl.getFile(AssetMgrImpl.java:219) 

... 

Caused by: com.ibm.wsspi.management.bla.op.OpExecutionException: CWWMH0276E: Authorization failure. Insufficient authority to access asset "VirtualPortal.zip". This operation requires "monitor" role on the cell or on the asset. 

 at com.ibm.ws.management.bla.commands.ADTCommand.finishOp(ADTCommand.java:294) 

 at com.ibm.ws.management.bla.commands.ADTCommand.opCompleted(ADTCommand.java:337)



RESOLVING THE PROBLEM
This issue was reported under APAR PM39581, which was released as part of Cumulative Fix CF006 for Portal 7.0.0.1, but unfortunately the WAR is not redeployed in CF06, CF07, or CF08. The WAR is properly redeployed in CF09. 


Therefore, in CF06, CF07, or CF08 to take advantage of this fix, customers should manually redeploy the WAR by copying PortalServer/ap/wp.ap.virtualportal/installableApps/ManageVirtualPortals.war to PortalServer/installableApps/ManageVirtualPortals.war and then running the ConfigEngine.sh/bat deploy-portlet-upgrade-wp.ap.virtualportal 

 

 If you cannot upgrade the Portal, the following workaround will also resolve the issue. 

Log in to the IBM® WebSphere® Integrated Solutions Console (ISC) admin console as the WAS administrative user and give the "portaladmin" "Monitor" role, which is the minimum requirement. 

 

 * Steps to add "Monitor" role for a user: 

 Go to: Users and Groups >> Administrative user roles >> Add 

 Highlight the "Monitor" role in the Role(s) box 

 Search for the user and select the user from the search results 

 Click the "Add" button 

 Click "OK". Then save to the master configuration. 

 Restart Portal 

 

After these steps, user should be able to create virtual portals using the Virtual Portal Manager portlet and to initialize the virtual portal created previously that failed to initialize.

RELATED INFORMATION
 Administering virtual portals: wp7 [http://www-10.lotus.com/ldd/portalwiki.nsf/dx/Administering_virtual_portals_wp7]
Collecting Data and Traces: Virtual Portals [https://www.ibm.com/support/docview.wss?uid=swg21451421]