Title: IBM PM54626: THE RETURN CODE FOR A BAD USERID IS MQRC_ENVIRONMENT_ERROR WHICH DOES NOT INDICATE THE ACTUAL CAUSE IS THE USERID - United States

Text:
z/os SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS FIXED IF NEXT.
    
   
   

ERROR DESCRIPTION
 *  The customer had a password that had an invalid nine characters
   userid in their WAS XML file. The error message produced for
   this prolem was very  generic i.e.
   JMSCMQ0001: WebSphere MQ call failed with compcode '2'
   ('MQCC_FAILED') reason '2012' ('MQRC_ENVIRONMENT_ERROR').
   .
   Without the trace being active it was not possible to know the
   specfic root cause. i.e. the password being passed was too
   long.
   The Change Team has reviewed the MQ V6 code in this area, and
   have determined the following:
   .
   The base component of MQ has the same code at MQ V6 and MQ V7.
   If the authenticate code used when connecting from WebSphere is
   presented with a userid and/or password greater than 8
   characters, it rejects the request with MQRC_ENVIRONMENT_ERROR.
   .
   However, looking at the Java component, I can see that the JNI
   code, which converts MQ Java requests into native MQ API
   requests, always set a length of 8 for the userid and password
   fields, even if the supplied string was longer than 8
   characters.
   .
   This would explain the difference in behavior seen by the
   customer. With the MQ V6 Java code in WebSphere, a password
   which was longer than 8 characters but had the correct value in
   the first 8 would have been accepted.
   For the MQ V7 Java code, the full length password is used, and
   the request fails if the length is greater than 8 characters.
   I agree that the reason code MQRC_ENVIRONMENT_ERROR does not
   give sufficient information to indicate a problem with the
   userid and/or password supplied.
   .
   This APAR is taken to provide a better Reason Code indicating
   the actual cause of the problem.
   
   
    
   
   

LOCAL FIX

PROBLEM SUMMARY
 *  ****************************************************************
   * USERS AFFECTED: All users of WebSphere MQ for z/OS Version 7 *
   *                 Release 0 Modification 1.                    *
   ****************************************************************
   * PROBLEM DESCRIPTION: JMS connections to MQ fail with         *
   *                      MQRC_ENVIRONMENT_ERROR when an invalid  *
   *                      length userid or password is supplied.  *
   ****************************************************************
   * RECOMMENDATION:                                              *
   ****************************************************************
   An application running in WebSphere Application Server specifies
   a userid and password on a JMS Connection to MQ. If the
   connection uses bindings mode and the userid or password are
   greater than eight characters, the queue manager rejects the
   connection with a reason code of 2012 (MQRC_ENVIRONMENT_ERROR).
   
   The reason code gives no indication that the problem was with
   the userid or password, so it is difficult for the user to
   determine the cause.
   
   
    
   
   

PROBLEM CONCLUSION

TEMPORARY FIX

COMMENTS
 *  This APAR is being closed FIN with agreement from the submitting
   customer.
   
   
    
   
   

APAR INFORMATION
 * APAR NUMBER
   PM54626
   
   
 * REPORTED COMPONENT NAME
   WMQ Z/OS V7
   
   
 * REPORTED COMPONENT ID
   5655R3600
   
   
 * REPORTED RELEASE
   010
   
   
 * STATUS
   CLOSED FIN
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2011-12-19
   
   
 * CLOSED DATE
   2012-01-05
   
   
 * LAST MODIFIED DATE
   2012-01-05
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION

APPLICABLE COMPONENT LEVELS
 * R010 PSN
   UP