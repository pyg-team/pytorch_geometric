Title: IBM IC77646: "ANS1715E FILESPACE ALREADY EXISTS WITH DIFFERENT VM UUID" DURING BACKUP AFTER RESTORING A VM TO ORIGINAL LOCATION. - United States

Text:
AIX SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  After a VM has been restored to its original location, backups
   will fail with the following:
   ANS1715E A filespace already exists for VM (VM_1), but with a
   different VM uuid (4233b6d6-4c1b-fbcb-17c4-bc518db7c69b) than
   the current one (4233229f-ded3-1146-1521-c220caa39ff9).
   
   
   L2 Diagnostic:
   This occurs because when a VM is restore, VMWare creates a new
   VM which will become the restore destination.  This new VM has a
   new UUID.  Starting with the TSM Client 6.2.3, the new UUID will
   be replaced during the restore with the original UUID.  However,
   in some cases, if the restore is long, the session to the
   VCenter might timeout and as a result, the TSM Client cannot
   obtain the new UUID, therefore will not rename it.
   
   
   A service trace will show the following:
   07/12/2011 10:09:34.792 [002464] [3348] : vmvisdk.cpp
     ( 826): visdkGetVmMoRefUUID: uuidRetPP is 'null'
   07/12/2011 10:09:34.792 [002464] [3348] : vmvisdk.cpp
     ( 829): <========= Exiting visdkGetVmMoRefUUID() , rc = 0
   07/12/2011 10:09:34.807 [002464] [3348] : vmrestvddk.cpp
     (1250): vmVddkRestoreVM() VM restored to the original VM
     display name; Error -1651204928 getting new uuid; uuid not
     updated.
   
   
   Versions Affected: Tivoli Storage Manager Client 6.2
   
   Initial Impact: medium
   Additional Keywords: tsm ve
   
   
    
   
   

LOCAL FIX
 *  Manually edit the configuration file for the virtual machine
   and update the value for "uuid.bios" to the original value.
   More details available here: http://kb.vmware.com/kb/1541 [http://kb.vmware.com/kb/1541]
   
   
    
   
   

PROBLEM SUMMARY
 *  ****************************************************************
   * USERS AFFECTED: Backup-archive client version 6.2 running    *
   *                 on all Microsoft Windows platforms.          *
   ****************************************************************
   * PROBLEM DESCRIPTION: See ERROR DESCRIPTION                   *
   ****************************************************************
   * RECOMMENDATION: Apply fixing level when available This       *
   *                 problem is currently projected to be fixed   *
   *                 in level 6.2.4. Note, that until the fixing  *
   *                 level is available, this information is      *
   *                 subject to change at the discretion of IBM.  *
   ****************************************************************
   *
   
   
    
   
   

PROBLEM CONCLUSION
 *  The backup-archive client now verifies that a connection
   to the vCenter exists before attempting to query the UUID
   of the newly created VM. This corrects the problem described
   in this APAR.
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   IC77646
   
   
 * REPORTED COMPONENT NAME
   TSM CLIENT
   
   
 * REPORTED COMPONENT ID
   5698ISMCL
   
   
 * REPORTED RELEASE
   62W
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2011-07-22
   
   
 * CLOSED DATE
   2011-08-31
   
   
 * LAST MODIFIED DATE
   2011-08-31
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

MODULES/MACROS
 *  DSMAGENT
   
   
    
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   TSM CLIENT
   
   
 * FIXED COMPONENT ID
   5698ISMCL
   
   

APPLICABLE COMPONENT LEVELS
 * R62W PSY
   UP