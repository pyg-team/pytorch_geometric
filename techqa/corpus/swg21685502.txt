Title: IBM InfoSphere DataStage ODBC Connector stage on the DataStage Parallel canvas intermittently aborts while connecting to the Microsoft SQL Server. - United States

Text:
SQL Server; ODBC; DataStage; job; named instance TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 IBM InfoSphere DataStage job fails with the fatal error message 'General error. select failed: 0' when connecting to the named instance of the Microsoft SQL Server with dynamic TCP/IP port assigment. 

SYMPTOM
 Item #: 911
Event ID: 910
Timestamp: YYYY-MM-DD HH:MM:SS
Type: Fatal
User Name: dsadm
Message Id: IIS-CONN-ODBC-00004
Message: JobName: ODBC function "SQLConnect" reported: SQLSTATE = HY000: Native Error Code = 0: 

Msg = [IBM(DataDirect OEM)][ODBC SQL Server Wire Protocol driver]General error. select failed: 0 (CC_OdbcConnection::connect, file CC_OdbcConnection.cpp, line 578)


CAUSE
[SQLServer Wire Protocol]
Driver=/opt/IBM/InformationServer/Server/branded_odbc/lib/VMmsss00.so
Description=DataDirect SQL Server Wire Protocol driver
Database=DatabaseName
LogonID=*******
Password=******
ConnectionReset=0
ConnectionRetryCount=3
ConnectionRetryDelay=4
Address=ServerName\InstanceName
QuotedId=No
AnsiNPW=No


ENVIRONMENT
IBM InfoSphere Information Server 9.1.2
Microsoft SQL Server 2008 R2 Service Pack2
DataDirect Release 7.0
DataDirect SQL Server Wire Protocol Driver



RESOLVING THE PROBLEM
Edit ODBC DSN Address entry depending on your Microsoft SQL Server configuration for the incoming connection requests: 


- when using Microsoft SQL Server Browser service use:
Address=ServerName,1434

- when using Microsoft SQL Server named instances configured with the fixed port use:
Address=ServerName,ServerListenerPort