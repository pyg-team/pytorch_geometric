Title: IBM JR48696: DISPLAY NAME OF SUB_LEVEL BPDS NOT ALWAYS INCLUDED IN CHANGE NOTIFICATION BROADCAST BY REPOSITORY - United States

Text:
  DIRECT LINKS TO FIXES
2.3.0.1-CSI-ISCO-IF0009 [http://www.ibm.com/support/fixcentral/quickorder?product=ibm%2FTivoli%2FIBM+SmartCloud+Orchestrator&fixids=2.3.0.1-CSI-ISCO-IF0009&source=SAR]
Version 7.5.1 Fix Pack 2 for the IBM Business Process Manager products [http://www-01.ibm.com/support/docview.wss?uid=swg24036462]
Version 8.5 Refresh Pack 5 for the IBM Business Process Manager products [http://www-01.ibm.com/support/docview.wss?uid=swg24037683]
Download Version 8.0.1 Fix Pack 3 for the IBM Business Process Manager products [http://www-01.ibm.com/support/docview.wss?uid=swg24037734]
Version 8.5.0 Fix Pack 2 for the IBM Business Process Manager products [http://www-01.ibm.com/support/docview.wss?uid=swg24040683]


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  Due to performance consideration, displayName of sub-level bpds
   are not always included in the change notifications that are
   broadcasted by repository. When these changes are merged into
   client's local model, the displayName of client model is
   incorrectly removed and causing subsequent save issue.
   Typical symptoms:
   Unable to save BPD.
   Unable to view snapshot.
   Typical error messages seen in the SystemOut.log:
   ----------
   Server restart helps the issue for a period of time.
   Caused by: java.lang.IllegalArgumentException: Starting
   snapshot does not exist at
   com.lombardisoftware.server.ejb.persistence.versioning.SnapshotC
   ontextManager.findBaseSnapshot(SnapshotContextManager.java:226)
   at
   com.lombardisoftware.server.ejb.persistence.versioning.SnapshotC
   ontextManager.acquireSnapshotContext(SnapshotContextManager.java
   :320)
   at
   com.lombardisoftware.server.ejb.persistence.versioning.BranchCon
   textImpl.readAccess(BranchContextImpl.java:161)
   at
   com.lombardisoftware.server.ejb.persistence.versioning.BranchMan
   ager.readAccess(BranchManager.java:215)
   at
   com.lombardisoftware.server.ejb.persistence.PersistenceServicesC
   ore.getVersionSummaryId(PersistenceServicesCore.java:829)
   at sun.reflect.GeneratedMethodAccessor85.invoke(Unknown Source)
   ----------
   ----------
   CWLLG2229E: An exception occurred in an EJB call.  Error:
   Snapshot.75f9ba4e-08ad-4a19-b0a9-1cdac649a208
   
   com.lombardisoftware.client.persistence.common.ObjectNotFoundExc
   eption: Snapshot.75f9ba4e-08ad-4a19-b0a9-1cdac649a208
    at
   com.lombardisoftware.client.persistence.common.versioning.Versio
   ningContext$Snapshot.getBranchId(VersioningContext.java:310)
    at
   com.lombardisoftware.server.ejb.persistence.versioning.BranchMan
   ager.readAccess(BranchManager.java:215)
    at
   com.lombardisoftware.server.ejb.persistence.PersistenceServicesC
   ore.findByFilter(PersistenceServicesCore.java:266)
    at sun.reflect.GeneratedMethodAccessor199.invoke(Unknown
   Source)
    at
   sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethod
   AccessorImpl.java:37)
    at java.lang.reflect.Method.invoke(Method.java:611)
   ----------
   Oracle specific:
   ----------
   CWLLG2229E: An exception occurred in an EJB call.  Error:
   PreparedStatementCallback;
   SQL [insert into LSW_BPD (BPD_ID,VERSION_ID,RESTRICTED_NAME,
   TIME_SCHEDULE_TYPE,TIME_SCHEDULE_NAME,TIME_SCHEDULE_EXPRESSION,
   HOLIDAY_SCHEDULE_TYPE,HOLIDAY_SCHEDULE_NAME,HOLIDAY_SCHEDULE_EXP
   RESSION,TIMEZONE_TYPE,TIMEZONE,TIMEZONE_EXPRESSION,NAME,DESCRIPT
   ION,TYPE,PARENT_FLOW_OBJECT_ID,GUID,LAST_MODIFIED,ROOT_BPD_ID,PA
   RENT_BPD_ID,TEMPLATE_ID,LAST_MODIFIED_BY_USER_ID,PARTICIPANT_REF
   ,BUSINESS_DATA_PARTICIPANT_REF,PERF_METRIC_PARTICIPANT_REF,DATA,
   XML_DATA,IS_TRACKING_ENABLED,IS_SPC_ENABLED,IS_CRITICAL_PATH_EN
   AB LED)
   values(?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?
   ,?,? ,?)]; Cannot insert the value NULL into column 'NAME',
   table 'BPMDB. LSW_BPD'; column does not allow nulls. INSERT
   fails.; nested exception is java.sql.BatchUpdateException:
   Cannot insert the value NULL into column 'NAME', table
   'BPMDB.LSW_BPD'; column does not allow nulls. INSERT fails.
   ----------
   DB2 specific:
   ----------
   CWLLG2229E: An exception occurred in an EJB call.  Error:
   PreparedStatementCallback; SQL [insert into LSW_BPD
   (BPD_ID,VERSION_ID,RESTRICTED_NAME,TIME_SCHEDULE_TYPE,TIME_SCHED
   ULE_NAME,TIME_SCHEDULE_EXPRESSION,HOLIDAY_SCHEDULE_TYPE,HOLIDAY_
   SCHEDULE_NAME,HOLIDAY_SCHEDULE_EXPRESSION,TIMEZONE_TYPE,TIMEZONE
   ,TIMEZONE_EXPRESSION,NAME,DESCRIPTION,TYPE,PARENT_FLOW_OBJECT_ID
   ,GUID,LAST_MODIFIED,ROOT_BPD_ID,PARENT_BPD_ID,TEMPLATE_ID,LAST_M
   ODIFIED_BY_USER_ID,PARTICIPANT_REF,BUSINESS_DATA_PARTICIPANT_REF
   ,PERF_METRIC_PARTICIPANT_REF,DATA,XML_DATA,IS_TRACKING_ENABLED,I
   S_SPC_ENABLED,IS_CRITICAL_PATH_ENABLED) values
   (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)];
   Error for batch element #1: DB2 SQL Error: SQLCODE=-407,
   SQLSTATE=23502, SQLERRMC=TBSPACEID=2, TABLEID=14, COLNO=18,
   DRIVER=4.11.69; nested exception is
   com.ibm.db2.jcc.am.SqlIntegrityConstraintViolationException:
   Error for batch element #1: DB2 SQL Error: SQLCODE=-407,
   SQLSTATE=23502, SQLERRMC=TBSPACEID=2, TABLEID=14, COLNO=18,
   DRIVER=4.11.69
   
   com.lombardisoftware.client.delegate.BusinessDelegateException:
   PreparedStatementCallback; SQL [insert into LSW_BPD
   (BPD_ID,VERSION_ID,RESTRICTED_NAME,TIME_SCHEDULE_TYPE,TIME_SCHED
   ULE_NAME,TIME_SCHEDULE_EXPRESSION,HOLIDAY_SCHEDULE_TYPE,HOLIDAY_
   SCHEDULE_NAME,HOLIDAY_SCHEDULE_EXPRESSION,TIMEZONE_TYPE,TIMEZONE
   ,TIMEZONE_EXPRESSION,NAME,DESCRIPTION,TYPE,PARENT_FLOW_OBJECT_ID
   ,GUID,LAST_MODIFIED,ROOT_BPD_ID,PARENT_BPD_ID,TEMPLATE_ID,LAST_M
   ODIFIED_BY_USER_ID,PARTICIPANT_REF,BUSINESS_DATA_PARTICIPANT_REF
   ,PERF_METRIC_PARTICIPANT_REF,DATA,XML_DATA,IS_TRACKING_ENABLED,I
   S_SPC_ENABLED,IS_CRITICAL_PATH_ENABLED) values
   (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)];
   Error for batch element #1: DB2 SQL Error: SQLCODE=-407,
   SQLSTATE=23502, SQLERRMC=TBSPACEID=2, TABLEID=14, COLNO=18,
   DRIVER=4.11.69; nested exception is
   com.ibm.db2.jcc.am.SqlIntegrityConstraintViolationException:
   Error for batch element #1: DB2 SQL Error: SQLCODE=-407,
   SQLSTATE=23502, SQLERRMC=TBSPACEID=2, TABLEID=14, COLNO=18,
   DRIVER=4.11.69
    at
   com.lombardisoftware.client.delegate.BusinessDelegateException.a
   sBusinessDelegateException(BusinessDelegateException.java:46)
    at
   com.lombardisoftware.client.delegate.PersistenceServicesDelegate
   Default.save(PersistenceServicesDelegateDefault.java:631)
    at
   com.lombardisoftware.server.ejb.clientservices.LibrarySupport$10
   .call(LibrarySupport.java:449)
    at
   com.lombardisoftware.server.ejb.clientservices.LibrarySupport$10
   .call(LibrarySupport.java:416)
    at
   com.lombardisoftware.server.ejb.persistence.versioning.BranchMan
   ager$2.withWriteAccess(BranchManager.java:308)
    at
   com.lombardisoftware.server.ejb.persistence.versioning.BranchCon
   textImpl.writeAccessWithDBLock(BranchContextImpl.java:556)
    at
   com.lombardisoftware.server.ejb.persistence.versioning.BranchCon
   textImpl.writeAccessInTransaction(BranchContextImpl.java:492)
   ----------
   
   
    
   
   

LOCAL FIX
 *  Restarting the server.
   
   
    
   
   

PROBLEM SUMMARY
 *  ==>The display name is not always included in the change
   notifications for BPDs that are broadcasted by repository.
   
   EDITIONS AFFECTED:
   ==>IBM Business Process Manager V7.5.1 to V8.5.0.1 Advanced,
   Standard, and Express
   
   PROBLEM DETAILED DESCRIPTION:
   ==>When Process Designer handles these notifications where
   display name value is null, the display name of local sublevel
   BPD model is also set to null. If you later try to save this
   sublevel BPD again, the save operation fails with a data
   integrity violation because the repository does not accept a
   null display name. Subsequent attempts to save the BPD also fail
   and the starting snapshot missing error is displayed.
   
   
    
   
   

PROBLEM CONCLUSION
 *  ==>A fix is available for IBM BPM versions,
   
   7.5.1.0
   8.0.1.1
   8.0.1.2
   8.5.0.0
   8.5.0.1
   
   that includes logic to check and handle null display names to
   ensure that they are added in the notification handling code of
   Process Designer and, therefore, prevent the display name from
   being removed from the local model.
   
   On Fix Central (http://www.ibm.com/support/fixcentral), search
   for JR48696 by:
   
   1. Select the product group, product, installed version, and
   platform, and click Continue.
   2. Select APAR or SPR, enter JR48696, and click Continue.
   
   When downloading fix packages, ensure that you also download the
   readme file for each fix. Review each readme file for additional
   installation instructions and information about the fix.
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   JR48696
   
   
 * REPORTED COMPONENT NAME
   BPM ADVANCED
   
   
 * REPORTED COMPONENT ID
   5725C9400
   
   
 * REPORTED RELEASE
   850
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt / Xsystem
   
   
 * SUBMITTED DATE
   2013-12-03
   
   
 * CLOSED DATE
   2013-12-19
   
   
 * LAST MODIFIED DATE
   2014-04-24
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   BPM ADVANCED
   
   
 * FIXED COMPONENT ID
   5725C9400
   
   

APPLICABLE COMPONENT LEVELS
 * R850 PSY
   UP