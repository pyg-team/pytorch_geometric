Title: IBM Unsupported JDK causes SRVE0255E Startup Error - United States

Text:
TPAEWEBSPHERE; TPAEINST TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 After deploying maximo.ear to application server and starting up, cannot log into Maximo. In SystemOut.log, sees error message SRVE0255E. 

SYMPTOM
Error in SystemOut.log: 

 *  ...
   [2/14/17 23:16:37:501 UTC] 0000007e CompositionUn A WSVR0190I: Starting composition unit WebSphere:cuname=MAXIMO in BLA WebSphere:blaname=MAXIMO.
   [2/14/17 23:16:37:501 UTC] 0000007f CompositionUn A WSVR0190I: Starting composition unit WebSphere:cuname=ibmasyncrsp in BLA WebSphere:blaname=ibmasyncrsp.
   [2/14/17 23:16:37:970 UTC] 0000007e wtp W org.eclipse.jst.j2ee.commonarchivecore.internal.impl.CommonarchiveFactoryImpl openNestedArchive An error occurred while opening a nested archive: invalid CEN header (bad signature)
   [2/14/17 23:16:37:970 UTC] 0000007e wtp W org.eclipse.jst.j2ee.commonarchivecore.internal.impl.CommonarchiveFactoryImpl openNestedArchive Base exception java.util.zip.ZipException: invalid CEN header (bad signature)
   at java.util.zip.ZipFile.open(Native Method)
   at java.util.zip.ZipFile.<init>(ZipFile.java:140)
   at java.util.zip.ZipFile.<init>(ZipFile.java:157)
   ... 


CAUSE
WebSphere Server JDK 1.6 cannot be used with Maximo 7.6. When installing WAS with WebSphere's installation packages, the default Java SDK is 1.6. 

After installing WebSphere Application Server using the Maximo installation packages (see Maximo Asset Management 7.6 and Maximo Asset Management Multitenancy 7.6 [http://www.ibm.com/support/docview.wss?uid=swg24038431]), when Tivoli's process automation configuration tool (the Config Tool) prepares WebSphere, it first makes Java 7 (SDK 1.7.1) the default SDK. 

Therefore, when it creates the Deployment Manager (dmgr, ctgDmgr01) and Node Agent (nodeagent, ctgAppSrv01) profile and the WebSphere application server MXServer and Web server webserver1, Java SDK 1.7.1 is the default JDK. 

To use Maximo 7.6 on WebSphere 8.5.5.3 or later, install Java SDK 1.7.1 and make it the default SDK for both dmgr and nodeagent profiles.


ENVIRONMENT
Maximo 7.6, IBM WebSphere Application Server 8.5.5



DIAGNOSING THE PROBLEM
In header of SystemOut.log, you will see, for example. Note the underlined part. 

 *  ************ Start Display Current Environment ************
   WebSphere Platform 8.5.5.11 [ND 8.5.5.11 cf111649.01] [IBMJAVA71 7.1.3.60 cf111647.02] running with process name ctgCell01\ctgNode01\MXServer and process id 2372
   Host Operating System is Windows Server 2012, version 6.2
   Java version = 1.6.0 , Java Runtime Version = pwa6460_26sr8fp35ifx-20161110_01 (SR8 FP35), Java Compiler = j9jit26, Java VM name = IBM J9 VM
   was.install.root = C:\IBM\WebSphere\AppServer
   ... 

RESOLVING THE PROBLEM
1. In the WebSphere console, shut down all Application Servers. 

2. Start an administrative Command prompt to C:\IBM\WebSphere\AppServer\profiles\ctgAppsrv01\bin. 

3. List available Java JDKs to ensure Java 7 is installed on the system. 

 * C:\IBM\WebSphere\AppServer\profiles\ctgAppsrv01\bin>managesdk.bat -listAvailable -verbose


Example output:  * CWSDK1003I: Available SDKs :
   CWSDK1005I: 
 * SDK name: 1.6_64
 * 
   - com.ibm.websphere.sdk.version.1.6_64=1.6
   - com.ibm.websphere.sdk.bits.1.6_64=64
   - com.ibm.websphere.sdk.location.1.6_64=${WAS_INSTALL_ROOT}/java
   - com.ibm.websphere.sdk.platform.1.6_64=windows
   - com.ibm.websphere.sdk.architecture.1.6_64=x86_64
   - com.ibm.websphere.sdk.nativeLibPath.1.6_64=${WAS_INSTALL_ROOT}/lib/native/win/x86_64/
   
   CWSDK1005I: 
 * SDK name: 1.7.1_64
 * 
   ...
 * 


4. List the version of Java associated with the nodeagent ctgAppsrv01.  

 * C:\IBM\WebSphere\AppServer\profiles\ctgAppsrv01\bin\managesdk.bat -listEnabledProfile -profileName ctgAppsrv01 -verbose


Example output:  * CWSDK1004I: Profile ctgAppSrv01 :
   CWSDK1006I: 
 * PROFILE_COMMAND_SDK = 1.6_64
 * 
   - com.ibm.websphere.sdk.version.1.6_64=1.6
   - com.ibm.websphere.sdk.bits.1.6_64=64
   - com.ibm.websphere.sdk.location.1.6_64=${WAS_INSTALL_ROOT}/java
   - com.ibm.websphere.sdk.platform.1.6_64=windows
   - com.ibm.websphere.sdk.architecture.1.6_64=x86_64
   - com.ibm.websphere.sdk.nativeLibPath.1.6_64=${WAS_INSTALL_ROOT}/lib/native/win/x86_64/
   CWSDK1008I: Node ctgNode01 SDK name:
 * 
 * 1.6_64
 * 
   ...
   CWSDK1009I: Server MXServer SDK name:
 * 
 * 1.6_64
 * 
   ...
   CWSDK1009I: Server webserver1 SDK name:
 * 
 * 1.6_64
 * 
   ...
   CWSDK1001I: Successfully performed the requested managesdk task.



5. Enable the ctgAppSrv01 profile to use Java 7  

 * C:\IBM\WebSphere\AppServer\profiles\ctgAppSrv01\bin>managesdk.bat -enableProfile -profileName ctgAppSrv01 -sdkName 1.7.1_64 -enableServers


6. Make Java 7 the default SDK for this profile:  

 * C:\IBM\WebSphere\AppServer\profiles\ctgAppSrv01\bin>managesdk.bat -setCommandDefault -sdkName 1.7.1_64


At startup you should now see: 

 

 * ************ Start Display Current Environment ************
 * 
 * WebSphere Platform 8.5.5.11 [ND 8.5.5.11 cf111649.01] [IBMJAVA71 7.1.3.60 cf111647.02] running with process name ctgCell01\ctgNode01\MXServer and process id 2372
 * 
 * Host Operating System is Windows Server 2012, version 6.2
 * 
 * Java version = 1.7.0
 * , Java Runtime Version = pwa6470_27sr3fp10-20150708_01 (SR3 FP10), Java Compiler = j9jit27, Java VM name = IBM J9 VM
 * 
 * ...

 

Cross reference information Segment Product Component Platform Version Edition Systems and Asset Management Maximo Asset Management Platform Independent 7.6, 7.6.0.5, 7.6.0.6, 7.6.0.7