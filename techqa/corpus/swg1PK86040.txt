Title: IBM PK86040: PROXY SERVER TROUBLESHOOTING PAGE NEEDS ADDITIONAL INFORMATION - United States

Text:
 SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS DOCUMENTATION ERROR.
    
   
   

ERROR DESCRIPTION
 *  The "Proxy server trouble shooting" topic, which is included in
   the Information Centers for WebSphere Application Server
   Version 6.1 and 7.0, needs to be updated. The topic
   needs to include a description of how to use the ulimit file
   descriptor for a Solaris operating system to prevent "Too Many
   Files Open" exceptions from occurring. A description of how to
   prevent these exceptions on an HP-UX operating system also
   needs to be added to this topic.
   
   
    
   
   

LOCAL FIX
 *  N/A
   
   
    
   
   

PROBLEM SUMMARY
 *  ****************************************************************
   * USERS AFFECTED:  This APAR affects users of IBM WebSphere    *
   *                  Application Server who are encountering     *
   *                  "Too Many Files Open" exceptions while      *
   *                  running proxy servers on either a Solaris   *
   *                  or HP-UX operating system.                  *
   ****************************************************************
   * PROBLEM DESCRIPTION: The "Proxy server troubleshooting"      *
   *                      topic, which is included in the         *
   *                      Information Centers for WebSphere       *
   *                      Application Server Versions 6.1 and     *
   *                      7.0, do not provide sufficient          *
   *                      information to help a user prevent      *
   *                      "Too Many Files Open" exceptions from   *
   *                      occurring. These exceptions occur when  *
   *                      you are running a WebSphere             *
   *                      Application Server proxy server on an   *
   *                      HP-UX or Solaris operating system.      *
   ****************************************************************
   * RECOMMENDATION:                                              *
   ****************************************************************
   The "Proxy server troubleshooting" topic, which is included in
   the Information Centers for WebSphere Application Server
   Versions 6.1 and 7.0, do not indicate that the setting for
   the ulimit file descriptor might cause "Too Many Files Open"
   exceptions when running a proxy server on a Solaris operating
   system. The topic also does not include any information on how
   to prevent these exceptions from occurring when running a proxy
   server on an HP-UX operating system.
   
   
    
   
   

PROBLEM CONCLUSION
 *  "The proxy server seems to "hang" under stress, or
   "Too Many Files Open" exceptions display in ffdc or
   SystemErr.log" section of the "Proxy Server troubleshooting"
   topic in the Information Center for WebSphere Application
   Server Versions 6.1 and 7.0 will be updated to include the
   following information:
   
   Operating system tuning for HP-UX
   
   HP-UX nfile kernel parameter - Specifies the maximum number of
   files that can be open on the system at any given time. Not
   specifying a large enough number might restrict your system
   processing capacity.
   
   HP-UX ninode kernel parameter - Specifies the maximum number
   of open inodes that can be in memory. An open inode is
   associated with each unique open file. Therefore, the value
   you specify for the ninode parameter should be larger than the
   number of unique files that must be open at the same time.
   
   Operating system tuning for Solaris
   
   Solaris file descriptors (ulimit) - Specifies the number
   of open files that are supported. If the value specified for
   this parameter is too low, a file open error, memory
   allocation failure, or connection establishment error might
   display. View or set this value by checking the UNIX reference
   pages on the ulimit command for the syntax of different shells.
   
   Issue the ulimit -a command to display the current
   values for all limitations on system resources.
   
   Issue the ulimit -n 65535 command to set the ulimit
   command to 65535 for the KornShell shell (ksh).
   
   The maximum number of files that can be open for a
   process is also affected by the rlim_fd_max, and rlim_fd_cur
   settings for the global kernel limit. You might need to
   increase the values of these settings in the /etc/system file.
   
   Solaris 10 provides a new mechanism for setting kernel
   parameters. Issue one of the following commands to specify a
   new limit for the max number of file descriptor kernel
   parameter on Solaris 10:
   1. To change the value for the current shell session:
       prctl -n process.max-file-descriptor -r -v 65535 $$
   
   2. To make the change a system wide change:
      projmod -sK
      'process.max-file-descriptor=(privileged,65535,deny)'
      system
   
      Caution should be used when issuing this command
      because this command changes the setting for all users, and
      all projects.
   
   3. To change the value for all projects that are
      owned by user root:
   
      projmod -sK
      'process.max-file-descriptor=(privileged,65535,deny)'
      user.root
   
   4. To change the value for all projects owned by non-root user
   
      projmod -sK
      'process.max-file-descriptor=(privileged,65535,deny)'
      user.username
   
   
   Note: Periodically, we update the documentation in our
   information centers. Thus, the changes might exist in the
   current documentation before you read this text. To access the
   latest on-line documentation, go to the product library page
   at http://www.ibm.com/software/webservers/appserv/library and
   select the version and product that is appropriate for your
   WebSphere Application Server environment.
   
   The modified documentation will be available in the May 2009
   update to the Information Centers.
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   PK86040
   
   
 * REPORTED COMPONENT NAME
   WEBS APP SERV N
   
   
 * REPORTED COMPONENT ID
   5724H8800
   
   
 * REPORTED RELEASE
   61A
   
   
 * STATUS
   CLOSED DOC
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2009-05-06
   
   
 * CLOSED DATE
   2009-05-14
   
   
 * LAST MODIFIED DATE
   2009-05-14
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION

APPLICABLE COMPONENT LEVELS