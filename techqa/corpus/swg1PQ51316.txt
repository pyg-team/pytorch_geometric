Title: IBM PQ51316: INVALID GETMAIN LENGTH FOR WEB WRITE HTTPHEADER - United States

Text:
z/os  A FIX IS AVAILABLE
Obtain the fix for this APAR.


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  On CICS WEB WRITE HTTPHEADER 'Content Type', the GET_LENGTH for
   HTTPHBUF from DFHWBAP contains an invalid value when
   WRB_RESPONSE_HEADER_LENGTH is not 0 i.e. when subsequent HTTP
   headers are added. This causes incorrect length to be specified
   on a GETMAIN, and a WRITE/HEADER DISASTER response to DFHWBAP.
   Trace entry shows:
   00195 SM 030A SMGF *EXC* Insufficient_storage_to_satisfy_request
         FUNCTION(GETMAIN) GET_LENGTH(4040407C) SUSPEND(NO) REMARK
         (HTTPHBUF) STORAGE_CLASS(CICS)
    00195 SM 0302 SMGF EXIT GETMAIN/EXCEPTION
          REASON(INSUFFICIENT_STORAGE) ADDRESS(17603FFC)
    00195 WB 0301 WBAP EXIT WRITE_HEADER/DISASTER REASON()
   
     The transaction abends ABENDAEXZ AEXZ.
   
   
    
   
   

LOCAL FIX

PROBLEM SUMMARY
 *  ****************************************************************
   * USERS AFFECTED: All CICS Users.                              *
   ****************************************************************
   * PROBLEM DESCRIPTION: The use of                              *
   *                      EXEC CICS WEB WRITE HTTPHEADER          *
   *                      commands to build the headers of an     *
   *                      HTTP response can result in a AEXZ      *
   *                      abend.                                  *
   ****************************************************************
   * RECOMMENDATION:                                              *
   ****************************************************************
   The problem is due to the field used to set up the length of a
   new header not being initialised when the second and subsequent
   headers are built, i.e. when the next WEB WRITE commands are
   issued. An abend may occur because this length field contains
   unpredictable data, which is then used on a GETMAIN to obtain
   storage in which to build the headers.
   
   An additional problem is a spelling mistake in MSGDFHSO0102.
   
   KEYWORDS:
   ABENDAEXZ AEXZ ABENDAWBM AWBM DFHWB0125 MSGDFHWB0125
   DFHWB0101 MSGDFHWB0101 DFHSO0102.
   
   
    
   
   

PROBLEM CONCLUSION
 *  DFHWBRQS has been changed so that the field that stores the new
   header length is correctly initialised. This now results in the
   correct value being used on the GETMAIN issued by DFHWBAP
   for HTTPHBUF (HTTP header buffer).
   DFHMESO has been changed to correct the spelling mistake in
   message DFHSO0102.
   
   CICS Transaction Server for VSE/ESA, Messages and Codes
   Release 1, GC34-5561-03, will be changed in section 1.52.6 to
   correct a spelling mistake in message DFHSO0102. This will
   be altered to say:
   
   "DFHSO0102 date time applid A Language Environment Callable
   Service error (code X'code') has occurred on receipt of a severe
   TCP/IP return code; the TCPIPSERVICE tcpipservice on port
   portnumber at IP address ipaddress will be closed."
   
   
    
   
   

TEMPORARY FIX
 *  FIX AVAILABLE BY PTF ONLY
   
   
    
   
   

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   PQ51316
   
   
 * REPORTED COMPONENT NAME
   CICSTS FOR VSE
   
   
 * REPORTED COMPONENT ID
   564805400
   
   
 * REPORTED RELEASE
   B0P
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2001-08-09
   
   
 * CLOSED DATE
   2001-12-18
   
   
 * LAST MODIFIED DATE
   2002-08-21
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
    PQ27049
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
    UQ61230
   
   

MODULES/MACROS
 *     DESWBAP  DESWBDM  DESWBRQ  DESWBSR  DESWBXM
   DFHMESOE DFHWBAP  DFHWBAPF DFHWBDM  DFHWBRQS DFHWBSR  DFHWBXM
   
   
    
   
   

Publications Referenced GC34556103 FIX INFORMATION
 * FIXED COMPONENT NAME
   CICSTS FOR VSE
   
   
 * FIXED COMPONENT ID
   564805400
   
   

APPLICABLE COMPONENT LEVELS
 * RB0P PSY UQ61230 [HTTPS://WWW14.SOFTWARE.IBM.COM/WEBAPP/SET2/ORDERMEDIA/SHOPCART?PTFS=UQ61230]
   UP01/12/21 P E261
   
   

FIX IS AVAILABLE
 * SELECT THE PTF APPROPRIATE FOR YOUR COMPONENT LEVEL. YOU WILL BE REQUIRED TO SIGN IN. DISTRIBUTION ON PHYSICAL MEDIA IS NOT AVAILABLE IN ALL COUNTRIES.