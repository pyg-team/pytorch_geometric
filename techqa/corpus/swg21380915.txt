Title: IBM ITCAM  for WebSphere Application Server z/OS  Data Collector - migration to new directory structure - United States

Text:
ITCAM for WebSphere Application Server; z/OS Data Collector; migration to new directory structure; ITCAM; z/OS Data Collector; z/OS; Directory; Migration; install_home; config_home TECHNOTE (FAQ)

QUESTION

In ITCAM for WebSphere for z/OS installations with Fix Pack 4 or higher, the ITCAM z/OS Data Collector introduces a new directory structure that allows for a read only install home directory. However, to prevent a mixed environment, the createcfg.sh script will not create this new directory structure if the old directory structure already exists. How do I migrate from the old directory structure to the new directory structure?



ANSWER
The simplest way to do this is to create a new install_home directory with a different name. Follow the usual configuration process. When you run the setupwas.sh script for each server it will migrate to the new directory structure automatically. When all the servers are configured you can delete the both the old install_home and config_home directories. 

To migrate an existing old format directory structure to the new format directory structure use the following steps: 

 *  Optional. Run unconfig.sh for all Application Servers for the existing config_home directory. 
    * You do not have to run the unconfig.sh script on the existing servers, but you may want to if you want to avoid the short period where ITCAM for WebSphere is not available for restart. To migrate to the new directory structure you need to unconfigure the old configuration home directory; if you do not, the Application Server will not restart until you rerun the setupwas.sh script. 
    * If you do not plan to restart WebSphere before completing the process, you do not need to carry out the unconfiguration process because the setupwas.sh script will effectively remove the old configuration when it creates the new configuration.
   
   Disconnect the existing config_home directory from the install_home directory by removing the itcam.properties file and the symbolic link to the runtime directory from the install_home directory:
   
   cd /usr/lpp/itcam/WebSphere/DC
   rm itcam.properties
   rm runtime
   If you want to use the same configuration home directory name, either rename or remove the existing config_home directory. This is not necessary if you are creating a different configuration home location.
   
   cd /u
   mv itcam61 itcam61-old
   Run createcfg.sh, either interactively or by submitting CYNZISRT:
   
   cd /usr/lpp/itcam/WebSphere/DC/bin
   ./createcfg.sh -config /u/itcam61
   Run the setupwas.sh script for each Application Server:
   
   cd /u/itcam61/bin
   ./setupwas.sh
   Optional. For continuity, copy the .mod and .id files from the old runtime directories to the new ones.
   Restart your Application Servers.
   Optional. Remove the old configuration home directory.