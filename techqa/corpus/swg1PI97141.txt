Title: IBM PI97141: DFHME0001 AN ABEND CODE 0C4/AKEA AT OFFSET X'03D30' IN MODULE DFHMEME - United States

Text:
z/os SUBSCRIBE TO THIS APAR
By subscribing, you receive periodic emails alerting you to the status of the APAR, along with a link to the fix after it becomes available. You can track this item individually or track all items by product.

Notify me when this APAR changes.

Notify me when an APAR for this component changes.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  The program check occurs at offset x'3D2E' on an MVCL
   instruction in DFHMEME.  The failing transaction has
   experienced an AZI6 abend, and is in the process of
   backing out, and attempting to put out a very large message.
   DFHTFP is calling DFHMEME with the parameter list to put
   out message DFHAC2236.
   .
   Here is the message attempting to be written out:
   DFHAC2262 04/11/2018 12:53:14 CICSREG1 System SYS1 sent
            message (sense code 0824089E). DFHAC2206 12:53:14
            CICSREG2 Transaction TRAN failed with abend AZI6.
            Updates to local recoverable resources backed out.
            DFHAC2261 System SYS2 sent message (sense code
            0824089E). 'DFHAC2206 12:53:14 CICSREG3 Transaction
            TRAN failed with abend AZI6. Updates to local
            recoverable resources backed out. DFHAC2261 System
            SYS3 sent message (sense code 0824089E). 'DFHAC2206
            12:53:14 CICSREG4 Transaction TRAN failed  with
            abend AZI6. Updates to local recoverable resources
            backed out. DFHAC2261 System SYS4 sent message
            (sense code 0824089E). 'DFHAC2206 12:53:14 CICSREG5
            Tran saction TRAN failed with abend AZI6. Updates to
            local recoverable resources backed out. DFHAC2261
            System SYS6 sent message (sense code 0824089E).
            'DFHAC2206 12:53:14 CICSREG6 Transaction TRAN failed
            with abend AZT3. Updates to local recoverable
            resources backed out.'.'.'.'...............
   .
   DFHMEME getmains MVS storage at offset x'2826' requesting EA6
   bytes of storage, which MVS rounds up to EA8 as seen in system
   trace:
   --------------------------------------------------------------
   PC   ... 8       00_36EBA45B     0030B          Storage Obtain
   SSRV 132   00000000  40008370 00000EA8 371FB158 Storage Obtain
                        00F60000
   --------------------------------------------------------------
   It gets back address 371FB158.
   
   
   .
   At the time of the failing MVC, the initial TO area was
   371FBBFE (offset AA6 into the MVS getmained area at 371FB158)
   And the initial length for the MVCL was  x'43F', which takes
   you past the end of the MVS Storage, into the next page
   371FC000, which it does not have access to, causing the program
   check.
   
   
   Additional Symptom(s) Search Keyword(s): KIXREVDAM
   DFHSM0001  abend (code 0C4/AKEA) has occurred at
              offset X'1BF6' in module DFHSMST
   This is due to a CICS SCA control block, which
   resides in MVS stroage, getting overlaid with  part of
   a message.
   DFHSM0001 An abend (code 0C4/AKEA) has occurred at
             offset X'1858' in module DFHSMAR.
   DFHDS0002 A severe error (code X'0074') has occurred in
             module DFHDSSR.
   In this case, the MVS storage overlaid was a SUSPAREA
   used by dispatcher.
   SM0001 abend0C4
   
   
    
   
   

LOCAL FIX
 *  n/a
   
   
    
   
   

PROBLEM SUMMARY
 *  ****************************************************************
   * USERS AFFECTED: All CICS users.                              *
   ****************************************************************
   * PROBLEM DESCRIPTION: Message DFHME0001 An abend              *
   *                      (code 0C4/AKEA) has occurred at offset  *
   *                      X'03D30' in module DFHMEME.             *
   ****************************************************************
   An undefined transaction is dynamically routed, using CRTX
   transaction ID across several CICS regions.
   On the last region, the transaction abends AZT3.
   The abend is percolated back to the original region creating a
   large message to be sent to the terminal and to the CICS log.
   When CICS SYSTEM EVENT is use to track the message an abend0C4
   occurs in DFHMEME due to the size of the message exceeding the
   size of the getmained area.
   .
   Additional Keywords: DFHAC2206 MSGDFHAC2206
                        DFHAC2236 MSGDFHAC2236
                        DFHAC2261 MSGDFHAC2261
                        DFHAC2262 MSGDFHAC2262
                        DFHIR3783 MSGDFHIR3783
                        AbendAZI6 AZI6 AbendAZT3 AZT3
                        sense code 0824089E
                        S0C4 abendS0C4
   
   
    
   
   

PROBLEM CONCLUSION
 *  DFHMEME has been changed to prevent abending 0C4 when a large
   message is processed and CICS SYSTEM events are used.
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   PI97141
   
   
 * REPORTED COMPONENT NAME
   CICS TS Z/OS V5
   
   
 * REPORTED COMPONENT ID
   5655Y0400
   
   
 * REPORTED RELEASE
   100
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt / Xsystem
   
   
 * SUBMITTED DATE
   2018-04-24
   
   
 * CLOSED DATE
   2018-05-09
   
   
 * LAST MODIFIED DATE
   2018-05-09
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
    UI55702
   
   

MODULES/MACROS
 *  DFHMEME
   
   
    
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   CICS TS Z/OS V5
   
   
 * FIXED COMPONENT ID
   5655Y0400
   
   

APPLICABLE COMPONENT LEVELS