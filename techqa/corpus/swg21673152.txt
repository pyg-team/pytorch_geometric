Title: IBM Problems making secure outbound connections when Domino is the SSL client - United States

Text:
SSL; TLS; ldaps; 636; webagent consumer; keyring; kyr TECHNOTE (TROUBLESHOOTING)

PROBLEM
Problems connecting to other servers over ssl, even after installing the needed trusted root certificate into the domino keyring file specified in the Server Document-> Ports-> internet ports

SYMPTOM
Will notice connectivity problems / failures for features like Directory Assistance, Web Service Consumers and other operations where the Domino Server can act as the SSL client.


ENVIRONMENT
 Issue is when Domino is acting as the SSL client.
Applies to secure SMTP, Secure Ldap via Directory Assistance, Web Agent Consumers, etc

DIAGNOSING THE PROBLEM
Verify proper trusted root certificate is installed into keyring file

https://www.ibm.com/support/docview.wss?uid=swg21449281 [https://www.ibm.com/support/docview.wss?uid=swg21449281]

But capturing DEBUG_SSL_ALL=1 indicates the following

SSL Error: 5890, mapped to 4171
or in some cases the following error message: 
SSL invalid certificate, may need to cross-certify.


RESOLVING THE PROBLEM
This issue was reported in APAR LO73073 and SPR# PPOR92UMM6, and is resolved in Domino 9.0.1 Fix Pack 1. The error occurs when an SSL implementation does not send the CA DN list during the certificate request phase. This fix allows the process to proceed.

To revert to the old behavior, enable Notes.ini SSL_STRICT_V3=1. The notes.ini parameter applies when using SSLv3, TLS 1.0, or TLS 1.2. The fix address secures SMTP connections and all other internet protocol connections when Domino acts as the SSL client.

RELATED INFORMATION
 Notes/Domino Fix List [http://www-10.lotus.com/ldd/fixlist.nsf/Public/1CFEB3634431FC6685257C5C0047848B?OpenDocument]