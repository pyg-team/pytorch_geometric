Title: IBM Replgenstats Process - United States

Text:
7.2.1.6-P2 TROUBLESHOOTING

PROBLEM
In Netezza replication environment, on the subordinate system, auto-genstats (generate statistics) is performed after every by-value Commit Sequence Number (henceforth referred to as CSN) execution. Frequent generation of statistics on big tables takes time and hence adds delays to the CSN processing. One can disable genstats after every by-value CSN execution by setting registry variable host.autoGenStatsOnReplSub to “no”. This will not trigger auto-genstats but this will also not update the statistics. This could inversely hamper performance of the system.

RESOLVING THE PROBLEM
Statistics generation is required on only those tables that are modified by CSNs/queries that are replicated “by-value”. CSNs/queries that are replicated “by-SQL” do not need to generate statistics explicitly as they update the statistics by themselves as part of query execution.

Netezza software version 7.2.1.6-P2 introduces a new process, “replgenstats”, which identifies all such tables which have been modified through “by-value” CSNs and generates statistics on them.

The process is invoked after a fix time interval which checks and performs “generate statistics” if needed. This eliminates statistics generation after every by-value CSN/query and improves CSN execution time.

The script has following configurable options. They can either be set in file /nz/kit /sys/startup.cfg or by command line argument to replgenstats script.

-interval <seconds>:

The time interval for “replgenstats” invocation. By default, is the program runs at interval of 900 seconds (15 minutes). E.g. “-interval 1800”

-dbtoskip <comma separated list of database names>

The script has a provision to skip database where generate statistics related checks need not be performed. By default, all INZA databases are skipped.

E.g. “-dbtoskip INZA,NZVERIFY,NZRC,NZR,NZMSG,NZM,NZA”

-u <username>

The default user is admin. The user with ‘system’ privileges. The password has to be stored in cache using nzpassword. E.g. “-u admin”

The program executes only on the subordinate Netezza host and will remain dormant on master Netezza host.

Feature behavior: 

Netezza software version 7.2.1.6-P2 startup executes the replgenstats script. The program is executed on the Netezza host. User can enable or disable the feature by sending user signal to the executing process.

· Enable feature: 

The feature could be enabled by sending SIGUSR1 to the replgenstats process.

Example:
kill -n SIGUSR1 <pid of replgenstats>
Once enabled, the utility collects logs in /nz/kit/log/replgenstats directory

· Disable feature: 

To disable the program execution, send SIGUSR2 to the process.
Example:
kill -n SIGUSR2 <pid of replgenstats>
By default, the feature is disabled.

Caveats when feature is enabled: 

Caveats when feature is disabled: 

Statistics is not generated on tables changed by by-value replicated CSN, if this feature is disabled and registry parameter autoGenStatsOnReplSub is off.

NOTE: 
The utility would also take care of statistics on version tables.

PRODUCT ALIAS/SYNONYM
NPS Netezza Performance Server PureData for Anayltics PDA