Title: IBM Using DB2 Net Search Extender with a Unicode database - United States

Text:
 TECHNOTE (FAQ)

QUESTION
 What must I consider when using a Unicode database with DB2 Net Search Extender?


ANSWER
If you are using the Net Search Extender with a Unicode (codepage = 1208, code set = UTF-8) database, you must perform additional steps during index creation.
Begin by checking the output of the DB2 command GET DATABASE CONFIGURATION to determine your database codepage. 

Then set the DB2CODEPAGE environment variable to 1208 in your current shell or command line window before creating the text index. You can reset this again later. Do not use the db2set command to set the codepage variable as this effects the environment of other processes which can lead to search failures or incorrect search results. Instead use the appropriate command from your operating system command line described below. 

Steps 1 and 2 are only required if you have previously created Net Search Extender text indexes without setting the DB2CODEPAGE environment variable. 

Steps to perform on Windows NT 

 *  Drop all DB2 Net Search Extender text indexes for the appropriate database using: 
   db2nx disable database Re-enable the database using: 
   db2nx enable database Set the DB2CODEPAGE variable to 1208 using:
   set DB2CODEPAGE=1208
   (Note: do NOT use the db2set command!) Recreate the DB2 Net Search Extender text indexes in the current Windows command line session. Unset the DB2CODEPAGE variable using:
   set DB2CODEPAGE= 

Steps to perform on UNIX platforms  *  Drop all DB2 Net Search Extender text indexes for the appropriate database using: 
   db2nx disable database Re-enable the database using: 
   db2nx enable database Set the DB2CODEPAGE variable to 1208 using the command (sh, ksh, zsh, or bash):
   DB2CODEPAGE=1208
   export DB2CODEPAGE
   command (csh or tcsh):
   setenv DB2CODEPAGE 1208
   (Note: do NOT use the db2set command!) Recreate the DB2 Net Search Extender text indexes in the current UNIX shell. Unset the DB2CODEPAGE variable using the command (sh, ksh, zsh, or bash):
   DB2CODEPAGE=
   export DB2CODEPAGE
   command (csh or tcsh):
   setenv DB2CODEPAGE "" 

Restrictions When using the above solution, it is important that the names of tables, columns, indexes, tags, directories, optimized columns, numeric columns specified in the ENABLE TEXT COLUMN command contain only base ASCII characters (<128), as these names are not correctly interpreted in a search command and can lead to various inconsistencies. Only use the common characters [A-Z,a-z], as well as numbers and special characters, such as "_" or "-" which are commonly used for file names or table names. 

What happens if the above steps are not performed? 

If you do not set the DB2CODEPAGE environment variable during indexing, the search may fail with the error: 

SQL1131N DARI (Stored Procedure) process has been terminated abnormally. SQLSTATE=38503 

This problem occurs if your indexed documents contain characters that are not part of the base 7 bit ASCII codepage, such as the German umlaut characters "ä", "ö", "ü", or specific characters from other languages.





Cross reference information Segment Product Component Platform Version Edition Database & Data Management DB2 Net Search Extender Base AIX, HP-UX, Linux, Solaris, Windows 2000, Windows NT