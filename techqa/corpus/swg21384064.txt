Title: IBM EJB 1.1 Deployment Descriptor Editor - Access Tab: Access Intent for Entities 1.1 "Combine" button fails with NullPointerException - United States

Text:
RAD; WSAD; WAS; v5; v6; v4; v7; EJB; CMP; 1.1; Access Intent; Combine; buttton; deployment descriptor; websphere; extensions; ibm-ejb-jar-ext.xmi TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 The EJB 1.1 Deployment Descriptor Editor - Access Tab: Access Intent for Entities 1.1 "Combine" button fails with NullPointerException in IBM Rational Application Developer for WebSphere Software v7.0.0.8 and v7.5.2 and all previous versions, including WebSphere Studio Application Developer v5.1.2. It is also not documented what the purpose of the "Combine" button is? 

SYMPTOM
Attempts to use the EJB 1.1 Deployment Descriptor (DD) Editor - Access Tab: Access Intent for Entities 1.1 functionality to change Access Intents on an old EJB 1.x project that had been migrated from WebSphere Studio Application Developer v5.1.2 (but had dated back to possibly v4.x and WebSphere Application Server v4.x) results in the Deployment Descriptor Editor: cmp EJB 1.1 Access Intent "Combine" button failing with a NullPointerException, which shows in the workspace .log file: 

Caused by: java.lang.NullPointerException 

 at com.ibm.etools.ejb.ui.operations.EjbCombineAccessIntentOperation.gatherParentObjects(Unknown Source) 

 at com.ibm.etools.ejb.ui.operations.EjbCombineAccessIntentOperation.extendedExecution(Unknown Source) 

 at com.ibm.etools.ejb.ui.operations.AbstractEjbCombineOperation$1.execute(Unknown Source) 

 
... 32 more



CAUSE
Defect APAR PK84292 has been submitted to address this issue. 


SUMMARY: The WebSphere Extensions in the EJB DD editor file: ibm-ejb-jar-ext.xmi, had a dated xml element structure in which there was a separate access intent element for ejb 1.1 CMP methods on the Remote or Home Interface. 

Here is a snippet of that structure for one ejb11 CMP showing a separate Access Intent element for each method:



[http://www.ibm.com/i/v14/icons/fw_bold.gif] Example [javascript:void(0);] [javascript:void(0);] (click to expand) <enterpriseBean xmi:type="ejb:ContainerManagedEntity" href="META-INF/ejb-jar.xml#ContainerManagedEntity_1"/>
<structure xmi:id="BeanStructure_2" inheritenceRoot="false"/>
<beanCache xmi:id="BeanCache_2" activateAt="TRANSACTION" loadAt="TRANSACTION"/>
<internationalization xmi:id="BeanInternationalization_2" invocationLocale="CALLER"/>
<localTran xmi:id="LocalTran_2" boundary="BEAN_METHOD" unresolvedAction="ROLLBACK"/>
<accessIntents xmi:id="AccessIntent_615" intentType="READ">
<methodElements xmi:id="MethodElement_615" name="getEJBHome" parms="" type="Remote">
<enterpriseBean xmi:type="ejb:ContainerManagedEntity" href="META-INF/ejb-jar.xml#ContainerManagedEntity_1"/>
</methodElements>
</accessIntents>
<accessIntents xmi:id="AccessIntent_616" intentType="READ">
<methodElements xmi:id="MethodElement_616" name="getHandle" parms="" type="Remote">
<enterpriseBean xmi:type="ejb:ContainerManagedEntity" href="META-INF/ejb-jar.xml#ContainerManagedEntity_1"/>
</methodElements>
</accessIntents>
... .. 

.
<accessIntents xmi:id="AccessIntent_620" intentType="READ">
<methodElements xmi:id="MethodElement_620" name="getTextIsNumber" parms="" type="Remote">
<enterpriseBean xmi:type="ejb:ContainerManagedEntity" href="META-INF/ejb-jar.xml#ContainerManagedEntity_1"/>
</methodElements>
</accessIntents> 


</ejbExtensions>
<ejbExtensions xmi:type="ejbext:SessionExtension" xmi:id="SessionExtension_2" timeout="600">
<isolationLevelAttributes xmi:id="IsolationLevelAttributes_3" isolationLevel="READ_COMMITTED">
<methodElements xmi:id="MethodElement_3" name="*" type="Unspecified">
<parms xsi:nil="true"/>
<enterpriseBean xmi:type="ejb:Session" href="META-INF/ejb-jar.xml#Session_2"/>
</methodElements>
</isolationLevelAttributes>
<enterpriseBean xmi:type="ejb:Session" href="META-INF/ejb-jar.xml#Session_2"/>
<structure xmi:id="BeanStructure_3" inheritenceRoot="false"/>
<beanCache xmi:id="BeanCache_3" activateAt="ONCE"/>
<internationalization xmi:id="BeanInternationalization_3" invocationLocale="CALLER"/>
<localTran xmi:id="LocalTran_3" boundary="BEAN_METHOD" unresolvedAction="ROLLBACK"/>
</ejbExtensions>
<ejbExtensions xmi:type="ejbext:ContainerManagedEntityExtension" xmi:id="ContainerManagedEntityExtension_2" concurrencyControl="optimistic">
<isolationLevelAttributes xmi:id="IsolationLevelAttributes_4" isolationLevel="READ_COMMITTED">
<methodElements xmi:id="MethodElement_4" name="*" type="Unspecified">
<parms xsi:nil="true"/>
<enterpriseBean xmi:type="ejb:ContainerManagedEntity" href="META-INF/ejb-jar.xml#ContainerManagedEntity_2"/>
</methodElements>
</isolationLevelAttributes> 

 

This is contrasted by the current xml structure in which one Acces Intent element has all method elements, as shown by this example:

<enterpriseBean xmi:type="ejb:ContainerManagedEntity" href="META-INF/ejb-jar.xml#MyEJB11CMPA"/>
<isolationLevelAttributes xmi:id="IsolationLevelAttributes_1238608288939" isolationLevel="READ_COMMITTED">
<methodElements xmi:id="MethodElement_1238608288939" name="*" type="Unspecified">
<enterpriseBean xmi:type="ejb:ContainerManagedEntity" href="META-INF/ejb-jar.xml#MyEJB11CMPA"/>
</methodElements>
</isolationLevelAttributes>
<accessIntents xmi:id="AccessIntent_1238608146744" intentType="READ">
<methodElements xmi:id="MethodElement_1238608146744" name="getName" parms="" type="Remote">
<enterpriseBean xmi:type="ejb:ContainerManagedEntity" href="META-INF/ejb-jar.xml#MyEJB11CMPA"/>
</methodElements>
<methodElements xmi:id="MethodElement_1238608270487" name="getAddress" parms="" type="Remote">
<enterpriseBean xmi:type="ejb:ContainerManagedEntity" href="META-INF/ejb-jar.xml#MyEJB11CMPA"/>
</methodElements>
</accessIntents> 


Note: This current structure goes back as far as back WebSphere Studio Application Developer v5.1.2 and WebSphere Application Server v5.x. 

While the old structure is still recognized by current WebSphere Application Servers v6.x and v7.0 at runtime and deployment, it is not possible to edit the old Access Intent Structure in the EJB DD Editor - Access Tab in WebSphere Studio Application Developer v5.1.2 or Rational Application Developer v6.0 or v7.x. 

The "Combine" button was created on early on in WebSphere Studio Application Developer v5.x (or even v4.x), to literally combine all the ejb 1.1 CMP attribute methods with access intents into one AccessIntent element, making them editable. 
RESOLVING THE PROBLEM
This defect is scheduled to be fixed in a future Rational Application Developer for WebSphere Software v7.0.0.x and v7.5.x release. 


WORKAROUND: 

Contact IBM Support to request if a Test Fix Patch is available for Rational Application Developer for WebSphere Software v7.0.0.8 or v7.5.2.