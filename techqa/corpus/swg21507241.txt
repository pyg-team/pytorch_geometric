Title: IBM Data warehouse migration command migrateDW failed to execute SQL statement in Rational Insight - United States

Text:
migrateDW; com.ibm.rational.insight.migration.dw.service.DWMigrationSQLException; "Failed to execute SQL statement" TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 Attempts to run migration script via migrateDW command result in SQL execution error when using IBM Rational Insight. 

SYMPTOM
Running Data warehouse migration command migrateDW failed with error: 

An error has occurred. See the log file. 

<RRDI Dev Tools Install Dir>\migration\1.1.1.x\dw\workspace\.metadata\.log. 

Errors in the mentioned .log file 

------------------------------------------------- 

1. !ENTRY org.eclipse.osgi 4 0 2011-06-16 15:39:34.459 

!MESSAGE Application error 

!STACK 1 

com.ibm.rational.insight.migration.dw.service.DWMigrationSQLException: Failed to execute SQL statement 'DELETE FROM CONFIG.META_FOREIGN_KEY'. 

DB2 SQL Error: SQLCODE=-204, SQLSTATE=42704, SQLERRMC=CONFIG.META_FOREIGN_KEY, DRIVER=3.50.152 

 at com.ibm.rational.insight.migration.dw.service.DWMigrationDBService.createConfigSchemaTables(DWMigrationDBService.java:2455) 

 at com.ibm.rational.insight.migration.dw.cmdlinetool.DWMigration.start(DWMigration.java:552) 

 at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:194) 

 at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110) 

 at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79) 

 at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:368) 

 at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:179) 

 at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 

 at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:79) 

 at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) 

 at java.lang.reflect.Method.invoke(Method.java:618) 

 at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:559) 

 at org.eclipse.equinox.launcher.Main.basicRun(Main.java:514) 

 at org.eclipse.equinox.launcher.Main.run(Main.java:1311) 

 at org.eclipse.equinox.launcher.Main.main(Main.java:1287) 

 

2. !ENTRY org.eclipse.osgi 2 1 2011-06-16 15:40:30.360 

!MESSAGE NLS unused message: DWDropStatementViewWarning_Msg.useraction in: com.ibm.rational.insight.migration.dw.cmdlinetool.resources 

!ENTRY org.eclipse.osgi 4 0 2011-06-16 15:40:30.971 

!MESSAGE Application error 

!STACK 1 

java.sql.SQLException: com.ibm.db2.jcc.DB2Driver 

 at com.ibm.rational.insight.common.database.DatabaseUtil.getConnection(DatabaseUtil.java:99) 

 at com.ibm.rational.insight.config.common.util.DBUtil.getConnection(DBUtil.java:47) 

 at com.ibm.rational.insight.migration.dw.service.DWMigrationDBService.getCachedConnection(DWMigrationDBService.java:1243) 

 at com.ibm.rational.insight.migration.dw.cmdlinetool.DWMigration.start(DWMigration.java:532) 

 at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:194) 

 at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110) 

 at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79) 

 at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:368) 

 at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:179) 

 at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 

 at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:79) 

 at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) 

 at java.lang.reflect.Method.invoke(Method.java:618) 

 at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:559) 

 at org.eclipse.equinox.launcher.Main.basicRun(Main.java:514) 

 at org.eclipse.equinox.launcher.Main.run(Main.java:1311) 

 at org.eclipse.equinox.launcher.Main.main(Main.java:1287)


CAUSE
The previous failed migration has left the data warehouse database in an incorrect state.



DIAGNOSING THE PROBLEM
The failed SQL statement in the .log file error message could be different. 



RESOLVING THE PROBLEM
Restore data warehouse database from backup and run the migration command again.