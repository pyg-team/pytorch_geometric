Title: IBM Batching of database statement causes tracking errors in DB2 - United States

Text:
Backups;Data tracking; STERLINGNFX TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 Batching of database statement causes tracking errors in DB2 

SYMPTOM


The error is noticed when GIS is upgraded to 4212,

 

Error Message Error in tracking log
SQL Error Code: -803
SQL State: 23505
com.ibm.db2.jcc.a.SqlException: Error for batch element #1: DB2 SQL error: SQLCODE: -803, SQLSTATE: 23505, SQLERRMC: 5;TCGIS.CORRELATION_SET
Caused by: com.sterlingcommerce.neo.NeoDatabaseException: executeBatch
at com.sterlingcommerce.neo.db.SQLExceptionHandler.translate(SQLExceptionHandler.ja va:65)
at com.sterlingcommerce.neo.db.DBAccess.executeBatch(DBAccess.java:453)
at com.sterlingcommerce.woodstock.workflow.crl.CorrelationDBAccess.saveSQL(Correlat ionDBAccess.java:326)
... 25 more
Caused by: com.ibm.db2.jcc.a.ge: Non-atomic batch failure. The batch was submitted, but at least one exception occurred on an individual member of the batch. Use getNextException() to retrieve the exceptions for specific batched elements.
at com.ibm.db2.jcc.a.j.a(j.java:397)
at com.ibm.db2.jcc.a.id.b(id.java:2935)
at com.ibm.db2.jcc.a.id.a(id.java:2704)
at com.ibm.db2.jcc.a.id.executeBatch(id.java:2516)
at com.ibm.db2.jcc.a.id.executeBatch(id.java:1348)
at com.sterlingcommerce.neo.db.DBAccess.executeBatch(DBAccess.java:446)


RESOLVING THE PROBLEM


1. Add the following statement at the very last line of your jdbc.properties.in

 

 * query.canBatchCrls=false

2. Save the file and run setupfiles.sh

3. Make sure the the entry is present in jdbc.properties after setupfiles have finished.

 

HISTORICAL NUMBER
 NFX2891 

PRODUCT ALIAS/SYNONYM
 

Function Area


database,DB2,batching


Escalation ID


4904068


Severity


Critical