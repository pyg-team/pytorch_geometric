Title: IBM 7530 Duplicate Incidents In IBM Control Desk - United States

Text:
TPAEINTEGRATION; TPAEWEBSPHERE; TPAELDAP; TPAELDAPSYNC; TPAETSRM TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 Sometimes duplicate HTTP requests are initiated toward the IBM Control Desk solution. 

SYMPTOM
The issue is with creation of incidents from external systems in IBM Control Desk 7.5.3. Client has HTTP server and Maximo Integration Framework Cluster (MAXIMOMIF CLUSTER) with two application servers in that integration cluster: 

MAXIMOMIF1 
MAXIMOMIF2. 

Client had noticed that sometimes double tickets are created within the IBM Control Desk solution and it is because External System initiated only one HTTP Request for Incident Creation (through the web service) toward the HTTP Server but it seems like somehow this request is processed for some reason with one minute delay and initiates two separate requests toward the WebSphereÂ® application server, i.e. one to MIF1 and second to MIF2 but in different time intervals. 

Incident is duplicated or even replicated because one request was sent toward the MIF1 server and second request was sent to MIF2 server although again client initiated only one request toward 
the IBM Control Desk system. 

It seems that sometimes HTTP request is somewhere "lost" or "stuck" and then it is being processed by the both application integration servers (after some time delay) although usually in over 95% of cases, it is processed immediately. However, the problem repeatedly resurfaces causing it to not process immediately and thus trigger two requests toward the application servers.


Log extract shows the following: 

12/11/15 18:59:12:590 CET] 0000003a SystemOut O 11 Dec 2015
18:59:12:590 [INFO] [maximomif2] [CID-CRON-31792] Correlated data:
BEGIN InstanceName:AsyncScheduled TaskName:AsyncScheduledJobCronElapsedTime:14 ms END
[12/11/15 18:59:26:074 CET] 00000004 TimeoutManage I WTRN0006W:
Transaction
000001519230BBB90000000100000F04EBDC6F45AB76925FBC1405B08386F0D9661021FF
000001519230BBB90000000100000F04EBDC6F45AB76925FBC1405B08386F0D9661021FF
00000001 has timed out after 120 seconds. 


[12/14/15 15:09:53:961 CET] 00000007 TimeoutManage I WTRN0124I: When the timeout occurred the thread with which the transaction is, or was most recently, associated was Thread[WebContainer : 7,5,main]. 
The stack trace of this thread when the timeout occurred was: 
java.lang.Object.wait(Native Method) 
java.lang.Object.wait(Object.java:196) 
com.sun.jndi.ldap.Connection.readReply(Connection.java:446)




CAUSE
In some instances, an application is making and using its own connections to the LDAP server (for example, IBM Directory Server) which might experience slowdowns in performance under heavy load. This is because the connections to LDAP server are not timed out after they are closed.


ENVIRONMENT
App Server IBM WebSphere Application Server 7.0.0.17

Release management for IBM Control Desk 7.5.3.0 Build 201411211300 DB Build V7530-01
Common process components for IBM Control Desk 7.5.3.0 Build 201411211300 DB Build V7530-16
Service Desk Classification Content for IBM Control Desk 7.5.3.0 Build 201411211300 DB Build V7511-00
Data Integration and Context Menu Service Configuration 7.5.0.0 Build 20090911D2 DB Build V7117-07
Advanced Workflow Components for IBM Control Desk 7.5.3.0 Build 201411211300 DB Build V7511-00
SLA Hold for IBM Control Desk 7.5.3.0 Build 201411211300 DB Build V7530-01
IBM Control Desk 7.5.3.0 Build 201411211300 DB Build V7530-01 

Release management content for IBM Control Desk 7.5.3.0 Build 201411211300 DB Build V7511-00
Common process components content for IBM Control Desk 7.5.3.0 Build 201411211300 DB Build V7511-00
Self Service Center for IBM Control Desk 7.5.3.0 Build 201411211300 DB Build V7520-01
Asset Management for IBM Control Desk 7.5.3.0 Build 201411211334 DB Build V7530-05
Tivoli's process automation engine 7.5.0.7 Build 20141017-1600 DB Build V7507-40
Live Chat for IBM Control Desk 7.5.3.0 Build 201411211300 DB Build V7530-01
IBM Maximo for Service Providers 7.5.3.0 Build 20140708-1430 DB Build V7530-19
IBM Tivoli Integration Composer 7.5.0.2 Build 20141017-1600 DB Build V7502-02
Asset Management Best Practices for IBM Control Desk 7.5.3.0 Build 7.5.3.0 DB Build V7530-01
Search for IBM Control Desk 7.5.3.0 Build 201411211300 DB Build V7530-01Service Catalog Content for IBM Control Desk 7.5.3.0 Build 201411211300 DB Build V7530-01
Advanced Edition Content Best Practices for IBM Control Desk 7.5.3.0 Build 201411211300 DB Build V7511-00
Service Request Management for IBM Control Desk 7.5.3.0 Build 201411211300 DB Build V7530-02
Solution for IBM Control Desk 7.5.3.0 Build 201411211300 DB Build V7520-02
Configuration items for IBM Control Desk 7.5.3.0 Build 201411211300 DB Build V7530-04
IBM Tivoli Integration Composer for IBM Control Desk 7.5.3.0 Build 201411211334 DB Build V7530-06
Change management for IBM Control Desk 7.5.3.0 Build 201411211300 DB
Build V7530-03
Entry Edition Content Best Practices for IBM Control Desk 7.5.3.0 Build 201411211300 DB Build V7511-00
User interface widgets for IBM Control Desk 7.5.3.0 Build 201411211300 DB Build V7530-06
Incident Management for IBM Control Desk 7.5.3.0 Build 201411211300 DB Build V7530-02
Service Desk Best Practices Content for IBM Control Desk 7.5.3.0 Build 201411211300 DB Build V7520-01
Configuration items content for IBM Control Desk 7.5.3.0 Build 201411211300 DB Build V7511-00
Service Catalog for IBM Control Desk 7.5.3.0 Build 201411211300 DB Build V7530-08
Configuration management for IBM Control Desk 7.5.3.0 Build 201411211300 DB Build V7530-02
Survey Management for IBM Control Desk 7.5.3.0 Build 201411211300 DB Build V7511-01
Tivoli Remote Diagnostics for IBM Control Desk 7.5.3.0 Build 201411211300 DB Build V7511-00
Configuration management content for IBM Control Desk 7.5.3.0 Build 201411211300 DB Build V7511-00
Instant Messaging for IBM Control Desk 7.5.3.0 Build 201411211300 DB Build V7530-00
Problem Management for IBM Control Desk 7.5.3.0 Build 201411211300 DB Build V7520-02
Service Desk for IBM Control Desk 7.5.3.0 Build 201411211300 DB Build V7530-05
Quick Configuration for IBM Control Desk 7.5.3.0 Build 201411211300 DB Build V7511-00
Service Desk Best Practice Users for IBM Control Desk 7.5.3.0 Build 201411211300 DB Build V7511-00
Service Desk Integration MEA for IBM Control Desk 7.5.3.0 Build 201411211300 DB Build V7530-00
IBM TPAE Integration Framework 7.5.1.2-MIF_7512_IFIX.20141029-1705 Build 20140730-1950 DB Build V7512-08 HFDB Build HF7512-03
Screen Capturer for IBM Control Desk 7.5.3.0 Build 201411211300 DB Build V7530-00

Server OS Linux 2.6.32-504.16.2.el6.x86_64 


Server DB DB2/LINUXX8664 9.7 (SQL09075)


RESOLVING THE PROBLEM
You can follow the steps below:

Login to Websphere console and navigate to the following:

Security > Global security > Federated repositories > configure >
Manage repositories > (your repository) and under additional properties: Performance

Check / configure the following:

"Context pool" = this has to be enabled 

"Context pool times out" = max 300 seconds, but it may depend on your firewall value as well. 

"Use connection pooling" = this has to be disabled

RELATED INFORMATION
 How should you configure the VMM context pool when VMM [http://www-01.ibm.com/support/docview.wss?uid=swg21631667]