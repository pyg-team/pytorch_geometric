Title: IBM Collecting Data for TPC: Installation Problems - United States

Text:
MustGatherDocument mustgather collecting data total tivoli storage productivity center tpc installation server db2 spectrum control TECHNOTE (FAQ)

QUESTION
 Collecting data documents aid in problem determination and save time resolving Problem Management Records (PMRs). 

CAUSE
Support request for problem determination data.

ANSWER
Collecting problem data early, even before opening the PMR, helps IBMÂ® Support quickly determine if: 

 * Symptoms match known problems (rediscovery). 
 * There is a non-defect problem that can be identified and resolved. 
 * There is a defect that identifies a workaround to reduce severity. 
 * Locating root cause can speed development of a code fix.


Collecting data: Read First table of contents: 
[http://www.ibm.com/i/v14/rules/dotted_blue_rule_443.gif]  

[/support/docview.wss?uid=swg21292441&amp;aid=1] Gathering general information [/support/docview.wss?uid=swg21292441&amp;aid=2] Manually Gathering General Information [/support/docview.wss?uid=swg21292441&amp;aid=3] Gathering TPC Installation Failure Information [/support/docview.wss?uid=swg21292441&amp;aid=4] Submitting Information to IBM Support [/support/docview.wss?uid=swg21292441&amp;aid=5] Online Self-Help Resources [/support/docview.wss?uid=swg21292441&amp;aid=6] Related Information [http://www.ibm.com/i/v14/rules/dotted_blue_rule_443.gif] 



Gathering General Information 
Entering general information into an electronically-opened PMR (ESR) [http://www-306.ibm.com/software/support/probsub.html] eliminates waiting on the phone to provide general information to Level 1 support. 

Manually Gathering General Information 
For all problems, please provide:  * A detailed description of the problem, including the steps that led to the problem 
 * Screenshot showing the problem (if applicable and a screenshot is available) 
 * Related error messages


Refer to the next section for additional information that you should collect for the specific installation problem you are experiencing. 

Manually Gathering TPC Installation Failure Information 
For all installation problems:  1. Indicate what installation documentation you are following for instructions. 
 2. Provide details on the user account being used for installation (i.e., local 'Administrator' on Windows, domain administrator or other account, 'root' user on Unix). 
 3. Indicate if the machine on which you are installing has ever had any TPC software previously installed. 
 4. Information about the installation media you are using:

 * label info from CD if installing from CDs or DVDs 
 * if downloaded electronic image, file name as downloaded (i.e., C1117ML.zip, C12XKML.tar), and whether it is extracted on a local or external disk.


DB2 install problems: 
On Windows, locate the db2.log and db2wi.log files under the 'My Documents'\DB2LOG directory. On Unix, look for the /tmp/db2setup.log and /tmp/db2setup.err files. 

TPC server install problems:  1.  [http://publib.boulder.ibm.com/infocenter/tivihelp/v4r1/index.jsp?topic=/com.ibm.tpc_V331.doc/fqz0_t_serviceability_tool_for_servers.html]Collect log and output files from steps A, B, C, D, E, F as applicable, shown below. 
 2. Run the TPC Serviceability Tool [http://www-01.ibm.com/support/docview.wss?uid=swg21608615] if it is available. 
 3. If the serviceability tool is not available, you should manually collect all of the following:

 * the version of TPC you are installing as listed in the 'version.txt' file (located in the TPC target install directory, or in the installer directory from which the 'setup' command was launched) 
 * all *.log, *.config, and *.properties files found under the installation target directory (default locations are c:\Program Files\IBM\TPC on Windows, /opt/IBM/TPC on Unix)


TPC agent install problems:  1. Indicate whether you are running a remote/push install from the TPC server, or a local install on the agent server, or if you have tried both. 
 2. If running a local SRA install, provide the full command line used to launch the install. 
 3. Run the TPC Serviceability Tool [http://www-01.ibm.com/support/docview.wss?uid=swg21608615] if it is available. 
 4. If the serviceability tool is not available, you should manually collect all of the following, including log and output files from steps A, B, C, D, E as applicable (see below). Be sure to include:

 * the version of TPC you are installing as listed in the 'version.txt' file (located in the TPC target install directory, or in the installer directory from which the 'setup' command was launched) 
 * all *.log, *.config, and *.properties files found under the installation target directory (default locations for Data and Fabric agents are c:\Program Files\IBM\TPC\ca on Windows, /opt/IBM/TPC/ca on Unix, for Storage Resource Agents they are c:\Program Files\IBM\TPC\agent on Windows, and /opt/IBM/TPC/agent on Unix)


A. TPC 5.x installer logs: 
<TPC> = TPC install target directory (where TPC is to be installed) 
<TPCinstaller> = TPC install code disk image (where setup.exe/setup.sh is located) 
<TMP> = Windows %temp%, Unix - /tmp 
<HOME> = Windows - %homepath%, Unix - /home/root or /root or / 

<TMP> log files:  * lax*out.txt and lax*err.txt files in /tmp directory 
 * IATrace* 
 * jccDiagh* 


<HOME> log files:  * TCR3101InstallerMessageXX.log 
 * TCR3101InstallerTraceXX.log 
 * TCRInstaller-00 
 * TCRUninstall-00 
 * TCR3101UninstallMessageXX.log 
 * TCR3101UninstallTraceXX.log 
 * msgTPCStderr 
 * msgTPCStdout


Other files to collect: 
<TPCinstaller>\version.txt 
<TPC>/version.txt 
<TPC>/_uninst/.tpcreg 
<TPC>/config/InstallVariable*.properties 

B. Files in TPC logs directory: 
Create a .zip file containing the contents of the TPC /logs directory (currently this is not included in the data collected by the Serviceability Tool):  * <TPC>/logs


C. Operating system environment information: 
Windows: 
cd c:\Program Files\Common Files\Microsoft Shared\MSInfo 
msinfo32 /report c:\msinfo32.log /category all 
file --> c:\windows\system32\drivers\etc\hosts 
Unix: 
uname -a >/tmp/sysinfo.log; df -k >>/tmp/sysinfo.log; ps -ef >>/tmp/sysinfo.log; cat /etc/hosts >>/tmp/sysinfo.log 

D. Performing basic connectivity and network communications checks: 
From TPC agent machine:  1. Do a ping test to the TPC server both by ip address, and also by fully qualified machine name. Check to make sure that the machine name and ip address match in both tests. 
 2. Do a 'telnet' test to the TPC server on port 9549. A successful test will return 'Connected' on Unix platforms, and a blank screen on Windows. A failed test will issue a message such as 'unable to connect'. Command syntax:

telnet tpcserver.abc.com 9549 
3. If installing a legacy Data or Fabric Agent that requires the AgentManager, also test port 9511: 
telnet tpcserver.abc.com 9511 
From TPC server machine:  1. Do a ping test to the TPC agent machine both by ip address, and also by fully qualified machine name. Check to make sure that the machine name and ip address match in both tests.

Use cut/paste to capture test results in a text file (preferred) or capture a screen shot of the output. 

E. Output from 'netstat' command: 
Windows example: 
netstat -anob >c:\netstat.log 
Unix example: 
netstat -an >/tmp/netstat.log 

Submitting Information to IBM Support 
After a PMR is open, you can submit diagnostic data [http://www.ecurep.ibm.com/app/upload] to IBM. 

If using ESR [http://www.ibm.com/software/support/probsub.html], update the PMR to indicate that data has been sent. 

Online Self-Help Resources  * Review up-to-date product information at your IBM Support Portal page [http://www-947.ibm.com/support/entry/portal]. Review the TPC Supported Products and Platforms document [http://www-01.ibm.com/support/docview.wss?uid=swg21386446] for the version of TPC you are using to make sure that the environment is supported. 
 * Utilize the IBM Electronic Service Request tool to access the IBM Tivoli Storage Productivity Center Support team when requiring assistance from IBM. Related Information 

[http://www-1.ibm.com/support/docview.wss?uid=swg21257908]  * Latest IBM Tivoli Storage Productivity Center interim fixes/patches [ftp://ftp.software.ibm.com/software/tivoli/products/TPC/fixes/]



Cross reference information Segment Product Component Platform Version Edition Storage Management Tivoli Storage Productivity Center Standard Edition AIX, HP-UX, Linux, Solaris, Windows Storage Virtualization Software System Storage Productivity Center Storage Management Tivoli Storage Productivity Center for Disk Storage Management TotalStorage Productivity Center for Fabric Storage Management Tivoli Storage Productivity Center Basic Edition