Title: IBM IZ31827: WORKSPACE VIEWS DO NOT RECOVER AFTER AGENT OFFLINE ERROR - United States

Text:
 SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  Severity: 2
   Approver:EA
   Compid:  5724C04EP Tivoli Enterprise Portal
   Abstract:Workspace views do not recover after agent offline
   error
   
   Environment:
   TEMS/TEPS: AIX 5.3 - ITM 6.2 FP01
   TEP:       Windows 2003 - ITM 6.2 FP01
   Agent:     OMEGAMON XE 4.2 for z/OS,
              ITM 6.2 FP01 Unix OS agent for AIX 5.3
              ITM 6.2 FP01 Windows OS agent
   
   Problem Description:
   Customer creates a plot chart view to have two Agents' data
   drawn simultaneously in one window with refreshing every 30
   seconds.  Detailed steps of creating the workspace is described
   in "Steps_to_create_workspace" sheet in
   pmr04474_steps_to_create_problem.xls.  He attempted to verify if
   the plot chart view could be automatically redrawn when Agents
   went offline and then came back online by the following steps.
   
   1) At first, the two plot charts are drawn in the view as
      expected when two agents is running fine.
   2) When he stops both agents, the "KFWITM454E Request failed due
      to offline managed system(s)" error message is shown, and
      then the plot chart view gets empty.
   3) He restarts two agents, and then he notices that the
      "KFWITM454E" error message is removed from the bottom of the
      plot chart view.  However, no agent data is redrawn
      automatically even after waiting for a long period.
   
   More simplistic than the above scenario, is that views are not
   redrawn after an Agent goes offline and then comes back online.
   Problem occurs with any view - irrespective if its plot, chart,
   or pie.
   
   Eg, Agent online - all views working OK
       Agent goes offline - views show KFWITM454E
       Agent comes online - KFWITM454E removed, but views remain
       blank.
       Switch workspace and back again - views now working OK.
   
   Expected Result:
   TEP view recovers after an Agent goes offline and then comes
   back online.
   
   Detailed Recreation Procedure:
   The problem can be reproduced on 62fp1 or 62fp1if1 using
   Unix/Windows OS Agent data.  The TEP screen copies are stored in
   pmr04474_steps_to_create_problem.xls in ECuRep.
   1) Create a workspace to plot two agent data in one view using
      TEP client.
   2) Start TEMS, TEPS.
   3) Start two Unix OS agents.
   3) See two agents' data are drawn in one plot chart view.
   4) Stop both agents.
   5) See the "KFWITM454E Request failed due to offline managed
      system(s)" error message is shown, and the view gets empty.
   6) Restart both agents.
   7) Now, you can see the "KFWITM454E" error disappears from the
      view, but agent data is never redrawn even after waiting for
      a long period.
   
   Related Files and Output:
   The following trace messages were captured across the change
   from offline to online:
   (48c188ba.14810600-(null)Thread-60:DataBus,0,"DataBus.execute(PB
   asedRequest,User,Property[])") EXCEPTION: General processing
   Error from DataBus.execute()
   (48c188ba.14810600-(null)Thread-60:DataBus,0,"DataBus.executeReq
   uest(PBasedRequest,boolean)") EXCEPTION: PropertyBased Exception
   from DataBus.executeRequest()
   (48c188ba.14810600-(null)Thread-60:DataBus,0,"DataBus.executeReq
   uest(PBasedRequest,boolean)") EXCEPTION: error_code: 701
   (48c188ba.14810600-(null)Thread-60:DataBus,0,"DataBus.executeReq
   uest(PBasedRequest,boolean)") EXCEPTION: error_component:
   (48c188ba.14810600-(null)Thread-60:DataBus,0,"DataBus.executeReq
   uest(PBasedRequest,boolean)") EXCEPTION: error_text: Query
   node(s) offline, report id = 'knt.01170_6_60'.
   (48c188ba.14810600-(null)Thread-60:DataBus,0,"DataBus.executeReq
   uest(PBasedRequest,boolean)") EXCEPTION: error_diagnostic:
   REPT101
   (48c18ad9.21ea4040-(null)Thread-74:Decoder,0,"Decoder.addElement
   sToPBased(PBasedTable,Any[],int)") Error: extracted DATA
   property value from PBased row is null; skipping row: Row
   Element<0>
   (48c18adc.2d4cae00-(null)Thread-75:Decoder,0,"Decoder.addElement
   sToPBased(PBasedTable,Any[],int)") Error: extracted DATA
   property value from PBased row is null; skipping row: Row
   Element<0>
   (48c18efd.165a0bc0-(null)Thread-111:Decoder,0,"Decoder.addElemen
   tsToPBased(PBasedTable,Any[],int)") Error: extracted DATA
   property value from PBased row is null; skipping row: Row
   Element<0>
   
   The following files are put in 04474.69C.760.20080901a.tar.Z in
   ECuRep:/ecurep/pmr/0/4/04474,69C,760 directory.
   - pmr04474_steps_to_create_problem.xls
   - TEP/KCJvedbaek.LOG
   - TEP/kincinfo-i.out
   - TEP/kcjerror_vedbaek.log
   - TEP/kcjras1_vedbaek.log
   
   
    
   
   

LOCAL FIX

PROBLEM SUMMARY
 *  Workspace views do not display data after all agents providing
   data to the view have gone offline and one or more have come
   back online.  This is most noticeable with Plot Charts of
   realtime data but it affects other views as well.
   
   If a workspace view is displaying data from one or more agents,
   and all the agents go offline, the view becomes blank and
   displays the following message:  KFWITM454E Request failed due
   to offline managed system(s).  If one or more of the agents
   comes back online, the view does not display data even if the
   workspace or view is manually or automatically refreshed.  The
   data will be displayed if a different workspace is selected and
   then the affected workspace is re-selected.
   
   
    
   
   

PROBLEM CONCLUSION
 *  The logic was changed to display the message without removing
   the visual components of the view.  When the agent comes back
   online, this allows the view to display the data on the next
   manual or automatic refresh.  For the Plot Chart view,
   previously received realtime values will be cleared and the
   chart will start over as if the workspace had just been opened.
   
   
   The fix for this APAR is contained in the following maintenance
   packages:
   
      | interim fix | 6.2.0.2-TIV-ITM-IF0001
   
   
    
   
   

TEMPORARY FIX
 *  The view can be restored by switching to another workspace and
   then switching back to the affected workspace after the agents
   are back online.
   
   
    
   
   

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   IZ31827
   
   
 * REPORTED COMPONENT NAME
   TEP
   
   
 * REPORTED COMPONENT ID
   5724C04EP
   
   
 * REPORTED RELEASE
   620
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2008-09-11
   
   
 * CLOSED DATE
   2009-02-17
   
   
 * LAST MODIFIED DATE
   2009-02-17
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   TEP
   
   
 * FIXED COMPONENT ID
   5724C04EP
   
   

APPLICABLE COMPONENT LEVELS
 * R620 PSY
   UP