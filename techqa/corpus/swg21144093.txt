Title: IBM DFHFC5806 DFHFC5802A received on open of CICS dataset - United States

Text:
BWO BACKUP WHILE OPEN DFHFC5802A MSGDFHFC5802A DFHFC5806 DSNB MSGDFHFC5806 INVREQ 5655M1500 R640 640 R400 400 HCI6400 R650 650 R500 500 HCI6500 5655-M15 5655M15 5655S9700 R660 660 R600 600 HCI6600 5655-S97 5655S97 5655S9700 R670 670 R700 700 HCI6700 5655-S97 5655S97 5655Y0400 R680 680 R800 800 HCI6800 5655-Y04 5655Y04 kixinfo TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 You restore a Backup While Open (BWO) dataset backed up using DFSMSdss. When you open the file to CICS, you receive a DFHFC5802A followed by DFHFC5806. When you enter a CEMT SET DSNAME (your_dataset_name) RECOVERED to reset the BWO flags, you receive Dataset Name Block (DSNB) is not valid. 

SYMPTOM
DFHFC5806 [http://pic.dhe.ibm.com/infocenter/cicsts/v5r1/topic/com.ibm.cics.ts.messages.doc/DFHFC/DFHFC5806.html] File OPEN failed. DFHFCAT returned an error response from a BWO action on a VSAM data set. File 'filename' data set 'dsname'. 
DFHFC5802A [http://pic.dhe.ibm.com/infocenter/cicsts/v5r1/topic/com.ibm.cics.ts.messages.doc/DFHFC/DFHFC5802A.html] File OPEN has failed for VSAM data set. The BWO values in the ICF catalog indicate that data set needs to be forward recovered. Data set 'dsname'. 


CAUSE
BWO flags set to 101 from DFSMSdss

DIAGNOSING THE PROBLEM
DFSMSdss set BWO [http://pic.dhe.ibm.com/infocenter/cicsts/v5r1/topic/com.ibm.cics.ts.doc/dfha2/topics/dfha2_bwo_vsamfiles.html] flags to 101 which is BWO_FORWARD_RECOV1. CICS does not set this combination of BWO_FLAGS. CEMT SET DSNAME(your_dataset_name) RECOVERED receives INVREQ_REC_DSNB_NOT_VALID and the dataset cannot be reset for OPEN processing. This INVREQ indicates that your dataset was not opened during the current run of CICS. CICS VSAM Recovery for z/OS (CICS VR) would be an option to recover this dataset, but in this case you do not have CICS VR available. 


CICS cannot open the dataset because the IDCAMS Catalog indicates that it needs to be forward recovered. You cannot set it to recovered by CICS because CICS has not been able to open the dataset to verify the DSNB is valid. You will have to recover the dataset off-line.


RESOLVING THE PROBLEM
Use the IGWABWO [http://pic.dhe.ibm.com/infocenter/cicsts/v5r1/topic/com.ibm.cics.ts.doc/dfht2/topics/dfht24r.html] program from the Information Center [http://publibz.boulder.ibm.com/cgi-bin/bookmgr_OS390/BOOKS/DFHT2P03/3.10.7?SHELF=DFHPUSH4&DT=20030108124927]to set the dataset recovered.



PRODUCT ALIAS/SYNONYM
 CICS/TS CICS TS CICS Transaction Server