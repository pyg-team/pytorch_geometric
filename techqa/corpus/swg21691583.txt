Title: IBM ORA-12505, TNS:listener does not currently know of SID given in connect
descriptor - United States

Text:
 TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 Upgraded database server from Oracle 11.2.0.2 to Oracle 12c.
While testing content manager connection, it is failing to connect with the following error.

[Content Manager database connection]
[ ERROR ] The database connection failed.
[ ERROR ] Content Manager failed to connect to the content store. 
The connection string is "jdbc:oracle:thin:@host_name:port:service_name". 
The error encountered is: "Listener refused the connection with the following error:
ORA-12505, TNS:listener does not currently know of SID given in connect descriptor 

CAUSE
 

In an Oracle 12c container database, the client must specify a service name in order to connect to the PDB. Many Database clients with earlierreleases of Oracle Database might have hard-coded connect descriptors touse SID to connect to the database. Now if they choose to plug in their non-CDB?s into a CDB, they will have to modify the connect descriptors in tnsnames.ora on all the client sites. 


ENVIRONMENT
Oracle Container Databases (CDB) / Pluggable Databases (PDB)



RESOLVING THE PROBLEM
This problem can be resolved by the use of listener.ora parameter USE_SID_AS_SERVICE_listener_name. Setting this parameter to on instructs the listener to use the SID in the connect descriptor as a service name and connect the client to the specified database. The default value for this parameter is off and it has to be explicitly set to on to use this functionality. 


listener.ora to set USE_SID_AS_SERVICE_LISTENER to on 
USE_SID_AS_SERVICE_LISTENER=on

RELATED INFORMATION
#USE_SID_AS_SERVICE_listener_name. [http://oracleinaction.com/12c-use_sid_as_service_listener_name/]