Title: IBM IX90058: MARSHAL EXCEPTION WHEN UNMARSHALLING AN ENUM SENT BY A OMG10336 NON-COMPLIANT JDK - United States

Text:
 SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  Error Message: A MARSHAL exception is thrown when de-marshalling
   an enum.
   org.omg.CORBA.MARSHAL: No available data: Read beyond end of
   input stream  vmcid: OMG  minor code: 8 completed: Maybe
   .
   Stack Trace: org.omg.CORBA.MARSHAL: No available data: Read
   beyond end of input stream  vmcid: OMG  minor code: 8 completed:
   Maybe
   at
   com.ibm.rmi.iiop.CDRInputStream.alignAndCheck(CDRInputStream.jav
   a:830)
   at
   com.ibm.rmi.iiop.CDRInputStream.read_wstring(CDRInputStream.java
   :1196)
   at
   com.ibm.rmi.iiop.CDRInputStream.fast_read_value(CDRInputStream.j
   ava:2024)
   at
   com.ibm.rmi.io.IIOPInputStream.readValueType(IIOPInputStream.jav
   a:2275)
   at
   com.ibm.rmi.io.IIOPInputStream.readObjectField(IIOPInputStream.j
   ava:2247)
   at
   com.ibm.rmi.io.IIOPInputStream.inputClassFields(IIOPInputStream.
   java:1950)
   at
   com.ibm.rmi.io.IIOPInputStream.inputObjectUsingClassDesc(IIOPInp
   utStream.java:1500)
   at
   com.ibm.rmi.io.IIOPInputStream.continueSimpleReadObject(IIOPInpu
   tStream.java:528)
   at
   com.ibm.rmi.io.IIOPInputStream.simpleReadObjectLoop(IIOPInputStr
   eam.java:511)
   at
   com.ibm.rmi.io.IIOPInputStream.simpleReadObject(IIOPInputStream.
   java:454)
   at
   com.ibm.rmi.io.ValueHandlerImpl.readValue(ValueHandlerImpl.java:
   209)
   at
   com.ibm.rmi.iiop.CDRInputStream.read_value(CDRInputStream.java:2
   186)
   .
   The problem is seen only when ENUM type is sent from a OMG10336
   non compliant JDK to Java 5 SR11 FP1 ( and above ) and Java 6 SR
   6 (an above).
   
   
    
   
   

LOCAL FIX

PROBLEM SUMMARY
 *  The readEnum explicitly reads only the ordinal and enum value.
   If the sender is pre OMG 10336 ibm sdk, there will be additional
   data sent as part of enum which gets read as the values for the
   subsequent fields.
   
   
    
   
   

PROBLEM CONCLUSION
 *  This defect will be fixed in:
   6.0.0 SR10
   .
   In readEnum, check if the sender is non OMG 10336 compliant,
   walk through the additional data and discard it.
   .
   To obtain the fix:
   Install build 20110126 or later
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   IX90058
   
   
 * REPORTED COMPONENT NAME
   ORB
   
   
 * REPORTED COMPONENT ID
   620700123
   
   
 * REPORTED RELEASE
   600
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2010-10-08
   
   
 * CLOSED DATE
   2011-02-01
   
   
 * LAST MODIFIED DATE
   2011-02-01
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
    IZ86140 [http://www-01.ibm.com/support/docview.wss?uid=swg1IZ86140]
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   ORB
   
   
 * FIXED COMPONENT ID
   620700123
   
   

APPLICABLE COMPONENT LEVELS
 * R600 PSN
   UP