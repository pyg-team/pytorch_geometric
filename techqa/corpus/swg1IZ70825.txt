Title: IBM IZ70825: ITM SAP AGENT GENERATES MANY SYSTEM_DOWN ALERTS DUE TO RFC CONNECTION FAILURES - United States

Text:
  A FIX IS AVAILABLE
IBM Tivoli Monitoring for Applications: mySAP Agent, 6.2.0-TIV-ITM_SAP-IF0015 [http://www-01.ibm.com/support/docview.wss?uid=swg24033394]


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  ITM SA agent will trigger System_Down and System_Up
   events when SAP system is restarted.
   
   Problem is the result of RFC limitation and how
   ITM handles RFC password, and success / failure
   of RFC connection open.
   
   Detailed Recreation Procedure:
   SAP Agent 6.2
   SAP System 6.x/7.x/4.6/4.7
   
   1. Set the password of SAP Agent User with
    lowercase,uppercase,digital and other special
    characters
   2. start ITM SA agent to monitor SAP system
   3. stop sap system
   4. start sap system.
   5. check alerts workspace or TEC event, there are
    many System_Down and System_Up events/situations
   
   Related Files and Output:
   1. Set the log level with
    KBB_RAS1=ERROR (UNIT:KSA ALL) (UNIT:KRA ALL).
   2. restart the mysap agent.
   3. reproduce the problem, then collect the agent
    logs under <CANDLE_HOME>/logs
   
   KSA0300  errmsg: -300 *** Failure on call to RFC Open Connection
   KSA0300  errmsg:  RFC ERROR SNAPSHOT at
   KSA0300  errmsg:    Parameter 1    :
   KSA0300  errmsg:    Error exception:
   KSA0300  errmsg:    Error key      : RFC_IO5
   KSA0300  errmsg:    Error status   :
   CODE=CM_PRODUCT_SPECIFIC_ERROR
     or
   KSA0300  errmsg:    Error key      : RFC_ERROR_SYSTEM_FAILURE
   KSA0300  errmsg:    Error status   :
   KSA0300  errmsg:    Error message  : Name or password is
   incorrect (repeat logon)
   
   
    
   
   

LOCAL FIX

PROBLEM SUMMARY
 *  The problem is caused by SAP Sysem not return the correct return
   code after SAP System is restarted. and the mySAP Agent didn't
   handle this wrong caused by SAP System RFC calling
   
   
    
   
   

PROBLEM CONCLUSION
 *  The mySAP Agent should handle this error caused by SAP System
   RFC Calling, and distinguish the correct system down from errors
   caused by SAP System exception
   
   
    
   
   

TEMPORARY FIX
 *  The Tempfix has been delivered to customer, and works fine.
   It will be included inot 6.2.0-TIV-ITM_SAP-IF0010.
   
   
    
   
   

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   IZ70825
   
   
 * REPORTED COMPONENT NAME
   ITMF APPL - SAP
   
   
 * REPORTED COMPONENT ID
   5724B97SO
   
   
 * REPORTED RELEASE
   620
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   YesHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2010-02-22
   
   
 * CLOSED DATE
   2010-03-23
   
   
 * LAST MODIFIED DATE
   2010-06-12
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   ITMF APPL - SAP
   
   
 * FIXED COMPONENT ID
   5724B97SO
   
   

APPLICABLE COMPONENT LEVELS
 * R620 PSY
   UP