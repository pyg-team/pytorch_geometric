Title: IBM IT09663: CC IS ENABLED TO EMIT EVENTS TO JMS QUEUE. THE JMS QUEUE GOES DOWN, AND THE ENTIRE CC ENGINE GOES DOWN - United States

Text:
 SUBSCRIBE TO THIS APAR
By subscribing, you receive periodic emails alerting you to the status of the APAR, along with a link to the fix after it becomes available. You can track this item individually or track all items by product.

Notify me when this APAR changes.

Notify me when an APAR for this component changes.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  CC is enabled to emit events to JMS queue. The JMS queue goes
   down, and the entire CC engine goes down
   
   JMSWMQ0018: Failed to connect to queue manager
   CCTR083E Engine shutdown has been initiated
   
   
    
   
   

LOCAL FIX
 *  STRRTC - 468471
   SF / SF
   Circumvention: None
   
   
    
   
   

PROBLEM SUMMARY
 *  Description of issue:  By design, when Control Center is
   configured to emit events to a JMS queue, the JMS queue must
   always be available.  If Control Center cannot contact the JMS
   queue to emit an event, it retries the operation and if the
   retries have been exhausted, the Control Center engine is
   brought down.
   
   
    
   
   

PROBLEM CONCLUSION
 *  Description of fix:  To avoid this shutting down of the Control
   Center engine, two new properties may be added to the
   conf/engine.properties file:
   
   IGNORE_JMS_ERRORS=false|true (false is the default)
   IGNORE_JMS_ERRORS_RETRY_MINUTES=10|nn (n > 0, 10 is the default)
   
   With IGNORE_JMS_ERRORS=true specified, Control Center will
   ignore the retry specifications in the JMS configuration and,
   instead when there is a failure to connect to the JMS queue,
   will ignore the error.  After getting an error, all attempts to
   emit events will be ignored until the retry minutes have
   expired, and then the next event to be emitted will cause
   Control Center to retry the connection.  If this fails, Control
   Center will retry again after the retry minutes expires.  Note:
   retrying on each event would cause an unacceptable slow-down of
   Control Center performance since each retry attempt involves a
   TCP time-out.
   
   When the JMS connection is first recognized as down, a new event
   is generated (Event Type 15, message id CJMS001E) to indicate
   that the JMS connection is down.  When the JMS connection is
   subsequently available, another event is generated (Event Type
   15, message id CJMS002E) to indicate that the JMS connection is
   up.  Rules may be written against these events and appropriate
   action can be taken.
   
   While the JMS connection is unavailable, events will be lost
   (not emitted to JMS).  Appropriate messages in the Control
   Center log indicate how many events were lost during each
   outage.
   
   
    
   
   

TEMPORARY FIX
 *  Description of issue:  By design, when Control Center is
   configured to emit events to a JMS queue, the JMS queue must
   always be available.  If Control Center cannot contact the JMS
   queue to emit an event, it retries the operation and if the
   retries have been exhausted, the Control Center engine is
   brought down.
   
   Description of fix:  To avoid this shutting down of the Control
   Center engine, two new properties may be added to the
   conf/engine.properties file:
   
   IGNORE_JMS_ERRORS=false|true (false is the default)
   IGNORE_JMS_ERRORS_RETRY_MINUTES=10|nn (n > 0, 10 is the default)
   
   With IGNORE_JMS_ERRORS=true specified, Control Center will
   ignore the retry specifications in the JMS configuration and,
   instead when there is a failure to connect to the JMS queue,
   will ignore the error.  After getting an error, all attempts to
   emit events will be ignored until the retry minutes have
   expired, and then the next event to be emitted will cause
   Control Center to retry the connection.  If this fails, Control
   Center will retry again after the retry minutes expires.  Note:
   retrying on each event would cause an unacceptable slow-down of
   Control Center performance since each retry attempt involves a
   TCP time-out.
   
   When the JMS connection is first recognized as down, a new event
   is generated (Event Type 15, message id CJMS001E) to indicate
   that the JMS connection is down.  When the JMS connection is
   subsequently available, another event is generated (Event Type
   15, message id CJMS002E) to indicate that the JMS connection is
   up.  Rules may be written against these events and appropriate
   action can be taken.
   
   While the JMS connection is unavailable, events will be lost
   (not emitted to JMS).  Appropriate messages in the Control
   Center log indicate how many events were lost during each
   outage.
   
   
    
   
   

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   IT09663
   
   
 * REPORTED COMPONENT NAME
   STR CONTROL CEN
   
   
 * REPORTED COMPONENT ID
   5725D0200
   
   
 * REPORTED RELEASE
   542
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2015-06-24
   
   
 * CLOSED DATE
   2015-07-13
   
   
 * LAST MODIFIED DATE
   2015-07-13
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   STR CONTROL CEN
   
   
 * FIXED COMPONENT ID
   5725D0200
   
   

APPLICABLE COMPONENT LEVELS
 * R542 PSY
   UP
   
   
 * R600 PSY
   UP