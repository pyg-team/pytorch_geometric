Title: IBM i support for 8284-22A - United States

Text:
 TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 IBM i is supported on model 8284-22A with restrictions. One of the restrictions is that no physical IO can be assigned. This restriction is enforced only at the time of activation/dlpar; not during configuration. The limited IBM i support was initially offered via a VET code (which should of been pre-installed on all servers) but later built into the base firmware starting at 860.20. 

SYMPTOM
Attempting to activate an IBM i partition profile that has physical IO on a 8284-22A fails with error:
HSCL058A Could not activate the partition %1. Refresh the interface and check whether the operation was performed. If not, try the operation again.
HSCL063B Failed to set I/O adapter %2 for the partition. 

Attempting to dlpar physical IO to an IBM i partition on a 8284-22A fails with error:
The dynamic addition of I/O resources failed: the I/O slot dynamic partitioning operation failed. Here are the I/O slot IDs that failed and the reasons for the failure:
HSCL1552 The firmware operation failed with extended error. <slot location and drc> 
HSCL2928

At server firmware levels prior to 840.20, IBM feature 5052 does not display the correct entitlement information. 


CAUSE

Physical IO is not supported for IBM i.
IBM i is supported on the 8284-22A only when hosted by VIOS. No IO can be assigned. This is documented in the announcement at http://www-01.ibm.com/common/ssi/ShowDoc.wss?docURL=/common/ssi/rep_ca/9/897/ENUS115-089/index.html&lang=en&request_locale=null#descx [http://www-01.ibm.com/common/ssi/ShowDoc.wss?docURL=/common/ssi/rep_ca/9/897/ENUS115-089/index.html&lang=en&request_locale=null#descx] 

" With firmware code level 840, the 2U Power S822 (8284-22A) supports IBM i 7.2 or IBM i 7.1 with special terms and conditions. Technology Refresh 3 or later for IBM i 7.2 or Technology Refresh 11 or later for IBM i 7.1 is required. Multiple IBM i partitions each up to a maximum of two cores are supported. IBM i partitions needing more than two cores can be run on a different model server. The Power S822 software tier is only P10.

Virtual I/O Server (VIOS) is required for all the I/O that IBM i accesses. There is no "native" IBM i support for I/O."

The IO restriction is enforced by server firmware during partition activation. There is no enforcement by the HMC however users may wish to enable the IBM i partition "Restricted IO Partition" property to block assignment of physical IO.
[/support/docview.wss?uid=nas8N1021205&aid=1] [/support/docview.wss?uid=nas8N1021205&aid=1]

IBM i Licensing
The IBM i user license entitlements for feature 5052 on WRKLICINF, and the associated IBM i MATMATR output, are not displayed correctly at server firmware levels prior to 840 SP2. 


DIAGNOSING THE PROBLEM
 

Inspect the profile being activated to determine if any physical I/O are marked as "required" or "desired": 

 * System Management > Servers > (target server),
 * 
 * 
 * Configuration > Manage Profiles 
 * 
 * 
 *  Actions > Edit 
 * 
 * I/O
 * 


[/support/docview.wss?uid=nas8N1021205&aid=2] [/support/docview.wss?uid=nas8N1021205&aid=2] 


RESOLVING THE PROBLEM
A future HMC fix or release level (after 8.8.4 SP1) may enhance the error message to indicate that partition firmware restricts IBM i to pure virtual IO. 

 

To resolve the issue, remove all physical I/O from the profile:
- System Management > Servers > (target server)
- Select the partition, then Configuration > Manage Profiles 
- Select the profile being activated, Actions > Edit and click the I/O tab.
- Remove all I/O and ensure no I/O shows as required or desired.
- Click OK to save the profile.
- Activate the profile. 


To prevent accidental assignment of physical IO in the future, ensure that all profiles with physical IO have been deleted or corrected, then edit partition properties and check the RestrictedIO partition box. Click OK to save the change.
[/support/docview.wss?uid=nas8N1021205&aid=3] [/support/docview.wss?uid=nas8N1021205&aid=3]

IBM i Licensing
The fix is targeted for server firmware 840.2 and later to correctly present IBM i user entitlements with respect to Feature 5052.