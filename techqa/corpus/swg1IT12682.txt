Title: IBM IT12682: MFT BFGPC0008E error 'another instance...is already running' gives insufficient information for problem identification - United States

Text:
 SUBSCRIBE TO THIS APAR
By subscribing, you receive periodic emails alerting you to the status of the APAR, along with a link to the fix after it becomes available. You can track this item individually or track all items by product.

Notify me when this APAR changes.

Notify me when an APAR for this component changes.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  Following a security update on a Windows system, an attempt is
   made to start a WebSphere MQ v7.5 Managed File Transfer agent,
   and the agent fails to start.  The process controller logs
   contains the the following error message:
   
   BFGPC0008E: Another instance of the WebSphere MQ Managed File
   Transfer process controller is already running.
   
   However no instance of the process controller is currently
   running.  The error persists even after a restart of the Windows
   operation system.
   
   
    
   
   

LOCAL FIX
 *  Check that the directory modify permissions on the agent
   directory is sufficient for the process controller to be able to
   write and modify existing files.  If not - add these permissions
   and start the agent.
   
   
    
   
   

PROBLEM SUMMARY
 *  ****************************************************************
   USERS AFFECTED:
   Users of WebSphere MQ Managed File Transfer v7.5, v8.0 and v9.0,
   who have a system which has had its directory permissions
   modified from those created during the installation of the
   product.
   
   
   Platforms affected:
   MultiPlatform
   
   ****************************************************************
   PROBLEM DESCRIPTION:
   A Managed File Transfer (MFT) agent is started using the
   command:
   
     fteStartAgent <AGENT_NAME>
   
   When this is run on a distributed platform, by default a
   component called "process controller" is run to start the agent.
    During the initalization of the process controller, access to a
   file is requested in order to determine if the process
   controller is already running on the system.
   
   If the directory where this lock file is created does not have
   the appropriate permissions to grant the user access to the
   file, then the process controller fails to start and outputs an
   error message of the following form:
   
   $ fteStartAgent AGENT_NAME
   5724-H72 Copyright IBM Corp.  2008, 2013.  ALL RIGHTS RESERVED
   BFGCL0315E: Agent startup failed.
   BFGCL0031I: Agent log files located at:
   /var/mqm/mqft/logs/QMGR_NAME/agents/AGENT_NAME/logs
   
   
   The process controller event log file, located for the above
   agent at the UNIX filesystem location:
   
   /var/mqm/mqft/logs/QMGR_NAME/agents/AGENT_NAME/logs/pcevent0.log
   
   the following error message is output:
   
   BFGPC0008E: Another instance of the WebSphere MQ Managed File
   Transfer process controller is already running.
   
   
   This gives the user no indication as to what the real problem is
   - incorrectly identifying the problem as the process controller
   already being in the running state.
   
   
    
   
   

PROBLEM CONCLUSION
 *  The error message written to the process controller event log
   log file has been updated to include the name of the lock file
   which the process controller is attempting to access.  The new
   error message is of the form:
   
   BFGPC0053E: Unable to obtain exclusive access on a process
   controller lock file.  The error reported was: 'BFGNV0054E:
   Failed to open file
   /var/mqm/mqft/logs/QMGR_NAME/agents/AGENT_NAME/mqmftpc.lck.
   Reason: Permission denied'.  Check if another instance of the
   WebSphere MQ Managed File Transfer process controller is already
   running.
   
   ---------------------------------------------------------------
   The fix is targeted for delivery in the following PTFs:
   
   Version    Maintenance Level
   v7.5       7.5.0.8
   v8.0       8.0.0.6
   v9.0 CD    9.0.1
   v9.0 LTS   9.0.0.1
   
   The latest available FTE maintenance can be obtained from
   'Fix List for WebSphere MQ File Transfer Edition 7.0'
   http://www-01.ibm.com/support/docview.wss?uid=swg27015313 [http://www-01.ibm.com/support/docview.wss?uid=swg27015313]
   
   The latest available MQ maintenance can be obtained from
   'WebSphere MQ Recommended Fixes'
   http://www-1.ibm.com/support/docview.wss?rs=171&uid=swg27006037 [http://www-1.ibm.com/support/docview.wss?rs=171&uid=swg27006037]
   
   If the maintenance level is not yet available information on
   its planned availability can be found in 'WebSphere MQ
   Planned Maintenance Release Dates'
   http://www-1.ibm.com/support/docview.wss?rs=171&uid=swg27006309 [http://www-1.ibm.com/support/docview.wss?rs=171&uid=swg27006309]
   ---------------------------------------------------------------
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   IT12682
   
   
 * REPORTED COMPONENT NAME
   WMQ MFT
   
   
 * REPORTED COMPONENT ID
   5724H7242
   
   
 * REPORTED RELEASE
   750
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt / Xsystem
   
   
 * SUBMITTED DATE
   2015-12-15
   
   
 * CLOSED DATE
   2016-10-21
   
   
 * LAST MODIFIED DATE
   2017-06-01
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   WMQ MFT
   
   
 * FIXED COMPONENT ID
   5724H7242
   
   

APPLICABLE COMPONENT LEVELS
 * R750 PSY
   UP