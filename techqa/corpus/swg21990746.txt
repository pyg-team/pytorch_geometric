Title: IBM Data Server Manager (DSM) server reports Out of Memory errors - United States

Text:
DSM out of memory error OoO Linux java heap size OutOfMemoryError OutOfMemory nproc nofile TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 Problem 1: The Data Server Manager (DSM) server shows 'Out of Memory' error message in log files: java.lang.OutOfMemoryError: Java heap space;
Problem 2:[Linux Redhat version 6 and above]DSM server still reports Out of Memory errors even after increasing the Java Heap Size 

CAUSE
 

Problem 1: Java Heap Size configuration is not enough for your environment
Problem 2: [Linux Redhat version 6 and above]The ulimit setting on Linux for nproc and nofile is not allowing the process to expand


ENVIRONMENT
Problem 1: Linux, Windows 

Problem 2: Linux Redhat version 6 and above


DIAGNOSING THE PROBLEM
 

Problem 1: Data Server Manager (DSM) server reports Out of Memory errors due to Java Heap Size configuration is not enough;
Problem 2: [For Linux Redhat version 6 and above]Data Server Manager (DSM) server still reports Out of Memory errors even after increasing the Java Heap Size as recommended by the DSM manual: Resolving out-of-memory errors [https://www.ibm.com/support/knowledgecenter/en/SS5Q8A_2.1.x/com.ibm.datatools.dsweb.ots.troubleshooting.doc/topics/set_jvm.html]


RESOLVING THE PROBLEM
 

Solution for Problem 1: 

 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * Step 1: increase the JVM configuration
 *  
 * If you have DSM V2.1.3:
   
 * Since DSM V2.1.3, you can customize the parameters for java heap size via DSM webconsole -> Settings->Product Setup->Java Heap Size Configuration 
   OR you can modify /Config/dswebserver.properties. This shell script contains the default values for java heap size and other java starting parameters. You can customize these settings as shown below: 
   
   java com.ibm.datatools.corehttpservices.util.PropertiesFileInsert "${config_file}" -Xms 512M
   java com.ibm.datatools.corehttpservices.util.PropertiesFileInsert "${config_file}" -Xmx 2048M
   java com.ibm.datatools.corehttpservices.util.PropertiesFileInsert "${config_file}" -SERVER_JAVA_OPTS "-Dhttps.protocols=SSL_TLSv2 -Duser.language=en -Duser.region=US -Dclient.encoding.override=UTF-8 -Dfile.encoding=UTF-8 -Djava.awt.headless=true" 
 * 
   If you have DSM V2.1.2:
 * 
 *  Linux or UNIX：  * 
    * /Config/dswebserver.properties
    * 
    * 
    * 
    * java com.ibm.datatools.corehttpservices.util.PropertiesFileUpdater "${config_file}" -Xms 512M
      java com.ibm.datatools.corehttpservices.util.PropertiesFileUpdater "${config_file}" -Xmx 2048M
      java com.ibm.datatools.corehttpservices.util.PropertiesFileUpdater "${config_file}" -SERVER_JAVA_OPTS "Dhttps.protocols=SSL_TLSv2 -Duser.language=en -Duser.region=US -Dclient.encoding.override=UTF-8 -Dfile.encoding=UTF-8"
    * 
   
   Windows：  * 
    * %dsserver_home%/bin/serverenv.bat
    * 
    * 
    * 
    * java com.ibm.datatools.corehttpservices.util.PropertiesFileUpdater %config_file% -Xms 512M
      SET Xms=-Xms512M
    * 
    * java com.ibm.datatools.corehttpservices.util.PropertiesFileUpdater %config_file% -Xmx 2048M
      SET Xmx=-Xmx2048M
   
   
 * 
 * If you have DSM V2.1.1 or lower:
 * 
   
 * You can make more memory available to the Java virtual manager by editing the serverenv.sh or serverenv.bat file:Open [file:Open] the server environment file in a plain-text editor and add memory size values to the file. 
 * 
 * NOTE: 
 * The server environment file is stored in the ibm-datasrvrmgr/bin directory. For example, if you installed to the /usr/ibm/dsm directory in Linux, open the file for editing here:/usr/ibm/dsm/ibm-datasrvrmgr/bin/serverenv.sh 

 *  Linux or UNIX  * 
    * serverenv.sh:
    * 
    * SERVER_JAVA_OPTS="-Xms512m -Xmx2048m" 
      export SERVER_JAVA_OPTS
    * 
   
   Windows  * 
    * serverenv.bat
    * 
    * 
    * 
    * 
   
   
 * Step 2: Restart DSM Server
 * 
 *  After increase the Java Heap Size, Restart the Data Server Manager server. See Starting, stopping, and restarting the server [https://www.ibm.com/support/knowledgecenter/en/SS5Q8A_2.1.0/com.ibm.datatools.dsweb.ots.admin.doc/topics/stop_ots.html?view=kc] . 


Solution for Problem 2: [For Linux Redhat version 6 and above]  * 
 * 
 * 
 *