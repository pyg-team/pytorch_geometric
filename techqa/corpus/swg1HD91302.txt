Title: IBM HD91302: Contextual Link: Target Part needs to be updated twice after  versioning the source part in an exploded structure.... - United States

Text:
 SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PERMANENT RESTRICTION.
    
   
   

ERROR DESCRIPTION
 *  ABSTRACT: Contextual Link: Target Part needs to be updated twice
   after versioning the source part in an exploded structure.
   Additional Fixes Installed:
   
   V5R19SP3 -30
   
   Environment:
   
   Server:
   
   - AIX 5.3
   
   - DB: Oracle 10.2
   
   Client:
   
   - Win XP SP2 (32 bit)
   
   Scenario:
   
   1. Create a PRC with an assembly and two detail parts (source an
   d target) underneath.
   
   2. Create a contextual link between source and target part
   3. Promote source an target part to frozen lifecycle state.
   4. Open the Impacted By Graph on the target part.
   5. Perform a geometrical modification on the source part  ->  th
   e target part requires an update
   
   6. Update the target part
   
   7. Open the ENOVIA Save Management  -> as the two parts are on f
   rozen state, they cannot be saved without versioning
   
   8. Save back target and source part by creating new versions
   9. Refresh the VPM-Navigator tree for the PRC
   
   10. Open the Impacted By  Graph on the target part -> the graph
   shows, that the instances are not up-to-date whereas the geometr
   y was !
   
   11. Close and reload the structure into CATIA -> the target part
    still requires an update (even if it was up-to-date before !
   
   12. Update the target part a second time
   
   13. Save back the modification
   
   14. Refresh the Impacted By Graph on the target part -> now the
   graph shows, that everything is ok
   
   
   
   This behavior is not ok, because there is a high potential for d
   ata inconsistence.
   
   
    
   
   

LOCAL FIX

PROBLEM SUMMARY
 *  ABSTRACT: Contextual Link: Target Part needs to be updated
   twice after versioning the source part in an exploded
   structure.
   Additional Fixes Installed:
   
   V5R19SP3 -30
   
   Environment:
   
   Server:
   
   - AIX 5.3
   
   - DB: Oracle 10.2
   
   Client:
   
   - Win XP SP2 (32 bit)
   
   Scenario:
   
   1. Create a PRC with an assembly and two detail parts (source
   and target) underneath.
   
   2. Create a contextual link between source and target part
   3. Promote source an target part to frozen lifecycle state.
   4. Open the Impacted By Graph on the target part.
   5. Perform a geometrical modification on the source part  ->
   the target part requires an update
   
   6. Update the target part
   
   7. Open the ENOVIA Save Management  -> as the two parts are
   on frozen state, they cannot be saved without versioning
   
   8. Save back target and source part by creating new versions
   9. Refresh the VPM-Navigator tree for the PRC
   
   10. Open the Impacted By  Graph on the target part -> the
   graph shows, that the instances are not up-to-date whereas
   the geometry was !
   
   11. Close and reload the structure into CATIA -> the target
   part still requires an update (even if it was up-to-date
   before !
   12. Update the target part a second time
   
   13. Save back the modification
   
   14. Refresh the Impacted By Graph on the target part -> now
   the graph shows, that everything is ok
   
   
   
   This behavior is not ok, because there is a high potential
   for data inconsistence.
   
   
    
   
   

PROBLEM CONCLUSION
 *  THIS PROBLEM IS PERMANENT RESTRICTION IN ENOVIA VERSION V5R20
   GA level AND ALSO IN V5R19.
   Additional Closure Information:
   Incident Diagnosis:
   Contextual Link: Target Part needs to be updated twice after
   versioning the source part in an
   exploded structure....
   The basic issue is that contextual links are seen unsync in
   IG after (update on contextual  links + versioning + Save)
   from CV5 to EV5.
   Reason:
   The reason behind this behavior is that after versioning on
   server, there is synchronization
   step which synchronizes the instances from session so that
   they start pointing to the newly versioned
   PVs. During this step, the TS (Time Stamp) of instance
   changes on server side (and thus differ from the one
   available on client).
   When this versioning process happens (with instances in
   contention being the contextually linked ones), the
   contextual link (update+save) gets ???unsync??? status during th
   e
   later part of save operation.
   This is the exact problem with this issue, wherein, the TS of
   instances differs in server from the latest available on
   client side at the moment of contextual link save (in the
   same save step).
   In order to fix this issue, we were checking a possibility to
   update the TS info of instances ???real time??? immediately afte
   r
   versioning by setting the new TS in the same save process.
   This will mean that when at later step we compute the
   contextual link save, we could retrieve this updated TS and
   thus links get synchronized!
   However after a few validation tests and checking with PS
   specific scenarios, we feel that this is risky and might lead
   to unforeseen circumstances. That???s because it???s not really
   a
   good idea to set the new TS on instances in CV5 session ???Real
   Time??? when there is no explicit modification happening on
   them in CATIA side! (This might lead to side-effects for eg
   in case of Drawing which will switch to unsync in CATIA V5
   session with new TS )
   Thus, although we might consider setting this new TS on
   instances post versioning, we really cannot
   control any further behavior/cases/applications which would
   still need the old ???unsync??? TS (not to
   cause any REG).
   Finally we feel that its normal to see contextual links as
   ???Unsync??? on server post versioning, because versioning and
   contextual links update is happening in same save transaction
   and internally versioning has changed TS for instances (due
   to Synchronization with latest PVs) and CATIA is oblivious to
   this!
   We propose a PRS closure on this, as per analysis.
   By-Pass:
   The problem is not seen if we separate these 2 steps, meaning
   we do versioning first followed by (modification+update) of
   contextual parts and save again.
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   HD91302
   
   
 * REPORTED COMPONENT NAME
   ENOVIA V5 VPM N
   
   
 * REPORTED COMPONENT ID
   569151400
   
   
 * REPORTED RELEASE
   519
   
   
 * STATUS
   CLOSED PRS
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2009-12-01
   
   
 * CLOSED DATE
   2010-03-23
   
   
 * LAST MODIFIED DATE
   2010-03-23
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION

APPLICABLE COMPONENT LEVELS