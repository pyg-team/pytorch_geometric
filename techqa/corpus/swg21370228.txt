Title: IBM When Accessing WebSphere Commerce Tools Page is Forbidden - 403 - United States

Text:
 TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 When trying to access the WebSphere Commerce tools such as WebSphere Commerce Accelerator, the following message is displayed:

You are not authorized to view this page
HTTP Error 403 - Forbidden

In the Web server's error log, you see a message similar to this: 
[Mon Feb 02 18:11:39 2009] [warn] SSL0235W: SSL Handshake Failed, Invalid peer.
[Mon Feb 02 18:12:33 2009] [warn] SSL0265W: Client did not supply a certificate. 

SYMPTOM
You cannot access any page over https (SSL port 443), or even the WebServer demo page.


CAUSE
This error is caused by incorrect WebServer settings for the SSLClientAuth attribute. SSLClientAuth is a parameter in the httpd.conf file of your instance for one or more virtual host mappings. This attribute is used to request a clients browser to send an SSL certificate to the server. 

Values represent:
0/None: No client certificate is requested (Default Setting)
1/Optional: Client certificate is requested, but not required 
2/Required: Valid client certificate is required 

Currently the WebServer is set to "2" and requires the clients browser to send a valid SSL certificate to the WebServer. In most cases the client will not have a SSL certificate defined and will therefore not send any certificate to the WebServer, making the SSL connection fail.


RESOLVING THE PROBLEM
To resolve this issue please edit all occurrences of SSLClientAuth and change the associated value to either "0" or "1". 

1. Open the httpd.conf file associated with your WebSphere Commerce Instance 

For example: \WebSphere\CommerceServer60\instances\demo\httpconf\httpd.conf 

 

2. Find virtual host mappings that contains the SSLClientAuth attribute currently set to "2" 

For example:
<VirtualHost myserver.mydomain.com:8000>
SSLEnable
SSLClientAuth 2
ServerName myserver.mydomain.com
Alias /wcsstore "WebSphere\AppServer\...Stores.war"
Alias /accelerator "WebSphere\AppServer\...tools/common/accelerator.html"
Alias /wcs "WebSphere\AppServer\...CommerceAccelerator.war"
Alias /wcwkspcadmin "WebSphere\AppServer\...WorkspaceAdministration.war"
Alias /workspaceadmin "WebSphere\AppServer\...wkspcadmin.html"
</VirtualHost> 

 

3. Change the SSLClientAuth attribute value to "0" or "1" 

Where values represent:
0/None: No client certificate is requested (Default Setting)
1/Optional: Client certificate is requested, but not required 
2/Required: Valid client certificate is required 

For example:
<VirtualHost myserver.mydomain.com:8000>
SSLEnable
SSLClientAuth 0
ServerName myserver.mydomain.com
Alias /wcsstore "WebSphere\AppServer\...Stores.war"
Alias /accelerator "WebSphere\AppServer\...tools/common/accelerator.html"
Alias /wcs "WebSphere\AppServer\...CommerceAccelerator.war"
Alias /wcwkspcadmin "WebSphere\AppServer\...WorkspaceAdministration.war"
Alias /workspaceadmin "WebSphere\AppServer\...wkspcadmin.html"
</VirtualHost> 

 

4. Save the file 

5. Restart your WebServer for changes to take affect.