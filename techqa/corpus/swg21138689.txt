Title: IBM Are there any considerations for Notes Instant Messaging or DWA Instant Messaging when using an LDAP directory? - United States

Text:
status bar; lightweight directory; LDAP; chat button; chat link; chat functionality; on-line chat; online chat; active link; chat functionality; buddy list; contact list; Lotus Sametime integration; Sametime Awareness; ST awareness; Sametime IM; Integrated Sametime; Integrated IM; People Awareness; Person Awareness; instant message; instant messaging; IM ; online status; on-line status; on-line; off-line; online; offline; iNotes Web Access 6.5x; iNotes Web Access 6.x; iNotes WA 6.5x; iNotes WA 6.x; IWA 6.5x; IWA 6.x; Domino Web Access 6.5x; Domino Web Access 6.x; Domino WA 6.5x; Domino WA 6.x; DWA 6.5x; DWA 6.x; iNotes Web Access 7.x; Domino Web Access 7.x; DWA 7.x; iNotes WA 7.x; IWA 7.x; iNotes7.ntf; DWA7 design; DWA7.ntf; iNotes6.ntf; iNotes60.ntf; iNotes5.ntf; design; blue ui; blue user interface; brown user interface TECHNOTE (FAQ)

QUESTION
For the administrator, are there any considerations for IBM Lotus Notes Instant Messaging or IBM Lotus Domino Web Access (DWA) Instant Messaging when an IBM Lotus Instant Messaging (Sametime) server is configured to use a Lightweight Directory Access Protocol (LDAP) directory rather than a native Domino directory?

ANSWER
Both Notes Instant Messaging and Domino Web Access Instant Messaging authenticate users against whatever directory is configured for the Sametime server. If the Sametime administrator has configured the Sametime server to use an LDAP directory, Notes Instant Messaging and Domino Web Access Instant Messaging will authenticate users against that LDAP directory. 

The main consideration in this environment is whether the LDAP schema (for the Person records) includes the Notes abbreviated hierarchical format for user names. The Notes abbreviated hierarchical name format looks like this: 


 * 


If the LDAP schema includes the Notes abbreviated hierarchical name format, the user simply logs into Notes instant messaging (via the "Log on to instant messaging" dialog box) using the Notes name. 

If the LDAP schema does not include the Notes abbreviated hierarchical format (or only has the Notes canonical hierarchical name format), Notes instant messaging cannot authenticate the user via the Notes name. In the "Log on to instant messaging" dialog box, the user must enter the name that can be authenticated against the LDAP directory. 

There is one way for the LDAP schema to include the Notes abbreviated hierarchical format for user names: 
 * Use an existing attribute (in the Person record) for the Notes abbreviated hierarchical name


This approach is explained below in more detail and in the larger context of name resolution when Sametime is using an LDAP directory. 

When a Sametime server is configured to use an LDAP directory, Sametime uses search filters to resolve user names. (These search filters are defined by the Sametime Administrator via the Sametime Administration Tool or via the STCONFIG.NSF database.) Below are some sample search filters: 

Search filter for resolving person names:  * 
 * 


Search filter to use when resolving a user name to a distinguished name: 
 * 


In these examples, the filters are using the following LDAP attributes: 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 

For performance reasons, you should limit your search filters to the following LDAP attributes: 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * *See note below
 * 
 * 
 * 
 * 
 * **See note below


Fields other than the five listed above will force the LDAP server to resolve the search from the full text index, which is slower than resolving from the LDAP hidden views. Also, you cannot use the Full Name field because it is a names field, and adding John Brown/Miami/Acme to this field will save CN=John Brown/OU=Miami/O=Acme to the LDAP table. 

* - the mail attribute can cause a full-text search to be performed in certain situations in Domino 7 and later. See technote 1231833. For this reason, the mail attribute should not be used in Domino 7 unless the full-text search for the mail attribute is disabled, which can be done in version 7.0.4 and later. 

** - the displayName attribute is only available on Domino 7.0.2 and later servers. 

One way for the LDAP schema to include the Notes abbreviated hierarchical name format is for one of these existing attributes to include the Notes hierarchical format in the shortname field. For instance, a Person record for John Brown could look something like this: 

First Name= John Last Name= Brown Full Name= John Brown/Miami/Acme
John Brown ShortName= jbrown
John Brown/Miami/Acme 
The resulting information saved to the corresponding fields in LDAP : 


givenname= John sn= Brown DN: CN=John Brown/OU=Miami/O=Acme CN= John Brown uid= jbrown uid= John Brown/Miami/Acme 

In this scenario, the search filters in Sametime would be changed to the following: 

Search filter for resolving person names:  * 
 *  

Search filter to use when resolving a user name to a distinguished name:  * 



Information Specific to Domino Web Access 

With respect to DWA, there is a Notes.ini parameter for defining the name format for an LDAP directory: iNotes_WA_SametimeNameFormat=#### 

This parameter enables you to specify the format of the name that is passed to the Sametime server for awareness checking. The default format is User Name/OU/O, which works only when the LDAP schema includes the Notes abbreviated hierarchical format. By default, the LDAP schema does not contain the Notes abbreviated hierarchical format. 

Example: 

If you are using a Domino LDAP directory, you could use the following values to configure the use of the Canonical name format (CN=First Last/O=Company) 
 * 
 * 

For more information please see this section at the bottom of this technote: "Options for Configuring the iNotes_WA_SametimeNameFormat Parameter" 

Common Question: Q: Is the use of the Home Sametime Server Attribute required for online awareness to work within a Notes 6.5 Client? 

A: No. It is not a requirement to have this defined in the Stconfig.nsf file. If it is defined, it will not cause a problem for the Notes Instant Messaging authentication. It will work in the same manner that the Sametime Connect client for Desktops does.

For more information:

For more information on configuring a Sametime server to use an LDAP directory, refer to the Sametime Administrator's Guide and Technotes (search on "Sametime and LDAP").


Options for Configuring the iNotes_WA_SametimeNameFormat Parameter 

Syntax: iNotes_WA_SametimeNameFormat=value 

Description: Allows you to adjust the format of the name that is passed to Sametime for login, for awareness checking, and whether to pass RFC821 names. The value can contain up to 4 numeric digits in sequence. 

For example: 

iNotes_WA_SametimeNameFormat=1011 

where the following values apply:

First digit (left most) -- controls the format of the name passed to Sametime routines that prepare links and start chat sessions:
0 = Use abbreviated canonical format (for example, Joe User/Acme) [the default]
1 = Use full canonical format (for example, CN=Joe User/O=Acme)
2 = Use abbreviated canonical format but use a comma ( , ) as a separator for the name components (for example, CN=Joe User,O=Acme)
3 = Use only the common name (for example, Joe User) 

2nd digit -- controls whether RFC821 addresses (for example, Joe User@acme.com) should be sent to Sametime:
0 = No, do not send
1 = Yes, do send [the default] 

3rd digit -- controls the format of the name passed to Sametime login routines:
0 = Use abbreviated canonical format (for example, Joe User/Acme) 
1 = Use full canonical format (for example, CN=Joe User/O=Acme) [the default]
2 = Use abbreviated canonical format but use a comma ( , ) as a separator for the name components (for example, CN=Joe User,O=Acme)
3 = Use only the common name (for example, Joe User) 

4th digit -- a debug aide that when the users hovers over a link, the name that displays is identical to the name sent to Sametime. Use any character in the fourth position to enable this.

Applies to: Domino Web Access clients using iNotes6.NTF based templates 

Default: 011 

UI equivalent: None

RELATED INFORMATION
 What is the Purpose of the STRESOLVE Task? [http://www.ibm.com/support/docview.wss?uid=swg21194761]