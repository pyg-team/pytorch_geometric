Title: IBM MS BizTalk monitoring agent returns no data for application status - United States

Text:
5724C0BIZTR tivoli ibm itcam TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 ITCAM agent for Microsoft BizTalk server displays blank 'Application Status' view in Configuration and Status workspace of Tivoli Enterprise Portal (TEP). 

SYMPTOM
You have configured ITCAM agent for Microsoft BizTalk Server, and specified connection user/password for Microsoft SQL Server database. The agent displays data in all other workspaces of the agent, except the 'Application Status' view of "Configuration and Status" workspace, which displays no data.


CAUSE
This problem can occur due to one or both of the following reasons: 

1) The agent user configured to connect to SQL server of BizTalk server has insufficient permissions to access SQL server.
2) The data retrieval for application status is taking longer than the time out setting of the agent.


DIAGNOSING THE PROBLEM
Select Configuration and Status workspace in TEP, notice that the 'Application Status' view is blank as shown in the screen print below, but there is data displayed for 'BizTalk group Server Host' view. 


[/support/docview.wss?uid=swg21654888&amp;aid=1][/support/docview.wss?uid=swg21654888&aid=2] [/support/docview.wss?uid=swg21654888&aid=2]


RESOLVING THE PROBLEM
Resolution consists of two steps, 1) correct the authentication of the agent to MS SQL database used by BizTalk server, 2) Increase the time out period for the agent. 

1) Ensure that the agent user has been set up with correct permissions: 

a) Configure agent using Manage Tivoli Enterprise Management Services (MTEMS) - in the "Configuration for the Application Status attribute group" window, set "Use Windows Authentication" to true. (Agent configuration setting for API File Path can be left at default) 
b) Add domain user to Local Administrator Group on BizTalk Server. For example, domain ID: IBM\tivoli. 
c) Give right "Log on as service" to the domain user in the "Local Policy --> User Rights Assignment" on BizTalk Server 
d) Add this domain user to SQL Server database and grant 'sysadmin' rights 
e) Set agent service to run as the domain user (for example IBM\tivoli ) 

2) Increase agent timeout setting: 
From MTEMS, right click the agent, and select -> edit variables -> Add 

CDP_COLLECTION_TIMEOUT=200 

Restart the agent and check if 'Application Status' view is populated.