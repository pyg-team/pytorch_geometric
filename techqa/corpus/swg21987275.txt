Title: IBM No error or warning message when collecting statistics on nicknames for remote views - United States

Text:
 TECHNOTE (FAQ)

QUESTION
 What is the reason that SYSPROC.NNSTAT stored procedure does not report error or warning when collecting statistics on nicknames that are defined for remote views ? 

ANSWER
There are three options for running SYSPROC.NNSTAT stored procedure.
method 0: NNSTAT will collect statistics by method 1, 
it will continue to use method 2 if method 1 can not collect 
any statistics.
method 1: NNSTAT will collect statistics by catalog. 
If there is No statistics in catalog for remote view, 
NNSTAT does not collect any statistics for remote view.
method 2: NNSTAT will collect statistics by some SQL, 
such as we get CARD by select count(*) from nickname. 
So method 2 will collect most statistics 
even if remote table is view.

Using method 1 against remote view results in -1 card value as remote view does not have any statistic 
in the remote datasource,
-1 means no statistics.
Therefore in case no statistics in catalog for remote view, so card becomes -1 with using method 1.

NNSATA finishes all operations even if there is no statistics.
And that reports as successful.
NNSTAT will report when we get error in running NNSTAT,
but NNSATA does not regard 'no statistics' as an error.


For example, NICKVIEW refers the view on remote source.

1) method '0' : Finishes with successful message.

db2 "CALL SYSPROC.NNSTAT('FEDER_SERVER','DB2INST1','NICKVIEW',NULL,NULL,0,NULL,?)"

Value of output parameters
--------------------------
Parameter Name : OUT_TRACE
Parameter Value : Successful

Return Status = 0


Collected the statistics by method 2

db2 "select tabname,CARD from sysstat.tables where tabname like 'NICKVIEW'"

TABNAME CARD
-------------- --------------------
NICKVIEW 3

1 record(s) selected.


2) method '1' : Finishes with successful message even if it could not get statistics.

db2 "CALL SYSPROC.NNSTAT('FEDER_SERVER','DB2INST1','NICKVIEW',NULL,NULL,1,NULL,?)"

Value of output parameters
--------------------------
Parameter Name : OUT_TRACE
Parameter Value : Successful

Return Status = 0

CARD becomes -1 as method 1 cannot get statistics in this case.

db2 "select tabname,CARD from sysstat.tables where tabname like 'NICKVIEW'"

TABNAME CARD
--------------- --------------------
NICKVIEW -1

1 record(s) selected.


RELATED INFORMATION
 Methods of retrieving nickname statistics [https://www.ibm.com/support/knowledgecenter/en/SSEPGG_9.7.0/com.ibm.swg.im.iis.fed.query.doc/topics/iiyfqnnsmtd.html]
SYSPROC.NNSTAT stored procedure [https://www.ibm.com/support/knowledgecenter/en/SSEPGG_9.7.0/com.ibm.swg.im.iis.fed.query.doc/topics/rfpsts08.html]





Cross reference information Segment Product Component Platform Version Edition Information Management DB2 for Linux- UNIX and Windows Information Management InfoSphere Federation Server