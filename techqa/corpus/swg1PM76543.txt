Title: IBM PM76543: RAF can not delete port from target using promoted environment - United States

Text:
  FIXES ARE AVAILABLE
Rational Automation Framework 3.0.1 [http://www-01.ibm.com/support/docview.wss?uid=swg24034619]
Rational Automation Framework Fix Pack 2 (3.0.1.2) for 3.0.1 [http://www-01.ibm.com/support/docview.wss?uid=swg24037116]


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  1. Problem
   
       RAF can not delete port from target using promoted
   environment
   
       To deleted port from source WAS, delete port from source WAS
   and import/promote and execute the environment on target. But it
   does not delete expected port from target system.
   
   2. Environment
       RAF 3.0.0.2
       RHEL54 X64
   
   3. Reproduce steps
   
   For import;
   ==? cell scope
   ${RAFW_HOME}/bin/rafw${SCRIPT_EXT} -env  ${ENVIRONMENT} -cell
   ${CELL_NAME} -import was_common_configure_all -opt
   'useLongRunningWsadmin=true' $ {PREVIEW}
   ==? server entries for dmgr
   ${RAFW_HOME}/bin/rafw${SCRIPT_EXT} -env  ${ENVIRONMENT} -cell
   ${CELL_NAME} -node ${ND_NODE_NAME}  -import
   was_common_configure_server_entries -opt
   'useLongRunningWsadmin=true' ${PREVIEW}
   ==? cluster scope
   (Condition)true(${NUMBER_OF_CLUSTERS}?0)
   .drill ${CLUSTERS} exec '${BATCH_COMMAND}
   ${RAFW_HOME}/bin/rafw${SCRIPT_EXT} -env  ${ENVIRONMENT} -cell
   ${CELL_NAME} -cluster $1 -import was_common_configure_all -opt
   'useLongRunningWsadmin=true' ${PREVIEW}'
   ==?  server entries for node
   .drill ${NODES} exec '${BATCH_COMMAND}
   ${RAFW_HOME}/bin/rafw${SCRIPT_EXT} -env  ${ENVIRONMENT} -cell
   ${CELL_NAME} -node $1 -import
   was_common_configure_server_entries -opt
   'useLongRunningWsadmin=true' ${PREVIEW}'
   ==? node scope
   .drill ${NODES} exec '${BATCH_COMMAND}
   ${RAFW_HOME}/bin/rafw${SCRIPT_EXT} -env  ${ENVIRONMENT} -cell
   ${CELL_NAME} -node $1 -import was_common_configure_all -opt
   'useLongRunningWsadmin=true' ${PREVIEW}'
   ==? server configure at cluster
   (Condition)true(${NUMBER_OF_CLUSTERS}?0)
   .drill ${CLUSTERS} exec '${BATCH_COMMAND}
   ${RAFW_HOME}/bin/rafw${SCRIPT_EXT} -env  ${ENVIRONMENT} -cell
   ${CELL_NAME} -cluster $1 -import was_common_configure_server_all
   ${PREVIEW}'
   
   For promote;
   ==? cell scope
   ${RAFW_HOME}/bin/rafw${SCRIPT_EXT} -env  ${ENVIRONMENT} -cell
   ${CELL_NAME} -promote was_common_configure_all -opt
   'source.env=${SOURCE_ENV}' -opt 'source.cell=${SOURCE_CELL}'
   -opt 'useLongRunningWsadmin=true' ${PREVIEW}
   ==? server entries for dmgr
   ${RAFW_HOME}/bin/rafw${SCRIPT_EXT} -env  ${ENVIRONMENT} -cell
   ${CELL_NAME} -node ${ND_NODE_NAME}  -promote
   was_common_configure_server_entries -opt
   'source.env=${SOURCE_ENV}' -opt 'source.cell=${SOURCE_CELL}'
   -opt 'source.node=${SOURCE_ND_NODE_NAME}'  -opt
   'useLongRunningWsadmin=true' ${PREVIEW}
   ==? cluster scope
   (Condition)true(${NUMBER_OF_CLUSTERS}?0)
   .drill ${CLUSTERS} exec '${BATCH_COMMAND}
   ${RAFW_HOME}/bin/rafw${SCRIPT_EXT} -env  ${ENVIRONMENT} -cell
   ${CELL_NAME} -cluster $1 -promote was_common_configure_all -opt
   'source.env=${SOURCE_ENV}' -opt 'source.cell=${SOURCE_CELL}'
   -opt 'source.cluster=$1' -opt 'useLongRunningWsadmin=true'
   ${PREVIEW}'
   ==?  server entries for node
   .drill ${NODES} exec '${BATCH_COMMAND}
   ${RAFW_HOME}/bin/rafw${SCRIPT_EXT} -env  ${ENVIRONMENT} -cell
   ${CELL_NAME} -node $1 -promote
   was_common_configure_server_entries  -opt
   'source.env=${SOURCE_ENV}' -opt'source.cell=${SOURCE_CELL}' -opt
   'source.node=$1' -opt 'useLongRunningWsadmin=true' ${PREVIEW}'
   ==? node scope
   .drill ${NODES} exec '${BATCH_COMMAND}
   ${RAFW_HOME}/bin/rafw${SCRIPT_EXT} -env  ${ENVIRONMENT} -cell
   ${CELL_NAME} -node $1 -promote was_common_configure_all -opt
   'source.env=${SOURCE_ENV}' -opt 'source.cell=${SOURCE_CELL}'
   -opt 'source.node=$1' -opt 'useLongRunningWsadmin=true'
   ${PREVIEW}'
   ==? server configure at cluster
   (Condition)true(${NUMBER_OF_CLUSTERS}?0)
   .drill ${CLUSTERS} exec '${BATCH_COMMAND}
   ${RAFW_HOME}/bin/rafw${SCRIPT_EXT} -env  ${ENVIRONMENT} -cell
   ${CELL_NAME} -cluster $1 -promote
   was_common_configure_server_all ${PREVIEW} -opt
   'source.env=${SOURCE_ENV}' -opt 'source.cell=${SOURCE_CELL}'
   -opt 'source.cluster=$1' '
   
   For execute;
   ==? cell scope
   ${RAFW_HOME}/bin/rafw${SCRIPT_EXT} -env  ${ENVIRONMENT} -cell
   ${CELL_NAME} -execute was_common_configure_all -opt
   'useLongRunningWsadmin=true' ${PREVIEW}
   ==? server entries for dmgr
   ${RAFW_HOME}/bin/rafw${SCRIPT_EXT} -env  ${ENVIRONMENT} -cell
   ${CELL_NAME} -node ${ND_NODE_NAME}  -execute
   was_common_configure_server_entries ${PREVIEW}
   ==? cluster scope
   (Condition)true(${NUMBER_OF_CLUSTERS}?0)
   .drill ${CLUSTERS} exec '${BATCH_COMMAND}
   ${RAFW_HOME}/bin/rafw${SCRIPT_EXT} -env  ${ENVIRONMENT} -cell
   ${CELL_NAME} -cluster $1 -execute was_common_configure_all -opt
   'useLongRunningWsadmin=true' ${PREVIEW}'
   ==?  server entries for node
   .drill ${NODES} exec '${BATCH_COMMAND}
   ${RAFW_HOME}/bin/rafw${SCRIPT_EXT} -env  ${ENVIRONMENT} -cell
   ${CELL_NAME} -node $1 -execute
   was_common_configure_server_entries ${PREVIEW}'
   ==? node scope
   .drill ${NODES} exec '${BATCH_COMMAND}
   ${RAFW_HOME}/bin/rafw${SCRIPT_EXT} -env  ${ENVIRONMENT} -cell
   ${CELL_NAME} -node $1 -execute was_common_configure_all
   ${PREVIEW}'
   ==? server configure at cluster
   (Condition)true(${NUMBER_OF_CLUSTERS}?0)
   .drill ${CLUSTERS} exec '${BATCH_COMMAND}
   ${RAFW_HOME}/bin/rafw${SCRIPT_EXT} -env  ${ENVIRONMENT} -cell
   ${CELL_NAME} -cluster $1 -execute
   was_common_configure_server_all ${PREVIEW}'
   
   4. Workaround
       delete ports on WAS admin console.
   
   
    
   
   

LOCAL FIX

PROBLEM SUMMARY
 *  ****************************************************************
   * USERS AFFECTED:                                              *
   ****************************************************************
   * PROBLEM DESCRIPTION:                                         *
   ****************************************************************
   * RECOMMENDATION:                                              *
   ****************************************************************
   Rational Automation Framework did not add or remove ports
   from a server in a live cell when ports were promoted from
   one cell to another using Rational Automation Framework.
   The old ports remained the same which meant actions had no
   effect on ports in a live cell.
   
   
    
   
   

PROBLEM CONCLUSION
 *  While processing the server entries metadata in Rational
   Automation Framework, the framework server did not compare
   server entries between the live cell and the data in the
   framework server, so it would not notice that there were
   differences that needed to be update/changed/applied.
   
   The framework server now inspects the cell to look for
   differences in server entries when applying data in execute
   mode.  This means that it can see differences and
   create/delete differences between the live cell and cell
   representation within the framework server.
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   PM76543
   
   
 * REPORTED COMPONENT NAME
   BUILD FORGE SE
   
   
 * REPORTED COMPONENT ID
   5724S2706
   
   
 * REPORTED RELEASE
   300
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2012-11-06
   
   
 * CLOSED DATE
   2013-06-14
   
   
 * LAST MODIFIED DATE
   2013-06-14
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   RATL AUTOMATION
   
   
 * FIXED COMPONENT ID
   5725E2600
   
   

APPLICABLE COMPONENT LEVELS
 * R300 PSN
   UP