Title: IBM PI19721: BACKWARDS MIGRATION FROM V8 AND COEXISTENCE WITH V8 - United States

Text:
z/os  A FIX IS AVAILABLE
Obtain the fix for this APAR.


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS NEW FUNCTION.
    
   
   

ERROR DESCRIPTION
 *  Allow V701 or V710 queue-manager backwards migration from V8,
   and coexistence with a V8 queue-manager in a queue-sharing
   group.
   .
   Trying to migrate to V8 without the queue-managers in the
   queue-sharing group having been previously started with the PTF
   for this APAR will result in CSQ5005E and the queue-manager
   terminating with CSQV086E REASON 00F50029.
   .
   Note for L2/L3 : after applying the PTF and restarting the
   queue-manager, MVERSIONH (T02_MVERSIONH) in DB2 will be
   updated to 7 if all queue-managers are at the same level
   (i.e. all at V701 or all at V710; MVERSIONH 4 will 4 otherwise).
   .
   Additional keywords:
   MQ0800C/K toleration
   
   
    
   
   

LOCAL FIX

PROBLEM SUMMARY
 *  ****************************************************************
   * USERS AFFECTED: All users of WebSphere MQ for z/OS Version 7 *
   *                 Release 0 Modification 1 and Version 7       *
   *                 Release 1 Modification 0                     *
   ****************************************************************
   * PROBLEM DESCRIPTION: Enable backward migration to version    *
   *                      7.0.1 after a queue manager has been    *
   *                      started with the version 8.0.0 code.    *
   *                                                              *
   *                      Enable backward migration to version    *
   *                      7.1.0 after a queue manager has been    *
   *                      started with the version 8.0.0 code.    *
   *                                                              *
   *                      Enable version 7.0.1 queue managers to  *
   *                      co-exist in a queue sharing group with  *
   *                      version 8.0.0 queue managers.           *
   *                                                              *
   *                      Enable version 7.1.0 queue managers to  *
   *                      co-exist in a queue sharing group with  *
   *                      version 8.0.0 queue managers.           *
   ****************************************************************
   * RECOMMENDATION:                                              *
   ****************************************************************
   PTFs for the backward migration APAR must be applied on version
   7 queue managers prior to attempting fallback from IBM MQ for
   z/OS version 8.0.0.
   
   Attempting to restart a queue manager, which has been run with
   version 8.0.0 libraries, at version 7 without this PTF will
   result in abnormal termination of the queue manager with
   ABEND5C6 reason code 00C90D01.
   
   The WebSphere MQ for z/OS ISPF administration panels, CSQOREXX,
   are not updated by this APAR. The version 8.0.0 CSQOREXX
   application is able to connect to and administer both version
   7.0.1 and 7.1.0 queue managers and you are advised to use either
   version 8.0.0 panels, or those at the same level as your queue
   manager during the period of migration. In a mixed version queue
   sharing group, version 8 panels must be used for group
   operations such as modifying QSGDISP(GROUP) objects and
   targeting operations at the entire queue sharing group.
   
   Version specific notes follow:
   
   When reverting to Version 7.0.1 after running a queue manager at
   version 8.0.0 the following should be considered:
   
   
   - CHLAUTH objects are stored on the SYSTEM.CHLAUTH.DATA.QUEUE.
     They will not be visible at Version 7.0.1 but will reappear
     when the queue manager is subsequently restarted at Version
     8.0.0
   
   - New object attributes introduced in Version 8.0.0 will not be
     present in Version 7.0.1, and when you subse1uently migrate to
     Version 8.0.0 they will be reset to default values.
   
   - If you are using the MQ Explorer to administer your queue
     manager then after migration between releases the following
     Explorer actions must be performed:
     1: Remove the migrated z/OS queue manager
     2: Add Remote Queue Manager
   
   - AUTHINFO objects with AUTHTYPE(IDPWOS) will be deleted on
     backward migration. Any QSGDISP(GROUP) AUTHINFO objects with
     AUTHTYPE(IDPWOS) will be invisible to a Version 7.0.1 queue
     manager in a mixed Version 8.0.0 and Version 7.0.1 queue
     sharing group.
   
   - TOPIC objects with CLROUTE(TOPICHOST) attribute set will be
     deleted on backward migration. Any QSGDISP(GROUP) TOPIC
     objects having CLROUTE(TOPICHOST) attribute set are hidden
     from a Version 7.0.1 queue manager in a mixed Version 8.0.0
     and Version 7.0.1 queue sharing group.
   
   - Proxy subscriptions created on behalf of remote subscribers
     for TOPICs defined with CLROUTE(TOPICHOST) attribute will be
     deleted when the TOPIC object is removed on backwards
     migration.
   
   - When there are subscribers on the queue manager being backward
     migrated, for TOPICs defined with CLROUTE(TOPICHOST) on
     different queue managers, the proxy subs for these subscribers
     will be left on the queue managers hosting the topic. The
     local subscriber will continue to receive publications. If the
     queue manager hosting the TOPIC is also backwards migrated,
     then the proxy subs will be deleted. These subscriptions can
     be identified by issuing DISPLAY SUB(SYSTEM.PROXY_2*)
     SUBTYPE(PROXY) on the remote host queue managers and looking
     for subscriptions with a DESTQMGR matching the local queue
     manager which is being backwards migrated. They can then be
     deleted as for any administrative subscription using the
     DELETE SUB command.
   
   When reverting to Version 7.1.0 after running a queue manager at
   version 8.0.0 the following should be considered:
   
   
   - New object attributes introduced in Version 8.0.0 will not be
     present in Version 7.1.0, and when you subsequently migrate to
     Version 8.0.0 they will be reset to default values.
   
   - If you are using the MQ Explorer to administer your queue
     manager then after migration between releases the following
     Explorer actions must be performed:
     1: Remove the migrated z/OS queue manager
     2: Add Remote Queue Manager
   
   - AUTHINFO objects with AUTHTYPE(IDPWOS) will be deleted on
     backward migration. Any QSGDISP(GROUP) AUTHINFO objects with
     AUTHTYPE(IDPWOS) will be invisible to a Version 7.1.0 queue
     manager in a mixed Version 8.0.0 and Version 7.1.0 queue
     sharing group.
   
   - TOPIC objects with CLROUTE(TOPICHOST) attribute set will be
     deleted on backward migration. Any QSGDISP(GROUP) TOPIC
     objects having CLROUTE(TOPICHOST) attribute set are hidden
     from a Version 7.1.0 queue manager in a mixed Version 8.0.0
     and Version 7.1.0 queue sharing group.
   
   - Proxy subscriptions created on behalf of remote subscribers
     for TOPICs defined with CLROUTE(TOPICHOST) attribute will be
     deleted when the TOPIC object is removed on backwards
     migration.
   
   - When there are subscribers on the queue manager being backward
     migrated, for TOPICs defined with CLROUTE(TOPICHOST) on
     different queue managers, the proxy subs for these subscribers
     will be left on the queue managers hosting the topic. The
     local subscriber will continue to receive publications. If the
     queue manager hosting the TOPIC is also backwards migrated,
     then the proxy subs will be deleted. These subscriptions can
     be identified by issuing DISPLAY SUB(SYSTEM.PROXY_2*)
     SUBTYPE(PROXY) on the remote host queue managers and looking
     for subscriptions with a DESTQMGR matching the local queue
     manager which is being backwards migrated. They can then be
     deleted as for any administrative subscription using the
     DELETE SUB command.
   
   
    
   
   

PROBLEM CONCLUSION

TEMPORARY FIX

COMMENTS
 *  &#215;**** PE15/12/17 FIX IN ERROR. SEE APAR PI54383 [http://www-01.ibm.com/support/docview.wss?uid=swg1PI54383]  FOR DESCRIPTION
   
   
    
   
   

APAR INFORMATION
 * APAR NUMBER
   PI19721
   
   
 * REPORTED COMPONENT NAME
   WMQ Z/OS V7
   
   
 * REPORTED COMPONENT ID
   5655R3600
   
   
 * REPORTED RELEASE
   010
   
   
 * STATUS
   CLOSED UR1
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt / Xsystem
   
   
 * SUBMITTED DATE
   2014-06-11
   
   
 * CLOSED DATE
   2014-10-03
   
   
 * LAST MODIFIED DATE
   2016-01-14
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
    UI21966 UI21967
   
   

MODULES/MACROS
 *  CSQERIND CSQERIN1 CSQERWI1 CSQESTRF CSQIECUR
   CSQIERS3 CSQMCIGI CSQMDURR CSQP1INI CSQXRFIC CSQYSCMD CSQ5AROB
   CSQ5AUOB CSQ5CONN CSQ5LOBC CSQ5PQSG CSQ5READ CSQ5R701 CSQ5R710
   CSQ5UPDT CSQ5U701
   
   
    
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   WMQ Z/OS V7
   
   
 * FIXED COMPONENT ID
   5655R3600
   
   

APPLICABLE COMPONENT LEVELS
 * R010 PSY UI21966 [HTTPS://WWW14.SOFTWARE.IBM.COM/WEBAPP/SET2/ORDERMEDIA/SHOPCART?PTFS=UI21966]
   UP14/10/24 P F410
   
   
 * R100 PSY UI21967 [HTTPS://WWW14.SOFTWARE.IBM.COM/WEBAPP/SET2/ORDERMEDIA/SHOPCART?PTFS=UI21967]
   UP14/10/24 P F410
   
   

FIX IS AVAILABLE
 * SELECT THE PTF APPROPRIATE FOR YOUR COMPONENT LEVEL. YOU WILL BE REQUIRED TO SIGN IN. DISTRIBUTION ON PHYSICAL MEDIA IS NOT AVAILABLE IN ALL COUNTRIES.