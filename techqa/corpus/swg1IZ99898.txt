Title: IBM IZ99898: CTJTI0191E THE GUID MIGRATION FAILS. - United States

Text:
 SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  During guid migration from TADDM 720 to 721 errors occur. This
   can occur with both DB2 and Oracle. The following errors may be
   found in migration.log;
   
   
   For DB2;
   
   com.ibm.db2.jcc.b.SqlException: [jcc][t4][10120][10898][3.53.95]
   Invalid
    operation: result set is closed. ERRORCODE=-4470, SQLSTATE=null
    at com.ibm.db2.jcc.b.bd.a(bd.java:660)
    at com.ibm.db2.jcc.b.bd.a(bd.java:60)
    at com.ibm.db2.jcc.b.bd.a(bd.java:103)
    at com.ibm.db2.jcc.b.vl.Eb(vl.java:4176)
    at com.ibm.db2.jcc.b.vl.c(vl.java:312)
    at com.ibm.db2.jcc.b.vl.next(vl.java:291)
    at
   com.ibm.cdb.topomgr.migration.guid.BindAddressGuidMigration.upda
   teBindAddresses(BindAddressGuidMigration.java:209)
    at
   com.ibm.cdb.topomgr.migration.guid.BindAddressGuidMigration.proc
   essBindAddresses(BindAddressGuidMigration.java:150)
   
   
   
   Exception stack trace:
   com.ibm.db2.jcc.am.SqlException: DB2 SQL Error: SQLCODE=-805,
   SQLSTATE=51002, SQLERRMC=NULLID.SYSLH203 0X5359534C564C3031,
   DRIVER=3.59.810001
   
   
   For Oracle;
   
   2011-05-12 10:24:42,580 guid.BindAddressGuidMigration - Master
   is in migrated state, updating with alias information for
   master:C52024085BB93A8D923912A4DA3C2D8E
   2011-05-12 10:24:42,580 guid.BindAddressGuidMigration - ENTRY:
   updateNRSMasterGuid: C52024085BB93A8D923912A4DA3C2D8E
   2011-05-12 10:24:42,619 guid.BindAddressGuidMigration -
   java.sql.SQLException: ORA-00604: error occurred at recursive
   SQL level 1
   ORA-01000: maximum open cursors exceeded
   
   ..
   
   2011-05-12 10:24:45,095 guid.BindAddressGuidMigration -
   updateAppServers - Result set opened for query: select GUID_X,
   KEYNAME_X from appsrvr where PK__PRIMARYSAP_X = ? and KEYNAME_X
   is not null
   2011-05-12 10:24:45,104 guid.BindAddressGuidMigration -
   com.ibm.tivoli.namereconciliation.common.NrsDatabaseException:
   3001. An unexpected database system error has occurred.
   
   
   ..
   
   
   2011-05-12 10:28:51,338 guid.BindAddressGuidMigration -
   Processing bind address: IpAddress=0.0.0.0
   (AA61489904873DC69345B6CC3EECD8DC-0),
   PrimaryIpAddress=172.25.30.121 (4BF5FB5C
   A0AB3F01BDE32FA582764756) currentAddressSpace=null
   2011-05-12 10:28:51,338 topomgr.TopologyManagerFactory -
   persistObject invocation failed
   java.lang.NullPointerException
   
   
    
   
   

LOCAL FIX

PROBLEM SUMMARY
 *  During migration from release 7.2.0 to 7.2.1, the following
   error occurs:
   
   CTJTI0191E THE GUID MIGRATION FAILS
   
   In the GUID migration log
   (dist/log/migration/7.2.1/<timestamp>-GuidByID.log), you will
   see the following exception:
   
   com.ibm.db2.jcc.b.SqlException: [jcc][t4][10120][10898][3.53.95]
   Invalid operation: result set is closed.
    ERRORCODE=-4470, SQLSTATE=null
    at com.ibm.db2.jcc.b.bd.a(bd.java:660)
    at com.ibm.db2.jcc.b.bd.a(bd.java:60)
    at com.ibm.db2.jcc.b.bd.a(bd.java:103)
    at com.ibm.db2.jcc.b.vl.Eb(vl.java:4176)
    at com.ibm.db2.jcc.b.vl.c(vl.java:312)
    at com.ibm.db2.jcc.b.vl.next(vl.java:291)
    at
   com.ibm.cdb.topomgr.migration.guid.BindAddressGuidMigration.upda
   teBindAddresses(BindAddressGuidMigration.java:209)
    at
   com.ibm.cdb.topomgr.migration.guid.BindAddressGuidMigration.proc
   essBindAddresses(BindAddressGuidMigration.java:150)
   
   
    
   
   

PROBLEM CONCLUSION
 *  The fix for this APAR is contained in the following maintenance
   packages:
   | Fix Pack | 7.2.1-TIV-ITADDM-FP0001
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   IZ99898
   
   
 * REPORTED COMPONENT NAME
   APP DEPENDENCY
   
   
 * REPORTED COMPONENT ID
   5724N5500
   
   
 * REPORTED RELEASE
   721
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   YesHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2011-05-04
   
   
 * CLOSED DATE
   2011-08-09
   
   
 * LAST MODIFIED DATE
   2011-08-09
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
    IZ99906 [http://www-01.ibm.com/support/docview.wss?uid=swg1IZ99906]
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   APP DEPENDENCY
   
   
 * FIXED COMPONENT ID
   5724N5500
   
   

APPLICABLE COMPONENT LEVELS
 * R721 PSY UP
   IZ99898