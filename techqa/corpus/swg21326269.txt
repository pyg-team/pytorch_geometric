Title: IBM Collecting Data: Web Content Manager V6.1 Security - United States

Text:
WCM; security; v6; v6.1; vmm; wim; puma; membernotfoundexception; access control; MustGather; must gather; mustgatherdocument; collecting data TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 Collecting data for security problems with IBM Web Content Manager V6.1. Gathering this information before calling IBM Support will help to understand the problem and save time analyzing the data. 

RESOLVING THE PROBLEM
If you already contacted support, continue to collect WCM V6.1 security data. Otherwise, refer to Collecting Data: Read First for IBM WebSphere Portal [http://www-01.ibm.com/support/docview.wss?uid=swg21312740].
WCM allows you to create and manage web content for Internet, Intranet, Extranet and Portal sites. You also use WCM to present web content to users in a portlet or web site including content managed by Document Manager or generated by Personalization.

Collecting Web Content Management Security related information

1) Environment: 

 *  Web server product and version installed, if any (local or remote and on what platform?) LDAP server product and version installed, if any (on what platform?) Database product and version installed, if any other than Derby (local or remote and on what platform?) If an external security manager is in use, please specify (include platform):  1. Tivoli Access Manager 
    2. Computer Associates eTrust SiteMinder 
    3. Other 
   
   


2) Detailed problem description: 
Provide a detailed description of the issue you are reporting. When recreating the issue to collect the traces requested below, document your click-by-click recreate scenario. Include the approximate time of each action and the resource and user names involved. 

Also be sure to include information as to how the content is being rendered. Are you accessing the content using the WCM servlet? Local rendering portlet or remote rendering portlet? 

Does the reported issue affect all users? or just a subset of users? Provide the full DN of several failing users and several working users. 

Is the problem seen with content which has been migrated from WCM V5.1 or 6.0? 

3) Use the following instructions to collect traces: 
 *  Access the WebSphere Application Server Administrative Console by using the URL, http://hostname:port_number/ibm/console. Go to the Server > Application servers section. Select the application server of your portal (usually WebSphere Portal). Under Troubleshooting, click Change Log Level Details. Specify the required trace settings as follows. Ensure the trace setting is saved as one continuous line with no embedded line breaks.  * com.ibm.wps.engine.*=all:
    * 
    * com.ibm.wps.services.puma.*=all:
      com.ibm.wps.puma.*=all:com.ibm.wps.um.*=all:
    * 
    * com.ibm.wps.sso.*=all:
      com.ibm.wps.services.authentication.*=all:
    * 
    * com.ibm.ws.security.*=all:
      com.ibm.ws.wim.*=all:com.ibm.websphere.wim.*=all:
    * 
    * com.ibm.wsspi.wim.*=all:com.ibm.workplace.wcm.*=all:
    * 
    * com.aptrix.*=all:
    * 
    * com.presence.connect.wmmcomms.*=all:
    * 
    * com.presence.connect.profile.*=finest
   
   
 * 
 * 
 * 
 * a. Stop the portal server. 
   b. Archive and delete the contents of the <wp_root>/log directory. 
   c. Start portal. 
 * 
 * 
 * 
 * 
 * 
 * 
 * com.ibm.wps.ac.*=finest:
 * 

 * 
 *  Access the WebSphere Applicaion Server Administrative Console by using the URL: http://hostname:port_number/ibm/console Go to the Server > Application Servers section. Select the application server of your Portal (usually WebSphere Portal). Under Troubleshooting, click Diagnostic Trace Service. Make the maximum file size 20MB (default). Make the maximum number of historical files 8. Save the changes and restart the Portal. 


4) Perform an xmlaccess export (optional depending on problem and request): 
If the problem is related to access to the WCM authoring portlet, remote rendering portlet, local rendering portlet, or libraries, include a full xmlaccess export. Use the Export.xml file located in the <PortalServer_root>/base/wp.xml/doc/xml-samples directory. 

For information on using xmlaccess, refer to the Portal Information Center topic, Working with the XML configuration interface [http://publib.boulder.ibm.com/infocenter/wpdoc/v6r1m0/index.jsp?topic=/com.ibm.wp.ent.doc/admin/adxmltsk.html]. 

5) Provide access control settings (optional depending on problem and request): 
If the issue is related to accessing specific content, then provide either an export of the Web content library where the content is located, or provide screen captures of the resources involved. If you choose to provide the exported web content library, follow the directions in the WCM Information Center, " Exporting and importing a Web content library [http://publib.boulder.ibm.com/infocenter/wcmdoc/v6r0/index.jsp?topic=/com.ibm.lotus.wcm.doc/wcm/wcm_config_wcmlibrary_export.html]." 

If you choose to provide screen captures, make sure the images show the access control settings for the library, site, site area, content, components, presentation templates, and authoring templates involved in the reported issue. 

6) Provide memberfixer results when run in report mode: 
Use the member fixer tool to check whether any Member Manager users or groups referenced in WCM items are renamed or deleted from Member Manager. For directions on how to run memberfixer in report mode, review Using the Web content member fixer tool [http://publib.boulder.ibm.com/infocenter/wcmdoc/v6r0/index.jsp?topic=/com.ibm.lotus.wcm.doc/wcm/wcm_admin_memberfixer_tool.html]. 

7) Collect the required files:  * <WP_profile_root>/logs/WebSphere_Portal/SystemOut.log 
 * <WP_profile_root>/logs/WebSphere_Portal/SystemErr.log 
 * <WP_profile_root>/logs/WebSphere_Portal/trace.log 
 * <WP_profile_root>/config/cells/<cellname>/security.xml 
 * <WP_profile_root>/config/cells/<cellname>/nodes/<nodename>/servers/WebSphere_Portal/resources.xml (located in /clusters/<cluster_name> for clustered server) 
 * <WP_profile_root>/config/cells/<cellname>/wim (including sub-directories) 
 * <WP_profile_root>/config/cells/<cellname>/fileRegistry.xml 
 * <WP_profile_root>/wcm/shared/app/config/wcmservices/WCMConfigServices.properties 
 * Provide the detailed recreation steps and the resources involved. 
 * Provide the memberfixer results 
 * Provide xmlaccess export if required 
 * Provide the Web library export directory if required


8) Send the diagnostic information to IBM support: [/support/docview.wss?uid=swg21326269&amp;aid=1] Follow instructions to send diagnostic information to IBM Support [http://www.ibm.com/support/docview.wss?rs=688&uid=swg21201571] and be sure to provide all diagnostic information captured above. This requires that a PMR be opened if not already.

Refer to the detailed instructions in "Exchanging information with IBM Technical Support for problem determination [http://www.ibm.com/support/docview.wss?rs=688&uid=swg21201571]" to make the information available and to update your problem record.