Title: IBM Portal server startup gives "ExtensionPoint not found" errors during fixpack install - United States

Text:
6.1.0.1; fix pack fails TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 During a fixpack installation, the Portal server returns error 404 (initialization of one or mores services failed) after startup. In the SystemOut.log of the Portal server, you can see error messages stating that extension points were not found. 

SYMPTOM
The Portal server starts successfully, but does not return proper responses after startup. In the SystemOut.log of the Portal server you can find exceptions like the following: 

[24.06.09 16:16:38:213 CEST] 00000045 ExtensionsLoo E com.ibm.wps.services.extreg.ExtensionsLookupContext lookup (Name) NamingException catched:ExtensionPoint not found: com.ibm.wps.ai.base.api.service.ServiceLocator. Please turn on the traces for 'com.ibm.wps.services.extreg.*=all' to see the full stacktrace.
[24.06.09 16:16:38:217 CEST] 00000045 Servlet E com.ibm.wps.engine.Servlet init EJPFD0016E: Initialization of service failed.
java.lang.ExceptionInInitializerError
at java.lang.J9VMInternals.initialize(J9VMInternals.java:216)
at com.ibm.wps.ai.service.AIInitServiceImpl.registerCommunityHandler(AIInitServiceImpl.java:138)
at com.ibm.wps.ai.service.AIInitServiceImpl.init(AIInitServiceImpl.java:91)
at com.ibm.wps.services.Service.init(Service.java:107)
at com.ibm.wps.services.Service.init(Service.java:83)
at com.ibm.wps.services.ServiceManager.createService(ServiceManager.java:365)
at com.ibm.wps.services.ServiceManager.getService(ServiceManager.java:483)
at com.ibm.wps.services.ServiceManager.getService(ServiceManager.java:509)
at com.ibm.wps.ai.service.AIInitService.<clinit>(AIInitService.java:27)
at java.lang.J9VMInternals.initializeImpl(Native Method)
at java.lang.J9VMInternals.initialize(J9VMInternals.java:194)
at java.lang.Class.forNameImpl(Native Method)
at java.lang.Class.forName(Class.java:130)
at com.ibm.wps.services.ServiceManager.initInternal(ServiceManager.java:263)
at com.ibm.wps.services.ServiceManager.init(ServiceManager.java:173)
at com.ibm.wps.services.ServiceManager.init(ServiceManager.java:115)
at com.ibm.wps.engine.Servlet.init(Servlet.java:240)
....
Caused by: java.lang.RuntimeException: javax.naming.NameNotFoundException: ExtensionPoint not found: com.ibm.wps.ai.base.api.service.ServiceLocator
at com.ibm.wps.ai.service.ServiceLocator.<clinit>(ServiceLocator.java:53)
at java.lang.J9VMInternals.initializeImpl(Native Method)
at java.lang.J9VMInternals.initialize(J9VMInternals.java:194)
... 41 more
Caused by: javax.naming.NameNotFoundException: ExtensionPoint not found: com.ibm.wps.ai.base.api.service.ServiceLocator
at com.ibm.wps.services.extreg.ExtensionsLookupContext.getExtPoint(ExtensionsLookupContext.java:265)
at com.ibm.wps.services.extreg.ExtensionsLookupContext.lookupInternal(ExtensionsLookupContext.java:361)
at com.ibm.wps.services.extreg.ExtensionsLookupContext.lookup(ExtensionsLookupContext.java:335)
at com.ibm.wps.jndi.portal.GenericPortalJNDIContext.lookup(GenericPortalJNDIContext.java:346)
at com.ibm.wps.jndi.portal.RootPortalJNDIContext.lookupObject(RootPortalJNDIContext.java:155)
at com.ibm.wps.jndi.portal.PortalContext.lookup(PortalContext.java:72)
at com.ibm.wps.jndi.portal.PortalContext.lookup(PortalContext.java:77)
at javax.naming.InitialContext.lookup(InitialContext.java:363)
at com.ibm.wps.ai.service.ServiceLocator.<clinit>(ServiceLocator.java:45)
... 43 more


CAUSE
Some Portal internal extension point definitions have been changed during an update procedure, but are still cached in the extension point registry.



DIAGNOSING THE PROBLEM
The fixpack install fails with a message that the server response indicates an error, WebSphere Portal SystemOut.log shows exceptions pointing to a problem that an extension point could not be found.



RESOLVING THE PROBLEM
Delete the temporary directory <Portal profile>/temp/<cell name>/<server name>/_extensionregistry and trigger the fixpack install again or restart the server. The directory holds cached information about extension points, and outdated cache entries cause the exception described above.