Title: IBM Temporary floating licenses for Windows products on UNIX license servers - United States

Text:
vendor; demon; daemon; license; floating; evaluation; temporary; unix; windows; lmgrd; Rational Licensing; 1132770 TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 A temporary floating license for a IBM® Rational® software product intended for use on a Microsoft® Windows® platform can be installed on a UNIX® license server, whether or not this server is already serving permanent licenses for UNIX or Windows Rational products. However, the temporary license file must be kept separate from the permanent license file. 

RESOLVING THE PROBLEM
 

This technote uses IBM® Rational® Rose® just as a product example, and it is organized into these steps:






0: OBTAIN THE FLEXLM DISTRIBUTION


1: OBTAIN THE LICENSE DATA


2: CREATE THE LICENSE FILE


3: COPY THE LICENSE FILE TO THE UNIX MACHINE


4: MODIFY THE LICENSE FILE

5: START THE LICENSE SERVER

6: CONFIGURE THE WINDOWS CLIENT

7: TROUBLESHOOTING








Note: If you have any Perm License Keys served from your License Key Server temporary License Keys and ignored. Please validate that you do not have any Perm License keys being server prior to using the below instructions. 
0: OBTAIN THE FLEXLM DISTRIBUTION

If the UNIX machine is not already in use as a license server for Rational products, you need to obtain the FLEXlm package, which also contains the Rational vendor daemon, from the ftp location and uncompress it to a folder on the UNIX server:
ftp://public.dhe.ibm.com/software/rational/tools/flexlm/ [ftp://public.dhe.ibm.com/software/rational/tools/flexlm/]





 Back to top 


 

1: OBTAIN THE LICENSE DATA

Typically, you receive a temporary floating license key in the following format:

Product: Rational Rose Enterprise Edition
License Key: E8C4F5C12725
License Type: Floating
Expiration Date: 23-MAY-2001
Startup Quantity: 9999

As you can see, this license allows for 9999 users. 



 Back to top 

 


2: CREATE THE LICENSE FILE

Use the Rational License Key Administrator (LKAD) on a Windows machine where the Rational License Server (FLEXlm server) has been installed. Installing the FLEXlm License Server also installs the LKAD, and allows you to enter temporary Floating licenses in the LKAD. In the following example it is assumed that the edition of the Rational product installed on the Windows client is version 2001.03.00 or higher. 

The LKAD is stored on the file system as:

<Install-Dir>\Rational\common\licadmin.exe


In the LKAD Wizard that opens, choose: 

 1. Select Enter a Temporary or Evaluation License Key 
 2. Confirm Temporary in the next screen 
 3. Choose Floating 
 4. Choose the product that matches exactly the Product name seen in the license data you received 
 5. Enter the expiration date given in the license data 
 6. Enter the license key given in the license data 
 7. Enter the quantity given in the license data (which normally is 9999) 
 8. When this operation is finished, the LKAD has created or updated the following license file:
    
    <Install-Dir>\Rational\common\rational_server_temp.dat
    
    


Such a file now contains, towards the bottom, the following lines (There could be more INCREMENT lines for other licenses, as well as PACKAGE statements.). 

#-------------<START FILE>-------------------------------------

SERVER windows_client_hostname ANY 

DAEMON rational "J:\Program Files\Rational\common\rational.exe" 

# Startup Key, Float License
INCREMENT rose_enterprise_windows rational 6.0 23-MAY-2001 9999 \
E8C4F5C12725 \
VENDOR_STRING="3121-08407|Floating|0|rose_enterprise_windows:6.0" \
HOSTID=ANY \
DUP_GROUP=UH \
OVERDRAFT=0 \
vendor_info="|Rational Rose Enterprise Edition|<B.0.V.>" \
NOTICE="Rational Startup License" \
ck=0
#-------------<END FILE>---------------------------------------


 Back to top 


 

3: COPY THE LICENSE FILE TO THE UNIX MACHINE

Copy the portion of the file shown above to a file on the UNIX server. The location of the file as well as its name can be chosen freely, but if you have any Unix Rational products the default location for their license files is:

<install_dir>/config

If you do not have any Rational UNIX products, it is reasonable to create the file in the same directory where you unpacked FLEXlm.



 Back to top 


 

4: MODIFY THE LICENSE FILE

The file above contains a SERVER line with the "hostname" of the Windows client, followed by the keyword "ANY" and by an optional "port" number that defaults to 27000 if omitted.

The SERVER line must be changed: the "windows_client_hostname" must be replaced by the "hostname" of the UNIX server which can be obtained by running the command
uname -n 

The DAEMON line also must be changed, because it contains the path to the vendor DAEMON "rational.exe" which is specific to Windows. On UNIX systems, the vendor daemon is called simply "rational", and the DAEMON line should be changed into:


DAEMON rational 


(Optionally, the path to the "rational" executable can be added at the end of the above string.)

All in all, the file ready for use on UNIX machine must look line:

#-------------<START FILE>-------------------------------------

SERVER unix_server_hostname ANY 

DAEMON rational

# Startup Key, Float License
INCREMENT rose_enterprise_windows rational 6.0 23-MAY-2001 9999 \
E8C4F5C12725 \
VENDOR_STRING="3121-08407|Floating|0|rose_enterprise_windows:6.0" \
HOSTID=ANY \
DUP_GROUP=UH \
OVERDRAFT=0 \
vendor_info="|Rational Rose Enterprise Edition|<B.0.V.>" \
NOTICE="Rational Startup License" \
ck=0
#-------------<END FILE>--------------------------------------

Other temporary floating keys for other Rational products can be added
to the above file, by simply pasting in there their INCREMENT lines.
Only one SERVER and one DAEMON lines can be present in the file.



 Back to top 




5: START THE LICENSE SERVER 

If the UNIX server is not already serving permanent floating licenses for UNIX or Windows Rational products, all you need to do is start the license server with the command: 


lmgrd -c temporary_license_file -l log_file


If the UNIX server is already serving permanent floating licenses for UNIX and/or Windows Rational products, then you can start the server with: 


lmgrd -c permanent_license_file:temporary_license_file -l log_file


(Note that the separator is a colon ":" on UNIX but semicolon ";" on Windows). 

With the option -l the messages from "lmgrd" are streamed to 'log_file' instead of the console where "lmgrd" was started. 

 Back to top 


 

6: CONFIGURE THE WINDOWS CLIENT


 1. Start the LKAD and choose Settings > Service configuration 
 2. Select License Key Source > Single Server and enter the hostname of the UNIX server
    

 Back to top 

></td> <td><a class="fbox" href="#main"><b>Back to top</b></a></td> </tr> </table></DIV>] 
 

7: TROUBLESHOOTING

In case of problems, contact IBM Rational Customer Support, and provide the diagnostic information obtained as described below.

On the UNIX server, to view the status of the server, you can use the command:

lmstat -a 

Upon successful installation of the license key you should see output similar to:


--------------------------------------------------------------
porky> ./lmstat -a 
lmstat - Copyright (C) 1989-1998 Globetrotter Software, Inc.
Flexible License Manager status on Tue 5/22/2001 11:49

License server status: 27000@porky
License file(s) on porky: /rational/base/cots/flexlm.6.0i/Windows_Temporary.dat:

porky: license server UP (MASTER) v6.0

Vendor daemon status (on porky):

rational: UP v6.0

Feature usage info:

Users of rose_enterprise_windows: (Total of 9999 licenses available)
-------------------------------------------------------------- 




or a descriptive error message. For example, if you mistakenly enter the temporary license in the permanent license file (that contains the "hostid" on the SERVER line in place of the keyword "ANY"), you'll get the following error reported by 'lmstat': 

--------------------------------------------------------------
Users of rose_enterprise_windows: (Error: 9999 licenses, unsupported by licensed server)
--------------------------------------------------------------

You can also check the status of the UNIX license server from the Windows client. 
To do so, on the Windows client start the program: 

<Install-Dir>\Rational\common\lmtools.exe

In the Service/License File tab, choose Configuration Using License File and enter 

<port>@<hostname>

where "port" is 27000 (unless you changed the default port in the license file) and "hostname" is the name of UNIX server. 

In the Server Status tab, click Perform Status Enquiry 
In the Server Diagnostics tab, click Perform Diagnostics 

FLEXlm usage information is available at the Macrovision software licensing support Web pages. 




 Back to top 




 

HISTORICAL NUMBER
 17474