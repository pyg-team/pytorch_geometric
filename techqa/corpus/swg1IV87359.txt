Title: IBM IV87359: CPU PERCENTAGES WRONGLY REPORTED BECAUSE THE SAMPLING INTERVAL IS INCORRECT. - United States

Text:
  FIXES ARE AVAILABLE
IBM Tivoli Monitoring: Linux(R) OS Agent 6.2.3.3-TIV-ITM_LINUX-IF0006 [http://www-01.ibm.com/support/docview.wss?uid=swg24042701]
IBM Tivoli Monitoring 6.3.0 Fix Pack 7 (6.3.0-TIV-ITM-FP0007) [http://www-01.ibm.com/support/docview.wss?uid=swg24041633]


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  Problem:
   The thread that measures CPU metrics can be interrupted by
   signals while sleeping between two samples.
   The condition where a huge number of signals reaches the thread
   during the same interval is not fully handled thus leading to a
   shorter interval than the expected 30 seconds by default. This
   in turn is the root cause for improperly calculated CPU
   percentages.
   
   
   Affected Platforms / Versions:
   This issue affects all the Linux OS agent versions and it does
   not depend on the Linux OS version.
   
   
   Diagnostics:
   have (UNIT:klzcpu ALL) in KBB_RAS1 settings, then look for
   actual sleep time in updateCpuStats.
   
   
   Here is a normal case:
   2016.0171-3:klzcputhrd.cpp,64,"updateCpuStats") actual sleep
   time 30 seconds
   
   
   as opposed to a case where the issue is raised:
   2016.4C2E-3:klzcputhrd.cpp,64,"updateCpuStats") actual sleep
   time 1 seconds
   
   
   Initial Impact:
   Medium, as long as the issue is temporary and abnormal CPU
   metrics can be circumvented by choosing more appropriate
   situation interval and persistence count.
   
   
   Additional Keywords:
   KLZCPU, USRCPU, SYSCPU, BUSYCP
   
   
    
   
   

LOCAL FIX
 *  N/A
   
   
    
   
   

PROBLEM SUMMARY
 *  Problem Description: Wrong statistical percentages reported.
   
   Problem/Problem Summary: This is a follow-up of APAR IV73936 [http://www-01.ibm.com/support/docview.wss?uid=swg1IV73936]
    that fixed a temporary condition where the Monitoring Agent for
    Linux OS was awakened by signals while sleeping between two
    consecutive samples for the Linux CPU attribute group, thus
    reporting invalid processors' CPU percentages. This APAR also
    fixes a condition where signals are permanently interrupting
    the polling threads and applies to the following attribute
    groups in addition to the Linux CPU one: Linux System
    Statistics, Linux Swap Rate, Linux Process, Linux Network,
    Linux Disk IO,  Linux IO Ext, Linux TCP Statistics.
   
   
    
   
   

PROBLEM CONCLUSION
 *  Problem conclusion: Code fixed to keep sleeping for the
    remaining time anyway.
   
   The fix for this APAR will be contained in the following
   maintenance packages:
   
   | InterimFix | 6.2.3.3-TIV-ITM_LINUX-IF0006
   | FixPack    | 6.3.0-TIV-ITM-FP0007
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   IV87359
   
   
 * REPORTED COMPONENT NAME
   ITM AGENT LINUX
   
   
 * REPORTED COMPONENT ID
   5724C04LN
   
   
 * REPORTED RELEASE
   623
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt / Xsystem
   
   
 * SUBMITTED DATE
   2016-07-29
   
   
 * CLOSED DATE
   2016-09-12
   
   
 * LAST MODIFIED DATE
   2016-09-12
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   ITM AGENT LINUX
   
   
 * FIXED COMPONENT ID
   5724C04LN
   
   

APPLICABLE COMPONENT LEVELS
 * R623 PSY
   UP
   
   
 * R630 PSY
   UP
   
   
 * R610 PSN
   UP
   
   
 * R620 PSN
   UP
   
   
 * R621 PSN
   UP
   
   
 * R622 PSN
   UP