Title: IBM PM72079: DUMP TITLE: CSQ1,ABN=5C6-00D400AD,U=SYSOPR ,C=R3600.710.DMC -CSQICRE2,M=CSQGFRCV,LOC=CSQILPL 12/11/26 PTF PECHANGE - United States

Text:
z/os  A FIX IS AVAILABLE
Obtain the fix for this APAR.


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  The customer in the process of upgrading from MQ V7.0.1 to V7.1.
   They have migrated a few of the QMGRs in their environment
   without issues, but the most recent upgrades have abended when
   starting up. The dump that they are receiving shows the
   following abend:
   .
   Dump Title: CSQ1,ABN=5C6-00D400AD,U=SYSOPR  ,C=R3600.710.DMC
                -CSQICRE2,M=CSQGFRCV,LOC=
                CSQILPLM.CSQICRE2+00000FE2
   .
   The change team review the docs and they can see the cause of
   the problem. The abend occurs when a V710 queue-manager issues
   a DEFINE REPLACE for a QMODEL (in this case due to command in
   CSQ2MSTR's CSQINP2 concatenation). All other queue-managers in
   the queue-sharing group are informed about the DEFINE via the
   group command server and read the object from DB2. However, the
   qmodel object in DB2 has the V710 length with MQMO.fExtend3 set.
   CSQ5READ has logic for detecting a V710 object and resetting
   fExtend3, but there is an error in the processing for QMODELS,
   which results in the object being changed to the V701 length
   but MQMO.fExtend3 is left set. This causes the subsequent
   5C6-00D400AD when starting at V710. The Change Team has
   recreated this situation on their test systems.
   .
   NOTE: The error in the CSQ5READ is at the WMQ 7.0.1 level during
   fallback (backward migration). PM52894/UK76760 provides the
   fallback logic.
   .
   Additional keywords:
   MQ0710C/K
   
   
    
   
   

LOCAL FIX

PROBLEM SUMMARY
 *  ****************************************************************
   * USERS AFFECTED: All users of WebSphere MQ for z/OS Version 7 *
   *                 Release 0 Modification 1.                    *
   ****************************************************************
   * PROBLEM DESCRIPTION: Queue manager abend 5C6 reason          *
   *                      00D400AD, issued by CSQICRE2 after      *
   *                      migration to V710.                      *
   ****************************************************************
   * RECOMMENDATION:                                              *
   ****************************************************************
   The 5C6-00D400AD abend may occur at start up of a V710
   (WebSphere MQ for z/OS Version 7 Release 1 Modification 0) queue
   manager and results in the queue-manager abending with CSQV086E
   reason 00D96001.
   
   The problem is caused when a V710 queue-manager issues a DEFINE
   REPLACE for a QMODEL, QLOCAL, QALIAS or QREMOTE with
   QSGDISP(GROUP) while other queue managers in the queue sharing
   group are still at V701 (WebSphere MQ for z/OS Version 7 Release
   0 Modification 1).  The object is stored in DB2 with a V710
   length with flag fExtend3 set (indicating a V710 object size).
   All other queue managers in the queue sharing group are informed
   about the DEFINE via the group command server and the object is
   read from DB2 and their QSGDISP(COPY) object is replaced with a
   COPY object at the V701 length.  However, due to an error in
   processing in CSQ5READ the fExtend3 flag is not reset in this
   new COPY.
   
   Following this, when a subsequent queue manager is migrated to
   V710, an abend occurs at start up.
   
   
    
   
   

PROBLEM CONCLUSION
 *  The code has been corrected so that the fExtend3 flag does not
   get set when creating the COPY object.
   010Y
   CSQ5READ
   CSQ7CBJ
   
   
    
   
   

TEMPORARY FIX
 *  *********
   * HIPER *
   *********
   
   
    
   
   

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   PM72079
   
   
 * REPORTED COMPONENT NAME
   WMQ Z/OS V7
   
   
 * REPORTED COMPONENT ID
   5655R3600
   
   
 * REPORTED RELEASE
   100
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   YesPE
   
   
 * HIPER
   YesHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2012-09-03
   
   
 * CLOSED DATE
   2012-11-26
   
   
 * LAST MODIFIED DATE
   2013-02-04
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
    UK83721
   
   

MODULES/MACROS
 *  CSQ5READ CSQ7CBJ
   
   
    
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   WMQ Z/OS V7
   
   
 * FIXED COMPONENT ID
   5655R3600
   
   

APPLICABLE COMPONENT LEVELS
 * R010 PSY UK83721 [HTTPS://WWW14.SOFTWARE.IBM.COM/WEBAPP/SET2/ORDERMEDIA/SHOPCART?PTFS=UK83721]
   UP13/01/16 P F301 Â®
   
   

FIX IS AVAILABLE
 * SELECT THE PTF APPROPRIATE FOR YOUR COMPONENT LEVEL. YOU WILL BE REQUIRED TO SIGN IN. DISTRIBUTION ON PHYSICAL MEDIA IS NOT AVAILABLE IN ALL COUNTRIES.