Title: IBM JR56567: EXPRESSION table is incorrectly updated when deleting an existing catalog filter condition - United States

Text:
  FIXES ARE AVAILABLE
WebSphere Commerce Version 8.0 Fix Pack 16 [http://www-01.ibm.com/support/docview.wss?uid=swg24042863]
JR57861 - Mandatory cumulative Interim Fix 5 for WebSphere Commerce Version 7 Feature Pack 8 [http://www-01.ibm.com/support/docview.wss?uid=swg24043760]


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  When you use the Data Load utility to delete an existing catalog
   filter condition, you might notice that the QUERY column of the
    EXPRESSION database table includes some invalid syntax, which
   will break the catalog filter entitlement check.
   
   The following scenario is an example of how you might encounter
   the issue:
   1.  Create a new catalog filter.
   2.  Load ManufacturerName not equals 'A' and ManufacturerName
   not equals 'B' and divisionCode equals 'D'.
   3.  Use the Data Load utility to delete ManufacturerName not
   equals 'A' and ManufacturerName equals 'B'.
   4.  Run setupSearchIndex with action
   configWCScheduleforCatalogFilter to update the EXPRESSION table.
   
   When you check the QUERY column of EXPRESSION table, you the
   following invalid entry:
   ( +divisionCode:"D" + mfName_ntk_cs:)
   
   This issue occurs because the delete action only removes the
   rows in the CFCONDVAL table and leave the CFCOND in the
   database.
   
   
    
   
   

LOCAL FIX

PROBLEM SUMMARY
 *  USERS AFFECTED:
   WebSphere Commerce Version 7 Feature Pack 8, and Version 8.
   
   PROBLEM ABSTRACT:
   EXPRESSION table is incorrectly updated when deleting an
   existing catalog filter condition
   
   BUSINESS IMPACT:
   Catalog filter entitlement check does not work.
   
   RECOMMENDATION:
   
   
    
   
   

PROBLEM CONCLUSION
 *  Updated logic so that if all the CFCONDVAL in one condition is
   empty, a Solr query is not generated.
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   JR56567
   
   
 * REPORTED COMPONENT NAME
   WC BUS EDITION
   
   
 * REPORTED COMPONENT ID
   5724I3800
   
   
 * REPORTED RELEASE
   700
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt / Xsystem
   
   
 * SUBMITTED DATE
   2016-08-26
   
   
 * CLOSED DATE
   2017-08-16
   
   
 * LAST MODIFIED DATE
   2017-08-16
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   WC BUS EDITION
   
   
 * FIXED COMPONENT ID
   5724I3800
   
   

APPLICABLE COMPONENT LEVELS
 * R700 PSY
   UP