Title: IBM PI63883: WMQ Z/OS V800:SET CHLAUTH CLNTUSER PARAMETER IS 12 CHARACTERS WHICH CAUSES CSQY337E - United States

Text:
z/os  A FIX IS AVAILABLE
Obtain the fix for this APAR.


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  Customer is running MQ V8  using ACF2 and wants to map
   CLNTUSER(xxx) to MCAUSER(USER1) from ADDRESS
   ('n.n.*.*').    All the CHLAUTH settings below resulted in the
   following error:
   ACF00076 LOGONID xxx NOT FOUND
   
   These are the CHLAUTH settings in customer environment:
    1) SET CHLAUTH(SYSTEM.ADMIN.SVRCONN) TYPE(USERMAP)
   USERSRC(MAP) CLNTUSER(xxx) MCAUSER(USER1) ADDRESS('n.n.*.*')
   ACTION(REPLACE)
   
   2) SET CHLAUTH(SYSTEM.ADMIN.SVRCONN) TYPE(USERMAP)
   CLNTUSER(xxxx) USERSRC(MAP)
   MCAUSER(USER1) ADDRESS('n.n.*.*') ACTION(REPLACE)
   
   3) SET CHLAUTH(SYSTEM.ADMIN.SVRCONN) TYPE(USERMAP) +
   CLNTUSER(xxx) MCAUSER(USER1)
   
   Customer complained the issue "ACF00076 LOGONID xxxx NOT FOUND"
   when doing the translation from CLNTUSER to MCAUSER with that
   the CHLAUTH is TYPE(USERMAP)
   If the user ID is lower case, quotation marks must enclose
   it, for exampe:
   
   SET CHLAUTH(SYSTEM.ADMIN.SVRCONN) TYPE(USERMAP) USERSRC(MAP)
   CLNTUSER('xxx')  MCAUSER(USER1) ADDRESS('n.n.*'.*)
   ACTION(REPLACE)
   
   However, CSQY337E "+CSQ1 CSQMSCA CLNTUSER value length not
   allowed - restricted functionality" is shown .
   
   The CHIN is passing the long userid which may be up to 64
   characters, when checking CHLAUTH records, but the limit on the
   SET CHLAUTH CLNTUSER parameter is 12 characters which causes
   the problem.
   
   Note that it looks  as though this problem will not occur at MQ
   V8 with NEWFUNC (CLNTUSER may be greater than 12 characters in
   this case).
   
   
    
   
   

LOCAL FIX
 *  n/a.
   
   
    
   
   

PROBLEM SUMMARY
 *  ****************************************************************
   * USERS AFFECTED: All users of WebSphere MQ for z/OS Version 8 *
   *                 Release 0 Modification 0.                    *
   ****************************************************************
   * PROBLEM DESCRIPTION: "CSQY337E +MQNS CSQMSCA CLNTUSER value  *
   *                      length not allowed - restricted         *
   *                      functionality" is issued when issuing   *
   *                      SET CHLAUTH to define a USERMAP rule to *
   *                      map a client user that is longer than   *
   *                      12 characters (for example, the user    *
   *                      associated with a client connection     *
   *                      from the Windows platform, where the    *
   *                      user can be up to 64 characters long),  *
   *                      and the queue manager is not running    *
   *                      with OPMODE NEWFUNC,800.                *
   ****************************************************************
   * RECOMMENDATION:                                              *
   ****************************************************************
   On z/OS, the maximum length of the CLNTUSER field when adding a
   channel authentication (CHLAUTH) record was 12 characters.
   However incoming clients were matched against their long user
   ID, not the short user ID.
   This meant it was not possible to correctly map clients which
   reported usernames of longer than 12 characters as it was not
   possible to configure this within the queue manager on z/OS.
   
   
    
   
   

PROBLEM CONCLUSION
 *  The maximum length for the CLNTUSER field has been increased on
   z/OS to 64 characters. This is the same length Windows uses,
   and is the maximum length of the long user ID field of an MQMD.
   
   This makes it possible to configure the queue manager such that
   clients reporting user names of longer than 12 characters will
   be correctly mapped.
   
   When running in NEWFUNC,800, the maximum length for the CLNTUSER
   field is unchanged at 1024 characters.
   000Y
   CSQMDCA
   CSQMSCA
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   PI63883
   
   
 * REPORTED COMPONENT NAME
   WMQ Z/OS 8
   
   
 * REPORTED COMPONENT ID
   5655W9700
   
   
 * REPORTED RELEASE
   000
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt / Xsystem
   
   
 * SUBMITTED DATE
   2016-06-09
   
   
 * CLOSED DATE
   2016-06-17
   
   
 * LAST MODIFIED DATE
   2016-08-02
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
    PI56514 [http://www-01.ibm.com/support/docview.wss?uid=swg1PI56514]
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
    UI38765
   
   

MODULES/MACROS
 *  CSQMDCA  CSQMSCA
   
   
    
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   WMQ Z/OS 8
   
   
 * FIXED COMPONENT ID
   5655W9700
   
   

APPLICABLE COMPONENT LEVELS
 * R000 PSY UI38765 [HTTPS://WWW14.SOFTWARE.IBM.COM/WEBAPP/SET2/ORDERMEDIA/SHOPCART?PTFS=UI38765]
   UP16/07/06 P F607
   
   

FIX IS AVAILABLE
 * SELECT THE PTF APPROPRIATE FOR YOUR COMPONENT LEVEL. YOU WILL BE REQUIRED TO SIGN IN. DISTRIBUTION ON PHYSICAL MEDIA IS NOT AVAILABLE IN ALL COUNTRIES.