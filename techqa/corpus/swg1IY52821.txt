Title: IBM IY52821: MQOPEN OR MQPUT GETS RC2018 IF SERVER EXPRESS AND C APPLICATION TRY TO MQI CALL UNDER CICS - United States

Text:
AIX SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS DOCUMENTATION ERROR.
    
   
   

ERROR DESCRIPTION
 *  MQOPEN or MQGET gets RC2018 ( MQRC_HCONN_ERROR )occurs if
   Server Express and C in same CICS. The mixed language is not
   supported. CSD05(IY38279 [http://www-01.ibm.com/support/docview.wss?uid=swg1IY38279]) does not permit MQ calls from both
   COBOL language and C language in the same address space.
   All MQ calls must be issued in COBOL or C application .
   Addition, special consideration is required to build COBOL
   runtime , cicsprCOBOL , for Server Express under CICS.
   If all MQ calls are requested from C application, cicsmkcobol
   should not include any MQ libraries.
   If all MQ calls are requested from Server Express Cobol,cicsmk
   cobol need to include MQ libraries as described in memo.ptf of
   CSD05.
   Above should be documented into MQ Application Programing Guide
   Title 'Preparing CICS COBOL programs using Micro Focus COBOL'
   
   
    
   
   

LOCAL FIX

PROBLEM SUMMARY
 *  ****************************************************************
   USERS AFFECTED:
   . New version or release of Micro Focus COBOL
   . New version or release of CICS for AIX , HPUX, Solaris
   . New version or release of any supported database product (for
   COBOL transactions only)
   . New version or release of Websphere MQ
   . Migrating from older versions of MQ to new version of WMQ
   ****************************************************************
   PROBLEM SUMMARY:
   customer WMQ COBOL programs using Micro Focus COBOL running
   under CICS run-time was making C MQI(MQPUT,MQOPEN,MQGET) calls
   from COBOL application. This  was working in earlier version of
   MQ and failed under WMQ 5.3. During diagnosis it is confirmed
   that MQ C API calls were resolved to  MQ COBOL library libmqmz
   instead of libmqm.
   
   
    
   
   

PROBLEM CONCLUSION
 *  The changes made to WMQ COBOL interface via APAR IY38279 [http://www-01.ibm.com/support/docview.wss?uid=swg1IY38279] does
   not allow MQ CICS COBOL applications to call C MQI(MQCONN,
   MQPUT,MQGET etc) subroutines within the applications. WMQ COBOL
   MQI calls are defined in libmqmz and C MQI calls in libmqm.
   Hence mixed MQI calls should not be made in the same address
   space.   This may have been working with earlier releases of MQ
   and CICS. In the new design , this will not work. The changes
   to MQ COBOL interface will be documented in Application
   programming Guide , Chapter 20, 25 , 30
   
   The application should not have references  for mixed MQI
   calls. Either they must be issued in all COBOL or all in C.
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   IY52821
   
   
 * REPORTED COMPONENT NAME
   WEB MQ FOR AIX
   
   
 * REPORTED COMPONENT ID
   5724B4101
   
   
 * REPORTED RELEASE
   530
   
   
 * STATUS
   CLOSED DOC
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2004-01-22
   
   
 * CLOSED DATE
   2004-02-26
   
   
 * LAST MODIFIED DATE
   2004-02-26
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION

APPLICABLE COMPONENT LEVELS