Title: IBM PM00692; 7.0.0.5: thread hangs in java.util.hashmap.findnonnullkeyentry() - United States

Text:
PM00692; PM00692; PM00692 DOWNLOADABLE FILES

ABSTRACT
 Thread hangs in java.util.HashMap.findNonNullKeyEntry() 

DOWNLOAD DESCRIPTION
PM00692 resolves the following problem:

ERROR DESCRIPTION: 
After heavy and extended stress, virtual member manager threads hang in the plug-in manager module. It hangs because findNonNullKeyEntry is not thread safe.





The following hung thread message is written in the SystemOut.log file: 

[11/6/09 17:43:15:250 CST] 0000001f ThreadMonitor W WSVR0605W:
Thread 
"WebContainer : 23" (000000b2) has been active for 672063 
milliseconds 
and may be hung. There is/are 4 thread(s) in total in the 
server that 
may be hung. 
at java.util.HashMap.findNonNullKeyEntry(HashMap.java:520) 
at java.util.HashMap.putImpl(HashMap.java:617) 
at java.util.HashMap.put(HashMap.java:600) 
at 
com.ibm.ws.wim.pluginmanager.PluginManager.preExitCall(PluginMan
ager.jav 
a:802) 
at 
com.ibm.ws.wim.ProfileManager.genericProfileManagerMethod(Profil
eManager 
.java:270) 
at com.ibm.ws.wim.ProfileManager.get(ProfileManager.java:341) 
at 
com.ibm.websphere.wim.ServiceProvider.get(ServiceProvider.java:3
48) 
at 
com.ibm.websphere.wim.client.LocalServiceProvider.get(LocalServi
ceProvid 
er.java:364) 
at 
com.ibm.mm.was.user.service.handler.StandardSecureWIMHandler$2.r
un(Stand 
ardSecureWIMHandler.java:186) 
at 
com.ibm.ws.security.auth.ContextManagerImpl.runAs(ContextManager
Impl.jav 
a:4565) 
at 
com.ibm.ws.security.auth.ContextManagerImpl.runAsSystem(ContextM
anagerIm 
pl.java:4653) 

LOCAL FIX: 
None 

PROBLEM SUMMARY

USERS AFFECTED:
All users of IBM WebSphere Application Server V6.1 and V7.0

PROBLEM DESCRIPTION: 

Thread hangs in java.util.HashMap.findNonNullKeyEntry() 


RECOMMENDATION:
None

After heavy and extended stress, virtual member manager threads hang in the plug-in manager module. It hangs because findNonNullKeyEntry is not thread safe.

The stack trace has the following components:

at java.util.HashMap.findNonNullKeyEntry(HashMap.java:520)
at java.util.HashMap.putImpl(HashMap.java:617)
at java.util.HashMap.put(HashMap.java:600)
at
com.ibm.ws.wim.pluginmanager.PluginManager.preExitCall(PluginM
anager.java:802)
at
com.ibm.ws.wim.ProfileManager.genericProfileManagerMethod(Profil
eManager.java:270)
at com.ibm.ws.wim.ProfileManager.get(ProfileManager.java:341)
at
com.ibm.websphere.wim.ServiceProvider.get(ServiceProvider.java:3
48)
at
com.ibm.websphere.wim.client.LocalServiceProvider.get(LocalServi
ceProvider.java:364)
at
com.ibm.mm.was.user.service.handler.StandardSecureWIMHandler$2.r
un(StandardSecureWIMHandler.java:186)
at
com.ibm.ws.security.auth.ContextManagerImpl.runAs(ContextManager
Impl.java:4565)
at
com.ibm.ws.security.auth.ContextManagerImpl.runAsSystem(Contex
tManagerImpl.java:4653)

PROBLEM CONCLUSION: 
The problem has been fixed using a thread safe method. 

The fix for this APAR is currently targeted for inclusion in 
fix packs 6.1.0.31 and 7.0.0.9. Please refer to the 
Recommended Updates page for delivery information: 
http://www.ibm.com/support/docview.wss?rs=180&uid=swg27004980 [http://www.ibm.com/support/docview.wss?rs=180&uid=swg27004980]

PREREQUISITES
Please download the UpdateInstaller below to install this fix.

URL LANGUAGE SIZE(Bytes) UpdateInstaller [http://www.ibm.com/support/docview.wss?rs=180&uid=swg21205991] US English 7250000 
INSTALLATION INSTRUCTIONS
Please review the readme.txt for detailed installation instructions.

URL LANGUAGE SIZE(Bytes) Readme [ftp://public.dhe.ibm.com/software/websphere/appserv/support/fixes/PM00692/readme.txt] US English 9083 
DOWNLOAD PACKAGE




Download RELEASE DATE LANGUAGE SIZE(Bytes) Download Options 
What is Fix Central(FC)? [https://www.ibm.com/support/fixcentral/help?page=swfaqs] 
What is DD? [http://www6.software.ibm.com/dldirector/doc/DDfaq_en.html] 7.0.0.0-WS-WAS-IFPM00692 11/19/2009 US English 19021 FC [http://www.ibm.com/support/fixcentral/quickorder?fixids=7.0.0.0-WS-WAS-IFPM00692&product=ibm%2FWebSphere%2FWebSphere%20Application%20Server&source=dbluesearch] FTP [ftp://public.dhe.ibm.com/software/websphere/appserv/support/fixes/PM00692/7.0.0.0-WS-WAS-IFPM00692.pak] DD 
TECHNICAL SUPPORT
 Contact IBM Support using SR (http://www.ibm.com/software/support/probsub.html [http://www.ibm.com/software/support/probsub.html]), visit the WebSphere Application Server Support Web site (http://www.ibm.com/software/webservers/appserv/was/support/ [http://www.ibm.com/software/webservers/appserv/was/support/]), or contact 1-800-IBM-SERV (U.S. only). 

 [/support/docview.wss?uid=swg24025093&aid=1]Problems (APARS) fixed [/support/docview.wss?uid=swg24025093&aid=2]Problems (APARS) fixed
PM00692