Title: IBM IV22788: UNMANAGE/MANAGE ACTION CAUSES BACKUP POLLER TO POLL DEVICE. - United States

Text:
  DIRECT LINKS TO FIXES
ITNMIP_Patch_V3.8.0.89_Win32 [http://www.ibm.com/support/fixcentral/quickorder?product=ibm%2FTivoli%2FTivoli+Network+Manager+IP+Edition&fixids=3.8.0-TIV-ITNMIP-Windows-REF-FP0007&source=SAR]
3.8.0-TIV-ITNMIP-Solaris-REF-FP0007 [http://www.ibm.com/support/fixcentral/quickorder?product=ibm%2FTivoli%2FTivoli+Network+Manager+IP+Edition&fixids=3.8.0-TIV-ITNMIP-Solaris-REF-FP0007&source=SAR]
3.8.0-TIV-ITNMIP-Linux-REF-FP0007 [http://www.ibm.com/support/fixcentral/quickorder?product=ibm%2FTivoli%2FTivoli+Network+Manager+IP+Edition&fixids=3.8.0-TIV-ITNMIP-Linux-REF-FP0007&source=SAR]
ITNMIP_Patch_V3.8.0.89_AIXPPC32 [http://www.ibm.com/support/fixcentral/quickorder?product=ibm%2FTivoli%2FTivoli+Network+Manager+IP+Edition&fixids=3.8.0-TIV-ITNMIP-AIX-REF-FP0007&source=SAR]
IBM Tivoli Network Manager IP 3.9.0 Fix Pack 3, 3.9.0-TIV-ITNMIP-FP0003 [http://www-01.ibm.com/support/docview.wss?uid=swg24033501]
IBM Tivoli Network Manager IP 3.9.0 Fix Pack 4, 3.9.0-TIV-ITNMIP-FP0004 [http://www-01.ibm.com/support/docview.wss?uid=swg24034724]
IBM Tivoli Network Manager IP Edition 3.9.0 Fix Pack 5, 3.9.0-TIV-ITNMIP-FP0005 [http://www-01.ibm.com/support/docview.wss?uid=swg24037809]


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  Unmanage/manage action causes backup poller to poll device.
   Product: Tivoli Network Manager
   Version: 3.8   While the PMR was raised against FP4, this was
   replicated on FP6 (build 75).
   Component: ncp_poller
   Platform: any
   
   Symptom:
   In a failover environment with a Primary and Backup Poller
   running, with the Primary domain healthy and acting primary, if
   the user unmanages, then manages a device, the backup poller
   will begin polling that device, and raising duplicate events.
   
   Replication:
   In a failover architecture, with just the Default Chassis Ping
   policy running, select any device from the network view and open
   the structure viewer.  Then from the Tools menu, set the device
   to Unmanaged.
   Tail the backup poller's SnmpPoller.trace file in debug 4 and
   wait for the update from the Primary poller to be received by
   the backup Poller.  The update message contains the string:
   
   CModelMgr.cc(200): Received an update notification from model
   for entity ID
   
   ... followed by the entity's ID.  Once seen, manage the device
   again.  A packet trace from the backup server shows that the
   backup Poller is now monitoring the altered device, as well as
   the primary Poller.
   
   Note: No failover has occurred, the primary domain should be
   healthy and should be the acting primary throughout the
   replication.
   
   
    
   
   

LOCAL FIX
 *  Stop and restart the Backup ITNM domain to reset the backup
   Poller's behaviour.
   
   
    
   
   

PROBLEM SUMMARY
 *  ****************************************************************
   * USERS AFFECTED:                                              *
   * ITNM users using failover                                    *
   ****************************************************************
   * PROBLEM DESCRIPTION:                                         *
   * In a failover environment with a Primary and Backup          *
   * running, with the Primary domain healthy and acting primary, *
   * if                                                           *
   * the user unmanages, then manages a device, the backup poller *
   * will begin polling that device, and raising duplicate        *
   * events.                                                      *
   ****************************************************************
   * RECOMMENDATION:                                              *
   * | fix pack | 3.8.0-ITNMIP-FP0007                             *
   * | fix pack | 3.9.0-ITNMIP-FP0004                             *
   ****************************************************************
   
   
    
   
   

PROBLEM CONCLUSION
 *  added verification of failover status
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   IV22788
   
   
 * REPORTED COMPONENT NAME
   NC/PRECISIONIP
   
   
 * REPORTED COMPONENT ID
   5724O52RC
   
   
 * REPORTED RELEASE
   380
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2012-06-11
   
   
 * CLOSED DATE
   2013-02-19
   
   
 * LAST MODIFIED DATE
   2013-11-05
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   NC/PRECISIONIP
   
   
 * FIXED COMPONENT ID
   5724O52RC
   
   

APPLICABLE COMPONENT LEVELS
 * R380 PSN
   UP
   
   
 * R380 PSY
   UP
   
   
 * R390 PSN
   UP
   
   
 * R390 PSY
   UP