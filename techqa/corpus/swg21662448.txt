Title: IBM MDMSE : ORA-01000: maximum open cursors exceeded in SystemOut.log - United States

Text:
 TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 When the backend database is Oracle, and the Application Server is Websphere Application Server (WAS), there is a chance that the customer will run into an error message in SystemOut.log :

[11/18/13 7:43:41:067 EST] 00000190 QueueMgrServi Ecom.initiatesystems.hub.queue.logic.QueueMgrServiceLogicImpl getEntIques entType [organisation], load entIque failed

com.initiatesystems.orm.exception.InvalidResourceUsageException:[IBM][Oracle JDBC Driver][Oracle]ORA-00604: error occurred at recursive SQL level 1 ORA-01000: maximum open cursors exceeded 

SYMPTOM
One scenario for this problem happening is loading data. While attempting to load data into engine, customer is experiencing problems with maximum open cursors on the database. This happens at random periods when loading data. 


CAUSE
JDBC connection pool management issue in WAS

DIAGNOSING THE PROBLEM
When checking in the database, the SQL with excessive open cursors is "select 1 from dual" statement, which is done by WAS to verify data source connections.

RESOLVING THE PROBLEM
WAS has problem in JDBC connection pool management. As a workaround, in the data source definition page of WAS console, choose "WebSphere Application Server data source properties", and enable "Validate existing pooled connections", and select "Validation by JDBC driver", pick an appropriate timeout, then save.




Please be noted, for an Oracle data source, "Validation by JDBC Driver" displays on the administrative console only after the validateNewConnectionTimeout property is added to the custom properties of the datasource. 

RELATED INFORMATION
 A simplified Chinese translation is available [http://www.ibm.com/support/docview.wss?uid=swg21675844]