Title: IBM IC90324: ANR1804W IS GENERATED WHEN RUNNING RECLAMATION - United States

Text:
AIX  A FIX IS AVAILABLE
IBM Tivoli Storage Manager V6.3 Fix Pack 5 (6.3.5.000) Server Downloads [http://www-01.ibm.com/support/docview.wss?uid=swg24038158]


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  Reclamation is completing without processing all of the volume
   which is eligible
   for being reclaimed based on the Pct. reclaimable space for the
   volume.
   ANR1804W is genereated for the volume which is eligible for the
   reclamation.
   Following is the possible senario when the problem occurs.
   
   1. In storage pool A there are 2 volumes (VOL1, VOL2) which are
   eligible for a reclamation, and 10 empty volumes.
   2. Run reclaim stgpool against storage pool A.
   3. VOL1 is opened as input volume, and VOL2 is opened as output
   volume.
   4. After the reclamation completes for VOL1, VOL2 is requested
   as input volume, and ANR1804W occurs because it was used as
   output volume.
   
   actlog shows following message:
   
   ANR0984I Process xx for SPACE RECLAMATION started in the
   FOREGROUND at xx:xx:xx.
   ANR1040I Space reclamation started for volume VOL1,
   storage pool STG_A.
   ANR1044I Removable volume VOL1 is required for space
   reclamation.
   ANR8337I LTO volume VOL1 mounted in drive xxx
   ANR0512I Process xxx opened input volume VOL1.
   ANR8337I LTO volume VOL2 mounted in drive xxx
   ANR0513I Process xxx opened output volume VOL2.
   
   
   ANR0515I Process xxx closed volume VOL1.
   ANR1041I Space reclamation ended for volume VOL1.
   ANR1042I Space reclamation for storage pool STG_A
   will be retried in 60 seconds.
   
   ANR1043I Space reclamation retry delay ended; checking
   volume reclamation status for storage pool STG_A
   ANR1043I Space reclamation retry delay ended; checking
   volume reclamation status for storage pool STG_A
   ANR1804W RECLAIM STGPOOL: Process xxx skipping volume
   VOL2 in storage pool STG_A because the volume is
   in use by another process.
   
   We should not choose the reclaimable candidate volume as the
   output volume if there is other volume that can be used.
   
   Versions affected: All Tivoli Storage Manager Servers V5 and V6
   
   
   Additional Keywords: skip, retry, reclaim
   
   
   Additional L2 info:
   
   trace "AF BF AS SSPOOL SSVOL ADMCMD ADDMSG":
   
   [1172][afutil.c][933][AfUpdatePool]:Pool STG_A(6) updated with
   highMigOcc 4718592000 and lowMigOcc 3670016000.
   [1172][afrclm.c][1138][AfRclmOnsiteVols]:Proc 26: taking volume
   VOL2(617) from reclaim list.
   [1172][afrclm.c][1170][AfRclmOnsiteVols]:Got the 1 volumes
   associated with volume VOL2(617).
   [1172][afrclm.c][1174][AfRclmOnsiteVols]:Volume 617 is the 0 of
   1 in the volume list.
   [1172][afrclm.c][1202][AfRclmOnsiteVols]:Proc 26 has processed
   volume(617), the 0 of 1 volumes.
   [1172][asvolacq.c][5640][AsFindVolExt]:Calling
   FindVolInGlobalList for volId 617 from ssutil.c(3617).
   [1172][asvolacq.c][10707][FindVolInGlobalList]:Finding volume id
   617 in in-use list.
   [1172][asvolacq.c][10735][FindVolInGlobalList]:Found volume id
   617(VOL2) in in-use list with 2 status.
   [1172][asvolacq.c][11296][AddShareableVolume]:adding volume
   617(VOL2) to front of fileList list.
   [1172][asvolacq.c][10778][FindVolInGlobalList]:VolumeId 617 is
   in list.
   [1172][ssutil.c][3621][ssIsVolInUse]:ssIsVolInUse: Volid 617 in
   use.
   [1172][afrclm.c][1219][AfRclmOnsiteVols]:The lease tag of the
   volume 617 is 0, current sessId is 0.
   [1172][afrclm.c][1261][AfRclmOnsiteVols]:Proc 26 skipped volume
   617: the volume is in use. The volume will be retried later.
   [1172][output.c][7227][PutConsoleMsg]:ANR1042I Space reclamation
   for storage pool STG_A will be retried in 60 seconds.~
   
   Initial Impact:  Medium.
   
   
    
   
   

LOCAL FIX
 *  Re-run the reclamaiton for the skipped volume.
   
   
    
   
   

PROBLEM SUMMARY
 *  ****************************************************************
   * USERS AFFECTED: All Tivoli Storage Manager server users      *
   ****************************************************************
   * PROBLEM DESCRIPTION: See error description.                  *
   ****************************************************************
   * RECOMMENDATION: Apply fixing level when available. This      *
   *                 problem is currently projected to be fixed   *
   *                 in level 6.3.5. Note that this is            *
   *                 subject to change at the discretion of IBM.  *
   ****************************************************************
   *
   
   
    
   
   

PROBLEM CONCLUSION
 *  This problem was fixed.
   Affected platforms:  AIX, HP-UX, Solaris, Linux and Windows.
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   IC90324
   
   
 * REPORTED COMPONENT NAME
   TSM SERVER
   
   
 * REPORTED COMPONENT ID
   5698ISMSV
   
   
 * REPORTED RELEASE
   63A
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2013-02-20
   
   
 * CLOSED DATE
   2013-03-21
   
   
 * LAST MODIFIED DATE
   2013-04-26
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   TSM SERVER
   
   
 * FIXED COMPONENT ID
   5698ISMSV
   
   

APPLICABLE COMPONENT LEVELS
 * R61A PSY
   UP
   
   
 * R61H PSY
   UP
   
   
 * R61L PSY
   UP
   
   
 * R61S PSY
   UP
   
   
 * R61W PSY
   UP
   
   
 * R61Z PSY
   UP
   
   
 * R62A PSY
   UP
   
   
 * R62H PSY
   UP
   
   
 * R62L PSY
   UP
   
   
 * R62S PSY
   UP
   
   
 * R62W PSY
   UP
   
   
 * R62Z PSY
   UP
   
   
 * R63A PSY
   UP
   
   
 * R63H PSY
   UP
   
   
 * R63L PSY
   UP
   
   
 * R63S PSY
   UP
   
   
 * R63W PSY
   UP
   
   
 * R63Z PSY
   UP