Title: IBM PI21144: Cell profile creation using Z-PMT tool fails when ports are blocked by RACF - United States

Text:
z/os  FIXES ARE AVAILABLE
8.5.5.4: WebSphere Application Server V8.5.5 Fix Pack 4 [http://www-01.ibm.com/support/docview.wss?uid=swg24038539]
8.5.5.5: WebSphere Application Server V8.5.5 Fix Pack 5 [http://www-01.ibm.com/support/docview.wss?uid=swg24039425]
8.5.5.6: WebSphere Application Server V8.5.5 Fix Pack 6 [http://www-01.ibm.com/support/docview.wss?uid=swg24040035]
8.5.5.7: WebSphere Application Server V8.5.5 Fix Pack 7 [http://www-01.ibm.com/support/docview.wss?uid=swg24040533]
8.5.5.8: WebSphere Application Server V8.5.5 Fix Pack 8 [http://www-01.ibm.com/support/docview.wss?uid=swg24041178]
8.5.5.9: WebSphere Application Server V8.5.5 Fix Pack 9 [http://www-01.ibm.com/support/docview.wss?uid=swg24041819]
8.5.5.10: WebSphere Application Server V8.5.5 Fix Pack 10 [http://www-01.ibm.com/support/docview.wss?uid=swg24042150]
8.5.5.11: WebSphere Application Server V8.5.5 Fix Pack 11 [http://www-01.ibm.com/support/docview.wss?uid=swg24043005]
8.5.5.12: WebSphere Application Server V8.5.5 Fix Pack 12 [http://www-01.ibm.com/support/docview.wss?uid=swg24043844]
8.5.5.13: WebSphere Application Server V8.5.5 Fix Pack 13 [http://www-01.ibm.com/support/docview.wss?uid=swg24044479]


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  In an environment where access to many ports is blocked by RACF,
   cell profile creation might fail with:
   
   INSTCONFFAILED: The profile could not be created.
   
   <WASHOME>/logs/manageprofiles/default/createDefaultServer.log
   will show this error message:
   
   WASX7015E: Exception running command: "$AdminTask
   createApplicationServer aaaaa {-name bbbbb -specificShortName
   BBBBB -generic
   com.ibm.websphere.management.exception.ConfigServiceException:
   Resolved port number 65536 is out of range.
   
   
    
   
   

LOCAL FIX
 *  Use genUniquePorts to cause the port scanner code to not run.
   Here are the steps to use this:
   
   1) In the <WAS_HOME>/profileTemplates directory, locate this
   file and make a backup copy:
   
   cell\dmgr\actions\createDefaultServer.ant
   
   2) Open the original in an editor and towards the bottom, you
   will find a line:
   
   command="$AdminTask createApplicationServer ... -bitmode
   ${bits}}"
   
   3) change the end of it from }}"
   (bracket, bracket, quote)
   
   to } -genUniquePorts false}"
   (bracket, space, -genUniquePorts, space, false, bracket, quote)
   
   4) Save the file and run profile creation.
   
   
    
   
   

PROBLEM SUMMARY
 *  ****************************************************************
   * USERS AFFECTED:  All users of IBM WebSphere Application      *
   *                  Server V8.5.                                *
   ****************************************************************
   * PROBLEM DESCRIPTION: Cell profile creation fails with a      *
   *                      port number out of range message, even  *
   *                      though all ports are explicitly         *
   *                      supplied by the user.                   *
   ****************************************************************
   * RECOMMENDATION:                                              *
   ****************************************************************
   Cell profile creation scans for available ports for the default
   application server.  This behavior is consistent with
   distributed platforms, but on Z/OS it can occur even when all
   ports have been explicitly specified by the Z-PMT tool. In a
   restricted environment, the unnecessary port availability
   checking could cause profile creation to fail.
   
   
    
   
   

PROBLEM CONCLUSION
 *  The port availability scan for the default application server
   included in the cell profile on Z/OS is no longer performed, as
   the port information is already supplied to or otherwise
   determined by the Z-PMT tool.
   
   APAR PI21144 is currently targeted for inclusion in Fix Pack
   8.5.5.4 of WebSphere Application Server V8.5.
   
   Please refer to the Recommended Updates page for delivery
   information:
   http://www.ibm.com/support/docview.wss?rs=180&uid=swg27004980 [http://www.ibm.com/support/docview.wss?rs=180&uid=swg27004980]
   
   In addition, please refer to URL:
   http://www.ibm.com/support/docview.wss?rs=404&uid=swg27006970 [http://www.ibm.com/support/docview.wss?rs=404&uid=swg27006970]
   for Fix Pack PTF information.
   
   
    
   
   

TEMPORARY FIX
 *  In the WAS_HOME/profileTemplates directory,
   within cell/dmgr/actions/createDefaultServer.ant,
   change:
   ${z.appserver.cluster.transition.name}
   to:
   ${z.appserver.cluster.transition.name}  -genUniquePorts false
   
   
    
   
   

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   PI21144
   
   
 * REPORTED COMPONENT NAME
   WEBSPHERE FOR Z
   
   
 * REPORTED COMPONENT ID
   5655I3500
   
   
 * REPORTED RELEASE
   850
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2014-07-01
   
   
 * CLOSED DATE
   2014-08-04
   
   
 * LAST MODIFIED DATE
   2014-08-04
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   WEBSPHERE FOR Z
   
   
 * FIXED COMPONENT ID
   5655I3500
   
   

APPLICABLE COMPONENT LEVELS
 * R850 PSY
   UP