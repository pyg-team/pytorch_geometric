Title: IBM About RPC services and ClearCase on UNIX and Linux - United States

Text:
RPC; restrict; services; albd; rpcbind; remote procedure call; clearcase rpc; clearcase processes; clearcase servr calls; remote calls; 1146308; albd.conf; vob_server; view_server; tcp; udp TECHNOTE (FAQ)

QUESTION
 Which RPC services are used by IBM Rational ClearCase and why does ClearCase not use rpcbind on UNIX and Linux? 

ANSWER
#SUMMARY%3A 

#SUMMARY%3A 

Skip to SUMMARY 

There is a list of UDP and TCP services used by the ClearCase albd on UNIX and Linux in /opt/rational/clearcase/config/services/albd.conf 


Example:

# U G
# RPC I I 
# No. Ver. Proto D D Kind Ctl Params Service-Program
# --- --- ----- - - ---- ---------- ---------------
#

390513 3 udp,tcp - - shared - view_server
390514 3 udp - - shared - vob_server
390515 3 tcp - - reusable - db_server
390516 2 tcp - - shared - promote_server
390518 2 tcp - - schedule 5,0,5000000 vobrpc_server
390519 1 tcp - - shared - mntrpc_server
390520 1 tcp - - unshared - shipping_server
390521 1 udp - - shared - credmap_server
390522 1 tcp - - unshared - ws_helper
390523 1 tcp - - shared - admin_server
390524 1 tcp - - schedule 5,0,5000000 ctrack_server
#390525 (reserved)
390526 1 tcp - - shared - host_agent
390527 1 tcp - - schedule 5,100,0 ccfs_server
390528 1 tcp - - reusable - ccfs_server
390529 1 tcp - - shared - msadm_server


Example of albd.conf file from a host running ClearCase 8.x:  

# U G 

# RPC I I Addl. 

# No. Ver. Proto D D Kind Ctl Params Service-Program Args. 

# --- --- ----- - - ---- ---------- --------------- ---- 

# 

 

390513 3,4 udp,tcp - - shared - view_server 

390514 3 udp,tcp - - shared - vob_server 

390515 3 tcp - - reusable - db_server 

390516 2 tcp - - shared - promote_server 

390518 2 tcp - - schedule 5,0,5000000 vobrpc_server 

390519 1 tcp - - shared - mntrpc_server 

390520 1 tcp - - unshared - shipping_server -server 

390521 1 udp - - shared - credmap_server 

390522 1 tcp - - unshared - ws_helper 

390523 1 tcp - - shared - admin_server 

390524 1 tcp - - schedule 5,0,5000000 ctrack_server 

#390525 (reserved) 

390526 1 tcp - - shared - host_agent 

390527 1 tcp - - schedule 5,100,0 ccfs_server 

390528 1 tcp - - reusable - ccfs_server -1 

390529 1 tcp - - shared - msadm_server 

#390530 (syncmgr_server) 

#390531 (vob_synctool) 

#390532 (bugbase_synctool) 

#390533 (bbmsadm_server) 

390534 1 tcp - - schedule 5,0,5000000 typemgr_server


ClearCase does not use rpcbind. If the user types rpcinfo -p <some ClearCase hostname> from a UNIX prompt, the information returned will not contain the names/program numbers of any ClearCase services, because none are registered with rpcbind. NFS, on the other hand, is typically configured to use rpcbind to negotiate services and program numbers. ClearCase relies on NFS, so there is an indirect relationship at play between rpcbind and ClearCase. 

Note: NFS functionality is typically required in a UNIX or Linux environment, so a system administrator will have to set up NFS to work in the absence of rpcbind if it is desired to turn off the registration of RPC services. 

The albd_server must run on any ClearCase host on port 371. The entries 

 * albd 371/udp 
 * albd 371/tcp 


must be in the services database (either networked or local) on any ClearCase host, client or server. When albd_server gets a request for VOB or view services, a vob_server or view_server process is started that will listen on a TCP port or remain open on a UDP port. The port numbers are chosen by the operating system except when limited to a certain range by a ClearCase environment variables (review technote 1207525 [http://www-1.ibm.com/support/docview.wss?rs=984&uid=swg21207525] for more information). 

Communication over these ports is usually by RPC, except for file system requests for view or VOB storage (which may also employ RPC if those requests are over NFS). 






SUMMARY:

RPC is required for ClearCase. The UNIX commands 

 * rpcinfo -n 371 -u <clearcase host> 390512 
 * rpcinfo -n 371 -t <clearcase host> 390512


where 390512 is the program number of albd_server, must succeed on any <clearcase host>. ClearCase program numbers for albd_server and other ClearCase services as listed above are not registered, so rpcbind may be turned off, as long as NFS transport for VOB and view storage is arranged by some distributed file system that either does not use RPC (for example Microsoft networking) or for which RPC does not have to be registered. 

Only albd_server has a default port (371). Other ClearCase client and server ports are negotiated by the operating system as needed.


[http://www.ibm.com/i/v14/icons/u_bold.gif] [/target/url/]Back to top 

RELATED INFORMATION
#About Rational ClearCase server processes [http://www.ibm.com/support/docview.wss?uid=swg21259084]