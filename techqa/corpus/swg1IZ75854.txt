Title: IBM IZ75854: PERFORMANCE ISSUE DUE TO ADVOC/QUERY REPORTS CREATING ADDITIONAL THREADS ON ALL WEBSERVER JVM'S AND HOW TO SWITCHOFF ADVOC/QUERY - United States

Text:
 SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  ***Overview
   
   So because these schedule reports are advoc reports they will
   run on any instance and no way of preventing them running via
   the donotrun property.
   
   So three related problems causing the performance problem:
   
   1. How to stop or prevent advoc/query reports from running on UI
   JVM, as crontask instance name is changed for every report so
   not possible to disable via donotrun property.(new issue)
   
   2. Performance issue due to advoc/query reports creating
   additional threads on all webserver JVM's and eventually causing
   it to not function (new issue).
   
   3. APAR IZ72323 [http://www-01.ibm.com/support/docview.wss?uid=swg1IZ72323] GROWING NUMBER OF REPORTSCHEDULE CRON TASKS,
   which a hotfix was sent and minor issue as really only requires
   cleaning out the taskschedule table.
   
   "J" should I log these 1. and 2. as new APAR?
   
   It looks like not possible to alter how the advoc/query reports
   run, maybe fixing the thread problem will resolve the issue.
   
   
   Product development:
   
   
   
   
   
   
   
   
   
   >
   > RE: PMR 88282,999,616 - S3 - SYSTEM Performance issue--
   >
   > Yes, I think enter two APARS, for 1) and 2) is a good idea.
   >
   
   It was the limitation of the donotrun syntax that prevent the
   disabling of the SCHEDULE REPORT crontask on the UI server,
   unless you don't need to run any crontask on the server, then
   you can use
   
   ALL for the property. If this is not the case, then it is a
   limitation of maximo.
   
   I believe 1 has similar enhancement request in place. It would
   be good to have an APAR, so we can address it quicker.
   
   
   
   ***Steps to reproduce
   
   1. Use a cluster of JVM, minimium of 2
   
   2. Get users to start using the advoc/query reports, a few times
   
   These are the reports users can create inside maximo based on a
   maximo query, in any application. Steps:
   
   1. logon onto Maximo
   2. Goto wotrack
   3. Goto to action menu >> run reports
   4. Click create report
   5. Fill out the forms and submit report.
   
   
   Result:
   
   Threads are created on webserver which are not being closed
   off or cleaned up, these build up over time and cause the
   webserver to slow down to point becomes unuseable.
   
   Webspere support suggested this workaround,
   of limiting the pool size.
   
   Potential native memory use in WebSphere Application Server
   thread pools
   http://www-01.ibm.com/support/docview.wss?uid=swg21368248 [http://www-01.ibm.com/support/docview.wss?uid=swg21368248]
   
   Client tried to remove the crontask via the donotrun property
   but this isn't possible because a new crontask gets created
   everytime a user uses the advoc/query reports functionality.
   
   
   
   Client: Logs/dumps are attached to the PMR 88282,999,616
   
   I run it for MaximoUI-1 server and found that the threads were
   create
   and stayed on this server:
   3XMTHREADINFO      "maximo-REPORTSCHEDULE.1273034061441"
   (TID:0x0000000086DFA100, sys_thread_t:0x0000000009071940,
   state:CW,
   native
   ID:0x0000000000001078) prio=5
   4XESTACKTRACE          at java/lang/Thread.sleep(Native Method)
   4XESTACKTRACE          at
   java/lang/Thread.sleep(Thread.java:938(Compiled
   Code))
   4XESTACKTRACE          at
   psdi/server/CronTaskManager$CronThread.run(CronTaskManager.java:
   1824(Com
   piled
    Code))
   Then I run it for MaximoMIF and got the same result?!?
   3XMTHREADINFO      "maximo-REPORTSCHEDULE.1273034061441"
   (TID:0x0000000078683800, sys_thread_t:0x0000000008FC8850,
   state:CW,
   native
   ID:0x00000000000019CC) prio=5
   4XESTACKTRACE          at java/lang/Thread.sleep(Native Method)
   4XESTACKTRACE          at
   java/lang/Thread.sleep(Thread.java:938(Compiled
   Code))
   4XESTACKTRACE          at
   psdi/server/CronTaskManager$CronThread.run(CronTaskManager.java:
   1824(Com
   piled
    Code))
   
   Envir: 7115, Websphere
   
   
    
   
   

LOCAL FIX
 *  None available, client would like to separate this from th UI
   JVM's but not possible.
   
   Only valid workaround don't use " advoc/query reports"
   functionality.
   
   
    
   
   

PROBLEM SUMMARY
 *  ****************************************************************
   * USERS AFFECTED: All                                          *
   ****************************************************************
   * PROBLEM DESCRIPTION: The donotrun list only takes            *
   *                      crontaskname.instance name, so that the *
   *                      automatically generated report          *
   *                      crontasks cannot be excluded in do not  *
   *                      run.                                    *
   *                                                              *
   ****************************************************************
   * RECOMMENDATION:                                              *
   *                                                              *
   *                                                              *
   *                                                              *
   ****************************************************************
   The donotrun list only takes crontaskname.instance name, so
   that the automatically generated report crontasks cannot be
   excluded in do not run.
   
   
    
   
   

PROBLEM CONCLUSION
 *  Already addressed in 7116 and above. The donotrun list also can
   take only taskname, which present, all instances of this
   crontask will be excluded.
   
   
   
   
   
   The fix for this APAR is contained in the following maintenance
   package:
   
     | release\fix pack | REL 7.1.1.6 - BS
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   IZ75854
   
   
 * REPORTED COMPONENT NAME
   MAXIMO INSTALL
   
   
 * REPORTED COMPONENT ID
   5724R46IT
   
   
 * REPORTED RELEASE
   710
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2010-05-10
   
   
 * CLOSED DATE
   2010-06-14
   
   
 * LAST MODIFIED DATE
   2011-12-18
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

MODULES/MACROS
 *  MAXIMO
   
   
    
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   MAXIMO INSTALL
   
   
 * FIXED COMPONENT ID
   5724R46IT
   
   

APPLICABLE COMPONENT LEVELS
 * R710 PSY
   UP