Title: IBM PK12853: IMPLICITLY SET CLIENT INFORMATION BY SETTING TRACE WAS.CLIENTINFO GETS ORA-06550 - United States

Text:
 SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  If you use Oracle 8.1.7.x database server and set client
   information (either implicitly or explictly - see information
   center for more detail), you may get the following error:
   [9/14/05 13:25:39:057 PDT] 00000021 MCWrapper     E   J2CA0021E:
   An exception occurred while trying to get a Connection from the
   Managed Connection resource jdbc/messaging :
   com.ibm.ws.exception.WsException: DSRA0080E: An exception was
   received by the Data Store Adapter. See original exception
   message: ORA-06550: line 1, column 20:
   PLS-00302: component 'SET_IDENTIFIER' must be declared
   ORA-06550: line 1, column 7:
   PL/SQL: Statement ignored
   . with SQL State : 65000 SQL Code : 6550
    at
   oracle.jdbc.dbaccess.DBError.throwSqlException(DBError.java:134)
    at oracle.jdbc.ttc7.TTIoer.processError(TTIoer.java:289)
    at oracle.jdbc.ttc7.Oall7.receive(Oall7.java:582)
    at
   oracle.jdbc.ttc7.TTC7Protocol.doOall7(TTC7Protocol.java:1986)
    at
   oracle.jdbc.ttc7.TTC7Protocol.parseExecuteFetch(TTC7Protocol.jav
   a:1144)
    at
   oracle.jdbc.driver.OracleStatement.executeNonQuery(OracleStateme
   nt.java:2152)
    at
   oracle.jdbc.driver.OracleStatement.doExecuteOther(OracleStatemen
   t.java:2035)
    at
   oracle.jdbc.driver.OracleStatement.doExecuteWithTimeout(OracleSt
   atement.java:2876)
    at
   oracle.jdbc.driver.OraclePreparedStatement.executeUpdate(OracleP
   reparedStatement.java:609)
    at
   oracle.jdbc.driver.OraclePreparedStatement.execute(OraclePrepare
   dStatement.java:685)
    at
   oracle.jdbc.dbaccess.DBAccess.setClientIdentifier(DBAccess.java:
   1949)
    at
   oracle.jdbc.driver.OracleConnection.setClientIdentifier(OracleCo
   nnection.java:4787)
    at
   com.ibm.ws.rsadapter.spi.InternalOracleDataStoreHelper.setClient
   Information(InternalOracleDataStoreHelper.java:412)
    at
   com.ibm.ws.rsadapter.spi.WSRdbManagedConnectionImpl.getConnectio
   n(WSRdbManagedConnectionImpl.java:2628)
    at com.ibm.ejs.j2c.MCWrapper.getConnection(MCWrapper.java:1748)
    at
   com.ibm.ejs.j2c.ConnectionManager.allocateConnection(ConnectionM
   anager.java:592)
    at
   com.ibm.ws.rsadapter.jdbc.WSJdbcDataSource.getConnection(WSJdbcD
   ataSource.java:331)
   ....
   When setting client information to Oracle database, WebSphere
   issue the method call
     oracle.jdbc.driver.OracleConnection.setClientIdentifier
   to Oracle JDBC driver and the Oracle JDBC driver translates it
   to Oracle API call "dbms_session.set_identifier". From Oracle
   documentation, this
   API is not supported with Oracle 8i (it starts with 9i),
   therefore you receive the error:
     PLS-00302: component `SET_IDENTIFIER` must be declared
     ORA-06550: line 1, column 7:
   .
   This APAR will disable the functionality to set client
   information if Oracle database server is prior to 9i.
   
   
    
   
   

LOCAL FIX
 *  If you don't intend to pass client information to Oracle, don't
   enable trace using "*=all" trace. Use the specific string for
   the interested components (For example: RRA=all:WAS.j2c=all). If
   you do need a trace of *=all; append ":WAS.clientinfo=off" to
   turn of the passing of the client information.
   
   
    
   
   

PROBLEM SUMMARY
 *  ****************************************************************
   * USERS AFFECTED: WebSphere Application Server version 6.0     *
   *                 users who are also using an Oracle8i         *
   *                 database server.                             *
   ****************************************************************
   * PROBLEM DESCRIPTION: We must not call the method             *
   *                      OracleConnection.setClientIdentifier    *
   *                      when an Oracle 8i database is used.     *
   ****************************************************************
   * RECOMMENDATION:                                              *
   ****************************************************************
   When setting client information to Oracle database, Application
   Server issues the method call
   oracle.jdbc.driver.OracleConnection.setClientIdentifier
   to Oracle JDBC driver and the Oracle JDBC driver translates it
   to Oracle API call "dbms_session.set_identifier".  From Oracle
   documentation, this API is not supported with Oracle 8i (it
   starts with 9i), therefore you receive the error:
   PLS-00302: component  SET_IDENTIFIER  must be declared
   ORA-06550: line 1, column 7: PL/SQL: Statement ignored. with
   SQL State : 65000 SQL Code : 6550
   
   
    
   
   

PROBLEM CONCLUSION
 *  This APAR will disable the functionality to set client
   information if the Oracle database server is 8i.  This
   function will also be disabled if the database version cannot
   be determined because the JDBC driver does not support the
   necessary getter method.
   
   The fix for this APAR is currently targeted for inclusion
   in fixpack 6.0.2.7.
   Please refer to the recommended updates page for delivery
   information:
   http://www.ibm.com/support/docview.wss?rs=180&uid=swg27004980 [http://www.ibm.com/support/docview.wss?rs=180&uid=swg27004980]
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   PK12853
   
   
 * REPORTED COMPONENT NAME
   WEBSPH APP SERV
   
   
 * REPORTED COMPONENT ID
   5724J0800
   
   
 * REPORTED RELEASE
   60A
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2005-10-03
   
   
 * CLOSED DATE
   2005-12-05
   
   
 * LAST MODIFIED DATE
   2011-08-17
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

MODULES/MACROS
 *  ADAPTER
   
   
    
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   WEBSPH APP SERV
   
   
 * FIXED COMPONENT ID
   5724J0800
   
   

APPLICABLE COMPONENT LEVELS
 * R60A PSY
   UP
   
   
 * R60H PSY
   UP
   
   
 * R60I PSY
   UP
   
   
 * R60P PSY
   UP
   
   
 * R60S PSY
   UP
   
   
 * R60W PSY
   UP
   
   
 * R60Z PSY
   UP