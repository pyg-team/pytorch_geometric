Title: IBM JCC reporting timeouts (-4210) attempting to obtain transport objects after having upgraded the driver. - United States

Text:
 TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 Application failing to obtain connection to DB2 returning an exception reporting a timeout occurred attempting to obtain a transport object after having upgraded the JCC driver to versions 3.63 and 4.13 or greater. 

SYMPTOM
java.sql.SQLException: [jcc][t4][10391][12247][3.61.107] Timeout getting a transport object from pool.
ERRORCODE=-4210, SQLSTATE=57033DSRA0010E: SQL State = 57033, Error Code = -4,210


CAUSE
A default 1,000 max transport objects has been introduced into the JCC drivers as of versions 3.63 or 4.13 and greater.

DIAGNOSING THE PROBLEM
Prior to 3.63 or 4.13 there was the number of transport objects for the DataSource is limited only by the db2.jcc.maxTransportObjects value for the driver. It's possible that after upgrading the JCC driver applications may hit the introduced max 1,000 transport (connection) objects. 


This can be confirmed by collecting a JCC driver trace and engaging DB2 Support for review. 

Collecting Data: Tracing with the IBM Data Server driver for JDBC and SQLJ [http://www-01.ibm.com/support/docview.wss?uid=swg21196160]


RESOLVING THE PROBLEM
Tune the maxTransportObjects JCC property. 

This property can be set both as a standard custom property from within the JDBC datasource and as a global property from within the DB2JccConfiguration.properties file. The global property will override the datasource property. The advantage of using the global properties file is that we would expect it to apply to all applications, not just individual datasource.

Common IBM Data Server Driver for JDBC and SQLJ properties for DB2 for z/OS [http://www.ibm.com/support/knowledgecenter/SSEPGG_10.5.0/com.ibm.db2.luw.apdv.java.doc/src/tpc/imjcc_r0052072.html?lang=en]