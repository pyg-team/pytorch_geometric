Title: IBM PM98753: BINDINGS THEN CLIENT CONNECTION FACTORY DOES NOT WORK AS EXPECTED WITH LISTENER PORTS - United States

Text:
z/os  FIXES ARE AVAILABLE
8.5.5.2: WebSphere Application Server V8.5.5 Fix Pack 2 [http://www-01.ibm.com/support/docview.wss?uid=swg24037250]
8.5.5.3: WebSphere Application Server V8.5.5 Fix Pack 3 [http://www-01.ibm.com/support/docview.wss?uid=swg24038133]
8.5.5.4: WebSphere Application Server V8.5.5 Fix Pack 4 [http://www-01.ibm.com/support/docview.wss?uid=swg24038539]
8.5.5.5: WebSphere Application Server V8.5.5 Fix Pack 5 [http://www-01.ibm.com/support/docview.wss?uid=swg24039425]
8.5.5.6: WebSphere Application Server V8.5.5 Fix Pack 6 [http://www-01.ibm.com/support/docview.wss?uid=swg24040035]
8.5.5.7: WebSphere Application Server V8.5.5 Fix Pack 7 [http://www-01.ibm.com/support/docview.wss?uid=swg24040533]
8.5.5.8: WebSphere Application Server V8.5.5 Fix Pack 8 [http://www-01.ibm.com/support/docview.wss?uid=swg24041178]
8.5.5.9: WebSphere Application Server V8.5.5 Fix Pack 9 [http://www-01.ibm.com/support/docview.wss?uid=swg24041819]
8.5.5.10: WebSphere Application Server V8.5.5 Fix Pack 10 [http://www-01.ibm.com/support/docview.wss?uid=swg24042150]
8.5.5.11: WebSphere Application Server V8.5.5 Fix Pack 11 [http://www-01.ibm.com/support/docview.wss?uid=swg24043005]
8.5.5.12: WebSphere Application Server V8.5.5 Fix Pack 12 [http://www-01.ibm.com/support/docview.wss?uid=swg24043844]
8.5.5.13: WebSphere Application Server V8.5.5 Fix Pack 13 [http://www-01.ibm.com/support/docview.wss?uid=swg24044479]


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  A listener port configured in ASF mode with a BINDINGS then
   CLIENT connection factory does not reconnect with either the
   CLIENT mode connection (when in BINDINGS mode) or the BINDINGS
   mode connection (when in CLIENT mode) when a broken connection
   Exception occurs in the Control Region.
   
   Instead, the listener in the Control Region continues to
   attempt to connect to the Queue Manager it first connected to.
   
   Also, when connected in CLIENT mode, restarting the listener
   port does not cause the listener port to connect in BINDINGS
   mode if a BINDINGS mode connection is possible.
   
   
    
   
   

LOCAL FIX

PROBLEM SUMMARY
 *  ****************************************************************
   * USERS AFFECTED:  All users of IBM WebSphere Application      *
   *                  Server V8.5 Listener Ports with WebSphere   *
   *                  MQ JMS.                                     *
   ****************************************************************
   * PROBLEM DESCRIPTION: Listener port configured with BINDINGS  *
   *                      then CLIENT Connection Factory fails    *
   *                      to reconnect after broken connection.   *
   ****************************************************************
   * RECOMMENDATION:                                              *
   ****************************************************************
   The problem is that the listener in the Control Region does not
   have access to the BINDINGS then CLIENT logic encapsulated in
   the managed connection factory in the Servant Region.  As a
   result, when a broken connection occurs, the Control Region
   listener attempts to reconnect only with the unmanaged
   connection factory first passed from the Servant Region
   (which has not BINDINGS then CLIENT logic).
   Broken connections may not be noticed in the servant region
   because the connection used to get messages is idle until a
   MessageReference is received from the Control Region.
   
   
    
   
   

PROBLEM CONCLUSION
 *  The solution is to:
   
   1) Trigger a restart of the listener port if the connection
   with the Queue Manager is detected to be broken in the Control
   Region.
   2) When the listener port is starting in the Servant Region,
   and BINDINGS then CLIENT is configured on the connection
   factory, the first connection created is destroyed.  This
   ensures that the connection is working (and is not a broken
   connection from the pool).
   
   To ensure BINDINGS then CLIENT will always reconnect
   if possible when the connection to the queue manager is
   broken, the connection factory should either only be used by
   the listener port, or have a purge policy of entire pool.
   
   APAR PM98753 is currently targeted for inclusion in Fix Pack
   8.5.5.2 of WebSphere Application Server V8.5.5.
   
   Please refer to the Recommended Updates page for delivery
   information:
   http://www.ibm.com/support/docview.wss?rs=180&uid=swg27004980 [http://www.ibm.com/support/docview.wss?rs=180&uid=swg27004980]
   
   In addition, please refer to URL:
   http://www.ibm.com/support/docview.wss?rs=404&uid=swg27006970 [http://www.ibm.com/support/docview.wss?rs=404&uid=swg27006970]
   for Fix Pack PTF information.
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   PM98753
   
   
 * REPORTED COMPONENT NAME
   WEBSPHERE FOR Z
   
   
 * REPORTED COMPONENT ID
   5655I3500
   
   
 * REPORTED RELEASE
   850
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2013-10-09
   
   
 * CLOSED DATE
   2013-10-16
   
   
 * LAST MODIFIED DATE
   2013-10-16
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   WEBSPHERE FOR Z
   
   
 * FIXED COMPONENT ID
   5655I3500
   
   

APPLICABLE COMPONENT LEVELS
 * R850 PSY
   UP