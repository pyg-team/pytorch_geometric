Title: IBM TEPS not working after migration to 6.3 FP1 - United States

Text:
upgrade 6.3 IIM InstallManager 6.2.3 IHS plugins plug-in 15200 ITM TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 ITM servers have been upgraded from 6.2.3 to 6.3 FP1, but TEP users cannot login to TEPS.
Port 15200 is not listening and so TEP clients are not able to reach the server. 

SYMPTOM
If port 15200 is not listening, then likely the IBM HTTP Server (IHS) or the IHS plugins have not been correctly installed.


CAUSE
It can happen if the migration has been restarted after a first installation failure (caused for example by a file system space shortage) without performing a full cleanup of the components previously installed. In this case, the InstallationManager that is used to install IHS and the related plugins could have some inconsistencies or corruptions and this would prevent a correct upgrade.

RESOLVING THE PROBLEM
First of all you should have a valid backup of the ITM 623 installation that is to be done before attempting the do the upgrade. It will be used to have a valid point from which you have to re-attempt the upgrade after that you have removed all of the Installation Manager components. 

That said, you need to remove all the components installed using InstallManager and finally you also need to remove InstallationManager as well.
Follow those steps carefully:

1. Establish an X11 connection from the AIX system to your desktop.
2. Run xclock to verify the connection. If the clock does not display on your desktop, then the X11 connection is not working and you need to ask a system administrator to fix it.
3. Run the following command:
/opt/IBM/InstallationManager/eclipse/IBMIM
4. An IBM Installation Manager window will be displayed.
5. From that view, open File --> View Installation History. You will see all the components installed through the IIM.

Selecting an entry and clicking "View Log" button, you can see the related installation log and you can also export this file for troubleshooting purpose.
If you have only entries related to IBM HTTP Server V8 and Web Server Plug-ins, then we can proceed removing the installed components and then the InstallationManager.
Click Close button and proceed with next steps

6. Select the "Uninstall" icon from the displayed window.
7. Verify that there are only two main items in the list, each with one sub-item.
The first main item starts with "Web Server Plug-ins for IBM WebSphere Applicat..."
The sub-item show the same text and also a version number of 8.0.0.0 and a vendor of IBM.
The second main item starts with "IBM HTTP Server V8.0 for Tivoli Enterprise Por..."
The sub-item show the same text and also a version number of 8.0.0.0 and a vendor of IBM.
8. Select the "Select All" button from the displayed window.
9. Verify that all of the check boxes in the list are selected.
10. Select the "Next >" button.
11. Select the "Uninstall" button. This may take a while, be patient.
12. A pop-up windows will display stating that there were errors while uninstalling. This is to be expected since the installation failed previously and we are in an inconsistent situation.
13. Select the "OK" button from the pop-up window.
14. You may see a message like the following on the displayed window
---------------
Error uninstalling
Unable to find custom install operation
com.ibm.ws.exec.command.Exec.
----------------
15. Select the "Finish" button from the displayed window.
16. Select the Window border "X" button or select "File" -> "Exit" to close the displayed window.
17. From the command line, you can check if all went fine with uninstallation by issuing the following commands :
a. export PATH=/opt/IBM/InstallationManager/eclipse/tools:$PATH
b. imcl listInstalledPackages

The second command will list the currently installed packages. If previous steps went fine, you should see just a single line for
com.ibm.cic.agent

18. In this case we can proceed with removing the InstallationManager issuing the command:
/var/ibm/InstallationManager/uninstall/uninstallc
19. When the uninstallation of InstallationManager completed, you can check that it has been removed from the following two directories:
- /opt/IBM/InstallationManager
- /var/ibm/InstallationManager

Now you can restore the whole $CANDLEHOME$ from the backup of the ITM 6.2.3.

After all of the above is done, you will have only the ITM 6.2.3 home directory (eg $CANDLEHOME$) and not the /opt/IBM/InstallationManager (which was removed with the steps above) as this latter is installed only by ITM 6.3.

You can now try to upgrade ITM again.

 

PRODUCT ALIAS/SYNONYM
 IBM Tivoli Monitoring V6.3