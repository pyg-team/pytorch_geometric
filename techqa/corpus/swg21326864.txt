Title: IBM Web Content Library deletion fails on z/OS - United States

Text:
IllegalStateException; 6101zGA; 6101eGA TECHNOTE (TROUBLESHOOTING)

PROBLEM
When you attempt to delete a Web content library the library fails to delete and errors are displayed in the log.

SYMPTOM
When the logs are reviewed, errors are displayed. 

For Example:
Description: Log Java Message
Message: java.lang.RuntimeException: java.lang.IllegalStateException: Cannot start a new UOW. A LocalTransactionContainment is already active with work.
at com.ibm.workplace.wcm.services.eventlog.EventLogDatabase.runUpdate(EventLogDatabase.java:3423)
at com.ibm.workplace.wcm.services.eventlog.EventLogDatabase.removeItemVersions(EventLogDatabase.java:1426)
at com.ibm.workplace.wcm.services.task.DeleteTask.updateEventLogOfDeletedItem(DeleteTask.java:750)
at com.ibm.workplace.wcm.services.task.DeleteTask.doTaskWork(DeleteTask.java:336)
at com.ibm.workplace.wcm.services.task.CompoundTask.runTask(CompoundTask.java:135)
at com.ibm.workplace.wcm.services.task.AbstractTask.run(AbstractTask.java:361)
at com.ibm.workplace.wcm.services.task.TaskServiceImpl.runTaskSynchronous(TaskServiceImpl.java:584)
at com.ibm.workplace.wcm.services.task.ScheduledTask.run(ScheduledTask.java:104)
at com.ibm.wps.services.workmanager.impl.WasWorkWrapper.run(WasWorkWrapper.java:41)
at com.ibm.ws.asynchbeans.J2EEContext$RunProxy.run(J2EEContext.java:261)
at java.security.AccessController.doPrivileged(AccessController.java:219)
at javax.security.auth.Subject.doAs(Subject.java:495)
at com.ibm.websphere.security.auth.WSSubject.doAs(WSSubject.java:118)
at com.ibm.ws.asynchbeans.J2EEContext$DoAsProxy.run(J2EEContext.java:328)
at java.security.AccessController.doPrivileged(AccessController.java:246)
at com.ibm.ws.asynchbeans.J2EEContext.run(J2EEContext.java:757)
at com.ibm.ws.asynchbeans.WorkWithExecutionContextImpl.go(WorkWithExecutionContextImpl.java:218)
at com.ibm.ws.asynchbeans.ABWorkItemImpl.run(ABWorkItemImpl.java:158)
at com.ibm.ws.asynchbeans.WLMABWorkItemImpl.run(WLMABWorkItemImpl.java:66)
at com.ibm.ws.util.ThreadPool$Worker.run(ThreadPool.java:1473)
Caused by: java.lang.IllegalStateException: Cannot start a new UOW. A LocalTransactionContainment is already active with work.
at com.ibm.ws.LocalTransaction.LTCUOWCallback.uowPreBegin(LTCUOWCallback.java:248)
at com.ibm.ws.LocalTransaction.LTCUOWCallback.contextChange(LTCUOWCallback.java:164)
at com.ibm.ws.uow.UOWScopeCallbackManager.notifyCallbacks(UOWScopeCallbackManager.java:68)
at com.ibm.ws.Transaction.JTA.UserTransactionImpl.begin(UserTransactionImpl.java:163)
at com.ibm.workplace.wcm.util.transaction.TransactionManager.doCall(TransactionManager.java:164)
at com.ibm.workplace.wcm.util.transaction.TransactionManager.call(TransactionManager.java:70)
at com.ibm.workplace.wcm.services.eventlog.EventLogDatabase.runUpdate(EventLogDatabase.java:3414)
... 19 more


RESOLVING THE PROBLEM
This issue is caused by the deletion process completing prematurely. Although the contents of the library are deleted, the library itself is not deleted. You will need to repeat the deletion process a second time to completely delete the Web content library. 





 * 
 *