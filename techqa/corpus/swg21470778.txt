Title: IBM Collecting Data:  Installation and Configuration for WebSphere Portal 7.0 - z/OS - United States

Text:
Collecting Data; MustGather; Must Gather; MustGatherDocument; zOS; install; installation; config; configuration; Collecting Data; Collecting Data; MustGather RECOMMENDED RESOURCES

ABSTRACT
 Collecting troubleshooting data for Installation and Configuration problems with IBM WebSphere Portal 7.0 on z/OS expedites time to resolution by enabling IBM Support to provide informed problem analysis. 

CONTENT
If you have already contacted IBM Support and must collect data to determine the nature of a problem in WebSphere Portal, review the information below for the available methods of data collection. Otherwise, review Collecting Data: Read first for WebSphere Portal 7.0. [http://www.ibm.com/support/docview.wss?rs=688&uid=swg21444911] 

Collecting Installation/Configuration on z/OS specific information

This document is broken into following sections
- Automated collection of troubleshooting data 
- Using the new WebSphere Portal 7 log collector on z/OS
- Manual collection of troubleshooting data (optional) 
- Gathering the logs specific to your installation scenario
- How to FTP z/OS logs to your workstation
- Notes on transfer files from your workstation to the Portal configuration hierarchical file system (Config HFS) 
- Collecting and submitting logs and configuration data 


Automated collection of troubleshooting data Using the new WebSphere Portal log collector on Z/OS

In Websphere Portal 7.0 there is a new automatic log collector for z/OS. The collecfor allows you to collect , and optionally transfer directly to IBM FTP site, all configuration and log files resident or placed within the configuration hierarchical file system (Config HFS) of the portal server. This is done by running EJPSLOGS job. The relevant customization for defining, creating and running the EJPSLOGS job can be accessed via main Portal customization panels and then select the option Collect diagnostics. See more information at Data collection and symptom analysis: zos7 [http://www-10.lotus.com/ldd/portalwiki.nsf/dx/Data_collection_and_symptom_analysis_zos7] 

Note that running the collector does not automatically capture any joblogs at all. The various joblogs identified in later sections must be captured separately. Special processing, described, also described in later sections, can used to ensure they are included in collector logs. 


Manual collection of troubleshooting data 1. Gathering the logs specific to your installation and configuration
The following logs contain diagnostic information regarding the installation and configuration of a Portal profile after the product has already been installed via SMPE: 

-Collecting the configuration files and logs and 

- Joblogs from running any or all of the following jobs depending on how far you are in the configuration process or any customization you may have made. 

 EJPCFG1 (Stand-alone LDAP environment only)
EJPSCFGP( Federated repository environment only) 
EJPSCA
EJPSPTHI 
Any other jobs you may have run for your environment.
- Websphere Portal servant region joblog 
- Websphere Portal controller region joblog 
- System logs output (syslogs) from the duration of the run 
- Any system or console dump that may be reported, if available 


2. How to FTP z/OS logs to your workstation
The following is a sequence of instructions to transfer a joblog from the z/OS to your workstation. This will be an process to send the file directly from your workstation. Alternatively this can be an intermediate step before later transfering the file to the Portal Configuration HFS for future processing with the log collector job ( EJPSLOGS ).

a. Access the relevant joblog through the z/OS System Display and Search Facility (SDSF) command ST 

b.Type "xdc" in front of desired jobs and press enter. 

c. In the line Data set name, type in a dataset name ( for example â€˜MOWUSUA.SERVANT.LOG') Enter new for Disposition if it is a new dataset name. If file already exists enter old for Disposition . If error code E037 (Not enough space), change Space units ===> from BLKS to CYLS

d. From your workstation FTP the individual log dataset to the local workstation. A sample session is below . Note that data set name must be in single quotes as in 'MOWUSUA.SERVANT.LOG'. Be sure to transfer log files in ascii mod.
C:\PMR12345,678,000>ftp abc.raleigh.ibm.com
Connected to abc.raleigh.ibm.com.
220-FTPLOT1 IBM FTP CS V1R8 at abc.RALEIGH.IBM.COM, 01:51:55 on 2010-10-26.
220 Connection will close if idle for more than 5 minutes.
User (abc.raleigh.ibm.com:(none)): mowusua
331 Send password please.
Password:
230 MOWUSUA is logged on. 
ftp> ascii
200 Representation type is Ascii NonPrint
ftp> get 'MOWUSUA.SERVANT.LOG' Servant.log
200 Port request OK.
125 Sending data set MOWUSUA.SERVANT.LOG
250 Transfer completed successfully.
ftp: 1112762 bytes received in 1.89Seconds 588.45Kbytes/sec.
ftp> quit
221 Quit command received. Goodbye


3.Notes on transfer files from your workstation to the Websphere Portal configuration hierarchical file system ( Config HFS) 
- All files, joblogs, etc meant to be processsed by the EJPSLOGS job and or transferred to the IBM FTP site must be transferred to the <PROFILE>/ConfigEngine/log folder (/WebSphere/V7R0M0/AppServer7/profiles/default/ConfigEngine/log ) 
-Ordinarily files and logs from Section 2 above would be obvious candidates for transfer to the Config HFS
- Note that the file have to be transferred before the EJPSLOGS job is run. They must be transferred in binary mode. A Sample process is below.

C:\PMR12345,678,000>ftp abc.raleigh.ibm.com
Connected to abc.raleigh.ibm.com.
220-FTPLOT1 IBM FTP CS V1R8 at abc.RALEIGH.IBM.COM, 04:34:37 on 2010-10-26.
220 Connection will close if idle for more than 5 minutes.
User (abc.raleigh.ibm.com:(none)): mowusua
331 Send password please.
Password:
230 MOWUSUA is logged on. Working directory is "/u/mowusua".
ftp> cd /WebSphere/V7R0M0/AppServer7/profiles/default/ConfigEngine/log
250 HFS directory /WebSphere/V6R0M1/AppServer7/profiles/default/ConfigEngine/log
is the current working directory
ftp> bin
200 Representation type is Image
ftp> put Servant.log Servant.log
200 Port request OK.
125 Storing data set /WebSphere/V7R0M0/AppServer7/profiles/default/ConfigEngine/
log/Servant.log
250 Transfer completed successfully.
ftp: 1112762 bytes sent in 1.95Seconds 569.48Kbytes/sec.
ftp> quit
221 Quit command received. Goodbye.

Send the files to IBM Support by using the instructions outlined in Exchanging information with IBM Technical Support for problem determination [http://www.ibm.com/support/docview.wss?rs=688&uid=swg21201571]. 

Note: When sending in logs for review, include any relevant screenshots, timestamps, userIds, etc. in order to expedite analysis of the issue. 

Related Information  * IBM Support Portal: WebSphere Portal Troubleshooting [http://www.ibm.com/support/entry/portal/Troubleshooting/Software/WebSphere/WebSphere_Portal] [http://www.ibm.com/support/docview.wss?rs=688&uid=swg21201571] 
 * WebSphere Portal Family wiki: Troubleshooting [http://www-10.lotus.com/ldd/portalwiki.nsf/dx/Troubleshooting_wp7] 
 * Collecting Data: Read first for WebSphere Portal 7.0 [http://www.ibm.com/support/docview.wss?rs=688&uid=swg21444911]



 * 
 *