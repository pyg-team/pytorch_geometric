Title: IBM IZ80982: SQLEXCEPTION: ORA-01795: MAXIMUM NUMBER OF EXPRESSIONS IN A LIST IS 1000 CAUSED IN TR 6.3.1 - United States

Text:
 SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  Problem descriptioN:
   
   SQLException: ORA-01795: maximum number of expressions in a list
   is 1000 caused in TR 6.3.1
   
   Steps to replicate on Maximo core M6.2.3 with TR 6.3.1:
   
   
   -error happens for example when user runs a report,however
   report is not
   custom and reports are not counted in maximo.log anyway..
   -Offending query ,see below , that is run shows it's run by
   different users in the SQL log (on WARN level),so not a saved
   query by
   an user causing it.It shows different WO's selected.
   -Checked and error seems to have started just after upgrade from
   core Maximo 6.1. to 6.2.3.
   -In stacktrace it shows as follows:
   
   at
   psdi.plust.app.plustrecnrep.virtual.PlusTRecNRepRepairSet.getRep
   eatedRep
   airs(PlusTRecNRepRepairSet.java:166)
    at
   psdi.plust.webclient.beans.plustwo.PlusTRecentnRepeatRepairsUtil
   .repeatR
   epairsOperation(PlusTRecentnRepeatRepairsUtil.java:110)
    at
   psdi.plust.webclient.beans.plustwo.PlusTRecentnRepeatRepairsUtil
   .execute
   AutomaticDialogShow(PlusTRecentnRepeatRepairsUtil.java:142)
    at
   psdi.plust.webclient.beans.plustwo.PlusTWOChangeStatusBean.execu
   te(PlusT
   WOChangeStatusBean.java:114)
   
   -So, no custom classes at
   "psdi.plust.app.plustrecnrep.virtual.PlusTRecNRepRepairSet.getRe
   peatedRe
   pairs(PlusTRecNRepRepairSet.java:166)"
   
   -The "the getRepeatedRepairs method in the
   PlusTRecNRepRepairSet.class
   creates the SQL" looks to be creating the SQL and is a
   Transportation
   class
   
   -That class makes most of the following SQL we think ,now if you
   run
   this:
   
    select * from workorder    where status not in (select value
   from
   synonymdomain where domainid = 'WOSTATUS' and maxvalue = 'CAN')
   and
   woclass not in (select value from synonymdomain where domainid =
   'WOCLASS' and maxvalue = 'PLUSTVR') and workorder.istask = 0 and
   (exists
   (select 1 from asset a where a.assetnum = workorder.assetnum and
   workorder.siteid = siteid and assetid = (select assetid from
   asset where
   assetnum =  '80678374'  and siteid =  'TLLOP' )))
   
   
   STEPS TO REPLICATE:
   
   Run a report with various selected workorders
   
   ENVIRONMENT:
   
   Maximo 6.2.3
   Transportation 6.3.1
   
   Application within Maximo:WOTRACK(TR), REPORTING
   
   Discussed with Transportation Product Architect who suggested to
   submit an APAR and hot fix for this AVP client.
   
   
    
   
   

LOCAL FIX
 *  n/a
   
   
    
   
   

PROBLEM SUMMARY
 *  ****************************************************************
   * USERS AFFECTED: All Transportation Clients                   *
   ****************************************************************
   * PROBLEM DESCRIPTION: SQLException: ORA-01795: maximum number *
   *                      of expressions in a list                *
   *                                                              *
   *                      is 1000 caused in TR 6.3.1              *
   *                                                              *
   ****************************************************************
   * RECOMMENDATION:                                              *
   *                                                              *
   *                                                              *
   *                                                              *
   ****************************************************************
   For Oracle Database, the maximum number of elements allowed in
   an "IN list" is 1000,otherwise it will cause the following SQL
   exception: ORA-01795: MAXIMUM NUMBER OF EXPRESSIONS IN A LIST
   IS 1000.
   
   
    
   
   

PROBLEM CONCLUSION
 *  If the number of elements in a list (IN list) exceed 1000, the
   list will be broken into sublists with the maximum number of
   1000 elements each one.
   
   
   
   
   
   The fix for this APAR is contained in the following maintenance
   package:
   
     | release\fix pack | PANTERA P1
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   IZ80982
   
   
 * REPORTED COMPONENT NAME
   WORK ORDER TRAC
   
   
 * REPORTED COMPONENT ID
   5724R46WO
   
   
 * REPORTED RELEASE
   621
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2010-07-26
   
   
 * CLOSED DATE
   2010-09-20
   
   
 * LAST MODIFIED DATE
   2010-09-20
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

MODULES/MACROS
 *  MAXIMO
   
   
    
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   WORK ORDER TRAC
   
   
 * FIXED COMPONENT ID
   5724R46WO
   
   

APPLICABLE COMPONENT LEVELS
 * R621 PSY
   UP