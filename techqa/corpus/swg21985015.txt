Title: IBM Fix pack installation steps for product-specific fix pack - United States

Text:
 PREVENTIVE SERVICE PLANNING

ABSTRACT
 db2 fix pack steps involved in product-specific fix pack (server fix pack). 

CONTENT
Why and when would I use the product-specific fix pack?
If I have a single product and want to save the time to download the fix pack.
If system downtime is costly.
If I need to test the new fix pack without impacting my production databases.
If I need the ability to go back to the previous version quickly (system downtime in case of failure).
If I already have a fix pack installed and need to add new features or products to the fix pack.

Steps involved in product-specific fix pack 

NB: This technote discusses single partition non-pureScale fix pack's minimal and required steps involved while installing product-specific fix pack. For complete and best practice fix pack installation steps please refer applying fix packs section of the IBM Knowledge Center or Installing DB2 Servers Manual.

1. Download the server fix pack (product-specific fix pack image) binary from IBM site
2. Unzip the file (gunzip -c v10.1fp5_aix64_server.tar.gz | tar -xvf -) and run db2setup from the DB2 database product-specific fix pack image. Alternatively you can run db2_install (NB: The db2_install command has been deprecated and might be removed in a future release).

3. Check the current product installed path of your existing instance.

$ db2level
DB21085I This instance or install (instance name, where applicable: "db2inst1")
uses "64" bits and DB2 code release "SQL10012" with level identifier
"0203010E".
Informational tokens are "DB2 v10.1.0.2", "s121127", "IP23387", and Fix Pack
"2".
Product is installed at "/opt/IBM/db2/V10.1".

4. While you install the new fix pack using db2setup, specify new path. For example - 

Install into default directory (/opt/IBM/db2/V10.1) ? [yes/no]
no
Enter the full path of the base installation directory:
------------------------------------------------
/opt/IBM/db2/V10.1fp5

5. After successful installation, run the instance update command to update an instance to a higher level. db2iupdt command is used to update a DB2 instance from one DB2 copy to another DB2 copy of the same version of DB2 database product.

Before you run db2iupdt, it is recommended you backup database and current configuration and diagnostic information

For example - 

Stop the db2inst1 instance 

$ db2stop

login as root and go to newly installed path
# cd /opt/IBM/db2/V10.1fp5
# cd instance
# pwd
/opt/IBM/db2/V10.1fp5/instance
# ./db2iupdt db2inst1
DBI1446I The db2iupdt command is running.


DB2 installation is being initialized.

Total number of tasks to be performed: 4
Total estimated time for all tasks to be performed: 309 second(s)

Task #1 start
Description: Setting default global profile registry variables
Estimated time 1 second(s)
Task #1 end

Task #2 start
Description: Initializing instance list
Estimated time 5 second(s)
Task #2 end

Task #3 start
Description: Configuring DB2 instances
Estimated time 300 second(s)
Task #3 end

Task #4 start
Description: Updating global profile registry
Estimated time 3 second(s)
Task #4 end

The execution completed successfully.

For more information see the DB2 installation log at
"/tmp/db2iupdt.log.3407984".
DBI1070I Program db2iupdt completed successfully.

6. After successful db2iupdt command login to instance as owner and check the instance level

Log in as the instance owner.
# su - db2inst1
$ db2level
DB21085I This instance or install (instance name, where applicable: "db2inst1")
uses "64" bits and DB2 code release "SQL10015" with level identifier
"0206010E".
Informational tokens are "DB2 v10.1.0.5", "s150624", "IP23765", and Fix Pack
"5".
Product is installed at "/opt/IBM/db2/V10.1fp5".

Optional: Update the system catalog objects in your databases to support the fix pack. 

db2updv10 is recommended if you want to use capabilities specific to the fix pack. To view new functionality added in the fix pack, you should review fix pack summary. 

Note: Though revert back to previous level using -f level would be still available, it is recommended to backup your database before running db2updv10. Some system objects might become unusable after moving back to an earlier fix pack, and your database will need to be restored.

For each database, issue the command:

db2updv10 -d dbname

For ex -
$ db2updv10 -d sample


7. In case you want to revert back to previous level use -f level option of db2iupdt command. Here you run db2iupdt from old path.

-f level: Updates an instance from a higher DB2 version instance type to a lower DB2 version instance type for compatibility.

Please note, ignoring -f level results in failed db2iupdt attempt with warning DBI1177W and user response to re-issue the db2iupdt command with the -f level option.

Stop the db2inst1 instance 

$ db2stop

Login as root 

# cd /opt/IBM/db2/V10.1/instance
# ./db2iupdt -f level db2inst1
DBI1446I The db2iupdt command is running.


DB2 installation is being initialized.

Total number of tasks to be performed: 4
Total estimated time for all tasks to be performed: 309 second(s)

Task #1 start
Description: Setting default global profile registry variables
Estimated time 1 second(s)
Task #1 end

Task #2 start
Description: Initializing instance list
Estimated time 5 second(s)
Task #2 end

Task #3 start
Description: Configuring DB2 instances
Estimated time 300 second(s)
Task #3 end

Task #4 start
Description: Updating global profile registry
Estimated time 3 second(s)
Task #4 end

The execution completed successfully.

For more information see the DB2 installation log at
"/tmp/db2iupdt.log.7209154".
Required: Review the following log file also for warnings or errors:
"/tmp/db2iupdt_local.log.*"
DBI1070I Program db2iupdt completed successfully.


8. Check fix pack level after reverting back to old level

$ db2level
DB21085I This instance or install (instance name, where applicable: "db2inst1")
uses "64" bits and DB2 code release "SQL10012" with level identifier
"0203010E".
Informational tokens are "DB2 v10.1.0.2", "s121127", "IP23387", and Fix Pack
"2".
Product is installed at "/opt/IBM/db2/V10.1".

RELATED INFORMATION
 Universal versus product-specific fix packs [http://www.ibm.com/support/knowledgecenter/hr/SSEPGG_10.1.0/com.ibm.db2.luw.qb.server.doc/doc/c0025286.html]
Fix pack summary [http://www.ibm.com/support/knowledgecenter/SSEPGG_10.1.0/com.ibm.db2.luw.wn.doc/doc/c0060414.html]


 


Cross reference information Segment Product Component Platform Version Edition Information Management DB2 for Linux- UNIX and Windows