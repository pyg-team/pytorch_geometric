Title: IBM Collecting data for FileNet Image Services (IS) 4.x on HP-UX - United States

Text:
MustGatherDocument; mustgather; mustgather; mustgather; HPUX; HP-UX; 911 TECHNOTE (FAQ)

QUESTION
 Collecting and providing this information to IBM support will help expedite the problem resolution process. 

ANSWER
Questions to Answer 

 1. What exact products, versions, and system configuration exist? The more detail the better.
    Example: one Root/Index server, with a BES server, running IS 4.0 Service Pack 5 Fix Pack 9, Oracle 9i, HP-UX 11.11.
    
 2. What is the error message or symptom? Screenshots are best, if available.
    
 3. Which system is affected? Production, QA (Quality Assurance), Development, DR (Disaster Recovery) or Test?
    
 4. What changes have been made to the environment recently? Example: hardware or software added or modified? change in network configuration? users added? 
    
 5. Has this problem occurred before? If so, how often and can it be reproduced?
    
 6. Is there a workaround?
    
 7. What is the current business impact?


Logs to Collect 

The Image Services (IS) 911 logs provide the majority of information used by IBM support to analyze and resolve reported issues. However, additional logs may be requested by IBM, after review of the 911 logs depending upon the issue reported. 

Depending on your system and the error condition, 911 may run properly or hang. Please choose the proper scenario based on the behavior of 911. 

Scenario #1 - 911 runs properly (no hang) 

Scenario #2 - 911 hangs (which is determined by a lack of screen status messages) 

Scenario #1 

1. Run the 911 utility to gather data ( do this prior to restarting IS ). 

The output file is located in /fnsw/local/logs/911/911.<date>.<sequence number>.Z Example: /fnsw/local/logs/911/911.20080617.01.{tar}.Z. This would be a compressed tar file containing all the data gathered by running the 911 script. 

2. Collect the following volume group information:

1. vgdisplay -v /dev/vg00 >> vgdisplay.txt
2. For any other Volume Groups, same as step 1 for the VG name. 

Note: If there are multiple IS Servers (Root/Index and OSAR/MSAR servers) collect the data on each server.

3. Send the 911 output file and volume group information to IBM.
(911 file is named like: /fnsw/local/logs/911/911.20081210.01.{tar}.Z). 


Scenario #2

1. If 911 hangs, then Ctrl+C to quit 911 

Execute these commands to gather the logs (do this prior to restarting IS):

cd /fnsw/local/tmp 
script info.<date>.txt (Example: script info.06172008.txt)
bdf
cormon -p
ipcs
ipc_tool -i |tee
[Answer "y" if prompted] 
ipc_tool -s |tee
ipc_tool -t |tee
swapinfo -a
vmstat 5 5 
iostat 5 5 
ipc_tool -i |tee (2nd time to run this) 
[Answer "y" if prompted]
ps -ealf
MKF_debug 
netstat -a 
netstat -in
dbp -s
cormon -p (2nd time to run this)
PPMOI 
qp 
st 
sh 
quit 
fn_util whichfn
od -c /fnsw/procs/* 
^D

2. Restart IS, then collect the following:

1. Get elog file. Example: /fnsw/local/logs/elog/elog20080617
2. perf_report -a
3. perf_report -rful -m1000 > perf.rful.txt
4. Get the highest numbered CDB file from the Root/Index server in /fnsw/local/sd/conf_db/IMS_###.cdb

3. After IS restart, collect the following volume group information:

1. vgdisplay -v /dev/vg00 >> vgdisplay.txt
2. For any other Volume Groups, same as step 1 for the VG name.

Note: If there are multiple IS Servers (e.g. Root/Index and OSAR/MSAR servers) collect the data on each erver.

4. Send the output file (e.g., /fnsw/local/logs/911/911.20081210.01.{tar}.Z) or script file you created.
Example: "info.06172008.txt" and volume group information to IBM

What to do next 
Once you have collected the preceding information, you can submit the diagnostic information to IBM support.

For a listing of all technotes, downloads, and educational materials specific to the Image Services component, search the http://www-306.ibm.com/software/data/content-management/filenet-image-manager/support.html [http://www-306.ibm.com/software/data/content-management/filenet-image-manager/support.html]