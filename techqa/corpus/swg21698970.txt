Title: IBM How can I determine the disk space taken by Content Manager OnDemand for i on my system? - United States

Text:
 TECHNOTE (FAQ)

QUESTION
 I am trying to establish how much disk space is currently consumed by my Content Manager OnDemand for i installation. I understand libraries and IFS directories are both involved in storing report data and indexes. Is there an accurate way to determine the current space taken up so I can do some forecasting for the future? 

ANSWER
Yes, there are a couple of methods that can be used to calculate the space taken for the Content Manager OnDemand for i implementation on your system. The product uses several libraries and IFS paths to store programs and data, and the number of instances you have created will impact the number of libraries and IFS paths involved in the calculation. These product components are listed as follows: 

 * QRDARS -- Program library 
 * QUSRRDARS -- Shared user data library 
 * QUSROND -- Instance library with instance specific data. Note: While QUSROND is referred to as the default instance name, you may have used a different instance name and may have more than one instance on the system. To determine all the instances on a system, run the command: WRKOBJ OBJ(*ALL/ARSAG) OBJTYPE(*FILE). All libraries listed are instance libraries. When checking instance libraries or directories, use each library listed in place of or in addition to QUSROND. 
 * /QIBM/ProdData/OnDemand/ -- Program objects 
 * /QIBM/UserData/OnDemand/ -- Data for all instances, including shared data such as configuration files 
 * /QIBM/UserData/OnDemand/QUSROND/ -- Data for the QUSROND instance. Each instance will have its on directory in the /QIBM/UserData/OnDemand path. 
 * /QIBM/UserData/RDARS/ -- If you used to run Spool File Archive at V5R4 or earlier and depending on how you migrated your data, there may still be data in this path. 
 * /dev/QASPnn/ -- ONDEMAND_QUSROND.../.UDFS objects contain the .../ASMASPnn UDFS data . This directory would contain objects if you are using disk pools. 


1. In order to calculate the space consumed by the libraries involved, run the following command for each library. NOTE that all the steps below must be done with a user profile that has *ALLOBJ authority: 
DSPLIB LIB(QUSROND) OUTPUT(*PRINT)

Go to the bottom of the resulting QPDSPLIB output and you'll see something like "Total size : 440922112". In this case, the instance library takes up 440M. 

2. In order to calculate the space taken for your Content Manager OnDemand for i reports in the IFS, you can use either of the following two techniques:

A) Map a drive to your IBM i system (e.g., \\ecmi5f.svl.ibm.com\Root) and then drill down to the directory /QIBM/UserData/OnDemand. Right click on it, then click Properties. After several minutes of counting, it will stop and present the number of bytes in the "Size" and "Size on disk" measurements. It looks like this, although your numbers will be different:
[/support/docview.wss?uid=swg21698970&amp;aid=1]
B) You can also use the RTVDIRINF command:

[/support/docview.wss?uid=swg21698970&aid=2] [/support/docview.wss?uid=swg21698970&aid=2]

Then you will see a message like:
Database files QAEZD0010O and QAEZD0010D created in library QUSRSYS.

You can then query the first file, QAEZD0010O in QUSRSYS, and total up the "Data Bytes of the Object" and "Object Bytes Allocated" fields. The Data Bytes of the Object roughly approximates the "Size" field on the mapping picture, while the Object Bytes Allocated roughly approximates the "Size on disk" field on the mapping picture. All 4 numbers are about the same, but to be conservative, it is suggested you use the "Object Bytes Allocated" figure since it is the highest. You can also run PRTDIRINF over the file(s) created by RTVDIRINF. There are some restrictions, however: 

 * Directory information can be retrieved only for mounted file systems. 
 * Directory information can be retrieved only for local file systems. 
 * You must have all object (*ALLOBJ) special authority to run this command.
   

You would perform step A) or B) for each of the IFS paths listed above. Paths without active instance data, such as the /QIBM/UserData/RDARS directory, would not be growing. In fact the growth rate for the RDARS directory would be flat or, more likely, declining (as expiration occurs). 

If your UDFS is mounted at the time of viewing the properties for the instance directory (e.g., /QIBM/UserData/OnDemand/QUSROND), then the UDFS space is included. If the UDFS is not mounted, check the size of the applicable /dev/QASPnn .UDFS object(s). To determine if the UDFS is mounted, run the following IBM i command: 

DSPMFSINF OBJ('/QIBM/UserData/OnDemand/QUSROND/ASMASP01/PRIMARY') 

If File system type = "root" (/) - then the UDFS is not mounted 
If File system type = User-defined file system - then the UDFS is mounted 
You can determine which ASP(s), UDFS(s) or NFS(s) you have defined to your instance by querying the QARLCASP file in the instance library(ies). 

The directions above do not include any space taken by objects on Optical, Virtual Optical or tape volumes. 

If this information does not address your question, please contact IBM software support for further assistance. 
Stay Informed by Receiving Product and Lifecycle Notifications:
Click here [http://www.ibm.com/support/docview.wss?uid=swg21674106]