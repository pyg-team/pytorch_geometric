Title: IBM AWSBEH023E or AWSJCO028E errors received - unable to connect to TWS engine - United States

Text:
UNAUTHENTICATED; AWSJCL054E; AWSBEH023E; AWSJCO028E; AWSJCO084E; pwd; change TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 Unable to connect to the Tivoli Workload Scheduler (TWS) v8.3 or v8.4 engine using Job Scheduling Console (JSC) after changing the TWS user's password. 

SYMPTOM
AWSBEH023E Unable to establish communication with the server on host "127.0.0.1" using port "31117".


or

AWSJCO028E The object cannot be accessed because the user "UNAUTHENTICATED" is not defined in the Security file.

NOTE: If you add a user called "UNAUTHENTICATED" into the TWS Security file, you are able to create and connect to the TWS engine. However, removing the user "UNAUTHENTICATED" from the TWS Security file, you get errors as follows:

[1/6/09 16:24:56:092 EST] 0000001d ExceptionHelp E AWSJCL054E The command "ls" has failed, for the following reason: "AWSJCO052E User "UNAUTHENTICATED" is not authorized to perform the action "DISPLAY" on the file "GLOBALOPTS".".
[1/6/09 16:29:23:152 EST] 0000001f TWSEventConfi I AWSAEM006I This workstation "AIXMAST" is the Event Processor Manager.
[1/6/09 16:29:23:168 EST] 0000001f ConnException E AWSJCO084E The user "UNAUTHENTICATED" is not authorized to work with the "planner" process.


CAUSE
Incorrect settings in WebSphere Application Server (WAS) security properties resulting in incorrect settings in the security.xml file. 


DIAGNOSING THE PROBLEM
1. Have you changed the password for the twsuser in your JSC engine properties?

2. Does the TWS user exist on the master with the same password that you are using?


3. Check the WAS security properties by running the following command as root from the ~TWShome/wastools directory. This will create an output file called "mysecprops.txt" containing the WAS security properties:

#./ showSecurityProperties.sh > mysecprops.txt


RESOLVING THE PROBLEM
1. Stop the WebSphere Application Server as root: 

 
TWShome/wastools/stopWas.sh -user username -password password

2. Run TWShome/wastools/showSecurityProperties.sh > mysecprops.txt

In that file, change every password instance to plain text (or comment out the password line for any user password that has not changed). 

Example:

LocalOSServerID=maestro86
LocalOSServerpassword=*************<---change this password to plain text for the TWS user

LDAPServerId=maestro86
LDAPPassword=***********<---change this password to plain text for the TWS user

j2cUserid=db2inst1
j2cPassword=***********<---change this password to plain text for the DB2 user (or comment this out as shown below if the DB2 userID is not changing):

#j2cPassword=********

Comment the following three password fields (or see NOTE below):

#LDAPBindPassword=
#trustFilePassword=default
#keyFilePassword=default

NOTE: If you are not sure if these fields have been incorrectly modified, you should ensure that LDAPBindPassword parameter is set to "null" (blank) and the "keyFilePassword" and "trustFilePassword" parameters are set to the word "default" before running the changeSecurityProperties.sh script.

ALTERNATE METHOD WHEN CHANGING THE TWS USER'S PASSWORD:

Example: Create a text file with the following entries to use as input to the "changeSecurityProperties.sh" script:

LocalOSServerpassword=plain_text_password (for the TWS user)
LDAPPassword=plain_text_password (for the TWS user)
LocalOSServerREALM=(hostname of server)

IMPORTANT NOTE: Per APAR # IZ44871, the entire block to which the property belongs needs to be passed to the "changeSecurityProperties" script for the change to be effective.

You can also use this method when changing the DB2 instance user's password. To change the DB2 instance user's password, create a text file with only the following entries to use as input to the "changeSecurityProperties.sh" script:

j2cAlias=twsj2c (may be different in your environment)
j2cUserid=db2inst1 (may be different in your environment)
j2cPassword=plain_text_password (for the DB2 instance user)
j2cDescription=TWS authentication data entry for DB2

When only these entries exist in your input file, only the password parameter will be changed and the rest of the file will not be affected. 

3. Check the parameter for "enabled" in this file. Ensure that it is set to "true".

4. Check the parameter for "useDomainQualifiedUserNames" in this file. Ensure that it is set to "false".

5. Run TWShome/wastools/changeSecurityProperties.sh mysecprops.txt

6. Restart WAS as root:

TWShome/wastools/startWas.sh

 

PRODUCT ALIAS/SYNONYM
 Maestro
TWS
IWS
TWA