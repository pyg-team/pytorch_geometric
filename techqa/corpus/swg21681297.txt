Title: IBM MustGather: Tracing Intelligent Management feature in web server Plug-in v8.5.5 for traditional WebSphere Application Server Cell - United States

Text:
 TECHNOTE (FAQ)

QUESTION
 What information, logs, and traces, should I gather and send to IBM Support to troubleshoot a problem with the Intelligent Management feature in the web server Plug-in v8.5.5 for traditional WebSphere Application Server? 

CAUSE
Starting with version 8.5.5, there is a new feature in the IBM web server Plug-in, called Intelligent Management [http://www.ibm.com/support/knowledgecenter/SSAW57_8.5.5/com.ibm.websphere.nd.doc/ae/cwve_implugin.html]. If enabled, this feature allows the plug-in to do dynamic routing based on the "On Demand Configuration" (ODC) information, just like an On Demand Router (ODR) does.


If you are having problems with the Intelligent Management feature in the WebSphere web server Plug-in, please gather this information and send it to IBM support.


ANSWER
1) What is your exact level of IBM WebSphere Application Server (WAS)? On what platform? 

 

2) What web server type are you using? What version? On what platform? 

 

3) What are the symptoms of the "problem"? What is the URL that the user is trying to access? What error message does the user see in the browser? At what time did the problem happen? 

 

4) Enable access to the /server-status page of the web server. 

The Apache mod_status [http://httpd.apache.org/docs/2.2/mod/mod_status.html] servlet must be enabled and access to the /server-status URL must be enabled in your http configuration file. 

 

5) Set the Plug-in LogLevel to "Trace": 

 * 
 * 
 * Servers 
 * Server Types 
 * Web Servers 
 * webserver1 (or whatever name of your web server) 
 * Plug-in Properties 
 * In the Plug-in logging section, set Log Level to Trace
   [/support/docview.wss?uid=swg21681297&aid=1] [/support/docview.wss?uid=swg21681297&aid=1] 
 * Click OK and Save.


6) Set the Intelligent Management trace specification to "DEBUG": 

 * 
 * 
 * Servers 
 * Server Types 
 * Web Servers 
 * webserver1 (or whatever name of your web server) 
 * Intelligent Management 
 * Trace specification 
 * In the first box at the top enter :DEBUG
   [/support/docview.wss?uid=swg21681297&aid=2] [/support/docview.wss?uid=swg21681297&aid=2] 
 * Click OK and Save.


7) You need to Generate the plug-in config, and Propagate (copy) it to the web server. 

If possible, please stop and restart the web server so the trace will show everything from the beginning. 

 

8) Capture a trace of the REST service on the Deployment Manager or Node Agent process. 

Set the trace file size and number of files per the instructions here [http://www-01.ibm.com/support/docview.wss?rs=180&uid=swg21254706]. 

Use the following trace specification:
*=info:com.ibm.ws.odc.*=all:com.ibm.ws.wsgroup.*=all:com.ibm.ws.xd.agent.odc.*=all 

 

9) At the time of the problem, capture additional information: 

Use the following command, on the Deployment Manager or Node Agent, to capture the state of various Intelligent Management processes:
wsadmin.sh -lang jython -f dumpIMPState.py --auto > IMPState.txt

Run the following URL in your web browser on the web server: http://web_server_hostname/server-status 

Save the web page output as an HTML file and submit to support. 

 

10) After capturing the traces of the problem, please send the answers to the questions above and these files to IBM Support: 

+ web server configuration (ie. httpd.conf) 

+ web server logs (ie. error_log and access_log) 

+ plug-in log (ie. http_plugin.log) 

+ all logs from the WAS Deployment Manager or Node Agent where the traces were run (step 8), including: 

 SystemOut.log 

 SystemErr.log 

 Trace.log 

+ also send the IMPState.txt file and the server-status page created in step 9. 

 

11) After the tracing has been completed, change Plug-in LevelLevel back to "Error", and remove the DEBUG trace specification from the Intelligent Management section. Also turn off the WAS traces by setting the trace specification back to *=info only. 

 

NOTE: keep an eye on the size of the http_plugin.log file. It does NOT wrap like WAS log files. So, if the plug-in log is growing very large (over 2 GB) you will need to stop the web server, and delete or rename the file, then restart the web server. OR, you may want to consider using RotateLogs [https://developer.ibm.com/answers/questions/199345/automatically-rotate-log-files-for-ihs-and-plug-in.html] to automatically rotate the plug-in log to a new file based on time or size.

RELATED INFORMATION
 IBM web server Plug-in MustGather [http://www-01.ibm.com/support/docview.wss?rs=177&uid=swg21174894]