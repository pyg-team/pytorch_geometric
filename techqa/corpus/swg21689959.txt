Title: IBM Providing external DL/I and LOCK trace documentation to IMS Technical Support - United States

Text:
 TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 IMS™ Technical Support may request external DL/I and Lock trace documentation when a problem is reported with an IMS database. 

SYMPTOM
 Suspected IMS database defect-related issue


DIAGNOSING THE PROBLEM
The DL/I trace facility is an important diagnostic tool that can help IMS Support determine the cause of an IMS database problem. Database errors frequently occur as a result of the interaction between two or more separate tasks. Interpreting the DL/I and LOCK trace entries can be the best way of determining what each task was doing, and when. 

Diagnostic information obtained from the DL/I and LOCK trace entries might help to:


 * Identify and resolve an application error. 
 * Review APAR descriptions to see if this problem has occurred previously. 
 * Identify a new root cause and develop a resolution.


The DL/I trace is a combined trace consisting of entries from DL/I calls, the DL/I buffer handler, DL/I OPEN/CLOSE, HD space management, lock activity (using PI or IRLM), OSAM, DFP interface, HALDB OLR trace, and ABENDU0427. The DL/I trace and the DL/I Call Image trace are different traces. The DLITRACE statement in IMS.PROCLIB member DFSVSMxx sets the DL/I Call Image trace on, the DL/I trace does not.

The OPTIONS statement of the DFDSVSMxx parm allows you to specify which IMS traces should be activated automatically by the IMS system during initialization. Or, you can choose to activate the traces with the /TRACE SET ON TABLE nnn OPTION LOG command after IMS system startup is completed. 

Additional information regarding obtaining external DL/I and LOCK traces can be found in the attached document:

IMS-External-Traces.pdf [/support/docview.wss?uid=swg21689959&aid=2]IMS-External-Traces.pdf [/support/docview.wss?uid=swg21689959&aid=1]

Logging DL/I and LOCK trace data to an external data set will cause minimal system performance impact due to a small increase in the instruction path and I/O writing the x’67FA’ records to the external trace dataset. As with all traces, the trade-off when using external tracing is increased diagnostic capabilities versus the overhead of running the trace.

Customers rarely observe any noticeable performance impact after the externalized DL/I and LOCK traces are activated. Many IMS customers have been running with external DL/I and LOCK traces active around the clock in their IMS data sharing systems for many years now. 

Please send questions to charles@us.ibm.com