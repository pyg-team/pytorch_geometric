Title: IBM PI29267: BUILD FORGE 7.1.3.6 .BSET COMMAND EXECUTING SUB-COMMAND DOES NOTHONOR SERVER USAGE CONNECT TIMEOUT SETTING - United States

Text:
  FIXES ARE AVAILABLE
Rational Build Forge Fix Pack 3 (8.0.0.3) for 8.0 [http://www-01.ibm.com/support/docview.wss?uid=swg24040282]
Rational Build Forge Fix Pack 4 (8.0.0.4) for 8.0 [http://www-01.ibm.com/support/docview.wss?uid=swg24042449]
Rational Build Forge Fix Pack 5 (8.0.0.5) for 8.0 [http://www-01.ibm.com/support/docview.wss?uid=swg24044012]
Rational Build Forge Fix Pack 6 (8.0.0.6) for 8.0 [http://www-01.ibm.com/support/docview.wss?uid=swg24044077]
Rational Build Forge Fix Pack 7 (8.0.0.7) for 8.0 [http://www-01.ibm.com/support/docview.wss?uid=swg24044596]


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  When configuring a build step to use a subcommand for a .bset
   command, the step will fail with error "Connection to the agent
   timed out" should the subcommand take more than 5 minutes 30
   seconds when the Server Usage Connect Timeout setting is
   configured over 5 minutes and 30 seconds.
   
   This can be seen if an external script (shell, perl, etc.) is
   executed under the .bset subcommand that run for longer than 5
   minutes and 30 seconds.
   
   Issue is similar to the following defect.
   
   PM07761 [http://www-01.ibm.com/support/docview.wss?uid=swg1PM07761] - RATLC01309570
   Regression in 7.1.x of defect RATLC01292700 - The .bset command
   does not honor the step timeout
   
   Steps to reproduce:
   
   - Update Build Forge console Server Usage Connect Timeout
   setting to 600 seconds (10 minutes).
   - Create test project using selector to UNIX/Linux bfagent.
   - Configure build step 1 with the following .bset command.
   
   .bset env "Hello=`sleep 600; echo hello`"
   
   - Update build step 1 timeout to 10+ minutes.
   - Execute project under build run.
   
   Expected result:
   
   Build environment variable "Hello" is set to "hello".
   
   Actual result:
   
   Build step will fail with error "Connection to agent timed out".
   
   ie:
   
   115	Oct 2, 2014 3:51:12 PM		RESULT	0 (0)
   116	Oct 2, 2014 3:51:12 PM		STEP	.bset env "Hello=`sleep 600;
   echo hello`"
   117	Oct 2, 2014 3:56:42 PM		ERROR	Connection to agent timed out.
   
   
    
   
   

LOCAL FIX
 *  Execute any long running operations/scripts outside of a .bset
   command, save the desired output into a temporary file, and
   extract the desired output into the build environment via .bset.
   
   
   ie:
   
   perl MyPerlScript.pl > tempfile.txt
   .bset env "VAR=`echo tempfile.txt`"
   rm tempfile.txt
   
   
    
   
   

PROBLEM SUMMARY
 *  ****************************************************************
   * USERS AFFECTED:                                              *
   * ALL                                                          *
   ****************************************************************
   * PROBLEM DESCRIPTION:                                         *
   * When configuring a build step to use a subcommand for a      *
   * .bset                                                        *
   * command, the step will fail with error "Connection to the    *
   * agent                                                        *
   * timed out" should the subcommand take more than 5 minutes 30 *
   * seconds when the Server Usage Connect Timeout setting is     *
   * configured over 5 minutes and 30 seconds.                    *
   *                                                              *
   * This can be seen if an external script (shell, perl, etc.)   *
   * is                                                           *
   * executed under the .bset subcommand that run for longer than *
   * 5                                                            *
   * minutes and 30 seconds.                                      *
   *                                                              *
   * Issue is similar to the following defect.                    *
   *                                                              *
   * PM07761 [http://www-01.ibm.com/support/docview.wss?uid=swg1PM07761] - RATLC01309570                                      *
   * Regression in 7.1.x of defect RATLC01292700 - The .bset      *
   * command                                                      *
   * does not honor the step timeout                              *
   *                                                              *
   * Steps to reproduce:                                          *
   *                                                              *
   * - Update Build Forge console Server Usage Connect Timeout    *
   * setting to 600 seconds (10 minutes).                         *
   * - Create test project using selector to UNIX/Linux bfagent.  *
   * - Configure build step 1 with the following .bset command.   *
   *                                                              *
   * .bset env "Hello=`sleep 600; echo hello`"                    *
   *                                                              *
   * - Update build step 1 timeout to 10+ minutes.                *
   * - Execute project under build run.                           *
   *                                                              *
   * Expected result:                                             *
   *                                                              *
   * Build environment variable "Hello" is set to "hello".        *
   *                                                              *
   * Actual result:                                               *
   *                                                              *
   * Build step will fail with error "Connection to agent timed   *
   * out".                                                        *
   *                                                              *
   * ie:                                                          *
   *                                                              *
   * 115    Oct 2, 2014 3:51:12 PM        RESULT    0 (0)         *
   * 116    Oct 2, 2014 3:51:12 PM        STEP    .bset env       *
   * "Hello=`sleep 600;                                           *
   * echo hello`"                                                 *
   * 117    Oct 2, 2014 3:56:42 PM        ERROR    Connection to  *
   * agent timed out.                                             *
   ****************************************************************
   * RECOMMENDATION:                                              *
   ****************************************************************
   
   
    
   
   

PROBLEM CONCLUSION
 *  The issue was fixed in Build Forge 8.0.0.3 release
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   PI29267
   
   
 * REPORTED COMPONENT NAME
   BUILD FORGE EE
   
   
 * REPORTED COMPONENT ID
   5724S2702
   
   
 * REPORTED RELEASE
   713
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt / Xsystem
   
   
 * SUBMITTED DATE
   2014-11-07
   
   
 * CLOSED DATE
   2016-02-22
   
   
 * LAST MODIFIED DATE
   2016-02-22
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   BUILD FORGE EE
   
   
 * FIXED COMPONENT ID
   5724S2702
   
   

APPLICABLE COMPONENT LEVELS
 * R713 PSN
   UP