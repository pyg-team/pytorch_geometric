Title: IBM PI64495: DFHSJ1009 LIBERTY JVM RUAWAY CONDITION DETECTED; JVM SERVER WILL NOT DISABLE - United States

Text:
z/os  A FIX IS AVAILABLE
Obtain the fix for this APAR.


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  During a recycle of the CICS region that has a Liberty JVM
   server, the following error message occurs:
   .
     DFHSJ1009 W date time applid tranid trannum JVMSERVER
       jvmserver is being disabled and restarted by CICS
       because a task running in a JVMSERVER has triggered
       a runaway condition, leaving the JVMSERVER in an
       inconsistent state.
   .
   The task never seems to end and the JVM remains in an
   inconsistent state.  Unable to disable the JVM, the CICS region
   must be cancelled.
   .
   In the SJ domain we see the the state of the JVMServer is
   'disablig (phase 0) resolved'.  One of the T8 TCBs associated
   with this JVMServer abended 999 (3E7).  The traceback for this
   TCB may be similar to:
   .
   Traceback:
     DSA      Entry
     1        SIDECARINVOKEREFLECTMETHOD
     2        JVM_InvokeMethod_Impl
     3        JVM_InvokeMethod
     4        JVM_InvokeMethod
     5        Java_sun_reflect_NativeMethodAccessorImpl_invoke0
     6        SIDECARINVOKEREFLECTMETHOD
     7        JVM_InvokeMethod_Impl
     8        JVM_InvokeMethod
     9        JVM_InvokeMethod
     10       Java_sun_reflect_NativeMethodAccessorImpl_invoke0
     11       RUNCALLINMETHOD
     12       gpProtectedRunCallInMethod
     13       signalProtectAndRunGlue
     14       j9sig_protect
     15       gpProtectAndRun
     16       gpCheckCallin
     17       callStaticVoidMethod
     18       call_router_method
     19       call_java_router
     20       invoke_sj_pthread
     21       sj_pthread_body
     22       CELQPCMM
   .
   .
   .
   Additional Symptom(s) Search Keyword(s): KIXREVCTC
   
   
    
   
   

LOCAL FIX
 *  First by setting the Liberty JVM server DISABLED and restarting
   the CICS region,  Then setting the JVM server ENABLED allowed
   it to come up.
   
   
    
   
   

PROBLEM SUMMARY
 *  ****************************************************************
   * USERS AFFECTED:                                              *
   * All CICS users.                                              *
   ****************************************************************
   * PROBLEM DESCRIPTION:                                         *
   * DFHSJ0001 message due to AKEA abend in DFHSJTH, with Liberty *
   * JVM server now unusable.                                     *
   ****************************************************************
   * RECOMMENDATION:                                              *
   * .                                                            *
   ****************************************************************
   A Liberty JVM server performs some work, such as installing a
   bundle, which is not associated with a user task.  This work is
   performed using a thread retrieved from the thread pool and the
   CICS runaway timer is active.  The work is CPU intensive and
   takes longer than the ICVR limit.  As a result, the thread is
   abended with code '0999'x by DFHKETIX.  Control is passed to
   DFHAPLJP, which does not allow the Java stack to unwind.  As a
   consequence Liberty waits indefinitely for the thread to
   complete, which will never occur.  The region must be recycled
   to restore the JVM.
   Additional keywords: msgDFHSJ001 SJ0001 abendAKEA abend0999
   
   
    
   
   

PROBLEM CONCLUSION
 *  DFHSJTH and DFHXMAT have been modified to ensure that when
   threads are put into the Liberty thread pool the CICS runaway
   timer is disabled.  This prevents internal work from causing the
   reported problem.  Runaway is still enabled for user
   applications run under a CICS user task.
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   PI64495
   
   
 * REPORTED COMPONENT NAME
   CICS TS Z/OS V5
   
   
 * REPORTED COMPONENT ID
   5655Y0400
   
   
 * REPORTED RELEASE
   000
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   YesHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt / Xsystem
   
   
 * SUBMITTED DATE
   2016-06-17
   
   
 * CLOSED DATE
   2016-09-01
   
   
 * LAST MODIFIED DATE
   2017-01-24
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
    UI40553
   
   

MODULES/MACROS
 *  DFHSJTH  DFHXMAT  DFHXMTA  DFHSJBD  DFHSJDM  DFHSJDS  DFHSJDUF
   DFHSJIN  DFHSJIS  DFHSJJS  DFHSJL   DFHSJNT  DFHSJRE  DFHSJRL
   DFHSJRM  DFHSJSM  DFHSJST  DFHSJTRI DFHSJXM
   
   
    
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   CICS TS Z/OS V5
   
   
 * FIXED COMPONENT ID
   5655Y0400
   
   

APPLICABLE COMPONENT LEVELS
 * R000 PSY UI40553 [HTTPS://WWW14.SOFTWARE.IBM.COM/WEBAPP/SET2/ORDERMEDIA/SHOPCART?PTFS=UI40553]
   UP16/09/21 P F609
   
   

FIX IS AVAILABLE
 * SELECT THE PTF APPROPRIATE FOR YOUR COMPONENT LEVEL. YOU WILL BE REQUIRED TO SIGN IN. DISTRIBUTION ON PHYSICAL MEDIA IS NOT AVAILABLE IN ALL COUNTRIES.