Title: IBM False alerts on listener status - United States

Text:
listener status false alerts tnsping dummy database active inactive ORA-12170 TNS Connect timeout occurred TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 Situation "KRZ_Listener_Inactive_Crit" fires many times everyday, although the listener is always active 

CAUSE
There are two technical approaches for the agent to monitor the Listener status. 

1) by simulating a dummy database connection through the listener. 

2) by executing an external OS command like "tnsping <listener_address>" and wait for its output. 

The agent does not have a time-out while checking the listener status because the agent will wait for the result of the Oracle OCI API (approach 1) or tnsping (approach 2). 
The time-out or response time is defined by the Oracle tnsping utility and the Oracle listener.

ENVIRONMENT
Oracle Extended Agent

DIAGNOSING THE PROBLEM
The agent just executes the tnsping command and waits for its output to determine the listener status. In case tnsping returns an error message like "ORA-12170: TNS:Connect timeout occurred", the agent will take the target listener as Inactive by current design.

There is no such defined timeout value in agent code for the listener monitoring.

RESOLVING THE PROBLEM
The listener may be reported as Inactive due to time-out or slow down of listener's response time by tnsping command output.
A way to work around this is to increase the situation's consecutive true sample; the default is 1, which means the situation will be fired at each interval when the listener cannot be reached.
The consecutive true sample can be set by Situation Editor -> Advanced -> Situation persistence.
For example: set the consecutive sample as 5, which means the situation will be fired only if there are 5 continuous intervals with Inactive return.





If this is a permanent problem, then you are likely running into this APAR:
IV64051: THE OPEN FILE HANDLES OF TNSPING GROW CAUSING FALSE INACTIVE LISTENER ALERT [http://www-01.ibm.com/support/docview.wss?uid=swg1IV64051]



PRODUCT ALIAS/SYNONYM
 itm itcam oracle extended agent tivoli monitoring composite application manager for applications