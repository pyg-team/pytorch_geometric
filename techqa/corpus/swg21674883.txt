Title: IBM How to create a merged plug-in config for multiple Liberty Profile Servers which are not part of a Liberty collective / cluster - United States

Text:
 TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 Normally there is one web server, with one Plug-in, for each Liberty Profile Server.

clients -----> IHS / Plug-in -----> Liberty Profile

But what if you want to use the same web server and Plug-in as a front-end for multiple Liberty Profile Servers, like this?


clients -----> IHS / Plug-in ---
-----> Liberty Profile1
-----> Liberty Profile2
-----> Liberty Profile3

This technote will show how to create a "merged" plug-in config for this purpose.


RESOLVING THE PROBLEM
First you need to generate a plug-in configuration file for each Liberty Profile Server. You can use the com.ibm.ws.jmx.mbeans.generatePluginConfig mbean for this. Please see the documentation here: 

Configuring a web server plug-in for the Liberty profile
http://www-01.ibm.com/support/knowledgecenter/SSD28V_8.5.5/com.ibm.websphere.wlp.core.doc/ae/twlp_admin_webserver_plugin.html?lang=en [http://www-01.ibm.com/support/knowledgecenter/SSD28V_8.5.5/com.ibm.websphere.wlp.core.doc/ae/twlp_admin_webserver_plugin.html?lang=en]


Change the names of the plug-in config files slightly for each Liberty Profile Server, like: 

plugin-cfg1.xml 

plugin-cfg2.xml 

plugin-cfg3.xml 

 

Locate a full WebSphere Application Server (WAS) system that is at the same level, or higher, as your Liberty Profile Servers. And locate the pluginCfgMerge script in the AppServer/bin/ directory. 

 

Copy the plug-in configuration files from the Liberty Profile Servers to the full WAS appserver, into the bin directory where the pluginCfgMerge script is located. 

 

Run the pluginCfgMerge script to merge the plug-in configurations together into a single file, like this:
pluginCfgMerge.bat plugin-cfg1.xml plugin-cfg2.xml plugin-cfg3.xml merged-plugin-cfg.xml 

 

Copy the merged-plugin-cfg.xml file to the web server, and configure IHS to load this merged plug-in config file. Restart the web server and test it to verify that it works. 

 

 

NOTE: the above steps are only for Liberty Profile Servers that are not in a collective / cluster. 

If you have a Liberty Profile Collective, and you want to generate a merged plug-in config for an entire Liberty Profile Cluster, please use the ClusterManager mbean, with the generateClusterPluginConfig operation instead. See the instructions here:

Generating a merged plug-in configuration for Liberty servers
http://www-01.ibm.com/support/knowledgecenter/SSAW57_8.5.5/com.ibm.websphere.wlp.nd.multiplatform.doc/ae/twlp_conf_merged_plgin.html?cp=SSAW57_8.5.5%2F3-3-11-0-3-3-6-0&lang=en [http://www-01.ibm.com/support/knowledgecenter/SSAW57_8.5.5/com.ibm.websphere.wlp.nd.multiplatform.doc/ae/twlp_conf_merged_plgin.html?cp=SSAW57_8.5.5%2F3-3-11-0-3-3-6-0&lang=en] 



RELATED INFORMATION
#Configuring simple load balancing across multiple appli [http://www-01.ibm.com/support/knowledgecenter/SSAW57_8.5.5/com.ibm.websphere.nd.doc/ae/twsv_configsimplelb.html?lang=en]