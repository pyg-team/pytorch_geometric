Title: IBM Using the Remote API HTTPS support with WAS CE - United States

Text:
HTTPS; WAS CE TECHNOTE (FAQ)

QUESTION
 Can I use the Remote API HTTPS support with WAS CE (WebSphere Application Server Community Edition) instead of a full WAS? 

CAUSE
WebSphere Application Server Community Edition (WAS CE) is a free, downloadable implementation of WAS, but does not contain all the same functions as the full IBM WAS product. WAS CE does contain enough function to support the Remote API HTTPS component of CS/AIX v6.3 and CS Linux v6.2.2, but the configuration steps are different.

ANSWER
 

Below are steps outlining how to obtain, install, and configure WAS CE for use with the Remote API HTTPS component of CS/AIX v6.3 and CS Linux v6.2.2.
The example below is for WAS CE on AIX, but the steps for Linux would be similiar. Details on these commands can be found at the links listed under 'Related information'.


1 - Install an IBM Java 1.4.2 or 5 SDK if your system does not already have one installed. The Java SDKs can be downloaded from:


 * http://www.ibm.com/developerworks/java/jdk/



2 - Download the latest WAS CE from: 
 * http://www.ibm.com/software/webservers/appserv/community



3 - Run the WAS CE installer: 
 * ./wasce_setup-1.1.0.1-unix.bin
 * 

and use the defaults for all prompts. 


4 - Fix WAS CE to set the user.install.root environment variable. 
Edit the /usr/IBM/WebSphere/AppServerCommunityEdition/bin/setenv.sh file and add the user.install.root definition to the JAVA_OPTS line as shown: 
 * JAVA_OPTS="... 
 * -Duser.install.root=${GERONIMO_HOME}
 * "



5 - Create the Remote API HTTPS configuration file in the WAS CE home directory and define the CS/AIX or CS Linux servers which this HTTPS instance will accept requests for. A sample of the snahttpsrv.cfg file is on the Remote API Clients install CD in the ibm-commserver-https directory. 
 * vi /usr/IBM/WebSphere/AppServerCommunityEdition/snahttpsrv.cfg



6 - Automate the WAS CE startup at reboot time by editing the /etc/inittab file and adding a line like this (one long line): 
 * WASCE:2:once:/usr/IBM/WebSphere/AppServerCommunityEdition/bin/startup.sh >/dev/console 2>&1



7 - Automate the WAS CE shutdown when the system is shutdown by editing the /etc/rc.shutdown file and adding lines like these: 
 * echo WAS CE shutdown started
   /usr/IBM/WebSphere/AppServerCommunityEdition/bin/shutdown.sh
   echo WAS CE shutdown complete
   exit 0



8 - Create a new HTTPS SSL keystore with a new self-signed root certificate and extract the public key with these commands: 
 * cd /usr/IBM/WebSphere/AppServerCommunityEdition
 * 
 * 
 * /usr/java5/jre/bin/keytool -genkey -alias httpsWASCE \
 *  -keyalg RSA -validity 365 \ 
   -keystore var/security/keystores/httpsWASCE \
   -dname "cn=httpsWASCE, ou= CommServ , o= IBM , l= RTP , s= NC , c= US "  * 
    *  secret
      
    * 
    *  secret
   
   
 * 
   /usr/java5/jre/bin/keytool -export -alias httpsWASCE \
 *  -keystore var/security/keystores/httpsWASCE \
   -file /tmp/httpsWASCE.der -storepass secret 



9 - Start WAS CE  * 
 * cd /usr/IBM/WebSphere/AppServerCommunityEdition/bin
   ./startup.sh



10 - Wait for the WAS CE to come active then install the HTTPS snahttpsrv.ear. The snahttpsrv.ear is on the Remote API Clients install CD in the ibm-commserver-https directory. 
 * cd /usr/IBM/WebSphere/AppServerCommunityEdition/bin
   ./deploy.sh --user system --password manager deploy snahttpsrv.ear



11 - Open the WAS CE Administration console and configure the SSL port. 
 * 
 * 
 * username: system 
   password: manager  * 
    * Web Server 
      HTTPS 8443  * 
       * Keystore File: ... httpsWASCE 
         Password: secret 
         save 
         
       * 
       * 
       * 
       * 
      
      
    * 
    * 
    * Keystores 
       * httpsWASCE
       * 
       * Editable 
          * 
          * secret
          * 
         
         Available 
          * 
          * secret
          * 
         
         
      
      
   
   


12 - Open the WAS CE Administration console and stop WAS CE:  * 
 * 
 * 
 * username: system
   password: manager  * 
    *  Shutdown 
      
   
   


13 - Restart WAS CE, so the changes take effect:  * 
 * cd /usr/IBM/WebSphere/AppServerCommunityEdition/bin
   ./startup.sh
 * 


14 - Configure the Remote API Client. 
-- FTP the /tmp/httpsWASCE.der file (from step 8) in binary to the Remote API Client system. 
-- Use the snakeyman utility on the client to add that certificate as a Signer. 
-- Edit the sna_clnt.net configuration file on the client to use the HTTPS syntax, for example: 
 * wasceservername.domain:
 * 8443
 * :commservername.domain


-- Restart the Remote API Client: 
 * sna stop
 * 
 * sna start



RELATED INFORMATION
#Developerworks article on WAS CE [http://www.ibm.com/developerworks/websphere/techjournal/0512_gawor/0512_gawor.html]
WAS CE Documentation [http://publib.boulder.ibm.com/wasce/Front_en.html]





Cross reference information Segment Product Component Platform Version Edition Networking Communications Server for Linux All 6.2.2, 6.2.3, 6.2.3.1, 6.4 Networking Communications Server for Linux on zSeries All 6.2.2, 6.2.3, 6.2.3.1, 6.4