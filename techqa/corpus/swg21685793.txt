Title: IBM FileNet P8 Content Engine returns incorrect search results when using Oracle - United States

Text:
Oracle invalid incorrect duplicate wrong search result TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 IBM FileNet P8 Content Engine (CE) returns incorrect search results when the corresponding SQL statement is using ORDER BY, which references a function based index (e.g, ORDER BY LOWER(u32_documenttitle) ASC). 

SYMPTOM
Search for documents in a specific document class and request the results to be ordered by DocumentTitle. The results are obviously incomplete and contain duplicate items. 
A similar search without ordering the results by DocumentTitle would return the expected number, without duplicates.


CAUSE
The root cause of the issue is an Oracle bug which has been identified in Oracle 11.2.0.2. Other versions may be impacted also. 
The issue is referenced under Oracle #12984935 and #10259620. These were caused by the fix created for #8352378.

DIAGNOSING THE PROBLEM
A way to diagnose this issue would be to:
1 - Use Content Engine trace options; Search and Database. From this, you can extract the exact SQL statement sent to the database. You can also interpret the search result and see that it's not ordered as expected.
2 - Execute the SQL statement (from step 1) to check if this returned an incorrectly ordered result. Note: environmental factors, or the tool used to execute the statement, may cause different Oracle parameters to be taken into account, thus returning a correct list of search results.

RESOLVING THE PROBLEM
Please contact Oracle for recommendations on the best solution.




In a specific occurrence of this issue, the following workaround solved the Oracle behaviour: 

Set system wide the following parameters for the CE database: 

alter system set "_fix_control" ='8352378:OFF';
alter system set "_replace_virtual_columns"=true;