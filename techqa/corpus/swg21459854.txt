Title: IBM Cannot save datasource configuration in Web Upgrader Tool - United States

Text:
ClassNotFound; web upgrader TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 Cannot save datasource configuration in Web Upgrader Tool due to wrong jar(s) being loaded. 

SYMPTOM
The symptoms are different depending on which jar(s) are incorrectly loaded. 

Example: 

If ISRAConsole is collocated with Content Engine (CE) on the same JVM instance, it would have a conflicting listener.jar in the JVM classpath. Attempting to save datasource configuration in Web Upgrader would result in the following error:
java.lang.NoClassDefFoundError: com.filenet.apiimpl.smm.PCH (initialization failure) 
at java.lang.J9VMInternals.initialize(J9VMInternals.java:140) 
at com.filenet.engine.dbpersist.DBExecutionElement.execute(DBExecutionElement.java:199) 
at com.filenet.engine.dbpersist.DBExecutionContext.getNextResult(DBExecutionContext.java:106) 
...
Caused by: java.lang.NoClassDefFoundError: org.apache.log4j.Logger
at com.filenet.pch.Listener.(Listener.java:386)
at com.filenet.pch.Listener.(Listener.java:358)
...
Caused by: java.lang.ClassNotFoundException: org.apache.log4j.Logger
at java.net.URLClassLoader.findClass(URLClassLoader.java:421)
at java.lang.ClassLoader.loadClass(ClassLoader.java:652)
...


CAUSE
When Web Upgrader starts, it will load classes from the jars included in the JVM classpath. Web Upgrader may encounter problems if incorrect classes were loaded.


DIAGNOSING THE PROBLEM
Open the WebSphere console for the WebSphere instance that hosts the Web Upgrader. Go to Server -> Web Application Servers -> <server name> -> Java and Process Management -> Process Definition -> Java Virtual Machine, and check the Classpath property. 

Example: 

If ISRAConsole is installed, the JVM classpath would have the following jar:
/opt/IBM/FileNet/ISRA340/SystemManager/listener.jar


RESOLVING THE PROBLEM
Remove any conflicting jars from JVM classpath 

 

Note that ISRA (or any J2EE) application deployed in the same JVM as Content Engine is not supported. Per the P8 HW/SW Guide, Content Engine should be deployed in its own application server instance (that is, deployed into a single JVM). For example, if you are running WebSphere, this means you deploy into the application server running within a profile. No other Java EE applications (including Application Engine) may be deployed within this instance. Other Java EE applications may be deployed in their own, separate application server instance if the server is sized appropriately.