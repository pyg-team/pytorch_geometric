Title: IBM Rational Application Developer crashes with JVM error messages when previewing pages with applet tags in Page Designer - United States

Text:
jvm; jvm.dll; dll; crash TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 IBM Rational Application Developer for WebSphere Software (RAD) crashes with JVM (Java Virtual Machine) error messages when previewing web pages with applet tags in the Preview tab of Page Designer. 

SYMPTOM
Rational Application Developer crashes when the Oracle / Sun JVM plug-in calls into functions which do not exist in the IBM jvm.dll. There is no way to catch this native error or to recover from it. 

Steps to reproduce:


 1. Rational Application Developer shows the error message:
    
    "The procedure entry point _JVM_GetMethodIxLocalsCount@12 could not be located in the dynamic link library jvm.dll"
    
    
 2. Click OK
    
    
 3. Rational Application Developer shows the error message:
    
    "The procedure entry point _JVM_GetStackAccessControlContext@8 could not be located in the dynamic link library jvm.dll"
    
    
 4. Click OK
    
    
 5. JVM crashes without leaving javacore, full dump or other files.


CAUSE
The JVM operation is operating as designed. 


Rational Application Developer crashes when the Oracle / Sun JVM plug-in calls into functions which do not exist in the IBM jvm.dll.

Details: 

 * The process running the JVM of Rational Application Developer is launching the browser, which in turn loads the Java applet plug-in configured within Internet Explorer, (for example Oracle's Java applet plugin).
   
   
 * This plug-in tries to use the Oracle's jvm.dll, but it finds the IBM JVM one already loaded. 
   
   
 * The function calls indicated in the error message provided are Oracle's functions, which are not present in IBM's jvm.dll. 
   
   Note: It is not possible (at least under Microsoft Windows) to load two dll's of the same name to the same process.

ENVIRONMENT
Rational Application Developer 7.5.3 

Internet Explorer 8.0 

Oracle JRE 1.6.0 Browser Plug-in, e.g. 1.6.0_23-b05


RESOLVING THE PROBLEM
 

WORKAROUND: 

There are three items to consider to circumvent this issue. 

 

I. Use the same Java Runtime Edition for running Rational Application Developer and your applet in the Browser. 

 * You can decide to either use Oracle JVM or IBM JVM but you need to choose the same one for both the Browser and to run Rational Application Developer. 
 * IBM ships within Passport Advantage the Rational Application Developer package an IBM JDK. When you install this JDK, you will also install the IBM JVM Plug-in which would then call the correct API within the IBM JVM. Review the license agreement concerning the IBM JDK.



Instructions:  1. Decide which JVM you will use
    
    
 2. Modify JVM in use at two locations:
     * During the installation of Rational Application Developer use either the default IBM JVM or install on an existing Eclipse which runs on an already installed Oracle JVM.
       
       
     * Start Internet Explorer > open menu Tools > Internet Options > Advanced tab. 
       If you have installed the Sun / Oracle JVM, you will see either a section Java or Java (Sun). 
       
       Note: On Windows, Internet Explorer is used as your browser within Eclipse and Rational Application Developer. 
       
       Important: If you see no Java (IBM) but intend to launch IBM Java plug-in, you will need to install the IBM Java Plug-in into your browser from the IBM JDK package before continuing.
       
       Ensure you select the plug-in matching the JVM of Rational Application Developer, for example by default Java (IBM), make sure the checkbox next to Use JRE 1.6.0 for <applet> (requires restart). Restart Internet Explorer and Rational Application Developer.
       
    
    

 Back to top 




II. Always use the correct value for attribute classid for object tag and remove the type attribute 


Based on outline listed on how and when to use <applet> <object> and <embed> tags 

 * For Internet Explorer only, use the object tag 
 * For the Mozilla family of browsers only, use the embed tag


The type attribute ( type="application/x-java-applet") is used with embed tag and only with the Mozilla family of browsers. 

If MIME type need to specified you can pass it as parameter within the <object> tag <param name="type" value="application/x-java-applet">. 

Thus remove the attribute on the object tag type="application/x-java-applet since type attribute is only allowed for embed tag. 

You should instruct Internet Explorer to use the latest installed version of Java Plug-in through classid attribute, such as "clsid:8AD9C840-044E-11D1-B3E9-00805F499D93" to force usage of Java 1.6 instead of "clsid:CAFEEFAC-0016-0000-0000-ABCDEFFEDCBA". 

<object classid="clsid:8AD9C840-044E-11D1-B3E9-00805F499D93" width="200" height="200"> <param name="code" value="TestApplet"> 

<param name="archive" value="TestApplet.jar"> 

</object>


Important: The crash will be avoided. The applet will not run but it will be vetoed by the SWT Browser component. 
 Back to top 






III. Do not use the Preview tab, instead open the file using an external browser 
You can simplify opening the file in an external browser instead of opening the Preview tab by selecting the file and choosing from the context menu Open > Web Browser. 

To achieve this you need to configure Rational Application Developer to use in this case an external browser. 

Instructions:  1. Open Window > Preferences 
 2. Open the preference page General > Web browser 
 3. Select Use external browser

RELATED INFORMATION
#Java SE documentation: Using applet object and embed T [http://download.oracle.com/javase/6/docs/technotes/guides/plugin/develop ]
The SWT FAQ: Can I view Java applets in the SWT Browser [er_guide/using_tags.html ]
Rational Installation Wiki: Install into an existing Ec [http://www.eclipse.org/swt/faq.php#browserapplets]
Rational Installation Wiki: Install into an existing Ec [http://www.ibm.com/developerworks/wikis/display/rationalinstall/Install+into+an+existing+Eclipse+instance]






Cross Reference information Segment Product Component Platform Version Edition Software Development Rational Software Architect for WebSphere Software Windows 7.5 Edition Independent