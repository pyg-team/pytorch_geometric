Title: IBM The Standard Faces Component - Stylesheet does not work in a JSF 2.0 portlet facelet - United States

Text:
JSF2.0 portlet; Portlet Facelet; Stylesheet in portlet facelet; PM79462 TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 The Standard Faces Component - Stylesheet (<h:outputStylesheet> tag) item does not work in a JavaServer Faces (JSF) 2.0 portlet on IBM WebSphere Portal Server version 8.0. 

SYMPTOM
When a portlet facelet with a component - Stylesheet, <h:outputStylesheet> tag, is published on WebSphere Portal Server version 8.0, the stylesheet tag that adds a link to a stylesheet is not applied at run time.


CAUSE
The <h:outputStylesheet> tag is designed to work with the <h:head> tag, but because the portlet facelet is a fragment and does not contain a head tag, the stylesheet is not applied on a portlet facelet at run time. 

This issue was identified as a product defect and logged under APAR PM79462 [http://www.ibm.com/support/docview.wss?uid=swg1PM79462]


DIAGNOSING THE PROBLEM
The JSF component - Stylesheet (<h:outputStylesheet> tag) is not applied on a portlet facelet at run time.



RESOLVING THE PROBLEM
This defect has been resolved in the following releases: 

 * 8.5.0.2: WebSphere Application Server V8.5 Fix Pack 2 [http://www-01.ibm.com/support/docview.wss?uid=swg24034672] 
 * 8.0.0.6: WebSphere Application Server V8.0 Fix Pack 6 [http://www-01.ibm.com/support/docview.wss?uid=swg24034673] 
 * 8.0.0.7: WebSphere Application Server V8.0 Fix Pack 7 [http://www-01.ibm.com/support/docview.wss?uid=swg24035457] 
 * 8.0.0.8: WebSphere Application Server V8.0 Fix Pack 8 [http://www-01.ibm.com/support/docview.wss?uid=swg24036729] 



WORKAROUND: 

Apply the Stylesheet (<h:outputStylesheet> tag) on a portlet facelet at run time by using the following options: 
 * If you are using WebSphere Portal V8.0.x installed on WebSphere Application Server v8.0.0.5, or later, you can use JSF Stylesheet (<h:outputStylesheet> tag) feature in JSR 286 portlet by adding container run time option:


i) Drag Stylesheet (<h:outputStylesheet>) item from the Standard Faces Components drawer of Palette view onto portlet facelet. 


ii) Add the following container run time option in the portlet.xml file: 

<container-runtime-option> 
<name>javax.portlet.renderHeaders</name> 
<value>true</value> 
</container-runtime-option> 


iii) Save the file. OR 

 * If you are using WebSphere Portal V8.0.x installed on WebSphere Application Server v8.0.0.6, or later, you can use the JSF Stylesheet (<h:outputStylesheet> tag) feature in JSR 168/286 portlets as follows:


i) Drag Stylesheet (<h:outputStylesheet>) item from the Standard Faces Components drawer of Palette view onto portlet facelet. 


ii) Add <h:head></h:head> tag in a portlet facelet. 


iii) Add following entries in faces-config.xml: 
<render-kit> 
<renderer> 
<component-family>javax.faces.Output</component-family> 
<renderer-type>javax.faces.Head</renderer-type> 
<renderer-class>com.ibm.faces20.portlet.tag.render.JSF20PortletTagImpl_Head</renderer-class> 
</renderer> 
</render-kit> 
<render-kit> 
<renderer> 
<component-family>javax.faces.Output</component-family> 
<renderer-type>javax.faces.Body</renderer-type> 
<renderer-class>com.ibm.faces20.portlet.tag.render.JSF20PortletTagImpl_Body</renderer-class> 
</renderer> 
</render-kit> 


iv) Save the file.