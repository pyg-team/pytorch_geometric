Title: IBM AppScan Standard cannot access imported licenses - United States

Text:
 TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 IBM Security AppScan Standard cannot access imported licenses, even if the licenses were imported correctly and the License Key Administrator shows the licenses. 

SYMPTOM
License Key Administrator shows valid AppScanStandard licenses, however AppScan Standard shows "Demo license in use". 

The AppScan's Help > License dialog shows the following status: 


 * License: Rational Common Licensing
 * 
 * Type: Demo License
 * 
 * No license available. Demo license in use.
 * 
 * 
 * [/support/docview.wss?uid=swg21961416&amp;aid=1]

 

 

The SdkDebug.log file (you get it after setting Help > Support > Extended Support Mode and restarting AppScan) shows the following: 


 * ...
 * 
 * RCLWrapper called tl_CheckinName(AppScanStandard, :U#%#H:fe80::nnnnn3:db2d%13). Return value
 * is: 0
 * 
 * RCLWrapper called tl_GetLKADConfiguration(). Return value is:
 * 
 * RCLWrapper called tl_SetLicensePath(LKAD_path). Return value is: 0
 * 
 * RCLWrapper called tl_CheckoutName_ibmRatl(AppScanStandard, 7.8, :U#%#H:fe80::ba2c:c9e3:b0d8:db2d%13, TL_UH_DUPLICATE, 1, 0, &expiryDays). Return value is: 512
 * 
 * RCLWrapper called tl_CheckoutName_ibmRatl(AppScanStandard, 7.8, :U#%#H:nnnn:db2d%13, TL_UH_DUPLICATE, 1, 0, &expiryDays). Return value is: 512
 * 
 * RCLWrapper called tl_GetErrorString(). Return value is: Cannot connect to license server system.
 * 
 * ...


Note the following line from the above log: 
 * RCLWrapper called tl_GetLKADConfiguration(). Return value is:


In an working (healthy) system, this line should be something as follows: 
 * RCLWrapper called tl_GetLKADConfiguration(). Return value is: C:\Program Files (x86)\IBM\RationalRLKS\common\rational_temp.dat;C:\Program Files (x86)\IBM\RationalRLKS\common\rational_perm.dat;@localhost


 

If the above symptoms does not match to your case, check the symptoms described in this technote: http://www.ibm.com/support/docview.wss?uid=swg21664270 [http://www.ibm.com/support/docview.wss?uid=swg21664270]


CAUSE
The following registry key was not created on your machine:


 * HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Rational Software\Licensing\8.0\Server List



Because of the combination of the following:  * AppScan licensing is a 32 bit application 
 * Windows registry virtualization, as described in Registry Virtualization [https://msdn.microsoft.com/en-us/library/windows/desktop/aa965884%28v=vs.85%29.aspx]. 
 * User Access Control (UAC) settings on your machine, as described in What are User Account Control settings? [http://windows.microsoft.com/en-us/windows/what-are-user-account-control-settings#1TC=windows-7] 


the License Key Administrator did not have proper permissions to create the registry key. Instead it created the registry at the user level at:  * HKEY_USERS\S-<user sid>\Software\Classes\VirtualStore\MACHINE\SOFTWARE\Wow6432Node\Rational Software\Licensing\8.0\Server List

or  * HKEY_CURRENT_USER\Software\Classes\VirtualStore\MACHINE\SOFTWARE\Wow6432Node\Rational Software\Licensing\8.0\Server List
 * 


However, AppScan is not looking in the HKEY_USERS nor HKEY_CURRENT_USER registry. It is 
looking only in the HKEY_LOCAL_MACHINE registry, and and AppScan cannot find the licensing pointers there, and this is why AppScan is not able to find any Nodelocked license nor the license server with Floating licenses. 

This issue is identified in APAR PI50043. 


RESOLVING THE PROBLEM
 

 1. Open License Key Administrator with Run as Administrator 
    (you may get a dialog box asking for Administrator user and password ).
    
    
    
 2. Select Settings > Client/Server Configuration 
    (this action should create the registry key: HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Rational Software\Licensing\8.0\Server List).
    
    
    
 3. If you are using FLOATING license, run also License Keys > License Key Wizard.. > Point to a Rational License Server to get my licenses and give the Server Name. 
    


Now AppScan Standard should be able to access the license key.

RELATED INFORMATION
 After a successful license import AppScan Standard show [http://www.ibm.com/support/docview.wss?uid=swg21664270]