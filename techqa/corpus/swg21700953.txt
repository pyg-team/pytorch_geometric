Title: IBM WCM services fail to initialize during the Portal server startup when tracing is enabled with 8001.CF15 and 85.CF05 - United States

Text:
 FLASH (ALERT)

ABSTRACT
 
On 8001 CF15 and 85 CF05, a NullPointerException from the WCMAPIWorkspaceAspect class is thrown during the Portal server startup which causes the WCM services to fail. This only occurs when fine-level configuration tracing that includes the package com.ibm.workplace.wcm.api.* is enabled within the WebSphere Application Server administrative console.

In both SystemOut.log and Trace.log, the following errors are seen during the server startup:

Caused by: java.lang.NullPointerException
at com.ibm.workplace.wcm.api.WCMAPIWorkspaceAspect.ajc$around$com_ibm_workplace_wcm_api_WCMAPIWorkspaceAspect$1$77189ab8(WCMAPIWorkspaceAspect.aj:159)
at com.ibm.workplace.wcm.api.query.WCM_QueryService.init(WCM_QueryService.java:1)
at com.ibm.workplace.wcm.api.WebContentServiceImpl.<clinit>(WebContentServiceImpl.java:36)
at java.lang.J9VMInternals.initializeImpl(Native Method)
at java.lang.J9VMInternals.initialize(J9VMInternals.java:228)

When accessing the WCM authoring portlet or using the WCM servlet, the following error is seen within the browser:
Error 404: javax.servlet.UnavailableException: Initialization of one or more services failed

Note: The problem does not occur if runtime tracing is enabled (ie: the trace settings are set via the Portal Administration --> Enable Tracing page).



CONTENT

Resolution:
The issue is fixed by PI37431. This APAR will be included in 8001 CF16 and 85 CF06.

To workaround the issue, append the following to the existing trace string before restarting the Portal server: com.ibm.workplace.wcm.api.WCMAPIWorkspaceAspect=off 

Example:
*=info:com.ibm.workplace.wcm.*=all:com.ibm.workplace.wcm.api.WCMAPIWorkspaceAspect=off