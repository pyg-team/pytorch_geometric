Title: IBM How to install a Fixpack on your MDM Collaborative Edition Cluster - United States

Text:
Cluster; Fixpack; install; upgrade TECHNOTE (FAQ)

QUESTION
 How can I install a new Fixpack on an InfoSphere Master Data Management Collaborative Edition horizontal Cluster 

ANSWER
Before the Fixpack upgrade of your MDM CE Cluster, please ensure that the following prerequisites are satisfied: 

prereq 1.) you have created a MDM CE Database backup
prereq 2.) your$TOP directory and the $CCD_CONFIG_DIR directory has been backed up for all Cluster Nodes. 
prereq 3.) please also ensure that you have noted all your application server and cluster names
prereq 4.) please take a record of your cluster configuration settings 

1. Stop the MDM CE application on all Nodes. 

$TOP/bin/go/stop_local.sh to stop MDMCE services
$TOP/bin/go/rmi_status.sh to check
ps -ef |grep java |grep <mdm_user> to double check that all MDM CE services are stopped. 


2. Un-install your MDM CE application 

On your WebSphere ND admin console, select "Applications" -> "Application Types" -> "WebSphere enterprise applications" from the left menu pane. 

In the Enterprise Applications Screen, first select checkbox to the left of your application name and then click the "Uninstall" -button. 

 

3. Delete all servers 

From the WebSphere ND admin console, select "Servers" -> "Server Types" -> "WebSphere application servers" from the left menu pane. 

In the "Application servers" screen, select the checkbox beside your application server names and then click on the "Delete"-button. 

 

4. Delete the cluster 

From the WebSphere ND admin console. select "Servers" -> "Clusters" -> "WebSphere application server clusters" from the left menu pane. 

In the WebSphere application server clusters screen, select the checkbox besides your cluster name and then click on the "Delete"-button. 

 

5. Follow usual Fixpack Installation steps in Release. 

Now you can follow the Fixpack Release Notes to update to the new Fixpack level on your 1st Node. 

Please be aware, that because you have deleted all servers, you need to execute the $TOP/bin/websphere/create_appsvr.sh script before you can execute $TOP/bin/websphere/install_war.sh script.. 

Only the execution of the install_war.sh script will be mentioned in the Release Notes. 

Now you can verify the installation on your first Node to ensure that you can start all the MDM CE services and that you can login to the MDM CE User Interface using your Microsoft Internet Explorer browser. 

 

6. Execute setup and configuration scripts on each Node. 

On your 2nd Node and any other nodes you might have in your horizonal MDM CE Cluster, execute $TOP/setup.sh and $TOP/bin/configureEnv.sh scripts. 

 

7. Now you can re-create your cluster. 

 * 
 * 
 * 7.2 In the WebSphere application server clusters screen, click on the button labeled "New..." 
 * 7.3 on the next screen, enter the Cluster name that you have written down on prereq 4.) step. Click "Next" 
 * 7.4 on the next screen labeled "Create first cluster member", select the node from the pulldown menu and use the option "Create the member by converting an existing application server." Click "Next". 
 * 7.5 on the next screen labeled "Create additional cluster members", add your remaining members that you have noted in prereq 3.) step., by clicking on the "Add Member" button.
   If all your cluster members are using the same port, please uncheck "Generate unique HTTP ports" 
 * 


8. Create symbolic links for 2nd and if applicable on any further node. Go to $WAS_HOME/profiles/<your profile>/installedApps/<your cell>/<your ear name>/ccd.war directory. 

create the symbolic with following commands: 

 * ln -s $TOP/public_html/user user
   ln -s $TOP/public_html/suppliers suppliers
   ln -s $TOP/etc/default/csrf csrf


Now you can start the MDM CE services on 2nd and further nodes using $TOP/bin/go/start_local.sh script. Verify the success of your MDM CE horizontal cluster Fixpack upgrade by logging in to your browser on all nodes. 

9. IBM Http Server (IHS) specific steps 

If you use the system generated script configure<your web server name>.sh, execute the following steps: 

 * 
 * 
 * 9.2 go to WebSphere ND admin console, go to "Servers" -> "Server Types" -> "Web servers" from left menu pane. In the "Web servers" screen, select the checkbox beside your webserver name, then click on "Stop" and then again on "Start", 
 * 9.3. on same screen, click on the button labeled "Generate Plug-in". 
   You will see a "Messages" box that should confirm that your "Plug-in configuration file generation" has been completed for your Web server. 
 * 9.4 still on same screen, now select the button "Propagate Plug-in". 
 * 9.5 Now you can stop and start your Web server again. 
   


Please note: when you manually generated the plugin-cfg.xml file between IHS and WebSphere side, that you must match the plugin-cfg.xml file between IHS and WebSphere.