Title: IBM Installation Manager crashes with segmentation fault while performing an install operation of Rational Team Products - United States

Text:
CQ; CC; IM; ReqPro; Java; segment error; java core dump; Installation TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 Attempts to install an IBM Rational Team product, such as IBM Rational ClearCase or IBM Rational ClearQuest on a certain Microsoft Windows operating system results in the IBM Installation Manager crashing with an exception error. 

SYMPTOM
There will be a Java core dump at <Program Files Folder>\IBM\Installation Manager\eclipse with information similar to the following: 


0SECTION THREADS subcomponent dump routine
NULL =================================
NULL 1XMCURTHDINFO Current thread
NULL ----------------------
3XMTHREADINFO "Thread-13" J9VMThread:0x04A1C100, j9thread_t:0x03531628, java/lang/Thread:0x38B82A78, state:R, prio=5
3XMTHREADINFO1 (native thread ID:0xAA4, native priority:0x5, native policy:UNKNOWN)
3XMTHREADINFO3 Java callstack:
4XESTACKTRACE at com/ibm/common/install/win32/Win32Helper.QueryRegistryKeysN(Native Method)
4XESTACKTRACE at
com/ibm/common/install/win32/Win32Helper.QueryRegistryKeys(Win32Helper.java:299)
4XESTACKTRACE at com/ibm/common/install/win32/Win32Helper.createRegistryPath(Win32Helper.java:897)
4XESTACKTRACE at com/ibm/rational/team/install/UpdateProductMap.updateProductInstalled(UpdateProductMap.java:85) 

4XESTACKTRACE at
com/ibm/rational/team/install/UpdateProductMap.run(UpdateProductMap.java:62)
4XESTACKTRACE at sun/reflect/NativeMethodAccessorImpl.invoke0(Native Method)
4XESTACKTRACE at sun/reflect/NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:60)
4XESTACKTRACE at sun/reflect/DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:37(Compiled Code))
4XESTACKTRACE at java/lang/reflect/Method.invoke(Method.java:611(Compiled Code))
4XESTACKTRACE at com/ibm/cic/agent/core/commonNativeInstallAdapter/Invoke$InvokeRunnable.run(Invoke.java:189)
4XESTACKTRACE at java/lang/Thread.run(Thread.java:736)
3XMTHREADINFO3 Native callstack:
4XENATIVESTACK _Java_com_ibm_common_install_win32_Win32Helper_DeleteRegValueN@20+0xf0 (0x08843860 [Win32Helper.dll8854582436499558+0x3860])
4XENATIVESTACK _Java_com_ibm_common_install_win32_Win32Helper_QueryRegistryKeysN@16+0x161 (0x08842161 [Win32Helper.dll8854582436499558+0x2161])
4XENATIVESTACK JNI_CreateJavaVM+0xeac (0x7FF0B34C [j9vm24+0x1b34c])
4XENATIVESTACK J9VMDllMain+0x2b9750 (0x7FB017A0 [j9jit24+0x2e17a0])




CAUSE
This issue was identified as a product defect and logged under APAR PM33796 [http://www-01.ibm.com/support/docview.wss?uid=swg1PM33796].


There is a native stack overflow of JVM of Installation Manager while performing some of the install operations. The default JVM stack values of Installation Manager seems to be insufficient on certain systems causing Installation Manager to crash.



RESOLVING THE PROBLEM
The defect is fixed in Installation Manager 1.6.0. Download is available here [http://ibm.com/support/docview.wss?uid=swg24032641]. It is recommended that you upgrade to the latest version to avoid encountering this problem. 

 

WORKAROUND: 

You can work around the issue by temporarily increasing stack size of the Installation Manager instance as described below: 

 1. Locate one of the following .ini files where Installation Manager instance is installed in your machine based on the program you want to use to install Rational Team (such as IBMIM.exe, IBMIMc.exe, imcl.exe or installc.exe):
    
    <Program Files Folder>\IBM\Installation Manager\eclipse\IBMIM.ini
    <Program Files Folder>\IBM\Installation Manager\eclipse\tools\imcl.ini
    
    Note: Find instlallc.ini if using installc.exe of the Installation Manager package to install the products.
    
    where as <Program Files Folder> could be one of the following:
    
    For a 32 bit platform: C:\Program Files
    For a 64 bit platform: C:\Program Files (x86)
    
 2. Update the corresponding .ini file by adding the following two arguments in the -vmargs section:
    
    -Xss512k
    -Xmso64k
    
    Example:
    
    If you want to use either IBMIM.exe or IBMIMc.exe you will need to update IBMIM.ini file as follows:
    
    A default IBMIM.ini may look like this:
    
    -toolId
    ibmim
    -accessRights
    admin
    -vm
    C:\Program Files\IBM\Installation Manager\eclipse\jre_6.0.0.sr9_20110208_03\jre\bin\j9vm\jvm.dll
    -vmargs
    -Xquickstart
    -Xgcpolicy:gencon
    
    
    After adding the JVM values it will look like this:
    
    -toolId
    ibmim
    -accessRights
    admin
    -vm
    C:\Program Files\IBM\Installation Manager\eclipse\jre_6.0.0.sr9_20110208_03\jre\bin\j9vm\jvm.dll
    -vmargs
    -Xquickstart
    -Xgcpolicy:gencon
    -Xss512k
    -Xmso64k
    
    Note: These values are for 32-bit systems, if you are using a 64- bit system you will need to use different values such as: 
    
    -Xss1024k
    -Xmso512k
    
    
 3. After making this change, save and close the .ini file and install Rational Team products using Installation Manager.


RELATED INFORMATION
#IBM Installation Manager 1.6.0 [http://www.ibm.com/support/docview.wss?uid=swg24032641]






Cross reference information Segment Product Component Platform Version Edition Software Development Rational ClearQuest Installation Windows 7.1, 7.1.1, 7.1.2, 8.0