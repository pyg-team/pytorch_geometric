Title: IBM IZ88919: INCORRECT SMT THREADS ON POWER7 HOST WITH ITM AIX - United States

Text:
  A FIX IS AVAILABLE
IBM Tivoli Monitoring: VIOS Premium Agent 6.2.2.1-TIV-ITM_VIOS_PREM-IF0002 [http://www-01.ibm.com/support/docview.wss?uid=swg24030976]


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  On Power7 host, Premium agent is reporting SMT threads 2 instead
   of 4.
   
   
   
   The amepat and lparstat commands show SMT Threads as 4.
   
   [testvioc][/opt/IBM/ITM/bin]>amepat | egrep -i threads
   
   SMT Threads                    : 4
   
   
   [testvioc][/opt/IBM/ITM/bin]>lparstat 2
   
   System configuration: type=Shared mode=Uncapped smt=4 lcpu=4
   mem=4096MB
   psize=8 ent=0.10
   
   But in the AIX Premium/AIX/System workspace..Under LPAR
   Attributes SMT
   Threads shows as 2.
   
   RECREATE INSTRUCTIONS:
   
   On a P7 host, run aix command smtctl to enable 4 smt threads.
   # smtctl -t 4
   Configured SMT threads can be viewed using smtctl
   # smtctl
   
   This system is SMT capable.
   This system supports up to 4 SMT threads per processor.
   SMT is currently enabled.
   SMT boot mode is not set.
   SMT threads are bound to the same physical processor.
   
   
   proc0 has 4 SMT threads.
   Bind processor 0 is bound with proc0
   Bind processor 1 is bound with proc0
   Bind processor 2 is bound with proc0
   Bind processor 3 is bound with proc0
   
   
   From the TEPS, using AIX Premium Agent, under "System" | "LPAR
   Attributes" panel, see the "SMT Threads" value, it will be
   showing 2 instead of 4.
   
   
    
   
   

LOCAL FIX
 *  To get the correct value of SMT threads, AIX command smtctl
   can be used.
   
   
    
   
   

PROBLEM SUMMARY
 *  ****************************************************************
   *****
   * USERS AFFECTED: All users.
   ****************************************************************
   *****
   * PROBLEM DESCRIPTION: On IBM POWER7 systems, the agent is
   reporting
   * a value for SMT threads that does not match the output of
   * the "amepat" command.
   ****************************************************************
   *****
   * RECOMMENDATION: Apply 6.2.2.1-TIV-ITM_AIX_PREM-IF0001.
   ****************************************************************
   *****
   Interim Fix 6.2.2.1-TIV-ITM_AIX_PREM-IF0001 resolves the problem
   by
   reporting the correct value for SMT threads.
   
   
    
   
   

PROBLEM CONCLUSION
 *  The fix for this APAR is contained in the following maintenance
   package:
   
      | interim fix | 6.2.2.1-TIV-ITM_AIX_PREM-IF0001
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   IZ88919
   
   
 * REPORTED COMPONENT NAME
   ITM SE SYSP AIX
   
   
 * REPORTED COMPONENT ID
   5724C04AP
   
   
 * REPORTED RELEASE
   622
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2010-11-11
   
   
 * CLOSED DATE
   2010-12-30
   
   
 * LAST MODIFIED DATE
   2010-12-30
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   ITM SE SYSP AIX
   
   
 * FIXED COMPONENT ID
   5724C04AP
   
   

APPLICABLE COMPONENT LEVELS
 * R622 PSY
   UP