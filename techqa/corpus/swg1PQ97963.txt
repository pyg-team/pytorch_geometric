Title: IBM PQ97963: DOC NEED TO CLARIFY THE USE OF NODYNAM VS DYNAM FOR COBOL PROGRAMS UNDER CICS THAT DO NOT NEED CICS TRANSLATION. - United States

Text:
z/os SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS DOCUMENTATION ERROR.
    
   
   

ERROR DESCRIPTION
 *  The Enterprise COBOL Programming Guide (SC27-1212) needs
   to clarify whether the COBOL compiler NODYNAM option is
   really needed for COBOL programs or subprograms running
   under CICS that do not contain any EXEC CICS statements.
   .
   The CICS Application Programming Guide (SC34-5993-04 and
   later modifications) now states the following in the section
   1.4.1.1 Programming restrictions :
   | This section describes COBOL language elements that you
   | cannot use under CICS, or whose use is restricted or
   | can cause problems under CICS.
   ..........
   | Do not use the following compiler options:
   | DYNAM (if program is to be translated)
   | NOLIB (if program is to be translated)
   | NORENT
   *
   (Previous manuals indicated that NODYNAM was required.)
   *****
   A similar statement should be included in the Enterprise COBOL
   Programming Guide (SC27-1212) in Chapter 20: Developing COBOL
   Programs for CICS.
   ***********************
   Also, the DB2 UDB for OS/390 and z/OS V7 Application
   Programming and SQL Guide,
   Chapter 2.4.3.3 Embedding SQL statements
   contains the following:
   Use of the COBOL compiler options DYNAM and NODYNAM depends on
   the operating environment
   .....
   You must specify the option NODYNAM when you compile a COBOL
   program that includes SQL statements. You cannot use DYNAM.
   Because stored procedures use CAF, you must also compile COBOL
   stored procedures with the option NODYNAM.
   *****
   A similar statement should be included in the Enterprise COBOL
   Programming Guide (SC27-1212) in Chapter 21: Programming for
   a DB2 Environment or there should be a pointer to the DB2
   manual.
   
   
    
   
   

LOCAL FIX

PROBLEM SUMMARY
 *  ****************************************************************
   * USERS AFFECTED: Customers with COBOL programs that           *
   *                 use EXEC CICS commands or EXEC SQL           *
   *                 statements.                                  *
   *                                                              *
   ****************************************************************
   * PROBLEM DESCRIPTION: The Enterprise COBOL for z/OS           *
   *                      Programming Guide does not clearly      *
   *                      identify when the DYNAM compiler        *
   *                      compiler option can be used             *
   *                      when running on CICS.                   *
   *                                                              *
   ****************************************************************
   * RECOMMENDATION:                                              *
   ****************************************************************
   The Enterprise COBOL for z/OS Programming Guide states clearly
   that the NODYNAM compiler option is required when a COBOL
   program is processed by the separate CICS translator or the
   integrated CICS translator.  However, the programming guide
   does not state clearly when a COBOL program can run on CICS
   and be compiled with the DYNAM compiler option.
   
   
    
   
   

PROBLEM CONCLUSION
 *  The Enterprise COBOL for z/OS Programming Guide (SC27-1412-02)
   will be updated to provide additional information about the
   use of the NODYNAM and DYNAM option.
   
   In "Chapter 17. Compiler Options", in the section for the
   "DYNAM" compiler option, replace the restriction information
   with the following:
   
     Restriction: The DYNAM compiler option must not be used in
     the following cases:
     * COBOL programs processed by the CICS translator or the
       CICS compiler option.
     * COBOL programs that have EXEC SQL statements and are run
       under CICS or DB2 CAF (Call Attach Facility).
   
   The first two paragraphs in "Chapter 20. Developing COBOL
   Programs for CICS", section "Coding COBOL programs to run under
   CICS", subsection "Calling to or from COBOL programs" will be
   replaced with the following (changed material has a change bar
   next to it):
   
     You can make calls to or from VS COBOL II, COBOL for MVS &
     VM, COBOL for OS/390 & VM, and Enterprise COBOL programs
     using the CALL statement. However, these programs cannot call
     or be called by OS/VS COBOL programs with the CALL statement.
     You must use EXEC CICS LINK instead. If you are calling a
     separately compiled COBOL program that was processed with
     either the separate CICS translator or the integrated CICS
     translator, you must pass DFHEIBLK and DFHCOMMAREA as the
   | first two parameters in the CALL statement.  Called programs
   | that are processed by the CICS translator or the integrated
   | CICS translator can contain any function supported by CICS
   | for the language.
   
   | You can use COBOL dynamic calls when running on CICS.  When
   | a COBOL program has been processed with the separate CICS
   | translator or the integrated CICS translator, or contains
   | EXEC SQL statements, the NODYNAM compiler option is
   | required.  In this case you can use CALL identifier with the
   | NODYNAM compiler option to dynamically call a program.  When
   | the COBOL program has no EXEC SQL statements and has not
   | been processed by the separate CICS translator or the
   | integrated CICS translator, there is no requirement to
   | compile with the NODYNAM compiler option.  In this case you
   | can use either CALL literal with the DYNAM compiler option
   | or CALL identifier to dynamically call a program.
   
     You must define dynamically called programs in the CICS
     program processing table (PPT) if you are not using CICS
     autoinstall.  Under CICS, COBOL programs do not support
     dynamic calls to subprograms that have the RELOAD=YES option
     coded in their CICS PROGRAM definition. Dynamic calls to
     programs that are defined with RELOAD=YES can cause a storage
     shortage. Use the RELOAD=NO option for programs that are to
     be dynamically called by COBOL.
   
   Add a new section in "Chapter 21. Programming for a DB2
   environment" called "Using the DYNAM/NODYNAM compiler option".
   The text of the new section:
   
     For COBOL programs with EXEC SQL statements, use of the
     COBOL compiler option DYNAM/NODYNAM depends on the operating
     environment. When running under TSO or IMS, the DYNAM or
     NODYNAM compiler option can be used.  When running under
     CICS or CAF (Call Attach Facility), the NODYNAM compiler
     option must be used.
   
     Related Reference
     * IBM DB2 Application Programming and SQL Guide
   
   PUBS CLOSING CODE: DEVCHNG
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   PQ97963
   
   
 * REPORTED COMPONENT NAME
   ENT COBOL FOR Z
   
   
 * REPORTED COMPONENT ID
   5655G5300
   
   
 * REPORTED RELEASE
   330
   
   
 * STATUS
   CLOSED DOC
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2004-12-03
   
   
 * CLOSED DATE
   2005-02-16
   
   
 * LAST MODIFIED DATE
   2005-02-16
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

Publications Referenced SC27141202 FIX INFORMATION

APPLICABLE COMPONENT LEVELS