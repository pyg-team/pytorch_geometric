Title: IBM InstallUpdate.sh complains about Incorrect JRE on AIX - United States

Text:
 TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 InstallUpdates.sh fails with an "Incorrect JRE" error message if used with updater.jar 8.1.0.218 or later on AIX systems with the Information Server 8.1 domain tier (aka services tier) installed. 

SYMPTOM
The error message looks like this: 

# cd /opt/IBM/InformationServer/Updates/bin
# ./InstallUpdate.sh -console
Patch to install (path to .ispkg file): /opt/IBM/ISpatches/patch_JR38460_server_a
ix_8101.ispkg
Incorrect JRE /opt/IBM/InformationServer/ASBNode/apps/jre is used.
Please use this JRE /opt/IBM/WebSphere/AppServer/java/jre/bin/java to launch
update installation.
#


CAUSE
The script /opt/IBM/InformationServer/Updates/bin/InstallUpdate.sh is created by the Information Server 8.1 suite installer and consists of a single command line that looks like this:

"/opt/IBM81/InformationServer/ASBNode/apps/jre/bin/java" -jar updater.jar -i "/opt/IBM81/InformationServer" "$@"

This command uses a Java Runtime Engine (JRE) under ASBNode to run the Java executable jar file "updater.jar" and hand it the Information Server home directory plus any other arguments that have been supplied on the command line.

updater.jar version 8.1.0.218 and later contain AIX-specific logic that prohibits the JRE under ASBNode from being used to execute updater.jar, if the Domain tier (also known as the Services tier) of Information Server is installed. This logic was introduced to prevent customers from using the JRE under ASBNode to install certain patches, such as 8.1 FixPack 1, which replace that JRE. Using the ASBNode JRE to execute a patch that will try to replace the ASBNode JRE leads to locked-file exceptions and has been the cause of a number of calls to customer support.

The new logic has the side effect of invalidating the standard InformationServer/Updates/bin/InstallUpdate.sh script when the user replaces the standard updater.jar that comes with Information Server 8.1 with version 8.1.0.218 or later.


ENVIRONMENT
This error message happens in Information Server 8.1 installations on AIX where the domain (also known as "services") tier has been installed, and the updater.jar file in InformationServer/Updates/bin has been updated to version 8.1.0.218 or later.



DIAGNOSING THE PROBLEM
The error message shown in the Symptoms section, 

Incorrect JRE /opt/IBM/InformationServer/ASBNode/apps/jre is used.
Please use this JRE /opt/IBM/WebSphere/AppServer/java/jre/bin/java to launch
update installation.,

is definitive.


RESOLVING THE PROBLEM
The recommended way to resolve this is to edit the InstallUpdate.sh script to invoke Java by the path recommended in the error message. To do this, change the java path from 

"information-server-home/ASBNode/apps/jre/bin/java" 

to 


"appserver-home/java/jre/bin/java"

and leave the rest of the command line alone.