Title: IBM IO17886: Resource manager replication failover does not work when databas e is down and the resource manager application is still active. - United States

Text:
 SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  The resource manager allowed the library server monitor to
   detect that the resource manager application was active and
   usable when the resource manager database instance was not
   available. The resource manager log contains error conditions
   that would appear similar to the following when connections
   cannot be made to the resource manager database:
   
   ICMRM:ERROR   2013-01-04 16:15:32.017000 context:
   [icmrm_RMTimerManager.Alarm Pool : 0] -
   [jcc][t4][2043][11550][3.63.75] Exception
   java.net.ConnectException: Error opening socket to server
   zebra27/192.168.1.101 on port 53,000 with message: Connection
   refused. ERRORCODE=-4499, SQLSTATE=08001DSRA0010E: SQL State =
   08001, Error Code = -4,499 SQLCODE:-4499 -
   getDBConnection(RMMetadataManagerDB.java:823)
   
   
    
   
   

LOCAL FIX
 *  N/A
   
   
    
   
   

PROBLEM SUMMARY
 *  With replicated resource managers, when the database
   instance for a primary resource manager is shut down and the
   primary resource manager application is still operational,
   the resource manager incorrectly allowed the library server
   monitor to believe that the resource manager is usable.
   Since the library server monitor believes that the primary
   resource manager is available, all operations continue to be
   directed to the primary resource manager and those
   operations eventually fail because the database is not
   available.
   
   
    
   
   

PROBLEM CONCLUSION
 *  The code was fixed in resource manager to handle this condition
   correctly. With this fix, the library server monitor switches to
   use the secondary replicated resource manager if the primary
   resource manager database is down and the resource manager
   application is still available.
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   IO17886
   
   
 * REPORTED COMPONENT NAME
   RESOURCE MANAGE
   
   
 * REPORTED COMPONENT ID
   5724B1904
   
   
 * REPORTED RELEASE
   843
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2013-01-09
   
   
 * CLOSED DATE
   2014-10-10
   
   
 * LAST MODIFIED DATE
   2014-10-10
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   RESOURCE MANAGE
   
   
 * FIXED COMPONENT ID
   5724B1904
   
   

APPLICABLE COMPONENT LEVELS
 * R843 PSY
   UP
   
   
 * R850 PSY
   UP