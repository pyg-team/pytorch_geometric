Title: IBM Configuring Change Management Server (CM Server) load balancing for ClearQuest Web with IBM HTTP Server - United States

Text:
RN7.1; RN7.1.0.1; RN7.1.0.2; RN7.1.1; SRX; Change Management Server; CM Server; Change Management; ClearQuest; ClearQuest Web; load balancer; load balancing; IHS; IBM HTTP Server; IHS load balancer; gddcccm TECHNOTE (FAQ)

QUESTION
 How do I set up a Change Management Server (CM Server) load balancing configuration for ClearQuest Web by using IBM HTTP Server (IHS)? 

ANSWER
This technical note describes a CM Server load balancing configuration for ClearQuest Web with two CM Servers by using IHS. 

Configuration:

- 2 ClearQuest Web Servers/CM Servers 

 * 

- 1 IBM HTTP Server  * 


- MachineA:  * 
 * 
 * 
 * 
 * 

- MachineB:  * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 

Step 1: Configure the IHS Load Balancer 
Modify the file server.xml on each CM Server and the file plugin-cfg.xml on the IHS server. 
1.1 Modify server.xml on each CM Server 
Modify the file server.xml on each CM Server in the configuration. In the following example, we modify server.xml on MachineA and MachineB. 


1. Open the file server.xml in a text editor. 
 * 
 *  
 * 
 *  
   /opt/rational/common/CM/profiles/cmprofile/config/cells/dfltCell/nodes/dfltNode/servers/server1/server.xml 


 * 
 * 
 * 
 * 
 *  7.1.0.x: 
   C:\Program Files\IBM\RationalSDLC\common\CM\profiles\cmprofile\config\cells\<hostname>CMProfileNode01Cell\nodes\<hostname>CMProfileNode01\servers\server1/server.xml 
   
   7.1.1 and later: 
   C:\Program Files\IBM\RationalSDLC\common\CM\profiles\cmprofile\config\cells\dfltCell\nodes\dfltNode\servers\server1/server.xml 
 * 

2. Locate the following element in the WebContainer section of the file: 
 * 
 * 
 * 
 * 
 * 

3. Add the following properties in the <components> element: 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * xmi:i
 * d
 * 
 * 
 * xmi:id
 * 
 * 
 * WebContainer
 * 
 * 
 * 
 * 
 * 
 * value
 * 
 * 
 * CloneID
 * 
 * 
 * 
 * 
 * 
 * value
 * 
 * 
 * value
 * 
 * 

4. Save and close the server.xml file. 

5. On the UNIX system and Linux: If you want to prevent Web access to the application server, rename S99ihs_startup in the /etc/rc3.d directory to K99ihs_startup and stop the HTTP server. 

6. Restart either the CM Server host system or the CM Server by using the start and stop scripts. 


1.2 Modifying plugin-cfg.xml on the IHS server 
Modify the file plugin-cfg.xml on the IHS server. In this example, MachineA is the IHS server: 

1. Open the file plugin-cfg.xml in a text editor. 
 * 
 * 
 * 
 * 
 * 

 * 
 * 
 * 
 * 
 * 


2. Locate the following section in the file plugin-cfg.xml: 


<ServerCluster Name="cmprofile_Cluster"> 
<Server Name="server1"> 
<Transport Hostname="localhost" Port="12080" Protocol="http"/> 
</Server> 
</ServerCluster> 


3. Replace the ServerCluster section just mentioned with the following section: 
 * 
 * 
 * 
 * 
 * 
 * server1
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * server2
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * server1
 * 
 * 
 * 
 * server2
 * 
 * 
 * 
 * 
 * 



where: 
 * 
 * 
 * 
 * must
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * must
 * 
 * 

4. Modify the number of server entries to match the number of application servers in your load balancing configuration. 

5. Save and close the file plugin-cfg.xml. 

6. Restart the IHS service.  * 

Step 2 Testing the IHS load balancing configuration 

Open a web browser by using the following link: 
 * http://
 * 


You should see the ClearQuest login page. 

[http://%3CIHS] [http://%3CIHS]The ClearQuest Web server URL is now http://IHS load balancer server (MachineA)/cqweb