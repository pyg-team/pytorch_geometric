Title: IBM Authorities required for QTCP user profile to auto start ITM i5/OS agent v6.1 as a TCP/IP server - United States

Text:
IPL KFPSTIRA NO AUTHORITY TCP/IP SERVER QAUTOMON QTCP CT_AGENT TECHNOTE (FAQ)

QUESTION
 What are the authorities required for QTCP user profile to auto start the ITM i5/OS agent as a TCP/IP server? 

CAUSE
The parameter "Adding TCP/IP Server" parameter on "Config i5/OS Monitoring Agent (CFGOMA)" screen can be set to *YES to configure the agent as TCP/IP server. This option enables the agent job to start automatically when TCP/IP starts on the system. This causes the agent job to end when TCP/IP ends on the system. The start of TCP/IP usually happens during an IPL which allows the agent auto start during an IPL. This might not work as expected when QTCP user profile do not have sufficient authorities on the objects in QAUTOMON Library.

ANSWER
This problem can be circumvented by providing necessary authorities for QTCP user profile on the objects in QAUTOMON library. QTCP is the user that is used to start the agent during IPL because the agent job starts as a TCP/IP server. The following steps are applicable to all ITM 6.1 i5/OS agent fix packs and limited availability fixes fix pack 4 and higher. However, they are NOT applicable to ITM 6.2 versions of the agent. The following commands can be used to grant necessary authorities and they must be performed after the agent is installed on the i5/OS system.

1. Add QTCP to QAUTOMON authorization list.

ADDAUTLE AUTL(QAUTOMON) USER(QTCP) AUT(*ALL) 

2. Grant *ALL authority to QTCP user profile on QAUTOMON user profile.

GRTOBJAUT OBJ(QSYS/QAUTOMON) OBJTYPE(*USRPRF) USER(QTCP) AUT(*ALL) 

3. Add QAUTOMON authorization list to QSYS/QAUTOMON object of type *LIB.

GRTOBJAUT OBJ(QSYS/QAUTOMON) OBJTYPE(*LIB) AUTL(QAUTOMON) 

4. Add QAUTOMON authorization list to the object QSYS/QAUTOTMP object of type *LIB.

GRTOBJAUT OBJ(QSYS/QAUTOTMP) OBJTYPE(*LIB) AUTL(QAUTOMON) 

5. Add QAUTOMON authorization list to the object QAUTOMON/QAUTOMON of type *JOBQ.

GRTOBJAUT OBJ(QAUTOMON/QAUTOMON) OBJTYPE(*JOBQ) AUTL(QAUTOMON) 

6. Grant to authority to QTCP user profile on QSYS/QSYSOPR message queue. 

GRTOBJAUT OBJ(QSYS/QSYSOPR) OBJTYPE(*MSGQ) USER(QTCP)

7. If QAUTOTMP/QA1CRMDTAQ object already exists, job log for QTCP may contain some exceptions related to data queue object QA1CRMDTAQ in QAUTOTMP library. This could happen if the agent started manually by some user other than QTCP. To prevent this, either delete this object while agent is not running or change the owner of the job to QTCP. Next IPL would not contain any exceptions related to this object.

CHGOBJOWN OBJ(QAUTOTMP/QA1CRMDTAQ) OBJTYPE(*DTAQ) NEWOWN(QTCP)

RELATED INFORMATION
 Auto start of the ITM 6.x i5/OS Agent during IPL [http://www-01.ibm.com/support/docview.wss?uid=swg21495735]


 

PRODUCT ALIAS/SYNONYM
 Monitoring agent for i5/OS
Tivoli Monitoring Agent for i5/OS
Tivoli OS/400 agent
ITM i5/OS agent