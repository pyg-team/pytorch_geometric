Title: IBM How to get attributes for user from LDAP when acting as a Service Provider in TFIM - United States

Text:
TFIM; FIM; LDAP; WebSEAL; attributes; mapping; credential TECHNOTE (FAQ)

QUESTION
 When TFIM is acting as a Service Provider (SP) and WebSEAL is the point of contact (POC) using the Access Manager authorization server how do you get attributes from LDAP like you can when a user logs in directly to WebSEAL? 

ANSWER
This is configured just the same way it is in WebSEAL by making use of the cred-attribute-entitlement-services, you would just put the entries in the ivacld.conf file for the authorization servers TFIM use. You can use the exact same values you have set in your WebSEAL conf file if you wish to have the same attributes for TFIM logged in users. 


The three main steps are:
Declare a Service ID and a library name in the [aznapi-entitlement-services] stanza
Enable startup of the entitlement service in the [aznapi-configuration] stanza
Specify the attributes to add to the credential by creating service-specific stanzas for the attributes to retrieve.


For example:
1. Add a user-defined service name to the [aznapi-entitlement-services] stanza.

The LDAP_ATTRS_SVC service ID is an example. The azn_ent_cred_attrs registry attribute entitlement service is shipped with the Security Access Manager run time and must be used.

[aznapi-entitlement-services]
LDAP_ATTRS_SVC = azn_ent_cred_attrs

2. Enable startup of the entitlement service in the [aznapi-configuration] stanza. You must use the cred-attribute-entitlement-services stanza entry to indicate to the Security Access Manager run time that the service ID corresponds to a credential attributes entitlements service. In this case, the service is the standard registry attribute entitlement service.

[aznapi-configuration]
cred-attribute-entitlement-services = LDAP_ATTRS_SVC

3. Add attributes to the credential. Several stanzas correspond to the user-defined service ID to configure the attributes to retrieve. In this example, the attribute service returns the sn and mail registry attributes for the user and returns the dept registry attribute for the group. 


3a. Add a stanza for the name of the service ID. The entries in the stanza define the source location of the attributes to retrieve. The values for the sources must match identifiers in the registry.

[LDAP_ATTRS_SVC]
user = azn_cred_registry_id
group = cn=usersfromIDP,o=ibm,c=us

3b. Add a stanza for each attribute to add to the credential. The stanzas consist of the service ID and the source name that is delineated by a colon.

[LDAP_ATTRS_SVC:user]
attr_lastname = sn
attr_email = mail

[LDAP_ATTRS_SVC:group]
attr_department = dept