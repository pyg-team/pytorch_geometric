Title: IBM ABEND138 in DMGATTIN for DMBATCH SELECT STATISTICS with ARCHDSN - United States

Text:
S138 DMGATTIN; SEL STAT; SABA001I; archive TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 SABA001I failure reporting S138 ABEND in DMGATTIN when running a DMBATCH SELECT STATISTICS on a Statistics file-pair created from IBM Sterling Connect:Direct for z/OS Statistics archive. 

SYMPTOM
SABA001I - DMGATTIN S138 U0000 ID=I STATE=A TASK#=0012 PSW=070C2001
98F4CA76 (DGADTLS1+00030A76)



CAUSE
Even though the exit was compiled with version 5.2 macros, the source is back
level and PM89274 is documented in version 5.1 as being PE corrected by HIPER
APAR PM92979 / PTF UK96030 which corrects a hang due ENQ held on
SECURITY DD. In 5.2 that causes an S138 abend instead of a hang.


ENVIRONMENT
Sterling Connect:Direct for z/OS

DIAGNOSING THE PROBLEM
Version of Stage 2 Security Exit is indicated in NDMLOG where it shows the exit name and that module shows the latest maintenance applied.
For example:
SECURITY.EXIT = exitname
exitname EP=80024000 SIZE=00006000 ID=V5R02M00P00.0000 06/19/15 11.22
PTF PM89274

RESOLVING THE PROBLEM
The correcting code is part of the 5.2 version of the DGASECUR MACRO. Recompile and link the relevant version of the source code for the Stage 2 Security Exit.