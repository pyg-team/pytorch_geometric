Title: IBM Deinstalling HACMP Software - United States

Text:
KnowledgeCollection TECHNOTE (FAQ)

QUESTION
 Deinstalling HACMP Software 

ANSWER


 This document describes how to uninstall HACMP software. The information in this document pertains to AIX 4.3 through AIX 5.3, and all HACMP releases up to 5.x. 




 Before using this procedure to uninstall HACMP software, collect the output from the following commands to determine which resources are defined to HACMP:


/usr/(es)/sbin/cluster/utilities/cllsif /usr/(es)/sbin/cluster/utilities/clshowres /usr/(es)/sbin/cluster/utilites/cllsserv /usr/(es)/sbin/cluster/utilities/cllscustom  If any custom events, application start/stop scripts or cluster snapshots are located under the /usr/(es)/sbin/cluster path, it is recommended that you move them to another path, so when deinstalling cluster software they are not deleted. 

 Follow these steps to uninstall HACMP software: 

 1. To stop cluster services gracefully on both nodes  1. Run the smitty clstop command to stop cluster services "gracefully" on both nodes. 
     2. Ensure all resources are stopped, such as IPs, Filesystems, Volume Groups and Applications. 
     3. Run the lssrc -g cluster command to ensure cluster daemons are stopped.
     4. In environments using IPAT, change run levels in the /etc/inittab file back to the number "2" by running:      /usr/sbin/cluster/utilities/clchipat false
        
        
        
    
    
 2. Run the smitty remove command, and then remove "cluster.*" NOTE: If you're running AIX 4.3.3 on a non-SP node, you can also remove "rsct.*" 
 3. Run the smitty chinet to set each note to boot up on the Service IP Address. 
 4. Use the smitty chvg command to set each node's volume groups to activate automatically at system restart. (Do not set all VGs to start automatically on all nodes.) 
 5. Use the smitty chfs command to set each node's filesystems to mount automatically at system restart.
 6. Use the smitty nfs command to set any NFS-defined filesystems to be exported or mounted at boot time. NOTE: If doing NFS crossmounts where the local [jfs] mount point has a different name than the NFS mount point, you will want to rename the local mount point to be the same as the NFS mount point. Use the smitty chfs command and set the local mount point to be mounted ONLY JFS at system restart on the local node, and ONLY NFS at system restart on all remote nodes. 
 7. Configure your application to start at system restart (for example, by adding a line with the application start script to the /etc/inittab file). 
 8. Clean up any "boot" entries in the /etc/hosts files that are no longer being used, and unless otherwise needed, remove the /.rhosts file from each cluster node.



Cross reference information Segment Product Component Platform Version Edition Operating System AIX Installation- backup- restore 
HISTORICAL NUMBER
 isg1pTechnote0760