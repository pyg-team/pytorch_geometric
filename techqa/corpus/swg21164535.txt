Title: IBM Tivoli Storage Manager and Time Zone/Daylight Saving Time FAQ - United States

Text:
daylight saving time; daylight savings time; dst; dst2007; AIX; DST TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 This document describes how Tivoli Storage Manager (TSM) is affected by time zone differences and Daylight Saving Time adjustments. 

RESOLVING THE PROBLEM
TSM scheduled events 

When using TSM's scheduling facilities, all scheduling dates and times are based on the TSM server host machine's system clock. This is generally not an issue when all TSM client machines are in the same time zone as the TSM server machine. In cases where the TSM server host machine's clock may differ from a client machine - for example, the server machine is located in New York and the client machine is located in California - then the difference must be taken into account when scheduling activity for that client. New York is three hours ahead of California, so if the client activity needs to begin at 8:00 PM local time (local to the client), then the schedule on the server must be defined to begin at 11:00 PM local time (local to the server).

NOTE: For the purposes of discussion, it is assumed that system clocks are set to their respective local time zones unless explicitly stated otherwise.

The effect of Daylight Saving Time
Suppose that the same TSM server described above has a TSM client located in Arizona. The state of Arizona does not observe Daylight Saving Time (DST). While New York observes Standard Time, it is two hours ahead of Arizona. While New York observes DST, it is three hours ahead of Arizona. Thus if the client activity must begin at 8:00 PM local time, the schedule on the server must be defined to begin at 10:00 PM during Standard Time and changed to 11:00 PM during DST.

What happens when the client machine's system time is changed
This situation presents no difficulty. The TSM client starts logging new messages with the current (new) system time.

What happens when the server machine's system time is changed
The TSM server performs a date and time ("date") check whenever it is started, and each hour thereafter. If the server detects an invalid date, then client sessions are disabled and expiration, migration, reclamation, and volume history deletion operations are disallowed. You either need to fix the system date if it is indeed in error, or else use the TSM administrative command ACCEPT DATE to force the server to accept the current date as valid. In this case you must follow the ACCEPT DATE command with ENABLE SESSIONS in order to re-enable the server for client sessions.

The TSM server treats any of the following as an invalid date:

- Earlier than the date the TSM server was installed.

- More than one hour earlier than the last time the date was checked.

- More than 30 days later than the last time the date was checked.

One-hour changes forward or back for DST are considered valid.

Generally there are no problems when the TSM server machine's date is changed. The most typical changes occur when changing between DST and Standard Time. Considerations for these changes include:

- Scheduled activity between TSM client and server that reside in different time zones, as discussed above.

- Scheduled activity that may not run. If a scheduled event is to occur between the current system time and the new system time, then the event may be missed for that day. For example, suppose client activity is scheduled to run between 2:15 AM and 2:45 AM (the schedule start time is 2:15 AM and the window is 30 minutes). If the current time is 2:00 AM and the system time is advanced one hour to change to DST, then the new system time will be 3:00 AM. The server will thus treat the scheduled event as "Missed". The exception is for clients that use SCHEDMODE POLLING: their scheduled activity will still run. But the server will not prompt clients that run with SCHEDMODE PROMPTED. This situation can be avoided by changing the system time such that no scheduled activity falls between the current time and the new time.

When the system time is regressed then all scheduled activity should still run to completion. Scheduled events that occur between the current system time and the new time will not execute twice. For example, suppose client activity is scheduled to run between 2:15 AM and 2:45 AM (the schedule start time is 2:15 AM and the window is 30 minutes). If the activity has already occurred and the current time is 3:00 AM, then if the system time is regressed one hour to Standard Time (so the new time is 2:00 AM), the 2:15 AM event will not run again when the clock reaches 2:15 AM.

Known problems and limitations 

 * AIX 6.1 and AIX 7.1 systems or applications that use the POSIX time zone format may not change time properly at Daylight Savings Time start or end dates.
   Applications that use the AIX date command, or time functions such as localtime() and ctime(), on these systems may be affected. Systems and applications using the Olson time zone format are NOT affected.

 * 
 * http://www.ibm.com/support/docview.wss?uid=isg3T1013017
 * 

 * When the system time is changed on z/OS systems, the TSM server address space must be shut down and restarted in order to pick up the new system time. On all other platforms, when the system time is changed the TSM server automatically begins to use the new system time.