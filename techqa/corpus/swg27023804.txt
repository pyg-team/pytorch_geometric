Title: IBM Connection errors require updated JCR DataSource Connection Pool settings for WebSphere Portal with DB2 z/OS Backend - United States

Text:
7002eGA PRODUCT README

ABSTRACT
 When WebSphere Portal is configured to use DB2 zOS as the backend database with the default JCR DataSource Connection Pool settings, connection closure errors may appear in the logs. 

CONTENT
When WebSphere Portal is configured to use DB2 zOS as the backend database with the default JCR DataSource Connection Pool settings, 

 connection closure errors may appear in the logs. Examples of such errors from the SystemOut.log file include:

[11/15/11 20:23:44:350 EST] 0000002b WSRdbXaResour E DSRA0302E: XAException occurred. Error code is: XAER_RMFAIL (-7). Excep
tion is: [jcc][t4][10401][12066][4.12.57] XA exception: XAER_RMFAIL : [jcc][t4][10335][11391][4.12.57] Invalid operation: Connect
ion is closed. ERRORCODE=-4470, SQLSTATE=08003 ERRORCODE=-4228, SQLSTATE=null
[11/15/11 20:23:44:363 EST] 0000002b TaskManager E java.lang.RuntimeException: com.ibm.websphere.ce.cm.ObjectClosedException:
DSRA9110E: Connection is closed.

or 

[11/11/11 16:50:23:975 EST] 00000203 WSJccConnecti W DSRA8650W: Error closing a JDBC child wrapper, com.ibm.ws.rsadapter.jdbc.WSJccPreparedStatement@a830a83
com.ibm.db2.jcc.am.SqlException: [jcc][10120][10943][4.12.57] Invalid operation: statement is closed. ERRORCODE=-4470, SQLSTATE=null

or 

[11/8/11 13:29:19:393 EST] 00000050 CmUtility W com.ibm.websphere.personalization.utils.CmUtility createWorkspace WSP0005E: Error calling IConnectionManager.logon().: WSP0005E: Error calling IConnectionManager.logon().


Similar errors can be found in the DB2 zOS log:

04.09.55 STC31180 DSNL027I -DSS1 SERVER DISTRIBUTED AGENT WITH 065
065 LUWID=G92A7258.F334.C8C3C93FB745=150897
065 
065 THREAD-INFO=JCRDBUSR:paix189.rtp.raleig:JCRDBUSR:db2jcc_application:*
065 :*:*:*
065 RECEIVED ABEND=04E
065 FOR REASON=00D3003B


In order to resolve this issue, the following changes to the WebSphere Portal Connection Pool for the JCR DataSource are recommended.

Click Resources > JDBC > Data Sources > JCR_data_source > [Additional Properties] Connection pool properties

Reap Time = 30
Unused timeout = 0
Aged timeout = 85