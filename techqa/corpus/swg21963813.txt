Title: IBM 20150715_Proventia_10G_Network_Active_Bypass_update-13_fw3.30-12 - United States

Text:
20150715_Proventia_10G_Network_Active_Bypass_update-13_fw3.30-12; 10G; NAB; update 13; 3.30-12 TECHNOTE (FAQ)

QUESTION
 What fixes are included in 20150715_Proventia_10G_Network_Active_Bypass_update-13_fw3.30-12? 

ANSWER
DESCRIPTION 
=====================================================================

NOTE:
Installation of firmware 3.4-23 or higher will only allow network negotiation when both external device and NAB network port are set to fixed, or both set to auto. 


New fixes added in this update (firmware 3.30-12):

- Adds a new feature for generating a unique certificate with diffie-hellman algorithm. 
a) Console(Admin Menu)
Proventia_NAB> system generate-Diffie-Hellman-group
b) LMI
System-->Setttings--> Generate Diffie Hellman group

NOTE: Regeneration of Certificates required to cover for vulnerabilities in old certificate. Process will take up to 60 minutes to complete and appliance will go down for reboot. 

New fixes added in this update (firmware 3.29-9):

- Delivers security fixes to date. Please visit http://www.ibm.com/support/entry/portal/support [http://www.ibm.com/support/entry/portal/support] to view security bulletins for this product.

- Upgraded OpenSSH and OpenSSL

- Upgraded Net SNMP to 5.7.3 - SNMP get and walk are now supported

- Disabled RC4 cipher

- Temperature units fixed for temperature threshold notifications - should be C instead of F

- Modified Analyzer section - improved consistency between GUI/CLI; only network port traffic can now be mirrored to analyzer ports

- SFP capabilities have been added to SFP display (under "show sfp" in CLI, under "status" page in LMI)

- CLI syntax for LFD has been modified - removed from bypass section - the command is now: "lfd [enable | disable]" instead of "bypass lfd [enable | disable]"

New fixes added in this update (firmware 3.25-57):

- Delivers security fixes to date. Please visit http://www.ibm.com/support/entry/portal/support [http://www.ibm.com/support/entry/portal/support] to view security bulletins for this product
- Changed fan numbering scheme to match back panel labels.
- New features added:
- Listen/force modes added to all ports (see below for use cases).
1. 10G fiber
a. Only RX is connected then the link will be up if the other side is transmitting
i. There is no need for the force link up or the listen mode in this case
b. If only the TX is connected, then the port will not transmit unless the port is forced up
- RX/TX traffic from a single port can now be sent to two different analyzer ports.
- SNMP queries including snmpget and snmptable are now supported.
- Syslog and SNMP trap notifications for high temperature.
- Syslog and SNMP trap notifications for adding and removing fans.
- Configurable temperature threshold for notifications.

New fixes added in this update (firmware 3.18-49):

- Adds support for new SFP (AFBR-709DMZ-IB1) on Network ports on 10G NAB.

- Updates to newer version of OpenSSL(1.0.1i)

New fixes added in this update (firmware 3.13-41):

- Updates to newer version of OpenSSL

- Fixes issue in which upgrading to 3.9 from 3.4 may cause the root password
to change.


New fixes added in this update (firmware 3.9-34):

- Updates to newer version of OpenSSL

- Updates to newer version of OpenSSH

- Introduces a new feature for uploading security certificates through the
LMI.
On left panel of LMI: System->Settings->Load Security Certificate

- Introduces a fix in which user/password parameters are no longer required
when configuring the SMTP notifications, but both are still available as
optional.

- Introduces a new feature that allows for installation of this firmware at
any patch.
The customer will have to decide whether they want to reimage or upgrade to
new firmware.
Reimage allows for installation from any firmware.
Upgrade allows for installation from 2.15-X or higher.

New fixes added in this update (firmware 3.4-23):

- Fixes issue where End User License Agreement does not show up after 
installing update with install script through console.

- Fixes issue where switchd process some times uses close to 100% CPU.

- Upgrades to a newer version of Openssh, Lighttpd, and Php.

- New features added:
- Improved web user interface with better reporting and better usability
- Customizable notifications via SNMP traps, syslog, and email
- Improved reliability of the notification engine
- High-resolution heartbeat
- Bidirectional heartbeat
- New restricted command-line interface
- Support for more types of heartbeat packets: Ethernet, IP, ICMP, ECHO, IPX, and TCP SYN.


New fixes added in this update (firmware 2.18-42):

- Corrects an issue that made it necessary to remove and then reapply
power to reset the 10G NAB after installing a firmware update.

- Upgrades to a newer version of OpenSSL.

- Corrects an issue that caused duplicate notifications (including
SNMP traps and e-mails) to be sent upon state change events.

- Corrects an issue that could lead to system instability when using
certain TACACS+ server configurations.

- Corrected an issue where the 'link mode' heartbeat fail-over delay
was longer than normal.

Fixes previously included in update 5 (firmware 2.15-36):

- Corrects an issue with the heartbeat receive routine, and adds new
checks to prevent buffer corruption.

- Addresses a buffer overflow in the 'updated' process.

- Corrects an issue that prevented NTP from starting automatically
after a reboot.

Fixes previously included in update 4 (firmware 2.13-34):

- Corrects an issue which could cause port statistics values to
appear blank even when traffic is flowing.

- Adds support for additional duplex and link speed options on the
management interface.

Fixes previously included in update 3 (firmware 2.11-28):

- Corrects an issue in which heartbeat emitting procedures on
different segments could overlap and cause a 10G NAB to go into
bypass unnecessarily.

Fixes previously included in update 2 (firmware 1.0.0343c3c):

- A race condition has recently been discovered in the stock Proventia
Network Active Bypass 10G (NAB) firmware that will cause this
appliance to experience high CPU utilization. This patch implements
a workaround to automatically reboot the 10G NAB when this situation
is detected.

Fixes previously included in update 1 (firmware 1.0.2919):

- Corrects an issue that prevents this appliance from successfully
passing multicast traffic.

MD5 checksum calculation:
- 57bc5d740f91e4aa18b5b17265336334 vmlinux.64.3.30-12.gz


COMPATIBILITY
=====================================================================
This update is applicable only to the IBM Proventia 10G NAB.

This hotfix can be applied on top of hotfix 3.18-49 or higher.

APPLYING THE UPDATE
=====================================================================

Appliances at firmware 1.X-Y:

This hotfix must be installed through LMI in Browser. During this
process the configuration will not get restored properly, so user will
have to reset config to factory defaults. If configuration needs to be kept,
upgrade to firmware 2.X-Y first before moving to 3.X-Y:

1) Log into LMI as "admin"
2) On Left panel go to Firmware Update
3) Browse for the file named "vmlinux.64.3.30-12.gz"
4) Follow the instructions to complete installation. Appliance will
reboot automatically.
5) On left panel of LMI go to Reset to Factory Defaults. Appliance
will reboot automatically. Management ip config may be lost, if so,
log into appliance as "admin" through serial console and reconfigure
the management ip config.
6) Power-cycle the appliance by unplugging the power cables from the
back of the machine.

Appliances at Firmware 2.X-Y:

This hotfix must be installed through LMI in Browser:

1) Upgrade to 3.18-49 
2) Log into LMI as "admin"
3) On Left panel go to Firmware Update
4) Browse for the file named "vmlinux.64.3.30-12.gz"
5) Follow the instructions to complete installation. Appliance will
reboot automatically.
6) If installing from 2.16 or below, power cycle the appliance by 
unplugging the power cables from the back of the machine, then 
reconnecting them.


Appliances at Firmware 3.X-Y:

This hotfix must be installed through LMI in Browser:

1) Upgrade to 3.18-49
2) Log into LMI as "admin"
3) On Left panel go to Firmware Update
4) Browse for the file named "vmlinux.64.3.30-12.gz"
5) Follow the instructions to complete installation. Appliance will
reboot automatically.

KNOWN ISSUES
=====================================================================

1) Certificate upload does not work properly at fw 3.4, 3.9, 3.13. 
In some cases, invalid security certificates can be uploaded to the unit.
In case the LMI is no longer accessible, the user must login to the unit as the root user through
a console or SSH connection, remove all pem files from the flash directory and reboot the
unit.

2) Upgrading to 3.9 from 3.4 may cause the root password to change.

3) Bond service does not work properly at fw 3.4, 3.9, 3.13. If bond service is disabled it may
cause the segment to stay in bypass always. A work around is to toggle the
heartbeat mode (called bypass mode in the LMI) to link and then back to
internal to bring the segment back inline.

4) Tap port does not work properly at fw 3.4, 3.9, 3.13. If tap service is disabled the port will be stuck in taps mode. A work
around is to disconnect and reconnect the appliance ports to bring the segment back inline.





[/support/docview.wss?uid=swg21963813&aid=1] [http://ibm.biz/KC-SNIPS] [/support/docview.wss?uid=swg21963813&aid=2] [http://ibm.biz/InfraSecForumTechnote] [/support/docview.wss?uid=swg21963813&aid=3] [http://ibm.biz/SecSuptUTube] [/support/docview.wss?uid=swg21963813&aid=4] [http://ibm.biz/InfraSecFixes] [/support/docview.wss?uid=swg21963813&aid=5] [http://ibm.biz/FlexLicLogin] [/support/docview.wss?uid=swg21963813&aid=6] [http://ibm.biz/MyNotification] [/support/docview.wss?uid=swg21963813&aid=7] [http://ibm.biz/ContactSecSupport]