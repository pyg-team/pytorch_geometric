Title: IBM Tivoli classloader clashes with Collaboration & Deployment Services (C&DS) Axis libraries - United States

Text:
 TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 When you try to log in to the PEB browser the following exception shows:

1/5/11 9:23:53:663 CET] 0000003a SystemOut???? O 09:23:53,663 INFO? [connection] Setup JNDI default database.
[1/5/11 9:23:53:814 CET] 0000003a ServletWrappe I?? SRVE0242I: [IBM_SPSS_CDS_42_DM61] [/peb] [FilterProxyServlet]: Initialization successful.
[1/5/11 9:23:53:866 CET] 0000003a ServletWrappe I?? SRVE0242I: [IBM_SPSS_CDS_42_DM61] [/peb] [/jsp/index.jsp]: Initialization successful.
[1/5/11 9:23:54:071 CET] 00000040 ServletWrappe I?? SRVE0242I: [IBM_SPSS_CDS_42_DM61] [/peb] [ERControllerServlet]: Initialization successful.
[1/5/11 9:23:54:429 CET] 00000040 SystemOut???? O 09:23:54,429 WARN? [SessionAuthenticatorImpl] Exception occurred in bSSOEnabledPlatform()
[1/5/11 9:23:54:741 CET] 00000040 ServletWrappe I?? SRVE0242I: [IBM_SPSS_CDS_42_DM61] [/peb] [/jsp/com/spss/security/login/login.jsp]: Initialization successful.
[1/5/11 9:24:15:997 CET] 00000040 SystemOut???? O 09:24:15,997 WARN? [SessionAuthenticatorImpl] Exception occurred in bSSOEnabledPlatform()
[1/5/11 9:24:16:839 CET] 00000040 SystemOut???? O 09:24:16,831 ERROR [class] Exception occurred while calling capabilities for Capability Information Webservice
AxisFault
?faultCode: {http://schemas.xmlsoap.org/soap/envelope/ [http://schemas.xmlsoap.org/soap/envelope/]}Server.userException
?faultSubcode:
?faultString: java.lang.ClassCastException: org.apache.axis.MessageContext incompatible with org.apache.axis.MessageContext
?faultActor:
?faultNode:
?faultDetail:
??????? {http://xml.apache.org/axis/ [http://xml.apache.org/axis/]}stackTrace:java.lang.ClassCastException: org.apache.axis.MessageContext incompatible with org.apache.axis.MessageContext
??????? at com.ibm.tivoli.itcam.axis.webservices.AxisClientHanlder.handleResponse(AxisClientHanlder.java:122)
??????? at com.ibm.tivoli.itcam.axis.callbacks.capturewebservices.AxisCallbackWebServices.afterAxisClientInvoke(AxisCallbackWebServices.java:66)
??????? at org.apache.axis.client.AxisClient.invoke(AxisClient.java:228)
??????? at org.apache.axis.client.Call.invokeEngine(Call.java:2784)
??????? at org.apache.axis.client.Call.invoke(Call.java:2767)
??????? at org.apache.axis.client.Call.invoke(Call.java:2443)
??????? at org.apache.axis.client.Call.invoke(Call.java:2366)
??????? at org.apache.axis.client.Call.invoke(Call.java:1812)
??????? at com.spss.security.ws.axis.CapabilityInformationSoapBindingStub.getCapabilities(CapabilityInformationSoapBindingStub.java:237)
??????? at com.spss.er.ws.CapabilityClientWrapper.getCapabilities(CapabilityClientWrapper.java:77)
??????? at com.spss.er.actions.AuthenticateUserAction.userAuthenticate(AuthenticateUserAction.java:220)
??????? at com.spss.er.actions.AuthenticateUserAction.performAction(AuthenticateUserAction.java:141)
??????? at com.spss.er.actions.ERBaseAction.process(ERBaseAction.java:84)
??????? at com.spss.er.servlet.ERControllerServlet.doProcess(ERControllerServlet.java:187)
??????? at com.spss.er.servlet.ERControllerServlet.doPost(ERControllerServlet.java:126)
??????? at javax.servlet.http.HttpServlet.service(HttpServlet.java:763)
??????? at javax.servlet.http.HttpServlet.service(HttpServlet.java:856)
??????? at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1143)
??????? at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1084)
??????? at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:145)
??????? at com.spss.er.filter.ERFilter.doFilter(ERFilter.java:127)
??????? at com.ibm.ws.webcontainer.filter.FilterInstanceWrapper.doFilter(FilterInstanceWrapper.java:190)
??????? at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:130)
??????? at com.spss.er.filter.AuthFilter.doFilter(AuthFilter.java:148)
??????? at com.ibm.ws.webcontainer.filter.FilterInstanceWrapper.doFilter(FilterInstanceWrapper.java:190)
??????? at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:130)
??????? at com.spss.security.filter.CrossSiteScriptingFilter.doFilter(CrossSiteScriptingFilter.java:57)
??????? at com.ibm.ws.webcontainer.filter.FilterInstanceWrapper.doFilter(FilterInstanceWrapper.java:190)
??????? at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:130)
??????? at com.ibm.ws.webcontainer.filter.WebAppFilterChain._doFilter(WebAppFilterChain.java:87)
??????? at com.ibm.ws.webcontainer.filter.WebAppFilterManager.doFilter(WebAppFilterManager.java:832)
??????? at com.ibm.ws.webcontainer.filter.WebAppFilterManager.doFilter(WebAppFilterManager.java:679)
??????? at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:587)
??????? at com.ibm.ws.wswebcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:481)
??????? at com.ibm.ws.webcontainer.servlet.CacheServletWrapper.handleRequest(CacheServletWrapper.java:90)
??????? at com.ibm.ws.webcontainer.WebContainer.handleRequest(WebContainer.java:748)
??????? at com.ibm.ws.wswebcontainer.WebContainer.handleRequest(WebContainer.java:1466)
??????? at com.ibm.ws.webcontainer.channel.WCChannelLink.ready(WCChannelLink.java:119)
??????? at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleDiscrimination(HttpInboundLink.java:458)
??????? at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleNewInformation(HttpInboundLink.java:387)
??????? at com.ibm.ws.http.channel.inbound.impl.HttpICLReadCallback.complete(HttpICLReadCallback.java:102)
??????? at com.ibm.ws.tcp.channel.impl.AioReadCompletionListener.futureCompleted(AioReadCompletionListener.java:165)
??????? at com.ibm.io.async.AbstractAsyncFuture.invokeCallback(AbstractAsyncFuture.java:217)
??????? at com.ibm.io.async.AsyncChannelFuture.fireCompletionActions(AsyncChannelFuture.java:161)
??????? at com.ibm.io.async.AsyncFuture.completed(AsyncFuture.java:136)
??????? at com.ibm.io.async.ResultHandler.complete(ResultHandler.java:196)
??????? at com.ibm.io.async.ResultHandler.runEventProcessingLoop(ResultHandler.java:751)
??????? at com.ibm.io.async.ResultHandler$2.run(ResultHandler.java:881)
??????? at com.ibm.ws.util.ThreadPool$Worker.run(ThreadPool.java:1473)
?
??????? {http://xml.apache.org/axis/ [http://xml.apache.org/axis/]}hostname:unix4362
?
java.lang.ClassCastException: org.apache.axis.MessageContext incompatible with org.apache.axis.MessageContext
??? ????at org.apache.axis.AxisFault.makeFault(AxisFault.java:101)
??????? at org.apache.axis.client.Call.invoke(Call.java:2446)
??????? at org.apache.axis.client.Call.invoke(Call.java:2366)
??????? at org.apache.axis.client.Call.invoke(Call.java:1812)
??????? at com.spss.security.ws.axis.CapabilityInformationSoapBindingStub.getCapabilities(CapabilityInformationSoapBindingStub.java:237)
??????? at com.spss.er.ws.CapabilityClientWrapper.getCapabilities(CapabilityClientWrapper.java:77)
??????? at com.spss.er.actions.AuthenticateUserAction.userAuthenticate(AuthenticateUserAction.java:220)
??????? at com.spss.er.actions.AuthenticateUserAction.performAction(AuthenticateUserAction.java:141)
??????? at com.spss.er.actions.ERBaseAction.process(ERBaseAction.java:84)
??????? at com.spss.er.servlet.ERControllerServlet.doProcess(ERControllerServlet.java:187)
??????? at com.spss.er.servlet.ERControllerServlet.doPost(ERControllerServlet.java:126)
??????? at javax.servlet.http.HttpServlet.service(HttpServlet.java:763)
? ??????at javax.servlet.http.HttpServlet.service(HttpServlet.java:856)
??????? at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1143)
??????? at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1084)
? ??????at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:145)
??????? at com.spss.er.filter.ERFilter.doFilter(ERFilter.java:127)
??????? at com.ibm.ws.webcontainer.filter.FilterInstanceWrapper.doFilter(FilterInstanceWrapper.java:190)
??????? at com.ibm.ws.webcontainer.filter.WebAppFilt 

RESOLVING THE PROBLEM
This problem relates to C&DS using the Tivoli Axis libraries instead of its own. This problem is solved in Tivoli FixPack 9. There also is a local fix available, described below.


Problem Description
===================
After applying the DC to the WAS Portal Instance, when the
Portlet Factory is accessed the following ClassCastException is
seen in the SystemOut.log
.
java.lang.ClassCastException: org.apache.axis.MessageContext
incompatible with org.apache.axis.MessageContext
at
com.ibm.tivoli.itcam.axis.webservices.AxisClientHanlder.handleRe

Local fix
Disable Axis instrumentation by adding the following property
to <DC_HOME>/runtime/<serve>/custom/toolkit_custom.properties:

com.ibm.tivoli.itcam.toolkit.ai.axis.enablewebservice=false


Problem conclusionTHIS IS A COEXISTENCE PROBLEM BETWEEN DC AND AXIS ON WAS PORTAL
SERVER.

The fix for this APAR is contained in the following maintenance
package:

| interim fix | 6.1.0.5-TIV-ITCAMfWAS_MP-IF0009

sponse(AxisClientHanlder.java:122)

RELATED INFORMATION
 Need more help? Our C&DS forum is Live! [https://developer.ibm.com/answers/topics/collaboration.html?smartspace=predictive-analytics]


 

HISTORICAL NUMBER
 92685