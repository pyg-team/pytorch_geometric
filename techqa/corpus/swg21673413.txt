Title: IBM V13 EIF probe on SUSE11 using portmapper - United States

Text:
portmap; rpcbind; bind TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 EIF probe not starting when PortMapper='true', works fine with PortMapper='false'. 

SYMPTOM
EIF probe log at debug shows; 

2014-05-07T12:51:13: Information: I-UNK-000-000: Probewatch: Running ... 
2014-05-07T12:51:13: Information: I-UNK-000-000: :::: 
2014-05-07T12:51:13: Error: E-JPR-000-000: Error:Unable to bind to 
socket transportTransportList=t1 
t1Type=SOCKET 
t1Channels=c1 
c1Port=5529 
c1PortMapper=true 
c1PortMapperNumber=100033057 
c1ServerLocation=localhost 
eifHBID=5529 

2014-05-07T12:51:13: Information: I-UNK-000-000: Probewatch: Unable to 
get events; Caused by: null 
2014-05-07T12:51:13: Error: E-JPR-000-000: Unable to get events 
Caused by: null 
2014-05-07T12:51:13: Information: I-UNK-000-000: :::: 
2014-05-07T12:51:13: Information: I-UNK-000-000: Probewatch: Going Down 
... 
2014-05-07T12:51:13: Information: I-UNK-000-000: :::: 


CAUSE
At SUSE11 rpcbind is used instead of portmap leading to no portmap as default, it has to be sourced and installed, 


ENVIRONMENT
SUSE11, Omnibus 7.4 and EIF probe V13



DIAGNOSING THE PROBLEM
Apart from the EIF not starting, and a receiving EIF application showing an example of a .conf file commonly seen in a sending EIF product in the debug log, doing a rpm -q portmap will not show the product as being installed, ps aux | grep portmap will not show a running portmap process.



RESOLVING THE PROBLEM
Installed portmap which for my SUSE11 64bit system came in portmap-6.0+git20070716-31.16.x86_64.rpm 

Then had problems starting portmap by service portmap start, kept saying 111/udp address already in use, finally grep 111/udp /etc/services showed rpcbind against it, did service rpcbind stop and then service portmap start worked fine, service rpcbind start restarted rpcbind OK. 

ps aux | grep portmap showed /sbin/portmap running, the eif probe would now start while having PortMapper='true' set. 

A confirm test for this would be to send an event with no port specified, the following will do that; 

posteifmsg -S sles11-64 -m "Random text" -r CRITICAL EVENT EVENT and seeing that event in the eif debug log.