Title: IBM PK16700; 6.0.2.7, 6.0.2.9: Resource conflict between resource adapter instances - United States

Text:
PK16700; PK16700; PK16700 DOWNLOADABLE FILES

ABSTRACT
 WebSphereÂ® Application Server allows for more than one instance of a Resource Adapter if the instances use different classloaders. Certain Resource Adapters may be intolerant. 

DOWNLOAD DESCRIPTION
PK16700 resolves the following problem: ERROR DESCRIPTION: For reasons of performance and high availability, WebSphere Application Server will start an instance of a given Resource Adapter to do recovery of in-doubt transactions in parallel with starting the normal runtime instance of the Resource Adapter. Some Resource Adapters may have conflicts between the RA instances because both instances try to use the same resource. For example, java.net.BindException could occur if both instances try to open the same Socket. LOCAL FIX: None PROBLEM SUMMARY USERS AFFECTED: WebSphere Application Server users who use JCA Resource Adapters other than the built-in Relational Resource Adapter PROBLEM DESCRIPTION: WebSphere Application Server allows for more than one instance of a Resource Adapter if the instances use different classloaders. Certain Resource Adapters may be intolerant of this, for example if each instance requires exclusive use of some resource. RECOMMENDATION: None The JCA 1.5 specification (sections 5.3.1 and 12.5.2) has an ambiguity regarding what it means to have only a single instance of a Resource Adapter Java Bean within a server JVM. Under one interpretation of the spec, one might assume that more than one instance is never allowed. Under the other interpretation, there are specific circumstances where more than one instance of a Resource Adapter is allowed. WebSphere's implementation does allow for more than one "equal" instance of a Resource Adapter (as determined by the Resource Adapter's equals() method) providing that the instances are in different classloaders. Some Resource Adapter implementations may interpret the specification to mean that this is not allowed. When this type of Resource Adapter runs in WebSphere, it may fail under certain conditions. The manifestation of such a failure is very dependent on the Resource Adapter implementation supplied by the Resource Adapter provider. One common example observed is where a Resource Adapter instance requires exclusive use of a resource (for example, an inbound Adapter may need to exclusively listen on a particular port or an exception will be thrown when the second instance tries to listen on the port). For this example, the resource is XA capable and has suffered a server crash. Upon restarting the server, XA recovery, which happens concurrently, will create one instance of the Resource Adapter and the server will create another instance for use by applications. If the Resource Adapter cannot tolerate this condition an error will result. Other potential problems would be dependent on the Resource Adapter implementation. The Resource Adapter provider will be in the best position to know if this condition affects them. The WebSphere built-in Resource Adapters are not subject to problems with multiple instances. PROBLEM CONCLUSION: This fix provides an alternate Application Server JCA implementation which can be configured to work with the "multi-instance intolerant" interpretation of the JCA Spec. If you need this fix for a particular Resource Adapter, be aware that you will need to enable the fix on a per Resource Adapter basis. This alternate implementation will be slower when starting servers or performing recovery for the affected Resource Adapters. Do not enable this for Resource Adapters that don't need it. Certain existing configurations that currently work might not work if you enable this single instance behavior. For additional detail about the fix and about enabling the alternate behavior, please refer to the technote at http://www-1.ibm.com/support/docview.wss?&uid=swg21227594 The fix for this APAR is currently targeted for inclusion in fixpack 6.0.2.7. Please refer to the Recommended Updates page for delivery information: http://www.ibm.com/support/docview.wss?rs=180&uid=swg27004980

PREREQUISITES
Please download the UpdateInstaller below to install this fix.

URL LANGUAGE SIZE(Bytes) UpdateInstaller [http://www.ibm.com/support/docview.wss?rs=180&uid=swg21205991] US English 7250000 
INSTALLATION INSTRUCTIONS
Please review the readme.txt for detailed installation instructions.

URL LANGUAGE SIZE(Bytes) Readme [ftp://public.dhe.ibm.com/software/websphere/appserv/support/fixes/PK16700/readme.txt] US English 8019 
DOWNLOAD PACKAGE


Download RELEASE DATE LANGUAGE SIZE(Bytes) Download Options 
What is DD? [http://www6.software.ibm.com/dldirector/doc/DDfaq_en.html] 6.0.2.7-WS-WAS-IFPK16700 05-04-2006 US English 85706 FTP [ftp://public.dhe.ibm.com/software/websphere/appserv/support/fixes/PK16700/6.0.2.7-WS-WAS-IFPK16700.pak] DD 6.0.2.9-WS-WAS-IFPK16700.pak 5/5/2006 US English 85706 FTP [ftp://public.dhe.ibm.com/software/websphere/appserv/support/fixes/PK16700/6.0.2.9-WS-WAS-IFPK16700.pak] DD 
TECHNICAL SUPPORT
 Contact IBM Support using SR (http://www-306.ibm.com/software/support/probsub.html [http://www-306.ibm.com/software/support/probsub.html]), visit the WebSphere Application Server Support Web site (http://www.ibm.com/software/webservers/appserv/was/support/ [http://www.ibm.com/software/webservers/appserv/was/support/]), or contact 1-800-IBM-SERV(U.S. only). 

Cross Reference information Segment Product Component Platform Version Edition Application Servers Runtimes for Java Technology Java SDK Application Servers WebSphere Application Server for z/OS z/OS 6.0 
 [/support/docview.wss?uid=swg24012246&aid=1]Problems (APARS) fixed [/support/docview.wss?uid=swg24012246&aid=2]Problems (APARS) fixed
PK16700