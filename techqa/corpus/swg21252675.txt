Title: IBM MustGather: Crash or hang on UNIX - United States

Text:
MustGatherDocument must gather ui ui script debug unix crash core dump hang TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 This MustGather document shows you how to collect problem information for WebSphere® Transformation Extender (WTX) using the UI script on a UNIX® platform. You can collect problem information when your map or system experiences a crash or a hang. 

RESOLVING THE PROBLEM
The UI script can collect information for a crash or a hang. For a crash, the UI script collects information from the core file the crash produced. For a hang, the UI script collects information from the running process.
Once you have collected the UI results, you can submit them [http://www-1.ibm.com/support/docview.wss?rs=2320&uid=swg21243454] to WTX Technical Support. Do not submit UI results until you open a problem record [http://www-306.ibm.com/software/websphere/support/probsub.html] (PMR).


 * Installation
 * Before running UI script
 * Usage syntax
 * Output file
 * Examples
 * Special instructions for hangs
 * Download the UI script






Installation
 1. Place the ui script file in the <wtx_install_dir>/bin directory. Transfer the ui file using FTP ASCII transfer type. 
 2. Modify the permissions on the ui script file to include execute. 
 3. For WTX for Integration Servers and WebSphere® Message Broker (WMB) crashes, the UI can be placed in the WMB install /bin directory (../IBM/mqsi/<version>/bin/). 

Back to top

Before running UI script
 * If you are using the UI script against a running process, you must first log in as the user who started the process. 
 * The gdb (GNU Project Debugger) or dbx debugger must be installed for the UI script to work properly. The debugger must be available to and executable by the user running the UI script. 
 * Run the setup script from the <wtx_install_dir> before running the UI script.

Back to top

Usage syntax
ui <product> [{<core>|<pid>}] [OutputDirectory] 
Options Descriptions product * required
* name of the product executable -- launcher, ldirmon, lci, mercator/dstx/dtx/dtxcmdsv, merchttpd, java
* if product is java, specify the full path to the Java™ executable
* WTX for Integration Servers and WMB crashes use the WMB DataFlowEngine executable in the WMB bin directory core * optional
* name of core file produced by product
* include path if not in current directory
* default is core pid * optional
* process id of the hung product
* default is core OutputDirectory * optional
* you can specify a directory for the resulting output
* default is current directory
* can only be used if core or pid specified
* output is set of logs and is not archived or compressed Back to top



Output file
When you do not specify an output directory, the output file produced by the UI script is archived and compressed and has the following naming convention. 

DDMONYY@HHMM.SS_uilogs.tar.Z Back to top

Examples
 * Launcher core
 * Command Server core
 * Launcher hang
 * Java launcher
 * WTX - WMB core






Launcher core
A crash occurs in the Launcher. You find the core file in $DTX_TMP_DIR/launcher_1234 where 1234 is the process id that generated the crash. 

> cd <wtx_install_dir>
> . ./setup
> cd $DTX_TMP_DIR/launcher_1234
> ui launcher 
Alternatively, you can follow these commands. 

> cd <wtx_install_dir>
> . ./setup
> ui launcher $DTX_TMP_DIR/launcher_1234/core 
Command Server Core
A crash occurs in the Command Server when running a map. You find the core file in the map directory. 

> cd <wtx_install_dir>
> . ./setup
> ui dtx /usr/wtx/maps/core 
Launcher Hang
The Launcher is running but no data seems to be processing. You find that the process id for the launcher is 512501 (step 3). 

> cd <wtx_install_dir>
> . ./setup
> ps -ef | grep launcher
wtxuser 512501 1 0 Nov 10 - 2:41 /usr/wtx/bin/launcher...
> ui launcher 512501 
Java Launcher
The Java Launcher is running but no systems seem to be started or running. You find that process id for the Java launcher is 212955 (step 3). 

> cd <wtx_install_dir>
> . ./setup
> ps -afe | grep java
wtxuser 212955 1 0 Nov 09 - 5:12 /usr/java142/bin/java -DINS...
> ui /usr/java142/bin/java 212955 
WTX - WMB core
A core occurs running a WTX for Integration Servers with a WMB message flow using a WTX map. You find the core file in the map directory.(step 3). 

> cd <wtx_install_dir>
> . ./setup
> cd /opt/IBM/mqsi/x.x/bin [x.x equals version of WMB]
> ui DataFlowEngine [full path]/core Back to top

Special instructions for hangs
When reporting a hang in the Launcher or Java Launcher, run the UI script three times approximately a minute or two apart. 

Then, run the UNIX command kill -6 <pid> where the pid is the process id used for the UI script. The kill command should produce a core dump. If no core is produced, try the command a few times. 

If a core is produced, run the UI script on the core. 

If no core is produced, run kill -9 <pid> to kill the process. It is not necessary to run the UI against a core produced by a kill -9. 
Back to top


Disclaimers for the UI script
This UI script is provided by the WebSphere Transformation Extender support group to facilitate the gathering of documentation for your problem. This script is provided as is. If you encounter a problem you should contact WTX Support via 1-800-IBM-SERV. 

Download Size (bytes) Download options ui script 38504 FTP [ftp://public.dhe.ibm.com/software/websphere/wtx/ui] 
Note: The FTP link will forward you to the ui script contents. To save the ui script as a file, right click on the FTP link and choose the Save Link As (Firefox®) or Save Target As (Windows® Internet Explorer) menu option. If you use another internet browser, consult your documentation for the appropriate steps. Back to top

 

PRODUCT ALIAS/SYNONYM
 Ascential DataStage TX Mercator