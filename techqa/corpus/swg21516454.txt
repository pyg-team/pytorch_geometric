Title: IBM P8 Content Consistency Checker projected duration & performance - United States

Text:
Consistency Checker; Projected Duration; Content Consistency Checker TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 Executing a content consistency check against a file storage area can result in a projected duration estimate of several days or even weeks. 

SYMPTOM
Execute the P8 Content Consistency Check tool against a file storage area, after the consistency check has run for a short period of time (to gauge performance) the time estimated to complete the consistency check is displayed in the "Projected Duration" field of the "Validate Storage Areas" dialog.


CAUSE
Many factors including: 

 a) storage area content element volume
b) system hardware
c) Content Engine, file subsystem and network load.

Ultimately each content element must be checked on the file system, therefore the performance can be severely constrained by a file system i/o bottleneck.


RESOLVING THE PROBLEM
If the projected duration for a storage area is unacceptably long, one or more of the following recommendations can be used to reduce the overall time of completing the consistency check: 


1) The options dialog for the tool includes the ability to specify a range of elements to check based on the document's create or last modified date. So you can run several instances of the Consistency Checker tool on separate date ranges in parallel. However, there is overhead associated with each additional instance of the tool, so it will not scale directly and the performance of the P8 Content Engine server as well as the network and storage subsystem will be a limiting factor. The user will need to experiment on their system to determine the maximum number of instances of the tool that can be run in parallel balanced with the CPU usage and file i/o performance. 

Determining the date ranges can be achieved by querying the document version table to determine the total date range of all elements then dividing that range into smaller ranges, determining the number of ranges to use may take some experimentation.

P8 Dashboard can be used to help identify performance bottlenecks in the environment (disk i/o for instance) which may be impacting the consistency checker tool.

2) Run the consistency check during off hours (e.g. nights/weekends) or whenever the P8 Content Engine server and the underlying storage subsystem usage is at its lowest and more users are off-line. A consistency check can be paused/resumed using the Start and Stop buttons to allow execution only during off-peak hours.

3) Install/run the Consistency Checker client tool on the same physical machine as the P8 Content Engine server - this will increase performance some by eliminating the network overhead.

4) The consistency checker will complete faster when fewer errors need to be reported. Taking some steps to verify the integrity of data in the storage area before running Consistency Checker can therefore help improve performance. This may include verifying that data was correctly restored from backup, or completely copied from a source to destination file system. If errors are discovered while running consistency checker, prompt action may help reduce further occurrences of errors. For instance, if part of the directory structure was not correctly moved between file systems, or if a fixed content device is not accessible, large numbers of errors may slow down the check, so correcting those problems up front can improve overall performance.