Title: IBM SPUs only have ping response to IP addresses, but hot for hostname - United States

Text:
 TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 During the NPS upgrade or FDT firmware upgrade, the update script might fail due to no responding from SPUs. 

SYMPTOM
 

1. From the log message of NPS upgrade, user might receive following error messages regarding non-responding of SPUs. 

 NPS upgrade log:
ERROR: Failed to get SPU status:
SPA 01 slot 03: not responding
SPA 01 slot 13: not responding
FDT firmware update debug log:
DB 1: Blade.pm::wait_for_blade_boot - Wait for fully-booted failed for spu <spu0101>!
DB 2: Blade.pm::wait_for_blade_boot - -- Failed to ping spu <spu0101>.

2. User still can get the ping response from the IP address of SPU, but not from host name of SPU.

3. When user use nslookup command, he/she can resolve the hostname of SPU to IP address correctly.

4. The /var/lib/dnsmasq/dnsmasq.leases file has correct access permission. In this file, each SPU has been assigned correct IP address.

5. Restarting the dnsmasq and nzresolve service doesn't help much.


CAUSE
If the nscd service is enable on customer's system, it might impact the function gethostbyname() and cause non-responsive for the ping command. 


RESOLVING THE PROBLEM
 

The work around is to stop the nscd service and user should be able to get the ping response by the hostname of SPU.
#service nscd stop 
#service dnsmasq restart 
#service nfs restart 

#ping spu0101


If stop nscd service doesn't work, please edit /etc/hosts and copy the IP addresses of SPUs temporarily, proceed the upgrade, and remove them after completing upgrade task.