Title: IBM FileNet Content Engine Object Store upgrade failure - United States

Text:
 TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 When you try to upgrade IBM Content Engine From 4.5.1.x to 5.2.1.x,, you might run into issues. 

SYMPTOM
CPE Upgrade fails.


CAUSE
This happens when object store may contain unresolved entries or object is still referencing IS related object that might not exist.



ENVIRONMENT
FileNet P8 Platform Content Engine

DIAGNOSING THE PROBLEM
While upgrading CPE From 4.5.1.x to 5.2.1.x,, you might get the following error :

All IS FCD were removed prior to GCD export for the upgrade.
Exception encountered with upgrader task, attempt #0 com.filenet.api.exception.EngineRuntimeException: FNRCI0067E: IS_ISR_NOT_CREATED: The Image Services Repository must be created for each IS FCD. The Image Services Repository has not been created for Fixed Content Device {A485EF36-4801-4FD5-9097-5D72B7590EBB}. at com.filenet.engine.upgrade. ReplicationUpgrader.getIsrId(ReplicationUpgrader.java:766) at com.filenet.engine.upgrade.ReplicationUpgrader.createRgAndAddTuple(ReplicationUpgrader.java:709) at com.filenet.engine.upgrade.ReplicationUpgrader.replicationUpgrade(ReplicationUpgrader.java:276) at com.filenet.engine.upgrade.ReplicationUpgrader.doUpgrade (ReplicationUpgrader.java:147) at com.filenet.engine.upgrade. UpgraderTask.execute(UpgraderTask.java:155) at com.filenet.engine.tasks. 
BackgroundTask.safeExecute(BackgroundTask.java:258) at com.filenet. engine.tasks.BackgroundTask$BackgroundTaskPriviledgedExceptionAction.run(BackgroundTask.java:1090) at com.filenet.engine.context.CallState.doAsSystem(CallState.java:549) at com.filenet.engine.tasks.BackgroundTask.runBackgroundTask.java:210) at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:895) at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:918) at java.lang.Thread.run(Thread.java:790)

RESOLVING THE PROBLEM
1. Search at database level to see how many rows in generic table are there: 
For Example: Select count(*), u13_ismappingobjectname from generic group by u13_ismappingobjectname 

If you see any rows found in the GENERIC table where the u24_ismappingobjectname = IS Mapping Object then you have to delete the entries by following the following steps:
- Backup the object store database
- Stop the Content Engine WebSphere server instance
- Delete the row with the u23_ismappingobjectname = IS Mapping Object:
delete from GENERIC where object_id = 'xxxxxxxxxx'
- Restart the Content Engine WebSphere server instance
- Verify the update.

This should resolve the issue.




Cross reference information Segment Product Component Platform Version Edition Enterprise Content Management FileNet P8 Platform