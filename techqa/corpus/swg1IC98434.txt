Title: IBM IC98434: REGISTRY SETTINGS NEEDED FOR RETRY/SLEEP VALUES WHEN OPENING ATTACHMENT FILE IN MAILBOX SERVICE - United States

Text:
 SUBSCRIBE TO THIS APAR
By subscribing, you receive periodic emails alerting you to the status of the APAR, along with a link to the fix after it becomes available. You can track this item individually or track all items by product.

Notify me when this APAR changes.

Notify me when an APAR for this component changes.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  Registry settings needed for retry/sleep values when opening
   attachment file in Mailbox service
   
   
    
   
   

LOCAL FIX
 *  STRRTC - 406001
   AE / AE
   Circumvention: None
   
   
    
   
   

PROBLEM SUMMARY
 *  Customer for RTC#396640 has requested registry settings for the
   retry & sleep values that are used in the
   OpenAttachmentStream function in Mercury.exe.  When Archive
   calls that function during mailbox archive it can currently take
   up
   to 50 seconds (5 retries with 10 seconds sleep between each
   retry) before the function returns with an error (for either
   locked
   or missing file).  This also affect the Mailbox UI since it uses
   the same function to open attachments.  However, no error
   is displayed in the Mailbox UI if the attachment can't be
   opened.
   
   
    
   
   

PROBLEM CONCLUSION
 *  The Mailbox UI will now display a popup error if the attachment
   file cannot be displayed.  The following fixes
   in the Mailbox service affect Archive and the Mailbox UI:
   
   1) New registry settings created automatically for the
   retry/sleep values used in Mercury.exe when opening an
   attachment file
   
   reg key: HKEY_LOCAL_MACHINE\SOFTWARE\Sterling
   Commerce\GENTRAN\Mailbox\5.3.1\Server
   value name: MailboxFileRetry
   default value: 5
   value name: MailboxFileSleep
   default value: 10000 (ms)
   
   2) If an attachment file open error happens, check to see if the
   file exists before doing any sleep/retry.  Write a new audit
   error (2-1-1087) and quit immediately if file is missing.
   
     2-1-1087: OpenAttachmentStream failed for attachment Id(41),
   message Id(36). Attachment file is missing:
     C:\GENSRVNT\Store\#2013\12\12\14\41.ATM
   
   Otherwise, if the file exists, write a new audit message for
   each retry attempt (2-1-1088) and when the max retries have been
   exceeded (2-1-1089).
   
     2-1-1088: OpenAttachmentStream failed for attachment Id(41),
   message Id(36). Attempt #5. Could not open file:
     C:\GENSRVNT\Store\#2013\12\12\14\41.ATM
   
     2-1-1089: OpenAttachmentStream failed for attachment Id(41),
   message Id(36). Maximum retries exceeded. Could not open file:
     C:\GENSRVNT\Store\#2013\12\12\14\41.ATM
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   IC98434
   
   
 * REPORTED COMPONENT NAME
   STR GENTRAN MS
   
   
 * REPORTED COMPONENT ID
   5725D0903
   
   
 * REPORTED RELEASE
   531
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2013-12-19
   
   
 * CLOSED DATE
   2014-01-09
   
   
 * LAST MODIFIED DATE
   2014-01-09
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   STR GENTRAN MS
   
   
 * FIXED COMPONENT ID
   5725D0903
   
   

APPLICABLE COMPONENT LEVELS
 * R531 PSY
   UP