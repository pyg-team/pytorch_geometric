Title: IBM FileNet Application Engine (Workplace) or FileNet Workplace XT Site Preferences lost resulting in default Site Preferences being used. - United States

Text:
site preferences lost default TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 Site Preferences appear to be lost because users do not see the correct preferences that have been configured. The behavior suggests the default site preferences are being used. 

SYMPTOM
This problem is intermittent and temporary. After a while, the real site preferences take effect again. 


CAUSE
This problem can occur if the Application Engine (AE) server or Workplace XT server intermittently lose the ability to retrieve the real site preferences XML file from the Content Engine (CE) server. This occurs when there is some kind of connectivity issue between the two servers. When this occurs, workplace will use the default copy stored on the AE/XT server. The interval at which AE/XT performs a retrieval/refresh of the Site Preferences file on the CE server is 20 minutes. When this problem occurs, the real Site Preferences are often restored on their own after this interval because the AE/XT application can then get the Site Preferences file from the CE. This 20 minute Site Preferences refresh interval is set internally and cannot be modified.

RESOLVING THE PROBLEM
The problem can be resolved by doing the following:


 1. Log into Workplace or Workplace XT as a user that has access to Site Preferences.
    
    
 2. Retrieve/access the Site Preferences in Workplace or Workplace XT.
    
    
 3. Click the Refresh link in Site Preferences.
    
    
 4. Click Reload configuration files.


Note: To prevent problems for users resulting from the default site preferences being loaded, it is possible to replace the default site preferences on the AE/XT server with a copy of the customized site preferences file stored in the CE server. This would ensure that a good copy of the file is always read even when Workplace or Workplace XT can't get to the site preferences file in the CE. 

If the site preferences file doesn't change frequently, putting a copy of the file stored in the CE in place of the default copy on the AE/XT server may be a valid and useful work-around to this problem. If the site preferences are constantly changing, the copy on the AE/XT server would need to be updated somehow to stay synchronized with the real file in the CE. 

The default site preferences file for workplace on the AE server in the Workplace\WEB-INF\xml directory and it is called SitePreferences.xml. For Workplace XT, the file name is the same name and is located in the WebClient\WorkplaceXT\WEB-INF\xml folder. The real site preferences file is stored in the Preferences folder within the CE object store that Workplace or Workplace XT is bootstrapped to. Go to the Bootstrap link in Site Preferences to determine which object store contains the Site Preferences file. Once you find the Site Preferences file using P8 Enterprise Manager, go to the Properties of the document and select the Content Elements tab to save a copy of the XML content. The resulting XML file can be renamed SitePreferences.xml and placed in the location above on the AE or XT server. 

Please note that the directory referenced above is the location where the Workplace or Workplace XT software is installed. If the site preferences file is updated as described above, the best practice is to update the file in the installed location, then rebuild the .war or.ear file for the application and redeploy the application. Doing this will ensure the file is updated in both the installed location and the deployed location so that if the application is re-deployed for other reasons, the deployed software will have the desired site preferences file. Also, if a fix pack is installed, the updated site preferences file should be backed up prior to installing the fix pack and then put back in place in the installed location so the updated site preferences file is deployed correctly after installing the fix pack.