Title: IBM PM89104: DEPLOY-PAA FAILS IN VP IN IMPORT-WCM-DATA - United States

Text:
  A FIX IS AVAILABLE
Fixes integrated in WebSphere Portal 8.0.0.1 Combined Cumulative Fixes [http://www-01.ibm.com/support/docview.wss?uid=swg24034497]


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  The IBM Web Content Manager (WCM) Library cannot be removed
   because the library is locked.  Therefore, it cannot be deleted
   before installing a newer version during the deployment phase.
   
   deploy-paa for initial content deploy fails in a new virtual
   portal on target portal during import-wcm-data. The failure
   appears to occur because the root node already exists in the
   portal site library in the VP.
   
   From ConfigTrace.log:
   [ConfigModuleClient] Failed to complete:
   com.aptrix.pluto.util.RepositoryException: Message: Failed to
   import the directory "...".
   Error message: Message:
   com.ibm.icm.jcr.command.CommandException: SER3009E: Import of
   one or more files failed., Cause:
   com.ibm.icm.jcr.command.CommandException:
   SER3009E: Import of one or more files failed.,
   ...
   Caused by: Status returned 500: Internal server error
   at
   com.ibm.workplace.wcm.maintenance.module.ConfigModuleClient.chec
   kRespons
   e(ConfigModuleClient.java:263)
   ...
   Target finished: import-wcm-data
   
        [echo] EJPCE0122E: Error importing WCM library portal site
   ...
   [echo] [si-deploy-paa-content] EJPCE0016E: Task has failed to
   complete
   with the following arguements:
   ...
   BUILD FAILED
   
   SystemOut.log contains:
   AbstractSysVi E   SER3032E: Invalid
   XML.
   
                                    javax.jcr.ItemExistsException:
   RT7028E: A node or property already exists at path:
   /contentRoot/icm:libraries[...
   
   
   Opened for release 8001
   
   
    
   
   

LOCAL FIX
 *  Manually delete the library, after first unlocking the library
   with a wsadmin command.
   
   Steps to delete the "Portal Site" library in the VP:
   1.  Start a Scripted Administration session:
    cd <path_to_profile>/wp_profile/PortalServer/bin
    ./wpscript.sh -username <admin-id> -password <admin-password>
   
   2.  Set the virtual portal as the active context:
    $Portal setvp <virtual_portal_context_root>
   
   3. Login to the Virtual Portal:
    $Portal login <admin-id> <admin-password>
   
   4. List the current libraries to make sure you are in the vp:
    $DocumentLibrary listall
   
   The Virtual Portal should look like this
   wsadmin>$DocumentLibrary listall
   "portal site"
   
   5. Make the "portal Site" library deletable:
   $DocumentLibrary set "portal site" deletionprohibited false
   
   6. Delete the "portal site" library:
    $DocumentLibrary delete "portal site"
   
   7. Exit the scripting client
   
   
    
   
   

PROBLEM SUMMARY
 *  WCM Library can not be removed as the library is locked.
   Therefore can not be deleted before installing a newer version
   during the deployment phase. deploy-paa for initial content
   deploy fails in new VP on target portal during import-wcm-data.
   The failure appears to occur because the root node already
   exists in the portal site library in the VP.
   Opened for release 8001
   
   
    
   
   

PROBLEM CONCLUSION
 *  A code fix for this issue is integrated into the 8.0.0.1
   Combined Cumulative Fix 006 (PM88093 [http://www-01.ibm.com/support/docview.wss?uid=swg1PM88093])
   
   http://www-933.ibm.com/support/fixcentral/swg/selectFixes?parent
   =ibm~WebSphere&product=ibm/WebSphere/WebSphere+Portal&release=8 [http://www-933.ibm.com/support/fixcentral/swg/selectFixes?parent=ibm~WebSphere&product=ibm/WebSphere/WebSphere+Portal&release=8]
   .0.0.0&platform=All&function=aparId&apars=PM88093
   
   You might need to type or paste the complete address into your
   Web browser.
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   PM89104
   
   
 * REPORTED COMPONENT NAME
   WEBSPHERE PORTA
   
   
 * REPORTED COMPONENT ID
   5724E7600
   
   
 * REPORTED RELEASE
   800
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2013-05-15
   
   
 * CLOSED DATE
   2013-07-08
   
   
 * LAST MODIFIED DATE
   2013-07-08
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   WEBSPHERE PORTA
   
   
 * FIXED COMPONENT ID
   5724E7600
   
   

APPLICABLE COMPONENT LEVELS
 * R800 PSY
   UP