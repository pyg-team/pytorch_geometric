Title: IBM Collecting Data: Session Management for WebSphere Portal 6.1 - United States

Text:
mustgatherdocument; mustgather; mustgather; mustgather; PORTSE; session management; session; engine; timeout; validation; MustGatherDocument RECOMMENDED RESOURCES

ABSTRACT
 Collecting data for Session Management with IBM WebSphere Portal 6.1. Gathering this information before contacting IBM Support will help to understand the problem and save time analyzing the data. 

CONTENT
If you already contacted IBM Support and must collect data to determine the nature of a problem in WebSphere Portal, review the information below regarding data collection. Otherwise, review Collecting Data: Read first for WebSphere Portal [http://www.ibm.com/support/docview.wss?rs=688&uid=swg21312740]. 

Collecting Session Management information
Session management issues typically involve session creation, validation, or timeout.

Note: To improve Support's analysis of the server tracing, collect and submit HTTP header logging during reproduction of the issue using a tool such as Fiddler [http://www.fiddlertool.com/fiddler/]. Support can then correlate the client requests with the server tracing to ensure proper focus.


Automated collection of troubleshooting data Automated log collection is available for this MustGather information and is the recommended method for improving accuracy of the data collection.

IBM Support Assistant Lite
Download Tool [http://www.ibm.com/support/docview.wss?rs=688&ca=portall2&uid=swg24008662] | View Demo of Trace Collection [http://www-10.lotus.com/ldd/portalwiki.nsf/dx/isalite-fundamentals-version-1.3.3-for-ibm-websphere-portal]

After downloading IBM Support Assistant Lite, perform the following steps to collect the data and send to IBM Support: 

1. Extract the contents of the downloaded file to the <wp_profile_root>\PortalServer directory, which will create the subdirectory "ISALite" (e.g. c:\WebSphere\wp_profile\PortalServer\ISALite). 

2. Run the runISALite.bat file (Windows) or runISALite.sh (UNIX or Linux) from the ISALite directory (e.g. c:\WebSphere\wp_profile\PortalServer\ISALite\runISALite.bat). 

3. Once the tools starts, select the following Problem Type: WebSphere Portal->General->Portal Session Problem. 

4. Provide the output path and a file name of "<PMR #>.isalite.zip" (e.g. 22222,111,000.isalite.zip). 

5. Click Collect Data and follow the series of dialog boxes to set the tracing, reproduce the issue, and send the files to IBM Support. 




Manual collection of troubleshooting data If you are unable to use IBM Support Assistant Lite for automatic log collection, use the following instructions for manually collecting the necessary information.

I. Enabling trace logging 

Enable tracing during problem recreation in order to investigate the specific behavior of the component(s). Choose to enable either static or dynamic tracing and proceed with the steps accordingly. For further information regarding logging and tracing in the portal, refer to the Logging and Tracing [http://publib.boulder.ibm.com/infocenter/wpdoc/v6r1m0/index.jsp?topic=/com.ibm.wp.ent.doc/trouble/pd_intr_logs.html] topic in the WebSphere Portal 6.1 Information Center. 

Option A: Enabling static (extended) tracing
Static tracing is the recommended method of capturing data, as it collects data from server startup until problem recreation. 

1. Log into the Integrated Solutions Console as the WebSphere Application Server administrator. 

2. Click Troubleshooting->Logs and Trace->WebSphere_Portal->Diagnostic Trace. 

3. On the Configuration tab, ensure Enable Log is selected. On this same tab, ensure you increase the Maximum File Size and and Maximum Number of Historical Files as needed to ensure that the tracing of the problem recreation is not overwritten due to the amount of traffic on the system and output of the tracing itself. 

4. Click Change Log Level Details and enter the following trace string based on your version of WebSphere Application Server (WAS): 

WAS 6.1
*=info:com.ibm.wps.engine.*=all:com.ibm.wps.auth.*=all:
com.ibm.wps.state.services.SessionSuspendResumeServiceImpl=all:
com.ibm.ws.webcontainer.httpsession.*=all:
com.ibm.ws.webcontainer.srt.*=all

WAS 7.0
*=info:com.ibm.wps.engine.*=all:com.ibm.wps.auth.*=all:
com.ibm.wps.state.services.SessionSuspendResumeServiceImpl=all:
com.ibm.ws.session.*=all:com.ibm.ws.webcontainer.srt.*=all

5. Click OK and save the changes.
6. Restart the WebSphere_Portal application server.

Option B: Enabling dynamic tracing
Dynamic tracing can be used for situations that do not permit a server restart. 

1. Log in as the Portal administrator. 

2. Click Administration->Portal Analysis->Enable Tracing. The Enable Tracing portlet appears. 

3. Type the required trace string based on your version of WebSphere Application Server (WAS) into the field Append these trace settings: 

WAS 6.1
*=info:com.ibm.wps.engine.*=all:com.ibm.wps.auth.*=all:
com.ibm.wps.state.services.SessionSuspendResumeServiceImpl=all:
com.ibm.ws.webcontainer.httpsession.*=all:
com.ibm.ws.webcontainer.srt.*=all

WAS 7.0
*=info:com.ibm.wps.engine.*=all:com.ibm.wps.auth.*=all:
com.ibm.wps.state.services.SessionSuspendResumeServiceImpl=all:
com.ibm.ws.session.*=all:com.ibm.ws.webcontainer.srt.*=all

4. Click the Add icon. Enable Tracing updates the field Current trace settings.

Note: Restarting WebSphere Portal will remove traces that were set by using the Enable Tracing Administration portlet.

II. Collecting and submitting logs and configuration data 

1. Reproduce the problem and immediately copy (if possible) the trace logs to prevent rolling over. Confirm that the timestamp for the issue is included in the trace logs, and then collect the following information for review: 

 * Step-by-step details of test case including screenshots, user ID, and approximate timestamps 
 * <WP_profile_root>/logs/WebSphere_Portal/SystemOut.log 
 * <WP_profile_root>/logs/WebSphere_Portal/SystemErr.log 
 * <WP_profile_root>/logs/WebSphere_Portal/trace.log (s) 
 * <WP_profile_root>/PortalServer/log/VersionInfo.log 
 * <WP_profile_root>/config/cells/<cellname>/security.xml 
 * <WP_profile_root>/config/cells/<cellname>/nodes/<nodename>/servers/WebSphere_Portal/resources.xml (located in /clusters/<cluster_name> for clustered server) 
 * <WP_profile_root>/config/cells/<cellname>/nodes/<nodename>/servers/WebSphere_Portal/server.xml 
 * HTTP header logging from browser


2. Send files to IBM Support by using the instructions outlined in Exchanging information with IBM Technical Support for problem determination [http://www.ibm.com/support/docview.wss?rs=688&uid=swg21201571]. 

Note: When sending in logs for review, include any relevant screenshots, timestamps, userIds, etc. in order to expedite analysis of the issue.  

Related Information  * Overview: WebSphere Portal Support [http://www.ibm.com/software/genservers/portal/support/] [http://www.ibm.com/support/docview.wss?rs=688&uid=swg21201571] 
 * Steps to getting support for WebSphere Portal [http://www.ibm.com/developerworks/websphere/zones/portal/support/portal_support.html] 
 * Collecting Data: Read first for WebSphere Portal [http://www.ibm.com/support/docview.wss?rs=688&uid=swg21312740]