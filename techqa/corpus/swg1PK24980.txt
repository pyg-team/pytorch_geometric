Title: IBM PK24980: WEBSPHERE WILL INTERPRET -906 SQLCODE TO A STALECONNECTIONEXCEPTION. - United States

Text:
z/os  FIXES ARE AVAILABLE
6.1.0.1: WebSphere Application Server V6.1.0 Fix Pack 1 for HP-UX [http://www-01.ibm.com/support/docview.wss?uid=swg24012899]
6.1.0.1: WebSphere Application Server V6.1.0 Fix Pack 1 for AIX [http://www-01.ibm.com/support/docview.wss?uid=swg24012944]
6.1.0.1: WebSphere Application Server V6.1.0 Fix Pack 1 for Windows [http://www-01.ibm.com/support/docview.wss?uid=swg24012919]
6.1.0.1: WebSphere Application Server V6.1.0 Fix Pack 1 for Linux [http://www-01.ibm.com/support/docview.wss?uid=swg24012900]
6.1.0.1: WebSphere Application Server V6.1.0 Fix Pack 1 for i5/OS [http://www-01.ibm.com/support/docview.wss?uid=swg24012945]
Obtain the fix for this APAR.


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  WebSphere's handling of DB2 SQLCODE -906 will be changed to
   
   
    
   
   

LOCAL FIX
 *  You can use a helper support that allows you to define this
   
   
    
   
   

PROBLEM SUMMARY
 *  ****************************************************************
   * USERS AFFECTED: All users of WebSphere Application Server    *
   *                 V6.1.0 for z/OS                              *
   ****************************************************************
   * PROBLEM DESCRIPTION: Once an application using a DB2         *
   *                      connection receives SQLCODE -906        *
   *                      error, it keeps receiving the error     *
   *                      each time the connection is used        *
   *                      again. This happens because SQLCODE     *
   *                      -906 is not converted to                *
   *                      StaleConnectionException, which would   *
   *                      cause the connection to be cleaned up   *
   *                      and allow the application to recover.   *
   ****************************************************************
   * RECOMMENDATION:                                              *
   ****************************************************************
   SQLCODE -906 indicates that execution of the SQL statement
   failed because the requested function had been disabled by a
   prior error. All subsequent attempts by the application to
   execute other SQL statements will also fail with the same
   return code. Currently, however, SQLCODE -906 is not mapped by
   WebSphere Application Server to a StaleConnectionException
   to prevent reusing it to execute other SQL statements, which
   causes repeating SQLCODE -906 errors.
   
   
    
   
   

PROBLEM CONCLUSION
 *  SQLCODE -906 will be mapped to a StaleConnectionException to
   cause a purge of the connection receiving the error.
   
   APAR PK24980 is currently targeted for inclusion in Service
   Level (Fix Pack) 6.1.0.1 of WebSphere Application Server V6.1.0
   for z/OS.
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   PK24980
   
   
 * REPORTED COMPONENT NAME
   WEBSPHERE FOR Z
   
   
 * REPORTED COMPONENT ID
   5655I3500
   
   
 * REPORTED RELEASE
   610
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2006-05-15
   
   
 * CLOSED DATE
   2006-07-25
   
   
 * LAST MODIFIED DATE
   2006-09-05
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
    PK24924
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
    PK29234
   
   

MODULES/MACROS
 *  BBGUBINF BBOUBINF
   
   
    
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   WEBSPHERE FOR Z
   
   
 * FIXED COMPONENT ID
   5655I3500
   
   

APPLICABLE COMPONENT LEVELS
 * R610 PSY UK16574 [HTTPS://WWW14.SOFTWARE.IBM.COM/WEBAPP/SET2/ORDERMEDIA/SHOPCART?PTFS=UK16574]
   UP06/08/08 P F608
   
   

FIX IS AVAILABLE
 * SELECT THE PTF APPROPRIATE FOR YOUR COMPONENT LEVEL. YOU WILL BE REQUIRED TO SIGN IN. DISTRIBUTION ON PHYSICAL MEDIA IS NOT AVAILABLE IN ALL COUNTRIES.