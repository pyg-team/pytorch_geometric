Title: IBM DataPowerがWebGUI及びXML Management Interfaceにおいてデフォルトで使用している証明書が2013年6月6日に失効します。 - United States

Text:
 技術情報(FAQS)

質問
 DataPowerがWebGUI及びXML Management Interfaceにおいてデフォルトで使用している証明書が2013年6月6日に失効するため、以下のような症状が現れます。

①期限切れが近づくと警告メッセージがログに出力され、期限切れ以降も出力されます。
出力例)
01:02:03 cert-monitor warn 383 0x806000e1 cert-monitor (Certificate Monitor): Certificate 'system-ssl-ca-cert' is expired
01:02:03 cert-monitor warn 383 0x806000e1 cert-monitor (Certificate Monitor): Certificate 'system-cert' is expired

また、WebGUIIアクセス時に証明書の有効期限切れのメッセージが出力されます。

②6月6日以降、期限切れのサーバー証明書を許容しないSSLクライアントであれば、WebGUIやXML Management Interfaceに接続できなくなる。 

原因
DataPowerのマシン・タイプ 4195/9235(*1) において、ファームウェアのレベルを5.0.0.1未満をご使用の場合、
2013年6月6日に有効期限を迎える証明書が使用されている場合があります。

デフォルトでは、期限切れをむかえる証明書は、以下のSSL構成で使用されています。
- WebGUIのweb-mgmt サービス
- XML Management Interface
- 上記２つを利用する他のサービス(AMP, SOMAやWAMTを使用したツール)

※上記を使用していれば必ず障害が起こるわけではなく、期限切れの証明書を許容するかどうかはWDPの相手方に依存するため、期限切れ後も問題なく疎通できる場合もあります。

(*1)DataPowerのマシン・タイプ9235では、ファームウェア4.0.0.0以下のレベルは2013年9月30日をもってサポート終了となります。詳細は以下の文書をご参照ください。

-営業活動およびサービスの終了: IBM DataPower 9235 の一部モデルに対するファームウェア・サポート [http://www-01.ibm.com/common/ssi/ShowDoc.wss?docURL=/common/ssi/rep_ca/2/760/JAJPJG13-0112/index.html&lang=en&request_locale=jp]

-WebSphere DataPower SOA Appliance Firmware Support Lifecycle (英文) [http://www.ibm.com/support/docview.wss?uid=swg21246298]



回答
対応策： 

証明書の期限が切れた後に問題（上記症状の②）が起きた場合には、以下の2つの対応策のいずれかの対策をご検討ください。
※問題が起きなかった場合でも、製品としてデフォルトの証明書ではなく、お客様ご自身で構成された証明書の使用を推奨します。

①デフォルトの証明書をお客様固有の証明書に置き換えます。

- WebGUIの証明書の場合
Control Panel -> Network -> Management -> Web Management Service -> Advanced tab でお客様が使用する証明書が含まれるSSL Proxy Profileを設定します。

- XML Management Interfaceの証明書の場合
Control Panel -> Network -> Management -> XML Management Service -> Advanced tab でお客様が使用する証明書が含まれるSSL Proxy Profileを設定します。

SSL Proxy Profileの設定例は以下の文書をご参照してください。実働環境で試される際には、対応策により不測の事態に陥らないためにも、事前に製品マニュアルやお客様のご要件をご確認頂き、バックアップの取得や、検証機での手順の確認を頂くことをご検討ください。

参考情報：DataPowerでのSSLオフロード構成: Part 1「DataPowerでのSSL相互認証」 [http://www.ibm.com/developerworks/jp/websphere/library/esb/dtpw_ssloffloadgw/1.html]
"4. ステップ2： DataPower SSL構成の作成"をご参照いただき、サーバー鍵とサーバー証明書を含んだCrypto Identification Credentialsオブジェクトを作成し、それを内包したCrypt Profileオブジェクトを、さらに内包したSSL Proxy Profileオブジェクトを作成する手順になります。

②ファームウェアのレベルを5.0.0.1以降を適用します。

ファームウェアをアップデートすることで、デフォルトで使用される証明書の期限が更新されます。
予防保守の観点からは最新のレベルにすることを推奨します。

※ファームウェアのバージョンアップにより新しいRoot CAが使用されるようになる場合があります。その場合には、必要に応じてSSLクライアント側のtrust storeに新しいRoot CAを追加する必要が生じます。
SSL connection to XML Management Interface or WebGUI might fail
http://www.ibm.com/support/docview.wss?uid=swg24032998 [http://www.ibm.com/support/docview.wss?uid=swg24032998]

関連情報
#DataPower default WebGUI certificate is expiring or exp [http://www.ibm.com/support/docview.wss?uid=swg21633306]
Replacement of an expiring certificate on the IBM WebSp [http://www.ibm.com/support/docview.wss?uid=swg21500046]