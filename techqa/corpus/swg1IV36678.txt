Title: IBM IV36678: FILE WITH RETURN CODE 26, FILE BUSY IS NO LONGER MONITORED - United States

Text:
  A FIX IS AVAILABLE
Tivoli Log File Agent, Version 6.2.3.2 Interim Fix 07 6.2.3.2-TIV-ITM_LFA-IF0007 [http://www-01.ibm.com/support/docview.wss?uid=swg24038012]


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  The Log File Agent is monitoring a file on a mounted file
   system.  Once a day the file system is unmounted and copied.
   The file system is remounted and the log is created when a new
   entry is created.  There is a timing condition that happens
   where a return code 26, file busy is returned while the file
   system is unmounted and remounted.  The log file is no longer
   monitored after the error code is returned.  The log shows this:
   .
   
   (50F6C071.0001-14:kraaevst.cpp,678,"listSitStat") *STAT-INFO:
   *********************************************
   (50F811F1.0000-14:kraaevst.cpp,664,"listSitStat") *STAT-INFO:
   *************** Situation Statistics Fri Jan 18 00:00:01 2013
   (50F811F1.0001-14:kraaevst.cpp,678,"listSitStat") *STAT-INFO:
   *********************************************
   (50F8956B.0000-E:kumpwfrm.c,270,"KUMP_WaitFileReadyForMonitor")
   Opening file /s01az03p06/p/BAXX/log/latest/BAXX.log
   FILEEXISTWAIT=Y size 0
   (50F8956B.0001-E:kumpwfrm.c,321,"KUMP_WaitFileReadyForMonitor")
   ***  Unable to open file /s01az03p06/p/BAXX/log/latest/BAXX.log,
   Errno: 26, ErrorText: Text file busy, NO retry. Exiting
   (50F8956B.0002-E:kumpfdp5.c,342,"CheckFileExistAndReady") ***
   File /s01az03p06/p/BAXX/log/latest/BAXX.log -- initial
   monitoring setup
   failed(50F8956B.0003-E:kumpfile.c,1113,"KUMP_FileServer") >>>>>
   DP file server process ended for file
   /s01az03p06/p/BAXX/log/latest/BAXX.log last position 175
   current/last EOF 175/175. ThreadID: E
   .
   RECREATE INSTRUCTIONS:
   Attempted to recreate with a mounted file system.  This is a
   timing issue, and I was not able to recreate the problem.
   .
   Approver Initials: JW
   
   
    
   
   

LOCAL FIX
 *  The workaround for this problem is to create the monitored
   file after remounting the file system.
   
   
    
   
   

PROBLEM SUMMARY
 *  When monitoring a file on a mounted file system, there is a
   timing condition when opening the file where a return code 26,
   file busy is returned while the file system is un-mounted and
   remounted.  The log file is no longer monitored after the error
   code is returned.
   
   This problem was found on Log File Agent 6.2.3 FP1, but existed
   in prior releases.
   
   
    
   
   

PROBLEM CONCLUSION
 *  If a return code 26 (file busy) is returned when opening the
   file, the agent now wait and tries to open the file again.
   
   The fix for this APAR is included in the following maintenance
   vehicle:
   
      | interim fix | 6.2.3.2-TIV-ITM_LFA-IF0003
   
   available at
   http://www.ibm.com/support/docview.wss?uid=swg24034607 [http://www.ibm.com/support/docview.wss?uid=swg24034607]
   
   It is also included in Log File Agent, v6.3 (CIGM5ML).
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   IV36678
   
   
 * REPORTED COMPONENT NAME
   ITM LOG FILE AG
   
   
 * REPORTED COMPONENT ID
   5724C04LF
   
   
 * REPORTED RELEASE
   623
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2013-02-12
   
   
 * CLOSED DATE
   2013-03-28
   
   
 * LAST MODIFIED DATE
   2013-03-28
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   ITM LOG FILE AG
   
   
 * FIXED COMPONENT ID
   5724C04LF
   
   

APPLICABLE COMPONENT LEVELS
 * R623 PSY
   UP
   
   
 * R630 PSY
   UP