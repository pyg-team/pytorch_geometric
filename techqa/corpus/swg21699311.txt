Title: IBM Improving response times and eliminating deadlocks in the Sync database when the sync server is under load for a long period of time - United States

Text:
 TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 What can I do when I observe a deadlock error message in the ICN server log that is related to the SyncItems table when MSSQL server is used as the Sync database? 

What can I do when disk read waits accessing the SyncItems table cause slow response times when Oracle server is used as the Sync database?

What can I do when disk read waits accessing the SyncItems table cause slow response times when DB2 server is used as the Sync database? 

SYMPTOM
MSSQL Server:
When there are many sync activities occurring on the ICN/Sync server, the SQL database server may encounter deadlock issue on the SyncItems table inside the Sync database. A deadlock message of "Transaction (Process ID) was deadlocked on lock | communication buffer resources with another process and has been chosen as the deadlock victim." will be logged in the ICN server log. 

Oracle Server:
When the sync server is under load for a long period of time, the disk read queue on the Oracle database server may increase and the Oracle AWR reports may show indications of increasing disk read waits accessing the SyncItems table and index. Users may notice slower response times. 

IBM DB2 Server:
When the sync server is under load for a long period of time, end user may experience longer than expected response time for any Sync activities. System vitals, such as CPU and memory may look normal at the time of the slowness.


RESOLVING THE PROBLEM
To help resolve these symptoms, consider performing the following: 
· Add a composite non-clustered index on the OBJECTID and USERID columns (in that order) on the SyncItems table. Name the index I_SI_OID_UID, since future fix pack upgrades will not add the index I_SI_OID_UID if it already exists.
· Collect table and index statistic after the index is created to ensure all the statistics are up to date.