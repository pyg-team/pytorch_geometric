Title: IBM JR47431: The global transaction is not forced to rollback when an SCA binding receives a runtime exception. - United States

Text:
  FIXES ARE AVAILABLE
Version 8.0.1 Fix Pack 2 for the IBM Business Process Manager products [http://www-01.ibm.com/support/docview.wss?uid=swg24035701]
Version 8.5.0 Fix Pack 1 for the IBM Business Process Manager products [http://www-01.ibm.com/support/docview.wss?uid=swg24035702]
Version 8.5 Refresh Pack 5 for the IBM Business Process Manager products [http://www-01.ibm.com/support/docview.wss?uid=swg24037683]


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  Depending on the application design and various settings the
   transaction may not be set to rollback when a runtime exception
   is received by an SCA binding.
   More detailed SCA transaction product behavior can be found
   here:
   http://pic.dhe.ibm.com/infocenter/wasinfo/v7r0/topic/com.ibm.web
   sphere.soafep.multiplatform.doc/info/ae/ae/csca_global_trans.htm [http://pic.dhe.ibm.com/infocenter/wasinfo/v7r0/topic/com.ibm.websphere.soafep.multiplatform.doc/info/ae/ae/csca_global_trans.htm]
   l
   
   If a global transaction is owned by another component other than
   SCA then that component's behavior can also affect the global
   transation.
   
   Beginning in WAS and WPS v7, the SCA transaction handling
   behavior did change from always forcing a rollback in a global
   transaction to only forcing a rollback when SCA completes the
   global transaction with an unchecked exception.
   
   This APAR is to provide a configurable flag to get the old
   behavior.  You can enable this WebSphere Process Server
   V6.x transaction behavior by creating the
   SCA_ROLLBACK_TRANSACTION_IMPORT WebSphere environment variable
   and setting its value to true once the APAR is applied.
   
   With this flag, when a JAX-RPC import is called with join
   transaction to true and the web service provider responds with a
   unmodeled business fault there will be a ServiceRuntimeException
   and the binding will mark the transaction for rollback only.
   
   With the default WPS 7 and above scenario, the import would
   still throw the ServiceRuntimeException but it would only mark
   the transaction to rollback if the exception is not caught by
   the time it reaches an SCA method or binding which started the
   global transaction.
   
   
    
   
   

LOCAL FIX
 *  N/A
   
   
    
   
   

PROBLEM SUMMARY
 *  ****************************************************************
   * USERS AFFECTED:  IBM Business Process Manager (BPM)          *
   *                  Advanced users                              *
   ****************************************************************
   * PROBLEM DESCRIPTION: The global transaction may not be set   *
   *                      to rollback when a runtime exception    *
   *                      is received by an SCA binding.          *
   ****************************************************************
   * RECOMMENDATION:                                              *
   ****************************************************************
   There is a design change for SCA-related global transactions
   when join transaction is set to true in WebSphere Server V6.x
   versions. The import binding marks the global transaction to
   be rolled back and throws a runtime exception. In WebSphere
   Process Server V7 and later versions and IBM BPM Advanced,
   the import binding does not mark the transaction to be
   rolled back, but the user receives the Service Runtime
   exception to decide what to do: use the old or new behavior.
   
   
    
   
   

PROBLEM CONCLUSION
 *  The fix provides a configurable flag for the consumer to get
   the oldproduct behavior.
   
   Apply the interim fix from Fix Central. Then see the
   installation and dependency information in the readme.txt
   file, which is available with the fix package as a separate
   download.
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   JR47431
   
   
 * REPORTED COMPONENT NAME
   BPM ADVANCED
   
   
 * REPORTED COMPONENT ID
   5725C9400
   
   
 * REPORTED RELEASE
   801
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2013-08-06
   
   
 * CLOSED DATE
   2013-10-29
   
   
 * LAST MODIFIED DATE
   2013-11-06
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   BPM ADVANCED
   
   
 * FIXED COMPONENT ID
   5725C9400
   
   

APPLICABLE COMPONENT LEVELS
 * R750 PSY
   UP
   
   
 * R800 PSY
   UP