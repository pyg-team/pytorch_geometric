Title: IBM MustGather: Collecting data for Guardium STAP - United States

Text:
guardium; stap TECHNOTE (FAQ)

QUESTION
 If there is a problem with the Guardium STAP, what information must be gathered before contacting IBM Software Support? 

ANSWER
 

TAB NAVIGATION
 * STAP diag from GUI [http://www-01.ibm.com/support/docview.wss?uid=swg21606592]
 * UNIX diag [http://www-01.ibm.com/support/docview.wss?uid=swg21579891]- selected tab,
 * Windows diag [http://www-01.ibm.com/support/docview.wss?uid=swg21579969]
 * Windows Manual diag [http://www-01.ibm.com/support/docview.wss?uid=swg21607492]

 



 See here for steps to get logs for v10 Windows S-TAP. [http://www-01.ibm.com/support/docview.wss?uid=swg22003486] 

In cases where the recommended STAP diag from GUI cannot be obtained - A debug log for Windows STAP can be obtained in the following way 


A debug log for a Windows STAP can be obtained by running the following script which will create text files that can be sent to Technical Support. It is recommended to be user Administrator to perform these steps 

1. This diag script can be run with any STAP version. However, the O/S needs to be Windows 2003 server and above. 

2. The diag.bat script exists in later versions by default in the directory where the STAP was installed. (For example, "C:\Program Files (x86)\Guardium\GUARDIUM_STAP"). 

If your STAP version does not have this script - then please save this file and place it under the directory where the STAP was installed. 

 [/support/docview.wss?uid=swg21579969&aid=2]diag.bat.txt [/support/docview.wss?uid=swg21579969&aid=1] diag.bat.txt 

The file should be renamed to diag.bat after you have saved it to your computer ( it is initially named diag.bat.txt is to allow the file to get through any firewall blocks that may be in place. 

3. Run the diag.bat file manually from there by double clicking. Running this script will run a series of diagnostics and generate the following text files in the current directory ( or under a diag directory within ) 

- stap.txt 
- tasks.txt 
- system.txt 
- evtlog.txt or evtlog2008.txt 
- reg.txt 
4. Submit the results to Technical Support. 



 The script will collect the following data: 

-content of %system%guard_tap.ini 
-the guardium stap installation log 
-All running Tasks 
-List of all installed kernel drivers 
-OS information collected from the systeminfo utility 
-ipconfig /all 
-netstat -nao 
-ping and tracert from the db server to the guardium appliance 
-cpu usage for guardium_stapr, overall system cpu usage 
-guardium_stapr process handle count and memory usage 
-event log messages generated by STAP 
-system event log messages of type Error and warning 
the following registry entries: 

HKLMSOFTWAREMicrosoftWindowsCurrentVersionUninstall? 
HKLMSYSTEMCurrentControlSetServices? 
HKLMSYSTEMCurrentControlSetControlGroupOrderList? 
HKEY_LOCAL_MACHINESOFTWAREMicrosoftMSSQLServer RELATED INFORMATION
 IBM MustGather: Collecting data for Guardium Appliance [http://www.ibm.com/support/docview.wss?uid=swg21579853 ]