Title: IBM Unable to enter edit mode on portal page after a Fixpack or a Combined Cumulative Fix update - United States

Text:
portal CF install webdav TECHNOTE (TROUBLESHOOTING)

PROBLEM
Unable to enter edit mode on portal page after a Fixpack or a Combined Cumulative Fix update

SYMPTOM
Portal page does not switch to edit mode and the following error is reported in the browser.
ReferenceError: wpModules is not defined
wpModules.camSemTagHandler=_3;


CAUSE
One cause for this is that one of the tasks in the CF update (action-update-fp-wp.theme.themes/default80-files) was unable to update the files for the default theme. This task is responsible for updating the static theme files in WebDAV to use the correct context root for the portal, in case the current portal is not using the default context root of "wps." The task reports an I/Oerror but it does not cause the whole upgrade to fail so this error will probably be overlooked. 


Note: In the near future this task will be updated to cause the upgrade task to fail


ENVIRONMENT
All environments



DIAGNOSING THE PROBLEM
(1) In the ConfigTrace.log file from the 8001 fixpack update you can see the following: 


action-update-fp-wp.theme.themes/default80-files:
[mkdir] Created dir: /WebSphere/V8R0M0/N1/AppServer/profiles/default/ConfigEngine/config/work/themedavupdates
[get] Getting: http://<portal-host>:<portal-port>/<context-root>/mycontenthandler/dav/fs-type1/?mime-type=application/zip
[get] To: /WebSphere/V8R0M0/N1/AppServer/profiles/default/ConfigEngine/config/work/themedavupdates/davfiles.zip
[get] Error opening connection java.io.IOException: Server returned HTTP response code: 400 for URL: http://<portal-host>:<portal-port>/<context-root>/redirect
[get] Error opening connection java.io.IOException: Server returned HTTP response code: 400 for URL: http://<portal-host>:<portal-port>/<context-root>/redirect
[get] Error opening connection java.io.IOException: Server returned HTTP response code: 400 for URL: http://<portal-host>:<portal-port>/<context-root>/redirect
[get] Can't get http://<portal-host>:<portal-port>/<context-root>/mycontenthandler/dav/fs-type1/?mime-type=application/zip to /WebSphere/V8R0M0/N1/AppServer/profiles/defaul
t/ConfigEngine/config/work/themedavupdates/davfiles.zip
[echo] Files for Portal8.0 theme not found. No update necessary.

(2) When you request the following URL in the browser you get a standard portal login screen (form base authentication) instead of a simple browser based login pop up (basic-auth prompt).

http://<portal-host>:<portal-port>/<context-root>/mycontenthandler/dav/fs-type1/?mime-type=application/zip



RESOLVING THE PROBLEM
This problem can be caused by having the HTTP BasicAuth TAI disabled or by an incomplete procedure to change the context root of the portal. If this is the case then the problem can be fixed by performing the following steps. 


(1) Ensure that the HTTP BasicAuth TAI is configured correctly.

The WebDAV access points require this TAI in order to handle an authenticated request. Reference the WebDav connection to WebSphere Portal fails with HTTP Error 302 [http://www-01.ibm.com/support/docview.wss?uid=swg21460933] technote to correct the configuration of the HTTP BasicAuth TAI.

(2) Ensure that you can successfully access the WebDAV URL.

http://<portal-host>:<portal-port>/wps/mycontenthandler/dav/fs-type1/?mime-type=application/zip

Note: This URL should give you a simple browser prompt, not the default portal login page.

If you have changed the context root of your portal you should also try the same URL with the new context root:

http://<portal-host>:<portal-port>/<context-root>/mycontenthandler/dav/fs-type1/?mime-type=application/zip

(3) Run the following two tasks again:

action-update-fp-wp.theme.themes/default80-files
action-update-fp-wp.theme.themes/default-files

Note: These are internal configuration tasks and should only be run as directed by IBM technical documentation or IBM Technical Support. Most tasks with a name like action-xxx-yyy are considered internal tasks and are intended to be run with specific parameters or within a specific context.