Title: IBM Public certificates and the DataPower Gateway - United States

Text:
 QUESTION/ANSWER

QUESTION
How to manage expired third-party public CA certificates in the pubcert: directory on IBM DataPower Gateways products?

ANSWER
While DataPower Gateways products provide public CA certificates in the pubcert: directory for convenience, you might encounter missing certificate file errors after a firmware upgrade across a major release boundary.




 * What causes a certificate file to be removed from the pubcert: directory?
 * Does an upgrade address missing certificate errors?
 * Can I fix my configuration when a certificate file is removed?
 * Can I monitor certificate expiration?
 * Which expired certificates were removed by release?




What causes a certificate file to be removed from the pubcert: directory? 

In a major firmware release, expired public CA certificates are removed from the pubcert: directory in the firmware image. Expired public CA certificates are not removed in fix packs. Therefore, an upgrade in a release series does not cause a certificate file to be removed from pubcert: directory but upgrading across a major release boundary might.

Back to top




Does an upgrade address missing certificate errors? 

A firmware upgrade does not fix the missing certificate file error. Firmware upgrades do not include replacement public certificates for expired certificates. You must obtain replacement certificates for expired public certificates from the vendor's public site and uploaded them to the pubcert: directory.

Back to top




Can I fix my configuration when a certificate file is removed? 

If you do not need the CA in question, remove references to the removed certificate file.

 1. Locate any certificate objects that refer to the removed file. They are in a down state.
 2. Remove references to that certificate from any configuration objects that refer to it, such as validation credentials objects.
 3. Delete the certificate object in question.


If you need the CA in question:

 1. Obtain an updated copy from the CA's public site.
 2. Upload the new certificate to thepubcert: directory.
 3. Reconfigure the down certificate object to refer to the new certificate file.

Back to top




Can I monitor certificate expiration? 

You can define a certificate monitor with a configurable interval to check and report on expiration dates of certificate objects. The certificate monitor only checks certificates for which a object is configured in that it scans the list of configured objects rather than files in a directory.

For example, the terminology as logged by the error log might contain errors like these

1,20140225T064505Z,default,audit,error,,,95,,0x8240001b,,,"(SYSTEM:default:*:*): certificate 'ABC-Global-CA-pem' - File is unreadable" 

1,20140225T064506Z,default,crypto,error,certificate,GTE-CyberTrust-Root-4-pem,95,,0x80600086,,,"*certificate file 'pubcert:ABC-CyberTrust-Root-4.pem' unreadable*" 

The files are listed as unreadable. If you go to the file system and views one of these certificates, you can see that the validity date has passed.

Back to top




Which expired certificates were removed by release? 

Certificates in the pubcert: directory that have expired or will soon expire are not included in the firmware image.

The following certificate was removed in 7.7.1.2

 *  Certisign-Autoridade-Certificadora-AC3S.pem
   
   
   

The following certificates were removed in 7.7.1.0.

 * Certiposte-Classe-A-Personne.pem 
 * Certiposte-Serveur.pem 
 * Certisign-Autoridade-Certificadora-AC1S.pem 
 * Certisign-Autoridade-Certificadora-AC2.pem 
 * Certisign-Autoridade-Certificadora-AC4.pem 
 * VeriSign-Class-1-Public-Primary-CA-G2-1.pem 
 * VeriSign-Class-2-Public-Primary-CA-G2-2.pem 
 * VeriSign-Class-3-Public-Primary-CA-G2-2.pem 
 * VeriSign-Class-4-Public-Primary-CA-G2-2.pem 

The following certificate was removed in 7.5.0.

 * Swisskey-Root-CA.pem 

The following certificates were removed in releases earlier than 7.5.0.

 * American-Express-Global-CA.pem 
 * GTE-CyberTrust-Root-4.pem 
 * GTE-CyberTrust-Root-5.pem 
 * VeriSign-Class-3-Code-Signing-2001-CA.pem 
 * VeriSign-International-Server-CA-Class-3-1.pem 
 * VeriSign-International-Server-CA-Class-3-3.pem 

Back to top