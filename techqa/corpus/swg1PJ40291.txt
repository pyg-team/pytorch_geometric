Title: IBM PJ40291: WSREQUEST ADAPTOR THREADS INTERMITTENTLY HANG, RESULTS IN HIGH CPU USAGE - United States

Text:
 SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  When the WSRequest adaptor is configured with multiple threads,
   individual threads may hang intermittently, no longer processing
   any more work.  Once the threads hang, the CPU cycles for each
   of the hung threads will also increase.  The threads never
   continue, and will be stuck in this state indefinitely.  Once
   all of the threads hang, it ends up using a significant amount
   of CPU on the system, tying up resources until CM is shutdown
   and restarted.
   
   In collecting a javacore of the CM JVM, you will see the
   following in the stack of the WSRequest threads:
   
   3XMTHREADINFO
   "VWWebServicesAdaptorEx:WSRequest(0)[1]:4E7CBE8B27EE2841B9685B41
   060A1CEC" J9VMThread:0xB4290A00, j9thread_t:0xB4AD90A0,
   java/lang/Thread:0xB7C9AA88, state:CW, prio=5
   3XMTHREADINFO1            (native thread ID:0x7005, native
   priority:0x5, native policy:UNKNOWN)
   3XMTHREADINFO2            (native stack address range
   from:0xB3FBF000, to:0xB4000000, size:0x41000)
   3XMTHREADINFO3          Java callstack:
   4XESTACKTRACE                at java/lang/Object.wait(Native
   Method)
   4XESTACKTRACE                at
   java/lang/Object.wait(Object.java:196)
   4XESTACKTRACE                at
   java/lang/Thread.join(Thread.java:673)
   4XESTACKTRACE                at
   java/lang/Thread.join(Thread.java:634)
   4XESTACKTRACE                at
   org/apache/axis/wsdl/gen/Parser.run(Parser.java:310)
   4XESTACKTRACE                at
   org/apache/axis/wsdl/toJava/Emitter.run(Emitter.java:599)
   4XESTACKTRACE                at
   filenet/ws/api/WSDefinition.init(WSDefinition.java:410)
   4XESTACKTRACE                at
   filenet/ws/api/wsrr/WSWSRRDefinition.<init>(WSWSRRDefinition.jav
   a:82)
   4XESTACKTRACE                at
   filenet/ws/api/wsrr/WSWSRRDefinition.getWSDefinition(WSWSRRDefin
   ition.java:88)
   4XESTACKTRACE                at
   filenet/ws/api/WSDefinition.getWSDefinition(WSDefinition.java:21
   42)
   4XESTACKTRACE                at
   filenet/vw/integrator/adaptors/webservices/WSRequestOperation.ge
   tWSDLDefinition(WSRequestOperation.java:455)
   4XESTACKTRACE                at
   filenet/vw/integrator/adaptors/webservices/WSRequestOperation.ge
   tWSDLDefinition(WSRequestOperation.java:341(Compiled Code))
   4XESTACKTRACE                at
   filenet/vw/integrator/adaptors/webservices/WSRequestOperation.ge
   tWSDLDefinition(WSRequestOperation.java:256(Compiled Code))
   4XESTACKTRACE                at
   filenet/vw/integrator/adaptors/webservices/WSInvokeOperation.inv
   oke(WSInvokeOperation.java:367)
   4XESTACKTRACE                at
   filenet/vw/integrator/adaptors/webservices/VWWebServicesAdaptorE
   x.run(VWWebServicesAdaptorEx.java:550)
   
   In addition, the threads that are using the CPU cycles are Axis
   library calls that are made by the WSRequest adaptor to parse
   the WSDL definitions:
   
   3XMTHREADINFO      "Thread-166" J9VMThread:0x08E92700,
   j9thread_t:0x0A172E34, java/lang/Thread:0xCFB0C988, state:CW,
   prio=5
   3XMTHREADINFO1            (native thread ID:0x127B, native
   priority:0x5, native policy:UNKNOWN)
   3XMTHREADINFO2            (native stack address range
   from:0xB1237000, to:0xB1278000, size:0x41000)
   3XMTHREADINFO3          Java callstack:
   4XESTACKTRACE                at
   java/util/HashMap.findNonNullKeyEntry(HashMap.java:525(Compiled
   Code))
   4XESTACKTRACE                at
   java/util/HashMap.getEntry(HashMap.java:510(Compiled Code))
   4XESTACKTRACE                at
   java/util/HashMap.get(HashMap.java:496(Compiled Code))
   4XESTACKTRACE                at
   org/apache/axis/wsdl/symbolTable/Utils.findQName(Utils.java:61(C
   ompiled Code))
   4XESTACKTRACE                at
   org/apache/axis/wsdl/symbolTable/Utils.getNodeNameQName(Utils.ja
   va:251(Compiled Code))
   4XESTACKTRACE                at
   org/apache/axis/wsdl/symbolTable/SymbolTable.createTypeFromDef(S
   ymbolTable.java:1192(Compiled Code))
   4XESTACKTRACE                at
   org/apache/axis/wsdl/symbolTable/SymbolTable.addTypes(SymbolTabl
   e.java:1041(Compiled Code))
   4XESTACKTRACE                at
   org/apache/axis/wsdl/symbolTable/SymbolTable.addTypes(SymbolTabl
   e.java:1174(Compiled Code))
   4XESTACKTRACE                at
   org/apache/axis/wsdl/symbolTable/SymbolTable.addTypes(SymbolTabl
   e.java:1174(Compiled Code))
   4XESTACKTRACE                at
   org/apache/axis/wsdl/symbolTable/SymbolTable.populateTypes(Symbo
   lTable.java:964(Compiled Code))
   4XESTACKTRACE                at
   org/apache/axis/wsdl/symbolTable/SymbolTable.populate(SymbolTabl
   e.java:758(Compiled Code))
   4XESTACKTRACE                at
   org/apache/axis/wsdl/symbolTable/SymbolTable.lookForImports(Symb
   olTable.java:914(Compiled Code))
   4XESTACKTRACE                at
   org/apache/axis/wsdl/symbolTable/SymbolTable.lookForImports(Symb
   olTable.java:920(Compiled Code))
   4XESTACKTRACE                at
   org/apache/axis/wsdl/symbolTable/SymbolTable.populate(SymbolTabl
   e.java:763(Compiled Code))
   4XESTACKTRACE                at
   org/apache/axis/wsdl/symbolTable/SymbolTable.lookForImports(Symb
   olTable.java:914(Compiled Code))
   4XESTACKTRACE                at
   org/apache/axis/wsdl/symbolTable/SymbolTable.lookForImports(Symb
   olTable.java:920(Compiled Code))
   4XESTACKTRACE                at
   org/apache/axis/wsdl/symbolTable/SymbolTable.populate(SymbolTabl
   e.java:763(Compiled Code))
   4XESTACKTRACE                at
   org/apache/axis/wsdl/symbolTable/SymbolTable.lookForImports(Symb
   olTable.java:914(Compiled Code))
   4XESTACKTRACE                at
   org/apache/axis/wsdl/symbolTable/SymbolTable.lookForImports(Symb
   olTable.java:920(Compiled Code))
   4XESTACKTRACE                at
   org/apache/axis/wsdl/symbolTable/SymbolTable.lookForImports(Symb
   olTable.java:920(Compiled Code))
   4XESTACKTRACE                at
   org/apache/axis/wsdl/symbolTable/SymbolTable.lookForImports(Symb
   olTable.java:920(Compiled Code))
   4XESTACKTRACE                at
   org/apache/axis/wsdl/symbolTable/SymbolTable.populate(SymbolTabl
   e.java:763(Compiled Code))
   4XESTACKTRACE                at
   org/apache/axis/wsdl/symbolTable/SymbolTable.add(SymbolTable.jav
   a:596)
   4XESTACKTRACE                at
   org/apache/axis/wsdl/symbolTable/SymbolTable.populate(SymbolTabl
   e.java:571)
   4XESTACKTRACE                at
   org/apache/axis/wsdl/symbolTable/SymbolTable.populate(SymbolTabl
   e.java:504)
   4XESTACKTRACE                at
   org/apache/axis/wsdl/gen/Parser$WSDLRunnable.run(Parser.java:361
   )
   4XESTACKTRACE                at
   java/lang/Thread.run(Thread.java:736)
   
   
    
   
   

LOCAL FIX

PROBLEM SUMMARY
 *  ****************************************************************
   * USERS AFFECTED:                                              *
   * 4.5.1 PE users                                               *
   ****************************************************************
   * PROBLEM DESCRIPTION:                                         *
   * See Error Description                                        *
   ****************************************************************
   * RECOMMENDATION:                                              *
   * Apply 4.5.1.4-P8PE-FP004 or newer.                           *
   ****************************************************************
   
   
    
   
   

PROBLEM CONCLUSION
 *  Fixed in 4.5.1.4-P8PE-FP004 and newer.
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   PJ40291
   
   
 * REPORTED COMPONENT NAME
   PROCESS ENGINE
   
   
 * REPORTED COMPONENT ID
   5724R7607
   
   
 * REPORTED RELEASE
   451
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2012-06-06
   
   
 * CLOSED DATE
   2013-06-13
   
   
 * LAST MODIFIED DATE
   2013-06-13
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
    PJ40408 [http://www-01.ibm.com/support/docview.wss?uid=swg1PJ40408]
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   PROCESS ENGINE
   
   
 * FIXED COMPONENT ID
   5724R7607
   
   

APPLICABLE COMPONENT LEVELS
 * R451 PSY
   UP