Title: IBM Active Directory (LDAP) or nested groups not recognized by RAA - United States

Text:
LDAP; groups; nested; RAA TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 IBM Rational Asset Analyzer (RAA) does not recognize LDAP or nested groups even though the groups have been included in the Local Windows DB2 groups. 

SYMPTOM
RAA does not recognize LDAP (Active Directory) or nested group when resolving the user rights for members included in the DB2 group. 

The LDAP group were included in local Windows groups RAAUSERS and RAADMINS which were included in the DB2USERS and DB2ADMIN group. 

RAA is not considering them when authenticating.

CAUSE
RAA does not directly perform authentication, but relies on DB2 for user authentication.



DIAGNOSING THE PROBLEM
DB2 trace reveals that SQL code SQL1060N is being issued for the failing user. 

For diagnosing the problem, collect the following: 

 1. Open a DB2 Command Prompt (Start > Run > type db2cmd) 
    
 2. Issue the command:
    
    db2support . -g -s
    
    This will generate a file called db2support.zip. 
    
 3. Trace the failing scenario as follows:  * Open a DB2 Command Prompt (Start > Run > type db2cmd) 
     * Issue the command:
       
       db2trc on -f trace.dmp 
     * Recreate the error when trying to use one of these new users. 
     * Once the problem has been recreated, go back to that command window, and issue the following commands:
       
       db2trc off
       db2trc flw trace.dmp trace.flw
       db2trc fmt trace.dmp trace.fmt
       db2trc fmt -c trace.dmp trace.fmc
       
       This will generate 4 files: trace.dmp, trace.flw, trace.fmt and trace.fmc. 
       
    
    
 4. Provide all the files to Rational Client Support

RESOLVING THE PROBLEM
When performing authentication or group lookup in DB2, DB2 can use LDAP (active directory) calls to perform those checks. By default, DB2 will use operating system functions to get that information, but if LDAP is being used, then DB2 needs to be setup to use LDAP calls instead. 

Once DB2 has been properly configured for LDAP support, use the DB2 GRANT command to grant appropriate privileges to group(s) for accessing the RAA repository.

Note: If LDAP security is to be enabled in DB2, a Windows a plugin is required. A plugin can be custom written by a user, or you can use a built-in plugin that comes with DB2.


RELATED INFORMATION
#DB2 errors accessing RAA database tables (sqlcode -551) [http://www.ibm.com/support/docview.wss?uid=swg21566709]
LDAP security in DB2 [http://publib.boulder.ibm.com/infocenter/db2luw/v9r5/topic/com.ibm.db2.luw.admin.sec.doc/doc/c0050519.html]