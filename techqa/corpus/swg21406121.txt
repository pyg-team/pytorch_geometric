Title: IBM Migrating the IBM速 Lotus速 Connections 2.5 Search ear to a new node - United States

Text:
 NEWS

ABSTRACT
 The steps in this document describe how to migrate Search to a new node in
a cluster. 

CONTENT

1. Stop all clusters in the IBM速 WebSphere速 Deployment Manager that are running Lotus Connections and back up the data directories before proceeding.

2. Create a template from the application server running Search by selecting the Templates option above the list of Application Servers. Select New, and from the list of servers displayed, select the application server that Lotus Connections Search is installed on. Choose a name for the template that it is easy to distinguish from other templates that might exist. This will be used to create a new application server in a later step.

3. Make sure that the WebSphere Deployment Manager is running. Install a custom node using the WebSphere ND installer on a new machine, and select the option to federate it in to the existing Lotus Connections installation's Deployment Manager. After this, you must restart the Deployment Manager to pick up the new configuration. Verify that the new node is running and that the Deployment Manager has registered it and can see its status. 

4. Once the new node is federated into the WebSphere Deployment Manager, select the Servers -> Clusters option, then select New above the list of existing clusters to create a new one using our federated node. Enter a name for the cluster in the first step. In the second step, enter a name for the new application server to be created for Lotus Connections Search, select the newly federated node as the target node, and select the template created earlier as the template to use when creating the cluster member.

5. Once the new cluster is available in the configuration, navigate to Applications -> Enterprise Applications -> Search. Select Manage Modules and re-map all the modules for Lotus Connections Search onto the new cluster created. Save the changes.

6. Once the changes have been made, navigate to System Administration -> Nodes, select all the nodes that have Lotus Connections installed, and perform a Synchronize. This will copy the Lotus Connections Search application across to the new node that was federated in. 

7. Install the Scheduler Calendar System Application on the newly created node by issuing the following command in the wsadmin console: AdminApp.install('<path to SchedulerCalendars.ear>', '[-cell <cell name> -cluster <new search cluster name> -appname SchedulerCalendars]') AdminApp.save()
Restart the new Lotus Connections Search cluster.

8. A work manager must be redefined at a new scope in order to be usable by the scheduler in the new Lotus Connections Search cluster. Navigate to Resources -> Asynchronous Beans -> Work managers. Set the scope to the new cluster created for Lotus Connections Search and then select New to create the new work manager for the new search cluster. Enter the following values for the new Work Manager:

Name : SearchWorkManager
JNDI name : wm/search
Work request queue size : 10
Work request queue full action : Fail
Internationalization : Enabled (checked)
WorkArea : Enabled (checked)
Security : Enabled (checked) 
Number of alarm threads : 1
Minimum number of threads : 1
Maximum number of threads : 2
Thread Priority : 5

Apply the changes and save them.

9. A scheduler resource must be created at the new cluster scope in order to run scheduled crawling tasks for building an index. Navigate to Resources -> Schedulers, set the scope to the new cluster created for Lotus Connections Search and then select New. Enter the following values for the new Scheduler resource:

Name : LotusConnectionsScheduler
JNDI name : scheduler/search
Data source JNDI name : jdbc/search
Data source alias : searchJAASAuth
Table prefix : LOTUSCONNECTIONS
Work manager JNDI name : wm/search

Apply the changes and save them.

10. Copy the Lotus Connections directory structure from the original Lotus Connections Search node to the file system of the server hosting the new node.

11. After migrating Lotus Connections Search to a new node, the Lotus Connections configuration must be updated. Refer to the documentation at this URL: 
http://publib.boulder.ibm.com/infocenter/ltscnnct/v2r0/index.jsp?topic=/com.ibm.connections.25.help/t_admin_common_changing_config.html [http://publib.boulder.ibm.com/infocenter/ltscnnct/v2r0/index.jsp?topic=/com.ibm.connections.25.help/t_admin_common_changing_config.html]

[http://publib.boulder.ibm.com/infocenter/ltscnnct/v2r0/topic/com.ibm.connections.25.help/t_admin_common_changing_config.html]The attributes that will need to be updated are:

search.interService.href (Set this to use the new node name)
search.ejb.cluster (Set this to use the new node name)
search.ejb.port (Set this to use the new node name)

12. Perform a synchronization of all Lotus Connections nodes again to ensure that the configuration is propagated across all application servers and then start the clusters.