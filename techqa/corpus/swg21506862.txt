Title: IBM DataPower AAA option "Use WS-Security Token First"  for LTPA Authentication - United States

Text:
security wssecurity LTPA tokens HTTP SOAP headers TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 Select AAA policy option "Use WS-Security Token First" when an LTPA token is provided in the SOAP header rather than in an HTTP header. 

SYMPTOM
Transaction processing may result in AAA failure and the following log messages 

 [aaa][warn] 0x83800015 ltpa authentication failed with (LTPA, ) 

 [multistep][error] 0x01d30001 AAA Authentication Failure 

 

if the input request is a SOAP message with an LTPA BinaryBinarySecurityToken in the SOAP header. 

 <soapenv:Header> 

 <wsse:Security> 

 <wsse:BinarySecurityToken ... ValueType="wsst:LTPA"> 

 ... 

 </wsse:BinarySecurityToken> 

 </wsse:Security> 

 </soapenv:Header>


CAUSE
If radio button "Use WS-Security Token First" is not selected in the AAA policy, DataPower will only look at incoming LTPA tokens in HTTP headers; the LTPA token in the message is not used.


RESOLVING THE PROBLEM
In the AAA Policy object, turn on the toggle called "Use WS-Security Token First". You can find that setting in the generic object screen for AAA under the Identity tab (scroll down to the bottom).