Title: IBM Ping Probe: Example on how ping probe monitors hosts in ping file - United States

Text:
ping probe unreachable example ping.file TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 A breakdown on how the probe handles a host that is unreachable. 

RESOLVING THE PROBLEM
In the following example, the probe properties are:
Poll 300 (i.e. 5 minutes)
Timeout 2000 (i.e. 2 seconds)
Retry 2
Interval 1000 ms
MaxPingBurst 1

Entry in ping.file:
BoxA
BoxB
BoxC 120
BoxD

Let's assume that BoxB is down and cannot be pinged.

The Ping probe works in cycles based on the Interval and how many hosts to ping as per MaxPingBurst.
e.g.:
If there are 400 hosts in ping.file, with Interval of 100ms and MaxPingBurst of 1, 
it would take (0.1 second x 400)= 40 seconds to ping all the hosts when the probe first starts up.

In the above setting of Interval of 1000 ms (1 second) and MaxPingBurst of 1, 
the ping probe working in cycle based on the Interval will ping 1 host every second.
So on startup it will take 1x4 = 4 seconds to ping all the 4 hosts in the ping.file.


On startup the probe will first ping BoxA in ping.file e.g. at 1:00:00
BoxA responds back before Timeout value of 2 seconds e.g. at 1:00:01
So it is reachable and the Poll timer is reset so that BoxA will ping again at 1:05:01.

Next is ping to BoxB at 1:00:01.
After 2 seconds and BoxB did not response, so the poll timer is not reset.
The probe will only ping BoxB again after it had ping all the remaining hosts in the ping.file which are BoxC and BoxD.

Next to be pinged is BoxC at 1:00:02. It is reachable and response at 1:00:03.
and so the next time BoxC will be pinged is 120 seconds (not 300 seconds) later at 1:02:03.

Then, BoxD is pinged e.g. at 1:00:03 and responded at 1:00:04. As it is reachable, the next ping will be at 1:05:04.

Now that all the hosts in the ping.file have been pinged, the probe will now ping the hosts that failed to respond; i.e. BoxB. 
At 1:00:04 the probe does it first retry to ping BoxB.
After it failed to respond within the Timeout value of 2 seconds e.g. at 1:00:06, the probe will then go through the ping.file to ping the other hosts.
As the other hosts; BoxA, BoxC and BoxD does not need to be pinged untill 1:05:01, 1:02:03 and 1:05:04 respectively; the next retry to ping BoxB is done almost immediately; e.g. at 1:00:06. This will be the second retry.

When the host still failed to respond within the Timeout value of 2 seconds e.g. at 1:00:08, BoxB is deemed unreachable and an alert will be generated.
Then the Poll timer is reset and BoxB will be pinged again 300 seconds later at 1:05:08.

At 1:02:03, BoxC will be pinged, reachable so poll timer reset for next ping in about 120 seconds later(e.g. at 1:04:03).
At 1:05:01, BoxA will be pinged, reachable so poll timer reset for next ping in about 300 seconds later (e.g. at 1:10:01).
At 1:05:04, BoxD will be pinged, reachable so poll timer reset for next ping in about 300 seconds later (e.g. at 1:10:04). 
At 1:05:08, BoxB will be pinged, unreachable after about 2 seconds later with no response (e.g. 1:05:10), the probe will then go through the ping.file to ping the other hosts. As all the other hosts in ping.file had been pinged already, the probe will attempt the first retry which will happen almost immediately(e.g. at 1:05:10). After 2 seconds with no response, the second retry is done (e.g. at 1:05:12). After another 2 seconds with no response (e.g. at 1:05:14), the hostb is deem unreachable.
Then the Poll timer is reset and the hostb will be pinged again 300 seconds later (e.g. at 1:10:14).



PRODUCT ALIAS/SYNONYM
 OMNIbus