Title: IBM How to upgrade Rational Directory Server 5.2.1 (Tivoli variant) on Solaris - United States

Text:
synergy; rds; 5.2.1; patch; tivoli; 6.3; linux; 64bit; 32bit; db2; gskit; 9.7.0.7; 8.0.15.4; 6.3.0.17; fix; pack TECHNOTE (FAQ)

QUESTION
 How do you upgrade the individual components required by IBM Rational Directory Server 5.2.1 on 32-bit and 64-bit Solaris? 

CAUSE
Upgrading an earlier version of Rational Directory Server (Tivoli variant) to version 5.2.1 requires upgrading each of the following components in order first: 

 1. IBM DB2 Server Fix Pack 9.7.0.7 
 2. IBM GSKIT version 8.0.15.4 
 3. IBM Tivoli Directory Server 6.3 fix pack 6.3.0.17


After these components have been upgraded successfully, then you can upgrade Rational Directory Server to version 5.2.1. 

The installation instructions for each of these components can be difficult to locate and navigate, so this document has been created to provide all of the installation steps in a single location. 
ANSWER
There are 3 parts to the patch process: 

 1. IBM DB2 
 2. IBM Global Security Kit (GSKit) 
 3. IBM Tivoli Directory Server


These must be applied in order. 






 1. Patching DB2 to IBM DB2 Server Fix Pack 9.7.0.7
    
     1. Download IBM DB2 Server Fix Pack 9.7.0.7 [http://www.ibm.com/eserver/support/fixes/fixcentral/swg/quickorder?brandid=1&productid=DB2&vrmf=9.7.*&platform=Solaris+64-bit,SPARC&searchtype=fix&fixes=*server*FP007] from IBM Fix Central.
        
        The downloaded file is called 
        v9.7fp7_sun64_server.tar.gz (716.8 MB)
        
        
     2. Login as root
        
        
     3. Unzip and untar the patch file to a writable location
        
        Example:
        cd <path_where_downloaded_DB2_file_is_saved>
        gunzip -c v9.7fp7_sun64_server.tar.gz | tar -xf -
        
        Note: The above command creates a folder called v9.7fp7_sun64_server and extracts all the files into that folder.
        
        
     4. Change directory (cd) to the server directory in the expanded patch directory
        
        Example:
        cd v9.7fp7_sun64_server
        cd server
        
        
     5. Run the following (replacing DB2DIR with the location of the DB2 install directory on your machine).
        
        ./installFixPack -b DB2DIR
        
        For example, if DB2 is installed in the path /opt/ibm/tdsV6.3db2:
        
        ./installFixPack -b /opt/ibm/tdsV6.3db2
        
        
        This completes the IBM DB2 part of the procedure.
        
        
        
    
    
 2. Patching GSKIT to IBM GSKIT version 8.0.15.4
    
     1. Download IBM GSKIT version 8.0.15.4 [http://www-933.ibm.com/support/fixcentral/swg/selectFixes?parent=ibm~Tivoli&product=ibm/Tivoli/IBM+Global+Security+Kit&release=8.0.15.4&platform=All&function=all] from IBM FixCentral.
        
        The downloaded file is called 
        8.0.15.4-TIV-GSKIT-SolarisSparc-FP004.tar.gz (28.95 MB)
        
        
     2. Login as root
        
        
     3. Unzip and untar the patch file to a writable location
        
        Example:
        cd <path_where_downloaded_gskit_tar.gz_file_is_kept>
        gunzip -c 8.0.15.4-TIV-GSKIT-SolarisSparc-FP004.tar.gz | tar -xf -
        
        Note: The above command creates a folder called 8.0.15.4-TIV-GSKIT-SolarisSparc-FP004 and extracts all the files into that folder.The contents of the folder are divided into 2 folders, one for 32-bit Solaris, and one for 64-bit:
        
        Example:
        ls -1R
        32/
        64/
        
        ./32:
        gskcrypt32-8.0.15.4.sun.sparc.tar.Z
        gskssl32-8.0.15.4.sun.sparc.tar.Z
        
        ./64:
        gskcrypt64-8.0.15.4.sun.sparc.tar.Z
        gskssl64-8.0.15.4.sun.sparc.tar.Z
        
        
        Description of the files:
        
        For TDS 32 bit Client component:
        Global Security Kit V8.r.m.f for Solaris Sparc 32-bit Crypto - gskcrypt32-8.r.m.f.sun.sparc.tar.Z
        Global Security Kit V8.r.m.f for Solaris Sparc 32-bit SSL- gskssl32-8.r.m.f.sun.sparc.tar.Z
        
        For TDS 64 bit Server and 64 bit Client components:
        Global Security Kit V8.r.m.f for Solaris Sparc 64-bit Crypto - gskcrypt64-8.r.m.f.sun.sparc.tar.Z
        Global Security Kit V8.r.m.f for Solaris Sparc 64-bit SSL - gskssl64-8.r.m.f.sun.sparc.tar.Z
        
        Note: r.m.f are release, maintenance and fix level of GSKit V8.
        
        
     4. Extract individual package files (for 32-bit):
        
        32 bit example:
        cd 32
        uncompress gsk*Z
        tar -xf gskcrypt32*.tar
        tar -xf gskssl32*.tar
        ls -1d gsk*32 (the following output will be seen)
        gsk8cry32
        gsk8ssl32
        
        64 bit example:
        cd ../64
        uncompress gsk*Z
        tar -xf gskcrypt64*.tar
        tar -xf gskssl64*.tar
        ls -1d gsk*64 (the following output will be seen)
        gsk8cry64
        gsk8ssl64
        
        
     5. Stop Tivoli Directory Server related processes (ibmdiradm and ibmslapd) and any other processes (such as TAM) which use gskit.
        
        
     6. Install the packages:
        
        For 32 bit GSKit: (From the 32 subfolder where you can see the listing of gsk8ssl32 and gsk8cry32)
        
        cd 8*-TIV-GSKIT-SolarisSparc-*/32
        
        echo "instance=overwrite" > /tmp/.gsk8_installadmin
        pkgadd -d . -a /tmp/.gsk8_installadmin gsk8cry32
        pkgadd -d . -a /tmp/.gsk8_installadmin gsk8ssl32
        
        
        For 64 bit GSKit: (From the 64 subfolder where you can see the listing of gsk8ssl64 and gsk8cry64)
        
        cd 8*-TIV-GSKIT-SolarisSparc-*/64
        
        echo "instance=overwrite" > /tmp/.gsk8_installadmin
        pkgadd -d . -a /tmp/.gsk8_installadmin gsk8cry64
        pkgadd -d . -a /tmp/.gsk8_installadmin gsk8ssl64
        
        
        Notes:
        - When prompted during the install - press y and then press enter.
        - In case if you are using Solaris Zones, additional flags may be required, refer pkgadd man pages.
        - In some solaris systems the upgrade installation may fail with the following message.
        
        ## Executingcheckinstall script.
        <path>/gsk8cry64/install/checkinstall: <path>/gsk8cry64/install/checkinstall: cannot open
        pkgadd: ERROR: checkinstall script did not complete successfully
        
        Installation of <gsk8cry64> failed.
        No changes were made to the system.
        
        If above failure is seen, uninstall the gskit v8 packages (gsk8cry64, gsk8ssl64, gsk8cry32, gsk8ssl32) using pkgrm and install at the latest level using the steps above.
        
        
     7. Verify the installed package levels
        
        Example:
        pkginfo | grep -i gsk8
        pkginfo -l gsk8cry32 gsk8ssl32 gsk8cry64 gsk8ssl64 | egrep "PKGINST|VERSION"
        
        
     8. Start Tivoli Directory Server related processes (ibmdiradm and ibmslapd) and any other processes (such as TAM) which use gskit.
        
        This completes the IBM GSKit part of the procedure.
        
        
        
    
    
 3. Patching Tivoli Directory Server to IBM Tivoli Directory Server 6.3 fix pack 6.3.0.17
    
     1. Download IBM Tivoli Directory Server 6.3 fix pack 6.3.0.17 [http://www.ibm.com/support/fixcentral/swg/quickorder?parent=ibm~Tivoli&product=ibm/Tivoli/Tivoli+Directory+Server&release=6.3.0.17&platform=All&function=fixId&fixids=6.3.0.17-ISS-ITDS-SolarisSparc-FP0017] from IBM Fix Central.
        
        The following files implement this fix:
        6.3.0.17-ISS-ITDS-SolarisSparc-FP0017.tar.gz (303.53 MB)
        6.3.0.17-ISS-ITDS-SolarisSparc-LANGPK.tar.gz (3.99 MB)
        6.3.0.17-ISS-ITDS-FP0017.README (553.99 KB)
        6.3.0.17-ISS-ITDS-LANGPK.README (175.74 KB)
        
        
     2. Login as root
        
        
     3. Unzip and untar the patch file to a writable location
        
        Example:
        cd <path_where_downloaded_tivoli_d_s_file_is_kept>
        gunzip -c 6.3.0.17-ISS-ITDS-SolarisSparc-FP0017.tar.gz | tar -xf -
        
        Note: The above command creates a folder called 6.3.0.17-ISS-ITDS-SolarisSparc-FP0017 and extracts all the files into that folder.
        
        
     4. Install the patch
        
        Example:
        cd 6.3.0.17-ISS-ITDS-SolarisSparc-FP0017
        idsinstall -u -f
        
        Note: If you have not already done so, you will be prompted to first accept the TDS license terms before installation will continue.
        
        
        This completes the Tivoli Directory Server part of the procedure.
        
        
    
    

You may now upgrade Rational Directory Server to version 5.2.1.