Title: IBM Too many open files error on Windows platform - United States

Text:
no such file or directory TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 DataStage Parallel job fails with error message "too many open files" when running on Windows platform 

SYMPTOM
In the DataStage job log, error messages seen are: 

Item #: 867
Event ID: 2172
Timestamp: 2011-11-15 10:09:47
Type: Fatal
User Name: xxxxxxxxxxxxxxxxxxxxx
Message Id: IIS-DSEE-TOSO-00048
Message: APT_CombinedOperatorController(0),1: Fatal Error: Unexpected error in APT_TSort_ScratchFile::nextInputDescriptor: could not open file: E:\Data\DS_TEST\Scratchspace/tsortOggtbvxt; error: Too many open files 

 

Followed by the following error message a few entries later:
Item #: 873
Event ID: 2178
Timestamp: 2011-11-15 10:09:50
Type: Fatal
User Name: xxxxxxxxxxxxxxxxxxxx
Message Id: IIS-DSEE-TOSO-00048
Message: APT_CombinedOperatorController(0),0: Fatal Error: Unexpected error in APT_TSort_ScratchFile::nextInputDescriptor: could not open file: E:\Data\DS_TEST\Scratchspace/tsort4qb08d3n; error: No such file or directory

CAUSE
MKS Toolkit does not have sufficient free File Locks available for the number of DataStage jobs running on the Windows Server. 



DIAGNOSING THE PROBLEM
On the Windows Server, go to Start - Control Panel - Configure MKS Toolkit. 

Go to the Runtime Tab and select Category = Miscellaneous Setting. 

Under File Lock, check what has been set for "Max number of active file locks"


RESOLVING THE PROBLEM
By default "Max number of active file locks" is set to 255. Increase this number to 300. 

Then click on the "OK" button. You will need to restart the Windows server for this change to take effect.