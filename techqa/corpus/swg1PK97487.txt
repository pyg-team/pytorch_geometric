Title: IBM PK97487: User DB upgrade from User Admin takes a very long over high-late ncy connection when having lots of users - United States

Text:
 SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  Environment:
   - Operating System: Windows 2003
    - Product name: ClearQuest
    - Product Version: 7.0.1.1 (problem also exists in 7.0.1.6)
   
   Description of problem:
   
   This Defect is created following Escalation RATLC01373384.
   
   The upgrade of a user DB from the User Administration will take
   a very long time (in this case 20 minutes) to complete if there
   are very many users (13.000 in this case) and the upgrade is per
   formed over a high-latency connection.
   
   If the upgrade is performed closer to the DB server the process
   still takes around 1.5 minutes.
   
   Even just adding one user and subscribing this user to two group
   s will cause CQ to run thousands of queries like this:
   
   select uuid from ratl_replicas where dbid = 16777315
   
   which all take time to complete and may not be necessary. See th
   e attached tracing for details.
   
   Steps to reproduce:
   - This was reproducible using the customer's DB (contact me for
   connection info (the DB itself is 35 gig in size)
   - Open User Administration
   - Add 1 user, subscribe to all databases, make member of 2 group
   s
   - Upgrade database
   
   Workaround:
   Perform update closer to the server if possible.
   
   
    
   
   

LOCAL FIX

PROBLEM SUMMARY
 *  ****************************************************************
   * USERS AFFECTED:                                              *
   ****************************************************************
   * PROBLEM DESCRIPTION:                                         *
   ****************************************************************
   * RECOMMENDATION:                                              *
   ****************************************************************
   In ClearQuest 7.0.1, the upgrade of a user DB from the User
   Administration will take a very long time (at times up to 20
   minutes) to complete if there are many users and the upgrade
   is performed over a high-latency connection.
   
   
    
   
   

PROBLEM CONCLUSION
 *  A fix is available in ClearQuest 7.0.1.10 and 7.1.1.03.
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   PK97487
   
   
 * REPORTED COMPONENT NAME
   CLRQUEST MSITE
   
   
 * REPORTED COMPONENT ID
   5724G3700
   
   
 * REPORTED RELEASE
   710
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2009-09-30
   
   
 * CLOSED DATE
   2010-08-19
   
   
 * LAST MODIFIED DATE
   2010-08-19
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   CLRQUEST MSITE
   
   
 * FIXED COMPONENT ID
   5724G3700
   
   

APPLICABLE COMPONENT LEVELS
 * R710 PSN
   UP