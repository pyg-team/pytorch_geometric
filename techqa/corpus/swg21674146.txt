Title: IBM How to verify and resolve SQL0668N  reason code "7" when accessing a table? - United States

Text:
 TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 If you receive error SQL0668N reason code "7" when accessing a table, it means that the table is in reorg pending state. How do you verify the table state and resolve this error? 

SYMPTOM
For example, you may receive the following error: 

$ db2 insert into test1 values "(1,2,3)"
DB21034E The command was processed as an SQL statement because it was not a
valid Command Line Processor command. During SQL processing it returned:
SQL0668N Operation not allowed for reason code "7" on table "DB2INST1.TEST1".
SQLSTATE=57016



CAUSE
Some statements may contain a REORG-recommended operation, for example ALTER TABLE...DROP COLUMN or multiple ALTER TABLE...ADD COLUMN statements. This will put the table in reorg pending state. 


DIAGNOSING THE PROBLEM
To verify the table is in reorg pending state, you may issue:
$ db2 "SELECT REORG_PENDING FROM SYSIBMADM.ADMINTABINFO where TABSCHEMA='DB2INST1' and tabname='TEST1'"


REORG_PENDING
-------------
Y

1 record(s) selected.




RESOLVING THE PROBLEM
Reorganize the table using REORG TABLE command.

RELATED INFORMATION
 ALTER TABLE statement [http://pic.dhe.ibm.com/infocenter/db2luw/v10r5/topic/com.ibm.db2.luw.sql.ref.doc/doc/r0000888.html]
REORG INDEXES/TABLE command [http://pic.dhe.ibm.com/infocenter/db2luw/v10r5/index.jsp?topic=%2Fcom.ibm.db2.luw.admin.cmd.doc%2Fdoc%2Fr0001966.html]