Title: IBM IO15270: TOO MANY PORTS OPEN WITH DSML V2 SERVER CONNECTOR - United States

Text:
z/os SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  TDI 7.0 - too many files open with DSML v2 Server connector
   
   Description:
   
   We migrated from DSMLv2 Event Handlers in 6.1.1 to the DSML v2
   Server
   connector in ITDI 7.0. Even though the server connector seems to
   be up
   and listening (when we telnet to that port), sometimes it is not
   accessible to the application. Same ports are being used after
   the
   migration. We have changed the
   com.ibm.di.server.connectorpooltimeout
   value to 0 (from the default of 42). After changing the timeout
   config,
   the frequency of the error is less, but the error still occurs
   sometime. We have created an AL pool with a initial count of 5
   and a
   max instance count of 5. That doesn't seem to have any effect on
   the
   issue.
   
   Another problem, that might be related to this, is that after 4
   days of
   being online, ITDI threw the error message "too many files
   open",
   indicating that the file handles are not being released and it
   became
   stale, causing none of the assembly lines to run properly.
   
   Some background info on the environment:
   We have two installations of TDI in production and a
   loadbalancer which
   routes the requests to either of them. The loadbalancer probes
   both the
   ITDI instances on all the listening ports.
   
   The switch (load balancer) probes the sockets once every minute.
   So
   each of the 4 TDI instances is probed each minute.
   1 minute = 4 probes
   60 mintes = 240 probes
   1 day = 5760 probes
   
   
   Steps to Duplicate: The customer starts the TDI instances behind
   the
   switch and sees the open sockets.
   
   Desired Behavior: The customer would like to run the 2 machines
   that
   have 4 instances of TDI behind a switch without hitting any
   issues or
   having the TDI servers crash.
   
   Environment:
   TDI Version and Fixpack - TDI 7.0.0.6
   OS for the TDI Server - AIX 6.1
   
   
    
   
   

LOCAL FIX
 *  1608
   
   
    
   
   

PROBLEM SUMMARY
 *  Problem with TDI DSMLv2SOAPServer connector.
   
   
    
   
   

PROBLEM CONCLUSION
 *  This is bug in TDI code and has been fixed, official fix will be
   made available in 6.1.1-TIV-TDI-FP0011.
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   IO15270
   
   
 * REPORTED COMPONENT NAME
   ITDI MULTIPLATF
   
   
 * REPORTED COMPONENT ID
   5724D9960
   
   
 * REPORTED RELEASE
   611
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2011-12-02
   
   
 * CLOSED DATE
   2011-12-02
   
   
 * LAST MODIFIED DATE
   2011-12-02
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
    IO15230 [http://www-01.ibm.com/support/docview.wss?uid=swg1IO15230]
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   ITDI MULTIPLATF
   
   
 * FIXED COMPONENT ID
   5724D9960
   
   

APPLICABLE COMPONENT LEVELS
 * R611 PSY
   UP