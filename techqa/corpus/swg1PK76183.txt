Title: IBM PK76183: A 10-SECOND DELAY THAT CAN OCCUR WHEN A PARTIAL REPOSITORY LOOKSFOR A NON-EXISTENT QUEUE DIFFERS BETWEEN Z/OS AND DISTRIBUTED - United States

Text:
z/os  A FIX IS AVAILABLE
Obtain the fix for this APAR.


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  As stated in technote 1225022, there can be a delay of up to 10
   seconds while a partial repository waits for replies to
   subscriptions made to two full repositories.  If there is no
   reply, 2085 MQRC_UNKNOWN_OBJECT_NAME or 2189
   MQRC_CLUSTER_RESOLUTION_ERROR will occur.
   .
   The circumstances for this 10-second delay differ between z/OS
   and distributed queue managers. The functionality should be the
   same across the platforms.
   *
   An example scenario is:
   A test on WebSphere MQ for Windows (level 6.0.2.3) where
     QMGR1 = full    for CLUSA
     QMGR2 = partial for CLUSA
     QMGR3 = partial for CLUSA
   If all the cluster channels were active, QMGR1 got an immediate
   2085, and  QMGR2/QMGR3 got 2085 within a second or two.  If all
   the cluster channels were stopped, QMGR3 still got an immediate
   2085, and QMGR2/QMGR3 got the ten-second delay.
   .
   With
     QMGR1 = partial for CLUSB (still full for CLUSA)
     QMGR4 = full    for CLUSB
     QMGR5 = full    for CLUSB
   attempts to put to a non-existent queue from QMGR1 either got an
   immediate 2085 or fairly quick one.  There was not a 10-second
   delay.
   .
   On WebSphere MQ for z/OS:
     RTPL  = full    for CLUSC
     QMGR4 = partial for CLUSC (still full for CLUSB)
     QMGR5 = partial for CLUSC (still full for CLUSB)
   A put from the full repository RTPL got an immediate 2085.
   .
   For:
     RTPJ = partial for CLUSA
   even with all cluster channels active, there was a 10-second
   delay,
   which is different from the observation on Windows.
   
   
    
   
   

LOCAL FIX

PROBLEM SUMMARY
 *  ****************************************************************
   * USERS AFFECTED: All users of WebSphere MQ for z/OS Version 7 *
   *                 Release 0 Modification 1.                    *
   ****************************************************************
   * PROBLEM DESCRIPTION: In a clustering environment the first   *
   *                      OPEN of a queue that DOES NOT EXIST     *
   *                      locally or in the cluster on a QMGR     *
   *                      that is a PARTIAL repository ALWAYS     *
   *                      takes a minimum of 10 seconds.          *
   ****************************************************************
   * RECOMMENDATION:                                              *
   ****************************************************************
   The code in CSQMZLOO delays an OPEN for 10 seconds waiting
   for positive response to its inquiry from a full repository to
   be returned even if it has had a negative response.
   This causes application delays that are not acceptable for
   online systems (e.g CICS).
   
   
    
   
   

PROBLEM CONCLUSION
 *  MQ z/OS Module CSQMZLOO has been changed to work the same way as
   the MQ Distributed code, and allow the OPEN to proceed on
   receipt of the first response from one of the full repositories.
   010Y
   CSQMZLOO
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   PK76183
   
   
 * REPORTED COMPONENT NAME
   WMQ Z/OS V7
   
   
 * REPORTED COMPONENT ID
   5655R3600
   
   
 * REPORTED RELEASE
   000
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2008-11-21
   
   
 * CLOSED DATE
   2009-11-25
   
   
 * LAST MODIFIED DATE
   2010-01-05
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
    PK66962 [http://www-01.ibm.com/support/docview.wss?uid=swg1PK66962]
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
    UK52284
   
   

MODULES/MACROS
 *  CSQMZLOO
   
   
    
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   WMQ Z/OS V7
   
   
 * FIXED COMPONENT ID
   5655R3600
   
   

APPLICABLE COMPONENT LEVELS
 * R010 PSY UK52284 [HTTPS://WWW14.SOFTWARE.IBM.COM/WEBAPP/SET2/ORDERMEDIA/SHOPCART?PTFS=UK52284]
   UP09/12/11 P F912
   
   

FIX IS AVAILABLE
 * SELECT THE PTF APPROPRIATE FOR YOUR COMPONENT LEVEL. YOU WILL BE REQUIRED TO SIGN IN. DISTRIBUTION ON PHYSICAL MEDIA IS NOT AVAILABLE IN ALL COUNTRIES.