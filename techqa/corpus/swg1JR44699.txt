Title: IBM JR44699: "$ADMINTASK BPMDELETESNAPSHOT" CAN'T DELETE SNAPSHOT WITH LARGE NUMBER OF INSTANCES - United States

Text:
 SUBSCRIBE TO THIS APAR
By subscribing, you receive periodic emails alerting you to the status of the APAR, along with a link to the fix after it becomes available. You can track this item individually or track all items by product.

Notify me when this APAR changes.

Notify me when an APAR for this component changes.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  On PS single cluster Envrionment, for snapshot R1_1, there are
   about 67326 completed instances.
   
   The database transaction log is large enough, about 4G totally.
    db2 update db cfg using LOGFILSIZ 32768
    db2 update db cfg using LOGPRIMARY 30
   
   When trying to use "$AdminTask BPMDeleteSnapshot" to delete the
   snapshot R1_1, the snapshot and related instances can't be
   deleted even after 2 hours execution.
   
   This APAR is superceded by JR44937 [http://www-01.ibm.com/support/docview.wss?uid=swg1JR44937].
   
   
    
   
   

LOCAL FIX

PROBLEM SUMMARY
 *  Problem Description:
   When using the BPM AdminTasks 'BPMProcessInstancesCleanup' and
   'BPMDeleteSnapshot' a timeout may occur and the commands may
   fail.
   
   Problem Summary:
   The stored procedure used underneath to carry out BPD instance
   deletion is inefficient and needs refactoring. It does
   superflous
   updates to the temporary groups tables per deleted bpd instance
   and was designed for single instance deletion only.
   
   
   Problem Conclusion:
   This fix replaces the stored procedure with explicit JDBC calls
   better suited for bulk operation. It postpones the orphan task
   temp group deletion to be run once only
   after all bpd instances have been deleted. Further the
   associated tasks will be deleted using batch update taking into
   account that there are likely many task entries per bpd
   instance.
   
   
    
   
   

PROBLEM CONCLUSION
 *  Problem fixed
   iFix available on top of V801 GA
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   JR44699
   
   
 * REPORTED COMPONENT NAME
   BPM STANDARD
   
   
 * REPORTED COMPONENT ID
   5725C9500
   
   
 * REPORTED RELEASE
   801
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2012-11-12
   
   
 * CLOSED DATE
   2013-02-04
   
   
 * LAST MODIFIED DATE
   2013-02-23
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   BPM STANDARD
   
   
 * FIXED COMPONENT ID
   5725C9500
   
   

APPLICABLE COMPONENT LEVELS
 * R801 PSY
   UP