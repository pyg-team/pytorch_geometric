Title: IBM PM18181: AJAXPROXY CONNECTION AND SOCKET TIMEOUTS ARE HARD TO TUNE - United States

Text:
 SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  It is difficult to set a reasonable connection and socket
   time out when under heavy traffic and trying to factor in what
   would happen if the target server went down.  There are no other
   ways to help in this situation besides altering the connection
   and socket time out values and setting retries to 0 - as below:
   
      <proxy:meta-data>
         <proxy:name>retries</proxy:name>
         <proxy:value>0</proxy:value>
      </proxy:meta-data>
   
   If there is a problem with the connection the
   maxconnetionsperhost could be reached and then the WebSphere
   threads will continue to grow due to waiting for a connection to
   ajaxproxy.
   
   
    
   
   

LOCAL FIX

PROBLEM SUMMARY
 *  ****************************************************************
   * USERS AFFECTED:  All users of IBM WebSphere Application      *
   *                  Server Feature Pack for Web 2.0             *
   ****************************************************************
   * PROBLEM DESCRIPTION: The current version of AjaxProxy has    *
   *                      no support to control the behavour of   *
   *                      threads that wait for connection from   *
   *                      the server of to set a timeout for      *
   *                      such threads. This leads to growing     *
   *                      threads that wait without an end        *
   *                      bringing the system down.               *
   ****************************************************************
   * RECOMMENDATION:                                              *
   ****************************************************************
   It is difficult to set a reasonable connection and socket
   time out when under heavy traffic and trying to factor in what
   would happen if the target server went down. There are no other
   ways to help in this situation besides altering the connection
   and socket time out values and setting retries to 0 - as below:
   .
   <proxy:meta-data>
   <proxy:name>retries</proxy:name>
   <proxy:value>0</proxy:value>
   </proxy:meta-data>
   .
   If there is a problem with the connection the
   maxconnectionsperhost could be reached and then the WebSphere
   threads will continue to grow due to waiting for a connection to
   ajaxproxy.
   
   
    
   
   

PROBLEM CONCLUSION
 *  This APAR provides support for using the AjaxProxy component
   of the Feature Pack for Web 2.0.
   .
   An option has been given to set timeouts for WebSphere threads
   while they wait for connections. This option
   connection-pool-timeout specifies how long a thread has to
   wait before it makes a connection. Defaulting to zero, this is
   a number in milliseconds. Setting this option to a reasonable
   value (for example 2000) helps overcome the waiting thread
   issue.
   .
   The fix for this APAR is currently targeted for inclusion in
   fix pack 1.0.1.1. Please refer to the Recommended Updates page
   for delivery information:
   http://www.ibm.com/support/docview.wss?rs=180&uid=swg27004980 [http://www.ibm.com/support/docview.wss?rs=180&uid=swg27004980]
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   PM18181
   
   
 * REPORTED COMPONENT NAME
   WEBS APP SERV N
   
   
 * REPORTED COMPONENT ID
   5724H8800
   
   
 * REPORTED RELEASE
   610
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2010-07-09
   
   
 * CLOSED DATE
   2010-10-13
   
   
 * LAST MODIFIED DATE
   2010-10-13
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   WAS WEB 2.0 FEA
   
   
 * FIXED COMPONENT ID
   5724J0852
   
   

APPLICABLE COMPONENT LEVELS
 * R610 PSN
   UP
   
   
 * R700 PSN
   UP