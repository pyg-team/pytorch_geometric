Title: IBM Installing ODM modules on WebSphere Application Server (WAS) with a DB2 database - United States

Text:
 TECHNOTE (FAQ)

QUESTION
 How should I configure the data source for Rule Execution Server and Decision Center in WAS for a DB2 database? 

ANSWER
For Rule Execution Server (RES), the following instructions are provided in the RES documentation: 

 * Step 3: Creating an empty database schema [http://pic.dhe.ibm.com/infocenter/dmanager/v7r5/index.jsp?topic=%2Fcom.ibm.dserver.configuring%2FContent%2FBusiness_Rules%2F_pubskel%2FInfocenter_Primary%2Fps_DS_Configuring114.html] 
   
   For DB2, consult your DB2 database administrator or the DB2 documentation, in particular "Creating databases" and other DB related tasks:
   http://pic.dhe.ibm.com/infocenter/db2luw/v9r7/index.jsp?topic=%2Fcom.ibm.db2.luw.admin.cmd.doc%2Fdoc%2Fr0001941.html [http://pic.dhe.ibm.com/infocenter/db2luw/v9r7/index.jsp?topic=%2Fcom.ibm.db2.luw.admin.cmd.doc%2Fdoc%2Fr0001941.html]
   
   Here is an example to create a database:
   su {DB2AdminName}
   db2
   CREATE DATABASE {RESDBName}
   
   * Note that a DB2 Administrator permission is required.

 * Step 4: Setting up a data source and connection pool [http://pic.dhe.ibm.com/infocenter/dmanager/v7r5/index.jsp?topic=%2Fcom.ibm.dserver.configuring%2FContent%2FBusiness_Rules%2F_pubskel%2FInfocenter_Primary%2Fps_DS_Configuring115.html] 
   
   Here are the instructions to create a DB2 JDBC Provider in the WebSphere Integrated Solutions console:  1. Click Resource -> JDBC -> JDBC Provider -> New 
    2. Confirm that the scope of the JDBC Connection is correct: Node=xxx, Server=yyy (where xxx is the name of you node and yyy the name of your server) 
    3. In Step 1, complete the JDBC Provider fields: 
       - Database type : DB2
       - Provider type: DB2 Universal JDBC Driver Provider
       - Implementation Type: Connection pool data source
       - Name: Enter, for example, DB2 Universal JDBC Driver Provider for RES
       Click Next. 
    4. In Step 2, leave all the class path values, including the blanks, as the default values. Click Next. 
    5. In Step 3, check that the class path to the JAR file of your driver and the implementation class are correct. The default values are usually sufficient. Click Finish and confirm JDBC Provider was successfully created. 
   
   
   After the DB2 JDBC provider is created, set the RES data source.  1. In the Integrated Solutions Console, open Resources > JDBC and Data sources. 
    2. In the right panel in Scope, select the Node=xxx, Server=yyy (where xxx is the name of you node and yyy the name of your server) then click New. 
       ** The scope must be the same as the scope you have selected for the JDBC provider. 
    3. In Step 1, enter resdatasource as the Data source name, jdbc/resdatasource for the JNDI name, and click Next. 
       ** Note: The name of the data source is not important here but the JNDI name is. Set it to jdbc/resdatasource, otherwise Rule Execution Server cannot use the data source. 
    4. In Step 2, choose Select an existing JDBC provider, then select the JDBC provider that you created earlier and click Next. 
    5. In Step 3, enter the specific database properties for the data source, for instance:
       - Driver type: 4
       - Database name: Type your database name, for example DSN910GP.
       - Server name: Type the server name.
       - Port number: Type the port number. 
    6. Deselect Use this data source in container managed persistence (CMP) and click Next. 
    7. In Step 4, select the DB2 Administrator's authentication alias from the Component-managed authentication alias option and click Next. 
    8. In Step 5, a summary of the data source is provided. Click Finish and Save to save the changes to the master configuration.
   
   

 * Step 7: Populating a Rule Execution Server database [http://pic.dhe.ibm.com/infocenter/dmanager/v7r5/index.jsp?topic=%2Fcom.ibm.dserver.configuring%2FContent%2FBusiness_Rules%2F_pubskel%2FInfocenter_Primary%2Fps_DS_Configuring127.html] 
   
   You can populate the database either from the RES console or by running the SQL scripts that are provided in the <WODM75_install_dir>\executionserver\databases directory. 
   
   The script that creates the database schema is named repository_<DatabaseName>.sql. For DB2, two choices are available: repository__db2.sql and repository_db2_os390.sql
   
   If you want to use Decision Warehouse, you can also create the required database table by running the script trace_<DatabaseName>.sql. 
   
   If you are also storing the Java XOMs in a database, you must create these tables by running the xomrepository_<DatabaseName>.sql script.
   
   Click here [http://pic.dhe.ibm.com/infocenter/dmanager/v7r5/index.jsp?topic=%2Fcom.ibm.dserver.configuring%2FContent%2FBusiness_Rules%2F_pubskel%2FInfocenter_Primary%2Fps_DS_Configuring187.html]for details about how to run the SQL scripts for DB2.


For Decision Center (DC), 
 * Step 2: Creating a data source and connection pool [http://pic.dhe.ibm.com/infocenter/dmanager/v7r5/index.jsp?topic=%2Fcom.ibm.dcenter.configuring%2FContent%2FBusiness_Rules%2F_pubskel%2FInfocenter_Primary%2Fps_DC_Configuring2890.html] to configure the DC data source to point to the new DB schema

 * Step 6: Completing the configuration using the Decision Center console [http://pic.dhe.ibm.com/infocenter/dmanager/v7r5/index.jsp?topic=%2Fcom.ibm.dcenter.configuring%2FContent%2FBusiness_Rules%2F_pubskel%2FInfocenter_Primary%2Fps_DC_Configuring2905.html] to create the DC tables in the new DB schema