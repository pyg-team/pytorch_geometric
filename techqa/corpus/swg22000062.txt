Title: IBM How to resolve the performance issue when sending notifications through Microsoft Exchange Server - United States

Text:
 TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 The setting of the tarpit interval on the Microsoft Exchange server will impact the performance of sending notifications in IBM StoredIQ for Legal. For security reasons, this tarpit feature should not be turned off in a production environment. 

SYMPTOM
The performance when sending notifications through Microsoft Exchange Server is very poor if anonymous SMTP connections are configured in StoredIQ for Legal (email server configuration settings SSL connection = No and Need authentication = No).


CAUSE
Microsoft Exchange Server has an anti-spam feature called tarpitting. Tarpitting reduces the overall rate at which an unauthenticated client session can submit messages and blocks attempts to probe the server for valid recipient addresses. To accomplish this, the server's response is delayed for a configurable period (by default, 5 seconds) if the message contains certain commands.


To determine whether tarpitting is enabled on your Microsoft Exchange server, issue the following command in the management shell: 

>get-ReceiveConnector | select name,tarpitinterval

The output should look similar to this:

Name TarpitInterval
---- --------------
Default EXCHANGE01 00:00:05
Client EXCHANGE01 00:00:05


RESOLVING THE PROBLEM
In a production environment, tarpitting should not be disabled, mainly for IT security requirements. So, use either of the following methods to resolve the performance issue: 

 1. In StoredIQ for Legal, change the email server configuration, so that authentication is required:  1. Sign in as system administrator and got to Admin > External Servers > Email Server. 
     2. Under Server Configuration, set Need authentication to Yes, and enter the user name and password as defined in Microsoft Exchange Server.
    
    
 2.  If you want to continue using anonymous SMTP connections, create a dedicated Receive connector and allow only the IP address of the machine that runs StoredIQ for Legal. Disable tarpitting on just that connector:  1. On the Microsoft Exchange server, open Exchange Management Console, go to Server Configuration > Hub Transport. 
     2. In the action pane, click New Receive Connector. Specify a name that helps you distinguish the connector for StoredIQ for Legal from the others in your configuration. 
     3. On the Remote Network settings page, set the IP address of the machine that runs StoredIQ for Legal.
        [/support/docview.wss?uid=swg22000062&aid=1] [/support/docview.wss?uid=swg22000062&aid=1] 
     4. Make sure the following configuration settings are used:  * On the Authentication tab, only Transport Layer Security (TLS) is selected. No other authentication methods must be selected. 
           [/support/docview.wss?uid=swg22000062&amp;aid=2] 
         * On the Permission Groups tab, Anonymous users must be selected.
           [/support/docview.wss?uid=swg22000062&amp;aid=3]
        
        
     5. Disable tarpitting on this connector by setting the tarpit interval to 0.  * To list the TarpitInterval values for all Receive connectors on this Microsoft Exchange server, issue the following command in the Exchange Management Shell:
           
           [PS] C:\Windows\system32>get-ReceiveConnector | select name,tarpitinterval
           
           The output should look like this:
           
           Name TarpitInterval
           ---- --------------
           Default EXCHANGE01 00:00:05
           Client EXCHANGE01 00:00:05
           SIQ4L 00:00:05
           
         * To disable tarpitting only on the Receive connector for StoredIQ for Legal (SIQ4L), issue the following command:
           
           [PS] C:\Windows\system32>Set-ReceiveConnector -Identity SIQ4L -TarpitInterval 0
           
         * To verify the new setting, issue the following command:
           
           [PS] C:\Windows\system32>get-ReceiveConnector | select name,tarpitinterval
           
           The output should now look like this:
           
           Name TarpitInterval
           ---- --------------
           Default EXCHANGE01 00:00:05
           Client EXCHANGE01 00:00:05
           SIQ4L 00:00:00