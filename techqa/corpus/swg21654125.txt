Title: IBM ITNM failover is not working, backup domain doesn't become primary - United States

Text:
ignoring; failover; standby; virtualdomain TECHNOTE (TROUBLESHOOTING)

THIS DOCUMENT APPLIES ONLY TO THE FOLLOWING LANGUAGE VERSION(S):
 English 

PROBLEM(ABSTRACT)
 Backup ncp_g_event trace file contains the message, "Currently in standby mode of a failover pair, so ignoring update" 

SYMPTOM
Primary can fail, backup domain doesn't take control of the failover pair.


CAUSE
One cause, NmosEventMap must be populated with ItnmHealthChk. In Standby mode the ncp_g_event pulls these events 

(EventId in ('ItnmHealthChk', 'ItnmDatabaseConnection'))

But ncp_g_event needs NmosEventMap to contain 'ItnmHealthChk' for correct processing

Summary='Precision health check fail event for domain P3D from backup domain: B3D',

EventId='ItnmHealthChk',
Serial=13879265,
NmosObjInst=0,
LastOccurrence='2013-10-24 09:32:34',
Severity=4,
NmosCauseType=0,
NmosEventMap='',


DIAGNOSING THE PROBLEM
Review ncp_g_event at debug 4 for the trace file.



RESOLVING THE PROBLEM
Check the nco_p_ncpmonitor.rules file to make sure NmosEventMap still contains the ItnmHealthCheck. A Rawcapture of the probe can assist with this. If it's found Rawcapture shows the correct NmosEventMap, then TBSM and Impact should also be checked to see if they are damaging NmosEventMap in the Objectserver. 

 

The ncp_g_event will try to process the ItnmHealthChk as a regular event 


Found event map 'genericip-event' for 'ItnmHealthChk'(13879265)

which is incorrect, ItnmHealthChk should always be processed as

Found event map 'ItnmHealthChk' for 'ItnmHealthChk'(13879074)