Title: IBM After installing Portal 8.5 attempts to change the URI fails - United States

Text:
URI; Could not commit with auto-commit; Oracle TECHNOTE (TROUBLESHOOTING)

PROBLEM
After installing WebSphere Portal 8.5 you attempt to change the Portal URI by following these instructions...

http://www-01.ibm.com/support/knowledgecenter/SSHRKX_8.5.0/mp/config/cfg_intr.dita?lang=en [http://www-01.ibm.com/support/knowledgecenter/SSHRKX_8.5.0/mp/config/cfg_intr.dita?lang=en]

However, step 4d fails while running the task...
action-register-wcm-nodetypes

SYMPTOM
The ConfigTrace.log shows the following...

Fri Oct 03 11:56:54 EDT 2014
register-nodetypes:
Target started: register-nodetypes
[echo] registering nodeTypes using
/WebSphere/PortalServer/wcm/prereq.wcm/config/nodetypes/ibmcontentwcm.re
gisternodetypes file
--- Exception Thrown ---
/WebSphere/PortalServer/jcr/wp.content.repository.install/config/include
s/jcr.install_cfg.xml:827: com.ibm.icm.jcr.task.TaskException:
TASK001X: Remote task execution failed with response code 500 due to
exception : com.ibm.icm.jcr.serialization.SerializationException:
SCH0055E: Error unregistering content type:
ibmcontentwcm:classificationData with application wcm and URI:
{2}.[ErrorCode:10040] Unable to de-register the application from the
node type. . Please check the server log for more information.
at
com.ibm.icm.jcr.task.AbstractRemoteTask.execute(AbstractRemoteTask.java:
877)

...

Caused by: com.ibm.icm.jcr.task.TaskException: TASK001X: Remote task
execution failed with response code 500 due to exception :
com.ibm.icm.jcr.serialization.SerializationException: SCH0055E: Error
unregistering content type: ibmcontentwcm:classificationData with
application wcm and URI: {2}.[ErrorCode:10040] Unable to de-register
the application from the node type. . Please check the server log for
more information.
at
com.ibm.icm.jcr.task.AbstractRemoteTask.execute(AbstractRemoteTask.java:
856)
... 80 more

Review of the SystemOut.log at this same time shows...

[10/3/14 11:56:55:676 EDT] 000000eb FfdcProvider W
com.ibm.ws.ffdc.impl.FfdcProvider logIncident CWRDC1003I: FFDC Incident
emitted on
/WebSphere/wp_profile/logs/ffdc/WebSphere_Portal_6f2469c6_14.10.03_11.56
.55.655229050007399594953.txt
com.ibm.ws.rsadapter.jdbc.WSJdbcConnection.commit 587
[10/3/14 11:56:55:680 EDT] 000000eb RegisterNodeT E SER3034E:
Exception in end element.
javax.jcr.RepositoryException:
SCH0055E: Error unregistering content type:
ibmcontentwcm:classificationData with application wcm and URI: {2}.
[ErrorCode:10040] Unable to de-register the application from the node
type.

Review of the FFDC log shows...

[10/3/14 11:56:55:656 EDT] FFDC Exception:java.sql.SQLException
SourceId:com.ibm.ws.rsadapter.jdbc.WSJdbcConnection.commit ProbeId:587
Reporter:com.ibm.ws.rsadapter.jdbc.WSJdbcConnection@3368ac28
java.sql.SQLException: Could not commit with auto-commit set on
at
oracle.jdbc.driver.PhysicalConnection.commit(PhysicalConnection.java:235
6)


CAUSE
Known defect that is resolved in CF02 for Portal 8.5

ENVIRONMENT
Portal 8.5
Linux
Oracle 12c

DIAGNOSING THE PROBLEM
Review ConfigTrace.log and then SystemOut.log and then the corresponding FFDC log

RESOLVING THE PROBLEM
Apply CF02 and re-run the action-register-wcm-nodetypes task