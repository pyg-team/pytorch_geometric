Title: IBM IT07544: HUNG THREADS ON SERVER STARTUP SEEN AFTER APPLYING THE PRELOAD PROPERTY ON MEDIATION FLOWS - United States

Text:
  DIRECT LINK TO FIX
bpm.8570.cf2017.06.delta.repository [http://www.ibm.com/support/fixcentral/quickorder?product=ibm%2FWebSphere%2FIBM+Business+Process+Manager+Standard&fixids=bpm.8570.cf2017.06.delta.repository&source=SAR]



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  The server becomes unresponsive after start up and the
   SystemOut.log reports multiple threads are hung with a similar
   stack to the following:
   
   WSVR0605W: Thread "server.startup : 2" (0000007f) has been
   active for 642780 milliseconds and may be hung. There is/are 1
   thread(s) in total in the server that may be hung.
   at java.net.URLEncoder.encode(URLEncoder.java:206)
   at
   com.ibm.ws.sibx.scax.mediation.engine.utils.TableValueUtils.toke
   nizeTableValues(TableValueUtils.java:137)
   at
   com.ibm.ws.sibx.scax.mediation.engine.utils.PropertySetter.resol
   veProperties(PropertySetter.java:716)
   at
   com.ibm.ws.sibx.scax.mediation.component.ESBFlowAnalyzer.resolve
   Properties(ESBFlowAnalyzer.java:326)
   at
   com.ibm.ws.sibx.scax.mediation.component.ESBFlowAnalyzer.analyze
   JavaMediationPrimitive(ESBFlowAnalyzer.java:232)
   at
   com.ibm.ws.sibx.scax.mediation.component.ESBFlowAnalyzer.analyze
   Node(ESBFlowAnalyzer.java:218)
   at
   com.ibm.ws.sibx.scax.mediation.component.ESBFlowAnalyzer.recurse
   toNextNode(ESBFlowAnalyzer.java:204)
   at
   com.ibm.ws.sibx.scax.mediation.component.ESBFlowAnalyzer.analyze
   JavaMediationPrimitive(ESBFlowAnalyzer.java:271)
   at
   com.ibm.ws.sibx.scax.mediation.component.ESBFlowAnalyzer.analyze
   Node(ESBFlowAnalyzer.java:218)
   at
   com.ibm.ws.sibx.scax.mediation.component.ESBFlowAnalyzer.recurse
   toNextNode(ESBFlowAnalyzer.java:204)
   at
   com.ibm.ws.sibx.scax.mediation.component.ESBFlowAnalyzer.analyze
   JavaMediationPrimitive(ESBFlowAnalyzer.java:267)
   at
   com.ibm.ws.sibx.scax.mediation.component.ESBFlowAnalyzer.analyze
   Node(ESBFlowAnalyzer.java:218)
   at
   com.ibm.ws.sibx.scax.mediation.component.ESBFlowAnalyzer.recurse
   toNextNode(ESBFlowAnalyzer.java:204)
   at
   com.ibm.ws.sibx.scax.mediation.component.ESBFlowAnalyzer.analyze
   JavaMediationPrimitive(ESBFlowAnalyzer.java:267)
   at
   com.ibm.ws.sibx.scax.mediation.component.ESBFlowAnalyzer.analyze
   Node(ESBFlowAnalyzer.java:218)
   ...
   
   
    
   
   

LOCAL FIX

PROBLEM SUMMARY
 *  ****************************************************************
   USERS AFFECTED:
   Users of Business Process Manager v8.5 who are making use of the
   preload WebSphere environment variable to load mediation flows
   at application startup.
   
   ****************************************************************
   PROBLEM DESCRIPTION:
   When the mediation flow is first built (during preload) all of
   the flow's nodes need to be analysed so that any promoted
   properties can be resolved. The process by which this occurs was
   found to have some inefficiencies that lead to excessive looping
   and ultimately resulted in the preload taking a long time.
   
   
    
   
   

PROBLEM CONCLUSION
 *  The code has been optimized to reduce the time taken to analyse
   the flow's nodes which has subsequently reduced the time
   required for the application server to start up.
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   IT07544
   
   
 * REPORTED COMPONENT NAME
   WESB IN BPM
   
   
 * REPORTED COMPONENT ID
   AIMCMFC00
   
   
 * REPORTED RELEASE
   855
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt / Xsystem
   
   
 * SUBMITTED DATE
   2015-03-06
   
   
 * CLOSED DATE
   2015-03-25
   
   
 * LAST MODIFIED DATE
   2015-03-25
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   WESB IN BPM
   
   
 * FIXED COMPONENT ID
   AIMCMFC00
   
   

APPLICABLE COMPONENT LEVELS
 * R855 PSY
   UP