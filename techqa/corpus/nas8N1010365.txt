Title: IBM CHGASPACT Timers - United States

Text:
IASP TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 There are two important timers used with the CHGASPACT command: the Suspend Timeout (SSPTIMO) parameter and the Option (OPTION) parameter. 

RESOLVING THE PROBLEM
There are two important timers used with the CHGASPACT command: the Suspend Timeout (SSPTIMO) parameter and the Option (OPTION) parameter with the value*RESUME action. 

The first timeout is the Suspend Timeout (SSPTIMO) parameter on the command itself. This timeout describes how long to wait during suspend processing. Its main function is to wait for transactions to reach commit boundaries. Suspend processing will not complete until all suspend operations have completed or the timeout expires, whichever comes first.

If the system was unable to be suspended before the timeout period expires, the suspend timeout action (SSPTIMOACN) is used to determine what to do.

If SSPTIMOACN(*END) was specified and the timeout period has expired, the system automatically resumes any transactions that were successfully suspended, essentially backing out the suspend and leaving the system active. 

If SSPTIMOACN(*CONT) was specified and the timeout period has expired, the system will continue with the suspend process until it is successfully suspended. If the system was unable to be suspended before the timeout period expires, the suspend timeout action (SSPTIMOACN) is used to determine what to do. 

If the suspend processing successfully completes within the specified time, the CPCB717 "Access is suspended" message is issued.

The normal process flow is as follows:

1. Suspend access to the ASP/IASP. (CHGASPACT *SUSPEND)

2. User does some operation (such as a flashcopy) that requires the ASP/IASP to be suspended.

3. Resume access to the ASP/IASP (CHGASPACT *RESUME).

Although it is not always known what actions the user will to do while suspended, or how long that should take, transactions and operations are supposed to remain suspended with no permitted access to the ASP/IASP until the Resume occurs. This can be a source of problems because a user's interactive session might get hung up during this time (for example, if the user attempts to access a database record while suspended, that access would hang the session). So, there is a 'safety valve' that allows the system to continue running if the user session gets hung up and can not issue the CHGASPACT *RESUME directly. This 'safety valve' timer is in SLIC and should automatically resume ASP/IASP access after 20 minutes. However, you should not rely on this safety valve. It is best to manually issue the Resume (CHGASPACT *RESUME) when ready to continue processing. The 'safety valve' is there just in case a user's job gets hung up and the Resume cannot be issued.

CHGASPACT *SUSPEND does not suspend ALL activity, only database transactions and database operations. Non-database file activity still continues. The system suspends as much as it can; however, it cannot suspend everything. If the user truly wants all activity halted, a vary off of the IASP is the only mechanism to use.




HISTORICAL NUMBER
 673003006