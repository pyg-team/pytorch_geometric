Title: IBM Accessing Site Preferences may result in a, java.lang.IllegalArgumentException: can't parse argument number,  exception - United States

Text:
Workplacext; corbaloc; site preferences TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 Accessing the Site Preferences feature in FileNet WorkplaceXT deployed in IBM Websphere Application Server results in a generic system error message. Inspecting the SystemOut.log, the following exception is logged : java.lang.IllegalArgumentException: can't parse argument number. 

SYMPTOM
Other functionality of WorkplaceXT such as browsing or accessing documents is not affected, only the Site Preferences features returns an error when accessed. 

The following error stack may appear in the IBM Websphere Application Server SystemOut.log : 

 

com.ibm.ws.webcontainer.webapp.WebApp logServletError SRVE0293E: [Servlet Error]-[/WcmSitePreferences.jsp]: java.lang.IllegalArgumentException: can't parse argument number
at java.text.MessageFormat.makeFormat(MessageFormat.java:1350)
at java.text.MessageFormat.applyPattern(MessageFormat.java:469)
at java.text.MessageFormat.<init>(MessageFormat.java:361)
at java.text.MessageFormat.format(MessageFormat.java:822)
at com.filenet.wcm.toolkit.util.WcmException.toString(WcmException.java:283)
at com.filenet.wcm.toolkit.util.WcmException.getLocalizedMessage(WcmException.java:259)
at com.filenet.wcm.toolkit.server.ui.WcmErrorMessageBox.render(WcmErrorMessageBox.java:240)
at com.filenet.wcm.toolkit.server.util.FrameworkException.renderErrorMessageBox(FrameworkException.java:265)
at com.ibm._jsp._WcmError._jspService(_WcmError.java:125) 
...


CAUSE
This behavior occurs when WorkplaceXT is configured to communicate to multiple Content Platform Engine servers which are deployed in a Websphere cluster and the corbaloc URL configured is incomplete.



DIAGNOSING THE PROBLEM
Inspect WcmApiConfig.properties located in <WXT_install_dir>\WorkplaceXT\WEB-INF\ and ensure that the three URLs for RemoteServerUrl, RemoteServerUploadUrl and RemoteServerDownloadUrl contain a cemp prefix, for example : 


cemp:corbaloc::testnode1:9810,:testnode2:9810/cell/clusters/testwascluster/FileNet/Engine 

The behavior described occurs if the prefix is missing : 

corbaloc::testnode1:9810,:testnode2:9810/cell/clusters/testwascluster/FileNet/Engine 





RESOLVING THE PROBLEM
Edit the WcmApiConfig.properties file if you determine that the cemp: prefix is missing. If any change is applied to the WcmApiConfig.properties file, refer to the P8 Knowledge Center for instructions on rebuilding the WAR and EAR files and redeploying the WorkplaceXT application for the changes to take effect.