Title: IBM PK31639: ABEND=SEC6 U0000 REASON=0D1A0601 - United States

Text:
z/os  A FIX IS AVAILABLE
Obtain the fix for this APAR.


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  This customer is testing a recovery scenario.  He cancelled the
   qmgr  which did recovery successfully. However the batch
   application, MQPROC1terminated with a 6C6 abend. The
   application was sitting in a USS sleep syscall when the 6C6
   abend occurred.  The psw at the time points into a wait module.
   
   
    
   
   

LOCAL FIX

PROBLEM SUMMARY
 *  ****************************************************************
   * USERS AFFECTED: All users of WebSphere MQ for z/OS Version 6 *
   *                 Release 0.                                   *
   ****************************************************************
   * PROBLEM DESCRIPTION: Batch jobs get unexpected ABENDS6C6     *
   *                      after cancel of queue-manager, which    *
   *                      can lead to ABENDSEC6 with RC0D1A0601.  *
   ****************************************************************
   * RECOMMENDATION:                                              *
   ****************************************************************
   A batch application task issues an MQ API call.
   
   During processing of the request, CSQAPRHX resets EBACTL to
   indicate that the execution unit is active in the queue-manager.
   
   A CANCEL command is then issued against the queue-manager.
   CSQVATRM is invoked for abnormal termination processing.
   CSQVATRM issues an LXFRE to release all LX's associated with
   its PC routines.
   
   CSQAPRHX continues processing the MQ API call and attempts to
   PC to CSQMCPRH. However, as the LX has been freed, abend S0D6
   RC22 is issued. CSQAPRHX's ESTAE is invoked for the abend and
   detects that the queue-manager is abending and therefore does
   not set EBACTL to indicate that the execution unit is no
   longer active in the queue-manager. The ESTAE then passes MQRC
   2009, MQRC_CONNECTION_BROKEN, back to the application.
   
   CSQVATRM continues termination processing and detects that
   EBACTL is not set for the application task referred to above.
   An SRB is then scheduled to abend the task.
   
   The SRB executes in the batch address space and issues a CALLRTM
   TYPE=ABTERM to abend the application task with S6C6. In this
   case, the abend occurs when the application is in a Unix System
   Services sleep(). This results in abend SEC6 with reason
   0D1A0601.
   
   Another symptom of this problem is abend U113 in an IMS DL/I CTL
   region if the S6C6 occurs when an IMS transaction is executing a
   DL/I call.
   
   Additional keywords :
   ABEND6C6 6C6 ABENDU113 ABEND113 U0113 ABENDU0113 0113 113
   ABEND0D6 0D6 ABENDS0D6 00000022 22 ABENDEC6 EC6 0D1A0601
   
   
    
   
   

PROBLEM CONCLUSION
 *  CSQAPRHX's ESTAE has been changed so that EBACTL is set unless
   the queue-manager has finished abnormal termination processing,
   before returning MQRC 2009 back to the application.
   000Y
   CSQAPRHS
   CSQAPRHX
   CSQARIB
   CSQDRIB
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   PK31639
   
   
 * REPORTED COMPONENT NAME
   WMQ Z/OS V6
   
   
 * REPORTED COMPONENT ID
   5655L8200
   
   
 * REPORTED RELEASE
   000
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   YesSpecatt / CST
   
   
 * SUBMITTED DATE
   2006-09-20
   
   
 * CLOSED DATE
   2006-09-27
   
   
 * LAST MODIFIED DATE
   2006-11-09
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
    PK15069
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
    UK18330
   
   

MODULES/MACROS
 *     CSQAPRHS CSQAPRHX CSQARIB  CSQDRIB
   
   
    
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   WMQ Z/OS V6
   
   
 * FIXED COMPONENT ID
   5655L8200
   
   

APPLICABLE COMPONENT LEVELS
 * R000 PSY UK18330 [HTTPS://WWW14.SOFTWARE.IBM.COM/WEBAPP/SET2/ORDERMEDIA/SHOPCART?PTFS=UK18330]
   UP06/10/06 P F610
   
   

FIX IS AVAILABLE
 * SELECT THE PTF APPROPRIATE FOR YOUR COMPONENT LEVEL. YOU WILL BE REQUIRED TO SIGN IN. DISTRIBUTION ON PHYSICAL MEDIA IS NOT AVAILABLE IN ALL COUNTRIES.