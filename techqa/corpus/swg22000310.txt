Title: IBM FNRCP0002E: PERSIST_ADDON_INSTALLATION_FAILED: The installation of the AddOn Upgrade 5.2.0 FP2->5.2.1 Social Collaboration Notifications Extensions into the object store failed error encountered when upgrading IBM FileNet Content Platform Engine (CPE) - United States

Text:
 TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 When upgrading CPE, the AutomaticUpgradeStatus page shows that the upgrade is still in progress but it never completes. 

SYMPTOM
In p8_server_error.log, the following error stack is observed: 

FNRCP0002E - ERROR ObjectStoreUpgrade(OS_Name) Transaction failed (Exception encountered with upgrader task). 
com.filenet.api.exception.EngineRuntimeException: FNRCP0002E: PERSIST_ADDON_INSTALLATION_FAILED: The installation of the AddOn Upgrade 5.2.0 FP2->5.2.1 Social Collaboration Notifications Extensions into the object store ECMClient failed. The installation report follows: PostImportScriptMethod failed with exception: There was an error running the script. Message was: Wrapped com.filenet.api.exception.EngineRuntimeException: FNRCE0051E: E_OBJECT_NOT_FOUND: The requested item was not found. Object identity: classId=ClassSubscription&objectId={xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx}&objectStore={xxxxxxxx-xxxx-xxxx-xxxxxxxxxxxx}. Class name: (#18) failedBatchItem=0
.
.
.
Caused by: com.filenet.api.exception.EngineRuntimeException: FNRCZ0001E: SCRIPT_ERROR: There was an error running the script. Message was: Wrapped com.filenet.api.exception.EngineRuntimeException: FNRCE0051E: E_OBJECT_NOT_FOUND: The requested item was not found. Object identity: classId=ClassSubscription&objectId={xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx}&objectStore={xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx}. Class name: ClassSubscription. (#18) failedBatchItem=0
... 22 more
Caused by: org.mozilla.javascript.WrappedException: Wrapped com.filenet.api.exception.EngineRuntimeException: FNRCE0051E: E_OBJECT_NOT_FOUND: The requested item was not found. Object identity: classId=ClassSubscription&objectId={xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx}&objectStore={xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx}. Class name:
at org.mozilla.javascript.Context.throwAsScriptRuntimeEx(Context.java:1754)
at org.mozilla.javascript.MemberBox.invoke(MemberBox.java:148)
at org.mozilla.javascript.NativeJavaMethod.call(NativeJavaMethod.java:225)
at org.mozilla.javascript.optimizer.OptRuntime.callN(OptRuntime.java:52)
at org.mozilla.javascript.gen.c_1._c_PostImportScriptMethod_1(:18)
at org.mozilla.javascript.gen.c_1.call()
at org.mozilla.javascript.ContextFactory.doTopCall(ContextFactory.java:394)
at org.mozilla.javascript.ScriptRuntime.doTopCall(ScriptRuntime.java:3091)
at org.mozilla.javascript.gen.c_1.call()
at org.mozilla.javascript.ScriptRuntime.call(ScriptRuntime.java:1041)
at com.filenet.engine.script.JavaScriptEngine$CompiledScope.execute(JavaScriptEngine.java:182)
... 25 more
Caused by: com.filenet.api.exception.EngineRuntimeException: FNRCE0051E: E_OBJECT_NOT_FOUND: The requested item was not found. Object identity: classId=ClassSubscription&objectId={xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx}&objectStore={xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx}. Class name: ClassSubscription. failedBatchItem=0
.
.


CAUSE
Sometimes when Social Collaboration add-ons are installed, but the functionality provided by the add-ons is never used, performance problems may arise. So in one particular case, in order to tackle the performance issues caused by some items (event handlers primarily) installed by these add-ons, some of the items were manually disabled/deleted. 

There is no "uninstall" option for add-ons. CPE V5.2.1 includes some updates for those add-ons, and because they are recorded as being installed, the upgrade will automatically try to apply those updates, which then fails because some of the items it is trying to update have been removed. 



RESOLVING THE PROBLEM
This requires removal of references to those unused add-ons from the GCD. Please contact IBM Support to assist with the procedure to remove references to the installed add-ons. Once the references have been removed the upgrade process should complete normally. 





Cross reference information Segment Product Component Platform Version Edition Enterprise Content Management FileNet Content Manager Content Engine AIX, Linux, Windows 5.2.1 Enterprise Content Management FileNet P8 Platform Content Engine Windows, AIX, Linux 5.2.1