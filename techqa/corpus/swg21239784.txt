Title: IBM FLEXlm error:-16,287 using clearmake with Sun Workshop 5.0 compiler - United States

Text:
CC; SunPro; clearmake; build; compile; /opt/SUNWspro/bin/cc; License; not responding still trying; Cannot read data from license server; Feature:workshop.c.sparc; FLEXlm error:-16; 287; System Error: 22; Invalid argument; 1239784; RATLC00772084; ATTOL Testware; annot read license file data from server; No authorized use; ***Error code 7; ClearCase TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 This technote explains why the IBM® Rational® ClearCase® clearmake utility fails to build on Sun® Solaris® using Sun Workshop 5.0 along with instructions to resolve the problem. 

SYMPTOM
 

These symptoms may be experienced: 

 * Attempts to perform a build on Solaris using clearmake with Sun Workshop 5.0 can result in errors like this: %> clearmake 
   /opt/SUNWspro/bin/cc -c foo.c
   
   License : Server (flexlic) not responding still trying
   Cannot read data from license server
   Feature:workshop.c.sparc
   Hostname:flexlic
   FLEXlm error:-16,287. System Error: 22 Invalid argument
   
   
   OR 
   
    
   
   License Error : Cannot find the license server (license1)
   in the network database for product(Sun WorkShop Compiler C++) 
   Cannot find SERVER hostname in network database (-14,7:22) Invalid 
   argument 
   *** Error code 1 
   clearmake: Error: Build script failed for "cmdbuilder.o"
   
   

 * Errors using ATTOL tool in combination with ClearMake.

 *  When attolprepro calls the licence manually, the corresponding license is correctly used. However, when using clearmake, this error appears: 

 *  ATTOL Testware - License manager: FLEXlm error, Cannot read license file data from server No authorized use 
   
   ***Error code 7
   
   


CAUSE
 

The version of FLEXlm the Sun Workshop 5.0 compiler uses has a defect such that it can not handle having a limit of greater than 1024 file descriptors resulting in an inability to contact the license server and hang.


DIAGNOSING THE PROBLEM
 

If the above error occurs, confirm the limit on the number of file descriptors is available. 

The command to do this is dependent on the shell, but for csh it is:

[csh]> limit descriptors
descriptors 16384

If the returned value is greater than 1024 the problematic behavior is observed. 


RESOLVING THE PROBLEM
 


WORKAROUND:


 1. Using Sun Workshop 5.0 compiler and if not using parallel builds, set the soft and hard limits to 1024 prior to running make/clearmake:
    
    %> limit descriptors 1024
    %> limit -h descriptors 1024
    %> clearmake
    /opt/SUNWspro/bin/cc -c foo.c
    
    Note: If using parallel builds, the hard limit will need to be increased on each host.
    
    
 2. If that does not work attempt to set into the view (cleartool setview) and then set the new limits. For example (kshell)
    
    %> ulimit -H -S -n 1024
    
    
 3. If that fails, you may need to upgrade to the latest version of the SunPro compiler [http://developers.sun.com/sunstudio/support/support_matrix.jsp].






Cross Reference information Segment Product Component Platform Version Edition Software Development Rational ClearCase Operating System Configurations Software Development Rational ClearCase Rational Common Licensing