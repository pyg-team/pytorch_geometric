Title: IBM After reboot SKLM fails to startup on zLinux 6.x with /tmp mounted with noexec - United States

Text:
 TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 System is install but after rebooting, SKLM/WebSphere process does not start. If /tmp is mounted with exec attribute then server starts up just fine 

RESOLVING THE PROBLEM
To resolve this issue so you can reboot with noexec on /tmp and that SKLM starts after reboot please take the following steps. First you may get a java core or core dump file and see a message like the following: 

JVMDUMP013I Processed dump event "traceassert", detail "".
11:46:19.950 0x7cabbd00 j9shr.1009 * ** ASSERTION FAILED ** at
CompositeCache.cpp:3892: ((0 ))
JVMDUMP039I Processing dump event "traceassert", detail "" at
2017/08/04 07:46:19 - please wait. 


For these types of crash issue we have suggested to clear all the previous cache entries

See instructions on how to clear the WebSphere class caches

http://www-01.ibm.com/support/docview.wss?uid=swg21607887

Add JVM generic argument to "-Xshareclasses:none", you will need to modify the server.xml file:

Location of server.xml:

/opt/IBM/WebSphere/AppServer/profiles/KLMProfile/config/cells/SKLMCell/nodes/SKLMNode/servers/server1/server.xml

Search for "<jvmEntries " in server.xml file. You will see an entry like:

<jvmEntries xmi:id="JavaVirtualMachine_1183122130078" verboseModeClass="false" verboseModeGarbageCollection="false" verboseModeJNI="false" runHProf="false" hprofArguments="" debugMode="false" debugArgs="-agentlib:jdwp=transport=dt_socket,server=y,suspend=n,address=7777" genericJvmArguments="">

You need to add the JVM argument towards the end where you see a property name genericJbmArguments. See example below:

Example:
<jvmEntries xmi:id="JavaVirtualMachine_1183122130078" verboseModeClass="false" verboseModeGarbageCollection="false" verboseModeJNI="false" runHProf="false" hprofArguments="" debugMode="false" debugArgs="-agentlib:jdwp=transport=dt_socket,server=y,suspend=n,address=7777" genericJvmArguments=" -Xshareclasses:none">


Also you may see the soft limit setting is set not unlimited

RLIMIT_CORE 0 unlimited

Set ulimit -c to unlimited for soft limit also

"Guidelines for setting ulimits"
http://www-01.ibm.com/support/docview.wss?rs=180&uid=swg21469413

A restart is needed after making all the changes above and then SKLM should start after reboot with noexec on /tmp



PRODUCT ALIAS/SYNONYM
 Security Key Lifecycle Manager restart