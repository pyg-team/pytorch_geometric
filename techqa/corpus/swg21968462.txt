Title: IBM Problems Running the Database Upgrade Scripts for an OpenPages Upgrade - United States

Text:
 TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 When attempting to run the database upgrade scripts, one set of scripts appear to be failling. 

SYMPTOM
When attempting to run the database upgrade scripts, the script fails with an error. For example, see the following snippet: 

Trigger created.

Loading table trigger: trg_ROLE_TPL_OBJ_ACLS_A_IUD

Trigger created.

Loading table trigger: trg_OP_HIERARCHY_B_D

Trigger created.

Loading table trigger: trg_OP_HIERARCHY_AUDIT_A_IUD

Trigger created.

Loading table trigger: trg_OP_HIERARCHY_LEVEL_AUDIT_A_IUD

Trigger created.

Loading table trigger: trg_PROP_DEFS_HIERARCHY_AUDIT_A_IUD

Trigger created.

Begin Loading OP 5.0 Upgrade and Merge Utilities
Loading package spec: UTIL_OP50_UTILITIES

Package created.

Loading package spec: UTIL_OP50_UPGRADE_MGR

Package created.

Loading package body: UTIL_OP50_UTILITIES

Package body created.

Loading package body: UTIL_OP50_UPGRADE_MGR

Package body created.

Done Loading OP 5.0 Upgrade and Merge Utilities
Adding back application-specific Oracle jobs for the current user

PL/SQL procedure successfully completed.

Executing PL/SQL block: Recompiling invalid source type objects, if any
No compilation errors detected

PL/SQL procedure successfully completed.

Stored procedural code load complete
Updating application data
Starting OP-C10EK-update-permission.sql

0 rows updated.


1 row updated.


1 row created.


PL/SQL procedure successfully completed.


PL/SQL procedure successfully completed.


Commit complete.

Application data update complete
Upgrading Real Time Reporting Schema
begin
*
ERROR at line 1:
ORA-20555: -12|
ORA-06512: at "OPENPAGES.OP_EXCEPTION_MGR", line 286
ORA-06512: at "OPENPAGES.OP_CONTEXT_MGR", line 72
ORA-06512: at line 2 
CAUSE
The database is in an invalid state.


DIAGNOSING THE PROBLEM
To diagnose and troubleshoot the issue: 

 *  Open all the SQL scripts in a text editor. Open the log file that contains the error. Find a prompt comment just before the error. In the above example: Upgrading Real Time Reporting Schema Using the comment string, search through the SQL files to determine which script failed. 

In the above working example, the string was found in: dbu-20-20-00-opx-schema-owner.sql. When opening the file in the working example, we can see: 

prompt Upgrading Real Time Reporting Schema
@@dbu-20-20-40-opx-reporting_schema_upgrade.sql
prompt Upgrading Real Time Reporting Schema complete So the script ran the prompt: Upgrading Real Time Reporting Schema After showing the prompt, it's now executing the script: dbu-20-20-40-opx-reporting_schema_upgrade.sql Troubleshooting should now be narrowed to the script that failed. 
RESOLVING THE PROBLEM
Resolve the issue in the script.