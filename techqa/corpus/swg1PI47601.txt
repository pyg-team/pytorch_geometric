Title: IBM PI47601: [WI 366521] - UPGRADE FAILS IF AN HISTORICBASIS ITEM GETS MODIFIED AFTER ONLINE MIGRATION HAS STARTED - United States

Text:
  FIXES ARE AVAILABLE
Collaborative Lifecycle Management Interim Fix 9 for 5.0.2 [http://www-01.ibm.com/support/docview.wss?uid=swg24041059]
Rational Team Concert Interim Fix 9 for 5.0.2 [http://www-01.ibm.com/support/docview.wss?uid=swg24041060]
Rational Team Concert Interim Fix 10 for 5.0.2 [http://www-01.ibm.com/support/docview.wss?uid=swg24041358]
Collaborative Lifecycle Management Interim Fix 5 for 6.0 [http://www-01.ibm.com/support/docview.wss?uid=swg24041368]
Rational Team Concert Interim Fix 11 for 5.0.2 [http://www-01.ibm.com/support/docview.wss?uid=swg24041486]
Collaborative Lifecycle Management Interim Fix 12 for 5.0.2 [http://www-01.ibm.com/support/docview.wss?uid=swg24041652]
Rational Team Concert Interim Fix 12 for 5.0.2 [http://www-01.ibm.com/support/docview.wss?uid=swg24041655]
Collaborative Lifecycle Management Interim Fix 6 for 6.0 [http://www-01.ibm.com/support/docview.wss?uid=swg24041709]
Rational Team Concert Interim Fix 6 for 6.0 [http://www-01.ibm.com/support/docview.wss?uid=swg24041711]
Collaborative Lifecycle Management Interim Fix 13 for 5.0.2 [http://www-01.ibm.com/support/docview.wss?uid=swg24042213]
Rational Team Concert Interim Fix 13 for 5.0.2 [http://www-01.ibm.com/support/docview.wss?uid=swg24042216]
Collaborative Lifecycle Management Interim Fix 14 for 5.0.2 [http://www-01.ibm.com/support/docview.wss?uid=swg24042217]
Rational Team Concert Interim Fix 14 for 5.0.2 [http://www-01.ibm.com/support/docview.wss?uid=swg24042220]
Collaborative Lifecycle Management Interim Fix 15 for 5.0.2 [http://www-01.ibm.com/support/docview.wss?uid=swg24042250]
Rational Team Concert Interim Fix 15 for 5.0.2 [http://www-01.ibm.com/support/docview.wss?uid=swg24042253]
Rational Team Concert 6.0.1 [http://www-01.ibm.com/support/docview.wss?uid=swg24041442]


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  Problem description
   The offline upgrade in IBM Rational Team Concert throws an error
   during the addTables operation.  The scm online migration code
   does not expect HistoricBasis items to ever be modified.
   However when a component is removed from a workspace and then
   added back it is modified. If this occurs after online migration
   has begun, then the offline migration will fail with an error.
   
   Error:
   "com.ibm.team.repository.common.InternalRepositoryException:
   CRJAZ0343I Executing executeBatch failed. The number of results
   returned was "88".SQL: INSERT INTO SCM.HISTORIC_ENTRY
   (WORKSPACE_ID, COMPONENT_ID, GRAPH_NODE_ID, HISTORY_ENTRY_INDEX,
   CONTRIBUTOR_ID, HISTORY_ENTRY_DATE, BASIS_ID, BASIS_COUNT,
   BASIS_NODE_HASH, BASIS_NODE_RANK, OPERATION_COL,
   HISTORY_ENTRY_PARTS) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
   SQL Exception #1
   SQL Message: [jcc][t4][102][10040][4.17.28] Batch failure.  The
   batch was submitted, but at least one exception occurred on an
   individual member of the batch.
   Use getNextException() to retrieve the exceptions for specific
   batched elements. ERRORCODE=-4229, SQLSTATE=null
   SQL State: null
   Error Code: -4229
   SQL Exception #2
   SQL Message: Error for batch element #80: DB2 SQL Error:
   SQLCODE=-803, SQLSTATE=23505, SQLERRMC=1;SCM.HISTORIC_ENTRY,
   DRIVER=4.17.28
   SQL Message: Error for batch element #1: DB2 SQL Error:
   SQLCODE=-803, SQLSTATE=23505, SQLERRMC=1;SCM.HISTORIC_ENTRY,
   DRIVER=4.17.28
   SQL State: 23505
   Error Code: -803
   Exception Details: CRJAZ0250I A statement attempted to insert a
   duplicate value in a table that requires unique values. For more
   information about the statement that failed, check the server
   logs."
   
   There are no errors in the application log files.
   
   Workaround:
   Upgrade without online migration
   
   For more information see work item:
   https://jazz.net/jazz/resource/itemName/com.ibm.team.workitem.Wo [https://jazz.net/jazz/resource/itemName/com.ibm.team.workitem.Wo]
   rkItem/366521
   
   
    
   
   

LOCAL FIX

PROBLEM SUMMARY
 *  ****************************************************************
   * USERS AFFECTED:                                              *
   * All users                                                    *
   ****************************************************************
   * PROBLEM DESCRIPTION:                                         *
   * Backport to RTC 5.0.2 iFix009 - [366521] Migration fails if  *
   * an HistoricBasis item gets modified after online migration   *
   * has started                                                  *
   ****************************************************************
   * RECOMMENDATION:                                              *
   ****************************************************************
   
   
    
   
   

PROBLEM CONCLUSION
 *  Fixed in 5.0.2 iFix009
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   PI47601
   
   
 * REPORTED COMPONENT NAME
   RATL TEAM CONCE
   
   
 * REPORTED COMPONENT ID
   5724V0400
   
   
 * REPORTED RELEASE
   502
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2015-08-26
   
   
 * CLOSED DATE
   2015-09-25
   
   
 * LAST MODIFIED DATE
   2015-09-25
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   RATL TEAM CONCE
   
   
 * FIXED COMPONENT ID
   5724V0400
   
   

APPLICABLE COMPONENT LEVELS
 * R600 PSN
   UP
   
   
 * R600 PSY
   UP