Title: IBM Specific LDAP accounts are unable to login via client side applications , FEM (FileNet Enterprise Manager), WorkplaceXT and ICN (IBM Content Navigator) - United States

Text:
 TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 FileNet Content Engine client side applications ,FEM (FileNet Enterprise Manager), WorkplaceXT and ICN (IBM Content Navigator) are unable to login with specific MSAD(Microsoft Active Directory) user accounts. User accounts that are able to login have a common characteristic in that their User attribute within AD for CN(canonical name) and samAccountName have the same value. 

SYMPTOM
Client side application (WPXT , ICN) JVM logs , systemout.log shows Authentication based errors in which user principal is NOT arriving at the Content Engine for Authorization check. 

[2/25/14 11:53:29:193 EST] 00000034 LTPAServerObj E SECJ0369E:
Authentication failed when using LTPA. The exception is CWWIM4537E No
principal is found from the 'xxx.yyy' principal name..
[2/25/14 11:53:29:239 EST] 00000034 FormLoginExte E SECJ0118E:
Authentication error during authentication for user xxx.yyy


CAUSE
User accounts that are not able to login have a common characteristic in that their User attribute within AD for CN(canonical name) and samAccountName are different values. Login attribute defined in WAS (WebSphere) and Content Engine Directory configuration User Tab value " User Short Name attribute" is different.

DIAGNOSING THE PROBLEM




 1.  Request LDIF from the MSAD server where user account in question resides, user that is failing in Authentication based error iin SystemOut.log:
    
    "xxx.yyy" user:
    
    <>ldifde -f "/output_file.txt" -s "ldap_server_name" -r "samaccountname="xxx.yyy" user in question
    
    example:
    
    <>ldifde -f /user.txt -s dc001.south.root.ca" -r "samaccountname=xxx.yyy"
    
    
 2. Examine ldifde file output for both the cn and samaccountname values. See if they are the same , if not verify which attribute should be used for client side application login.
    
    
 3. Change the WAS >Global Security>Federated Repositories>Manager repositories>Login attribute field to match the desired attribute.
    
    
    Note: in Websphere the "uid" attribute maps by default to the samAccountName attribute for AD(Active Directory). If choosing to map the uid to another attribute e.g. cn the "wimconfig.xml" will need to be modified as follows:'
    
    Websphere Federated Repositories only) Search the WebSphere application server profile for wimconfig.xml. Edit wimconfig.xml in the following way:
    
    Search for the propertyName="uid" entry (samAccountName in the example is for Active Directory; other directory servers have values such as cn or uid). (If the search does not find this entry, you might have to create the following):
    
    <config:attributes name="samAccountName" propertyName="uid">
    <config:entityTypes>PersonAccount</config:entityTypes>
    </config:attributes>
    
    
 4. Modify the propertyName="uid" entry for the desired attribute , e.g. "cn":
    
    
    <config:attributes name="cn" propertyName="uid">
    <config:entityTypes>PersonAccount</config:entityTypes>
    </config:attributes>
    
    
 5. Save wimconfig.xml.
    
    
 6. Restart Websphere application server
    
    
 7. In Content Engine FEM Directory configuration /User Tab > User Short Name attribute . This value needs to match what ever user name attribute that was defined in WAS Federated repositories as the login attribute.