Title: IBM Exporting and Importing Netcool/OMNIbus Object Server Users - United States

Text:
security.sql; nco_osreport; nco_confpack; security.users; Omnibus; object server TECHNOTE (FAQ)

QUESTION
 How can I replicate the user's from one Object Server into another Object Server? 

ANSWER
When adding a new Object Server to an environment, there are only two Object Server users created, the root and nobody user. Creating Object Server users is done easily from the nco_sql command line or from the Netcool Administrator for a one by one user creation. However, if you need to create 100 users, that can be a tedious task! Below are steps to export users from another Object Server and import users into a new Object Server. 

Note, these steps do completely overwrite the user information in the new Object Server, including user passwords. The Object Server root user password will not be affected. Be sure to backup the Object Server database prior to making any changes! 

The nco_osreport and nco_confpack utilities can be used to export and import Object Server users. The nco_osreport is only available in Omnibus 7.3.1 and later, so nco_confpack should be used in earlier versions. 

Using nco_osreport (Omnibus 7.3.1 or later)
1. First, backup both the old and new Object Server databases, from nco_sql or the Administrator interface, issue 

alter system backup 'full_directory_path' 


2. From $OMNIHOME/bin on the old Object Server, run 

./nco_osreport -directory Path -server OLDObjectServerName -user root -password rootpassword 

This will create several sql files in the directory specified. 


3. Edit the security.sql file. This contains the sql "create user", "create role", "create group", "alter group" and "grant role" commands. You can remove any users or edit the commands as desired to change the users, groups or roles created. If there is duplicate information in the creation commands, for example creating the Probe group which already exists in the new Object Server by default, that particular command will fail.

4. Copy the security.sql file to the new Object server

5. Load the security.sql file using nco_sql on the new Object Server. From $OMNIHOME/bin, run 

./nco_sql -server NEWObjectServerName -user root -password rootpassword < security.sql 

For any default Object Server users, groups or roles which already exist in the new Object Server, an error will be reported and the user, group or role will not be changed. 

Using nco_confpack (Any version)
1. First, backup both the old and new Object Server databases, from nco_sql or the Administrator interface, issue 

alter system backup 'full_directory_path' 


2. From $OMNIHOME/bin on the old Object Server, run 

./nco_confpack -list -server OLDObjectServerName -user root -file /tmp/nco_confpack.list.out 

This will create a file /tmp/nco_confpack.list.out with all the objects that can be exported and imported. 


3. Edit the file /tmp/nco_confpack.list.out, removing anything but Users, Groups and Roles that you want to migrate. Also remove the default Groups and Roles which are listed below. 

ObjectServer NCOMS Group Gateway
ObjectServer NCOMS Group ISQL
ObjectServer NCOMS Group ISQLWrite
ObjectServer NCOMS Group Probe
ObjectServer NCOMS Role AlertsGateway
ObjectServer NCOMS Role AlertsProbe
ObjectServer NCOMS Role AlertsUser
ObjectServer NCOMS Role AutoAdmin
ObjectServer NCOMS Role CatalogUser
ObjectServer NCOMS Role ChannelAdmin
ObjectServer NCOMS Role ChannelUser
ObjectServer NCOMS Role DatabaseAdmin
ObjectServer NCOMS Role DesktopAdmin
ObjectServer NCOMS Role ISQL
ObjectServer NCOMS Role ISQLWrite
ObjectServer NCOMS Role SecurityAdmin
ObjectServer NCOMS Role ToolsAdmin 


4. Export the Users, Groups and Roles based on the edited list. From $OMNIHOME/bin, run 

./nco_confpack -export -file /tmp/nco_confpack.list.out -package /tmp/nco_confpack.user.pkg -user root 

This will create a package of the user and group information /tmp/nco_confpack.user.pkg 


5. Copy the /tmp/nco_confpack.user.pkg to the new Object Server

6. Import the package into the New Object Server. From $OMNIHOME/bin, run 

./nco_confpack -package /tmp/nco_confpack.user.pkg -user root -server NEWObjectServerName 

At the prompt to continue, enter y to continue 

Test logging in as a user to verify the user security information was imported successfully.