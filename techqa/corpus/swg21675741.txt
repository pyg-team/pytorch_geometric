Title: IBM Solr Preprocessing fails after upgrading to WebSphere Commerce Feature Pack 6 - United States

Text:
 TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 After upgrading WebSphere Commerce V7.0 to Feature Pack 6, Solr preprocessing may fail. 

DIAGNOSING THE PROBLEM
In the wc-dataimport-preprocess.log you will see an SQL error like this: 

May 30, 2014 2:23:20 PM
com.ibm.commerce.foundation.dataimport.preprocess.DataImportPreProcessorMain handleExecutionException
SEVERE: Exception message: CWFDIH0002: An SQL exception was caught. The following error occurred: DB2 SQL Error: SQLCODE=-104, SQLSTATE=42601,SQLERRMC=);tryattr.attr_id in (;<value_expr_body>, DRIVER=4.14.103.,
stack trace:
com.ibm.commerce.foundation.dataimport.exception.DataImportSystemException: CWFDIH0002: An SQL exception was caught. The following error occurred: DB2 SQL Error: SQLCODE=-104, SQLSTATE=42601,SQLERRMC=);tryattr.attr_id in (;<value_expr_body>, DRIVER=4.14.103.
at com.ibm.commerce.foundation.dataimport.preprocess.DataImportPreProcessorMain.processDataConfig(DataImportPreProcessorMain.java:907)
at com.ibm.commerce.foundation.dataimport.preprocess.DataImportPreProcessorMain.execute(DataImportPreProcessorMain.java:759)
at com.ibm.commerce.foundation.dataimport.preprocess.DataImportPreProcessorMain.main(DataImportPreProcessorMain.java:286)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:60)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:37)
at java.lang.reflect.Method.invoke(Method.java:611)
at com.ibm.ws.bootstrap.WSLauncher.main(WSLauncher.java:267)
Caused by: com.ibm.db2.jcc.am.SqlSyntaxErrorException: DB2 SQL Error:SQLCODE=-104, SQLSTATE=42601, SQLERRMC=);tryattr.attr_id in (;<value_expr_body>, DRIVER=4.14.103


RESOLVING THE PROBLEM
This issue occurs when Solr has not been properly migrated after upgrading to Feature Pack 6. If you upgrade to Feature Pack 6 from a previous Feature Pack in which you had Solr deployed, you need to migrate your existing Solr catalogs to be compatible with Feature Pack 6. These steps are documented in the Knowledge Center [http://www-01.ibm.com/support/knowledgecenter/SSZLC2_7.0.0/com.ibm.commerce.developer.doc/tasks/tsdsearchmigrate.htm?cp=SSZLC2_7.0.0%2F4-3-17-0&lang=en].