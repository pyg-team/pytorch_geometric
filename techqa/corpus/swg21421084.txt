Title: IBM Recovering a deleted application - United States

Text:
5697WSZ01; 5697-WSZ; 5698-A17 TECHNOTE (FAQ)

QUESTION
 How can an unintentionally deleted TWSz Application Description be most easily recovered? 

CAUSE
TWSz APPLICATION DESCRIPTIONS are stored in a VSAM KSDS dataset, the EQQADDS. It may be necessary to "undelete" a given AD record.

ANSWER
It is possible to recover an individual AD record from a backup of the VSAM data set via REPRO with the FROMKEY/TOKEY option. The format of AD record keys is documented in the TWSz DIAGNOSIS GUIDE AND REFERENCE.. 

However, it is much easier to recover individual AD records from a BATCHLOADER-format flat file using the EQQYLTOP BATCHLOADER utility. 

In order to be able to use BATCHLOADER to restore a deleted AD record, it is necessary to first create a backup of the EQQADDS in BATCHLOADER FORMAT. This can be done by running the BCIT (Batch Command Interface Tool) with the following SYSIN: 


//SYSIN DD *
ACTION=OPTIONS,BL=Y,BLPRT=Y,LTP=N; 
ACTION=LIST,RESOURCE=ADCOM,ADID=*. 
/*

If a BCIT job is run regularly to create a "flat file" backup of the TWSz AD data base, it is a simple matter to extract the BATCHLOADER input statements for a single application from that backup, and to restore the application using the BATCHLOADER EQQYLTOP. For an example of BCIT JCL, see TWSz sample SEQQSAMP(EQQYCBAG). 
.
Users of the TWSz SOE tool can use a similar process to backup/restore individual records of any TWSz database. For details regarding SOE (Scheduling Operational Environment), check technote 1501911 at this URL:
>
> http://www-01.ibm.com/support/docview.wss?uid=swg21501911 [http://www-01.ibm.com/support/docview.wss?uid=swg21501911] 
>