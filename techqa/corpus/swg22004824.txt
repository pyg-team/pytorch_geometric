Title: IBM Modeler Server fails with Out Of Memory Error - United States

Text:
java out of memory TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 Attempts to run Modeler streams fail with "The Modeler Server JVM is out of memory, please increase the memory and have another try"



Previous attempts ran successfully and the nth attempt failed. 

SYMPTOM
Modeler fails and error message is displayed to the client. 


CAUSE
This has been identified as a product defect under APAR PI82847

The maximum allowed process per user limit on the system is set too low. 


ENVIRONMENT
Modeler 18 
Linux


DIAGNOSING THE PROBLEM
Review the Modeler server_logging.log

In the logs we see the following: 

2017-05-31 23:28:17,153 28696 0x7f88d4dfa700 TRACE SDLJVM 
JVMDUMP010I Heap dump written to 
/opt/fps2/modelerdata/heapdump.20170531.232817.28696.0002.phd 

2017-05-31 23:28:17,153 28696 0x7f88d4dfa700 TRACE SDLJVM 
JVMDUMP032I JVM requested Java dump using 
'/opt/fps2/modelerdata/javacore.20170531.232817.28696.0003.txt' in 
response to an event

A review of the heapdump shows:

Detail "java/lang/OutOfMemoryError" "Failed to create a thread: retVal 
-1073741830, errno 11" received message. 

This usually means you have run out of system threads. 





RESOLVING THE PROBLEM
Check the maximum allowed process per user limit on the system. 
You can use the ulimit-a command and look at the max user processes. 
If this is something low (default is 1024) you can increase it to 
unlimited with: 
ulimit -u unlimited