Title: IBM Lifecycle Query Engine application pages become unresponsive - United States

Text:
outofmemory; nativememory; preferredHeapBase; outage; hang TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 IBM Lifecycle Query Engine (LQE) application pages become unresponsive 

SYMPTOM
You cannot reach the application site



 1. You see the following error messages in lqe.log file:
    Caused by: java.lang.OutOfMemoryError: native memory exhausted 
    
    
 2. There is a javacore file generated. The top of the stack of current thread is the following:
    
    at java/lang/ClassLoader.defineClassImpl(Native Method)
    at java/lang/ClassLoader.defineClass(ClassLoader.java:273(Compiled Code))
    


CAUSE
There is not enough Native memory available to allocate class pointers, threads, monitor locks in the first 4GB memory region of the process.

ENVIRONMENT
Windows as an operating system



RESOLVING THE PROBLEM
There are two options to resolve the issue: 

 * WORKAROUND 1:
   remove -Xcompressedrefs -Xgc:preferredHeapBase=0x100000000 option from Java settings and add -Xnocompressedrefs. This will allocate the data structures like the class pointers, threads, monitor locks anywhere in the Native memory. The disadvantage of this method is that the application uses more JAVA Heap memory. The memory increase can be up to 70% more. Therefore you potentially have to increase -Xmx parameter as well and add more RAM to the server. For ideal server performance as a general guide line, 50% of the RAM should be available (Free) when the server is up and running. For reference on sizing guide lines please review CLM Sizing Strategy [https://jazz.net/wiki/bin/view/Deployment/CLMSizingStrategy] article.
   
   
 * Workaround 2:
   Set the registry value HKLM\System\CurrentControlSet\Control\Session Manager\Memory Management\AllocationPreference to (REG_DWORD)=0x100000 according to Compressed references [http://www-01.ibm.com/support/knowledgecenter/SSYKE2_7.0.0/com.ibm.java.win.70.doc/diag/understanding/mm_compressed_references.html] article.