Title: IBM UnsatisfiedLinkError when running WebSphere Business Integration Adapter Framework on AIX 64-bit together with WebSphere MQ 6.0 - United States

Text:
wbi; mysap; af; mq; wmb TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 WebSphere Business Integration Adapters (for example WebSphere Business Integration Adapter for mySAP.com) crash with UnsatisfiedLinkError. When installing the WebSphere Business Integration Adapter Framework on a 64-bit operating system and pointing to WebSphere MQ 6.0, there are mismatched MQ library versions. 

SYMPTOM
The WebSphere Business Integration Adapters (for example WebSphere Business Integration Adapter for mySAP.com) fail to start with the UnsatisfiedLinkError in the JAVAâ„¢ dump.


ENVIRONMENT
Problem appeared on following environment but applies to other 64-bit operating systems when installing WebSphere Business Integration Adapter Framework with WebSphere MQ 6.0. 

 * AIX 5.3 64-bit 
 * WebSphere Business Integration Adapter Framework 2.6.0.12, WebSphere Business Integration Adapter for mySAP.com, running on IBM JDK 1.4.2 
 * WebSphere Message Broker 6.1.0.3, WebSphere MQ 6.0

DIAGNOSING THE PROBLEM
JAVA stack dump is missing 32-bit MQ libraries: Stack Dump = java.lang.UnsatisfiedLinkError: /usr/mqm/java/lib/libmqjbnd05.so: load ENOENT on shared library(s) /usr/mqm/java/lib/libmqjbnd05.so libc 



RESOLVING THE PROBLEM
The UnsatisfiedLinkError points to missing MQ libraries that are required by the WebSphere Business Integration Adapters and Adapter Framework. The Adapter Framework is running with 32-bit JDK/JRE while MQ 6.0 and WebSphere Message Broker 6.x needs 64-bit libraries on a 64-bit operating system. 

When installing the WebSphere Business Integration Adapter Framework on a 64-bit environment, select the 32-bit MQ lib directory in the installation wizard. The installation wizard will set the MQ_LIB parameter value in the adapter script "adapterEnv.sh" as follows (depending on your MQ installation path): 

MQ_LIB=/usr/mqm/java/lib