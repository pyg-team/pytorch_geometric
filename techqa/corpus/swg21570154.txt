Title: IBM PKIX path building failed error when using authentication to external SSL LDAP Server - United States

Text:
SSL PKIX failed TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 If SSL certificates have been changed or are expired when communicating to an SSL LDAP server, we will get an error in the engine log stating:

"PKIX path building failed:security.provider.certpath.SunCertPathBuilderException: unable to find 
valid certification path to requested target" 

SYMPTOM
Unable to login to Initiate client applications for users that exist in the external LDAP registry.


CAUSE
SSL certificates have been updated on the SSL LDAP server and they no longer match the certificates imported in the JKS truststore used by Initiate. Also, the SSL certificates used in the JKS truststore could be expired and no longer valid. Finally, the system time and date could be off making the certificates expired.

DIAGNOSING THE PROBLEM
$MAD_ROOTDIR/jre/bin/keytool -list -keystore $MAD_ROOTDIR/conf/trust.jks 

(NOTE: In later versions of the IBM Initiate MDS engine the jre directory may be named _jvm. $MAD_ROOTDIR is the directory where the IBM Initiate MDS software is installed)

An alias will be listed on the certificate for your corporate LDAP server, in addition to the ldap-server-ssl-cert provided with the IBM Initiate MDS product. For example:

keytool -list -keystore trust.jks

Enter keystore password: (keystore password - contact support)

Keystore type: JKS
Keystore provider: SUN

Your keystore contains 3 entries

cn=www.initiatesystems.com, ou=r&d, o=initiate systems, l=austin, st=texas, c=us
, Aug 7, 2006, trustedCertEntry,
Certificate fingerprint (MD5): FF:FF:FF:FF:FF:FF:FF:FF:FF:FF:FF:FF:FF:FF:FF:FF
corportate-ldap-cert, Jul 16, 2010, trustedCertEntry,
Certificate fingerprint (MD5): 
FF:FF:FF:FF:FF:FF:FF:FF:FF:FF:FF:FF:FF:FF:FF:FF
ldap-server-ssl-cert, Mar 14, 2008, PrivateKeyEntry,
Certificate fingerprint (MD5): FF:FF:FF:FF:FF:FF:FF:FF:FF:FF:FF:FF:FF:FF:FF:FF


keytool -export -alias corporate-ldap-cert -file corporate-ldap-cert.cer -keystore trust.jks

Enter keystore password: (keystore password - contact support)

Certificate stored in file <corporate-ldap-cert.cer>


keytool -printcert -file coporate-ldap-cert.cer

Owner: CN=Company Private CA 1, O=Company Incorporated, C=US
Issuer: CN=Company Private CA 1, O=Company Incorporated, C=US
Serial number: FFFFFFFFFFFFFFFFFFFFFFFFFFFF
Valid from: Thu May 05 19:00:00 CDT 2005 until: Tue May 05 18:59:59 CDT 2011
Certificate fingerprints:
MD5: FF:FF:FF:FF:FF:FF:FF:FF:FF:FF:FF:FF:FF:FF:FF:FF
SHA1: FF:FF:FF:FF:FF:FF:FF:FF:FF:FF:FF:FF:FF:FF:FF:FF:FF:FF:FF:FF
Signature algorithm name: SHA1withRSA
Version: 3

Extensions:


RESOLVING THE PROBLEM
If it is determined that the LDAP certificates are expired or have been changed on the LDAP server, reimport the certificates with the following command: 


$MAD_ROOTDIR/jre/bin/keytool -import -alias corporate-ldap-cert -trustcacert -keystore $MAD_ROOTDIR/conf/trust.jks -storepass (contact support) -storetype JKS -file corporate-ldap-cert.cer




Cross reference information Segment Product Component Platform Version Edition Information Management Initiate Master Data Service Not Applicable Platform Independent Version Independent All Editions