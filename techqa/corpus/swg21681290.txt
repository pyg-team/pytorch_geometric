Title: IBM I have upgraded to IDS 12.10 from a previous version.  How can I be sure I am JSON compatible? - United States

Text:
 TECHNOTE (FAQ)

QUESTION
 I have upgraded to IDS 12.10 from a previous version. How can I be sure I am JSON compatible? 

ANSWER
To make databases that were created with earlier versions of InformixÂ® 12.10 JSON compatible, you must complete some post-migration steps.
1. Prepare any databases that were created in 12.10.xC1 for JSON compatibility. 

Note, if you upgraded to 12.10.xC4 or later, skip this step because all databases are made JSON compatible during conversion. 

If you upgraded to 12.10.xC3 or 12.10.xC2, complete these steps: 

 * a.
 * 
 * informix
 * 
 * -Informix 12.10.xC3: convTovNoSQL1210.sql 
   -Informix 12.10.xC2: convTovNoSQL1210X2.sql 

 * 
 * db_name
 * 
 * informix
 * 

 * UNIX

 * 

 * Windows

 * 


 * b.
 * 
 * 
 * -To do this, make a copy of the jsonListener.properties file (ensure the file being used exists in $INFORMIXDIR/etc) and change the following:  * listener.port=#: set the port number that the new JSON listener process(es) will use for incoming requests 
    * Localhost:#: set to the port number of the "lo_..." DBSERVERNAME connection 
    * INFORMIXSERVER=?: set to "lo_..." DBSERVERNAME connection 
   
   

 * -You can start the wire listener by running the SQL administration API task() or admin() function with the start json listener argument. For example: 
    * 
   
   

 * -You can also start the wire listener from the command line be running the following command: 
    * 
    * 
    * 
    * pathname
    * 
    * 
    * 
    * pathname
    * 
   
   



2. If you used the wire listener in 12.10.xC2 or 12.10.xC3, after you upgrade to 12.10.xC4 you must drop and recreate any indexes that you created on your collections. 
-You do not need to drop and recreate the index that is automatically created on the _id field of a collection. 


3. If you had binary JSON (BSON) DATE fields in your documents in 12.10.xC2, you must load the data from the external table that you created before you upgraded to a later 12.10 fix pack. On the upgraded server: 
 * a.
 * 
 * datetab
 * 
 * datetab_original
 * 
 * 
 * 
 * b.
 * 
 * 
 * create table datetab(j int, i bson); 
 * 
 * c.
 * 
 * 
 * insert into datetab select j, i::json::bson from ext_datetab; 
 * 
 * d.
 * 
 * 
 * 
 * e.
 * 
 * datetab_original
 * 
 * datetab
 * 



4. If you used the wire listener in 12.10.xC2 with a database that has any uppercase letters in its name, after you upgrade to a later fix pack you must update your applications to use only lowercase letters in the database name. 


If being JSON compatible is a concern after your 12.10 upgrade, following these steps will ensure there are no issues utilizing JSON with your upgraded IDS instance. RELATED INFORMATION
 technote [http://www-01.ibm.com/support/docview.wss?uid=swg21652363]