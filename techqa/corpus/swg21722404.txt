Title: IBM Configure High Availability for TDWC fails - United States

Text:
tipha ha high availability dwc tdwc ws_ant ws_ant.sh TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 WASX7017E and ADMG0037E errors are received during configuration of Tivoli Dynamic Workload Console (TDWC) for High Availability (HA). The ws_ent.sh script fails. 

SYMPTOM
You receive the following errors when running ws_ant.sh:

/opt/IBM/JazzSM/profile/bin/ws_ant.sh -f install.ant configHA -Dusername=tdwcuser -Dpassword=password -debug -logfile /tmp/ws_ant_output.log

INFO: DataSource Not Found with Name:TDWC, JDBCProvider:
TIP_Universal_JDBC_Driver

INFO: createDataSource: Create New DataSource.

before setting attr variables: mappingList =
[['name', 'TDWC'], ['jndiName', 'jdbc/TDWC'], ['description', 'TIP Data
Source '], ['authDataAlias', 'TIPAlias'
], ['authMechanismPreference', 'BASIC_PASSWORD'],
['statementCacheSize', 0], ['datasourceHelperClassname', 'com
.ibm.websphere.rsadapter.DB2UniversalDataStoreHelper'],
['authDataAlias', 'TIPAlias'], ['mapping', [['authDataA
lias', 'TIPAlias'], ['mappingConfigAlias', 'DefaultPrincipalMapping']]]]

ERROR: Create DataSource FAILED with ***
WASX7017E: Exception received while running file
"/opt/IBM/JazzSM/ui/bin/createConsoleDataSource.py"; exception
information:
com.ibm.websphere.management.exception.ConfigServiceException:
ADMG0037E: A new instance of the DataSource object cannot be created because the jndiName attribute of an existing DataSource object has the same value as jdbc/TDWC.

WASX7341W: No "save" was performed before the interactive scripting session exited; configuration changes will not be saved.


CAUSE
DataSource already defined.

There are two types of database and related data sources with TDWC:

1. a datasource to store and retrieve from the database the TDWC
preferences (user defined tasks for example)

2. a datasource for Jazz/DASH HA configuration

These two datasources must be different and must point to two different schemas.

From the error in the script, the tipha.properties file being used is attempting to use the same datasource name for both datasources.

RESOLVING THE PROBLEM
Change the name of the datasource in the tipha.properties file and re-run the HA setup.

Specifically, both of these lines need to change:

###################################################################
# JNDI name of datasource used for TIP HA
# Example: DBDatasource=jdbc/tipds
#
DBDatasource=jdbc/TDWC


###################################################################
# Name of the datasource used for TIP HA
# Example: DBDatasourceName=tipds
#
DBDatasourceName=TDWC




For example, you could change the name of the datasource for both to DWCHA as shown below:

###################################################################
# JNDI name of datasource used for TIP HA
# Exmaple: DBDatasource=jdbc/tipds
#
DBDatasource=jdbc/DWCHA


###################################################################
# Name of the datasource used for TIP HA
# Example: DBDatasourceName=tipds
#
DBDatasourceName=DWCHA

After making the change, re-run the ws_ant command.

RELATED INFORMATION
#TWS Administration Guide [http://www-01.ibm.com/support/knowledgecenter/SSGSPN_9.1.0/com.ibm.tivoli.itws.doc_9.1/distr/src_ad/ctip_config_ha_ovw.htm]