Title: IBM PM73355: SLOW NETWORK TRANSFER RATES FOR MQSERIES CONNECTIONS - United States

Text:
z/os  A FIX IS AVAILABLE
Obtain the fix for this APAR.


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  MQSeries connections (or any application that tends to send
   data in large bursts) have the potential to experience low
   throughput rates to partner systems.
   
   Symptoms include:
   
   1. High number of messages per second that hit XMITQ to result
      in the latency spikes.
   
   2. SMF data (types 115 and  116 for queue managers) shows long
      PUTs, buffer pool getting full, above-normal number of pages
      per I/O.
   
   3. RMF III report shows high CPU usage in CHINIT address space
      (e.g. 60-70%) in 10-second intervals for spikes in messages
      and latency.
   
   4. RMF III report shows significant CPU delays (> 10%) for
      CHINIT.
   
   This problem can also impact bulk transfer protocols (such as
   FTP or Connect:Direct) when the network has a high rate of
   packet loss or the sending application is not getting CPU or I/O
   resources when needed.
   
   
   
   Verification steps include:
   
   1. NETSTAT ALL on the individual connections and note the
      congestion window size as well as the calculated round-trip
      time.
   
      Only the outbound connection would be affected.  If the
      remote system's IP address is y.y.y.y and the MQ listener is
      is on port nnnn, the command would be:
   
        TSO:       NETSTAT ALL (IPPORT y.y.y.y+nnnn
        OpConsole: D TCPIP,,NETSTAT,ALL,IPPORT=y.y.y.y+nnnn
   
   2. Review the smoothed round trip time (is it more than a few
      ms)?
   
   3. Are there any retransmissions on the connection? If there are
      retransmissions, it is an indication of problems outside of
      z/OS and is an issue that would need to be corrected before
      analysis can be done for whether or not the APAR applies.
      If the problem appears to be outside of z/OS, then collect a
      network sniffer trace on a shadowed switch port.
   
   4. If the NETSTAT ALL report shows congestion window size
      increases with no decreases for a MQseries connection,
      then the APAR would apply.
   
   
    
   
   

LOCAL FIX
 *  (None)
   
   KEYWORDS:
   MQ MQSERIES WINDOWSIZE CONGESTION WINDOW PERF PERFORMANCE
   LATENCY ROUNDTRIP RTT CHINIT XMITQ CPU DELAY TCP
   
   
    
   
   

PROBLEM SUMMARY
 *  ****************************************************************
   * USERS AFFECTED: All users of the IBM Communications Server   *
   *                 for z/OS Version 1 Release 13 IP             *
   ****************************************************************
   * PROBLEM DESCRIPTION: Slow network transfer rates for         *
   *                      TCPIP connections.                      *
   ****************************************************************
   * RECOMMENDATION:                                              *
   ****************************************************************
   TCPIP connections that send data in bursts cause the senders
   congestion window to be incorrectly reduced. The reduced
   congestion window causes poor connection performance.
   In some scenarios the performance may decrease enough to
   trigger a timeout failure at an application level.
   +-------------------------------------------------------------+
   + Please check our Communications Server for OS/390 homepages +
   + for common networking tips and fixes.  The URL for these    +
   + homepages can be found in Informational APAR II11334 [http://www-01.ibm.com/support/docview.wss?uid=isg1II11334].       +
   +-------------------------------------------------------------+
   
   
    
   
   

PROBLEM CONCLUSION
 *  TCPIP has been modified to limit congestion window reduction.
   
   * Cross Reference between External and Internal Names
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   PM73355
   
   
 * REPORTED COMPONENT NAME
   TCP/IP V3 MVS
   
   
 * REPORTED COMPONENT ID
   5655HAL00
   
   
 * REPORTED RELEASE
   1D0
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   YesHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2012-09-20
   
   
 * CLOSED DATE
   2012-10-09
   
   
 * LAST MODIFIED DATE
   2013-02-12
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
    UK82536
   
   

MODULES/MACROS
 *  EZBTCFWR EZBTCSND EZBTLFWR EZBT6FWR EZBT6LWR
   EZBT6SND TCSNDINT T6SNDINT
   
   
    
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   TCP/IP V3 MVS
   
   
 * FIXED COMPONENT ID
   5655HAL00
   
   

APPLICABLE COMPONENT LEVELS
 * R1D0 PSY UK82536 [HTTPS://WWW14.SOFTWARE.IBM.COM/WEBAPP/SET2/ORDERMEDIA/SHOPCART?PTFS=UK82536]
   UP12/11/15 P F211
   
   

FIX IS AVAILABLE
 * SELECT THE PTF APPROPRIATE FOR YOUR COMPONENT LEVEL. YOU WILL BE REQUIRED TO SIGN IN. DISTRIBUTION ON PHYSICAL MEDIA IS NOT AVAILABLE IN ALL COUNTRIES.