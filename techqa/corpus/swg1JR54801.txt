Title: IBM JR54801: EVENT MANAGER DOES NOT RECONNECT TO MQ AFTER A LOSS OF CONNECTION - United States

Text:
 SUBSCRIBE TO THIS APAR
By subscribing, you receive periodic emails alerting you to the status of the APAR, along with a link to the fix after it becomes available. You can track this item individually or track all items by product.

Notify me when this APAR changes.

Notify me when an APAR for this component changes.



 DIRECT LINKS TO FIXES
InfoSphere MDM Standard Advanced 11.0.0.5 Fix Pack 5 [http://www.ibm.com/support/fixcentral/quickorder?product=ibm%2FInformation+Management%2FInfoSphere+Master+Data+Management&fixids=11.0.0.5-MDM-SAE-FP05IF000&source=SAR]
11.3.0.5-MDM-SE-AE-FP05IF000 (applies to Standard and Advanced) [http://www.ibm.com/support/fixcentral/quickorder?product=ibm%2FInformation+Management%2FInfoSphere+Master+Data+Management&fixids=11.3.0.5-MDM-SE-AE-FP05IF000&source=SAR]
11.3.0.5-MDM-SE-AE-FP05IF000 (applies to Standard and Advanced) [http://www.ibm.com/support/fixcentral/quickorder?product=ibm%2FInformation+Management%2FInfoSphere+Master+Data+Management&fixids=11.3.0.5-MDM-SE-AE-FP05IF000_FC&source=SAR]
IBM InfoSphere Master Data Management Standard and Advanced Editions v11.5.0.2 Fix Pack 2 [http://www.ibm.com/support/fixcentral/quickorder?product=ibm%2FInformation+Management%2FInfoSphere+Master+Data+Management&fixids=11.5.0.2-MDM-SAE-FP02IF000&source=SAR]
IBM InfoSphere Master Data Management Standard and Advanced Editions v11.5.0.2 Fix Pack 2 [http://www.ibm.com/support/fixcentral/quickorder?product=ibm%2FInformation+Management%2FInfoSphere+Master+Data+Management&fixids=11.5.0.2-MDM-SAE-FP02IF000_FC&source=SAR]


APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  The event manager is designed to have an automatic connection
   retry capability. But during runtime, if MQ becomes temporarily
   unavailable (say MQ restart or network issue), then MDM event
   manager does not reconnect, as it should according to the
   design. We need to restart event manager (whole MDM application
   if it's embedded) for the connection to be re-established. The
   events are still in mpi_entoque where the owner was set to
   error.
   
   Error Snippet:
   ERROR rver.event.handler.ext.JMSSender:
   JMSSender.sendMsgToJMSQ: JMSWMQ2007: Failed to send a message
   to destination 'mdh_event'.
   com.ibm.msg.client.jms.DetailedJMSException: JMSWMQ2007: Failed
   to send a message to destination 'mdh_event'.
   JMS attempted to perform an MQPUT or MQPUT1; however WebSphere
   MQ reported an error.
   Use the linked exception to determine the cause of this error.
       at
   com.ibm.msg.client.wmq.common.internal.Reason.reasonToException(
   Reason.java:580)
       at
   com.ibm.msg.client.wmq.common.internal.Reason.createException(Re
   ason.java:216)
       at
   com.ibm.msg.client.wmq.internal.WMQMessageProducer.checkJmqiCall
   Success(WMQMessageProducer.java:1056)
       ...
   Caused by: com.ibm.mq.MQException: JMSCMQ0001: WebSphere MQ
   call failed with compcode '2' ('MQCC_FAILED') reason '2009'
   ('MQRC_CONNECTION_BROKEN').
       at
   com.ibm.msg.client.wmq.common.internal.Reason.createException(Re
   ason.java:204)
       ... 51 more
   Caused by: com.ibm.mq.jmqi.JmqiException: CC=2;RC=2009
       at
   com.ibm.mq.jmqi.remote.impl.RemoteSession.getConnection(RemoteSe
   ssion.java:513)
       at
   com.ibm.mq.jmqi.remote.impl.RemoteSession.getMaximumMessageLengt
   h(RemoteSession.java:1796)
       at
   com.ibm.mq.jmqi.remote.api.RemoteFAP.jmqiPutMessageWithProps(Rem
   oteFAP.java:7625)
       at
   com.ibm.mq.jmqi.remote.api.RemoteFAP.jmqiPut(RemoteFAP.java:7034
   )
       at
   com.ibm.msg.client.wmq.internal.WMQMessageProducer$SpiIdentified
   ProducerShadow.sendInternal(WMQMessageProducer.java:807)
       ... 47 more
   Caused by: com.ibm.mq.jmqi.JmqiException: CC=2;RC=2009;AMQ9208:
   Error on receive from host '/199.215.92.81:1414
   (vnn2785.gov.ab.ca)'. [1=-1,2=ffffffff,3=/199.215.92.81:1414
   (vnn2785.gov.ab.ca),4=TCP]
       at
   com.ibm.mq.jmqi.remote.impl.RemoteRcvThread.receiveBuffer(Remote
   RcvThread.java:817)
       at
   com.ibm.mq.jmqi.remote.impl.RemoteRcvThread.receiveOneTSH(Remote
   RcvThread.java:751)
       at
   com.ibm.mq.jmqi.remote.impl.RemoteRcvThread.run(RemoteRcvThread.
   java:154)
       at
   com.ibm.msg.client.commonservices.workqueue.WorkQueueItem.runTas
   k(WorkQueueItem.java:209)
       at
   com.ibm.msg.client.commonservices.workqueue.SimpleWorkQueueItem.
   runItem(SimpleWorkQueueItem.java:100)
       at
   com.ibm.msg.client.commonservices.workqueue.WorkQueueItem.run(Wo
   rkQueueItem.java:224)
       at
   com.ibm.msg.client.commonservices.workqueue.WorkQueueManager.run
   WorkQueueItem(WorkQueueManager.java:298)
       at
   com.ibm.msg.client.commonservices.j2se.workqueue.WorkQueueManage
   rImplementation$ThreadPoolWorker.run(WorkQueueManagerImplementat
   ion.java:1214)
   
   
    
   
   

LOCAL FIX
 *  NA
   
   
    
   
   

PROBLEM SUMMARY
 *  ****************************************************************
   * USERS AFFECTED:                                              *
   * All MDS implementations are affected by this issue           *
   ****************************************************************
   * PROBLEM DESCRIPTION:                                         *
   * Reconnect to JMS Endpoint on Disconnect                      *
   ****************************************************************
   * RECOMMENDATION:                                              *
   * Customers facing this issue reported by this APAR apply      *
   * 10.1.052517_IM_Initiate_MasterDataService_ALL_Refresh Pack   *
   * to gain resolution to this problem                           *
   ****************************************************************
   
   
    
   
   

PROBLEM CONCLUSION
 *  A fix for this problem has been included in
   10.1.052517_IM_Initiate_MasterDataService_ALL_Refresh Pack
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   JR54801
   
   
 * REPORTED COMPONENT NAME
   INTMASTERDATA
   
   
 * REPORTED COMPONENT ID
   5725B6300
   
   
 * REPORTED RELEASE
   A10
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt / Xsystem
   
   
 * SUBMITTED DATE
   2015-11-24
   
   
 * CLOSED DATE
   2017-06-12
   
   
 * LAST MODIFIED DATE
   2017-06-12
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   INTMASTERDATA
   
   
 * FIXED COMPONENT ID
   5725B6300
   
   

APPLICABLE COMPONENT LEVELS
 * RA10 PSY
   UP