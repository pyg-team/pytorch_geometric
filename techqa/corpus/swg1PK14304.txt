Title: IBM PK14304: JSP TAG LIB PROBLEM WHEN HAVING MULTIPLE WEB LIBRARY PROJECTS - United States

Text:
 SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  =================================================
   This is the duplicate for  RATLC01095539.
   Since there's no APAr for that RATLC I had to create this APAR
   for the customer reported issue.
   =================================================
   
   Your original problem description :
   
   ESR: Error marking in JSP fragments is eratic and often wrong.
   In particular, it often reports "JspTranslate: File
   "http://www.dor.state. wi.us/utility/taglib" not found for the
   line "<%@ taglib uri="http:
   //www.dor.state.wi.us/utility/taglib" prefix="dor" %>" even
   though an identical line in another JSP in the same directory is
   not reported as in error.
   
   
   I have done some research on this issue.
   
   I found a similar issue reported in the past about this problem
   
   Issue#Details :
   Its an existing issue and is happening because the
   tooling is using it's own taglib registry (which is separate
   from the one WAS uses for JSP compilation) which understands
   taglibs.
   
   Diagnosis :
   
   Foreg:  there are two taglibs (Taglibs and CMTaglib)
   Taglibs & CMTaglib contribute tag libraries via their file
   taglib.tld These tag libraries can be accessed in two ways
      1.  via the URI attribute in the tld files
   (http://ctrg.com/taglibs
   & http://ctrg.com/CMtaglibs )
          recommended when running in a production environment
      2.  via the file path to the jar  (like
   
   /WEB-INF/lib/Taglibs.jar &
   /WEB-INF/lib/CMTaglib.jar  )
      recommended for development purposes
     Both are valid according to the J2EE spec.
   
   Problems:
   
   The 1st way - works on an production server but because of a bug
   in WAS jsp compiler involving web library projects (that is used
   by the jsp validator and when you run the web project on the WAS
   test environment server in WSAD/RAD) it does not work and is
   reported as an error by the jsp validator.
   
   The 2nd way , because of a bug in WSAD 512/RAD v6001/601
   file path does not work when there are more than 2 web library
   projects.
   
   Workaround:
   
   Use the 1st way of accessing tag library (due to Problem 1 it
   will work only when you export the EAR and install it as opposed
   to running inside WSAD),
   
   or
   
   Use the 2nd way, but the tools will
   report the 2nd web library
   as an
   error.
   
   Fix for Problem 1 involves WAS,
   Fix for Problem 2 is one line in WSAD/RAD,
   
   The problem happens in the latest version RAD 601 too,and a fix
   for this issue was provided through a defect for this in RATLC
   
   ChangeRequest RATLC01095539 : adding more than one web library
   project, the 2nd web library taglib does not show up in taglib
   registry.
   
   with the following problem recreation scenario:
   Steps:
   1. create a web project and two java projects
   2. add a taglib.tld in the META-INF folder of the java projects
   3. add the java projects to the web project as a web library
   project.
   4. create a jsp in web project.
   5. In page designer open JSP-Insert Custom-Add
       click on all valid taglibs
        you find /WEB-INF/lib/javaProject1.jar but you will not
   find /WEB-INF/lib/javaProject2.jar
   
   "Customer has created a custom tag lib. It was functioning ok.
   Then he broke the lib into two differenct project  and that
   seems to have broken something. There is now error in the
   page... JspTranslate:  No such tag cmItem in the tag library
   imported with prefix cm etc for one of the taglib project.
   I checked the webproject that references this taglib project and
   it seems to have it in its classpath". Problem happens in 512
   as well as in latest 601 Fix in 601 is in
   WebLibModuleTaglibLocator.java
   and
   TLDDigester.java
   
   The above fix was planned to be incorporated into RADv601
   refresh pack but got delayed(because of internal reasons) till
   RADv6011 fix pack. For now, we have the temp fix from the
   development for this issue. I am also sending you the temp fix
   that was provided by the developer from this previously reported
   issue.
   Please patch your copy of RAD/RSA as follows...
   
   Backup web.jar from
   <RAD_INSTALL>\SDP\6.0\rwd\eclipse\plugins\com.ibm.wtp.web_1.0.0.
   103\runtime (Locate the latest version of the plugin
   com.ibm.wtp.web in their installation folder. (plugin folder
   could be called com.ibm.wtp.web_1.0.0.1 or
   com.ibm.wtp.web_ 1.0.0.103 )) and replace with the attached.
   
   
   
   Start RAD with -clean option. eg.
   D:\Programs\IBM\Rational\SDP\6.0\rationalsdp.exe -clean
   
   Make sure your .tld file of your taglib projects are in the
   output folder
   Remove the taglib project entries in the web library project on
   the  overview tab of the web.xml Do a rebuilt all.
   
   Please let me know if you still see the error regarding taglib
   not found in the problems view.
   
   I have attached the sign off form too. Please review.
   
   
    
   
   

LOCAL FIX
 *  temp fix has already been provided by the development through
   RATLC01095539. Since there's no APAr for that RATLC I had to
   create this APAR for the customer reported issue.
   
   
    
   
   

PROBLEM SUMMARY
 *  If a web project has more than one web library project, where ea
   ch web library project contributes jsp tag libraries, only the f
   irst tag library is discovered by the tools.
   
   
    
   
   

PROBLEM CONCLUSION
 *   Fix will be in RAD version 6.0.1.1
   -the tool was skipping all the subsequent web library projects i
   f a tag library was found.
            Also the jsp version in the tld files was not being sea
   rched correctly in some tld files.
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   PK14304
   
   
 * REPORTED COMPONENT NAME
   APP DEV V6 WIN
   
   
 * REPORTED COMPONENT ID
   5724J1901
   
   
 * REPORTED RELEASE
   600
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2005-10-31
   
   
 * CLOSED DATE
   2006-01-18
   
   
 * LAST MODIFIED DATE
   2006-01-18
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

MODULES/MACROS
 *  na
   
   
    
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   APP DEV V6 WIN
   
   
 * FIXED COMPONENT ID
   5724J1901
   
   

APPLICABLE COMPONENT LEVELS
 * R600 PSN
   UP