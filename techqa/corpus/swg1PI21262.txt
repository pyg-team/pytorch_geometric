Title: IBM PI21262: FIX REQUIRED TO ALLOW A SERVER USING THE ORACLE 12.X DRIVER TO COMPLETE UPGRADE-PROFILE - United States

Text:
  A FIX IS AVAILABLE
Fixes integrated in WebSphere Portal 8.5.0.0 Combined Cumulative Fixes [http://www-01.ibm.com/support/docview.wss?uid=swg24037786]


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  upgrade-profile fails like this:
   
   register-nodetypes:
   
        [echo] registering nodeTypes using
   /opt/cep/ibmA/migration/websphere/portalserver/bin/../wcm/prereq
   .wcm/config/nodetypes/ibmcontentwcm.registernodetypes file
   
   --- Exception Thrown ---
   /opt/cep/ibmA/migration/websphere/portalserver/jcr/wp.content.re
   pository.install/config/includes/jcr.install_cfg.xml:897:
   com.ibm.icm.jcr.task.TaskException: TASK001X: Remote task
   execution failed with response code 500 due to exception :
   com.ibm.icm.jcr.serialization.SerializationException: SCH0054E:
   Error registering content type:
   ibmcontentwcm:classificationData with application wcm and URI:
   wps/mypoc/?view=auth&uri=wcm:oid:.Could not
   commit with auto-commit set onThread -710106275 : n: Could not
   commit with auto-commit set on at
   oracle.jdbc.driver.PhysicalConnection.commit(PhysicalConnection.
   java:4443) at
   oracle.jdbc.driver.PhysicalConnection.commit(PhysicalConnection.
   java:4490) at
   oracle.jdbc.driver.T2CConnection.commit(T2CConnection.java:56)
   at
   oracle.jdbc.OracleConnectionWrapper.commit(OracleConnectionWrapp
   er.java:144) at
   com.ibm.ws.rsadapter.jdbc.WSJdbcConnection.commit(WSJdbcConnecti
   on.java:1144) at
   com.ibm.icm.da.portable.common.sql.DefaultPConnection.commit(Def
   aultPConnection.java:274) at
   com.ibm.icm.da.portable.schema.RegisterCompType.insertRegister(R
   egisterCompType.java:118) at
   com.ibm.icm.da.portable.schema.RegisterCompType.registerCompType
   (RegisterCompType.java:80) at
   com.ibm.icm.da.portable.schema.SchemaManager.registerCompType(Sc
   hemaManager.java:411) at
   ...
   Please check the server log for more information.
   
   At the same time in the SystemOut.log there is this exception:
   
   [1/28/14 20:08:55:084 CST] 0000010b RegisterNodeT E   SER3034E:
   Exception in end element.
   javax.jcr.RepositoryException:
   SCH0054E: Error registering content type:
   ibmcontentwcm:classificationData with application wcm and URI:
   wps/mypoc/?view=auth&uri=wcm:oid:.
   Could not commit with auto-commit set onThread -710106275 : n:
   Could not commit with auto-commit set on
   ...
   Caused by: com.ibm.icm.ci.schema.CDMSchemaException: SCH0054E:
   Error
   registering content type: ibmcontentwcm:classificationData with
   application wcm and URI: wps/mypoc/?view=auth&uri=wcm:oid:.
   Could not commit with auto-commit set onThread -710106275 : n:
   Could not commit with auto-commit set on
   ...
   Caused by: java.lang.ClassNotFoundException:
   com.ibm.db2.jcc.DB2XADataSource
   
   
    
   
   

LOCAL FIX
 *  The issue is caused due to oracle driver 12.x which throws an
   exception if commit is issued on auto commit set to true for a
   connection.
   
   
    
   
   

PROBLEM SUMMARY
 *  A code fix for this issue is integrated into the WebSphere
   Portal & WCM Combined Cumulative Fix 02 (PI22204 [http://www-01.ibm.com/support/docview.wss?uid=swg1PI22204]) for Portal
   8.5.0.0 available from Fix Central:
   
   http://www-933.ibm.com/support/fixcentral/swg/selectFixes?parent
   =ibm/WebSphere&product=ibm/WebSphere/WebSphere+Portal&release=Al [http://www-933.ibm.com/support/fixcentral/swg/selectFixes?parent=ibm/WebSphere&product=ibm/WebSphere/WebSphere+Portal&release=Al]
   l&platform=All&function=aparId&apars=PI22204
   
   
    
   
   

PROBLEM CONCLUSION
 *  A code fix for this issue is integrated into the WebSphere
   Portal & WCM Combined Cumulative Fix 02 (PI22204 [http://www-01.ibm.com/support/docview.wss?uid=swg1PI22204]) for Portal
   8.5.0.0 available from Fix Central:
   
   http://www-933.ibm.com/support/fixcentral/swg/selectFixes?parent
   =ibm/WebSphere&product=ibm/WebSphere/WebSphere+Portal&release=Al [http://www-933.ibm.com/support/fixcentral/swg/selectFixes?parent=ibm/WebSphere&product=ibm/WebSphere/WebSphere+Portal&release=Al]
   l&platform=All&function=aparId&apars=PI22204
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   PI21262
   
   
 * REPORTED COMPONENT NAME
   WEBSPHERE PORTA
   
   
 * REPORTED COMPONENT ID
   5724E7600
   
   
 * REPORTED RELEASE
   800
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2014-07-02
   
   
 * CLOSED DATE
   2014-11-05
   
   
 * LAST MODIFIED DATE
   2014-11-05
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   WEBSPHERE PORTA
   
   
 * FIXED COMPONENT ID
   5724E7600
   
   

APPLICABLE COMPONENT LEVELS
 * R800 PSY
   UP