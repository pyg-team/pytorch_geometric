Title: IBM Websphere MQ File Transfer Edition Create Transfer Service errors out if service configuration values in bpml are assigned via Xpath. - United States

Text:
 TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 Websphere MQ File Transfer Edition Create Transfer Service errors out if service configuration values in bpml are assigned via Xpath.
The service works if service configuration values are hardcoded in bpml.

Below error is logged when service configuration values in bpml assigned via Xpath.

wf.log

ERROR 000110060140 WORKFLOW.ACTIVITY_ENGINE.ERR_ActivityEngineHelper_preInvoke8 ActivityEngineHelper.preInvoke(): caught exception while preparing to call service WebSphereMQFTECreateTransferService 
ERROR [1377205173417] INVALID_CHARACTER_ERR: An invalid or illegal XML character is specified. 
[2013-08-22 16:59:33.418] ERRORDTL [1377205173417]org.w3c.dom.DOMException: INVALID_CHARACTER_ERR: An invalid or illegal XML character is specified. 
at org.apache.xerces.dom.CoreDocumentImpl.createElement(Unknown Source)
at com.sterlingcommerce.woodstock.workflow.WFCBase.makeMessageToService(WFCBase.java:520)
at com.sterlingcommerce.woodstock.workflow.WorkFlowContext.assignToMessage(WorkFlowContext.java:290)
at com.sterlingcommerce.woodstock.workflow.WorkFlowContext.preInvokeService(WorkFlowContext.java:213)
at com.sterlingcommerce.woodstock.workflow.activity.engine.ActivityEngineHelper.preInvokeService(ActivityEngineHelper.java:1383)
at com.sterlingcommerce.woodstock.workflow.activity.engine.ActivityEngineHelper.nextMainLogic(ActivityEngineHelper.java:595)
at com.sterlingcommerce.woodstock.workflow.activity.engine.ActivityEngineHelper.next(ActivityEngineHelper.java:362)
at com.sterlingcommerce.woodstock.workflow.queue.WorkFlowQueueListener.doWork(WorkFlowQueueListener.java:440)
at com.sterlingcommerce.woodstock.workflow.queue.WorkFlowQueueListener.run(WorkFlowQueueListener.java:236)
at com.sterlingcommerce.woodstock.workflow.queue.WorkFlowQueueListener.onMessage(WorkFlowQueueListener.java:197)
at com.sterlingcommerce.woodstock.workflow.queue.WorkFlowQueueListener.onMessage(WorkFlowQueueListener.java:184)
at com.sterlingcommerce.woodstock.workflow.queue.wfTransporter.run(wfTransporter.java:444)
at com.sterlingcommerce.woodstock.workflow.queue.BasicExecutor$Worker.run(BasicExecutor.java:508)
at java.lang.Thread.run(Thread.java:736)



RESOLVING THE PROBLEM
The bpml sample in the documentation for Websphere MQ File Transfer Edition Create Transfer Service has extra spaces in the line below. 

<output message=" WebSphereMQFTECreateTransferServiceInputMessage "> 

The solution is to remove the extra spaces in above line. The below example shows the corrected bpml. 

 <operation name="WebSphereMQ FTE Create Transfer Service">
<participant name="WebSphereMQFTECreateTransferService"/>
<output message="WebSphereMQFTECreateTransferServiceInputMessage">
<assign to="." from="*"></assign>
<assign to="DestAgentName" from="agent/text()" />
<assign to="DestAgentQMgr">FTEQueueManager</assign>
<assign to="DestName">nonEDI</assign>
<assign to="DestType">DIRECTORY</assign>
<assign to="SourceAgentName">D08AGT01</assign>
<assign to="SourceAgentQMgr">FTEQueueManager</assign>
<assign to="SourceFile">/app/fp/int9/MQTest/PStoEDI/BC*df.txt</assign>
<assign to="SourceFileDisposition">DELETE</assign>
</output>
<input message="inmsg">
<assign to="." from="*"></assign>
</input>
</operation>