Title: IBM Generating WebSphere MQ trace on HP OpenVMS - United States

Text:
Tracing; Trace; WebSphere MQ; MQ; HP OpenVMS; OpenVMS TECHNOTE (FAQ)

QUESTION
 How do I generate a WebSphere MQ trace on HP OpenVMS systems in order to investigate a problem? 

CAUSE
Traces can capture the root cause of many MQ problems. It is important to limit how long tracing is active in order to avoid affecting performance or generating excessively large trace files and filling up your disk. For other MQ traces refer to:



 * Generating IBM MQ Traces [http://www.ibm.com/support/docview.wss?uid=swg21174924]

 * Submitting Documentation to IBM Support [http://www.ibm.com/de/support/ecurep/send.html]




Make sure the MQS_ROOT:[MQM.TRACE] directory is on a disk with plenty of available space. Otherwise, you risk an outage if WebSphere MQ trace fills the disk which your queue managers are using. In addition, a partial trace may not contain the information IBM Support needs to solve the problem.


WebSphere MQ traces may show some or all of the contents of messages flowing through the system. IBM treats customer documentation as confidential, sharing it among support personnel on a need to know basis. Use the '-d 0' option if you need to prevent WebSphere MQ from including any message data in its traces.


ANSWER


GENERATING TRACES
 1.  
 2.  Start tracing with the strmqtrc command. The parameters passed to strmqtrc control which processes will generate trace files and what kinds of data they will trace. Please note that WebSphere MQ V5.3 for HP OpenVMS does not support wrapping trace. If you want to trace a queue manager name which contains lower-case letters, be sure to enclose it in quotation marks. For example:
 3.   
     STARTING A DEFAULT DETAIL TRACE OF QUEUE MANAGER QMA
     
     $ strmqtrc -m QMA 
     
     STARTING A DEFAULT DETAIL TRACE OF QUEUE MANAGER QMB WITH NO MESSAGE DATA INCLUDED
     
     $ strmqtrc -m "qmb" -d 0 
     
     STARTING A HIGH DETAIL TRACE OF EVERYTHING
     
     $ strmqtrc -e -t all -t detail 
     
     STARTING A HIGH DETAIL TRACE OF EVERYTHING WITH FILES THAT WRAP AT 100MB
     
     $ strmqtrc -e -t all -t detail -l 100 
     
 4.  
 5.  
 6.  Reproduce the problem while tracing is active, making every attempt to keep the trace as short as possible.
 7.  
 8.  
 9.  As soon as the problem has occurred, stop tracing immediately! If you wait to stop the trace, the data IBM Support needs may be lost or overwritten. For example:
 10.  
     STOPPING ALL TRACE
     
     $ endmqtrc -a 
     
     STOPPING A TRACE OF QUEUE MANAGER QMA
     
     $ endmqtrc -m QMA 
     
     STOPPING A TRACE OF QUEUE MANAGER QMB
     
     $ endmqtrc -m "qmb" 
     
 11. 
 12. 
 13. The trace files generated by WebSphere MQ are binary, and must be formatted before they can be read. The binary trace files are named like AMQ*.TRC, and if you started a wrapping trace, some may also be named like AMQ*.TRS:
 14.  
     FORMATTING WEBSPHERE MQ TRACE FILES
     
     $ SET DEF MQS_ROOT:[MQM.TRACE] 
     $ dspmqtrc AMQ*.TR? 
 15. 
 16. 
 17. Save a copy of the binary trace files as long as you are working with IBM support, but do not send both binary and formatted traces to IBM. Delete the binary trace files before packaging and sending your trace files to IBM. Be sure to include your IBM Problem Management Record in the file name of the package you create.
 18. 
 19. 
 20. After sending the formatted traces, clean up the trace directory to reclaim space and also to make sure you are ready to generate new traces in future, if necessary. For example:
 21.  
     CLEAN UP THE TRACE DIRECTORY
     
     $ SET DEF MQS_ROOT:[MQM.TRACE] 
     $ DELETE AMQ*.TR? AMQ*.FMT 
     
 22. 

Back to top




ADDITIONAL INFORMATION

 * GC34-6610-03: WebSphere MQ V6.0 for HP OpenVMS System Administration Guide (1.62MiB) [http://www.ibm.com/e-business/linkweb/publications/servlet/pbi.wss?CTY=US&FNC=PBL&PBL=GC34-6610-03]


Back to top

 

PRODUCT ALIAS/SYNONYM
 Websphere MQ WMQ