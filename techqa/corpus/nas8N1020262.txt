Title: IBM How To Set Up SSL Client (Mutual) Authentication Between An IBM WebSphere Application Server And The IBM Web Server Plug-in - United States

Text:
WEBSPHERE; SSL; PLUGIN; AUTHENTICATION; WEB SERVER TECHNOTE (FAQ)

QUESTION
 This document will discuss "How to set up SSL Client (Mutual) Authentication between an IBM WebSphere Application Server and the IBM Web Server Plug-in?" 

ANSWER
SSL Client authentication (AKA Mutual authentication) is similar to regular, server authentication except that the server requests a certificate from the client to verify the client is who they claim to be. The certificate must be an X.509 certificate and signed by a certificate authority (CA) trusted by the server. 

When a server requests a certificate, the client has the option to send a certificate or attempt to connect without it. The server allows the connection if the client's certificate can be trusted. When a client attempts to connect without a certificate, the server might give the client access but at a lower security level. 

Ultimately, SSL Client/Mutual authentication provides a more secure method for the server to verify the client's identity. This can be useful with IBM WebSphere Application Server (WAS) when a Web Server is configured on a remote machine in front of WAS. When the Web Server is located on a remote machine, communications between WAS and the Web Server Plug-in might occur over the Internet, which exposes the data. Enabling SSL Client/Mutual authentication will not only encrypt the data like the standard, Server authentication; but it will also provide a higher level of verification of the client entity to ensure the client can be trusted. 

Here is a breakdown of how Client/Mutual authentication works:



Client requests secure connection [/support/docview.wss?uid=nas8N1020262&amp;aid=1] Client sends a request for an SSL session to Server. Server requests certificate [/support/docview.wss?uid=nas8N1020262&amp;aid=2] Client receives Server's certificate and checks its list of trusted CAs. Since Server's certificate is signed by a trusted CA, Client accepts the certificate. Server asks Client for a certificate that will identify the Client. Client sends a certificate or tries to establish a session without one [/support/docview.wss?uid=nas8N1020262&amp;aid=3] Client sends a certificate or tries to establish a session without one. Server examines certificate and creates secure connection or gives client lower security level [/support/docview.wss?uid=nas8N1020262&amp;aid=4] If Client sends a certificate, Server checks its list of trusted certificates. If the Client can be trusted, the secure session is established. If Client does not send a certificate, Server establishes a secure connection at a lower level of security. 
How To Set Up SSL Client (Mutual) Authentication Between An IBM WebSphere Application Server And The IBM Web Server Plug-in 

NOTE: These steps assume an IBM i HTTP Server and IBM WebSphere Application Server profile already exist. 

1) Configure the IBM i HTTP Server for SSL Authentication.  * 
 * 
 * Enable Apache HTTP for SSL 
 * 


2) Associate your IBM i Apache HTTP Server with your IBM WebSphere Application Server.  * 
 * NOTE:
 * 
 * How To Associate A Remote IBM i Apache HTTP Server With An IBM WebSphere Application Server Profile at IBM i 5.4 and Later
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 *  http://<serverName or IP address>:2001/HTTPAdmin 
 * If you are unable to access the IBM Web Administration for i console application using the URL above, please contact the IBM i Global Support Center for further assistance by opening a Service Request online [http://www-01.ibm.com/software/support/servicerequest/quick_start.html] or by calling 1-800-IBM-SERV. 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 


3) Start your IBM WebSphere Application Server profile.  * NOTE:
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * http://<serverName or IP address>:2001/HTTPAdmin
 * 
 * 
 * 


4) Open the IBM WebSphere Integrated Solutions Console.  * 
 * 
 *  http://<serverName or IP address>:2001/HTTPAdmin 
   
   If you are unable to access the IBM Web Administration for i console application using the URL above, please contact the IBM i Global Support Center for further assistance by opening a Service Request online [http://www-01.ibm.com/software/support/servicerequest/quick_start.html] or by calling 1-800-IBM-SERV. 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 


5) Modify the Virtual Host for your IBM i HTTP Server.  * 
 * 
 * 
 * 
 * 
 * 
 * NOTE:
 * 
 * default_host
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 


6) Verify the IBM WebSphere Application Server profile (key.p12 and trust.p12) and Web Server (plugin-key.kdb) SSL key stores contain the same SSL certificates.  * 
 * NOTE:
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 *  NOTE: The Alias listed here will be used in the next step. 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 


7) Implement the custom Web Server Plug-in property "CertLabel".  * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 *  Name: CertLabel 
   Value: $ALIAS (variable value you identified in step 5) 
 * 
 * NOTE:
 * 
 * 
 * 
 * 


8) Generate and propagate the Web Server Plug-in.  * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 


9) Copy the Web Server Plug-in key store files to the $WAS_PROFILE/config/$WEB_SERVER/ directory.  * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 


10) Configure your WebSphere Application Server profile to use Client Authentication.  * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 *  NOTE: The setting "Required" means WAS will require a client certificate. The setting "Supported" indicates WAS will ask for a client certificate. If one is not provided by the client, it will proceed with normal SSL authentication. 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 


11) Restart your IBM i HTTP Server and WebSphere Application Server profiles.  * 
 * IBM i HTTP Server
 * ENDTCPSVR *HTTP HTTPSVR(<HTTPserver>) 
   STRTCPSVR *HTTP HTTPSVR(<HTTPserver>) 
   
   You can also stop and start your IBM i HTTP Server using the IBM Web Administration console ( http://<serverName or IP address>:2001/HTTPAdmin). Just click on Manage -> HTTP Servers -> Select your HTTP server from the drop-down box. Click on the red square [/support/docview.wss?uid=nas8N1020262&amp;aid=6] to stop the server. Click on the green triangle [/support/docview.wss?uid=nas8N1020262&amp;aid=7] to start it. 
 * 
 * IBM WebSphere Application Server
 * $WAS_PROFILE_ROOT/bin/stopServer <serverName> 
   $WAS_PROFILE_ROOT/bin/startServer <serverName> 
   
   You can also stop and start your IBM WebSphere Application Server profile using the IBM Web Administration console ( http://<serverName or IP address>:2001/HTTPAdmin). Just click on Manage -> Application Servers -> Select your WAS server from the drop-down box. Click on the red square [/support/docview.wss?uid=nas8N1020262&amp;aid=8] to stop the server. Click on the green triangle [/support/docview.wss?uid=nas8N1020262&amp;aid=9] to start it. 


12) Congratulations! You have successfully enabled Client/Mutual Authentication between your Web Server Plug-in and WebSphere Application Server. You should now be able to successfully access your application over your IBM HTTP Server SSL port. 

If you are unable to access your web applications after configuring Client/Mutual Authentication, please contact the IBM i Global Support Center for further assistance by opening a Service Request online [http://www-01.ibm.com/software/support/servicerequest/quick_start.html] or by calling 1-800-IBM-SERV.  


Cross reference information Segment Product Component Platform Version Edition Operating System IBM i 7.2 Operating System IBM i 7.1 Operating System IBM i 6.1