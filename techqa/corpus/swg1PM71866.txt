Title: IBM PM71866: SIMPLE OR CLASSIC PARTITIONED TABLESPACE EXTENDS RAPIDLY - United States

Text:
z/os  A FIX IS AVAILABLE
Obtain the fix for this APAR.


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  Customer migrated from V8 to V10. They find simple tablespaces
   extend quite rapidly although most of the data pages have only
   holes and can not be reused.
   Lab can recreate the same problem with classic partition table
   space.
   The spacemap page was not updated correctly after delete.
   The problem is only under V10.
   
   
    
   
   

LOCAL FIX
 *  Customer can alter the simple tablespace to a segmented table
   space to avoid such problem.
   
   
    
   
   

PROBLEM SUMMARY
 *  ****************************************************************
   * USERS AFFECTED: All DB2 10 for z/OS (CM and above) users of  *
   *                 non-segmented table spaces (simple table     *
   *                 spaces or classic-partitioned table spaces)  *
   ****************************************************************
   * PROBLEM DESCRIPTION: Non-segmented table space may grow      *
   *                      rapidly due to insert failing to reuse  *
   *                      deleted space                           *
   ****************************************************************
   * RECOMMENDATION:                                              *
   ****************************************************************
   In DB2 10, for non-segmented table spaces, the first SQL DELETE
   against a full page mistakenly skip to update the space map
   page. According to the non-updated space map page, the data page
   still remain full incorrectly.
   
   As a result, a subsequent insert looked for space in a different
   page, resulting in unnecessary growth to the table space.
   
   If after the first SQL DELETE against a full page came another
   SQL DELETE, depending on the space situation on the page, the
   second SQL DELETE may or may not drive update of the space map
   page. Therefore, the problem of 'unupdated' space map page could
   continue even through several SQL DELETEs.
   
   The problem is more likely to happen in table spaces that have a
   lower MAXROWS value and small row sizes.
   
   
    
   
   

PROBLEM CONCLUSION
 *  DB2 code has been modified to make sure that the first SQL
   DELETE against a full page properly updates the space map page
   so that a subsequent insert can reuse the deleted space.
   
   Additional keywords: SQLDELETE SQLINSERT
   
   
    
   
   

TEMPORARY FIX
 *  *********
   * HIPER *
   *********
   
   
    
   
   

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   PM71866
   
   
 * REPORTED COMPONENT NAME
   DB2 OS/390 & Z/
   
   
 * REPORTED COMPONENT ID
   5740XYR00
   
   
 * REPORTED RELEASE
   A10
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   YesHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2012-08-30
   
   
 * CLOSED DATE
   2012-10-26
   
   
 * LAST MODIFIED DATE
   2012-12-04
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
    UK83061
   
   

MODULES/MACROS
 *  DSNIDILS DSNIDLEO
   
   
    
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   DB2 OS/390 & Z/
   
   
 * FIXED COMPONENT ID
   5740XYR00
   
   

APPLICABLE COMPONENT LEVELS
 * RA10 PSY UK83061 [HTTPS://WWW14.SOFTWARE.IBM.COM/WEBAPP/SET2/ORDERMEDIA/SHOPCART?PTFS=UK83061]
   UP12/11/13 P F211
   
   

FIX IS AVAILABLE
 * SELECT THE PTF APPROPRIATE FOR YOUR COMPONENT LEVEL. YOU WILL BE REQUIRED TO SIGN IN. DISTRIBUTION ON PHYSICAL MEDIA IS NOT AVAILABLE IN ALL COUNTRIES.