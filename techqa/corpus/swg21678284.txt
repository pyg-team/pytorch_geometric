Title: IBM ITCAM4Tx : WRT kfcmenv file - KFC_SSL_DECRYPT and KFC_DEBUG_SSL - United States

Text:
71WRT-CONF; 71WRT-TS TECHNOTE (FAQ)

QUESTION
 What is the difference between KFC_SSL_DECRYPT and KFC_DEBUG_SSL parameter entries in kfcmenv main configuration file of WRT agent? 

CAUSE
KFC_SSL_DECRYPT not documented in all ITCAM4tx official docs

ANSWER
KFC_SSL_DECRYPT is not a trace setting. 
It is one of the environment variables automatically set to Y when WRT (T5) agent is configured with "monitor HTTPS = Y". When WRT kt5agent starts, it then checks for KFC_SSL_DECRYPT=Y to perform various SSL related functions like SSL initialization.
In other words, this is one of the settings that turns on the SSL decryption feature in WRT. 


Other associated SSL parameters present in kfcmenv file are :
KFC_SSL_KEYSTORE=<path to keystore file name>.kdb
KFC_SSL_KEYMAP=<path to servermap name>.csv
KFC_HTTPS_PORT=<https port number(s) to be monitored> 


KFC_DEBUG_SSL is the trace setting to turn on the extra SSL related debug logging, when encountering an issue with WRT and HTTPS transactions. It's a switch to turn on trace regarding the processing and decrypting of SSL related records.This tracing includes SSL handshake 

The traces are found in kfcmserver.log (Windows) or kfcm120.log (Unix) analyzer log files. 

 

 

Remark: 

if you are encountering an issue like no https transactions being reported in TEP WRT workspaces, provided that valid keystore/keymap files are in use, and WRT monitored NIC interface actually receives/see the https traffic, it's possible that the following case is encountered: 

 When a request is generated by a client to the https server (without a load balancer in the picture) a new session is established between the client and server which includes a full SSL Handshake. On the other hand, when a request goes through a load balancer, the load balancer could be terminating the client session and forwarding the request to the server through a long standing session between the load balancer and server (and reusing an existing session ID via an abbreviated SSL handshake). 

WRT needs to observe the full SSL handshake to see the master secret and be able to decrypt SSL. If WRT did not observe the original full SSL Handshake for the long session between the load balancer and server, it will be unable to decrypt the packets and kfcm120/kfcmserver logs will show evidence of packets which have not been decrypted. 

 

PRODUCT ALIAS/SYNONYM
 itcam itcam4tx web response time