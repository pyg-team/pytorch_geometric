Title: IBM IZ42687: WEBSEAL CRASH WITH MUTUAL SSL - United States

Text:
AIX SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS USER ERROR.
    
   
   

ERROR DESCRIPTION
 *  A new webseal instance has been configured with mutual SSL. When
   customer trys to make use of the mutual SSL the webseal instance
   crashes.
   He has an SSL public certificate imported into the pdsrv
   keystore of the webseal.
   The associated user in the LDAP has been imported as a TAM user.
   He has changed the following parameters in the webseal
   configuration file.
   
   Added under authentication-levels "level = ssl" and then under
   authentication Mechanisims "cert-ssl = C:
   \PROGRA~1\Tivoli\PDWebRTE\bin\sslauthn.dll".
   Under Certificate he had set "accept-client-certs =
   prompt_as_needed"
   He has then try to access a resource behind the webseal instance
   and get presented with the Certificate Authentication page with
   the "Certificate Login Prompt", When he clicks the "Certificate
   Login Prompt" he gets returned a Page cannot be displayed
   message trying to access
   /pkmscertpromptstagen. Then he checks the webseal instance
   service and it is not running.
   
   Customer had tried to get some output from drwtsn32, but it does
   not create any output. The windows service just stops running
   and no exception is caught by drwtsn32, although the application
   and system log does show that it has crashed.
   
   
   In the system event log the following is listed:
   The Access Manager WebSEAL-gateway service terminated
   unexpectedly. It
   has done this 19 time(s).
   The Access Manager WebSEAL-gateway service terminated with
   service
   -specific error 1 (0x1).
   
   In the application event log the following is listed:
   Faulting application webseald.exe, version 0.0.0.0, faulting
   module
   pdira.dll, version 0.0.0.0, fault address 0x000407cf.
   0000: 41 70 70 6c 69 63 61 74 Applicat
   0008: 69 6f 6e 20 46 61 69 6c ion Fail
   0010: 75 72 65 20 20 77 65 62 ure web
   0018: 73 65 61 6c 64 2e 65 78 seald.ex
   0020: 65 20 30 2e 30 2e 30 2e e 0.0.0.
   0028: 30 20 69 6e 20 70 64 69 0 in pdi
   0030: 72 61 2e 64 6c 6c 20 30 ra.dll 0
   0038: 2e 30 2e 30 2e 30 20 61 .0.0.0 a
   0040: 74 20 6f 66 66 73 65 74 t offset
   0048: 20 30 30 30 34 30 37 63 000407c
   0050: 66 f
   
   
   Customer had installed fixpack 21 but the issue still exist!
   
   
   Steps to Duplicate:
   enable mutual SSL
   Add under authentication-levels "level = ssl", under
   authentication
   Mechanisims "cert-ssl =
   C:\PROGRA~1\Tivoli\PDWebRTE\bin\sslauthn.dll",
   under Certificate set "accept-client-certs = prompt_as_needed"
   contact the resource behind the webseal instance
   use "Certificate Login Prompt"
   
   
   Desired Behavior:
   WebSeal should be keep on running also with mutual SSL
   
   
   Environment:
   Windows server
   
   The PDversion output from Webseal is
   
   IBM Tivoli Access Manager Runtime 6.0.0.15
   IBM Tivoli Access Manager Policy Server Not Installed
   IBM Tivoli Access Manager Web Portal Manager Not Installed
   IBM Tivoli Access Manager Application Developer Kit Not
   Installed
   IBM Tivoli Access Manager Authorization Server Not Installed
   IBM Tivoli Access Manager Runtime for Java Not Installed
   IBM Tivoli Access Manager Policy Proxy Server Not Installed
   IBM Tivoli Access Manager Web Security Runtime 6.0.0.15
   IBM Tivoli Access Manager WebSEAL 6.0.0.15
   
   The PDVersion output from the TAM server is
   
   IBM Tivoli Access Manager Runtime 6.0.0.15
   IBM Tivoli Access Manager Policy Server 6.0.0.15
   IBM Tivoli Access Manager Web Portal Manager 6.0.0.15
   IBM Tivoli Access Manager Application Developer Kit 6.0.0.15
   IBM Tivoli Access Manager Authorization Server 6.0.0.15
   IBM Tivoli Access Manager Runtime for Java 6.0.0.15
   IBM Tivoli Access Manager Policy Proxy Server Not Installed
   IBM Tivoli Security Utilities 6.0.0.5
   IBM Tivoli Access Manager Web Security Runtime 6.0.0.0
   IBM Tivoli Access Manager Web Security ADK 6.0.0.0
   IBM Tivoli Access Manager Session Management Web Interface
   6.0.0.4
   IBM Tivoli Access Manager Session Management Command Line
   6.0.0.4
   
   
    
   
   

LOCAL FIX

PROBLEM SUMMARY

PROBLEM CONCLUSION

TEMPORARY FIX

COMMENTS
 *  The customer has resolved this issue by removing the p
   wdReset flag on the server DN, restarted the WebSEAL instance, a
   nd is now able to authenticate using mutual authentication.
   
   
    
   
   

APAR INFORMATION
 * APAR NUMBER
   IZ42687
   
   
 * REPORTED COMPONENT NAME
   ACCESS MGR WEBS
   
   
 * REPORTED COMPONENT ID
   5724C0811
   
   
 * REPORTED RELEASE
   600
   
   
 * STATUS
   CLOSED USE
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2009-01-28
   
   
 * CLOSED DATE
   2009-02-16
   
   
 * LAST MODIFIED DATE
   2009-02-16
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION

APPLICABLE COMPONENT LEVELS