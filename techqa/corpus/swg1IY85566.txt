Title: IBM IY85566: GSK7CMD -CERT -IMPORT FAILS WITH X11 EXCEPTION JAVA.LANG.INTERNALERROR - United States

Text:
AIX SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS DOCUMENTATION ERROR.
    
   
   

ERROR DESCRIPTION
 *  A customer using gsk7cmd -cert -import to import a PKCS12
   file into their CMS key database received the following
   error:
   
     Exception in thread "main" java.lang.InternalError:
   Can't connect to X11 window server using ':0.0' as the
   value of the DISPLAY variable.
   
   
    
   
   

LOCAL FIX
 *  Add the -label option with the certificate's label(name) when
   importing a personal certificate into the key database.
   
   
    
   
   

PROBLEM SUMMARY
 *  ****************************************************************
   USERS AFFECTED:
   Customers using GSkit (gsk6cmd, runmqckm or gsk7cmd) to import
   SSL certificates using the -cert -import command line syntax.
   
   Platforms affected:
    All Distributed (iSeries, all Unix and Windows)
   ****************************************************************
   PROBLEM SUMMARY:
   The error occurs because the user has omitted the -label
   parameter from the command. For the versions of GSkit shipped
   with WebSphere MQ, the -label parameter is mandatory when
   importing certificates.
   
   The command syntax documented in the WMQ System Administration
   and Security manuals is incorrect and is to be updated.
   
   
    
   
   

PROBLEM CONCLUSION
 *  Amend the WebSphere MQ 5.3 System Administration Guide as follow
   
   Chapter 18, "IKEYCMD commands", "Commands for CMS or PKCS#12 Key
   Databases":
   
   Replace the section headed "-cert -import" with the following:
   
     -----------------------
     "-cert -import
         Import a personal certificate from a key database:
   
         -cert -import -file filename -pw password -type pkcs12
   -target filename -target_pw password -target_type cms -label lab
   
         Notes:
          (1) The -label parameter is mandatory and specifies the
   label of the
              certificate which is to be imported from the source
   key database
   
          (2) There is an optional -new_label parameter which
   allows the imported
              certificate to be given a different label in the
   target key database
              from the label in the source database."
     -----------------------
   
   Amend the WebSphere MQ 5.3 Security manual as follows:
   
   Chapter 12, "Managing digital certificates", "Importing a
   personal certificate into a key repository"
   
   Replace the section after step 8 with the following:
   
     -----------------------
      "Use the following command to import a personal certificate
   using IKEYCMD:
         gsk6cmd -cert -import -file filename -pw password -type
   pkcs12 -target filename -target_pw password -target_type cms
   -label label
   
     where:
     -file filename is the fully qualified path name of the file
   containing the PKCS #12 certificate.
     -pw password is the password for the PKCS #12 certificate.
     -type pkcs12 is the type of the file.
     -target filename is the name of the destination CMS key databa
     -target_pw password is the password for the CMS key database.
     -target_type cms is the type of the database specified by -tar
     -label is the label of the certificate to import from the
   source key database
     -new_label is the label the certificate will be assigned in
   the target database. If this is omitted, the default is to use
   the same as -label."
     -----------------------
   
   Amend the WebSphere MQ V6 System Administration Guide as follows
   
   Chapter 18, "gsk7cmd and runmqckm options"
   
   Add the following row to Table 23:
   
     -----------------------
    "Option:       -new_label
     Description:  If specified on a certificate import command,
   allows a
                   certificate to be imported with a different
   label from the
                   label it had in the source key database."
     -----------------------
   
   Chapter 18, "IKEYCMD commands", "Commands for CMS or PKCS#12 Key
   Databases":
   
   Replace the section headed "-cert -import" with the following:
   
     -----------------------
     "-cert -import
         Import a personal certificate from a key database:
   
         -cert -import -file filename -pw password -type pkcs12
   -target filename -target_pw password -target_type cms -label lab
   
         Notes:
          (1) The -label parameter is mandatory and specifies the
   label of the
              certificate which is to be imported from the source
   key database
   
          (2) There is an optional -new_label parameter which
   allows the imported
              certificate to be given a different label in the
   target key database
              from the label in the source database."
     -----------------------
   
   Amend the WebSphere MQ V6 Security manual as follows:
   
   Chapter 13, "Managing digital certificates", "Importing a
   personal certificate into a key repository"
   
   Replace the section after item 21 with the following:
   
   To import a personal certificate using iKeycmd, use the
   following commands:
   
     -----------------------
    "* On UNIX:
        gsk7cmd -cert -import -file filename -pw password -type
   pkcs12 -target filename
                -target_pw password -target_type cms -label label
     * On Windows:
        runmqckm -cert -import -file filename -pw password -type
   pkcs12 -target filename
                -target_pw password -target_type cms -label label
   
     where:
       -file filename is the fully qualified file name of the file
   containing the PKCS
             #12 certificate.
       -pw password is the password for the PKCS #12 certificate.
       -type pkcs12 is the type of the file.
       -target filename is the name of the destination CMS key
   database.
       -target_pw password is the password for the CMS key database
       -target_type cms is the type of the database specified by
   -target
       -label is the label of the certificate to import from the
   source key database
       -new_label is the label the certificate will be assigned in
   the target database. If this is omitted, the default is to use
   the same as -label.
   
   iKeycmd does not provide a command to change certificate labels
   directly. The way to change a certificate label is:
   
    (1) Export the certificate to a PKCS12 file using the -cert
   -export command. Specify the existing certificate label for the
   -label parameter.
    (2) Remove the existing copy of the certificate from the
   original key database using the -cert -delete command.
    (3) Import the certificate from the PKCS12 file using the -cert
   -import command. Specify the old label for the -label parameter
   and the desired new label for the -new_label parameter. The
   certificate will be imported back into the key database with the
   desired label."
     -----------------------
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   IY85566
   
   
 * REPORTED COMPONENT NAME
   WEB MQ FOR AIX
   
   
 * REPORTED COMPONENT ID
   5724B4101
   
   
 * REPORTED RELEASE
   530
   
   
 * STATUS
   CLOSED DOC
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2006-05-30
   
   
 * CLOSED DATE
   2006-05-31
   
   
 * LAST MODIFIED DATE
   2006-05-31
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION

APPLICABLE COMPONENT LEVELS