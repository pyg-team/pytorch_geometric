Title: IBM Specifying the side file access mechanism to be used by COBOL in CICS TS - United States

Text:
direct QSAM mechanism ; Debug Tool debugging ; PK67329 PK68401 ; extrapartition transient data ; TD queue ; DFHRU2816 startup initialization ; MSGDFHRU2816 ; 5655M1500 R640 640 R400 400 HCI6400 R650 650 R500 500 HCI6500 5655-M15 5655M15 ; 5655S9700 R660 660 R600 600 HCI6600 R670 670 R700 700 HCI6700 5655-S97 5655S97 ; 5655Y0400 R680 680 R800 800 HCI6800 R690 690 R900 900 HCI6900 R700 700 R000 000 HCI7000 5655Y0401 5655-Y04 5655Y04 KIXINFO TECHNOTE (FAQ)

QUESTION
 How do you specify the side file access mechanism to be used by COBOL in CICS Transaction Server for z/OS (CICS TS)? When you use CICS extrapartition transient data, you lose the ability to debug your applications if you use CMDSEC or the XEISPIN exit to disallow use of the system programming interface (SPI) in your CICS region. If you would prefer COBOL to avoid using the CICS SPI to access side files, you should enable the direct QSAM mechanism. 

CAUSE
As stated in APAR PK67329, if a customer disallows use of the system programming interface (SPI) in their CICS region then they lose the ability to debug their applications.
Note: 
A "side file" is a data set that is created when you compile a program. The side file contains information that is not in the load module (executable machine code), and is used to help with debugging or abend analysis.

The mechanism described in this document is related to reading the side files when debugging or analyzing the programs when they run.


ANSWER
As documented under Specifying the side file interface to be used [http://www.ibm.com/support/knowledgecenter/SSLTBW_2.2.0/com.ibm.zos.v2r2.ceea500/ceea50038.htm] in the z/OS V2.20 documentation:

COBOL can use one of two interfaces to access side files during Debug Tool debugging and CEEDUMP processing: 

 

 * CICS Extrapartion Transient Data Queues (TDQs) 
 * Direct QSAM access through a CICS Task Related User Exit (TRUE)


By default, COBOL will use the TDQ interface (using CICS SPI and API function calls) to access side files. If you would prefer COBOL to use the new direct QSAM TRUE interface instead of the TDQ interface, you need to enable the direct QSAM TRUE interface. 

To enable the direct QSAM TRUE interface, specify the following INITPARM in your CICS startup parameters: 
 *  INITPARM
 * =(DFHLETRU='USEQSAM')


Note that by providing this INITPARM, the direct QSAM TRUE interface will be used for: 
 * COBOL side files 
 * Debug Tool files such as listing, source, preference, USE, and LOG files


In order to use the direct QSAM TRUE interface, you need the PTFs for the following APARs to be applied to the appropriate products: 

CICS Transaction Server 3.1 PK67329 
CICS Transaction Server 3.2 PK68401 
COBOL component of Language Environment PK71852 
Debug Tool 8.1 PK69617 
Debug Tool 9.1 PK72833  

Following is a table that also includes the PTFs: 

Product APAR PTF CICS Transaction Server for z/OS V3.1 PK67329 UK40994 CICS Transaction Server for z/OS V3.2 PK68401 UK40995 Language Environment for z/OS V1.8 (COBOL component ) PK71852 UK42536 Language Environment for z/OS V1.9 UK42537 Language Environment for z/OS V1.10 UK42538 Debug Tool for z/OS V8.1 PK69617 UK39085 Debug Tool for z/OS V9.1 PK72833 UK39883 
If you are using higher releases of these products then no PTFs are required. 

Note: If using CICS TS V3, after you apply the necessary CICS APAR, ensure that you upgrade your CICS system definition (CSD) file using a DFHCSDUP UPGRADE USING(DFHCURDM) [http://www.ibm.com/support/knowledgecenter/SSGMCP_5.3.0/com.ibm.cics.ts.resourcedefinition.doc/csdup/commands/upgrade.html] command to define the DFHLETRU TRUE to CICS. Otherwise, you will receive message DFHRU2816 during CICS initialization stating that exit program DFHLETRU is not available. RELATED INFORMATION
 Using CMDSEC to disallow use of the SPI [http://www.ibm.com/support/knowledgecenter/SSGMCP_5.3.0/com.ibm.cics.ts.racfsecurity.doc/topics/dfht5m2.html]
Using XEISPIN to disallow use of the SPI [http://www.ibm.com/support/knowledgecenter/SSGMCP_5.3.0/com.ibm.cics.ts.doc/dfha3/topics/dfha3kw.html]


 

PRODUCT ALIAS/SYNONYM
 CICS/TS CICS TS CICS Transaction Server