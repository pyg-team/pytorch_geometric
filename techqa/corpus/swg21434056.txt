Title: IBM Server authentication fails for Domain users on Windows server 2000 - United States

Text:
status; functional failure; 1434056; 1296160 TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
This technote explains how to debug and correct server authentication failures for Microsoft Windows 2000 server in IBM Rational Build Forge. 

SYMPTOM
When using a domain user account for your server authentication and you receive the following error:
Status: Functional failure


CAUSE
There might be a few reasons why the server authentication could be failing. 

 1. Check that the password is correct. 
 2. Check that computer is part of a domain that the user can log into. 
    The easiest way to check these is to use the server authentication credentials to log into the machine in question. 
 3. Check that you have the correct policies enabled on the machine.
    Review the following document: 1296160 About Build Forge Agent permissions on Windows [http://www.ibm.com/support/docview.wss?uid=swg21296160] 


If all of this is properly configured, you must enable debugging to resolve the problem. 

RESOLVING THE PROBLEM
To resolve this issue you need to follow these steps 

 1. Open a command prompt 
 2. run:
    set BF_AGENT_DEBUG=1
    set BF_SERVERTEST_DEBUG=1 
 3. change directory to the Build Forge home/install directory
    Example:C:\Program Files\IBM\Build Forge> 
 4. run:
    bfservertest <logical name of the server>
    
    This should produce output similar to:
    
    Agent: [320] [AUTH] [AuthRunningAs["SYSTEM","NT AUTHORITY",*WinSidUser]]
    Agent: [320] [AUTH] [AuthPriv["Act as part of the operating system"]]
    Agent: [320] [AUTH] [AuthPriv["Create global objects"]]
    Agent: [320] [AUTH] [AuthPriv["Take ownership of files or other objects"]]
    Agent: [320] [AUTH] [AuthPriv["Create a pagefile"]]
    Agent: [320] [AUTH] [AuthPriv["Lock pages in memory"]]
    Agent: [320] [AUTH] [AuthPriv["Replace a process level token"]]
    Agent: [320] [AUTH] [AuthPriv["Adjust memory quotas for a process"]]
    Agent: [320] [AUTH] [AuthPriv["Increase scheduling priority"]]
    Agent: [320] [AUTH] [AuthPriv["Create permanent shared objects"]]
    Agent: [320] [AUTH] [AuthPriv["Debug programs"]]
    Agent: [320] [AUTH] [AuthPriv["Generate security audits"]]
    Agent: [320] [AUTH] [AuthPriv["Manage auditing and security log"]]
    Agent: [320] [AUTH] [AuthPriv["Modify firmware environment values"]]
    Agent: [320] [AUTH] [AuthPriv["Bypass traverse checking"]]
    Agent: [320] [AUTH] [AuthPriv["Back up files and directories"]]
    Agent: [320] [AUTH] [AuthPriv["Restore files and directories"]]
    Agent: [320] [AUTH] [AuthPriv["Shut down the system"]]
    Agent: [320] [AUTH] [AuthPriv["Load and unload device drivers"]]
    Agent: [320] [AUTH] [AuthPriv["Profile single process"]]
    Agent: [320] [AUTH] [AuthPriv["Change the system time"]]
    
    Agent: [310] [EXEC] ['C:\DOCUME~1\<domain user>\Local' is not recognized as an internal or external command,]
    Agent: [310] [EXEC] [operable program or batch file.]
    
    
    Notice in the above output you get an error. What the server test is trying to do is execute a batch file that gets created in the domain user's TEMP variable for that user profile. 
    When you see [EXEC] failing to execute batch file and the path to the TEMP directory is truncated, you know that either there are too many spaces in the in path or the path itself is too long.
    
    To correct the problem, create a temp directory off the root of the drive and set the TEMP variable to point to the new directory.