Title: IBM 引起WMQ 集群环境解析错误2189（MQRC_CLUSTER_RESOLUTION_ERROR）的解决方法一例 - United States

Text:
 TECHNOTE (TROUBLESHOOTING)

问题（摘要）
 当您试图往WMQ集群队列发送消息时得到报错消息，MQ返回码：MQRC 2189（MQRC_CLUSTER_RESOLUTION_ERROR ）。当您在部分存储库队列管理器使用 DISPLAY QCLUSTER 命令时，会显示集群队列的不完整列表。 

原因
您的完整存储库队列管理器手工定义了指向此部分存储库的队列管理器，MQ在这种情况下会认为手工定义的CLUSSDR通道指向的也是完整存储库队列管理器。这样，存储库的更新就会发往此队列管理器，而如果此队列管理器不是完整存储库队列管理器，你将在此队列管理器的日志看到下面错误信息： 

AMQ9430: 'Unexpected cluster queue manager publication' received in the queue manager error log. 

。



解决问题
解决方法如下 

1. 通过执行下面命令把部分存储库队列管理器定义成完整存储库： 

ALTER QMGR REPOS(<cluster name>) 

2. 参照 MQ信息中心Removing a queue manager from a cluster [http://pic.dhe.ibm.com/infocenter/wmqv7/v7r1/topic/com.ibm.mq.doc/zc15110_.htm] 一章，将队列管理器从集群中移除，把REPOS and REPOSNL 属性置为空。 

3. 参照Adding a queue manager that hosts a queue locally [http://pic.dhe.ibm.com/infocenter/wmqv7/v7r1/topic/com.ibm.mq.doc/qc12240_.htm] 将此队列管理器再加回到集群。