Title: IBM Collect Data: For "Tivoli Business Service Manager" version 6.1 - United States

Text:
logs; configuration; 5724C5100; Collecting Data; Collecting Data; Collecting Data; MustGather; MustGather; MustGather; MustGatherDocument; collect_logs; TBSM TECHNOTE (FAQ)

QUESTION
 Is there a tool which automates the collection of diagnostic logs required by TBSM Support ? 

ANSWER
This is the "Collect Data" document for the IBM Tivoli Business Service Manager (TBSM) product. The attached "collect_logs" utility knows how to find, collect and zip the data files that IBM Support needs in order to diagnose problems with the TBSM product. 

#ibm-content
Table of contents:






[/support/docview.wss?uid=swg21598358&amp;aid=1] General Introduction to the collect_logs Utility 
[/support/docview.wss?uid=swg21598358&amp;aid=2] How-to instructions for using collect_logs 
[/support/docview.wss?uid=swg21598358&amp;aid=3] Downloading the collect_logs utility 







General introduction to collect_logs 
The collect_logs utility [http://publib.boulder.ibm.com/infocenter/wasinfo/index.jsp?topic=/com.ibm.websphere.base.doc/info/aes/ae/ctrb_ct.html] will gather detailed information about your Tivoli Business Service Manager configuration. 

It will collect a variety of useful logs, including the install logs and system logs. The collect_logs utility will compress all output into a single zip and provide final filename details and location after it has completed execution. 

The utility generally needs to be run on each server in order for Support to have a complete picture of what is going on, though this requirement may not be necessary for all types of problems. Read the on-screen prompts provided (there are just two input prompts, requiring user interaction). 


Important points to note: 
1. Execute 'collect_logs' with the TBSM installing ID. 

2. It is important to collect data, as soon as possible, after a problem is observed in order to collect all log and trace data before data is lost (First In, First Out, fixed size trace files). 

3. It is equally important to run the utility before any manual (user) recovery efforts are attempted. This will ensure an accurate snapshot of the current states which can then be correlated with the logs and traces collected. 

Back to top How-to instructions for using collect_logs 
Ensure you always FTP the zip package using binary mode. Unzip on the system where it is to be used, and into the TBSM install directory. The package has been formatted to place the necessary files into the tbsm/bin and tbsm/lib directories. 

Unix 
1. Navigate to the TBSM <install> directory 
2. Issue the following command: 
unzip <tempdir>/collect_logs_package_07-18-2012.zip 

NOTE: You'll be asked to replace the following files (reply y or A) to replace existing files 

Sample output 

replace tbsm/bin/versioninfo? [y]es, [n]o, [A]ll, [N]one, [r]ename: y 
inflating: tbsm/bin/versioninfo 
replace tbsm/bin/collect_logs.ant? [y]es, [n]o, [A]ll, [N]one, [r]ename: y 
inflating: tbsm/bin/collect_logs.ant 
inflating: tbsm/bin/versioninfo.bat 
replace tbsm/lib/verutil.jar? [y]es, [n]o, [A]ll, [N]one, [r]ename: y 
inflating: tbsm/lib/verutil.jar 


Windows: 
Unzip the collect_logs_package_07-18-2012.zip onto the TBSM <install> directory. If your 
archiving tool ask, please reply to replace files. The enclosed files should replace those 
already on the system: 

tbsm\bin\versioninfo 
tbsm\bin\versioninfo.bat 
tbsm\bin\collect_logs.ant 
tbsm\lib\verutil.jar 


Usage : 

Please Note: This utility must be run by the user ID that installed TBSM. Running as any other user will require file access/permission changes to allow proper execution. 

After unzipping the contents of the collect_logs_package_07-18-2012.zip package, run the following quick test to confirm you have the latest version of the collect_logs utility: 

On Unix: <installdir>/tbsm/bin/versioninfo pmrstamp 
On Windows: <installdir>\tbsm\bin\versioninfo pmrstamp 

Expected (top of output): 

======================================================================= 
TBSM Version Utility: Build date: 6.1.0.2 - 201207181236 
======================================================================= 

The above version info, should match the version info listed on the zip package. 

Once the latest version is installed, you may execute the command as follows: 

On Unix: <installdir>/tbsm/bin/collect_logs 

On Windows: <installdir>\tbsm\bin\collect_logs.bat 

NOTE: Read the on-screen prompts. User interaction is required to collect DE and ITM Agent data. These two collection points can be bypassed by pressing the "Enter" key at each of the two prompts. 


Results : 

After running the utility on the TBSM server(s), the result will be a single zip file on each of the servers where the utility is run. Execution time and zip file size will depend on the amount of data stored on the TBSM server's various logs directories. 

Unix: <installdir>/tbsm_logs_20120612095959.zip 
Windows: <installdir>/tbsm_logs_20120612100212.zip 


You should end up with a zip file named similar to what is shown above, for each of the servers where you ran collect_logs. Collect the zip files from each server and FTP to IBM. 

Back to top Downloading the collect_log 

Click on the following icon link to download the latest version (v6102) of the collect_logs utility : 
collect_logs_package_07-18-2012.zip [/support/docview.wss?uid=swg21598358&aid=5]collect_logs_package_07-18-2012.zip [/support/docview.wss?uid=swg21598358&aid=4] 


Back to top