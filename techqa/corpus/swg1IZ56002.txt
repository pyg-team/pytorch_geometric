Title: IBM IZ56002: JNLP FILES FOR ITM AGENT COMPONENTS AND TEP LOSE CUSTOMIZATION DURING RECONFIG, OR UPGRADE. - United States

Text:
  FIXES ARE AVAILABLE
IBM Tivoli Monitoring 6.2.2 Fix Pack 8 (6.2.2-TIV-ITM-FP0008) [http://www-01.ibm.com/support/docview.wss?uid=swg24031354]
IBM Tivoli Monitoring 6.2.2 Fix Pack 9 (6.2.2-TIV-ITM-FP0009) [http://www-01.ibm.com/support/docview.wss?uid=swg24032067]
IBM Tivoli Monitoring 6.2.2 Fix Pack 6 (6.2.2-TIV-ITM-FP0006) [http://www-01.ibm.com/support/docview.wss?uid=swg24030135]


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  Severity: 2
   Approver: JM
   Compid:  5608A41CI Distributed Installer
   Abstract: JNLP files for ITM Agent components and TEP lose
   customization during reconfig, or upgrade.
   
   
   Environment:
   Windows all platforms and UNIX TEPS supported platforms that
   use WebStart to logon TEPS.
   
   Problem Description:
   Customization to JNLP files do not persist during reconfig or
   upgrade to another release of ITM. Currently customization to
   JNLP files do not persist during reconfiguration or upgrade of
   TEPS. The changes are lost because the TEP.JNLPT file used to
   build the TEP.JNLP file overlays any modifications to the
   TEP.JNLP file.
   
   There needs to be a way to change these files so that the
   changes persist release to release and reconfig to reconfig.
   Changes to the TEP.JNLPT file will persist during a reconfig,
   but are lost during the upgrade.
   
   
   Detailed Recreation Procedure:
   
   To recreate TEP.JNLP changes:
   1. Use the recommended procedure to add the following statement
   to the TEP.JNLPT file in the Config directory:
   
   <property name="cnp.browser.installdir"
   value="c:\temp\webrenderer"/>
   
   This statement should be added to the area where all the
   other <property name=" values exist.
   
   2. Reconfig TEPS and the new TEP.JNLP file in the CNB directory
   should contain the statement added to the template in step 1
   above.
   
   To recreate TEP.JNLP changes during upgrade:
   
   1. Use the recommended procedure to add the following
   statement to the TEP.JNLPT file in the HOME\Config directory:
   
   <property name="cnp.browser.installdir"
   value="c:\temp\webrenderer"/>
   
   2. Upgrade to a newer release of ITM.
   
   3. Verify that the changes are persisted across the upgrade.
   
   Although the examples show Windows the same changes should
   persist for Unix supported TEPS platforms as well.
   
   
   Related Files and Output:
   This change is to install script and possibly configuration
   utilities so in order to implement a new CD must be created
   (Windows and possibly Unix). Therefore, provisional fixes for
   this APAR may not be available.
   
   Workaround:
   
   1. Edit the tep.jnlp file and the tep.jnlpt file on the machine
   where the tep server is running. The tep.jnlp file is located in
   the cw directory on linux/unix system and the CNB directory on
   Windows. The location of the tep.jnlpt file is in the Config
   directory on Windows and must be found on unix because it
   varies by platform. Add the following parameter to the tep.jnlp
   file and tep.jnlpt.
   
   <property name="cnp.browser.installdir"
   value="c:\temp\webrenderer"/>
   
   NOTE: The customer has to define the directory where they want
   the files to be written. The "c:\temp\webrenderer" above is an
   example.
   
   Changing this file may not be supported when the final APAR
   APAR solution is implemented. Customers may have to use a new
   procedure    to add the support back into their JNLPT files and
   then reconfig   the object being changed. TEPS in this example.
   
   2. On the windows desktops where the customer has already run
   the ITM_IF3 TEP JWS client they will need to delete the
   .webrendererswing directory.
   
   C:\Documents and Settings\Administrator\.webrendererswing
   
   Depending on the browser used (e.g. Firefox), the browser cache
   may need to be cleared before getting the updated ITM_IF3 TEP
   JWS client.
   
   After deleting the .webrendererswing directory the end user
   should be able to successfully connect to both itm621 base and
   itm621_if3 without problems. They should also be able to run two
   simultaneous tep clients on the same windows machine (one
   connected to itm621 base and the other to itm621_if3).
   
   
    
   
   

LOCAL FIX
 *  See above.
   
   
    
   
   

PROBLEM SUMMARY
 *  Customer makes changes to the JNLP template files (tep.jnlpt or
   component.jlpt) in the HOME\Config directory, or the JNLP files
   in the HOME\CNB directory (tep.jnlp, or K??_resource.jar.jnlp).
   These customized changes are lost during product upgrade or
   Tivoli Enterprise Portal reconfiguration.
   
   
    
   
   

PROBLEM CONCLUSION
 *  This APAR only addresses JNLP files and upgrade to a newer
   release of IBM Tivoli Monitoring. Reconfigure continues to work
   as it does today. During an upgrade both the JNLP template files
   and JNLP files are saved in backup directories. After the new
   JNLP files have been generated, they are compared to the backed
   up copies, and any files that are different are reported in file
   CustomFiles_date time.txt in the HOME\InstallITM directory. Once
   the upgrade completes the customer can compare the listed files
   with a 'diff' program and migrate any required changes to the
   new files. During a reconfigure, changes to the JNLP files
   HOME\CNB directory continue to be temporary and are not
   maintained. Changes to the JNLP template files (tep.jnlpt or
   component.jnlpt) in the HOME\Config directory are maintained
   during a reconfiguration.
   
   Install Actions
   
   In order for this APAR to be properly implemented in your
   environment, you must take the following actions:
   
   Recovery Procedure for Windows:
   
   1. After each upgrade of TEPS, look for file Custom_Files_date
   time.txt in the HOME\InstallITM directory.
   2. If file Custom_Files_date time.txt is not found, no
   customization was found for the templates or JNLP files so no
   changes are required.
   3. If the file is found, then some custom values were detected
   and the old and new JNLPT and JNLP files should be compared. The
   Custom_Files file, example below, shows the location and names
   of the old and new files so they can be compared with a diff or
   merge tool.
   4. Merge the old file changes into the new file using the diff
   tool as a guide.
   5. After the merge is complete, reconfig TEPS to pick up the new
   changed template files.
   NOTE: The "date time" information will match the date time stamp
   of the log created by the upgrade.
   
   Example content of CustomFiles_20100423 1220.txt
   
   JNLPT files:
   Old dir = C:\IBM\ITM\BACKUP\20100423_1220\Config
   New dir=  C:\IBM\ITM\Config
   FILE -  C:\IBM\ITM\Config\component.jnlpt
   FILE -  C:\IBM\ITM\Config\tep.jnlpt
   END JNLPT files.
   JNLP files:
   Old dir =  C:\IBM\ITM\BACKUP\20100423_1220\CNB
   New dir=  C:\IBM\ITM\CNB
   FILE -  C:\IBM\ITM\CNB\ksy_resources.jar.jnlp
   FILE -  C:\IBM\ITM\CNB\tep.jnlp
   END JNLP files.
   
   Recovery Procedure for Unix:
   1. After each upgrade of TEPS, look for KCIIN2592I in the
   itm_install.log in the CANDLEHOME/logs directory.
   
   Example:
   
   2010-04-19 17:30:30.279-06:00 ITMinstall.Utilities processByList
   [LOG_INFO]
   KCIIN2592I The following files are different in the new
   directory and the old directory.
   new directory: /opt/IBM/ITM/
   old directory: /opt/IBM/ITM/backup/backups/current
   config/tep.jnlpt
   config/component.jnlpt
    (traceKey:1271716230279)
   
   If the message key is found, then some custom values were
   detected and the old and new JNLPT and JNLP files should be
   compared. The log entry shows the location of the old and new
   files so a diff program can be used to merge the old changes
   into the new files. The diff program will usually handle the
   changes easily. If the message key is not found, old and new
   files were identical so no customization was found for the
   templates or JNLP files.
   2. Merge those changes from the backup file new file
   
   
   The fix for this APAR is contained in the following maintenance
   packages:
   
      | fix pack | 6.2.1-TIV-ITM-FP0001
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   IZ56002
   
   
 * REPORTED COMPONENT NAME
   OMEG DIST INSTA
   
   
 * REPORTED COMPONENT ID
   5608A41CI
   
   
 * REPORTED RELEASE
   621
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2009-07-24
   
   
 * CLOSED DATE
   2009-10-15
   
   
 * LAST MODIFIED DATE
   2010-04-26
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   OMEG DIST INSTA
   
   
 * FIXED COMPONENT ID
   5608A41CI
   
   

APPLICABLE COMPONENT LEVELS
 * R621 PSY
   UP