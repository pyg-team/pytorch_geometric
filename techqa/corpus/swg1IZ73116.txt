Title: IBM IZ73116: MQ CLUSTER SENDER CHANNEL (CLUSSDR) PROPCTL VALUE IS INCORRECTLY SET TO THE VALUE OF THE CLUSTER RECEIVER CHANNEL (CLUSRCVR) - United States

Text:
 SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS DOCUMENTATION ERROR.
    
   
   

ERROR DESCRIPTION
 *  The WebSphere MQ documentation lacks adequate information for
   the PROPCTL channel attribute and its usage in mixed version
   WebSphere MQ queue manager cluster environments.
   
   
    
   
   

LOCAL FIX

PROBLEM SUMMARY
 *  ****************************************************************
   USERS AFFECTED:
   WebSphere MQ users who need to understand the usage of the
   Property Control (PROPCTL) channel attribute, whilst
   configuring queue manager clusters.
   
   Platforms affected:
   All Distributed (iSeries, all Unix and Windows)
   ****************************************************************
   PROBLEM SUMMARY:
   The WebSphere MQ documentation did not clearly state the
   usage of the Property Control channel attribute in the case of
   mixed version queue manager cluster environments.
   
   In case of a mixed clusters environment, specifying PROPCTL to
   NONE may not help in removing the application properties such
   as RFH2. This is due to the default value (COMPAT) being
   used for back level channels that are unable to provide the
   attribute.
   
   When a cluster sender channel (CLUSSDR) is defined from a
   WebSphere MQ V7 queue manager to a back level queue manager (V6
   for example) another automatically defined channel is created
   alongside the manually defined channel. This happens once
   channel negotiations complete and the target queue manger
   publishes its cluster receiver channel (CLUSRCVR) back to the
   sender. This new channel definition takes its attributes from
   this CLUSRCVR and not the manually defined CLUSSDR.
   
   As the back level CLUSRCVR does not have this PROPCTL
   attribute, by default, the WebSphere MQ V7 automatically
   defined channel will use COMPAT value for PROPCTL attribute.
   
   This causes the messages to be delivered to a back level queue
   manager without any changes to the RFH2 properties.
   
   
    
   
   

PROBLEM CONCLUSION
 *  The information in the MQ documentation topics qc10760 and
   ic11510 will be updated with the following texts.
   
   Topic qc10760:
   
   If the cluster needs to use the PROPCTL to remove the
   application headers like RFH2 from the messages going from a MQ
   V7 queue manager to a back level version queue manager, you
   must write a channel auto-definition exit in order to force
   PROPCTL value to be NONE.
   
   Topic ic11510:
   
   PropertyControl(PROPCTL)
   
   PROPCTL ( PropertyControl )  - Valid for only sender, server,
   cluster-sender and cluster-receiver channels.
   
   This defines what happens to properties of messages that are
   about to be sent to a V6 or earlier queue manager. The value
   has to be changed from Compatibility to Force to preserve the
   v6 behavior of propagating the RFH2 to the caller. The possible
   values are:
   
   All means all properties of the message will be included with
   the message when it is sent to the remote queue manager. The
   properties, except those in the message descriptor (or
   extension), will be placed in one or more MQRFH2 headers in the
   message data.
   
   Compatibility. This is the default value; it allows
   applications which expect JMS related properties to be in an
   MQRFH2 header in the message data to continue to work
   unmodified.
   
   If the message contains a property with a prefix of mcd., jms.,
   usr., or mqext. then all optional message properties (where the
   Support value is MQPD_SUPPORT_OPTIONAL), except those in the
   message descriptor (or extension) will be placed in one or more
   MQRFH2 headers in the message data before the message is sent
   to the remote queue manager. Otherwise all properties of the
   message, except those in the message descriptor (or extension),
   will be removed from the message before the message is sent to
   the remote queue manager.
   
   If the message contains a property where the Support field of
   the property descriptor is not set to MQPD_SUPPORT_OPTIONAL
   then the message will be rejected and treated in accordance
   with its report options. If the message contains one or more
   properties where the Support field of the property descriptor
   is set to MQPD_SUPPORT_OPTIONAL but other fields of the
   property descriptor are set to non-default values, then these
   properties will be removed from the message before the message
   is sent to the remote queue manager.
   
   None means that all properties of the message, except those in
   the message descriptor (or extension), will be removed from the
   message before the message is sent to the remote queue manager.
   If the message contains a property where the Support field of
   the property descriptor is not set to MQPD_SUPPORT_OPTIONAL
   then the message will be rejected and treated in accordance
   with its report options.
   
   Note : If a cluster sender channel is defined from V7 queue
   manager to a back level queue manager and if None is specified
   for PROPCTL, then you have to write a channel auto-definition
   exit to remove the properties. This is because cluster sender
   channels have their definition based on the corresponding
   cluster-receiver channels and by default it will be
   compatibility set for back level queue managers.
   ---------------------------------------------------------------
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   IZ73116
   
   
 * REPORTED COMPONENT NAME
   WMQ AIX V7
   
   
 * REPORTED COMPONENT ID
   5724H7221
   
   
 * REPORTED RELEASE
   701
   
   
 * STATUS
   CLOSED DOC
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2010-03-19
   
   
 * CLOSED DATE
   2010-07-07
   
   
 * LAST MODIFIED DATE
   2010-07-07
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION

APPLICABLE COMPONENT LEVELS