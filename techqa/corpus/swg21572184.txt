Title: IBM Configuring Oracle Generic Heterogeneous Services and Transparent Gateways for Connection to NPS via ODBC - United States

Text:
 TECHNOTE (FAQ)

QUESTION
 How do I configure Oracle Generic Heterogeneous Services and Transparent Gateways for Connection to NPS via ODBC? 

ANSWER
Assumptions:
1. The NPS ODBC driver and a driver manager have been installed.
2. You have successfully tested the connection to the odbc driver manager. 

Facts for this example:
1. Oracle SID: XE
2. NPS Database: Numbersdb
3. Oracle and NPS reside on the same system. The server name is Century (IP 192.168.100.100)


Transparent Gateway for NPS Setup
The following example shows the setup for the transparent gateway to connect to the NPS NumbersDB database on a server named Century. 

1. Set the HS_FDS_CONNECT_INFO parameter in the initCENTURY_.ora file which is located in the <ORACLE_HOME>/hs/admin directory. The parameter should be set to server_name.database_name, whereserver_nameis the SQL Server database server name anddatabase_nameis the name of the database to which you want to connect. The file should be saved as init<GATEWAY SID>.ora where <Gateway SID> is the name by which you want to refer to the NPS. For this example, Century_NumbersDB is the Gateway SID. 

The following is a listing of initCENTURY_NumbersDB.ora
# initCENTURY_NumbersDB.ora 

# This is a sample agent init file that contains the HS parameters that are needed for an ODBC Agent. 

# 

# HS init parameters 

# 

HS_FDS_CONNECT_INFO = CENTURY_NumbersDB 

HS_FDS_TRACE_LEVEL = on 

HS_FDS_TRACE_FILE_NAME=/usr/lib/oracle/xe/app/oracle/product/10.2.0/server/hs/admin/log/Century_jcdb.log 

 

# Environment variables required for the non-Oracle system 

#NPS DRIVER INFORMATION 

 

HS_FDS_SHAREABLE_NAME = /user/local/nz/lib/libnzodbc.so 

HS_FDS_CONNECT_PROPERTIES="disableExtendedFetch='true'" 

 

# This is a sample agent init filethat contains the HS parameters that are needed for an ODBC Agent. 

# ODBC specific environment variables 

NZ_ODBC_INI_PATH = /usr/local/unixODBC/etc/ODBCDataSources 

ODBCINI=/usr/local/unixODBC/etc/ODBCDataSources/odbc.ini




2. Modify listener.ora file on the Oracle server to include the Gateway SID. This example uses port 1524. The LD_LIBRARY_PATH will point to the Oracle Home and the driver manager path for the inifiles. The following is a listing of thelistener.ora file: 
]LISTENER_CENTURY = (DESCRIPTION_LIST = (DESCRIPTION = (ADDRESS_LIST = (ADDRESS =(PROTOCOL = TCP)(HOST = 192.168.100.100)(PORT = 1524)) ) ) ) SID_LIST_LISTENER_CENTURY = (SID_LIST = (SID_DESC = (SID_NAME =CENTURY_JCDB) (ORACLE_HOME =/usr/lib/oracle/xe/app/oracle/product/10.2.0/server) (PROGRAM = 

After adding the entry, you must restart the listener. 3. Add an entry for the gateway to the tnsnamesfile($ORACLE_HOME/network/admin) on the client. The following is an excerpt from the tnsnames.ora file for the gateway SID for our example: Tnsnames entry
CENTURY_NumbersDB = 

(DESCRIPTION = 

(ADDRESS_LIST = 

(ADDRESS =(PROTOCOL = tcp)(HOST =192.168.100.100)(PORT = 1524)) 

) 

(CONNECT_DATA = 

(SID =CENTURY_NumbersDB) 

) 

(HS=OK) 

) 

 

# Make sure that the port number entered matches the corresponding entry in the listener file.





4. Create a database link pointing to the heterogeneous <SPANclass=SpellE>datasource: 
create database link <SPANclass=SpellE>nzsqldb connect to <username> identified by<password> using 'CENTURY_NumbersDBâ€™; 

5. Test the connection from SQL Plus or your <SPANclass=SpellE>favorite Oracle tool: 
Select count(*) from <SPANclass=SpellE>suppliers@CENTURY_NumbersDB; 
Your ODBC setup might consist of two files containing (odbc.ini and odbcinst.ini) which contain the connection information to NPS. The following are sample entries in odbc.ini: 

[ODBC Data Sources] CENTURY_NumbersDB = NetezzaSQL 

 

[CENTURY_NumbersDB] 

Driver = /usr/local/nz/lib64/libnzodbc.so 

Description = NetezzaSQL ODBC 

Servername = 192.168.100.100 

Port = 5480 

Database = NumbersDB 

Username = 

Password = 

ReadOnly = false 

ShowSystemTables = true 

LegacySQLTables = true 

LoginTimeout = 0 

QueryTimeout = 0 

DateFormat = 2 

NumericAsChar = false 

SQLBitOneZero = false 

StripCRLF = false 

 

 

[ODBC] 

IANAAppCodePage=4 

InstallDir=/usr/local/unixODBC 

Trace=1 

TraceDll=/usr/local/unixODBC/lib/odbctrac.so 

TraceFile=odbctrace.out 

UseCursorLib=0





The following are odbcinst.ini entries: 
[ODBC Drivers] NetezzaSQL = Installed 

 

[NetezzaSQL] 

Driver = /<SPANclass=SpellE>usr/local/nz/lib/libnzodbc.so 

Setup =/usr/local/nz.4.0/lib/libnzodbc.so 

APILevel<SPANstyle='mso-spacerun:yes'> = 1 

ConnectFunctions = YYN 

Description =Netezza ODBC driver 

DriverODBCVer<SPANstyle='mso-spacerun:yes'> = 03.51 

DebugLogging<SPANstyle='mso-spacerun:yes'> = true 

LogPath<SPANstyle='mso-spacerun:yes'> = /usr/local/unixODBC/log 

UnicodeTranslationOption = utf8 

CharacterTranslationOption = all 

PreFetch<SPANstyle='mso-spacerun:yes'> = 256 

Socket =16384








HISTORICAL NUMBER
 NZ318218