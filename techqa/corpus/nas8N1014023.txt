Title: IBM System Value QPFRADJ Values - United States

Text:
PERFM; SYSTEMVALUES; MSGCPF1805 TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 Why did my machine pool go lower than the minimum size setting in WRKSHRPOOL with QPFRADJ set to 2? 

RESOLVING THE PROBLEM
During an IPL, CPF1805 messages are sent to the history log (QHST) by the IPL tuner; this indicates machine pool size changes. The IPL tuner runs only if QPFRADJ is set to 1 or 2. The dynamic tuning (automatic adjustment by the performance adjuster) does not log changes to pool sizes, so you will not see a message in QHST for the changes it makes to the machine pool size. Dynamic tuning runs after the IPL tuner when QPFRADJ is set to 2.

So, we are really talking about two separate tuning algorithms. When QPFRADJ is set to 2, the IPL tuner sets the machine pool size based on its own calculation of reserved size and the configuration of the system. It does not look at the minimum machine pool size on WRKSHRPOOL. Those values are only used by the dynamic tuning. The help text on QPFRADJ and WRKSHRPOOL might not be totally clear about these being two separate things; however, it does differentiate adjustment at IPL from automatic adjustment. The help text on WRKSHRPOOL only states that the size percent is used when QPFRADJ is set to 2 or 3. It does not explicitly say automatic adjustment only. 

Even if you set the minimum % for the machine pool to a user-defined value, the IPL tuner will still set the machine pool first during the IPL if the QPFRADJ system value is set to 2. The dynamic tuning will recalculate the machine pool size based on the minimum %; however, it will always happen after the IPL tuning. The dynamic tuning runs immediately after the IPL tuning during IPL. However, the point I am trying to make is that there is a window between these two separate adjustments, even though you see only one of them logged in QHST. The IPL tuner does not know what the dynamic tuner minimum % is set to.

Advising that the minimum % be raised to a greater value is good. However, the QPFRADJ system value should also be changed from 2 to 3 to avoid the window where the IPL tuning is setting the machine pool to a low value prior to when the dynamic adjustment changes it to the minimum size set through WRKSHRPOOL.

If the QPFRADJ value is set to 3, the IPL tuner is not invoked; the machine pool is set to the value seen prior to the IPL. As a general recommendation, the QPFRADJ system value should be set to 3.

 


Cross reference information Segment Product Component Platform Version Edition Operating System IBM i 7.2 Operating System IBM i 7.1 Operating System IBM i 6.1 
HISTORICAL NUMBER
 468481384