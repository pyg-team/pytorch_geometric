Title: IBM "NoClassDefFoundError: ilog/rules/vocabulary/model/util/IlrResourceLoader" error when running Decision Validation Services (DVS) tests - United States

Text:
 TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 When running a Decision Validation Services (DVS) test, the test fails with the following error:
java.lang.NoClassDefFoundError: 
ilog/rules/vocabulary/model/util/IlrResourceLoader 

SYMPTOM
The server logs contain the following exception stacktrace; 

Throwable caught while invoking test ruleset factory 
java.lang.NoClassDefFoundError: ilog.rules.vocabulary.model.util.IlrResourceLoader at 
ilog.rules.dvs.rsi.IlrObjectModelHelper.loadBOM(IlrObjectModelHelper.java:201) at 
ilog.rules.dvs.rbtesting.utils.IlrRBTResourcesManager.getTnsReportBOM(IlrRBTResourcesManager.java:138) at 
ilog.rules.dvs.rbtesting.rules.IlrTestRulesetFactory.createTestRulesetArchive(IlrTestRulesetFactory.java:197) at 
ilog.rules.dvs.rbtesting.rules.IlrTestRulesetFactory.createTestRulesetArchive(IlrTestRulesetFactory.java:141) at 
ilog.rules.dvs.core.scenarioproviders.IlrExcel2003ScenarioProvider.getTestRulesetArchive(IlrExcel2003ScenarioProvider.java:166) at 
ilog.rules.dvs.rbtesting.IlrRBTScenarioProviderBase.initialize(IlrRBTScenarioProviderBase.java:88) at 
ilog.rules.dvs.core.scenarioproviders.IlrExcel2003ScenarioProvider.initialize(IlrExcel2003ScenarioProvider.java:139) at 
ilog.rules.dvs.runner.impl.IlrRunnerImpl.run(IlrRunnerImpl.java:203) at 
ilog.rules.dvs.runner.impl.IlrRunnerImpl.run(IlrRunnerImpl.java:92) at 
ilog.rules.dvs.ssp.impl.IlrScenarioSuiteRunner$IlrDefaultScenarioSuiteWorker.run(IlrScenarioSuiteRunner.java:142) at 
ilog.rules.dvs.ssp.impl.IlrWorkManagerScenarioSuiteWorkerGroup$IlrScenarioSuiteWorkerWork.run(IlrWorkManagerScenarioSuiteWorkerGroup.java:140) at 
ilog.rules.dvs.ssp.impl.IlrAbstractScenarioSuiteWorkerGroup.start(IlrAbstractScenarioSuiteWorkerGroup.java:112) at 
ilog.rules.dvs.ssp.impl.IlrScenarioSuiteRunner.createAndStartWorkerGroup (IlrScenarioSuiteRunner.java:606) at 
ilog.rules.dvs.ssp.impl.IlrScenarioSuiteRunner.run(IlrScenarioSuiteRunner.java:466) at 
ilog.rules.dvs.ssp.impl.IlrScenarioSuiteRunner.run(IlrScenarioSuiteRunner.java:393) at 
ilog.rules.dvs.ssp.impl.IlrSSPServiceImpl.run(IlrSSPServiceImpl.java:104) at 


CAUSE
This exception is generally seen when the SSP EAR does not have the XOM classes correctly packaged, or if the Class loader order property for the modules of SSP, Decision Center or Rule Execution Server applications is set incorrectly. 


RESOLVING THE PROBLEM
 

1. Ensure that the XOM has been properly packaged in the SSP EAR [http://pic.dhe.ibm.com/infocenter/dmanager/v8r5m1/index.jsp?topic=%2Fcom.ibm.odm.dserver.rules.designer.test%2Ftopics%2Ftsk_repackarchives.html], and the updated SSP EAR has been deployed correctly to the application server. Also ensure that the XOM classes have been compiled with a JDK compatible with the JVM of the application server.

2. Ensure that the Class loader order property is set to Classes loaded with local class loader first (parent last), for the Scenario Service Provider module of the SSP ear. Follow Step 18 of the documentation at Operational Decision Manager V8.5.1 > Configuring > Configuring Operational Decision Manager on WebSphere Application Server > Configuring the Decision Center consoles on WebSphere Application Server > Configuring the Decision Center consoles on WebSphere Application Server for distributed platforms > Additional steps to configure Decision Validation Services [http://pic.dhe.ibm.com/infocenter/dmanager/v8r5m1/index.jsp?topic=%2Fcom.ibm.odm.distrib.config.was%2Fconfig_dc_websphere%2Ftsk_was_deploy_dvs_arch.html].

After making the above change, please stop the SSP application, delete the directory <WASInstallDir>\profiles\<WASProfileName>\temp\<nodeName>\<serverName>\<SSPApplicationName> (the SSP application name is "jrules-ssp-WAS8" by default), and restart the SSP application.

3. Ensure that the Class loader order property is set to Classes loaded with local class loader first (parent last), for the ILOG Rule Execution Server Console module of the Rule Execution Server EAR. See Step 17 of the documentation at 
Operational Decision Manager V8.5.1 > Configuring > Configuring Operational Decision Manager on WebSphere Application Server > Configuring Rule Execution Server on WebSphere Application Server [http://pic.dhe.ibm.com/infocenter/dmanager/v8r5m1/index.jsp?topic=%2Fcom.ibm.odm.distrib.config.was%2Fconfig_ds_res_was8%2Ftsk_was_deploy_mgmt_ear.html]

4. Ensure that the Class loader order property is set to Classes loaded with local class loader first (parent last), for the teamserver module of the Decision Center EAR. See Step 5 of the documentation at 
Operational Decision Manager V8.5.1 > Configuring > Configuring Operational Decision Manager on WebSphere Application Server > Configuring the Decision Center consoles on WebSphere Application Server > Configuring the Decision Center consoles on WebSphere Application Server for distributed platforms > Step 4: Deploying the Decision Center EAR file [http://pic.dhe.ibm.com/infocenter/dmanager/v8r5m1/index.jsp?topic=%2Fcom.ibm.odm.distrib.config.was%2Fconfig_dc_websphere%2Ftsk_zlinux_change_class_load_seq.html]

5. If working with a cluster, refer to the document on clustering Decision Validation Services [http://www.ibm.com/support/docview.wss?uid=swg21425487] for how to configure the SSP. 

6. Examine the server logs (including FFDC logs) and address any additional errors such as authentication errors [http://www.ibm.com/support/docview.wss?uid=swg21578192].

7. Restart the server after making the above changes and conduct the DVS test again.


RELATED INFORMATION
#Testing and simulating rulesets [http://pic.dhe.ibm.com/infocenter/dmanager/v8r5m1/index.jsp?topic=%2Fcom.ibm.odm.dserver.rules.designer.test%2Ftopics%2Fodm_dserver_rules_designer_test.html]