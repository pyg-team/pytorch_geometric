Title: IBM Traveler for IBM i: Prevent JVM failure on IBM i with more than 16GB memory - United States

Text:
 TECHNOTE (TROUBLESHOOTING)

PROBLEM
IBM Notes Traveler running on IBM i with more than 16GB memory will cause JVM failure.

SYMPTOM
Customer will get the following error messages: 

 
#Notes Traveler: Starting JVM with Maximum Memory = 15872M based on maximum of 1/4 of physical memory (63488M) or the Maximum Memory Size specified in the server document (1024M) 
#Traveler::AddInMain: Can't create Java VM 


RESOLVING THE PROBLEM
IBM Notes Traveler made an enhancement to release 9.0.1 and back merged it to release 9.0.0.1 IF2, when there are more than 16GB memory on the system, Traveler will allocate 1/4 of physical memory (4GB at least) as heap memory. However, IBM i uses the 32bit JVM by default, which can not allocate more than 4GB heap memory, thus JVM fails. 


Traveler for IBM i fixed this problem in release 9.0.1, but not in Traveler release 9.0.0.1 IF2. If a customer upgrades to 9.0.0.1 IF2, and is running on IBM i with more than 16GB memory, it will cause a JVM failure.

There are currently four solutions:

1. Change to use 64bit JVM by setting the notes.ini parameter 

JAVA_HOME=/QOpenSys/QIBM/ProdData/JavaVM/jdk60/64bit

2. Change to have IBM Notes Traveler allocate no more than 1GB heap memory by setting the notes.ini parameter 

NTS_Java_Parms=-Xmx1024M

3. Upgrade IBM Notes Traveler to release 9.0.1.

4. Ask IBM support for the Traveler 9.0.0.1 IF2 hotfix QTA31029 for this problem.