Title: IBM PK54211: Error Invalid - United States

Text:
 SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS VENDOR SOLUTION.
    
   
   

ERROR DESCRIPTION
 *  It seems to be related to defect "RATLC00772708 - Failure when
   moving CQ database"
   but in this case we are only trying to modify a record and not
   move a database.
   However looking over "RATLC00772708 - Failure when moving CQ
   database" it seems to point to a Microsoft ODBC driver defect
   and or a recommendation from Microsoft to change CQ code to work
   around the defect. At any rate defect "RATLC00772708 - Failure
   when moving CQ database" is still opened.
   I was able to create a new database based off of the customers
   schema repository and I am attaching it to this record as the
   reproduction. In my tests if the change_log has 204800
   characters then I can modify the record but if I put 204804
   characters into the change log and try and modify it I receive
   the error "Invalid locator de-referenced". The problem also
   seems to have something to do with the number of fields or the
   data in the fields because it can't be reproduced in an out of
   the box SAMPL database.
   Steps to reproduce with Attached .
   1.) Using SQL Server 2005 restore attached databases.
   2.) Create connection using ClearQuest 7.0.1
   3.) Login to CQ client as user admin with no password and run
   the query new query which should return 1 record.
   Press the modify and Apply button and you will get the Error!
   SQLPramData: ...Invalid locator de-referenced
   Workaround for this problem is to set
   CQ_DIAG_BEHAVIOR=LOB_BUFFER_SIZE=500000
   
   
    
   
   

LOCAL FIX

PROBLEM SUMMARY

PROBLEM CONCLUSION

TEMPORARY FIX

COMMENTS
 *  Adding more than 204800 characters of data to a text field a
   ClearQuest modify will result in a SQL Server limitation,
   producing the error:
   "Invalid locator de-referenced"
   It is possible to workaround this by setting a ClearQuest
   behavior; CQ_DIAG_BEHAVIOR=LOB_BUFFER_SIZE=500000.
   
   
    
   
   

APAR INFORMATION
 * APAR NUMBER
   PK54211
   
   
 * REPORTED COMPONENT NAME
   CLRQUEST MSITE
   
   
 * REPORTED COMPONENT ID
   5724G3700
   
   
 * REPORTED RELEASE
   700
   
   
 * STATUS
   CLOSED ISV
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2007-10-08
   
   
 * CLOSED DATE
   2007-10-22
   
   
 * LAST MODIFIED DATE
   2007-10-22
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION

APPLICABLE COMPONENT LEVELS