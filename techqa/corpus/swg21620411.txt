Title: IBM WMSG0019E Warning messages during startup of the InfoSphere Master Data Management (MDM) application - United States

Text:
install; WMQ; WAS TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 You have deployed a Message Driven Bean (MDB) application onto InfoSphere MDM Server. After restarting the application server, the MDB Listener fails to start and WMSG0019E errors are logged in the Systemout.log 

SYMPTOM
From the Systemout.log 

[12/5/12 19:33:13:017 MST] 00000025 MDBListenerIm W WMSG0019E: Unable to start MDB Listener EventDetectorMDB, JMSDestination jms/EMQueue : java.lang.ClassCastException: com.ibm.ws.sib.api.jms.impl.JmsQueueImpl incompatible with com.ibm.mq.jms.MQQueue
at com.ibm.mq.jms.MQQueueConnection.createConnectionConsumer(MQQueueConnection.java:106)
at com.ibm.ejs.jms.JMSQueueConnectionHandle.createConnectionConsumer(JMSQueueConnectionHandle.java:139)
at com.ibm.ejs.jms.listener.MDBListenerImpl.createResources(MDBListenerImpl.java:563)
at com.ibm.ejs.jms.listener.MDBListenerImpl.internalStart(MDBListenerImpl.java:734)
at com.ibm.ejs.jms.listener.MDBListenerImpl.start(MDBListenerImpl.java:657)
at com.ibm.ejs.jms.listener.MDBListenerManagerImpl.start(MDBListenerManagerImpl.java:652)
at com.ibm.ejs.jms.listener.MsgListenerPort.add(MsgListenerPort.java:227)
at com.ibm.ejs.jms.listener.MDBListenerManagerImpl.startApplicationMDBs(MDBListenerManagerImpl.java:894)
at com.ibm.ejs.jms.listener.MDBListenerManagerImpl.stateChanged(MDBListenerManagerImpl.java:852)
at com.ibm.ws.runtime.component.MessageListenerImpl.stateChanged(MessageListenerImpl.java:188)
at com.ibm.ws.runtime.component.ApplicationMgrImpl.stateChanged(ApplicationMgrImpl.java:1226)
at com.ibm.ws.runtime.component.DeployedApplicationImpl.fireDeployedObjectEvent(DeployedApplicationImpl.java:1121)
at com.ibm.ws.runtime.component.DeployedApplicationImpl.setState(DeployedApplicationImpl.java:235)
at com.ibm.ws.runtime.component.DeployedApplicationImpl.setState(DeployedApplicationImpl.java:230)
at com.ibm.ws.runtime.component.DeployedApplicationImpl.start(DeployedApplicationImpl.java:829)
at com.ibm.ws.runtime.component.ApplicationMgrImpl.startApplication(ApplicationMgrImpl.java:921)
at com.ibm.ws.runtime.component.ApplicationMgrImpl$AppInitializer.run(ApplicationMgrImpl.java:2124)
at com.ibm.wsspi.runtime.component.WsComponentImpl$_AsynchInitializer.run(WsComponentImpl.java:342)
at com.ibm.ws.util.ThreadPool$Worker.run(ThreadPool.java:1497) 

From trace.log
[12/5/12 19:33:13:001 MST] 00000025 JMSQueueConne > createConnectionConsumer Entry queue://EMQUEUE?busName=DWLCustomer.SIB <null> 
com.ibm.ejs.jms.listener.ServerSessionPool@269c269c1 
[12/5/12 19:33:13:003 MST] 00000025 JMSQueueConne < createConnectionConsumer Exit <null> 
[12/5/12 19:33:13:017 MST] 00000025 MDBListenerIm W WMSG0019E: Unable 
to start MDB Listener EventDetectorMDB, JMSDestination jms/EMQueue : 
java.lang.ClassCastException: com.ibm.ws.sib.api.jms.impl.JmsQueueImpl 
incompatible with com.ibm.mq.jms.MQQueue at 
com.ibm.mq.jms.MQQueueConnection.createConnectionConsumer(MQQueueConnection.java:106) at com.ibm.ejs.jms.JMSQueueConnectionHandle.createConnectionConsumer(JMSQue 
ueConnectionHandle.java:139) at com.ibm.ejs.jms.listener.MDBListenerImpl.createResources(MDBListenerImpl.java:563) 


CAUSE
A Queue with the same name was defined at multiple scopes: jms/EMQueue configured at the server scope was pointing to an SIBUS queue and jms/EMQueue configured at the cluster scope was pointing to an MQ Queue.

Because resources configured at the server scope have higher precedence over resources configured at the cluster scope, the jms/EMQueue configured at the server scope was picked up by the application, but the application was expecting an MQ Queue and, as a consequence, it threw the ClassCastException. 


RESOLVING THE PROBLEM
Log in using the WebSphere Application Server Admin console 

1. Ensure JMS object is pointing to the correct MQ queue. 
2. Identify all the EMQUEUE Queue entries that have the same JNDI name 'jms/EMQueue' but that are defined at different scopes. Remove all the duplicates and retain only the one at the required scope. 

RELATED INFORMATION
 Configuring a queue for WebSphere MQ messaging provider [http://pic.dhe.ibm.com/infocenter/wasinfo/v7r0/topic/com.ibm.websphere.nd.doc/info/ae/ae/tmj_adm27.html]
Configuring a queue for the default messaging provider [http://pic.dhe.ibm.com/infocenter/wasinfo/v7r0/topic/com.ibm.websphere.nd.multiplatform.doc/info/ae/ae/tjn0023_.html]




PRODUCT ALIAS/SYNONYM
 MDM
MDM Server
InfoSphere MDM Server 
InfoSphere Master Data Management Server
IBM InfoSphere Master Data Management Server