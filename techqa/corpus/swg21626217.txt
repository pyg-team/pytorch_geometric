Title: IBM PureData System for Analytics Upgrades Frequently Asked Questions - United States

Text:
TwinFin; Striper; IBM Netezza 1000; IBMMustGather; MustGatherDocument PREVENTIVE SERVICE PLANNING

ABSTRACT
 When creating a PMR for an IBM PureData System for Analytics upgrade there are many frequently asked questions. This document was created to assist with the common questions regarding upgrades and the correct procedure for opening a PMR for the upgrade team. 

CONTENT
What components of a PureData System for Analytics appliance are available for Upgrade?
There are three main components of a system that can be upgraded: NPS, FDT, and HPF.

What is NPS?
NPS is the Netezza Performance Server, the main high performance database server for the system.

What is HPF?
HPF is the Host Platform. The HPF software contains kernel updates, firmware, and other special software used by the PureData System host servers. The HPF upgrade and downgrade process includes extensive error-checking, backups, and logging.

What is FDT?
FDT is the Firmware Diagnostics and Tools and contains the firmware updates for the hardware components of the PureData System for Analytics.

Where can I find the minimum versions of HPF and FDT required for the NPS I wish to upgrade to?
see "fixcentral" in the Related information section
Product Group: Information Management
Select from Information Management: IBM Netezza NPS Software and Clients
Install Version: desired NPS version
Platform: all
From here you will need to download the file called nz-npsdoc-vVersion.tar.gz. The pdf with this information is titled "Netezza Software Upgrade."

What should I download if having an NPS only upgrade performed?
We will need the NPS package from:
see "fixcentral" in the Related information section
Product Group: Information Management
Select from Information Management: IBM Netezza NPS Software and Clients
Install Version: desired NPS version
Platform: all
The package should be titled nz-nps-vVersion.tar.gz please download and place in the/nzscratch/upgrade directory
on the server.

see "fixcentral" in the Related information section
Product Group: Information Management
Select from Information Management: IBM Netezza Tools
Install Version: desired SWTools version(Typically match the NPS version)
Platform: all
Select the desired SWTools package and download the file called IBM_Netezza_Software_Support_Tools-vVersion.tar.gz

see "fixcentral" in the Related information section
Product Group: Information Management
Select from Information Management: IBM Netezza Tools
Install Version: latest HWTools version
Platform: all
Select the latest HWTools package and download the file called nz-hwsupport-tf-VVersion.tar.gz

What should I download if having a full upgrade performed?
The NPS packages listed above are needed, as well as the following HPF and FDT packages.
For HPF:
see "fixcentral" in the Related information section
Product Group: Information Management
Select from Information Management: IBM Netezza Platform
Install Version: desired HPF version
Platform: all
Select the desired HPF package and download the file called nz-hpf-vVersion.tar.gz.

For FDT:
see "fixcentral" in the Related information section
Product Group: Information Management
Select from Information Management: IBM Netezza Platform
Install Version: desired FDT version
Platform: all
Select the desired FDT package and download the file called nz-fdt-vVersion.tar.gz

What information about the system should I provide when opening the upgrade PMR?
Output to the following commands as nz user:
cat /nzlocal/scripts/version.txt
cat /nzlocal/scripts/MODEL
head -2 /opt/Netezza/FW/PSeries/version.txt
head -2 /opt/nz/fdt/version.txt
cat /etc/redhat-release
nzrev
nzstats

As root user:
dmidecode -t 1

Also please provide the address of the server to send the IBM on-site technician to be on-site for the duration of the upgrades, if needed.

Does my upgrade require an IBM technician to be on-site?
We require an IBM technician to be on-site for all FDT upgrades to versions FDT 3.0.5.4 and lower. The IBM on-site technician is there to perform the Host firmware updates on the physical system. Upgrades to FDT 4.1 and higher do not require an IBM SSR on-site as the hosts are able to be updated remotely.

When can I schedule upgrades?
We are available 24/7 for upgrade activity however there are a few restrictions for providing a tentative schedule:
For scheduling a full upgrade for a weekdays please provide at least 1 weeks notice. For scheduling on the weekends please contact your local Support to speak to them about lead times needed for upgrades. While we will do our best to meet customer requests we may, on occasion, need to look for other dates and times to carry out the requested upgrades. The more notice we can have the more likely we can accommodate your provided schedule.

Is a pre-upgrade check required?
Yes, we require a pre-upgrade check to be performed on the system 3-7 days prior to the scheduled upgrade date. The pre-upgrade checks are non-intrusive and can be run while the system is online. It is important that the pre-upgrade check is performed a maximum of 7 days prior to the upgrade to minimize the possibility of issues arising between pre-check and upgrade.

Do upgrades require root access?
Yes, all upgrades and pre-upgrade checks require root access to the system. Please have root passwords ready for scheduled pre-upgrade checks and upgrades.

How will the remote technician access my system?
We have two ways to access systems to perform upgrades. The first is Webex where we will send an invitation to the customer and they will share their desktop to connect to the system. Second method of access is if the customer has previously set up remote access we will be able to access those systems remotely to perform the upgrades.

Do I need to resolve hardware issues prior to upgrading?
Yes we require that all hardware issues be resolved before performing the upgrades, whether it is disk replacements, SPU repair, etc.

Can I schedule an upgrade with another activity such as Hardware replacement?
No, full upgrades typically take 5-8 hours to complete, scheduling any hardware activity for the same outage can cause delays in the upgrade and creates more risk that issues may arise during the upgrade activity.

What components of Firmware get updated in FDT?
The firmware components of FDT are as follows: Hosts, Remote Power Controllers, Spa Management Modules, Spa Gigabit switches, Spa SAS switches, Rack Management switches, Rack Fabric switches, Spa power supplies, Blades, HBA, Storage Enclosures, and Storage Media.

Where can I find what is new in each version of FDT?
You can extract the files from the nz-fdt-vVersion.tar.gz file to get the release notes and what fw levels were updated in this version of FDT.

What is sys_rev_check?
Sys_rev_check is a script that checks the current firmware levels of the system and compares them to the levels of firmware that the FDT expects. This tells us which components need to be updated during the FDT upgrades.

How often should I upgrade?
You should upgrade your system HPF and FDT once a year. NPS can also be updated to the latest at this time or customer can choose not to update NPS as well if satisfied with current version.

How long do upgrades take?
If the system meets the minimum requirements(HPF and FDT) for the desired NPS release then we can perform an NPS only upgrade which takes approximately 1 hour to complete. If it does not meet the minimum requirements for that release of NPS then we will have to perform a full upgrade(NPS, HPF, FDT) which takes roughly 8 -12 hours to complete. On average a 8 hours outage window is needed, yet for a system with 48 SPUs or higher, an outage window of at least 12 hours is required.

The rough time estimates on these are:
NPS: 1 hour
HPF: 1 hour
FDT: 6 -10 hours

Here is the breakdown of the approximate time for each component of FDT

AMM - 1-3 hrs
Blades - 2-6 hrs 
Storage Media - 30min - 1 hr.
Host Bios Firmware - 2 (1 hr for each host)- can take upto 3 hrs(1.5 hrs per host) sometimes
HBA - 15 min

Please note that the upgrade may vary depending on the system. There are several factors that influence this such as
- The current and the desired levels of NPS/FDT/HPF
- Was the system recently upgraded ?
- Size of the system- sometimes blade updates may take longer to complete on big systems
- No hardware or platform issues are encountered during the course of the upgrade. We do check the system for any issues prior to the upgrade but this does not guarantee that no issues will be encountered during the course of the upgrade.

The time frame provided above are approximates based on a typical upgrade. There is no guarantee that the upgrade will not take longer than anticipated. If any components fail or firmware upgrades do not take, the support engineer needs to perform active troubleshooting which includes restarts and this adds time to upgrade and hence the outage.

If currently using INZA(IBM Netezza Analytics), do I need to install a new version of INZA?
Please check the pre-requisites section of the IBM_Netezza_Analytics_Administrators_Guide.pdf to confirm that your current version of INZA is compatible with the desired version of NPS. If the INZA requires an upgrade as well please open a ticket with our Database Technical Support team to have a compatible version of INZA installed on your system.

RELATED INFORMATION
 fixcentral [http://www-933.ibm.com/support/fixcentral/]