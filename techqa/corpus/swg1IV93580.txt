Title: IBM IV93580: TNPMW ACTIVE_JOB TABLE NOT BEING CLEANED - United States

Text:
 SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS FIXED IF NEXT.
    
   
   

ERROR DESCRIPTION
 *  Customer reported  that ACTIVE_JOB table has 22232 rows, ideally
   these should have been purged.
   misc_clean job from schedule_admin is used to clean various
   tables and ACTIVE_JOB is one of them, logs are written to wmtm.
   This job purges rows which have cleanup time updated or are
   older than x no. of days.
   Also it requires that rg_tasklist and task_filename should not
   have these job id's present in it.
   On checking these 2 tables, rg_tasklist had older jobs (not
   cleaned) and task_file name was not having the jobs.
   Raising apar to fix the issue - need to clean rows from
   rg_tasklist , ACTIVE_JOB if job is older than x no. of days .
   Issue reported on 132 IF74 but also seen in other versions too.
   
   
    
   
   

LOCAL FIX
 *  Workaround :
   
   Update cleanup_time in active_job and RG_TASKLIST tables for
   jobs older than 14 days.
   misc_clean process will clean these jobs in its next run.
   
   
    
   
   

PROBLEM SUMMARY
 *  ERROR DESCRIPTION:
   
   
   
   misc_clean job not cleaning  ACTIVE_JOB table . It has 22232
   rows,which should have been purged.
   
   PROBLEM DESCRIPTION:
   
   misc_clean job from schedule_admin is used to clean various
   tables and ACTIVE_JOB is one of them, logs are written to wmt
   This job purges rows which have cleanup time updated or are
   older than x no. of days.
   
   PROBLEM SUMMARY:
   It requires that rg_tasklist and task_filename should no
   have these job id's present in it.
   
   On checking these 2 tables, rg_tasklist had older jobs (not
   cleaned) and task_file name was not having the jobs.
   Raising apar to fix the issue - need to clean rows from
   rg_tasklist , ACTIVE_JOB if job is older than x no. of days .
   
   
   RESOLUTION:
   need change in the delete query condition of misc_clean job .
   If job is older it should be purged
   
   
   Problem Conclusion:
   This is projected to be fixed in next IF . Note that this is
   subject to change at the discretion of IBM.
   
   
   
   LOCAL FIX:
   
   Workaround :
   
   
   Update cleanup_time in active_job and RG_TASKLIST tables for
   jobs older than 14 days.
   misc_clean process will clean these jobs in its next run.
   
   
    
   
   

PROBLEM CONCLUSION

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   IV93580
   
   
 * REPORTED COMPONENT NAME
   NETCOOL PM WIRE
   
   
 * REPORTED COMPONENT ID
   5724T0100
   
   
 * REPORTED RELEASE
   132
   
   
 * STATUS
   CLOSED FIN
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt / Xsystem
   
   
 * SUBMITTED DATE
   2017-02-21
   
   
 * CLOSED DATE
   2017-07-31
   
   
 * LAST MODIFIED DATE
   2017-07-31
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION

APPLICABLE COMPONENT LEVELS
 * R132 PSY
   UP