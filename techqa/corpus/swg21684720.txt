Title: IBM Manually regenerating product entries in DE database - United States

Text:
DEL2; regenerate entries; missing; DE ; DB; database TECHNOTE (FAQ)

QUESTION
 How can I regenerate product entries in DE database if they are missing? 

CAUSE
A user accidentally removed the Deployment Engine or lost product entries from DE repository, but the product is installed and it's working fine. 
In this case, if user has to upgrade the product or apply a maintenance pack, it will fail, because the product entries are missing in DE database.


ANSWER
The RegenerateEntriesInDE utility can be used to regenerate product entries in DE database, so that user can upgrade product or apply maintenance packs. 


RegenerateEntriesInDE 2.0.zip [/support/docview.wss?uid=swg21684720&aid=2]RegenerateEntriesInDE 2.0.zip [/support/docview.wss?uid=swg21684720&aid=1]

Important note: 

If more than one product or Fixpack are installed, this tool needs to be run on each _uninst directory separately, and more importantly, in the order the products and FPs were installed initially. 

In order to figure out the order when they were installed, copy all the _uninst directories into one temporary location and then run this command:

Example: 
[server@ibm uninst]# ls
netcool_webgui odbc tbsm tcr tipv2

find -name packagedIU.xml -printf '%T@ %p\n' | sort -n | cut -f2- -d" " > install_order.txt

The resulting file (install_order.txt) will list all packagedIU.xml files in order, based on time stamps. 

Example: 

./tbsm/_uninst/TBSMInstall61/plan/install/MachinePlan_localhost/00007_IAGLOBAL_COI_STEP_VMM/META-INF/packagedIU.xml
./tbsm/_uninst/TBSM_FP1/plan/install/MachinePlan_localhost/00001_ImpactCore-FP1/META-INF/packagedIU.xml
./tcr/_uninst/TIPInstall22/plan/checks/MachinePlan_localhost/00002_TCRInstall_PreCheck/META-INF/packagedIU.xml
./netcool_webgui/_uninst/OMNIbusWebGUIFP6/plan/checks/MachinePlan_localhost/00001_TIPInstall_PreCheck-FP5/META-INF/packagedIU.xml
./tipv2/_uninst/TIPInstall2203/plan/install/MachinePlan_localhost/00005_TIPCore-FP3/META-INF/packagedIU.xml



Then follow the steps, as outlined in the readme.txt, for each product _uninst directory in the order of install as figured out in the previous step. 

 

Running the Utility
-------------------

1.Extract the RegenerateEntriesInDE.zip to an empty directory

2.Pass the product install plan subfolder path as argument to utility which is located at product install location under _uninst directory .

<PRODUCT_INSTALL_PATH>\_uninst\<SUB_DIR>

For example :
/opt/IBM/tivoli/tipv2/_uninst/TIPInstall2203

4.Run RegenerateEntriesInDE.sh/.cmd script.This script will automatically identifies DE package steps and registers only those step product entries in DE.

#RegenerateEntriesInDE <PRODUCT_INSTALL_PATH>\_uninst\<SUB_DIR>

For example :
#RegenerateEntriesInDE /opt/IBM/tivoli/tipv2/_uninst/TIPInstall2203

Note : On Unix platforms, ensure that RegenerateEntriesInDE.sh script has execute permission

Output
---------
The utility outputs to the console on the progress of regenerating product entries in DE database.