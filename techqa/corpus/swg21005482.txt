Title: IBM Content Manager OnDemand Database Archive Log Files - United States

Text:
 TECHNOTE (FAQ)

QUESTION
 1. The IBM速 Content Manager OnDemand documentation states that an offline backup will result in the automatic cleanup of archived logs in the archive log directory. Does this mean that we do not need to worry about cleaning up the primary log directory (because they will be moved to the archive log directory)? We have tried doing both offline and online backups and it appears that the archive log directory content is still intact with nothing removed. Is this a typo in the manual about this?

2. Is there a difference between how the archive log directory and the primary log directory interact in Windows速 and AIX速? In an AIX installation we can see that the archive log directory is getting filled up with logs, but the Windows installation has nothing in the archive log directory at all.

3. I was told that once a system backup has been done, or a backup of the logs has been done, then the logs in the primary log directory can be deleted (so as to free up some space). Is this true? 

ANSWER
1. DB2 UDB does not remove a database log file, whether you back up offline or online. If you use the OnDemand ARSDB program to back up the database, it removes the archived log files from the archived log file directory. If you use Tivoli速 Storage Manager to maintain the DB2 log files, then the management class determines when the files are removed from Tivoli Storage Manager storage. OnDemand uses the exe file db2uext2 to move DB2 log files from the primary log to the archive log. The database configuration parameter logprimary sets the number of primary log files DB2 expects. The DB2 database manager will remove any log files that are in excess of this number, if the log files have been copied to the archive log. If the db2uext2.exe is running correctly, primary log files will be copied to the archive log as soon as they are no longer in active status. After the copy, the database manager takes over managing the primary log file.

2. There is no difference between how the archive log directory and the primary log directory interact in Windows and AIX. It is possible that your Windows installation is incorrect. Look for a logfile that contains error messages produced by the user exit. This file should be in the directory defined as arstmp and the name of the log file is db2uext2.err. Also check the OnDemand configurator under Archive Properties --> Database. If the "Use TSM for DB2 files" check box is selected, then the logs are on Tivoli Storage Manager. If the check box is not selected, open the Advanced Options and check the paths selected. There should be defined paths for both the Primary logs and the Archive logs. 

3. You must never delete primary log files on any account or your database will most certainly be corrupted. 




Cross reference information Segment Product Component Platform Version Edition Enterprise Content Management Content Manager OnDemand for Multiplatforms Database Multi-Platform 7.1, 7.1.1, 7.1.2.0, 7.1.2.1, 7.1.2.2 All Editions