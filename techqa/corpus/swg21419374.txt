Title: IBM MustGather: Collecting data when experiencing FTP or SFTP issues on IBM WebSphere DataPower SOA Appliances - United States

Text:
MustGatherDocument TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 Collect the following MustGather information to help IBM Support troubleshoot problems when experiencing issues with an FTP front side handler or back end (or SFTP if available on your version) on an IBM WebSphere DataPower SOA Appliance. 

SYMPTOM
Possible Symptoms: 

 * FTP server errors, such as "FTP Control Connection Closed" 
 * SFTP errors, such as "invalid key type" 
 * Failure to list, put or get files from FTP server as expected


RESOLVING THE PROBLEM
Section 1. Collecting information on the problem 
1.1. Describing the Problem: 

 * Specify the problem you are having with your FTP* front or back ends (or on an XA35, FTP Client Policy); point out any error messages you see in the system logs or from another resource. 
 * If the problem is reproducible, please include the steps you followed to reproduce the issue.


1.2. Collecting information to debug the problem:  * Please answer the following:  * Is the client and/or server behind a NAT (firewall or other device that does Network Address Translation)? If so, what are the details? 
    * Are you using Passive mode? 
    * Are you using FTP or FTPS? 
    * Does the FTP process succeed if not encrypted? 
    * Does your environment create a dynamic range of ports, or is there an allowed range?
   
   
 * Collect a configuration export and an error report (after setting the log level to debug and recreating the problem); steps to collect this information are provided on the technote "Collecting Data: WebSphere DataPower SOA Appliances problem determination" [http://www.ibm.com/support/docview.wss?rs=2362&uid=swg21235587]. 
 * Gather any additional information which may not be contained on the device but instead on a remote FTP server (Such as errors or behavior noted via an FTP client application). 
 * Provide sample request and response messages for the service(s) affected. 
 * Depending on the problem, you may be asked to provide packet captures of the traffic entering or exiting the DataPower device. 



Section 2. Preparing to contact IBM Support 
1. Obtain the serial number of the appliance which experienced the problem. This is needed for IBM 
entitlement processing, before a PMR can be created. Use the WebGUI, select Status > 
System > Version Information, locate tag on the case of the appliance, or from the CLI use 
"Show System" 
2. Locate the firmware version of the appliance. Use the WebGUI, select Status > System > 
Version Information or from the CLI use "Show Version" 
3. Have your IBM customer number ready. 
4. Determine a time for IBM remote support to call you to walk through these steps. 
5. Determine the severity of your problem based on the Severity Levels table found in the following 
technote: "WebSphere DataPower Extended Maintenance and Support Services". [http://www.ibm.com/support/docview.wss?rs=2362&uid=swg21254180#severity.] 
6. Prepare to describe how the problem affects your business operations. 
7. Determine which telephone number IBM should use to contact you concerning this problem report. 

Section 3. Contacting IBM Support and sending your MustGather information to IBM support 
1. Reference our technote for information on Contacting IBM WebSphere DataPower SOA Appliance Support [http://www.ibm.com/support/docview.wss?rs=2362&uid=swg21236322]. If this is a production system down, use the phone numbers in Contact IBM [http://www.ibm.com/contact/us/en/] under "Technical Support" to contact the support team. 
2. After you have contacted IBM Support, a PMR number will be assigned.  * Reply to the email, or attach to the PMR via the SR, tool the information in the preceding sections. 
 * Do not send any proprietary or confidential information from your company.


* References to FTP can also apply to SFTP in versions where it is available.