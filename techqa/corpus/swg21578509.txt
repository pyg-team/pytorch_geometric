Title: IBM Installing Portal 7.0 fixpack 2 fails with following exception "The component
wp.oob.content/packager must implement the target
action-pre-apply-PTF-applyPTF7002-wp.oob.content/packager" - United States

Text:
fixpack 2 install issue; fixpack 2 failed upgrade; pre-apply-ptf error TECHNOTE (TROUBLESHOOTING)

PROBLEM
When attempting to upgrade WebSphere Portal 7.0 GA with fixpack 2, the install fails with the following 

exception in configTrace.log:

pre-apply-PTF:
[echo] ,wp.base,wp.services.properties,wp.auth.cmd,wp.oob.content/packager,wp.m
ashup.cc.theme,wp.tagging.liveobject/semTagService
[null] !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! ERROR !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
[null] The extension pre-apply-PTF is registered for component wp.oob.content/packager but
the implementation does not exist.
[null] The component wp.oob.content/packager must implement the target
action-pre-apply-PTF-applyPTF7002-wp.oob.content/packager


CAUSE
Installing PM33177 fix before installing fixpack 2 will cause the upgrade to fail.


DIAGNOSING THE PROBLEM
Reviewing the configTrace.log we identified the root cause of the following task action-pre-apply-PTF-applyPTF7002-wp.oob.content/packager was missing from the wp.oob.content/packager component: 


"/opt/IBM/WebSphere/AppServer/profiles/wp_profile/ConfigEngine/config/inc
ludes/apply_PTF.xml:92: Component wp.oob.content/packager is missing
implementation target action-pre-apply-PTF-applyPTF7002-wp.oob.content/packager"

This error message notes that the action-pre-apply-PTF-applyPTF7002-wp.oob.content/packager task failed to run. The task is found in the following xml file:

...\IBM\WebSphere\PortalServer\installer\wp.oob.content\packager\config\includes\wp.blog.fp_cfg.xml

Reviewing the PortalServer/Version/log folder, and specifically the wp.oob.content component installation, the fixpack copies over it's wp.blog.fp_cfg.xml file with 8035 bytes yet the xml file found after the fixpack fails is 6001 bytes.

A file being copied after the fixpack lays down its files points to a fix that was applied to the server that was designed to resolve an issue with a target fixpack. It was found that the PM33177 fix was installed prior to the fixpack 2 install.

What is happening is that when fixpack 2 is installed it copying its wp.blog.fp_cfg.xml over the PM33177's wp.blog.fp_cfg.xml file located at opt\IBM\WebSphere\PortalServer\installer\wp.oob.content\packager\config\includes\.

During the pre-apply tasks, the Portal Update Installer checks the WebSphere/PortalServer/version folder and if the Wpuf folder exists, then the contents are copied over the existing wp.blog.fp_cfg.xml file found at opt\IBM\WebSphere\PortalServer\installer\wp.oob.content\packager\config\includes\

The upgrade now fails with the above exception as the xml file is now the out of date PM33177's xml file.



RESOLVING THE PROBLEM
If you are unable to remove PM33177 before attempting the fixpack 2 upgrade, the solution is to:

1. Remove the WPuf folder from the WebSphere/PortalServer/version folder 

2. Remove the current wp.blog.fp_cfg.xml file found at <WebSphere root>\PortalServer\installer\wp.oob.content\packager\config\includes\ and copy the attached xml file to that location (or use the xml from a working Portal 7.0.0.2 system).
3. Attempt the fixpack 2 upgrade again.

wp.blog.fp_cfg.xml [/support/docview.wss?uid=swg21578509&aid=2]wp.blog.fp_cfg.xml [/support/docview.wss?uid=swg21578509&aid=1]