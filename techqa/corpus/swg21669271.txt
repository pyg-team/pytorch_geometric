Title: IBM XML Probe : Example WebSphere CLASSPATH setting - United States

Text:
nco_p_xml; xml; websphere; WebSphere; Caused by; Unable to get events TECHNOTE (FAQ)

QUESTION
 XML Probe : What jar files are required for WebSphere? 

CAUSE
The required list of JAR files should be obtained from the WebSphere administrator.

ANSWER
 

The WebSphere administrator should be able to provide a list of JAR files for use with the XML probe with the specific version of WebSphere being connected to. 

 

The recommended solution is to install the jar files in the probe specific directory that can be used to hold the probes configuration files, and set then set CLASSPATH in the probes environment script. 

For example: 

Create a probe specific directory in the probes/java directory, and copy all the jar files there. 

mkdir ${OMNIHOME}/probes/java/nco_p_xml 

Then update the XML probes environment file, adding the jars to the CLASSPATH in the correct sequence. 

cd ${OMNIHOME}/probes/java 

vi nco_p_xml.env
CLASSPATH=${OMNIHOME}/probes/java/${PROGRAM}:$CLASSPATH 
CLASSPATH=$CLASSPATH:${OMNIHOME}/probes/java/${PROGRAM}/providerutil.jar
CLASSPATH=$CLASSPATH:${OMNIHOME}/probes/java/${PROGRAM}/fscontext.jar 
CLASSPATH=$CLASSPATH:${OMNIHOME}/probes/java/${PROGRAM}/dhbcore.jar
CLASSPATH=$CLASSPATH:${OMNIHOME}/probes/java/${PROGRAM}/jms.jar 
CLASSPATH=$CLASSPATH:${OMNIHOME}/probes/java/${PROGRAM}/com.ibm.mq.jar 
CLASSPATH=$CLASSPATH:${OMNIHOME}/probes/java/${PROGRAM}/com.ibm.mqjms.jar 
CLASSPATH=$CLASSPATH:${OMNIHOME}/probes/java/${PROGRAM}/com.ibm.mq.jmqi.jar 
#
# Show CLASSPATH for debug purposes
#
echo "CLASSPATH=$CLASSPATH"
#EOF


When the CLASSPATH is configured correctly, and the JNDI lookup succeeds you will see:
Creating initial context class using '<Factory>' and '<providerURL>'
Looking up '<FactoryName>' in JNDI 

Otherwise the probe will fail beforehand, due to CLASSPATH problems or JNDI lookup. 

 

Types of messages seen when there is a CLASSPATH issue are:
Caused by: Cannot instantiate class
Caused by: javax.naming.Reference
Caused by: null

RELATED INFORMATION
 Support's Guide to the Message Bus Integration [http://www-01.ibm.com/support/docview.wss?uid=swg21622274]