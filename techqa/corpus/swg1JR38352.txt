Title: IBM JR38352: FAILED TO RESUBMIT THE FAILED EVENT WITH EVENT SEQUENCE ENABLED - United States

Text:
  A FIX IS AVAILABLE
WebSphere Enterprise Service Bus V7.0.0 Fix Pack 4 (7.0.0.4) [http://www-01.ibm.com/support/docview.wss?uid=swg24030312]


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  This exception might be thrown when you try to resubmit a failed
   event on application with Event Sequencing enabled.
   [18/11/10 19:19:32:109 CET] 0000006d ExceptionUtil E
   CNTR0020E: EJB threw an unexpected (non-declared) exception
   during invocation of method "processMessage" on bean "BeanId
   (persistentLkMgr#persistentLkMgrEJB.jar#EsResubmission, null)".
   Exception data:
   com.ibm.wbiserver.sequencing.exceptions.EventSequencingResubmiss
   ionException:
   com.ibm.wbiserver.sequencing.exceptions.EventSequencingResubmiss
   ionException: java.lang.ClassCastException:
   org.eclipse.emf.ecore.xml.type.impl.AnyTypeImpl incompatible
   with commonj.sdo.DataObject
    at com.ibm.wbiserver.sequencing.resubmit.EsResubmissionBean.
   processMessage(EsResubmissionBean.java:82)
    at com.ibm.wbiserver.sequencing.resubmit.
   EJSLocalStatelessEsResubmission_aeff543a.processMessage(Unknown
   Source)
    at
   com.ibm.wbiserver.sequencing.util.SPIUtil.resubmitMessageEsCallB
   ack
   (SPIUtil.java:130)
    at com.ibm.wbiserver.manualrecovery.ext.ESExtensionImpl.
   resubmitMessageEsCallBack(ESExtensionImpl.java:63)
    at
   com.ibm.wbiserver.manualrecovery.ejb.FailedEventManagerEJBBean.
   resubmitSCA(FailedEventManagerEJBBean.java:1818)
    at
   com.ibm.wbiserver.manualrecovery.ejb.FailedEventManagerEJBBean.
   resubmit(FailedEventManagerEJBBean.java:1587)
    at
   com.ibm.wbiserver.manualrecovery.ejb.FailedEventManagerEJBBean.
   resubmit(FailedEventManagerEJBBean.java:1570)
    at com.ibm.wbiserver.manualrecovery.ejb.
   EJSRemoteStatelessFailedEventManagerEJB_1411c110.resubmit(Unknow
   n
   Source)
   ....
   
   
    
   
   

LOCAL FIX
 *  N/A
   
   
    
   
   

PROBLEM SUMMARY
 *  ****************************************************************
   * USERS AFFECTED:  WebSphere Process Server users who need to  *
   *                  resubmit failed events for an application   *
   *                  with event sequencing qualifier.            *
   ****************************************************************
   * PROBLEM DESCRIPTION: A ClassCastException is thrown when a   *
   *                      failed event for an application         *
   *                      with event sequencing qualifier is      *
   *                      resubmitted.                            *
   ****************************************************************
   * RECOMMENDATION:                                              *
   ****************************************************************
   The event sequencing resubmission processing logic did not set
   appropriate classloader before setting the sequencing context
   on the resubmitted message. This results in ClassCastException
   later in the processing.
   
   ExceptionUtil E
   CNTR0020E: EJB threw an unexpected (non-declared) exception
   during invocation of method "processMessage" on bean "BeanId
   (persistentLkMgr#persistentLkMgrEJB.jar#EsResubmission, null)".
   Exception data:
   com.ibm.wbiserver.sequencing.exceptions.EventSequencingResubmiss
   ionException:
   com.ibm.wbiserver.sequencing.exceptions.EventSequencingResubmiss
   ionException: java.lang.ClassCastException:
   org.eclipse.emf.ecore.xml.type.impl.AnyTypeImpl incompatible
   with commonj.sdo.DataObject
   at com.ibm.wbiserver.sequencing.resubmit.EsResubmissionBean.
   processMessage(EsResubmissionBean.java:82)
   at com.ibm.wbiserver.sequencing.resubmit.
   EJSLocalStatelessEsResubmission_aeff543a.processMessage(Unknown
   Source)
   at
   com.ibm.wbiserver.sequencing.util.SPIUtil.resubmitMessageEsCallB
   ack
   (SPIUtil.java:130)
   at com.ibm.wbiserver.manualrecovery.ext.ESExtensionImpl.
   resubmitMessageEsCallBack(ESExtensionImpl.java:63)
   at
   com.ibm.wbiserver.manualrecovery.ejb.FailedEventManagerEJBBean.
   resubmitSCA(FailedEventManagerEJBBean.java:1818)
   at
   com.ibm.wbiserver.manualrecovery.ejb.FailedEventManagerEJBBean.
   resubmit(FailedEventManagerEJBBean.java:1587)
   at
   com.ibm.wbiserver.manualrecovery.ejb.FailedEventManagerEJBBean.
   resubmit(FailedEventManagerEJBBean.java:1570)
   at com.ibm.wbiserver.manualrecovery.ejb.
   EJSRemoteStatelessFailedEventManagerEJB_1411c110.resubmit(Unknow
   n
   Source)
   
   
    
   
   

PROBLEM CONCLUSION
 *  The resubmission logic in event sequencing is fixed to set
   appropriate application classloader before setting the
   sequencing context.
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   JR38352
   
   
 * REPORTED COMPONENT NAME
   WEB PROC SERVER
   
   
 * REPORTED COMPONENT ID
   5724L0100
   
   
 * REPORTED RELEASE
   620
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2010-11-29
   
   
 * CLOSED DATE
   2011-02-22
   
   
 * LAST MODIFIED DATE
   2011-02-28
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   WEB PROC SERVER
   
   
 * FIXED COMPONENT ID
   5724L0100
   
   

APPLICABLE COMPONENT LEVELS
 * R620 PSY
   UP
   
   
 * R700 PSY
   UP