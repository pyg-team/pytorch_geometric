Title: IBM DataPower Insufficient Filesystem Space in internal space or image: or temporary: directories - United States

Text:
 TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 If you receive insufficient flash space on DataPower with a XI52 Virtual Edition and 'show filesystem' reports temporary space is 384MB or internal space is below 1024MB total please review further. 

SYMPTOM
'show filesystem' reports 384MB in temporary and/or less than 1024MB in internal space. In 7.0 and prior of virtual, the default is 384MB. 7.1 allocates 512MB by default. 

Example of virtual with 384MB in temporary
xi52(config)# show filesystem

Free Encrypted Space: 13646 Mbytes
Total Encrypted Space: 14896 Mbytes
Free Temporary Space: 351 Mbytes
Total Temporary Space: 384 Mbytes
Free Internal Space: 1014 Mbytes
Total Internal Space: 1024 Mbytes


RESOLVING THE PROBLEM
Customer can expand their temporary space up to 512MB and internal space up to 1024MB with a special scrypt4 image (reltool_ramdisk_virtual_xi.scrypt4). This installs like a normal firmware image. 




xi52(config-flash)# boot image accept-license upgrade.scrypt4
Invoking dynamic loader
This scrypt will not perform an appliance firmware upgrade

ramdisk resizer utility
Hardware: VMware Virtual Platform
Firmware: XI50.6.0.1.3pu2
Serial: 0000000
Software major version: 6.0.1
Running on Virtual hardware
Target size for ramdisk1 (temporary/image): 512Mb
Target size for ramdisk2 (internal temporary): 1Gb ... 
<<<Ramdisk tool exiting>>> 

Tool completed successfully. 

After you can issue a 'show filesystem' 


xi52(config-flash)# show filesystem 

Free Encrypted Space: 13646 Mbytes 
Total Encrypted Space: 14896 Mbytes 
Free Temporary Space: 477 Mbytes 
Total Temporary Space: 512 Mbytes 
Free Internal Space: 1014 Mbytes 
Total Internal Space: 1024 Mbytes