Title: IBM Relay log rotates automatically even without setting '_BESRelay_HTTPServer_LogFileSizeLimit'. - United States

Text:
_BESRelay_HTTPServer_LogFileSizeLimit ; Relay log; rotate; client configuration; BESRelay.log; logfile.txt; log size TECHNOTE (FAQ)

QUESTION
 How to enable rotating capability for Relay Log? 

ANSWER
Relay log rotates automatically from IEM Version 9.0, even the configuration '_BESRelay_HTTPServer_LogFileSizeLimit' is not added via Registry or IEM manually. 
By default this configuration is not set, but the log will rotate automatically when its size reaches 50M. If you want to enable rotating capability with the maximum log as 50M (default value: 50*1024*1024 bytes), nothing need to be done. 

However, if you want to specify the value, please add this configuration manually with the expected value. For example, if you want the BESRelay.log to rotate across 10 files, each one being at most 100 KB, you must set "value" to "100000". The maximum number of rotating files is 10 and is not configurable. For detailed steps, please refer to http://www-01.ibm.com/support/docview.wss?uid=swg21506050 [http://www-01.ibm.com/support/docview.wss?uid=swg21506050] . 



 *  Relay log contains information on the activities of the BES Root Server service component of the server, along with debugging information for top level exceptions on any of the debugging threads. It is default enabled in non-verbose mode, named "BESRelay.log" on root server ("C:\program files\BigFix Enterprise\BES Server\BESRelay.log", "/var/log/BESRelay.log") and "logfile.txt" on Relays ("C:\program files\BigFix Enterprise\BES Relay\logfile.txt"). 

 *  _BESRelay_HTTPServer_LogFileSizeLimit is used to control the maximum size in bytes, of Relay log file. A maximum of 10 rotated copies of the log file are maintained in addition to the active log file. (for example, the active log file, logfile.txt and rotated copies, logfile.txt_0, logfile.txt_1, ..., logfile.txt_9). The active log file is filled in with logged data until it reaches the specified maximum size. Its content then overwrites the content of the oldest logfile.txt_n file. The active log file, logfile.txt is then emptied ready to continue to collect new logged data. You can refer to below picture. 



If you change the setting in IEM Console, Edit Computer Settings window, after clicking OK, an action named as 'Change _BESRelay_HTTPServer_LogFileSizeLimit Setting' is taken targeted at the IEM Server or relay machine. 

Set _BESRelay_HTTPServer_LogFileSizeLimit manually:  * Windows:
   "value" (of REG_SZ type) under HKEY_LOCAL_MACHINE\...\BigFix\EnterpriseClient\Settings\Client\_BESRelay_HTTPServer_LogFileSizeLimit 
 * Linux:
   "value" (of REG_SZ type) in the BESServer.config file
   

Note: 
To enable the new value, please restart the BES Root Server service if on the IEM server or restart the BES Relay service if on the relay. Only restarting BES Client service doesn't work. 
 * In below picture, the value of _BESRelay_HTTPServer_LogFileSizeLimit is 10K on Relay, then it begins to rotate. (Before setting, the active log file size had reached 48k)


[/support/docview.wss?uid=swg21693221&aid=1] [/support/docview.wss?uid=swg21693221&aid=1] 
 * In below picture, the value is 210K. After the size of active BESRelay.log reached 208K and BESRelay.log_9 has been generated, its content overwrites the content of BESRelay.log_0. In picture, BESRelay.log_0, BESRelay.log_1, ..., BESRelay.log_6 have been overwritten. 


[/support/docview.wss?uid=swg21693221&aid=2] [/support/docview.wss?uid=swg21693221&aid=2] 

[/support/docview.wss?uid=swg21693221&aid=3] [/support/docview.wss?uid=swg21693221&aid=3] RELATED INFORMATION
#How do I set TEM Client configuration settings? [http://www-01.ibm.com/support/docview.wss?uid=swg21506050]
Configuration Settings [https://www.ibm.com/developerworks/community/wikis/home?lang=en#!/wiki/Tivoli+Endpoint+Manager/page/Configuration+Settings]
Log Files [https://www.ibm.com/developerworks/community/wikis/home?lang=en#!/wiki/Tivoli%20Endpoint%20Manager/page/Log%20Files]