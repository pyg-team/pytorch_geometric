Title: IBM PI50384: PROBE IDS XC076010 AND C0398008 ARE PRODUCED FOR CLIENTS ATTACHED TO Z/OS QMGR DURING SHUTDOWN. - United States

Text:
z/os  A FIX IS AVAILABLE
Obtain the fix for this APAR.


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  The customer has started rolling out MQ Client 8.0.0.2 to their
   Unix servers. The Clients connect to a WebSphere MQ for z/OS V8
   QMGR. On the weekend when they take the Mainframe down for
   maintenance, the Clients generate FDCs as though they are
   having issues with recognizing the Remote QMGR shutting
   down. The following to probe IDs in the 2 FDCs for a particular
   server that always generate FDCs.
   .
   Probe Id          :- XC076010
   Application Name  :- MQM
   Component         :- xcsGetMessage
   .
   Probe Id          :- CO398008
   Application Name  :- MQM
   Component         :- cciFindConv
   .
   The change team has taken a look at the dump from the z/OS CHIN
   and can see the cause of the FDC issues by cciFindConv on the
   client side. When the CHIN receives the rfpSAT_END_CONV response
   from the client it issues an MQCTL which fails with 2202,
   MQRC_CONNECTION_QUIESCING, and rstSendNotification is again
   invoked and sends the rfpNC_STREAMING_FAILURE noification once
   again.
   
   
    
   
   

LOCAL FIX

PROBLEM SUMMARY
 *  ****************************************************************
   * USERS AFFECTED: All users of WebSphere MQ Version 8          *
   *                 Release 0 Modification 0.                    *
   ****************************************************************
   * PROBLEM DESCRIPTION: A Client application connected to a V8  *
   *                      z/OS queue manager using SVRCONN        *
   *                      channels configured with SHARECNV>0,    *
   *                      can generate FDC files in the client    *
   *                      side when the CHIN is shutdown while    *
   *                      the application is running.             *
   *                                                              *
   *                      FDC reports error rrcE_PROTOCOL_ERROR,  *
   *                      probe Id CO398008 and error message     *
   *                      AMQ9504.                                *
   ****************************************************************
   * RECOMMENDATION:                                              *
   ****************************************************************
   When the CHIN is shutdown while the client application is
   executing MQ API calls. These API calls fail with MQRC 2202
   (MQRC_CONNECTION_QUIESCING) or MQRC 2009
   (MQRC_CONNECTION_BROKEN). The CHIN should notify the client of
   these failures but if the failure occurs after the channel
   conversation has ended the CHIN still sends these (unexpected)
   notifications causing the protocol error reported by the FDC
   files.
   
   
    
   
   

PROBLEM CONCLUSION
 *  The CHIN has been changed to avoid sending notifications
   to a client after the channel conversations have been
   ended.
   000Y
   CMQXRSTF
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   PI50384
   
   
 * REPORTED COMPONENT NAME
   WMQ Z/OS 8
   
   
 * REPORTED COMPONENT ID
   5655W9700
   
   
 * REPORTED RELEASE
   000
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt / Xsystem
   
   
 * SUBMITTED DATE
   2015-10-12
   
   
 * CLOSED DATE
   2016-01-20
   
   
 * LAST MODIFIED DATE
   2016-03-02
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
    UI34590
   
   

MODULES/MACROS
 *  CMQXRSTF
   
   
    
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   WMQ Z/OS 8
   
   
 * FIXED COMPONENT ID
   5655W9700
   
   

APPLICABLE COMPONENT LEVELS
 * R000 PSY UI34590 [HTTPS://WWW14.SOFTWARE.IBM.COM/WEBAPP/SET2/ORDERMEDIA/SHOPCART?PTFS=UI34590]
   UP16/02/03 P F602
   
   

FIX IS AVAILABLE
 * SELECT THE PTF APPROPRIATE FOR YOUR COMPONENT LEVEL. YOU WILL BE REQUIRED TO SIGN IN. DISTRIBUTION ON PHYSICAL MEDIA IS NOT AVAILABLE IN ALL COUNTRIES.