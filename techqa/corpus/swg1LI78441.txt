Title: IBM LI78441: Setting CATENTRY long description with a large text value in some languages fails - United States

Text:
  FIXES ARE AVAILABLE
JR53438 - Mandatory cumulative Interim Fix for WebSphere Commerce Version 7 Fix Pack 9 [http://www-01.ibm.com/support/docview.wss?uid=swg24040267]
JR55049 - Mandatory cumulative Interim Fix #3 for WebSphere Commerce Version 7 Fix Pack 9 [http://www-01.ibm.com/support/docview.wss?uid=swg24041706]
JR57861 - Mandatory cumulative Interim Fix 5 for WebSphere Commerce Version 7 Fix Pack 9 [http://www-01.ibm.com/support/docview.wss?uid=swg24043761]


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  When trying to set the CATENTRY long description in a language
   such as Russian, an error similar to the following might appear
   if the description is longer than the field size.
   
   Caused by: com.ibm.db2.jcc.am.SqlDataException: DB2 SQL Error:
   SQLCODE=-302, SQLSTATE=22001, SQLERRMC=null, DRIVER=4.14.103
      at com.ibm.db2.jcc.am.ed.a(ed.java:669)
   
   
    
   
   

LOCAL FIX

PROBLEM SUMMARY
 *  USERS AFFECTED:
   Users who wants to update long description longer than 4000
   characters in some languages such as Russian.
   
   PROBLEM ABSTRACT:
   Setting CATENTRY long description with a large text value in
   some languages fails.
   
   BUSINESS IMPACT:
   Management Center cannot be used to add long description longer
   than 4000 characters due to truncation errors.
   
   RECOMMENDATION:
   
   
    
   
   

PROBLEM CONCLUSION
 *  The long description needs to be truncated when the length
   exceeds the maximum field size (currently 4000 bytes).  The
   calculation of the length of the field when encoded in UTF16 was
    not being done correctly.  This iFix changes the length
   calculation method to ensure correct truncation happens,
   preventing the exception from the database.
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   LI78441
   
   
 * REPORTED COMPONENT NAME
   WC BUS ED ILINU
   
   
 * REPORTED COMPONENT ID
   5724I3804
   
   
 * REPORTED RELEASE
   600
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2015-02-19
   
   
 * CLOSED DATE
   2015-05-15
   
   
 * LAST MODIFIED DATE
   2015-05-25
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   WC BUS ED ILINU
   
   
 * FIXED COMPONENT ID
   5724I3804
   
   

APPLICABLE COMPONENT LEVELS
 * R600 PSY
   UP