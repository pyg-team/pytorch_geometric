Title: IBM PI31606: /STA WADS FAILED WITH MSG DFS3273I REASON CODE 0C - United States

Text:
z/os  A FIX IS AVAILABLE
Obtain the fix for this APAR.


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  After WADS I/O error, /STA WADS failed with MSGDFS3237I and /DIS
   OLDS showed 'DUAL WADS LOGGING. WADS IN PROCESS OF SWITCHING'.
   This problem happened when the new secondary WADS got I/O error
   during WADSOPEN processing. Then new primary WASD was closed
   but was not deallocated.
   < Scenario >
     WADS 0 and 2 reside on LWADA1(addr=622C)
     WADS 1 and 3 reside on LWADA2(addr=6110)
   ..
   /DIS OLDS.
         DUAL OLDS LOGGING, DUAL WADS LOGGING
         AUTOMATIC ARCHIVE = 01
         WADS = *DFSWADS0 *DFSWADS2 DFSWADS1 DFSWADS3
   ...
   V 622C,OFFLINE,FORCE
   327 IEE800D CONFIRM VARY FORCE FOR 622C - REPLY NO OR YES
   R 327,YES
   ...
   DFS0414I PERMANENT I/O ERROR ON DFSWADS0 - DURING LOG WRITE 41
   DFS0414I PERMANENT I/O ERROR ON DFSWADS2 - DURING LOG WRITE 41
   DFS3261I WRITE AHEAD DATA SET NOW ON DFSWADS1 IMP1
   DFS3261I WRITE AHEAD DATA SET NOW ON DFSWADS3 IMP1
   DFS0414I PERMANENT I/O ERROR ON DFSWADS3 - DURING LOG WRITE
   DFS2500I DATASET  DFSWADS0 SUCCESSFULLY DEALLOCATED IMP1
   DFS3262I NO DATA SET AVAILABLE FOR LOG WRITE AHEAD IMP1
   DFS3257I WADS DEALLOCATED ON DFSWADS0 IMP1
   DFS2500I DATASET  DFSWADS2 SUCCESSFULLY DEALLOCATED IMP1
   DFS3257I WADS DEALLOCATED ON DFSWADS2 IMP1
   DFS2500I DATASET  DFSWADS3 SUCCESSFULLY DEALLOCATED IMP1
   DFS3257I WADS DEALLOCATED ON DFSWADS3 IMP1
      ( DFSWADS1 was not deallocated )
   ...
   @DIS OLDS.
          DUAL OLDS LOGGING, NO WADS LOGGING
          AUTOMATIC ARCHIVE = 01
          SLDSREAD ON
          CURRENT BSN = 00009832, LSN = 00000000_0011F379
         *14331/144545*
   .....
   V 622C,ONLINE,UNCOND
   IEE302I 622C     ONLINE
   @STA WADS 0.
   DFS2500I DATASET  DFSWADS0 SUCCESSFULLY ALLOCATED   IMP1
   DFS058I 14:52:21 START COMMAND COMPLETED IMP1
   @DIS OLDS.
         DUAL OLDS LOGGING, DUAL WADS LOGGING
         AUTOMATIC ARCHIVE = 01
         WADS IN PROCESS OF SWITCHING
         SLDSREAD ON
         CURRENT BSN = 0000DD72, LSN = 00000000_001ADB30
        *14331/145224*
   @STA WADS 1.
   DFS3273I 14:52:38 UNABLE TO PROCESS STA COMMAND FOR DFSWADS1,
   REASON CODE 0C IMP1
   ...
   @STA WADS 2.
   DFS2500I DATASET  DFSWADS2 SUCCESSFULLY ALLOCATED   IMP1
   DFS058I 14:53:35 START COMMAND COMPLETED IMP1
   ....
   @DIS OLDS.
         DUAL OLDS LOGGING, DUAL WADS LOGGING
         AUTOMATIC ARCHIVE = 01
         WADS IN PROCESS OF SWITCHING
         SLDSREAD ON
         CURRENT BSN = 0000E96F, LSN = 00000000_001C8A18
        *14331/145340*
   
   
    
   
   

LOCAL FIX

PROBLEM SUMMARY
 *  ****************************************************************
   * USERS AFFECTED: All IMS V13 users                            *
   ****************************************************************
   * PROBLEM DESCRIPTION: /START WADS command fails because WADS  *
   *                      already allocated but /DISPLAY OLDS     *
   *                      shows no WADS                           *
   ****************************************************************
   * RECOMMENDATION: INSTALL CORRECTIVE SERVICE FOR APAR/PTF      *
   ****************************************************************
   IMS is running in dual WADS mode with 4 WADS.  It gets I/O
   errors on both active WADS and then gets an error on one
   of the remaining WADS while trying to initialize it.  This
   leaves IMS with one functioning WADS that cannot be used until
   a second WADS is started.  A /DISPLAY OLDS command at this
   point shows NO WADS LOGGING.  Then a second WADS is started.
   A /DISPLAY OLDS command shows WADS IN PROCESS OF SWITCHING and
   makes no mention of the allocated WADS.
   
   When IMS is running dual WADS mode and only one WADS remains,
   WADS usage is deactivated.  A subsequent /START WADS resets
   flag LFPWADS but does not initialize the WADS.  Eventually,
   the WADS will be needed and WADS write will initialize the
   latest WADS before starting I/O.
   
   Between the /START WADS command and the first WADS I/O, a
   /DISPLAY WADS command will show DUAL WADS LOGGING because
   LFPWADS is on but will show WADS IN PROCESS OF SWITCHING instead
   of listing the allocated WADS because is does not find a
   secondary WADS ID.  The secondary WADS ID is not set until the
   WADS is initialized.
   
   
    
   
   

PROBLEM CONCLUSION
 *  GEN:
   KEYWORDS:
   
   *** END IMS KEYWORDS ***
   DFSFDLS0 has been changed to initialize WADS whenever a /START
   WADS command causes LFPWADS to be turned on.  This will
   eliminate the window in which WADS IN PROCESS OF SWITCHING
   is issued.  DFSIDPH0 has been changed to list any allocated WADS
   regardless of whether WADS are currently active.
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   PI31606
   
   
 * REPORTED COMPONENT NAME
   IMS V13
   
   
 * REPORTED COMPONENT ID
   5635A0400
   
   
 * REPORTED RELEASE
   300
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt / Xsystem
   
   
 * SUBMITTED DATE
   2014-12-16
   
   
 * CLOSED DATE
   2015-04-17
   
   
 * LAST MODIFIED DATE
   2015-05-04
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
    UI26841
   
   

MODULES/MACROS
 *  DFSFDLS0 DFSIDPH0
   
   
    
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   IMS V13
   
   
 * FIXED COMPONENT ID
   5635A0400
   
   

APPLICABLE COMPONENT LEVELS
 * R300 PSY UI26841 [HTTPS://WWW14.SOFTWARE.IBM.COM/WEBAPP/SET2/ORDERMEDIA/SHOPCART?PTFS=UI26841]
   UP15/04/25 P F504
   
   

FIX IS AVAILABLE
 * SELECT THE PTF APPROPRIATE FOR YOUR COMPONENT LEVEL. YOU WILL BE REQUIRED TO SIGN IN. DISTRIBUTION ON PHYSICAL MEDIA IS NOT AVAILABLE IN ALL COUNTRIES.