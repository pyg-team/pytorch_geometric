Title: IBM PK88381: MAXIMUM CONNECTIONS EXCEEDED - CAUSING DB CRASH - United States

Text:
 SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  Slow Performance in metric studio with Oracle 10g due to certain
   permission settings. The issue is related to Oracle 10G and
   metric studio not releasing the inactive connection or reusing
   them. with more then 200 user logged in this number keeps in
   increasing and at some point it will crash teh Oracle database
   server.
   
   We have replicated the issue in-house and it is related to the
   security settings Eaton is trying to implement.
   
   
    
   
   

LOCAL FIX

PROBLEM SUMMARY
 *  ****************************************************************
   * USERS AFFECTED:                                              *
   * All users with Oracle DB and c8 version < 8.4 RP1            *
   ****************************************************************
   * PROBLEM DESCRIPTION:                                         *
   * Metric Studio performance is slow for multiple users when a  *
   * complex security model is used.  (Many security permissions  *
   * are applied on a per metric basis.) The issue is only        *
   * occurring for non root class users.                          *
   ****************************************************************
   * RECOMMENDATION:                                              *
   * Upgrade to Cognos Metric Studio version 8.4 RP1.             *
   ****************************************************************
   May need to set some Metric Studio database tuning configuration
   parameters (specifically, initialConnections = 0):
   
   All connection pool settings are modified using the Service
   Advanced Settings in the Cognos Administration portal. It is
   required that the Metrics Manager Service be restarted for new
   settings to be applied.  The Cognos Administration portal can be
   used to restart the Metrics Manager Service.
   
   initialConnections   The number of connections that Metric
   Studio will open when a database is first accessed. These
   connections will never be closed, remaining available to service
   the typical user load. This setting can be set to zero if it is
   required that all connections be closed when not used. Default =
   5
   
   incrementConnections   The number of connections Metric Studio
   will open when more connections are required to handle the
   current user load. Connections are closed using this same block
   size. Connections in a block will not be closed until all
   connections in the block are old. Default = 5
   
   maximumConnections   The maximum number of connections that the
   Metrics Manager service will open. The user will receive an
   error if the maximumConnections has been reached and all the
   allocated connections are being used to process other requests.
   Default = 200
   
   connectionIdleTimeout   The time in seconds that a connection
   must be unused before it will be closed. Default = 3600 (1 hour)
   
   connectionMaintenanceInterval   The time in seconds that the
   Metric Manager service will wait before checking if there are
   any unused connections that need to be closed. Default = 3600 (1
   hour)
   
   
    
   
   

PROBLEM CONCLUSION
 *  Code fix
   
   
    
   
   

TEMPORARY FIX
 *  Simplify security model - for example, apply security
   permissions at scorecard level rather than on individual metrics
   
   
    
   
   

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   PK88381
   
   
 * REPORTED COMPONENT NAME
   COG8 BI METRIC
   
   
 * REPORTED COMPONENT ID
   5724W12MS
   
   
 * REPORTED RELEASE
   830
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2009-06-09
   
   
 * CLOSED DATE
   2010-03-29
   
   
 * LAST MODIFIED DATE
   2010-03-29
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   COG8 BI METRIC
   
   
 * FIXED COMPONENT ID
   5724W12MS
   
   

APPLICABLE COMPONENT LEVELS
 * R841 PSN
   UP