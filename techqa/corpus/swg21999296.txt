Title: IBM Troubleshooting errors received when running reports in Birt designer - United States

Text:
TPAEREP; Birt designer; Eclipse; Debug TECHNOTE (FAQ)

QUESTION
 How do you troubleshoot errors that appear when trying to test reports in the Birt designer (Eclipse)? 

CAUSE
The errors Eclipse throws can be difficult to read in the Eclipse environment. One method to assist in your troubleshooting exercise is to enable the DEBUG feature that is built into all out-of-the-box (OOB) reports and templates.

ANSWER
A few steps are required in order to enable DEBUG logging within the designer

Lines similar to the following will exist in all OOB reports. 

mxReportScriptContext = MXReportScriptContext.initialize(reportContext); 

//mxReportScriptContext.setDefaultLogLevel("DEBUG");
//mxReportScriptContext.setDefaultLogFile("C:/temp/wotrack.log");

If you do not see the two "SetDefaulLog..." lines you can simply add them to your report after the "initialize" method.
If the lines are proceeded with two slashes - "//" - they are commented out. To enable, just remove the "//".
Set the file path and name for the output file to whatever you like. I prefer something simple like "C:\Temp\{reportname}.log" where {reportname} will be the name of your report (wotrack in this example).

To get to this method either press the [Script] tab as soon as you open your design, or go back to the layout tab, then hit the [Script] tab. This should take you to the Initialize method of the design.

Now, when you preview your report in the Eclipse designer you will still see the errors on screen, but you will also have some details added to the log file. In many cases these are SQL issues - class not found, unable to log in or an actual sql error. You will even see the sql statement that the report was trying to execute if it got that far. You can take this and paste into your sql developer to help find the cause of your error.

Here's what you see in the designer:

[/support/docview.wss?uid=swg21999296&aid=1] [/support/docview.wss?uid=swg21999296&aid=1]


It's not easy to know from that what the actual issue is but if you open your log file:

Feb 22 16:31:55 EST 2017 ERROR DataSet [dataSet] [jcc][t4][2013][11249][4.11.69] Connection authorization failure occurred. Reason: User ID or Password invalid. ERRORCODE=-4214, SQLSTATE=28000

In this case it's quite obvious that my user or password is identified incorrectly in my mxreportdatasources.properties file (that's where you define your db connection for use in Eclipse)

Another example. If we have a bug in the sql statement:

[/support/docview.wss?uid=swg21999296&amp;aid=2]

appears on screen, or

Wed Feb 22 16:37:41 EST 2017 ERROR DataSet [dataSet] fetch failed: 
com.ibm.db2.jcc.am.SqlSyntaxErrorException: DB2 SQL Error: SQLCODE=-206, SQLSTATE=42703, SQLERRMC=WORKORDER.BADATTRIBUTE, DRIVER=4.11.69

Is in our log file. In this case it tells us exactly what is wrong with the sql. (I added "workorder.badattribute" knowing that it is not an actual attribute in the table so the sql will not run.)

It's not always this obvious so you can also take the sql from the log file - in this example it shows as:

select workorder.workorderid, workorder.badattribute, workorder.wonum, workorder.description, workorder.woclass, workorder.status, workorder.assetnum, workorder.worktype, workorder.wopriority, workorder.lead, workorder.location, workorder.jpnum, workorder.parent, workorder.siteid, workorder.schedstart, workorder.schedfinish, workorder.siteid from ((workorder left outer join wochange on workorder.siteid = wochange.siteid and workorder.orgid = wochange.orgid and workorder.wonum = wochange.wonum) left outer join woactivity on workorder.siteid = woactivity.siteid and workorder.orgid = woactivity.orgid and workorder.wonum = woactivity.wonum) where 1=1 and workorder.istask = 0 order by workorder.siteid, workorder.wonum 

paste it into your sql developer and test around until you determine what is wrong. 

When you have resolved your errors you can comment out those two lines if you like but it's not required. The report can be published to Maximo with those set and it will not affect performance from within Maximo (and no logging will be in place) since Maximo does not utilize those settings for it's logging.