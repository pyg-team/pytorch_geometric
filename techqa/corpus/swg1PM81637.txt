Title: IBM PM81637: Z/OS RRS RESETS DB2 EXITS AFTER ABEND04E RC00F3009B IS ISSUED FOR A DB2 APPLICATION SERIALIZATION ERROR - United States

Text:
z/os  A FIX IS AVAILABLE
Obtain the fix for this APAR.


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  Customer has very complicated application where they cannot
   fix the serialization error in the application and they hope
   DB2 can minimize the impact after RC00F3009B is issued by
   DB2 for the serialization error.  This apar will prevent RRS
   from resetting DB2 exits after RC00F3009B so that RRS or DB2
   do not need to be restarted to bypass the problem.
   
   
    
   
   

LOCAL FIX
 *  application to fix the serialization error
   
   
    
   
   

PROBLEM SUMMARY
 *  ****************************************************************
   * USERS AFFECTED: All DB2 for z/OS RRSAF users.                *
   ****************************************************************
   * PROBLEM DESCRIPTION: The user has an RRSAF application       *
   *                      which is a private context server.      *
   *                      In some cases a client application      *
   *                      uses the private context to issue       *
   *                      SQL, and the private context server     *
   *                      calls RRS commit on the same            *
   *                      DB2 agent.  The DB2 RRS exit processor  *
   *                      terminates the server commit thread     *
   *                      with an ABEND04E RC00F3009B.  DB2       *
   *                      cannot reset its exits, so DB2 or       *
   *                      z/OS RRS need to be restarted.          *
   ****************************************************************
   * RECOMMENDATION:                                              *
   ****************************************************************
   The user has an RRSAF application which is a private context
   server.  Client applications use the private context to
   issue SQL and then return the private context to the server.
   The server then calls RRS commit processing for that context.
   In some cases a client application issues SQL and is 'in' DB2
   at the same time that the server calls commit using the same
   DB2 agent.  The DB2 RRS exit processor terminates the server
   commit thread with an ABEND04E RC00F3009B.  This termination
   processing may cause z/OS RRS to call the Exit_Failed_Exit and
   unset the DB2 exits.  DB2 cannot reset its exits, so DB2 or
   z/OS RRS must be restarted.
   
   
    
   
   

PROBLEM CONCLUSION
 *  Module DSN3RRSX has been updated to avoid issuing the RRS
   return code that causes z/OS RRS to call the Exit_Failed_Exit
   and unset the DB2 exits.
   The problem described by this APAR included a sequence of
   events.  An ABEND04E RC0F3009B occurred in DSN3RRSX and
   the calling application received a reason code 00F3009B.
   Then an ABEND04E RC00F30095 occurred in DSN3RRSX and z/OS RRS
   or DB2 had to be restarted.
   With this APAR fix, an ABEND04E RC0F3009B may still occur in
   DSN3RRSX and the application may receive a reason code
   00F3009B, but this APAR fix should prevent the accompanying
   ABEND04E RC00F30095 in DSN3RRSX and the need to restart
   z/OS RRS or DB2.
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   PM81637
   
   
 * REPORTED COMPONENT NAME
   DB2 ZOS SUBSYS
   
   
 * REPORTED COMPONENT ID
   5740XYR01
   
   
 * REPORTED RELEASE
   A10
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2013-01-29
   
   
 * CLOSED DATE
   2013-02-19
   
   
 * LAST MODIFIED DATE
   2013-04-02
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
    UK91836
   
   

MODULES/MACROS
 *     DSN3RRSX
   
   
    
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   DB2 ZOS SUBSYS
   
   
 * FIXED COMPONENT ID
   5740XYR01
   
   

APPLICABLE COMPONENT LEVELS
 * RA10 PSY UK91836 [HTTPS://WWW14.SOFTWARE.IBM.COM/WEBAPP/SET2/ORDERMEDIA/SHOPCART?PTFS=UK91836]
   UP13/03/07 P F303
   
   

FIX IS AVAILABLE
 * SELECT THE PTF APPROPRIATE FOR YOUR COMPONENT LEVEL. YOU WILL BE REQUIRED TO SIGN IN. DISTRIBUTION ON PHYSICAL MEDIA IS NOT AVAILABLE IN ALL COUNTRIES.