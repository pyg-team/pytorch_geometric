Title: IBM After a successful license import AppScan Standard shows "No license available" - United States

Text:
lkad; license; key TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 License Key Administrator (LKAD) version 8.1.4 imports a license key (.upd file) and shows it available, but the "Help > License" window in AppScan Standard shows the error "No license available. Demo license in use". 

SYMPTOM
The license is shown in License Key Administrator correctly, but AppScan Standard shows "No license available, Demo license in use". 


License Key Administrator version 8.1.4 truncates or strips the imported license key. 

Note: We observed also that LKAD truncates or strips the license files while being started. 

In some cases the license key is truncated. For example, the following license key: 


 * INCREMENT AppScanStandard rational 8.50000 permanent uncounted 7BBCD08DXXX \
   VENDOR_STRING="0|Nodelocked|0|AppScan_License_Data \
   SubProduct=auditor Feature=all,all host=any ip=any " \
   HOSTID=DISK_SERIAL_NUM=ffffff vendor_info="0|IBM Security \
   AppScan Standard Authorized User Single Install License Key|0" \
   ISSUED=07-feb-2015 NOTICE="Sales Order Number: 0011223344 for \
   COMPANYNAME" ck=199 SN=6589999 TS_OK
 * 

is truncated after importing it with LKAD into the rational_perm.dat files, and the license key results in: 
 * INCREMENT AppScanStandard rational 8.50000 permanent uncounted 7BBCD08DXXX \
   VENDOR_STRING="0|Nodelocked|0|AppScan_License_Data \
   SubProduct=auditor Feature=all,all host=any ip=any " \
   HOSTID=DISK_SERIAL_NUM=ffffff vendor_info="0|IBM Security \
   AppScan Standard Authorized User Single Install License Key|0" \
   ISSUED=07-feb-2015 NOTICE="Sales Order Number: 0011223344 for \
 * 



In another case the license key may be stripped of some lines. For example, the following license key: 
 * SERVER hostname DISK_SERIAL_NUM=xxxxxxxx 27000
 * 
 * VENDOR ibmratl 
 * 
 * INCREMENT AppScanStandard rational 7.80000 permanent 1 4B8EC029xxxx 
   VENDOR_STRING="0|Floating|0|AppScan_License_Data \
 * 
 *  SubProduct=auditor Feature=all,all host=any ip=any " \
 * 
 *  DUP_GROUP=UH vendor_info="0|IBM Security AppScan Standard \
 * 
 *  Floating User Single Install License Key|0" ISSUED=26-may-2016 \
 * 
 *  BORROW=2160 NOTICE="Sales Order Number: 00554xxxxxx for "company." 
   ck=139 SN=7599200


is stripped of the SERVER line while importing it with LKAD into the rational_server_perm.dat files, and the license key results in: 
 * VENDOR ibmratl 
 * 
 * INCREMENT AppScanStandard rational 7.80000 permanent 1 4B8EC029xxxx \
 * 
 * VENDOR_STRING="0|Floating|0|AppScan_License_Data \
 * 
 *  SubProduct=auditor Feature=all,all host=any ip=any " \
 * 
 *  DUP_GROUP=UH vendor_info="0|IBM Security AppScan Standard \
 * 
 *  Floating User Single Install License Key|0" ISSUED=26-may-2016 \
 * 
 *  BORROW=2160 NOTICE="Sales Order Number: 00554xxxxxx for "company."
   ck=139 SN=7599200


If the above symptoms does not match to your case, check the symptoms described in this technote: http://www.ibm.com/support/docview.wss?uid=swg21961416 [http://www.ibm.com/support/docview.wss?uid=swg21961416]


CAUSE
The problem is reported to the Common Licensing development as APAR (defect) PI24592.



ENVIRONMENT
Windows Server 2012



DIAGNOSING THE PROBLEM
Correcting the license key manually resolves the problem. However when starting the LKAD program, the licence key is truncated again. 

The License Key Administrator (LKAD) program is located (by default): C:\Program Files (x86)\IBM\RationalRLKS\common\licadmin8.exe

The impacted license files: 
- rational_perm.dat 
- rational_temp.dat
- rational_server_perm.dat 
- rational_server_temp.dat
are located by default in: C:\Program Files (x86)\IBM\RationalRLKS\common



RESOLVING THE PROBLEM
The issue is resolved in AppScan Standard version 9.0.3.7, where the LKAD program is replaced with License Manager. 


The workaround for AppScan Standard version 9.0.3.6 and older is: 

 1. Correct the license key manually in the rational_perm.dat or rational_server_perm.dat file.
    (or in rational_temp.dat or rational_server_temp.dat, depending on in which file your license key is stored) 
 2. Disable the LKAD program by renaming it from licadmin8.exe to licadmin8.exe_bad.


You may correct the license key in the following way:  1. In two separate editors (e.g. notepad), open one of the .dat files, and the original license file (.upd). 
 2. Compare the license keys in both editors. 
 3. If the license key in the .dat file is truncated (missing a line or two), correct the license key (add the missing lines) and save the .dat file.
    Note You will need Administrator permissions to save the .dat file.


RELATED INFORMATION
 AppScan Standard does not see imported licenses [http://www.ibm.com/support/docview.wss?uid=swg21961416]