Title: IBM ConfigEngine upgrade-profile step fails in subtask import-nodetypes for ibmcontentwcm_v5tov6.nodetypes - United States

Text:
wp8migrate PREVENTIVE SERVICE PLANNING

ABSTRACT
 ConfigEngine upgrade-profile step fails in post-apply-ptf in subtask import-nodetypes for ibmcontentwcm_v5tov6.nodetypes file with Error "SCH0043E: Error retrieving all content types" causes IllegalStateException, ArrayIndexOutOfBoundsException, javax.jcr.RepositoryException, com.ibm.icm.ci.schema.CDMSchemaException, and com.ibm.icm.da.DBAccessException 

CONTENT
Running the Portal 8 Migration upgrade-profile step the post-apply-PTF task fails in subtask import-nodetypes for <Portal-Server-Binary-directory>/bin/../wcm/prereq.wcm/config/nodetypes/ibmcontentwcm_v5tov6.nodetypes file with the following errors 

<Portal-Server-Binaries>/wcm/prereq.wcm/config/includes/mig_cfg.xml:553: The following error occurred while executing this line: 

<Portal-Server-Binaries>/jcr/wp.content.repository.install/config/includes/jcr.install_cfg.xml:701: The following error occurred while executing this line:
<Portal-Server-Binaries>/jcr/wp.content.repository.install/config/includes/jcr.install_cfg.xml:876: Import node types task failed
at org.apache.tools.ant.ProjectHelper.addLocationToBuildException(ProjectHelper.java:539)
... 

Caused by: /QIBM/ProdData/WebSphere/PortalServer/V8/Server/jcr/wp.content.repository.install/config/includes/jcr.install_cfg.xml:701: The following error occurred while executing this line:
/QIBM/ProdData/WebSphere/PortalServer/V8/Server/jcr/wp.content.repository.install/config/includes/jcr.install_cfg.xml:876: Import node types task failed
at org.apache.tools.ant.ProjectHelper.addLocationToBuildException(ProjectHelper.java:539) 

... 

ConfigTrace.log shows the following prior to the Build Failed which indicates the cause of the failure 

[importNodeTypes] java.lang.IllegalStateException: javax.jcr.RepositoryException: SCH0043E: Error retrieving all content types.
[importNodeTypes] java.lang.ArrayIndexOutOfBoundsException: Array index out of range: 8
[importNodeTypes] at com.ibm.icm.jcr.WorkspaceImpl.getNodeTypeManager(WorkspaceImpl.java:2834)
[importNodeTypes] ...
[importNodeTypes] Caused by: javax.jcr.RepositoryException: SCH0043E: Error retrieving all content types.
[importNodeTypes] java.lang.ArrayIndexOutOfBoundsException: Array index out of range: 8
[importNodeTypes] at com.ibm.icm.jcr.nodetype.NodeTypeManagerImpl.loadAllNodeTypes(NodeTypeManagerImpl.java:219)
[importNodeTypes] ...
[importNodeTypes] Caused by: com.ibm.icm.ci.schema.CDMSchemaException: SCH0043E: Error retrieving all content types.
[importNodeTypes] java.lang.ArrayIndexOutOfBoundsException: Array index out of range: 8
[importNodeTypes] at com.ibm.icm.ci.schema.impl.SchemaService.retrieveContentTypes(SchemaService.java:264)
[importNodeTypes] ...
[importNodeTypes] Caused by: com.ibm.icm.da.DBAccessException: java.lang.ArrayIndexOutOfBoundsException: Array index out of range: 8
[importNodeTypes] at com.ibm.icm.da.portable.schema.ListUTIndex.listIndexes(ListUTIndex.java:188)
[importNodeTypes] at com.ibm.icm.da.portable.schema.ListUTIndex.listUTIndex(ListUTIndex.java:51)
[importNodeTypes] at com.ibm.icm.da.portable.schema.SchemaManager.listUTIndex(SchemaManager.java:307)
[importNodeTypes] ...
[importNodeTypes] Caused by: java.lang.ArrayIndexOutOfBoundsException: Array index out of range: 8
[importNodeTypes] at com.ibm.as400.access.JDServerRow.isInput(JDServerRow.java:792)
[importNodeTypes] ... 

[importNodeTypes] Exception in thread "main" java.lang.IllegalStateException: javax.jcr.RepositoryException: SCH0043E: Error retrieving all content types.


Solution: 

Ensure that all necessary schema updates for the WebSphere Portal 8 JCR database have been performed





 * 
 *