Title: IBM Cast Iron database query with column type of datetime does not work as expected against Microsoft SQL Server 2008 - United States

Text:
a TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 Cast Iron database query with column type of datetime does not work as expected against Microsoft SQL Server 2008. 

SYMPTOM
In Cast Iron version 6.1.0.3 and prior versions, database query with column type of datetime works as expected with milliseconds on the value against Microsoft SQL Server 2008. However, after Cast Iron version 6.1.0.6, the same query does not return the same result from the database as version 6.1.0.3. For example, the result set returned from the following query statement in Cast Iron version 6.1.0.3 and version 6.1.0.9 is different: 

SELECT * FROM TestSchema.TestTable WHERE TestDateTimeColumn = ?
The input parameter has value: 2012-08-16T01:22:08.935


CAUSE
The internal database driver Cast Iron used for Microsoft SQL Server 2008 changed after version 6.1.0.3. The latest driver behaves differently than previous version for column type of datetime.

APAR LI77217 [http://www.ibm.com/support/docview.wss?uid=swg1LI77217] has been raised for this issue



RESOLVING THE PROBLEM
Apply fix pack 6.1.0.15 or 6.3.0.2 to fix this issue. 

 

A workaround is in the configuration of the Microsoft SQL Server 2008 database endpoint. Add an Additional Parameter with the following name/value pair:

Name: DateTimeInputParameterType
Value: dateTimeOffset