Title: IBM PM70282: INSTALL VIA PROPERTIES FILE DOES NOT HANDLE DEFAULT BINDING OPTION PROPERLY - United States

Text:
  FIXES ARE AVAILABLE
8.0.0.6: WebSphere Application Server V8.0 Fix Pack 6 [http://www-01.ibm.com/support/docview.wss?uid=swg24034673]
8.0.0.7: WebSphere Application Server V8.0 Fix Pack 7 [http://www-01.ibm.com/support/docview.wss?uid=swg24035457]
8.0.0.8: WebSphere Application Server V8.0 Fix Pack 8 [http://www-01.ibm.com/support/docview.wss?uid=swg24036729]
8.0.0.9: WebSphere Application Server V8.0 Fix Pack 9 [http://www-01.ibm.com/support/docview.wss?uid=swg24037574]
8.0.0.10: WebSphere Application Server V8.0 Fix Pack 10 [http://www-01.ibm.com/support/docview.wss?uid=swg24039242]
8.0.0.11: WebSphere Application Server V8.0 Fix Pack 11 [http://www-01.ibm.com/support/docview.wss?uid=swg24040425]
8.0.0.12: WebSphere Application Server V8.0 Fix Pack 12 [http://www-01.ibm.com/support/docview.wss?uid=swg24041590]
8.0.0.13: WebSphere Application Server V8.0 Fix Pack 13 [http://www-01.ibm.com/support/docview.wss?uid=swg24042746]
8.0.0.14: WebSphere Application Server V8.0 Fix Pack 14 [http://www-01.ibm.com/support/docview.wss?uid=swg24044096]
8.0.0.15: WebSphere Application Server V8.0 Fix Pack 15 [http://www-01.ibm.com/support/docview.wss?uid=swg24044734]


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  Error Description&#65496;
   When installing an application through property files with
   usedefaultbindings=true, the resource bindings declared in the
   web.xml do not get updated in the resource references section
   associated with the application in the Administrative Console.
   Trying to add the resource binding in the Administrative
   Console fails with a validation error relating to the virtual
   host definition.
   
   To recreate:
   
   1) Create a properties file with details of application, node,
   cell and
   server.
   Set usedefaultbindings=true.
   
   2) Install the application with the following command-
   
   AdminTask.applyConfigProperties(['-propertiesFileName
   myObjectType.props
   -reportFileName report.txt '])
   
   3) The application installs fine.
   
   4) Go to administrative console , click the application and
   then Resource references. We can see that the resource bindings
   defined in the web.xml have not been set.
   
   5) Try setting the binding by selecting it. A Validation error
   is thrown associated to missing virtual hosts.
   
   Installing the same application through the administrative
   console after selecting "generate default bindings" will
   install the application and set the bindings correctly.
   
   An issue in the properties file based configuration code does
   not handle the default binding option (useDefaultBindings)
   properly during application install and update operation.
   
   
    
   
   

LOCAL FIX
 *  Local Fix&#65496;
   none
   
   
    
   
   

PROBLEM SUMMARY
 *  ****************************************************************
   * USERS AFFECTED:  All users of IBM WebSphere Application      *
   *                  Server V8.0 and V8.5                        *
   ****************************************************************
   * PROBLEM DESCRIPTION: When installing or updating an          *
   *                      application (full application)          *
   *                      through the property files with         *
   *                      "useDefaultBindings=true" option, the   *
   *                      application install fine, but the       *
   *                      resource bindings in the web.xml do     *
   *                      not get updated.                        *
   ****************************************************************
   * RECOMMENDATION:                                              *
   ****************************************************************
   The existing properties file based configuration code did not
   handle the useDefaultBindings option properly. The application
   installed successfully, but the ejb or web bindings were not
   set in the application properly.
   
   
    
   
   

PROBLEM CONCLUSION
 *  The APAR will fix the properties file based configuration code
   to handle the useDefaultBindings option properly on
   application installation and update.  The examples to install
   an application or update a full application using
   "useDefaultBindings" option as below:
   
   Example to install an app with "useDefaultBindings" option in
   a properties file
   #
   # Header
   #
   ResourceType=Application
   ImplementingResourceType=Application
   ResourceId=Deployment=!{applicationName}
   #
   #Properties
   #
   Name=!{applicationName}
   TargetServer=!{serverName} #required
   TargetNode=!{nodeName} #required
   EarFileLocation=c:/HelloWorld_war.ear
   useDefaultBindings=true
   #
   EnvironmentVariablesSection
   #
   #Environment Variables
   applicationName=app1
   cellName=Cell01
   serverName=server1
   nodeName=Node01
   
   Example to update a full app (replace with the original
   app) with "useDefaultBindings" option in the properties file:
   
   #
   # Properties file to update a WAR app
   #
   ResourceType=Application
   ImplementingResourceType=Application
   ResourceId=Deployment=!{applicationName}
   #
   #Properties
   #
   Name=!{applicationName} #required
   Update=true
   operationType=update
   contentType=app
   contentFile=!{contentFile}
   contextRoot=/app1
   useDefaultBindings=true
   
   #
   # SubSection 1.0.3 # MapModulesToServers Section. taskName and
   row0 should not be edited. row0 contains column names for the
   task.
   #
   ResourceType=Application
   ImplementingResourceType=Application
   ResourceId=Deployment=!{applicationName}
   
   #
   #Properties
   #
   taskName=MapModulesToServers
   row1={"IVT Application" ivt_app.war,WEB-INF/web.xml
   WebSphere:cell=!{cellName},node=!{node1},server=!{server1} 22
   moduletype.web "Web Module"}
   mutables={false false true false false false} #readonly
   row0={module uri server ModuleVersion moduletype
   moduletypeDisplay} #readonly
   #
   EnvironmentVariablesSection
   #
   #Environment Variables
   cellName=Cell01
   node1=Node01
   server1=server1
   applicationName=app1
   contentFile=C:\ivt\ivt_app.war
   
   
   The fix for this APAR is currently targeted for inclusion in
   fix pack 8.0.0.6 and the fix pack following 8.5.0.2.  Please
   refer to the Recommended Updates page for delivery
   information:
   http://www.ibm.com/support/docview.wss?rs=180&uid=swg27004980 [http://www.ibm.com/support/docview.wss?rs=180&uid=swg27004980]
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   PM70282
   
   
 * REPORTED COMPONENT NAME
   WEBS APP SERV N
   
   
 * REPORTED COMPONENT ID
   5724H8800
   
   
 * REPORTED RELEASE
   800
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2012-08-03
   
   
 * CLOSED DATE
   2013-03-13
   
   
 * LAST MODIFIED DATE
   2013-03-13
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   WEBS APP SERV N
   
   
 * FIXED COMPONENT ID
   5724H8800
   
   

APPLICABLE COMPONENT LEVELS
 * R800 PSY
   UP
   
   
 * R850 PSY
   UP