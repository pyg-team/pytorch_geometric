Title: IBM Configuring SCSQAUTH in the z/OS STEPLIB for an Application Server or another JMS application - United States

Text:
5655F1000 5655l8200 r310 r300 mqminfo mq390l2 TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 Various symptoms may occur if SCSQAUTH for IBM MQ for z/OS is not in the STEPLIB concatenation for a Javaâ„¢/JMS application. 

SYMPTOM
Possible symptoms of not having the proper STEPLIB concatenation include: 

 * MQJMS2005 failed to create MQQueueManager. 
   
   
 * ABEND5C6 5C6 reason 00C20001 occurs and brings down the WebSphere Application Server. 00C20001 means CSQBSRV program has detected a request for a nonexistent function. CSQBSRV is in library SCSQAUTH.
   
   
 * The createQueueConnection() method call for the MQRRSQueueConnectionFactory administered object fails. Control never returned from this method call. After a couple minutes the browser times out and WAS/390 abends with reason code C9C2120C according to a trace record.
   
   Trace: date time 01 t=7DFE88 c=5.2 key=P8 (0000000A)
   Description: Log Boss/390 Error
   from filename: ./bborexit.cpp
   at line: 1136
   error message: BBOU0036W Processing for signal 'SIGABND' (18)
   with abend=005C6000 rsncode=00000000 si_code='ABND_REAL'(170)
   si_errno=0 si_addr=00000000 , in current thread (2245F198
   00000009).
   
   The reason code is listed in this entry as 00000000 although Reg15 for the S5C6 is 00C20001.
   
   
 * The listener fails in bindings mode:
   
   BBOJ0094E: MDB codeset-ear#codeset-ejb.jar#CodesetService REGISTRATION FAILED - CAUSE: javax.jms.JMSException: MQJMS2005: failed to create MQQueueManager for 'CSQ1' 


RESOLVING THE PROBLEM
Follow these instructions from the IBM MQ Using Java manual:

STEPLIB configuration on z/OS
On z/OS, the STEPLIB used at runtime must contain the IBM MQ SCSQAUTH library. From UNIX System Services, you can add this using a line in your .profile as shown below, replacing thlqual with the high level data set qualifier that you chose when installing IBM MQ: 

export STEPLIB=thlqual.SCSQAUTH:$STEPLIB 

In other environments, you typically need to edit the startup JCL to include SCSQAUTH on the STEPLIB concatenation: 

 STEPLIB DD DSN=thlqual.SCSQAUTH,DISP=SHR 

For WebSphere Application Server (WAS) connections using bindings mode, reference IBM MQ libraries and the WebSphere Application Server for z/OS STEPLIB [https://www.ibm.com/support/knowledgecenter/SS7K4U_9.0.0/com.ibm.websphere.zseries.doc/ae/cmm_cf_mqlibraries.html]. It states that the WAS STEPLIB concatenation must include thlqual.SCSQANLx and thlqual.SCSQAUTH (where "thlqual" is the High Level Qualifier for the data sets). Update the JCL for the control and servant regions.


Consider whether any security definitions need to be set up for MQCONN or MQQUEUE access from the JMS application.




Cross reference information Segment Product Component Platform Version Edition Application Servers WebSphere Application Server for z/OS Java Messaging Service (JMS) z/OS 9.0.0.0, 8.5, 8.0, 7.0, 6.1 Business Integration IBM MQ z/OS 9.0, 8.0, 7.1, 7.0, 6.0 
PRODUCT ALIAS/SYNONYM
 WMQ MQ