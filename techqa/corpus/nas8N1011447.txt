Title: IBM Modifying Fields in a File when Missing DDS - United States

Text:
CHG; CPY; CREATE; CRT; DATABASE; DB; DB2/400; DDS; EDIT; FILE; iNav; Ops Nav; PF TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 Are you missing the DDS for one of your files? Do you need to change the length of a field or add a field? System i Navigator can help you. The following steps shows you how to modify a file using System i Naviator when you have lost or do not have the DDS for a file. 

RESOLVING THE PROBLEM
Are you missing the DDS for one of your files? Do you need to change the length of a field or add a field? System i Navigator can help you. The following steps shows you how to modify a file using System i Naviator when you have lost or do not have the DDS for a file. 

Caution: Make sure and save the file you are modifying to a SAVF or tape before following these steps. 
Generate CREATE TABLE SQL statement for file 1. In System i Navigator main window, select My Connections > iSeriesName > Databases > RelationalDatabaseName > Schemas 2. In the Taskpad pane (across the bottom of the window) choose Run an SQL script 3. A new window opens. Pull down the Edit menu and select Insert Generated SQL 4. The General SQL window opens. Click on the Add… button. 5. The Browse Objects window opens. You should see a list of libraries. (You can add or remove libraries by clicking on the Schemas… button.) 6. Expand the library containing the file (table) you want to modify, you will have options for the various types of objects, such as tables and views. 7. Expand Tables. 8. Check the file (table) you wish to modify and click OK. 9. You will return to the Generate SQL window. Click Generate. 10. You will return to the Run SQL Scripts window with the CREATE TABLE statement needed to re-create the table. 11. Leave the Run SQL Scripts window open. 
Rename Original File 1. In System i Navigator main window, select My Connections > iSeriesName > Databases > RelationalDatabaseName > Schemas > libName 2. Click on Tables. 3. In the Right Details Pane, single click on fileName to select. 4. Right click and select Rename give the file a new name. Example: fileNameOrg 

OR 

On the PC5250 Green Screen, use the Rename Object (RNMOBJ) command to rename existing file. 

For example: 

RNMOBJ OBJ(libName/fileName) OBJTYPE(*FILE) NEWOBJ(fileNameOrg) 

Modify CREATE TABLE SQL statement 

Make any needed modifications to the SQL statement. When finished select Run > All to create the new table. 

Last Step - Copy records from original file over to new file 
In System i Navigator main window, select My Connections > iSeriesName > Databases > RelationalDatabaseName > Schemas > libName 1. Click on Tables. 2. In the Right Details Pane, single click on fileNameOrg to select (Note: You may need to press F5 to refresh screen.) 3. Right click and select Data > Copy... 4. The Copy File window opens.

a. Verify the From file and Library.
b. Enter the To file name and Library.
c. Select Replace for Replace or add records.
d. Click Advanced on the bottom right of screen, and scroll down to bottom.
e. In Record format field mapping, use the pull down and select *MAP; click ADD. 
f. Now in same field, again using pull down, select *DROP; click ADD. 5. Press OK button in lower right.

OR

On PC5250 Green Screen, use the Copy File command to copy the records from the original file over to the new file. 

For example:

CPYF FROMFILE(libName/fileNameOrg) TOFILE(libName/fileName) 
MBROPT(*REPLACE) FMTOPT(*MAP *DROP) 
Now the file will contain the new field, longer length field, or any other changes you may have made. 


Cross reference information Segment Product Component Platform Version Edition Operating System IBM i 7.2 Operating System IBM i 7.1 Operating System IBM i 6.1 Operating System IBM i 7.3 
HISTORICAL NUMBER
 605105928