Title: IBM Collecting data for intermittent issues for IBM FileNet Capture Professional - United States

Text:
Capture Profesional TECHNOTE (FAQ)

QUESTION
 How to collect comprehensive data for IBM FileNet Capture Professional intermittent issues 

CAUSE
When an intermittent issue is encountered, it is paramount that the correct data is captured when the anomaly is reproduced. This will help expedite the troubleshooting process

ANSWER
Clarification Questions:
1) Please describe the intermittent issue in detail. For example, is it a hang, a crash, an error?

2) What is the step-by-step reproducible scenario? For example, ran the following components in a Capture Path (or Adhoc Mode) : Scan-->Doc Processing-->Event Activator-->Assembly-->Indexing (results in a hang) 

3) What is the rate of frequency? For example, the issue can be reproduced once out of every ten batches (10% rate of frequency)

4) After the issue (i.e. hang), is the system able to recover after 5 or so minutes (please specify), or the FileNet Capture process has to be manually terminated?

5) Is the issue happening in out-of-the-box Capture or only in a custom Capture application? 

6) What are the errors (if any) being reported? 

7) Were there any recent changes made to the system that may have introduced this issue? For example, a new scannner, an MS Windows update, a new Antivirus, to name just a few. 

8) Is this a new environment or already existing (and previously working) Capture environment?


To further troubleshoot this issue, please provide the following data. (Upload zipped files to https://www.ecurep.ibm.com/app/upload [https://www.ecurep.ibm.com/app/upload] )

[For Capture to Image Services environments:] 

1) Identify which component has the intermittent issue. 

2) Turn on Capture Verbose logging 

 i) Launch Capture Manager 

 ii) Click the "Logging" button 

 iii) Select the "Verbose: Logs miscellaneous information, including debugging data" 

3) Turn on IS Eladisp tracing: 

 i) From the IS server, open a command window and type "eladisp"
eladisp>assign trace 128
eladisp>assign bind 0 *
eladisp>set trace_sym on
eladisp>enable trace 0
eladisp>show trace 0 > /fnsw/local/tmp/eladisp.trace (name/location of logs)

ii) To stop eladisp
Control-C
eladisp>set specialcmd on
eladisp>disable ch 0
eladisp> quit


4) Turn on Microsoft Perfmon Tracing:
i) from the windows run box run perfmon
ii) Under the Monitor Tools node select Performance Monitor
a. Right click and create a new "Data Collector Set"
b. The defaults are fine for our purposes [/support/docview.wss?uid=swg21685596&aid=1] [/support/docview.wss?uid=swg21685596&aid=1]

iii) Click on the new dataset you created and then right click on System Monitor Log for its properties
[/support/docview.wss?uid=swg21685596&aid=2] [/support/docview.wss?uid=swg21685596&aid=2]

iv) On the following screen add the counters
[/support/docview.wss?uid=swg21685596&amp;aid=3]

v) Click on Add and pick these counters
a. Logical Disk 
b. Physical Disk
c. Network Interface
d. Processor
e. Process

The next dialog should look like this:
[/support/docview.wss?uid=swg21685596&aid=4] [/support/docview.wss?uid=swg21685596&aid=4]

vi) The System Monitor Log Properties - switch to the file tab and make a note of where the file blg file is:
[/support/docview.wss?uid=swg21685596&amp;aid=5]

vii) Start the Data collection on this this screen:
[/support/docview.wss?uid=swg21685596&aid=6] [/support/docview.wss?uid=swg21685596&aid=6]

vii) Leave it running until the problem occurs.


5) Turn on the MS Windows Problem Steps Recorder (PSR)
i) launch psr.exe from MS Windows 7, 8x and 2008
ii) Start recording
iii) http://windows.microsoft.com/en-us/windows7/how-do-i-use-problem-steps-recorder [http://windows.microsoft.com/en-us/windows7/how-do-i-use-problem-steps-recorder]


6) When the issue is reproduced (i.e. the hang), capture 3 full memory dumps (with 10 second intervals)
i) Download and install MS Windows Debugging Tools: Debugging Tools for Windows 32-bit Version to C:\Debuggers
(**) 32-bit version can be installed both on 32-bit and 64-bit systems.
ii) Create a folder where dumps will be stored (e.g. C:\Capture_dumps);
iii) Open an MS Windows Command-line: Click Start -> Run and type in "cmd"
a. In CMD, switch to the folder where Debugging Tools for Windows are installed using the cd command:
- cd Debuggers\X86

b. Capture a memory dump with the following command
- Adplus -hang -pn fncaptureapp.exe -o C:\Capture_dumps
iv) Leave the CMD window open. Reproduce the issue (application/process crash) and press Enter in CMD. In this case a 
dump file will be created immediately. 
v) Capture 2 more dumps with 10 second intervals


7) Capture Professional Environment
-- Version of Capture including any fix packs?
-- Version of Scanner and what interface (i.e. usb)?
-- Drivers installed (ISIS only, Twain only or both Twain/ISIS)?
-- What is the Operating System (SP and x86 or x64)?
-- Version of IDM Desktop including fix packs?
-- Version of ISTK (run "fn_rel" from command line)?
-- What version of IS including any fix packs?


8) Send IBM L2 Support the following log files:
i) The specific time and date (with time zone) when the issue occurred.
ii) Any pertinent Microsoft Windows Application Event Logs that matches the time of the error/issue.
iii) Pertinent ISTK/WAL Logs (i.e. c:\Program Files (x86)\IBM\FNSW\client\logs\wal<date>)
iv) Capture Verbose logs
v) IS Eladisp Trace logs, IS elogs (i.e. c:\FNSW_LOC\logs\elogs), and IS Security logs (i.e. c:\FNSW_LOC\logs\log) -- specify the 
time zone of the IS server
vi) Perfmon .blg file 
vii) Copy and send the offending batch to the Local Repository (i.e. c:\ProgramData\IBM\Capture or 
c:\Program Files (x86)\FileNet\Capture\Repositories)
viii) Send a step-by-step screenshots from the PSR (either the zip or the .mht file)
ix) Send the 3 memory dumps
x) Please also provide an msinfo32.exe output before and during the issue. On MS Windows XP machines, it was called 
winmsd.exe. However, on Win 7, it's now msinfo32.exe. 



[For Capture to P8 Content Engine environments:] 

1) Identify which component has the intermittent issue. 

2) Turn on Capture Verbose logging 

 i) Launch Capture Manager 

 ii) Click the "Logging" button 

 iii) Select the "Verbose: Logs miscellaneous information, including debugging data" 

3) Turn on ODBC Tracing 

 i) launch odbcad32.exe 

 ii) select "Tracing" tab 

 iii) Set the Log File Path 

 iv) Click "Start Tracing Now"

4) Turn on Microsoft Perfmon Tracing (see step #4 from above) 

5) Turn on the MS Windows Problem Steps Recorder (PSR)
i) launch psr.exe from MS Windows 7, 8x and 2008
ii) Start recording
iii) http://windows.microsoft.com/en-us/windows7/how-do-i-use-problem-steps-recorder [http://windows.microsoft.com/en-us/windows7/how-do-i-use-problem-steps-recorder]

6) Capture 3 memory dumps within 10 second intervals (please see steps #6 from above)

7) Capture Professional Environment
-- Version of Capture including any fix packs?
-- Version of Scanner and what interface (i.e. usb)?
-- Drivers installed (ISIS only, Twain only or both Twain/ISIS)?
-- What is the Operating System (SP and x86 or x64)?
-- Version of CE Client installed including any fix packs?
-- Is P8 FEM installed and can it successfully connect to the CE server?
-- What version of CE (any fix packs)?


8) Send IBM L2 Support the following log files:
i) The specific time and date (with time zone) when the issue occurred.
ii) Any pertinent Microsoft Windows Application Event Logs that matches the time of the error/issue.
iii) ODBC Tracing logs
iv) Capture Verbose logs
v) Perfmon .blg file 
vi) Copy and send the offending batch to the Local Repository (i.e. c:\ProgramData\IBM\Capture or 
c:\Program Files (x86)\FileNet\Capture\Repositories)
vii) Send a step-by-step screenshots from the PSR (either the zip or the .mht file)
viii) Send the 3 memory dumps
ix) Please also provide an msinfo32.exe output before and during the issue. On MS Windows XP machines, it was called 
winmsd.exe. However, on Win 7, it's now msinfo32.exe.