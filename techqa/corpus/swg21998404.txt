Title: IBM Why am I getting a SQL1477N on a summary table? - United States

Text:
 TECHNOTE (FAQ)

QUESTION
 Why am I getting a SQL1477N on a summary table? 

CAUSE
Here are the three most common reasons why a user will be denied access to this table:
An attempt was made to access a table where one of its objects is not accessible. The table may not be accessible because of one of the following reasons:


 * The table had NOT LOGGED INITIALLY activated when the unit of work was rolled back. 
 * The table is a partitioned created temporary table or declared temporary table and one or more database partitions failed since the temporary table was instantiated or declared. 
 * ROLLFORWARD encountered the activation of NOT LOGGED INITIALLY on this table or a NONRECOVERABLE load on this table.


Access to this table is not allowed because its integrity cannot be guaranteed. 
ANSWER
The resolution is as follows: 

1. Use db2look to retrieve the schema of the summary table. 

2. Drop the summary table (DROP TABLE table-name) 

3. Recreate the table using the schema output from db2look. 

4. Table is now ready to be loaded again. Once the table is created, the user can load data into this table from their application and then have DB2 optimize queries based on this information. Before loading the data, the summary table must be taken out of the check pending state: 

SET INTEGRITY FOR table-name ALL IMMEDIATE UNCHECKED; 

RELATED INFORMATION
 SQL1477N [https://www.ibm.com/support/knowledgecenter/SSEPGG_10.1.0/com.ibm.db2.luw.messages.sql.doc/doc/msql01477n.html]
Recovering inoperative summary tables [https://www.ibm.com/support/knowledgecenter/SSEPGG_10.1.0/com.ibm.db2.luw.admin.dbobj.doc/doc/t0005379.html]
User-Maintained Summary Tables [https://www.toadworld.com/platforms/ibmdb2/w/wiki/7410.user-maintained-summary-tables ]