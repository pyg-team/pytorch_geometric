Title: IBM PI08166: USING CSQUTIL WITH CONVERT TO LOAD DLQ MESSAGES FROM V701 ON V71 FAILS WITH RC 2119. - United States

Text:
z/os  A FIX IS AVAILABLE
Obtain the fix for this APAR.


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  The customer unloaded Messages from MQ V701 Dead Letter Queue
   and loaded then in MQ V71. They included the MQDEAD header and
   CCSID is 819 and the Encoding is 273 but it fails with RC2119.
   If they load the Messages into MQ V701 using CSQUTIL with
   convert and copy the message to a remote queue residing on MQ
   V71 and this works fine. If they use CSQUTIL without convert
   and send them to MQ V71, they get the conversion error.
   .
   The change team look it this problem and they can see the
   cause of the MQRC 2119. The problem is in CSQADED6 when it
   checks the result of invoking CSQAQCST to query the CCSID
   type.
   .
   This problem can result in the following when using CSQUDLQH:
   CSQU210I Message does not have a valid MQDLH
   
   
    
   
   

LOCAL FIX

PROBLEM SUMMARY
 *  ****************************************************************
   * USERS AFFECTED: All users of WebSphere MQ for z/OS Version 7 *
   *                 Release 1 Modification 0.                    *
   ****************************************************************
   * PROBLEM DESCRIPTION: A MQGET with MQGMO_CONVERT on a message *
   *                      with header MQDLH fails with RC 2119.   *
   ****************************************************************
   * RECOMMENDATION:                                              *
   ****************************************************************
   Messages were unloaded from a Dead Letter Queue and loaded onto
   a new queue.
   These messages have a CodedCharSetId (CCSID) of 819 and Encoding
   of 273.
   A MQGET with MQGMO_CONVERT and CCSID of 500 is issued against
   the messages and fails with RC 2119 (MQRC_NOT_CONVERTED).
   The problem lies in the module CSQADED6 where it incorrectly
   generates a conversion error if the CCSID is not a DBCS type.
   Additional Keywords: MQDEAD DLH
   
   
    
   
   

PROBLEM CONCLUSION
 *  CSQADED6 has been altered so it has the correct test for DBCS
   and does not fail the conversion.
   100Y
   CSQADED6
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   PI08166
   
   
 * REPORTED COMPONENT NAME
   WMQ Z/OS V7
   
   
 * REPORTED COMPONENT ID
   5655R3600
   
   
 * REPORTED RELEASE
   100
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2013-12-16
   
   
 * CLOSED DATE
   2014-01-28
   
   
 * LAST MODIFIED DATE
   2014-04-02
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
    UI14567
   
   

MODULES/MACROS
 *  CSQADED6
   
   
    
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   WMQ Z/OS V7
   
   
 * FIXED COMPONENT ID
   5655R3600
   
   

APPLICABLE COMPONENT LEVELS
 * R100 PSY UI14567 [HTTPS://WWW14.SOFTWARE.IBM.COM/WEBAPP/SET2/ORDERMEDIA/SHOPCART?PTFS=UI14567]
   UP14/03/04 P F403
   
   

FIX IS AVAILABLE
 * SELECT THE PTF APPROPRIATE FOR YOUR COMPONENT LEVEL. YOU WILL BE REQUIRED TO SIGN IN. DISTRIBUTION ON PHYSICAL MEDIA IS NOT AVAILABLE IN ALL COUNTRIES.