Title: IBM PM98294: UNABLE TO CHANGE APP AUTHENTICITY SETTING THROUGH CONSOLE IN CLUSTERED ENVIRONMENT. - United States

Text:
 SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  When the App Authenticity setting is changed for one server in
   a cluster, the same change cannot be made and saved in a second
   member of the cluster.  It appears that the change is made, but
   when 'Save' is selected, the setting reverts to its original
   value.
   
   
    
   
   

LOCAL FIX

PROBLEM SUMMARY
 *  ****************************************************************
   * USERS AFFECTED:                                              *
   * IBM Worklight and Mobile Foundation 5.0.6 through to 6.0.0   *
   * administrators with clustered environments.                  *
   ****************************************************************
   * PROBLEM DESCRIPTION:                                         *
   * In a clustered Worklight environment, deployment of          *
   * applications and adapters is made from one node and after    *
   * successfully deploying the artifact to that node, other      *
   * cluster nodes discover the change in deployed artifacts and  *
   * begin a synchronization process, synchronizing the new       *
   * artifact from the database into their file system and        *
   * in-memory cache.                                             *
   * If, during the synchronization task, requests are being made *
   * to the application or to the Worklight Console, the cache on *
   * the synchronizing node becomes obsolete.                     *
   * This has various possible affects on deployed artifacts, for *
   * example:                                                     *
   * * the application could get the default security test        *
   * instead of a user defined security test                      *
   * * direct update might fail                                   *
   * * difficulties redeploying an application environment that   *
   * previously failed to deploy                                  *
   * * difficulties removing an application environment, unless   *
   * the whole application is removed                             *
   *                                                              *
   * There is also an additional issue regarding the setting of   *
   * the authenticity mode for iOS and Android environments from  *
   * the console. This option is not synchronized between cluster *
   * nodes and so it needs to be performed on each and every      *
   * node. Changing the option on the second node (after changing *
   * it on first node,) by choosing another option in the combo   *
   * box in console and then pressing the Save button, does not   *
   * reflect properly and the change is ignored.                  *
   *                                                              *
   * During deployment of an iOS application environment          *
   * supporting push updates, Worklight updates the database with *
   * the location of the certificate in the file system.   For    *
   * this, an absolute (vs. relative) path is used and so other   *
   * nodes may not get a path that is relevant to them.  Because  *
   * the certificate cannot be found by the other node, the push  *
   * will fail.                                                   *
   ****************************************************************
   * RECOMMENDATION:                                              *
   * -                                                            *
   ****************************************************************
   
   
    
   
   

PROBLEM CONCLUSION
 *  The code was modified so that during the deployment /
   undeployment / redeployment / cluster synchronization tasks, the
   server will respond to all incoming requests with a 503: Service
   Unavailable until the task has finished. This means that during
   cluster synchronization (n-1) of the nodes will not be
   processing incoming requests (to either applciations or adapters
   or the Worklight Console). Clients should be advised to perform
   redeployment (for example application version upgrade) at times
   where the load on the cluster is smaller.
   
   When undeploying an application, Worklight will now also remove
   its identifier from the set of failed-to-deploy applications so
   that if this application failed redeployment previously, it can
   be retried from a clean state.
   
   If the authenticity state in the database is inconsistent with
   what is currently being shown on console screen, an attempt to
   change the value of the authenticity option will result in an
   update of the in-memory cache of the node without making a query
   to the database.
   
   Worklight will now use a path to the certificate relative to the
   widget-resources folder where all resources of the application
   are being placed during deployment.
   
   The fix for this APAR is currently targeted for fixpacks 5.0.6.2
   and 6.0.0.2.
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   PM98294
   
   
 * REPORTED COMPONENT NAME
   WORKLIGHT CONSU
   
   
 * REPORTED COMPONENT ID
   5725I4301
   
   
 * REPORTED RELEASE
   600
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2013-10-02
   
   
 * CLOSED DATE
   2014-01-30
   
   
 * LAST MODIFIED DATE
   2014-01-30
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

MODULES/MACROS
 *  UNKNOWN
   
   
    
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   WORKLIGHT CONSU
   
   
 * FIXED COMPONENT ID
   5725I4301
   
   

APPLICABLE COMPONENT LEVELS
 * R506 PSY
   UP
   
   
 * R600 PSY
   UP