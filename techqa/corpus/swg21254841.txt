Title: IBM Updating Java for Daylight Saving Time (DST) changes on IBM i platforms - United States

Text:
DST2007; i5/OS; Java; DST; Daylight Saving Time; tzupatch; nzdst07 FLASH (ALERT)

ABSTRACT
 Read this technote to understand the options for updating Java SDKs on IBM i platforms with Daylight Saving Time (DST) changes. 

CONTENT
DST changes and IBM i systems
#howi5Updating Java SDKs using a PTF
Updating Java SDKs using the tzupatch tool for IBM i 







 

DST changes and IBM i systems 

When DST changes are announced, Java applications that are sensitive to time and date information will need updating to ensure that all relevant time and date calculations are correct. To decide when to update your IBM i systems, read Guidance on Upgrading Java SDKs and JREs for Daylight Saving Time (DST) changes [http://www-1.ibm.com/support/docview.wss?rs=3068&context=SSNVBF&uid=swg21251761]

For your Java applications to work correctly with new DST updates, you must update both your operating system and your Java SDK and JRE. Information about updating the IBM i operating system is provided in Installing, upgrading, or deleting IBM i and related software [http://publib.boulder.ibm.com/infocenter/iseries/v7r1m0/topic/rzahc/rzahc1.htm].







Updating Java SDKs using a PTF 

The preferred way to update Java on IBM i is to use a Program Temporary Fix (PTF). You can find information about PTFs in Replacing Licensed Internal Code and IBM i of the same version and release [http://publib.boulder.ibm.com/infocenter/iseries/v7r1m0/topic/rzahc/upgradesameversion.htm]. 







Updating Java SDKs using the tzupatch tool for IBM i 

If you need to apply a fix quickly and do not want to interrupt your standard patching processes, you can use the tzupatch tool to update Java. The tzupatch tool for IBM i updates Java SDKs on IBM i with DST changes that correspond to the tzdata levels described in Olson time zone updates for Java JRE/SDK Service Refreshes for IBM products [https://www.ibm.com/developerworks/java/jdk/dst/olson_table.html]. 


The tzupatch tool updates the time zone data on the following environments: 


 * The IBMÂ® Technology for Java VM 
 * An up-to-date IBM i Classic VM (JDK 1.4 or higher) 
 * On V5R3, you must have at least Java Group PTF level #17 installed. To determine the group level on V5R3, use the command WRKPTFGRP SF99269. 
 * On V5R4, you must have at least Java Group PTF level #9 installed. To determine the group level on V5R4, use the commandWRKPTFGRP SF99291.


In all other cases, you must use a PTF to update your Java installation. 

Note: IBM SDK, Java 2 Technology Edition, Version 5.0 is no longer supported unless you have an extended support contract with IBM. 

Obtaining the tzupatch tool 

The tzupatch tool is included in the IBM Time Zone Update Utility for Java (JTZU) package that can be downloaded from the IBM Time Zone Update Utility for Java [http://www.ibm.com/developerworks/java/jdk/dst/jtzu.html] page. 

For a list of time zone updates included in the release, see Olson time zone updates for Java JRE/SDK Service Refreshes for IBM products [https://www.ibm.com/developerworks/java/jdk/dst/olson_table.html]. 

Using the tzupatch tool for IBM i 

On IBM i, each supported version of the Java SDK is installed in a unique system-wide location. The tzupatch tool will locate and update any supported IBM i VMs. 

Follow these steps to update your Java SDKs using tzupatch: 

1. Sign on as a system administrator with *ALLOBJ and *SECOFR authorities. 
2. Start an interactive QSH session using the STRQSH command from Command Entry. 
3. At the QSH command prompt, use the cd command to change to the directory containing <downloaded_file>, where <downloaded_file> is the file downloaded from the IBM Time Zone Update Utility for JavaTM [http://www.ibm.com/developerworks/java/jdk/dst/jtzu.html] download page. 
4. Type /usr/bin/jar -xf <downloaded_file> to extract the tool. 
5. Run tzupatch using the tzupatch.qsh command and follow the on-screen prompts. 

The tzupatch tool will pause and issue a warning message if it finds active Java applications on the system. Where possible, stop any jobs using Java before continuing with the update. If you continue, there is a risk that the applications will behave unexpectedly until they are stopped and restarted. 

Restoring changes made by the tzupatch tool 

The tzupatch tool makes a backup of the original time zone data before updating your SDK. The backup file is <dir>/<name>.jar_tzupatchbackup_tzdata<old_version>, where: 
 * <dir> is the tzupatch install directory 
 * <name> is either "core" or "resources" 
 * <old_version> is the version of the time zone data found before the update (for example, "2006q"). 


Follow these steps to restore the original time zone data level: 

1. Find the backup file for the change you want to revert; for example, *_tzupatchbackup_tzdata<old_version>. 
2. Remove the patched file in that directory ( core.jar, zi directory, or resources.jar). 
3. Rename the backup file to its original name ( core.jar, zi directory or resources.jar). 
 

Change History August 21, 2012 Updated links to IBM i information. March 8, 2010 Updated links to IBM i information. July 6, 2009 Corrected references to IBM i. May 27, 2009 Revised, updated, and links checked. June 2007 Approved and published.