Title: IBM IC77212: NOT LOGGED INITIALLY REMAINS ACTIVATED AFTER COLUMN DEFAULTS CHANGED - United States

Text:
z/os  FIXES ARE AVAILABLE
DB2 Version 9.7 Fix Pack 5 for Linux, UNIX, and Windows [http://www-01.ibm.com/support/docview.wss?uid=swg24031181]
DB2 Version 9.7 Fix Pack 6 for Linux, UNIX, and Windows [http://www-01.ibm.com/support/docview.wss?uid=swg24032754]
DB2 Version 9.7 Fix Pack 7 for Linux, UNIX, and Windows [http://www-01.ibm.com/support/docview.wss?uid=swg24033685]
DB2 Version 9.7 Fix Pack 8 for Linux, UNIX, and Windows [http://www-01.ibm.com/support/docview.wss?uid=swg24034634]
DB2 Version 9.7 Fix Pack 9 for Linux, UNIX, and Windows [http://www-01.ibm.com/support/docview.wss?uid=swg24036646]
DB2 Version 9.7 Fix Pack 9a for Linux, UNIX, and Windows [http://www-01.ibm.com/support/docview.wss?uid=swg24037559]
DB2 Version 9.7 Fix Pack 10 for Linux, UNIX, and Windows [http://www-01.ibm.com/support/docview.wss?uid=swg24038641]


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  If user-defined column defaults are altered while in a NOT
   LOGGED INITIALLY transaction, the NOT LOGGED INITIALLY
   (NLI) flag may be written to disk. Examples of such actions
   include:
   - adding a column with a user default
   - altering a column to include a user default
   - altering a column to remove a user default
   - dropping the last column in a table that included a user
   default
   
   In these situations, the NLI flag would be turned off
   in memory, allowing DB2 to operate normally. However, if the
   affected table's control block is flushed from memory (e.g.
   database was deactivated), the table's control information will
   be read from disk into memory. When the NLI flag becomes active
   in memory, DB2 will stop logging transactions related to the
   affected table. Other unexpected behaviour may occur due to the
   lack of logging.
   
   This flag can be reset to its proper value both in memory and on
   
   disk by performing a classic reorg on the table.
   
   To find if the NLI flag been written to disk for a table,
   use the DB2DART utility with the "/DD" parameter on page 0 of
   table with "/V YES".
   
   In the output, search for the heading "Record Type = Table
   Directory Record". Underneath, table directory flags similar to
   the one below can be found. The NLI flag is the sixth bit from
   the end. If it is set to "1" like the example below, then the
   table is affected by this APAR.
   
   Flags = x0000000106000024
      bit representation = 00000000 00000000 00000000 00000001
                           00000110 00000000 00000000 00100100
   
   
    
   
   

LOCAL FIX
 *  Perform classic reorg on the affected table. If the lack of
   logging is a concern, perform a backup.
   
   
    
   
   

PROBLEM SUMMARY
 *  ****************************************************************
   * USERS AFFECTED:                                              *
   * All                                                          *
   ****************************************************************
   * PROBLEM DESCRIPTION:                                         *
   * After a specific set of alter table commands, the NOT LOGGED *
   * INITIALLY flag could be erroneously set on disk, causing     *
   * erratic behaviour.                                           *
   ****************************************************************
   * RECOMMENDATION:                                              *
   * Upgrade to DB2 V9.7 Fix Pack 5.                              *
   ****************************************************************
   
   
    
   
   

PROBLEM CONCLUSION
 *  This problem was first fixed in DB2 V9.7 Fix Pack 5.
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   IC77212
   
   
 * REPORTED COMPONENT NAME
   DB2 FOR LUW
   
   
 * REPORTED COMPONENT ID
   DB2FORLUW
   
   
 * REPORTED RELEASE
   970
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2011-06-28
   
   
 * CLOSED DATE
   2012-01-19
   
   
 * LAST MODIFIED DATE
   2012-01-19
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
    IV02108 [http://www-01.ibm.com/support/docview.wss?uid=swg1IV02108]
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   DB2 FOR LUW
   
   
 * FIXED COMPONENT ID
   DB2FORLUW
   
   

APPLICABLE COMPONENT LEVELS
 * R970 PSN
   UP