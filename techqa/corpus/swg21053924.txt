Title: IBM MustGather: Crash on Windows - United States

Text:
MustGather; MustGather; MustGather; jdk; core; crash; user.dmp; autopd; auto pd; MustGatherDocument; wasrun TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 Your application server terminated without warning or a userdump is generated but you are not sure what data to collect. The following MustGather will assist you in collecting the critical data to troubleshoot issues with an IBM WebSphere Application Server crash on the Windows platform. 

ENVIRONMENT
Microsoft Windows Vista (SP1 or later)*
Microsoft Windows 7
Microsoft Windows 8
Microsoft Windows Server 2008
Microsoft Windows Server 2008 R2
Microsoft Windows Server 2012
Microsoft Windows Server 2012 R2
Microsoft Windows 10

NOTE: WebSphere Liberty Profile can use these same instructions if running with an IBM SDK. 


RESOLVING THE PROBLEM


Your application server terminated without warning or a userdump is generated but you are not sure what data to collect. The following MustGather will assist you in collecting the critical data to troubleshoot issues with an IBM WebSphere Application Server crash on the Windows platform.

COLLECTING DATA MANUALLY

List of Operating System versions compatible with these instructions
Microsoft Windows Server 2008
Microsoft Windows Server 2008 R2
Microsoft Windows Server 2012
Microsoft Windows Server 2012 R2

Additionally, these environments will work as well...
Microsoft Windows Vista (SP1 or later)
Microsoft Windows 7
Microsoft Windows 8
Microsoft Windows 10

If you are trying to generate dumps manually on Windows:
Generating Javacores and Userdumps Manually For Performance, Hang or High CPU Issues [http://www.IBM.com/support/docview.wss?rs=180&uid=swg21138203]


What if I'm using WebSphere Liberty Profile?
This document can be used with Liberty Profile, however locations of dump files (and server logs) will be different. Also, if you are not using an IBM SDK with your Liberty Profile, jextract will not be available. 


Configuring Full Core Dumps

If you already have a dump file, proceed to the next step "Locating the Core Dump", however if it's determined that the core dump is truncated or isn't a full dump, and there were no errors running jextract, you will need to follow this section's instructions.

Starting with Windows Server 2008 and Windows Vista with Service Pack 1 (SP1), Windows Error Reporting (WER) can be configured so that full user-mode dumps are collected and stored locally after a user-mode application crashes. 

Follow the below steps to configure your server to generate full dump on crash:


 * For WebSphere Application Server:
 *  Backup the Windows registry by following the steps in How to back up and restore the registry in Windows [http://support.microsoft.com/kb/322756/] [http://support.microsoft.com/kb/322756/].
   Edit the Windows registry and create the following key:
   HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\Windows Error Reporting\LocalDumps\java.exe
   Create a new DWORD and name it DumpType. Set the value to 2. 
 * 
 * 
 * setdumptype.reg
 * 
 * 
 *  [/support/docview.wss?uid=swg21053924&aid=2] [/support/docview.wss?uid=swg21053924&aid=1] 
 * 
 * 
 * 

Locating the Core Dump 
Assuming the dump file (core.DATESTAMP.TIMESTAMP.PID.COUNT.dmp) is complete and is not truncated, you can normally find the dump file in the profile root directory by default (certain JVM arguments and/or environment variables can alter the default location). 
 * <WAS_HOME>/profiles/<PROFILE_ROOT>/
 * 
 * 
 * 


Additionally, locate the javacore and any snap files which will be generated in a JVM crash. 
Javacores are snapshots of the JVM activity and are essential to troubleshooting these issues. These files should also be found, by default, in the profile's root directory. 


Processing the Core Dump 
It is critical that jextract is run against the system core. Jextract is located in <WAS_HOME>/java/jre/bin directory. Instructions for the execution of jextract can be found in this technote: 
 * "How to process an IBM SDK core dump with jextract"
 * 
 * http://www.ibm.com/support/docview.wss?uid=swg21577379


 * Can I continue if jextract fails?
   
 * 
 * 


Locating the server logs: 
Locate all the server logs from the WebSphere Application Server instance that crashed, by default they should be in this directory: 

<WAS_HOME>/profiles/<PROFILE_ROOT>/logs/<SERVER_NAME>/ 


Summary of all files to be uploaded 
Gather the following files:  * Server logs / native logs (SystemOut.log, SystemErr.log, native_stdout.log, native_stderr.log) 
 * All javacore*.txt files 
 * All snap* files 
 * *.zip generated by jextract (this will contain the dump file)


You can archive these files up (although the processed core dump may want to be sent separately). Follow the instructions in the link below for sending the MustGather data to IBM support. Please note that FTP/SFTP/FTPS is the best option for transferring large files, especially the processed core dump 

"Exchanging information with IBM Technical Support for problem determination" 
http://www-01.ibm.com/support/docview.wss?uid=swg21153852 [http://www-01.ibm.com/support/docview.wss?uid=swg21153852] 



For a listing of all technotes, downloads, and educational materials specific to Crash, search the WebSphere Application Server support site [http://www.ibm.com/software/webservers/appserv/was/support/] 

Related information 
Submitting information to IBM support [http://www.ibm.com/support/docview.wss?uid=swg21153852] 
Steps to getting support for WebSphere Application Server [http://www.ibm.com/developerworks/websphere/support/appserver_support.html] 
MustGather: Read first for WebSphere Application Server [http://www.ibm.com/support/docview.wss?uid=swg21145599] 
Troubleshooting guide for WebSphere Application Server [http://www.ibm.com/support/docview.wss?uid=swg27005324] 


EXCHANGING DATA WITH IBM SUPPORT
To diagnose or identify a problem, it is sometimes necessary to provide Technical Support with data and information from your system. In addition, Technical Support might also need to provide you with tools or utilities to be used in problem determination. You can submit files using one of following methods to help speed problem diagnosis: 

 * IBM Support Assistant (ISA) 
 * Service Request (SR)
 * E-mail 
 * FTP to the Enhanced Customer Data Repository (ECuRep)




Instructions for exchanging information with IBM Support [http://www.ibm.com/support/docview.wss?uid=swg21153852]

READ FIRST AND RELATED MUSTGATHERS
MustGather: Read first for WebSphere Application Server [http://www.ibm.com/support/docview.wss?uid=swg21145599]




 Hang / High CPU / Performance Problem [http://www.ibm.com/support/search.wss?tc=SSCMPB9&q=MustGatherDocument] Out of Memory Problem [http://www.ibm.com/support/search.wss?tc=SSCMPCY&q=MustGatherDocument] 

RELATED INFORMATION
 Recording your screen to share with IBM Support [https://www.ibm.com/developerworks/community/blogs/IBMElectronicSupport/entry/recording_your_screen_to_share_with_support?lang=en]






Cross reference information Segment Product Component Platform Version Edition Application Servers WebSphere Application Server - Express Hangs/performance degradation Windows 8.5, 8.0, 7.0 Application Servers Runtimes for Java Technology Java SDK Windows