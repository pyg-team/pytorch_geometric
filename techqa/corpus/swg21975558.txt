Title: IBM Lotus Protector (version 2.8.3) - import SSL certificates and keys in PEM format into NSS  database - United States

Text:
 TECHNOTE (TROUBLESHOOTING)

PROBLEM
In order to support TLS 1.1 and 1.2 there was an update for the web-ui installed that re-configures Apache2 to use the module mod_nss instead of mod_ssl for HTTPS encryption. 

The NSS libraries do not use certificate and key files as Openssl does. The certificates and private key have to be converted and imported into the NSS database. The article shows the commands to convert and import existing certificates and keys. 

 NOTE: the install scripts for the new web-ui package does the required steps automatically. You only need to do the steps below 

- if you were using the automatically, selfsigned certificates and you want to switch now to signed certificates 

- if you have to update your certificates because the old ones did expire

Firmware Version 2.8.3


RESOLVING THE PROBLEM
SSH to the Protector system (log in as 'root'). 


We assume that you have the certificate as /etc/apache2/ssl.crt/server.crt and the private key as /etc/apache2/ssl.key/server.key. If the files are somewhere you will have to modify the command line accordingly.

openssl pkcs12 -export -in /etc/apache2/ssl.crt/server.crt -inkey /etc/apache2/ssl.key/server.key -out /tmp/server.p12 -name LMI-Cert -password pass:

certutil -D -d /etc/apache2/mod_nss.d/ -n LMI-Cert

pk12util -i /tmp/server.p12 -d /etc/apache2/mod_nss.d -W "" 

If you want to show the certifcate that was imported as LMI-Cert to the NSS database run the following command.

certutil -L -d /etc/apache2/mod_nss.d -n "LMI-Cert"


[/support/docview.wss?uid=swg21975558&aid=1] [/support/docview.wss?uid=swg21975558&aid=1]