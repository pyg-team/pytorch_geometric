Title: IBM PM18568: AEY9 ABEND WHEN PLTSD PROGRAM CIUSTOP STOPS THE COLLECTION      FUNCTION - United States

Text:
z/os  A FIX IS AVAILABLE
Obtain the fix for this APAR.


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  CINB attempts to connect to DB2 when the DB2 connection is
   terminated. CINB ABENDs after duplicate attempt to start.
   An ABEND AEY9 occurs when the collector is stopped automatically
   as a result of CICS region termination if the DB2 connection is
   stopped before the first PLTSD program (CIUSTOP) is executed.
   An ABEND IUYG occurs when CIUCINB1 links to CIUCINB2, but
   CIUCINB2 was started by PLT before this link.
   .
   Additional Symptom(s) Search Keyword(s): abendaey9 abendiuyg
   KIXREVWJB
   
   
    
   
   

LOCAL FIX

PROBLEM SUMMARY
 *  ****************************************************************
   * USERS AFFECTED: All CICS IA Version 3.1 users.               *
   ****************************************************************
   * PROBLEM DESCRIPTION: During CICS shutdown, when CICS IA is   *
   *                      being stopped an ABEND AEY9 can occur   *
   *                      if the CICS DB2 connection is not       *
   *                      active when CIUCINB2 attepts to send    *
   *                      some SQL request.                       *
   *                      This error in the CINB transaction      *
   *                      causes an abend IUZF in the CICS IA     *
   *                      shutdown process.                       *
   *                                                              *
   *                      An abend IUZF can also be caused as     *
   *                      follows:                                *
   *                      When the CICS IA collector starts, the  *
   *                      transaction CINB is started and         *
   *                      program CIUCINB1 runs, which monitors   *
   *                      whether CICS is in an active state.     *
   *                      If it finds that CICS is shutting down  *
   *                      it will link to program CIUCINB2 to     *
   *                      save data from the CICS IA dataspace    *
   *                      into the CICS IA VSAM files. However,   *
   *                      at CICS shutdown from the PLTSD the     *
   *                      CINT transaction with parameter 'STOP'  *
   *                      is initiated, which also links to       *
   *                      CIUCINB2.  If on checking it finds that *
   *                      CIUCINB2 is already active it issues    *
   *                      message CIU3312S and abends IUZF.       *
   ****************************************************************
   * RECOMMENDATION: Apply the PTF.                               *
   ****************************************************************
   During CICS shutdown the CICS IA transaction CINB does not
   attempt to detect whether the CICS region is connected to DB2.
   
   However, some additional information must be obtained from DB2
   when records are saved to the CICS IA VSAM files, which means
   that if the CICS region is not connected to DB2, an error occurs
   and the following messages are issued with an abend IUZF:
   
   CIU3305I mm/dd/yy hh:mm:ss regionname CINB save started -
            because of STOP
   CIU3303S mm/dd/yy hh:mm:ss regionname CINB has abended AEY9 in
            program CIUCINB2
   CIU2214I mm/dd/yy hh:mm:ss regionname Collector is now STOPPED
   
   Another error might occur if a user runs the CINB transaction at
   the same time as CICS IA is shutting down during the first phase
   of PLT shutdown.
   If the timing is such that CINB detects the shutdown before the
   request from the PLT then you will also see the following error
   messages:
   
   CIU2206S mm/dd/yy hh:mm:ss regionname CICS EXTRACT EXIT program
            CIUXDUMM failed RESP=63 RCODE=80020000
   CIU2218S mm/dd/yy hh:mm:ss regionname CINT has abended IUZF in
            program CIUA120C
   
   
    
   
   

PROBLEM CONCLUSION
 *  The transaction CINB has been changed so that program CIUCINB2
   does now check whether the CICS DB2 connection is active.
   If the connection to DB2 is not active, message CIU2208E is
   issued and the data is not saved.
   
   CIU2208E mm/dd/yy hh:mm:ss regionname CICS region is not
            connected to DB2
   
   Message CIU3312S has been replaced by a warning message 3307
   which does not issue any abends. Transaction CINB now forces a
   save to VSAM followed by the warning message and then returns.
   By removing the abend we do not destroy the GWA so the CIUSTOP
   can continue.
   
   
    
   
   

TEMPORARY FIX
 *  *********
   * HIPER *
   *********
   THE RECOMMENDATION IS TO PLACE THE CIUSTOP PROGRAM FIRST
   IN THE LIST OF PROGRAMS IN THE DFHPLT STOP PROGRAM BEFORE
   THE DFHDELIM OPTION.
   USERMOD WAS SENT TO CUSTOMER.
   
   
    
   
   

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   PM18568
   
   
 * REPORTED COMPONENT NAME
   CICS INTER ANAL
   
   
 * REPORTED COMPONENT ID
   5655U8600
   
   
 * REPORTED RELEASE
   310
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   YesHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2010-07-15
   
   
 * CLOSED DATE
   2010-08-18
   
   
 * LAST MODIFIED DATE
   2010-09-02
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
    UK59800
   
   

MODULES/MACROS
 *     CIUCINB1 CIUCINB2
   
   
    
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   CICS INTER ANAL
   
   
 * FIXED COMPONENT ID
   5655U8600
   
   

APPLICABLE COMPONENT LEVELS
 * R310 PSY UK59800 [HTTPS://WWW14.SOFTWARE.IBM.COM/WEBAPP/SET2/ORDERMEDIA/SHOPCART?PTFS=UK59800]
   UP10/08/28 P F008
   
   

FIX IS AVAILABLE
 * SELECT THE PTF APPROPRIATE FOR YOUR COMPONENT LEVEL. YOU WILL BE REQUIRED TO SIGN IN. DISTRIBUTION ON PHYSICAL MEDIA IS NOT AVAILABLE IN ALL COUNTRIES.