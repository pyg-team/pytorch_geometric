Title: IBM PI64414: VALIDATE-CONTEXT-ROOT FAILS IF EMPTY URL MAPPINGS EXIST - United States

Text:
  A FIX IS AVAILABLE
Fixes integrated in WebSphere Portal 8.5.0.0 Combined Cumulative Fixes [http://www-01.ibm.com/support/docview.wss?uid=swg24037786]


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  Configuration task "validate-context-root" fails if URL
   mappings exist that do not have a target defined.
   
   [wsadmin] WASX7015E: Exception running command:
   "execfile("/opt/IBM/WebSphere/PortalServer/pzn.ext/wp.pathcheck
   .impl/config/was/PathConflictCheck.py")"; exception
   information:
   [wsadmin] com.ibm.bsf.BSFException: exception from Jython:
   [wsadmin] Traceback (innermost last):
   [wsadmin]   File "<input>", line 1, in ?
   [wsadmin]   File "/opt/IBM/WebSphere/PortalServer/pzn.ext/wp
   .pathcheck.impl/config/was/PathConflictCheck.py", line 26, in ?
   [wsadmin] java.rmi.RemoteException: EJPEB0004E: An unknown
   exception occurred: PortalExecuteCommandImpl.execute(input,
   output); nested exception is:
   [wsadmin]     com.ibm.wps.command.CommandFailedException:
   EJPEB0004E: An unknown exception occurred:
   PortalExecuteCommandImpl.execute(input, output)
   [wsadmin] WrappedException is: java.io.IOException: Server
   returned HTTP response code: 400 for URL:
   http://localhost:10039/wps/mycontenthandler/!ut/p/digest!9EvIZhB
   0_v3AvTI9dyZ2IQ/path-check/path:*?WpsPersonalizedHome=scheiben&W [http://localhost:10039/wps/mycontenthandler/!ut/p/digest!9EvIZhB0_v3AvTI9dyZ2IQ/path-check/path:*?WpsPersonalizedHome=scheiben&W]
   psDefaultHome=salat&WpsContextRoot=gurken&WsrpContextRoot=gurken
   /wsrp
   [wsadmin]     at com.ibm.wps.scripting.server.WPScriptMBean
   .doThrowRemoteException(WPScriptMBean.java:1192)
   [wsadmin]     at com.ibm.wps.scripting.server.WPScriptMBean
   .executeCommand(WPScriptMBean.java:915)
   [wsadmin]     at sun.reflect.NativeMethodAccessorImpl
   .invoke0(Native Method)
   [...]
   
   The server log file, SystemOut.log, shows this message:
   
   [6/16/16 15:57:03:383 EDT] 000005bb ExceptionLogg W
   com.ibm.wps.logging.ExceptionLogger logThrowable An exception
   occurred: [EJCBD0021E: The URI [path-check:path:*] and
   parameters [['WpsContextRoot'=['gurken'],
   'WpsDefaultHome'=['salat'], 'WpsPersonalizedHome'=['scheiben'],
   'WsrpContextRoot'=['gurken/wsrp'],
   'digest'=['9EvIZhB0_v3AvTI9dyZ2IQ'], 'pragma'=['no-cache']]]
   could not be processed: []]. Enable traces for
   [com.ibm.wps.logging.ExceptionLogger=all] to see the exception
   stack trace.
   
   When enabling trace "com.ibm.wps.logging.ExceptionLogger=all"
   and executing the configuration task "validate-context-root"
   again, trace file "trace.log" shows a NullPointerException as
   the root cause:
   
   [6/16/16 16:01:45:079 EDT] 000005bb ExceptionLogg 2
   com.ibm.wps.logging.ExceptionLogger logThrowable Exception
   com.ibm.wps.resolver.servlet.exceptions
   .ContentHandlerIOException: EJCBD0021E: The URI
   [path-check:path:*] and parameters
   [['WpsContextRoot'=['gurken'], 'WpsDefaultHome'=['salat'],
   'WpsPersonalizedHome'=['scheiben'],
   'WsrpContextRoot'=['gurken/wsrp'],
   'digest'=['9EvIZhB0_v3AvTI9dyZ2IQ'], 'pragma'=['no-cache']]]
   could not be processed: []
   at com.ibm.wps.resolver.servlet.ContentHandlerDownload
   .doFilter(ContentHandlerDownload.java:744)
   at com.ibm.wps.resolver.servlet.AbstractFilter
   .doFilter(AbstractFilter.java:103)
   at com.ibm.wps.resolver.servlet.FilterChainElement
   .doFilter(FilterChainElement.java:61)
   at com.ibm.wps.resolver.servlet.ContentHandlerUpload
   .doFilter(ContentHandlerUpload.java:397)
   [...]
   Caused by: java.io.IOException: java.lang.NullPointerException
   at com.ibm.wps.datasource.pathcheck.PathCheckDataSource
   .write(PathCheckDataSource.java:353)
   at com.ibm.wps.resolver.data.ByteJsonDataSource
   .write(ByteJsonDataSource.java:152)
   at com.ibm.wps.resolver.data.AbstractByteCharDataSource
   .write(AbstractByteCharDataSource.java:307)
   at com.ibm.wps.resolver.servlet.ContentHandlerDownload
   .handleDownload(ContentHandlerDownload.java:1685)
   at com.ibm.wps.resolver.servlet.ContentHandlerDownload
   .handleDownloadAndDispose(ContentHandlerDownload.java:1902)
   at com.ibm.wps.resolver.servlet.ContentHandlerDownload
   .handleDownload(ContentHandlerDownload.java:1816)
   at com.ibm.wps.resolver.servlet.ContentHandlerDownload
   .handleDownload(ContentHandlerDownload.java:1732)
   at com.ibm.wps.resolver.servlet.ContentHandlerDownload
   .doFilter(ContentHandlerDownload.java:740)
   ... 88 more
   Caused by: java.lang.NullPointerException
   at com.ibm.wps.service.pathcheck.provider.urlmapping
   .URLMappingPathCheckProviderImpl
   .getAllPathInfos(URLMappingPathCheckProviderImpl.java:100)
   at com.ibm.wps.service.pathcheck.PathCheckServiceImpl
   .getAllPathInfos(PathCheckServiceImpl.java:113)
   at com.ibm.wps.datasource.pathcheck.PathCheckDataSource
   .write(PathCheckDataSource.java:278)
   ... 95 more
   
   
    
   
   

LOCAL FIX
 *  Specify target resources for all URL mappings or remove empty
   URL mappings.
   
   
    
   
   

PROBLEM SUMMARY
 *  A code fix for this issue is integrated into the WebSphere
   Portal & WCM Combined Cumulative Fix 11 (PI64037) for Portal
   8.5.0.0 available from Fix Central:
   
   http://www-933.ibm.com/support/fixcentral/swg/selectFixes?parent
   =ibm/WebSphere&product=ibm/WebSphere/WebSphere+Portal&release=Al [http://www-933.ibm.com/support/fixcentral/swg/selectFixes?parent=ibm/WebSphere&product=ibm/WebSphere/WebSphere+Portal&release=Al]
   l&platform=All&function=aparId&apars=PI64037
   
   
    
   
   

PROBLEM CONCLUSION
 *  Code has been fixed accordingly.
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   PI64414
   
   
 * REPORTED COMPONENT NAME
   WEBSPHERE PORTA
   
   
 * REPORTED COMPONENT ID
   5724E7600
   
   
 * REPORTED RELEASE
   850
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt / Xsystem
   
   
 * SUBMITTED DATE
   2016-06-16
   
   
 * CLOSED DATE
   2016-10-20
   
   
 * LAST MODIFIED DATE
   2016-10-24
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   WEBSPHERE PORTA
   
   
 * FIXED COMPONENT ID
   5724E7600
   
   

APPLICABLE COMPONENT LEVELS
 * R850 PSY
   UP