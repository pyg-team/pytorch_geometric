Title: IBM IV46157: NATIVE OOM ON AIX 64BIT PLATFORM WHEN COMPRESSED REFERENCES ENAB LED - United States

Text:
 SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  Error Message: The JVM failed with Native OOM exception on AIX
   64bit platform when -Xcompressedrefs enabled.
   .
   To verify the NOOM is caused by this issue, confirm that the
   javacore reports 'native memory exhaustion', then run `dbx
   ${PATH_TO_JAVA} ${PATH_TO_core.dmp}`, run the `coremap` command,
   and verify that most memory segments under 0x100000000 only
   occupy 8MB. For example:
   
   (dbx) coremap
   ...
   Mapping: Shared Memory (size=0x800000)
      from (address): 0x50000000 - 0x50800000
   Mapping: Shared Memory (size=0x800000)
      from (address): 0x60000000 - 0x60800000
   Mapping: Shared Memory (size=0x800000)
      from (address): 0x70000000 - 0x70800000
   Mapping: Shared Memory (size=0x800000)
      from (address): 0x80000000 - 0x80800000
   Mapping: Shared Memory (size=0x800000)
      from (address): 0x90000000 - 0x90800000
   Mapping: Shared Memory (size=0x800000)
      from (address): 0xa0000000 - 0xa0800000
   Mapping: Shared Memory (size=0x800000)
      from (address): 0xb0000000 - 0xb0800000
   Mapping: Shared Memory (size=0x800000)
      from (address): 0xc0000000 - 0xc0800000
   Mapping: Shared Memory (size=0x800000)
      from (address): 0xd0000000 - 0xd0800000
   Mapping: Shared Memory (size=0x800000)
      from (address): 0xe0000000 - 0xe0800000
   Mapping: Shared Memory (size=0x800000)
      from (address): 0xf0000000 - 0xf0800000
   
   In this example, segments 0x5 through 0xf only show shared
   memory regions of size 0x800000 (8MB).
   
   If running dbx on a different system than where the core.dmp was
   produced, first run java/jre/bin/jextract, send the resulting
   zip to IBM support or the target system, unzip the file on the
   target system, and run `dbx -p /=./ ./${PATH_TO_JAVA}
   ./${PATH_TO_core.dmp}`. Note that this analysis may be possible
   even if the core dump is truncated and jextract/dbx report
   truncation warnings.
   
   
    
   
   

LOCAL FIX
 *  This issue can be worked around by disabling the compressed
   references by removing -Xcompressedrefs from the command line
   options or specifying -Xnocompressedrefs option at the end of
   the JVM options on the command line.
   
   
    
   
   

PROBLEM SUMMARY
 *  The problem is caused when Xcompressedrefs enabled on AIX 64bit
   platform, JVM memory management routines did not take into
   account AIX Memory management limitations.
   
   
    
   
   

PROBLEM CONCLUSION
 *  This defect will be fixed in:
   6.0.1 SR7
   7.0.0 SR6
   6.0.0 SR15
   .
   The JVM has been updated to consider the AIX memory management
   limitations while allocating memory segments within the JVM.
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   IV46157
   
   
 * REPORTED COMPONENT NAME
   J9 COMMON CODE
   
   
 * REPORTED COMPONENT ID
   620700127
   
   
 * REPORTED RELEASE
   260
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2013-07-25
   
   
 * CLOSED DATE
   2013-08-07
   
   
 * LAST MODIFIED DATE
   2014-12-19
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   J9 COMMON CODE
   
   
 * FIXED COMPONENT ID
   620700127
   
   

APPLICABLE COMPONENT LEVELS
 * R260 PSY
   UP
   
   
 * R600 PSY
   UP