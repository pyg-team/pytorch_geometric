Title: IBM (参考)DWC 9.x と TWS 9.x 間の SSO を構成する方法 - United States

Text:
IWS; TWS; SSO:シングルサインオン; DWC 技術情報(FAQS)

質問
 Dynamic Workload Console (DWC) と Tivoli Workload Scheduler (TWS) エンジンとの間のシングル･サイン･オン (SSO) を構成する手順が知りたい。


回答
DWC v9.2 と TWS v9.2 Maseter Domain Manager (MDM) との間のシングル･サイン･オンを構成するためには、以下の手順を実行します。
1. 両方の WebSphere インスタンスに対し、WebSphere 構成のバックアップを作成します。

root として作業を行います。

a. [TWS] で以下を実行します。

cd /opt/IBM/TWA/wastools; bash ./backupConfig.sh -nostop

DWC (b.) に関する注意: これ以降の手順を実行する前に、<TWAUI_Home>/wastools/updateWas.sh スクリプトを実行し、WebSphere の管理ユーザー (tws_jazz など) とそのパスワードで soap.client.props ファイルを更新してください(まだ行っていない場合)。これにより、backupConfig.sh や stopServer.sh といったスクリプトを実行するときにユーザーの資格情報をコマンドラインで入力する必要がなくなります。

例：

cd /opt/IBM/TWAUI/wastools
./updateWas.sh -user tws_jazz -password pa55w0rd

b. [DWC] で以下を実行します。

cd /opt/IBM/TWAUI/wastools; bash ./backupConfig.sh -nostop


2. 統合レジストリーの「レルム名」を、DWC の WebSphere と TWS のWebSphere の両方について更新して同じ値にします。

a. [TWS] で以下を実行します。
Websphere 管理コンソールの URL にアクセスします。

https://<hostname>:31124/ibm/console

(<hostname> は TWS がインストールされているホストの実際のホスト名です)

twsuser としてログインします
「セキュリティー」 -> 「グローバル・セキュリティー」の順に選択します。
[構成] ボタンを選択します。
「* レルム名」フィールドを必要な値に更新します (TWSRealm など)。
[適用] を選択します。
パネル上部にあるメッセージ･ボックスで「保存」を選択します。


b. [DWC]

Websphere 管理コンソールの URL にアクセスします。

https://<hostname>:16316/ibm/console

(<hostname> は DWC がインストールされているホストの実際のホスト名です)

tws_jazz としてログインします。

* ログインしたら、a.で実施した手順に進みます。
** 「* レルム名」フィールドには、2a で指定した値 (TWSRealm) を入力する必要があります。

3. LTPA 鍵の自動生成を無効にします。

a. [TWS] で以下を実行します。

WebSphere 管理コンソールの URL にアクセスします。：

https://<hostname>:31124/ibm/console

twsuser としてログインします。
「セキュリティー」 -> 「グローバル・セキュリティー」 -> 「LTPA」の順に選択します。
青色の文字の「鍵セット・グループ」を選択します。
「NodeLTPAKeySetGroup 」という行で、「自動的に鍵を作成」という列の値を確認します。
値が「false」の場合、ここで行うことは何もありません。
値が「true」の場合、「NodeLTPAKeySetGroup」を選択します。
「鍵の自動作成」というボックスのチェックマークを外します。
パネルの上部にある [適用] を選択します。
上部のメッセージ･テキスト･ボックスで「保存」を選択します。

b. [DWC] で以下の作業を行います。

WebSphere 管理コンソールの URL にアクセスします。

https://<hostname>:16316/ibm/console

tws_jazz としてログインします

* ログインしたら、a.で実行した手順に進みます。

4. TWS と DWC の両方の WebSphere を再起動します。

a. [TWS] で以下を実行します。

twsuser として: /opt/IBM/TWA/wastools/stopWas.sh
twsuser として: /opt/IBM/TWA/wastools/startWas.sh

b. [DWC] で以下を実行します。

root として: /opt/IBM/JazzSM/profile/bin/stopServer.sh server1
root として: /opt/IBM/JazzSM/profile/bin/startServer.sh server1

注: startServer.sh スクリプトは soap.client.props からユーザー tws_jazz とパスワードを取り出します。

5. 新しい LTPA 鍵のエクスポートおよびインポートを行います。

a. [DWC] で以下を実行します。

WebSphere 管理コンソールの URL にアクセスします。

https://<hostname>:16316/ibm/console

tws_jazz としてログインします。
「セキュリティー」 -> 「グローバル・セキュリティー」 -> 「LTPA」の順に選択します。
「クロスセル・シングル・サインオン」というセクションで、新しいパスワードを入力します。
パスワードの確認入力を行います。
パスを付けて新しいファイル名 (/tmp/ltpakey など) を入力します。
「鍵のエクスポート」を選択します。
メッセージ･テキスト・ボックスの上部にある「保存」を選択します。

b. [TWS] で以下を実行します。

手順 5a.で エクスポートしたLTPA鍵ファイルを TWS Master サーバーにコピーします。
WebSphere 管理コンソールの URL にアクセスします。：

https://<hostname>:31124/ibm/console

twsuser としてログインします。

注:
上記の a. と同じ手順を行いますが、「鍵のエクスポート」ではなく「鍵のインポート」を選択します。
これで、ユーザーの資格情報 (userid とパスワード) が、接続要求とともに当該のエンジンに自動的に転送される状態になります。


関連文書：
原文：
(英文)How to configure SSO between DWC 9.x and TWS 9.x [http://www-01.ibm.com/support/docview.wss?uid=swg21883467]
この文書は、米国 IBM 社の資料を翻訳した参考文書です。日本語環境での検証は行っておりませんのでご注意ください。翻訳元の文書は、関連文書のリンクよりご参照ください。