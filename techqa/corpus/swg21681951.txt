Title: IBM DB2 monitoring agent does not start with the instance user - United States

Text:
5724B96DOTR; tivoli; ibm; itm TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 ITCAM monitoring agent for DB2 fails to start as DB2 instance user. 

SYMPTOM
DB2 monitoring agent instance is configured to monitor db2inst1. Execute following command to start the agent: 

su - db2inst1 -c "/opt/IBM/ITM/bin/itmcmd agent -o db2inst1 start ud" 

Run following command to display running agents. 

/opt/IBM/ITM/bin/cinfo -r 

The output does not list the DB2 agent instance.


CAUSE
DB2 instance user does not have required permission to the files in ITM home directory. 

For example, tivoli:staff user owns the ITM directory. All agents in the ITM home are started by the 'tivoli' user. The DB2 agent is started as 'db2inst1' user, which does not have permission to the files to start successfully.


ENVIRONMENT
UNIX, LINUX



RESOLVING THE PROBLEM
To resolve the issue, use secureMain tool to grant permission to a common user group as described below. 

For example, assume that the ITM home directory is owned by 'tivoli' user and that DB2 agent needs to start as 'db2inst1' user. 

1) Create an operating system user group, for example, 'itmgrp'. Add 'db2inst1' and 'tivoli' users to this group. 

2) Run following command to grant access to the common user group: 
ITM_HOME/bin/secureMain -g itmgrp lock 

Note: this command is known to take a long time (up to one hour) to complete in some environments. 

3) Start the DB2 monitoring agent as the DB2 instance user. The agent should start successfully.