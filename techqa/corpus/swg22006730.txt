Title: IBM Integration Bus failure to load dtxwmqi.lil file when deploying message flow containing WTX Map Node due to incompatible MQ ICU version - United States

Text:
 TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 IBM Integration Bus (IIB) failure to load IBM Transformation Extender (ITX) / IBM WebSphere Transformation Extender (WTX) dtxwmqi.lil file when deploying message flow containing WTX Map Node due to incompatible MQ ICU version 

SYMPTOM
Deployment of a message flow containing a WTX Map node fails with the following error:

BIP2087E: Broker 'broker_name' was unable to process the internal configuration message.

The entire internal configuration message failed to be processed successfully.

Use the messages following this message to determine the reasons for the failure. If the problem cannot be resolved after reviewing these messages, contact your IBM Support center. Enabling service trace may help determine the cause of the failure.

BIP4041E: Execution group 'default' received an administration request that encountered an exception.

While attempting to process an administration request, an exception was encountered. No updates have been made to the configuration of the execution group.

Review related error messages to determine why the administration request failed.

BIP2241E: A Loadable Implementation Library (.lil, .jar, or .par) is not found for message flow node type 'DTXPlugInNode' in message flow 'test'.

The broker received an instruction to create a message flow node of type 'DTXPlugInNode', in message flow 'test'. The broker cannot create nodes of this type because an implementation library for this node type does not exist in the LIL path.

Ensure that the LIL path is correct, and that it contains all the required node implementation libraries, including those supplied by IBM. The node name is case sensitive, therefore check that the toolkit and runtime names match. If the broker is trying to create a node type that ends in 'NodeNode', ensure that when the node was registered with the toolkit the name registered did not end in 'Node'.

Also ensure that you have saved the message flow, and any nested message flows. Redeploy the new configuration to the broker, specifying a complete configuration. If the LIL file is correct, check that the message node type is correct.

BIP2871I: The request made by user 'user_name' to 'deploy' the resource '<path>/testproject.generated.bar' of type 'BAR' on parent 'default' of type 'ExecutionGroup' has the status of 'FAILED'.


CAUSE
The MQ ICU library version is the same library name as the ITX / WTX ICU library version but the MQ version is incompatible and cannot be loaded by the dtxwmqi.lil file.

ENVIRONMENT
The problem has been observed on Windows with IIB 9.0.0.7 and 9.0.0.8 with MQ version 8.0.0.4 with WTX 8.4.1.x. The problem may also occur IIB 10.0 and ITX 9.0.0.x.

DIAGNOSING THE PROBLEM
The dependency walker utility may used on Windows to determine if the icu*.dll fails to loaded when opening the dtxwmqi.lil file.

RESOLVING THE PROBLEM
The TX 9.0.0.x version is using a different icu*.dll version than IIB 10.0 and MQ 8.0 which avoids the problem.

We have determined that the MQ icu*.dll files could be removed to allow the TX icu*.dll to be used.




The following is a work around that would avoid the problem by removing the icu*.dll files that are preventing the load of the dtxwmqi.lil file.

1) Stop IIB Broker (and MQ if needed).

2) Under the MQ installation move the icu*.dll files to a different directory:

cd C:\Program Files\IBM\WebSphere MQ\bin64
mkdir temp
copy icu* temp
del icu*

3) Start IIB Broker (and MQ if stopped)