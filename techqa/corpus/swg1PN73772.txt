Title: IBM PN73772: INTERMITTENT SMTP MAIL DELIVERY PROBLEMS WITH EZA5336E(RC4) AND EZA5334E(RC53) SPOOL ALLOCATION ERRORS. - United States

Text:
z/os  A FIX IS AVAILABLE
Obtain the fix for this APAR.


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  Spool allocation error (EZA5336E RC4 Reason Code 046C) when
   SMTP tries to send the Batch SMTP log file back to the user
   that originally requested that an BSMTP file be sent.  SMTP
   automatically returns the log when 'VERB ON' is one of the
   commands in the Batch SMTP file.  SMTP doesn't perform all the
   necessary validity checks on the FROM address.  He assumes that
   it is a valid NJE nodeid.  The allocation error occurs when the
   return destination doesn't conform to the NJE node name
   convention.  The destination used by DeliverSpoolFile (SMTPQUEU)
   is obtained from addrstring which is a TCP/IP address.
   So the batch reply fails spool allocation.
   
   
    
   
   

LOCAL FIX

PROBLEM SUMMARY
 *  ****************************************************************
   * USERS AFFECTED: All SMTP users.                              *
   ****************************************************************
   * PROBLEM DESCRIPTION: Problem is associated with the use of   *
   *                      the VERB command and not using TSO      *
   *                      XMIT command to interface with SMTP.    *
   ****************************************************************
   * RECOMMENDATION: If the VERB command is to be used then it    *
   *                 is not recommended that SMTP commands are    *
   *                 written directly to the JES spool associated *
   *                 with the SMTP address space. The SMTP        *
   *                 commands should be sent to SMTP using the    *
   *                 TSO XMIT command.                            *
   ****************************************************************
   When interfacing with MVS SMTP use the TSO XMIT command to
   ensure that the origin information is correct.
   
   
    
   
   

PROBLEM CONCLUSION
 *  - - -
     A FUTURE UPDATE OF THE BOOK WILL REFLECT THE CHANGE:
                                 - - -
   ****************************************************************
   *                                                              *
   * TITLE: IBM TCP/IP FOR MVS: USER GUIDE (SC31-7136-00)         *
   *                                                              *
   * PAGES: 189                                                   *
   * CHAPTER: 4          TOPIC: SENDING ELECTRONIC MAIL USING SMTP*
   * PARAGRAPH: 3        FIGURE:                                  *
   * Under Interface 2 add the following paragraph:               *
   *                                                              *
   * This interface can be used to send mail only. There will be  *
   * spool problems with this interface if the VERB command is    *
   * used (see reference VERB command).                           *
   *                                                              *
   * New paragraph:                                               *
   *                                                              *
   * IBM TCP/IP for MVS provides a SMTP gateway function, which   *
   * can be used to transfer electronic mail between an NJE       *
   * network and a TCP/IP network.                                *
   * (Include from IBM TCP/IP V3R1 Implementation, page 194,      *
   *  figure 90 SMTP Gateway Overview)                            *
   *                                                              *
   * PAGES: 206                                                   *
   * CHAPTER: 4          TOPIC: "VERB Command                   " *
   * PARAGRAPH: 2        FIGURE:                                  *
   * Under the ON Parameter add the following paragraph:          *
   *                                                              *
   * To avoid receiving spool errors, the origination point must  *
   * be a valid JES user and node on the SMTP sending system.     *
   * The origination point information is taken from the TSO      *
   * XMIT (transmit) command headers.                             *
   ****************************************************************
                                 - - -
   ****************************************************************
   *                                                              *
   * TITLE: IBM TCP/IP FOR MVS: Diagnosis Guide (LY43-0105-00)    *
   *                                                              *
   * PAGES: 298                                                   *
   * CHAPTER: 11         TOPIC: "Diagnosing SMTP Problems       " *
   * PARAGRAPH:          FIGURE:                                  *
   * Add the following topic:                                     *
   * Spooling Problems                                            *
   *                                                              *
   * Spooling problems can occur when the VERB command (reference *
   * the User's Guide) is being used and the origination          *
   * information is either missing or invalid. This command       *
   * requires the originator to have a valid JES user ID and node *
   * ID on the SMTP sending system. The originator information    *
   * is taken from the TSO XMIT (Transmit) command headers.       *
   ****************************************************************
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   PN73772
   
   
 * REPORTED COMPONENT NAME
   TCP/IP V3 MVS
   
   
 * REPORTED COMPONENT ID
   5655HAL00
   
   
 * REPORTED RELEASE
   310
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt / Xsystem
   
   
 * SUBMITTED DATE
   1995-07-20
   
   
 * CLOSED DATE
   1995-11-29
   
   
 * LAST MODIFIED DATE
   1996-01-01
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
    UN84858
   
   

MODULES/MACROS
 *  EZABB01Z EZABB020 EZABB024
   
   
    
   
   

Publications Referenced SC31713600 LY43010500 FIX INFORMATION
 * FIXED COMPONENT NAME
   TCP/IP V3 MVS
   
   
 * FIXED COMPONENT ID
   5655HAL00
   
   

APPLICABLE COMPONENT LEVELS
 * R310 PSY UN84858 [HTTPS://WWW14.SOFTWARE.IBM.COM/WEBAPP/SET2/ORDERMEDIA/SHOPCART?PTFS=UN84858]
   UP95/12/05 P F512
   
   

FIX IS AVAILABLE
 * SELECT THE PTF APPROPRIATE FOR YOUR COMPONENT LEVEL. YOU WILL BE REQUIRED TO SIGN IN. DISTRIBUTION ON PHYSICAL MEDIA IS NOT AVAILABLE IN ALL COUNTRIES.