Title: IBM ObjectServer gateway locale behaviour - United States

Text:
Gate.Writer.UseBulkInsCmd; bulk; bulk insert; locale; language; drift; missing; events; updates; object servers TECHNOTE (FAQ)

QUESTION
 UseBulkInsCmd : What causes event drift? 

CAUSE

The Gate.Writer.UseBulkInsCmd transfers data using binary data in which not locale information is used, whilst the normal Insert|Update|Delete requires correct locale settings.

If the ObjectServer gateway uses bulk inserts:
Gate.Writer.UseBulkInsCmd : TRUE
Try setting this to FALSE:
Gate.Writer.UseBulkInsCmd : FALSE
and restart the gateway to see if the problem persists.



ANSWER
 

ObjectServers in a multitier systems or dual resilient systems may experience event drifting, where events in one ObjectServer are not seen or updated in another ObjectServer. 

This can happen for a numbers of reasons: 

1. Updates are occurring to events at the same time in both ObjectServers 

ObjectServers should be configured as a Primary or Backup ObjectServer, with all active triggers being disabled in the Backup ObjectServer. 

Check that the ObjectServer properties are set correctly: 

Primary ObjectServer:
ActingPrimary : TRUE
BackupObjectServer : FALSE 

Backup ObjectServer:
ActingPrimary : FALSE
BackupObjectServer : TRUE


and add any custom groups to the procedures:
automation_enable
automation_disable 

To ensure that all active triggers are only enabled in the Primary ObjectServer. 

Check that all events, defined by @Identifier in the event sources, are defined uniquely. 

See the FAQ on Event definition within Netcool/OMNIbus for further guidance. 

 

2. Desktop clients and display gateways are configured incorrectly 

The multi tier system configuration requires events to be written in dual-write mode, with updates occurring in the display and aggregation layer at the same time, with the display gateway being configured to overwrite all events in the display layer. 

Check that display gateways replication file use the FORCED option for alerts.status:
REPLICATE ALL FROM TABLE 'alerts.status'
USING MAP 'StatusMap'
SET UPDTOINS CHECK TO FORCED;

3. LOCALE's are set inconsistently 

In order to avoid locale problems it is recommended that all systems are configured to the same locale: 

e.g.
vi /etc/init.d/nco
#! /bin/sh
export LC_ALL LANG
LC_ALL=es_ES.iso8859
unset LANG
:wq

4. Gate.Writer.UseBulkInsCmd is used by the ObjectServer gateway
The bulk inserts command sends binary data from the source ObjectServer, whilst IDUC interprets the data, using mapping's and locale settings.

If the ObjectServer gateway uses bulk inserts:
Gate.Writer.UseBulkInsCmd : TRUE
Try setting this to FALSE:
Gate.Writer.UseBulkInsCmd : FALSE
and restart the gateway to see if the problem persists.

If this resolves the problem, then recheck the locale settings for the ObjectServers and ObjectServer gateways.

RELATED INFORMATION
 Event definition within Netcool/OMNIbus [http://www-01.ibm.com/support/docview.wss?uid=swg21652565]