Title: IBM Issue upgrading the Rational Team Concert ClearQuest (CQ) Synchronizer - United States

Text:
ClearQuest; Synchronizer; update; web.xml; upgrade; cq; version; incorrect; install; manager; iim TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 After an update of the IBM Rational Team Concert (RTC) ClearQuest (CQ) Synchronizer offering using IBM Installation Manager (IM), the web application (cqconnector.war file) is updated but it is not deployed because the Tomcat working directories containing the previous version of the web application are not removed. 

SYMPTOM
Upgrading the RTC CQ Synchronizer from 3.x to 3.0.1.1 using IM. 

The CQ Synchronizer upgrade seems to have completed successfully (no errors); however, the CQ Synchronizer web application running version is still the previous one.



CAUSE
The root cause of this issue is identified on jazz.net as work item 179637 [https://jazz.net/jazz/resource/itemName/com.ibm.team.workitem.WorkItem/179637]. 


The folders <install-directory>/gateway/tomcat/webapps/cqconnector and <install-directory>/gateway/tomcat/work/Catalina/localhost/cqconnector, which contain the contents of the previous version of the application, are not removed during the update process. Tomcat continues to use this content when it is restarted after the IIM update.


DIAGNOSING THE PROBLEM
Verify after update if the <install-directory>/gateway/tomcat/webapps/cqconnector directories still exist.



RESOLVING THE PROBLEM
 

WORKAROUND:
You can workaround the problem after the initial IM update.


 1. Stop the ClearQuest Gateway
    
    
 2. Save
    <install-directory>/gateway/tomcat/webapps/cqconnector/WEB-INF/web.xml 
    
    
 3. Delete
    <install-directory>/gateway/tomcat/webapps/cqconnector
    
    
 4. Delete 
    <install-directory>/gateway/tomcat/work/Catalina/localhost/cqconnector
    
    
 5. Navigate to 
    <install-directory>/gateway directory
    
    
 6. Start the ClearQuest Gateway
    
    
 7. Wait until the ClearQuest Gateway has fully started and then stop it. 
    
    Note: Starting and stopping the ClearQuest Gateway recreates the directories deleted in steps (3) and (4) with the contents of the new version of cqconnector.war.
    
    
 8. Copy the web.xml file that was saved in step 2 and place in the folder
    <install-directory>/gateway/tomcat/webapps/cqconnector/WEB-INF/
    
    
 9. Start the ClearQuest Gateway to resume normal operation

RELATED INFORMATION
#jazz.net work item 179637 [https://jazz.net/jazz/resource/itemName/com.ibm.team.workitem.WorkItem/179637]