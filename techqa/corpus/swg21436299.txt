Title: IBM Spam Mail in the Inbox of Users - United States

Text:
iss4752; 4752; undetected spam; underblocking; detection ratio ; spam; LPMS; Proventia; PNMS TECHNOTE (FAQ)

QUESTION
Why do you still see Spam mail in the users' mailbox?

ANSWER
It is important to be aware that there will always be a small number of Spam messages that cannot be detected as Spam and therefore will reach user's mailboxes. Usually, if the PNMSS has the current DB / Heuristic files and all Spam detection methods are enabled, the average Spam detection ratio should be around 98 %. Depending on the number of Spam messages a single user gets, the 2 % of undetected Spam may still show up, as a lot of messages get through the PNMS system.
1. What can be done to verify if the system is already running at its best or if there is something miss-configured?


 * Check if the Filter DB, the Bayesian Classifier DB and the Heuristic files are up to date. Compare the version information that you get at Updates > Filter DB with the versions information at http://filterdb.iss.net/dbversion/ [http://filterdb.iss.net/dbversion/] . 
 * Also make sure that the system checks for updates very 60 minutes. This is important to ensure that the PNMSS system gets all the ContentFiltering updates as soon as they are present (Updates > Automatic Settings > Automatically Check For Updates). 
 * Verify that all standard Spam detection methods are used (Bayesian Classifier, Spam Fingerprint, Spam Flow, Spam Heuristics, Spam Keyword, Spam Signature, Spam Structure, Spam URL) and that the Spam detection rule is either set to tag the detected messages or to block them. 
 * Verify that the Recipients configured in your Anti-Spam rule(s) do cover all users that you want be protected 
 * Check the Allowlist rule. If an Allowlist contains a lot of domain entries that may be the reason some messages get through although system could have blocked them 
 * Verify that the system is not running in Passthrough mode (System > SMTP > Global > Passthrough) 
 * Verify that the undetected Spam messages did actually make its way through the PNMS appliance and didn't get in a different way (e.g. traffic for the backup MX records is not passed to the appliance). Check the internet headers of the messages or look to the SMTP and SMAIL log files of the appliance


2. How can the Spam detection be improved (or how can it be set to be more sensitive)? Note: The following hints may raise the Spam detection ratio but can also cause a lot of False Positives 

 * Set the Flow Control to more sensitive values. This can be done at Mail Security > Policy > Spam Settings > Spam Flow Settings. By increasing the Analysis Window and reducing the Minimum Hits the Spam Flow Control will act more sensitive. The default values are 600/5 but 1200/3 should still be a more or less save setting. 
 * If you have a subscription for a DNSBL (aka RBL) list or you know of a free DNSBL you could use either Spam RBL within the policy (by adding Spam RBL Check as an Analysis module to the Anti-Spam rule) OR enable RBL on the SMTP level (System > SMTP > Incoming > RBL Settings) 
 * Add your own keyword searches (using Regular Expressions) to block typical Spam buzzwords 
 * Add a rule that blocks messages in languages (Analysis Module Language Check that are not spoken in your company (e.g. you would block Russian and Chinese messages if there aren't any employees that understand these languages)


3. Report undetected Spam messages to IBM/ISS: It is recommended to instruct your users to send Spam messages that were not blocked to our Spam-collector address spamlearn@spam.iss.net. This valuable feedback from our customers helps us to keep the detection ratio as high as possible (or even to improve it). If Spam messages are sent to spamlearn@spam.iss.net the messages will be analyzed and the necessary content will be added to the Filter database. The best way to send messages to Spamlearn is to add the original message as an attachment (the original format of the message will be preserved). 

4. Get in contact with IBM/ISS Technical Support 

If you are still in doubt whether something wrong with your system or if the amount of Spam messages getting through is too high, you may want to get in contact with IBM/ISS Technical Support (iss.support@us.ibm.com). In order to have the underblocking problem analyzed by IBM/ISS Technical Support you will have to provide the configuration and log files of your PNMS system and (as many as possible) examples of undetected Spam messages. 

A. Configuration and log files 

Create a Support Data File: go to Support > System Support > System Support File and click on Generate Support Data File. When the system has finished creating the file you download it via the Download button. It is also possible to create the Support Data File from the CLI by executing provinfo - the created file can be found in /var/support. 

B. Examples of undetected Spams 

Important about the example messages that you provide is that we get them as original as possible, since forwarded messages are so much modified that a lot of our Spam detection methods cannot be used with such messages. 

Create a Zip archive that contains the messages in one of the following formats: 

- *.msg (Outlook) files 

- *.eml (Outlook Express, standard message format) files 

- in a mbox file 

- as Outlook *.pst file 

- as Lotus Notes database *.nsf 

C. Uploading the information to IBM/ISS Technical Support 

Upload the Support Data File and the Spam-Examples to http://www.ecurep.ibm.com/app/upload [http://www.ecurep.ibm.com/app/upload]. Please use the IBM PMR number as the filename.



HISTORICAL NUMBER
 4752 

PRODUCT ALIAS/SYNONYM
 Proventia Network Mail Security
Lotus Protector for Mail Security