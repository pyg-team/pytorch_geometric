Title: IBM JR48163: Synchronization problems in Url and View registry refresh can lead to JVM deadlock. - United States

Text:
  FIXES ARE AVAILABLE
JR48163 - Synchronization problems in Url and View registry refresh can lead to JVM deadlock. [http://www-01.ibm.com/support/docview.wss?uid=swg24038681]
WebSphere Commerce Version 7.0.0.9 Fix Pack [http://www-01.ibm.com/support/docview.wss?uid=swg24038826]
JR53438 - Mandatory cumulative Interim Fix for WebSphere Commerce Version 7 Fix Pack 9 [http://www-01.ibm.com/support/docview.wss?uid=swg24040267]


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  This fix is to address the problem with the refresh registry
   that might sometime lead to a hang
   
   Javacores taken from a JVM experiencing the problem show a
   thread executing RegistryManager.refreshAll
   
   3XMTHREADINFO      "WorkManager.broadcast : 0"
   J9VMThread:0x00000000B4CB9000, j9thread_t:0x000001001D2322D0,
   java/lang/Thread:0x00000000831C4EC8, state:P, prio=5
   3XMJAVALTHREAD            (java/lang/Thread getId:0x10F2,
   isDaemon:true)
   3XMTHREADINFO1            (native thread ID:0x2FA00A9, native
   priority:0x5, native policy:UNKNOWN)
   3XMTHREADINFO3           Java callstack:
   4XESTACKTRACE                at sun/misc/Unsafe.park(Native
   Method)
   4XESTACKTRACE                at
   java/util/concurrent/locks/LockSupport.park(LockSupport.java:182
   )
   4XESTACKTRACE                at
   java/util/concurrent/locks/AbstractQueuedSynchronizer.parkAndChe
   ckInterrupt(AbstractQueuedSynchronizer.java:822)
   4XESTACKTRACE                at
   java/util/concurrent/locks/AbstractQueuedSynchronizer.acquireQue
   ued(AbstractQueuedSynchronizer.java:853(Compiled Code))
   4XESTACKTRACE                at
   java/util/concurrent/locks/AbstractQueuedSynchronizer.acquire(Ab
   stractQueuedSynchronizer.java:1189(Compiled Code))
   4XESTACKTRACE                at
   java/util/concurrent/locks/ReentrantReadWriteLock$WriteLock.lock
   (ReentrantReadWriteLock.java:907(Compiled Code))
   4XESTACKTRACE                at
   com/ibm/commerce/struts/ECActionServlet.refresh(ECActionServlet.
   java:381)
   4XESTACKTRACE                at
   com/ibm/commerce/struts/StrutsRegistrySourceImpl.refresh(StrutsR
   egistrySourceImpl.java:80)
   4XESTACKTRACE                at
   com/ibm/commerce/registry/UrlRegistry.refresh(UrlRegistry.java:1
   49)
   4XESTACKTRACE                at
   com/ibm/commerce/registry/RegistryManager.refreshAll(RegistryMan
   ager.java:219)
   
   And most WebContainer threads in Unsafe.park from
   ReentrantReadWriteLock$ReadLock.lock
   
   3XMTHREADINFO      "WebContainer : 15"
   J9VMThread:0x00000000B1CEB400, j9thread_t:0x000001001D531D10,
   java/lang/Thread:0x000000007104E268, state:P, prio=5
   3XMJAVALTHREAD            (java/lang/Thread getId:0xD9E,
   isDaemon:true)
   3XMTHREADINFO1            (native thread ID:0x6F00099, native
   priority:0x5, native policy:UNKNOWN)
   3XMTHREADINFO3           Java callstack:
   4XESTACKTRACE                at sun/misc/Unsafe.park(Native
   Method)
   4XESTACKTRACE                at
   java/util/concurrent/locks/LockSupport.park(LockSupport.java:182
   )
   4XESTACKTRACE                at
   java/util/concurrent/locks/AbstractQueuedSynchronizer.parkAndChe
   ckInterrupt(AbstractQueuedSynchronizer.java:822)
   4XESTACKTRACE                at
   java/util/concurrent/locks/AbstractQueuedSynchronizer.doAcquireS
   hared(AbstractQueuedSynchronizer.java:952)
   4XESTACKTRACE                at
   java/util/concurrent/locks/AbstractQueuedSynchronizer.acquireSha
   red(AbstractQueuedSynchronizer.java:1272(Compiled Code))
   4XESTACKTRACE                at
   java/util/concurrent/locks/ReentrantReadWriteLock$ReadLock.lock(
   ReentrantReadWriteLock.java:694(Compiled Code))
   4XESTACKTRACE                at
   com/ibm/commerce/struts/ECActionServlet.processRequest(ECActionS
   ervlet.java:207(Compiled Code))
   4XESTACKTRACE                at
   com/ibm/commerce/struts/ECActionServlet.doGet(ECActionServlet.ja
   va:166(Compiled Code))
   
   
    
   
   

LOCAL FIX

PROBLEM SUMMARY
 *  USERS AFFECTED:
    WebSphere Commerce customers who occasionally refresh the Url
   or View registries.
   
    PROBLEM ABSTRACT:
    Synchronization problems in Url and View registry refresh can
   lead to JVM deadlock.
   
    BUSINESS IMPACT:
    The application server can become unresponsive and require
   re-starting.
   
    RECOMMENDATION:
   
   
    
   
   

PROBLEM CONCLUSION
 *  The synchronization problems have been addressed.
    -------------------------------------------------------------
    The latest available maintenance information can be obtained
   from the Recommended Fixes for WebSphere Commerce technote:
    http://www.ibm.com/support/docview.wss?rs=3046&uid=swg21261296 [http://www.ibm.com/support/docview.wss?rs=3046&uid=swg21261296]
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   JR48163
   
   
 * REPORTED COMPONENT NAME
   WC BUS EDITION
   
   
 * REPORTED COMPONENT ID
   5724I3800
   
   
 * REPORTED RELEASE
   700
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2013-10-22
   
   
 * CLOSED DATE
   2014-08-08
   
   
 * LAST MODIFIED DATE
   2015-01-08
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   WC BUS EDITION
   
   
 * FIXED COMPONENT ID
   5724I3800
   
   

APPLICABLE COMPONENT LEVELS
 * R700 PSY
   UP