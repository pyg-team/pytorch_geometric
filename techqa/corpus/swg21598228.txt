Title: IBM Setting up HIGH AVAILABILITY DATA REPLICATION (HDR) on a single installation of IBM Informix Dynamic Server on UNIX - United States

Text:
Informix; HDR; High Availability Data Replication; Relative Path TECHNOTE (FAQ)

QUESTION
 How to set up HDR on a single installation of IBM Informix Server on UNIX for testing purposes? 

ANSWER

INTRODUCTION

The following instructions describe how to set up a quick testing environment for IDS High Availability Data Replication (HDR) using relative paths for your chunks. 


BEFORE YOU BEGIN

Relative paths are used for all chunks so all oninit, onspaces, and ontape commands must be run in the directory where the chunks are located for that specific instance. In this example, the 2 servers are named:


 * hdr1
 * 
 * 
 * 
 * hdr2
 * 
 * 


STEPS on the Primary 

1. Create a directory hdr1 and hdr2 in $INFORMIXDIR. 

2. Create a file named rootdbs in directory $INFORMIXDIR/hdr1 for the primary server. 

3. Create a file named rootdbs in $INFORMIXDIR/hdr2 for the secondary server. 

4. Create two files named data and logs in $INFORMIXDIR/hdr1 for the configuration parameters TAPEDEV and LTAPEDEV. 

5. Copy the onconfig.std to 2 new files named ONCONFIG.hdr1 and ONCONFIG.hdr2. Edit both onconfig files ONCONFIG.hdr1 and ONCONFIG.hdr2 to change the following configuration parameters:  *  Set this parameter... ...to this value ROOTPATH ./rootdbs TAPEDEV informixdir / hdrX/ data LTAPEDEV informixdir / hdrX /logs 
 * 
 * informixdir
 * 
 * 
 * 
 * 
 * hdrX
 * 
 * 
 * 
 * 
 * 
 * Note:
 * 
 * 
 * 

6. Make sure your sqlhosts file has network entries for both hdr1 and hdr2, then start the instance hdr1 by executing the following commands: 
 * cd $INFORMIXDIR/hdr1
 * 
 * oninit -ivy


7. Create the stores_demo database with unbuffered logging by executing the following command: 
 * dbaccessdemo7 -log


8. Take a level zero archive by executing the following command: 
 * ontape -s -L 0


9. Make instance hdr1 the primary of the HDR pair by executing the following command: 
 * onmode -d primary hdr2


10. In another window, set the environment for instance hdr2 then execute the following command: 
 * cd $INFORMIXDIR/hdr2


11. Do a physical restore of the archive you took in step 8 by executing the following commands: 
 * ontape -p
 * 
 * 
 *  To this question from ontape... ...give this answer. Continue restore? (y/n) yes Do you want to back up the logs? (y/n) no Restore a level 1 archive (y/n) no 
 * 
 * 


12. Make instance hdr2 the secondary of the HDR pair by executing the following command: 
 * onmode -d secondary hdr1



The primary and the secondary servers should be online now. 


Verifying HDR 

To verify HDR setup, insert a row into the customer table in the stores_demo database of instance hdr1. If that row appears in the instance hdr2 then HDR is working.