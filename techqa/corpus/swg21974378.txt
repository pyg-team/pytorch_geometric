Title: IBM Cannot delete folders or case from eDiscovery Manager - United States

Text:
 TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 Cannot delete folders or case from eDiscovery Manager (eDM) 

SYMPTOM
The following error is reported in the eDM log: 

[2015-12-20 03:31:00.103] [10772 ] [FINEST ] [25 ] [METHOD ] [com.ibm.icm.edc.ral.p8.impl.P8CommonUtils] [detectSpecialCauses ] Error message: OBJECT_IS_ALREADY_LOCKED: The object is already locked! original errorID: 3103 

[2015-12-20 03:31:00.103] [10773 ] [FINEST ] [25 ] [METHOD ] [com.ibm.icm.edc.ral.p8.impl.P8CommonUtils] [detectSpecialCauses ] Returned errorID= 3103 

[2015-12-20 03:31:00.212] [10790 ] [SEVERE ] [25 ] [METHOD ] [com.ibm.icm.edc.ral.casemgmt.impl.CaseServiceImpl] [lockCase ] Exception: The case could not be locked for the operation requested 
com.ibm.icm.edc.ral.casemgmt.CaseServiceException: CASE_COULD_NOT_BE_LOCKED: Failed to lock case obj!
at com.ibm.icm.edc.ral.casemgmt.impl.CaseServiceImpl.lockCase(CaseServiceImpl.java:4089)
at com.ibm.icm.edc.ral.casemgmt.impl.CaseServiceImpl.phaseTransitionRequest(CaseServiceImpl.java:987)
at com.ibm.icm.edc.ral.casemgmt.impl.CaseServiceImpl.phaseTransitionRequest(CaseServiceImpl.java:976)
at com.ibm.icm.edc.ral.casemgmt.impl.CaseServiceImpl.prepareForFolderTaskInternal(CaseServiceImpl.java:2889)
at ...........




CAUSE
eDM cannot delete the case or folder because the object is locked.



ENVIRONMENT
eDiscovery Manager 

IBM FileNet P8 repository.


DIAGNOSING THE PROBLEM
You can use the FileNet Enterprise Manager (FEM) to verify if the folder or case object is locked. 

 * Go to FEM, expand the P8 object store. 
 * Expand Root Folder > EDM. 
 * Select the problem case or folder object, right-click and select Properties. 
 * In the Properties tab, the following properties are all assigned with some value:  * LockToken 
    * LockUser 
    * Lock Timeout 
      
   
   

RESOLVING THE PROBLEM
To unlock the folder objects: 

 * Go to FEM, expand the P8 object store. 
 * Right-click Search Results, select New Search. 
 * In Select from Table, choose EDMFolder. 
 * Under Criteria, select Folder Name. For Condition, select Equal To. For Value, enter your folder name. 
 * Select the Script tab, select the check box Execute Script.. In the text area, enter the following:  * 
    * Public Sub OnCustomProcess (CEObject)
      CEObject.Unlock
      CEObject.Save
      End Sub
   
   
 * Click OK to run the search and execute the script to unlock the folder. 
 * Repeat for all locked folders in the case.


To unlock the case objects: 

 * Start another search in FEM. 
 * Right-click Search Results, select New Search. 
 * In Select from Table, choose EDMCase. 
 * Under Criteria, select Folder Name. For Condition, select Equal To. For Value, enter your case name. 
 * Select the Script tab, select the check box Execute Script.. In the text area, enter the following:  * 
    * Public Sub OnCustomProcess (CEObject)
      CEObject.Unlock
      CEObject.Save
      End Sub
   
   
 * Click OK to run the search and execute the script to unlock the folder. 
 * Repeat for all locked case in the case.


Finally, restart eDM service and previously locked case and folders should be unlocked now. You should then be able to delete the folder or case.