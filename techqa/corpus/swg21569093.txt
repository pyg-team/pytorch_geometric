Title: IBM Netview : NMC Server Fails with IHS4122E: Error sending data Message - United States

Text:
IHS4122E NMC corrupt database ihsx ihsctp TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 The customer could not start their NMC Server on Windows. The NMC Topology Server window showed several IHS4122E Errors. Customer wanted to know what caused these errors and how to repair it so the NMC Server will start. 

SYMPTOM
See the following message in the NMC ihsmessage.log file : 

 IHS4122E: Error sending data to task ihsx. Error code 2-0. 
Ensure that the destination task is running. 


CAUSE
Corrupt NMC Database


ENVIRONMENT
Netview for z/OS. NMC Server running on Windows



RESOLVING THE PROBLEM
The customer reported that they could not start their NMC Server in Windows. The NMC Topology Server window showed several IHS4122E Errors. Looking at the NMC ihsmessage.log message log file showed the following messages : 

 
Date: 08-15-2009 Time: 10:19:35 Function: EGVCCMD.c Line: 685 
IHS4122E: Error sending data to task ihsx. Error code 2-0. 
Ensure that the destination task is running. 
Date: 08-15-2009 Time: 10:19:35 Function: EGVCCMD.c Line: 685 
IHS4122E: Error sending data to task ihsctp. Error code 2-0. 
Ensure that the destination task is running. 
Date: 08-15-2009 Time: 11:19:11 Function: IHSXSRV.c Line: 178 
IHS5977I: Topology communications server service installed 
successfully 
Date: 08-15-2009 Time: 11:19:11 Function: IHSXSRV.c Line: 216 
IHS5977I: Topology server service installed successfully 

The IHS4122E errors occur for both the ihsx and ihsctp internal NMC tasks. These messages usually indicate a bad or corrupted NMC installation. If this is a new installation a new server or on a PC with an existing NMC that was installed earlier then this problem is often resolved by un-installing and re-install the nmc client and server on your workstation or server.

To check your installation, issue the following "tserver utility -c" command from the /bin server directory and see if you are able to run the nmc server checkpoint, for example : 

E:\Netview\usr\local\Tivoli\bin\w32-ix86\TDS\server\bin> 
tserver utility -c 
Tivoli environment variables configured. 
BINDIR... E:\Netview\usr\local\Tivoli\bin\w32-ix86 
LANG..... C 
IHS5907I: Requesting server database checkpoint. 

Are you able to execute the tserver utility -c command? Do you see the following messages in your NMC topology server window ? : 

IHS2043I: Database checkpoint starting. 
IHS2044I: Database checkpoint complete. 

If you get errors then there is a good chance we have a installation problem resulting in a corrupted NMC database.

Here are the instruction from the NMC User's Guide on handling a corrupt NMC Topology Server Databases. If your topology server databases are corrupted, do the following: 

1. Erase any files in the current and backup databases. Do not delete the directories. Any view customization will be lost. The current and backup directories will be restored from the default (\default\datab) databases. For example the database files can be located in the following path. You may have a different high level directory depending on where the NMC Server code is installed. 
\usr\local\Tivoli\bin\w32-ix86\TDS\server\db\backup\datab 
\usr\local\Tivoli\bin\w32-ix86\TDS\server\db\current\datab 

2. Restart the topology server. 
This automatically copies the databases from the default databases to the current databases. 
3. If steps 1 and 2 resolve the problem, it verifies that corrupt databases were the root cause of the problem. 

There is information in the NMC User's Guide about backing up your NMC databases and the importance of it. 

 

HISTORICAL NUMBER
 64526
057
649 

PRODUCT ALIAS/SYNONYM
 NV NVzOS NETV NVz