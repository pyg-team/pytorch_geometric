Title: IBM Errors detecting the database when a JDBC JCC driver is used as the Common database provider for WebSphere Process Server (WPS) - United States

Text:
wps; commonDB; can't detect DB; WSVR0501E; DDT; deployment manager; JCC; common database; database provider; v70rnotes TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 If you use the DB2 JDBC JCC driver as the provider for the Common database when configuring your deployment environment, WebSphere Process Server might not recognize the database type and deployment manager startup might fail. 

SYMPTOM
The following exception can occur when starting the deployment environment or using other administrative operations to manage the deployment environment. 

[10/1/10 3:44:01:828 EDT] 00000000 ContainerHelp E WSVR0501E: Error creating component com.ibm.wbiserver.security.auth.startup.SecurityComponentImpl@6c806c80
com.ibm.ws.exception.RuntimeWarning: An error occurred while starting system roles component to populate BPM admin roles.
at com.ibm.wbiserver.security.auth.startup.SecurityComponentImpl.start(SecurityComponentImpl.java:75)
at com.ibm.ws.runtime.component.ContainerHelper.startComponents(ContainerHelper.java:538)
at com.ibm.ws.runtime.component.ContainerImpl.startComponents(ContainerImpl.java:627)
at com.ibm.ws.runtime.component.ContainerImpl.start(ContainerImpl.java:618)
..
Caused by: java.lang.IllegalStateException: Can't detect DB
at com.webify.wsf.support.spring.dbversion.DbUtils.doDetection(DbUtils.java:136)
at com.webify.wsf.support.spring.dbversion.DbUtils.detectDatabaseType(DbUtils.java:92)
at com.ibm.tyto.jdbc.database.DatabaseFactoryImpl.selectAdapter(DatabaseFactoryImpl.java:37)
at com.ibm.tyto.jdbc.database.DatabaseFactoryImpl.getDatabase(DatabaseFactoryImpl.java:31)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:48)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:37)
at java.lang.reflect.Method.invoke(Method.java:600)
at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:115)
... 118 more


CAUSE
The Database Design Tool offers two provider options when you are configuring and generating the generating the wps.nd.topology.dbDesign file:


 * DB2 Universal JDBC Driver Provider # XA data source # DB2 Universal JDBC Driver Provider (XA) 
 * DB2 Using IBM JCC Driver # XA data source # DB2 Using IBM JCC Driver (XA)



If you choose the JCC driver and then use the design file to create the deployment manager, some WebSphere Process Server components do not recognize the database type. 
RESOLVING THE PROBLEM
If you are using the wps.nd.topology.dbDesign file to create the deployment manager, generate a new DbDesign file using that uses the DB2 Universal JDBC Driver Provider (XA). Create a new deployment manager using this new dbDesign file.

RELATED INFORMATION
 Creating the database design file using the DDT [http://publib.boulder.ibm.com/infocenter/dmndhelp/v7r0mx/index.jsp?topic=/com.ibm.websphere.wps.doc/doc/tcfg_ddl_generator.html]