Title: IBM PM02947: DEADLOCK WHEN MULTIPLE THREADS ARE STARTED PRIOR TO ITCAM DC INITIAILIZATION - United States

Text:
  FIXES ARE AVAILABLE
7.1.0-TIV-ITCAMAD-FP0001: ITCAM for Application Diagnostics V7.1 Fix Pack 1 [http://www-01.ibm.com/support/docview.wss?uid=swg24027199]
7.1.0.1-TIV-ITCAMAD-IF0001 [http://www-01.ibm.com/support/docview.wss?uid=swg24027898]
7.1.0.2-TIV-ITCAMAD-IF0001: ITCAM for Application Diagnostics V7.1 FP2 IF1 [http://www-01.ibm.com/support/docview.wss?uid=swg24029067]
7.1.0.2-TIV-ITCAMAD-IF0006: ITCAM for Application Diagnostics V7.1 FP2 IF6 [http://www-01.ibm.com/support/docview.wss?uid=swg24031010]
7.1.0.2-TIV-ITCAMAD-IF0007: ITCAM for Application Diagnostics V7.1 FP2 IF7 [http://www-01.ibm.com/support/docview.wss?uid=swg24031710]
7.1.0.2-TIV-ITCAMAD-IF0010: ITCAM for Application Diagnostics V7.1 FP2 IF10 [http://www-01.ibm.com/support/docview.wss?uid=swg24032110]
7.1.0-TIV-ITCAMAD-FP0003: ITCAM for Application Diagnostics V7.1 Fix Pack 3 [http://www-01.ibm.com/support/docview.wss?uid=swg24032604]
7.1.0.3-TIV-ITCAMAD-IF0001: ITCAM for Application Diagnostics V7.1 FP3 IF1 [http://www-01.ibm.com/support/docview.wss?uid=swg24032985]
7.1.0.3-TIV-ITCAMAD-IF0004: ITCAM for Application Diagnostics V7.1 FP3 IF4 [http://www-01.ibm.com/support/docview.wss?uid=swg24033735]
7.1.0.3-TIV-ITCAMAD-IF0005: ITCAM for Application Diagnostics V7.1 FP3 IF5 [http://www-01.ibm.com/support/docview.wss?uid=swg24033938]
7.1.0.3-TIV-ITCAMAD-IF0004: ITCAM for Application Diagnostics V7.1 FP3 IF6 [http://www-01.ibm.com/support/docview.wss?uid=swg24034668]
7.1.0.3-TIV-ITCAMAD-IF0008: ITCAM for Application Diagnostics V7.1 FP3 IF8 [http://www-01.ibm.com/support/docview.wss?uid=swg24037994]
7.1.0-TIV-ITCAMAD-FP0004: ITCAM for Application Diagnostics V7.1 Fix Pack 4 [http://www-01.ibm.com/support/docview.wss?uid=swg24041705]


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  Error Description:  Deadlocks happen when multiple threads are
   started during WebSphere start up that require byte code
   instrumentation done,  These applications are usually started by
   the bootstrap classloader.  An example is when the Optier
   monitoring tool that is installed in the same JVM as ITCAM.
   
   Environment:  ITCAM 6.1.0.4 Data Collector
   
   
    
   
   

LOCAL FIX
 *  Remove the application that causes the threads to start before
   ITCAM Data Collector initialization as this is not a standard
   J2EE application.
   
   
    
   
   

PROBLEM SUMMARY
 *  Deadlocks and/or NoClassDefFoundError occurs at startup time
   when running a second monitoring product along with ITCAM for
   WAS Data Collector.  Initialization of the ITCAM Toolkit should
   occur in a single-threaded environment.  However, with the
   presence of the OpTier monitoring product, another thread was
   running during ITCAM toolkit initialization.  This led to the
   deadlock condition.  NoClassDefFoundError occured because the
   IExposedClassLoaderReturner interface was defined as an
   implemented interface of the
   com.ibm.ws.classloader.ReloadableClassLoader class, but the
   interface did not get defined to the Java system class loader.
   Again, this resulted from the presence of the OpTier thread
   during toolkit startup.
   
   
    
   
   

PROBLEM CONCLUSION
 *  Code was changed to avoid deadlock at initialization time when
   second thread was running. Also, code was changed to dynamically
   define required interface(s) to the Java system class loader at
   an earlier point.
   
   
   The fix for this APAR is contained in the following maintenance
   package:
   
   | interim fix | 6.1.0.5-TIV-ITCAMfWAS_MP-IF0009
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   PM02947
   
   
 * REPORTED COMPONENT NAME
   ITCAM WAS DIST
   
   
 * REPORTED COMPONENT ID
   5724L6200
   
   
 * REPORTED RELEASE
   610
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2009-12-07
   
   
 * CLOSED DATE
   2010-02-17
   
   
 * LAST MODIFIED DATE
   2010-02-17
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   ITCAM WAS DIST
   
   
 * FIXED COMPONENT ID
   5724L6200
   
   

APPLICABLE COMPONENT LEVELS
 * R610 PSY
   UP
   
   
 * R700 PSY
   UP