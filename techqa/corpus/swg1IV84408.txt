Title: IBM IV84408: POST-UPGRADE - MISSING ITNM EVENT GATEWAY EVENT METRICS - United States

Text:
 SUBSCRIBE TO THIS APAR
By subscribing, you receive periodic emails alerting you to the status of the APAR, along with a link to the fix after it becomes available. You can track this item individually or track all items by product.

Notify me when this APAR changes.

Notify me when an APAR for this component changes.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  .
   Problem description and business impact
   Post - Environment Upgrade from 7.4 CORE to 8.1FP6 CORE.
   Upgraded ITM
   KNO Agent in place to version distributed with NOI 1.4 OMNIbus
   8.1 e-
   assembly. Re-applied the ITM-agent provided itm_os.sql
   ObjectServer
   extensions/automations.
   
   Since upgrade, observing that not all activity is getting
   recorded into
   the master.client_stats table. As a result, the ITM Agent is not
   obtaining complete metrics.
   
   - Probe records appear to continue to be updated (i.e mttrapd,
   syslog,
   nco_p_ncpmonitor),
   - Gateway records (failover_gate, ncp_g_event) are all zeros.
   
   
   Actually, I believe I've found it!
   
   
   It looks like between 7.4FP3 and 8.1, a new trigger was added to
   the
   stats_trigger group called 'status_updates'. It accumulates
   metrics in
   the master.activity_stats table.
   
   
   However, it also now conflicts with the status_updates trigger
   in the
   itm_os.sql with the agent.
   
   
   My bets here are that in upgrade I ran the update74fp3to81.sql
   after
   runing itm_os.sql. This resulted in the trigger being replaced
   and
   client update stats going bye-bye.
   
   
   My workaround will be to put the ITM trigger back under the name
   'itm_status_updates'. That should get my metrics back.
   
   
    
   
   

LOCAL FIX
 *  My workaround will be to put the ITM trigger back under the name
   'itm_status_updates'. That should get my metrics back.
   
   
    
   
   

PROBLEM SUMMARY
 *  ****************************************************************
   * USERS AFFECTED:                                              *
   * Users of the ITM Agent with Netcool OMNIbus version 8.1      *
   * fixpack 3 and above.                                         *
   ****************************************************************
   * PROBLEM DESCRIPTION:                                         *
   * Not all activity is recorded into the master.client_stats    *
   * table after the OMNIbus upgrade file 'update74fp3to81.sql'   *
   * has been applied. The same trigger name 'status_updates' is  *
   * used for a trigger in both the itm_os.sql and ObjectServer   *
   * sql files and this causes the itm_os trigger to be replaced  *
   * when applying the ObjectServer upgrade.                      *
   ****************************************************************
   * RECOMMENDATION:                                              *
   * Apply the itm_os.sql file supplied with this APAR.           *
   ****************************************************************
   
   
    
   
   

PROBLEM CONCLUSION
 *  The itm_os.sql file has been modified to rename the trigger
   itm_status_updates so does not clash with ObjectServer trigger
   names.
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   IV84408
   
   
 * REPORTED COMPONENT NAME
   NETCOOL/OMNIBUS
   
   
 * REPORTED COMPONENT ID
   5724O4800
   
   
 * REPORTED RELEASE
   810
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt / Xsystem
   
   
 * SUBMITTED DATE
   2016-05-06
   
   
 * CLOSED DATE
   2018-01-17
   
   
 * LAST MODIFIED DATE
   2018-01-17
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   NETCOOL/OMNIBUS
   
   
 * FIXED COMPONENT ID
   5724O4800
   
   

APPLICABLE COMPONENT LEVELS