Title: IBM Using sigdump to generate IBM MQ diagnostic FFSTs on Linux and UNIX - United States

Text:
MustGather sigdump sigdump UNIX AIX HP-UX Linux Solaris script utility SIGUSR2 diagnostic FDC FFST TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 You need to generate diagnostic FDC files from your queue managers in order to help diagnose an IBM MQ problem. 

RESOLVING THE PROBLEM


The sigdump script depends on a debugging feature in MQ which may, in rare cases, cause a hang or abnormal process termination. IBM recommends you use sigdump only to diagnose an existing hang, or if the queue manager can be restarted without much impact to the system if sigdump causes a secondary problem..



The sigdump script provides an easy way to generate diagnostic FDC files from WebSphere MQ queue manager processes on AIX, HP-UX, Linux and Solaris systems.




 * Using sigdump
 * Examples
 * Usage Notes
 * Sample Output

 



USING SIGDUMP
In order to use sigdump, you must first download the script to your system and make it executable, for example by running: chmod a+x sigdump



 * sigdump [/support/docview.wss?uid=swg21329744&amp;aid=2]sigdump

 * 
 * Syntax
 * 
   sigdump -?
   
   sigdump {-m Qmgr | -p Pid}...
   
   
   -m Qmgr 
 * This option allows you to generate diagnostic FDCs for all processes which are part of a queue manager. You can repeat this option to generate FDCs for multiple queue managers. 
 * 
 * -p Pid
 * This option allows you to request a diagnostic FDC from a specific WebSphere MQ process identifier (pid). You can repeat this option to generate FDCs for multiple processes. 




Back to top



EXAMPLES
 * 
 * 
 * Example 1
 * Read detailed help for sigdump:
   
   sh> sigdump -?

 * 
 * Example 2
 * Generate diagnostic FDCs for queue manager TEST.QMGR:
   
   sh> sigdump -m TEST.QMGR

 * 
 * Example 3
 * Generate diagnostic FDCs for processes 29723 and 1027815:
   
   sh> sigdump -p 29723 -p 1027815

 * 
 * Example 4
 * Generate diagnostic FDCs for process 4401925 and for DEV.QMGR and PROD.QMGR:
   
   sh> sigdump -p 4401925 -m DEV.QMGR -m PROD.QMGR


Back to top



USAGE NOTES
The sigdump script works by sending signal SIGUSR2 to WebSphere MQ processes in order to request a diagnostic FDC. Programs which are not specifically written to handle SIGUSR2 will terminate, so the sigdump script contains checks to ensure that it signals only capable WebSphere MQ processes.


You must have authority to signal a process for sigdump to succeed. In the case of WebSphere MQ, you must run sigdump the user who started the queue manager, or as mqm (in most cases), or as root. If sigdump lacks the authority to signal a queue manager or process, it will tell you which user can do so.

The diagnostic FDC files generated by sigdump can be identified by the Probe Id values they contain. The Probe Id for a diagnostic FDC entry always ends in 255, as shown below. Note that a single FDC file may contain multiple entries, with the most recent ones at the end of the file:



 * +---------------------------------------------------------------------+
 * 
 * | |
 * 
 * | WebSphere MQ First Failure Symptom Report |
 * 
 * | ========================================= |
 * 
 * | 
 * |
 * 
 * | Date/Time :- Mon July 16 2012 20:46:37 EST |
 * 
 * | Operating System :- AIX 7.1 |
 * 
 * | Product Long Name :- WebSphere MQ for AIX |
 * 
 * | Probe Id :- XC332255 |
 * 
 * | Component :- xlsWaitEvent |
 * 
 * | Program Name :- amqzlaa0 |
 * 
 * | Process :- 13500650 |
 * 
 * | Thread :- 1 |
 * 
 * | QueueManager :- TEST.QMGR |
 * 
 * | Major Errorcode :- OK |
 * 
 * | Minor Errorcode :- OK |
 * 
 * | Probe Type :- INCORROUT |
 * 
 * | Probe Severity :- 4 |
 * 
 * | Probe Description :- AMQ6109: An internal WebSphere MQ error has |
 * 
 * | occurred. |
 * 
 * | |
 * 
 * +---------------------------------------------------------------------+


Back to top



SAMPLE OUTPUT
The sigdump script prints a summary of the processes it signals and the FDC files they create. You can send this summary to IBM, but you must include all of the named FDC files (or better yet, all of the FDC files in the /var/mqm/errors directory). For example:



 * sh> 
 * sigdump -m TEST.QMGR -p 26280068 -p 21495896
 * 
 * sigdump: V3.1 running on AIX 7.1 (powerpc) with arguments: -m TEST.QMGR
 * 
 * -p 26280068 -p 21495896
 * 
 * sigdump: Creating diagnostic FDCs for queue manager PURCELL:
 * 
 * sigdump: AMQ13500650.0.FDC - amqpcsea: Command server
 * 
 * sigdump: AMQ24510692.0.FDC - amqzmuf0: Publish/subscribe utilities
 * 
 * sigdump: AMQ28835860.0.FDC - amqzdmaa: Deferred message processor
 * 
 * sigdump: AMQ29098188.0.FDC - amqfqpub: Publish/subscribe controller
 * 
 * sigdump: AMQ29556844.0.FDC - amqzlaa0: Standard application agent
 * 
 * sigdump: AMQ28096363.0.FDC - amqzlaa0: Standard application agent
 * 
 * sigdump: AMQ30277658.0.FDC - runmqchi: Channel initiator
 * 
 * sigdump: AMQ30605420.0.FDC - amqrrmfa: Cluster repository manager
 * 
 * sigdump: AMQ30998624.0.FDC - amqzfuma: Object authority manager
 * 
 * sigdump: AMQ31391790.0.FDC - amqzxma0: Execution controller
 * 
 * sigdump: AMQ31850682.0.FDC - amqzmgr0: Process controller
 * 
 * sigdump: AMQ31916042.0.FDC - amqzmur0: Recoverable utilities
 * 
 * sigdump: AMQ32112814.0.FDC - amqfcxba: Publish/subscribe worker
 * 
 * sigdump: AMQ32178294.0.FDC - amqzmuc0: Critical utilities
 * 
 * sigdump: Creating diagnostic FDCs for processes:
 * 
 * sigdump: AMQ26280068.0.FDC - runmqlsr: Network listener
 * 
 * sigdump: AMQ21495896.0.FDC - dspmqspl: 
 * Display security policy
 * 
 * sigdump: Created 16 diagnostic FDC files in the /var/mqm/errors
 * 
 * directory. Please send these files to IBM for review.


Back to top

DISCLAIMER: All source code and/or binaries attached to this document are referred to here as "the Program". IBM is not providing program services of any kind for the Program. IBM is providing the Program on an "AS IS" basis without warranty of any kind. IBM WILL NOT BE LIABLE FOR ANY ACTUAL, DIRECT, SPECIAL, INCIDENTAL, OR INDIRECT DAMAGES OR FOR ANY ECONOMIC CONSEQUENTIAL DAMAGES (INCLUDING LOST PROFITS OR SAVINGS), EVEN IF IBM, OR ITS RESELLER, HAS BEEN ADVISED OF THE POSSIBILITY OF SUCH DAMAGES.



Cross reference information Segment Product Component Platform Version Edition Business Integration IBM MQ Problem Determination AIX, HP-UX, Linux, Solaris 9.0, 8.0, 7.5, 7.1, 7.0 
PRODUCT ALIAS/SYNONYM
 WMQ MQ