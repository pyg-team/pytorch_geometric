Title: IBM PK41291: UNABLE TO INITIALIZE WEBSPHERE APPLICATION SERVER FOR TRACIN AND LOGGING: CAN'T FIND LIBRARY WMQJBIND (LIBWMQJBIND.SO) - United States

Text:
 SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  When using WebSphere Application Server (WAS) for z/OS 6.0.2
   on an LPAR where MQ is not installed and having an
   MQConnection defined to an MQ server on another LPAR, can
   result in the following error:
   
   ERROR: Unable to initialize WebSphere Application Server for
   tracing and logging: using JMS tracing and logging: Can't find
   library wmqjbind  (libwmqjbind.so) in sun.boot.library.path or
   java.library.path
   .
   The WAS server starts up without any other problems.
   .
   The stack of the error is:
   java.lang.UnsatisfiedLinkError: Can't find library wmqjbind
   (libwmqjbind.so) in sun.boot.library.path or java.library.path
    sun.boot.library.path=/WebSphere/WAS5F/WASCONFT/
    DeploymentManager/java/bin
    java.library.path=/WebSphere/WAS5F/WASCONFT/DeploymentManager/
    java/bin:/WebSphere/WAS5F/WASCONFT/DeploymentManager/java/bin/
    classic:/WebSphere/WAS5F/WASCONFT/DeploymentManager/lib
     at java.lang.ClassLoader.loadLibrary(ClassLoader.java:2044)
     at java.lang.Runtime.loadLibrary0(Runtime.java:824)
     at java.lang.System.loadLibrary(System.java:910)
     at com.ibm.mq.MQSESSION$2.run(MQSESSION.java:679)
     at java.security.AccessController.doPrivileged1(Native Method)
     at java.security.AccessController.doPrivileged
     (AccessController.java(Compiled Code))
     at com.ibm.mq.MQSESSION.get390LibraryName(MQSESSION.java:671)
     at com.ibm.mq.MQSESSION.getLibraryName(MQSESSION.java:637)
     at com.ibm.mq.MQEnvironment.enableTracing(MQEnvironment.
     java:354)
     at com.ibm.mq.jms.services.ConfigEnvironment.
     enableWebSphereTracingAndLogging(ConfigEnvironment.java:613)
     at com.ibm.mq.jms.services.ConfigEnvironment.<clinit>
     (ConfigEnvironment.java:180)
   .
   When the enableTracing method is called as part of the enable
   tracing and logging, this calls into 'getLibraryName'. This is
   because there is a check to see if we are running in CICS before
   trace is enabled, and the native function which is used to do
   this check is located in the library 'libwmqjbind'. As this is a
   WAS 6 install, there is no embedded WMQ install by default, so a
   check for this lib fails.
   .
   This is occurring because the jars used by default as a JMS
   client in WAS 6.0.2 are the WebSphere MQ 5.3 jars. When used in
   WAS, this particular method seems to be expecting the embedded
   WMQ install to be there, as it was in WAS 5.1.
   .
   This check for CICS has been removed in the WMQ v6 jars, however
   these are not used as the MQ JMS provider in WAS until WAS 6.1.
   .
   The fix will involve altering the WMQ jar files that come with
   WAS to use as a JMS client.
   
   
    
   
   

LOCAL FIX
 *  Please contact WebSphere L2 support so they can work with the
   change team to provide replacement jar file that can be used as
   a circumvention.
   
   
    
   
   

PROBLEM SUMMARY
 *  ****************************************************************
   * USERS AFFECTED: Users of WebSphere Application Server v6.0   *
   *                 using WebSphere MQ as a JMS provider.        *
   ****************************************************************
   * PROBLEM DESCRIPTION: This APAR updates the WebSphere MQ      *
   *                      JMS client libraries shipped with       *
   *                      WebSphere Application Server V6.0 to    *
   *                      V5.3 Fix Pack 14 (CSD14).               *
   *                                                              *
   *                      WebSphere MQ V5.3 CSD14 contains        *
   *                      a fix which allows WebSphere MQ         *
   *                      client trace to be gathered on          *
   *                      WebSphere Application Server            *
   *                      V6.0 for z/OS.                          *
   ****************************************************************
   * RECOMMENDATION:                                              *
   ****************************************************************
   In versions of the WebSphere MQ V5.3 JMS client libraries
   prior to V5.3 Fix Pack 14, a defect exists which prevents
   WebSphere MQ JMS client trace from being gathered when the
   client with used with WebSphere Application Server for z/OS.
   
   The following is seen in the WebSphere Application Server log:
   
   ERROR: Unable to initialize WebSphere Application Server for
   tracing and logging: using JMS tracing and logging: Can't find
   library wmqjbind  (libwmqjbind.so) in sun.boot.library.path or
   java.library.path
   
   
    
   
   

PROBLEM CONCLUSION
 *  This APAR updates the WebSphere MQ JMS client libraries
   shipped with WebSphere Application Server V6.0 to
   WebSphere MQ V5.3 Fix Pack 14 (previously known as CSD14)
   level on all platforms (including z/OS)
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   PK41291
   
   
 * REPORTED COMPONENT NAME
   WEBSPHERE FOR Z
   
   
 * REPORTED COMPONENT ID
   5655I3500
   
   
 * REPORTED RELEASE
   100
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2007-03-15
   
   
 * CLOSED DATE
   2007-11-02
   
   
 * LAST MODIFIED DATE
   2007-11-02
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   PLAT MSG COM
   
   
 * FIXED COMPONENT ID
   620400101
   
   

APPLICABLE COMPONENT LEVELS
 * R100 PSY
   UP