Title: IBM IC55668: UNATTENDED INSTALL FAILS IF LOCAL ADMINISTRATOR ACCOUNT IS IDENTIFIED TO RUN THE COMMON AGENT SERVICE - United States

Text:
AIX SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  PMR NO:  66848,999,000       APAR SEV:  3
   COMPID:  5608TC300    REL:  3.3.x
   Symptom Code:   IN    Symptom Key Word:  INCORROUT
   Abstract:  UNATTENDED (SILENT) INSTALL OF WINDOWS DATA AND/OR
              FABRIC SUBAGENTS FAIL TO INSTALL IF LOCAL
              ADMINISTRATOR ACCOUNT IS SELECTED TO RUN THE
              COMMON AGENT SERVICE.
              ..
   Problem Description:  Silent (unattended) install of a windows
   data and/or fabric subagent will fail at starting the common
   agent if you choose to use the
   local administrator account for the CA service to run under.  If
   this is the case, the local administrator isn't automatically
   granted the needed right to "log on as a service".  This will
   cause a cascaded failure of the data subagent installation and
   fabric subagent because the common agent does not start and
   register.
   ..
     Development comments and/or feedback (if relevant): Opening
   per dev request.
   ..
   The defect is against the: install code for agents
   Server/Manager build/release:  3.x
   Agent build/release: 3.x
   Server/Manager:  n/a
   Agent:   Windows
   DB used for Server: n/a
   Is the defect platform or DB dependant: yes; this is a Windows
   OS installation problem.
   Problem as described by customer: see above.
   Customer impact:  minimal; customer defect
    Recreate steps:  see above
   Problem Determination Documentation:    n/a
   Version Introduced: 3.x
   Local Fix
   Here's what you need to do to get the common agent functional
   and the subagents to install.
   1. Go to the windows services and try to start the CA service.
     a) If it starts good...
     b) If not, you'll likely get an error indicating Administrator
   does not have logon as a service rights. In this case, open the
   CA service panel and edit the "logon" tab to either re-enter the
   administrators password, or set it to use another account that
   does have the rights to "log on as a service".  Alternatively,
   you could enter LocalSystem. If you re-enter the administrators
   password, it then grants the local administrator logon as a
   service rights.
   2. Check the ep.reg file in C:\Prog~\tivoli and make sure it has
   the correct path to the common agent.  If it doesn't, check the
   ep.bak file, if the ep.bak file has the correct path, then
   delete the ep.reg file, make a copy of the ep.bak file and
   rename it to ep.reg. (for local installs the installer checks
   the ep.reg file to see if there is already a CA installed if
   it's empty the installer assumes a new CA needs to be installed.
   In this case that's not true.)
   3. Check to see the CA is up and running netstat -an check for
   ports 9510, 9514, and 9515 or run the agentcli.bat deployer list
   bundles state from program files\ibm\tpc\ca and make sure
   everything is in an active state.
   4. Make the appropriate changes in the setup_agents.iss file to
   use the existing CA and re-run the install (if using the silent
   install again).
   Most windows admins don't want to use the local administrator
   account to run a service under; this customer happens to require
   that.
   
   
    
   
   

LOCAL FIX

PROBLEM SUMMARY
 *  Users Affected:
   Those using silent install.
   
   Problem Description:
   Silent install fails if local admin account is used for the
   common agent service.
   
   
    
   
   

PROBLEM CONCLUSION
 *  A fix will be available in upcoming IBM TotalStorage
   Productivity Center monthly interim fixes.
   
   version 3.3.1 (target August 2008)
   version 3.3.2 (target September 2008 or later)
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   IC55668
   
   
 * REPORTED COMPONENT NAME
   TPC FOR DATA
   
   
 * REPORTED COMPONENT ID
   5608TC300
   
   
 * REPORTED RELEASE
   33W
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2008-03-14
   
   
 * CLOSED DATE
   2008-06-11
   
   
 * LAST MODIFIED DATE
   2009-05-18
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   TPC FOR DATA
   
   
 * FIXED COMPONENT ID
   5608TC300
   
   

APPLICABLE COMPONENT LEVELS
 * R33A PSY
   UP
   
   
 * R33H PSY
   UP
   
   
 * R33L PSY
   UP
   
   
 * R33N PSY
   UP
   
   
 * R33S PSY
   UP
   
   
 * R33W PSY
   UP