Title: IBM Insertion errors when executing script to migrate the Rule Team Server database to Decision Center - United States

Text:
 TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 Some SQL insertion errors are thrown when executing the ant script (gen-migrationXX-script) to migrate the database from Rule Team Server (RTS) V7.0/7.1 to Decision Center (DC) 7.5/8.0/8.5. The migration failed as a result. 

SYMPTOM
The following exceptions are logged : 

execute-schema: 
[execute-schema] [serverURL] 'http://localhost:9080/teamserver' 
[execute-schema] [datasourceName] 'jdbc/ilogDataSource' 
[execute-schema] [username] 'XXXXX' 
[execute-schema] [password] '********'
[execute-schema] [file] 'migrateDb.sql' 
[execute-schema] [INFO] org.springframework.context.support.
ClassPathXmlApplicationContext - Refreshing org.springframework.context.
support.ClassPathXmlApplicationContext@10181018: startup date [Mon Sep
02 19:10:45 CEST 2013]; root of context hierarchy 
...
[execute-schema] [ERROR] Following exceptions were raised:
[execute-schema] [ERROR]Error executing statement: 'INSERT INTO 
ODMADMIN.BOM2XOMMAPPING (ID, STARTID, ENDID, ORIGINALID, NAME,
[execute-schema] DOCUMENTATION, PROJECT, BODY, PLATFORM, GRP, UUID,
BASELINE, 
[execute-schema] TYPE) SELECT OLDBOM2XOMMAPPING.ID, OLDBOM2XOMMAPPING. 
STARTID,
...
ODMADMIN.BASELINE.PARENT IS NULL) OR (RTSADMIN.VERSION.DELETED = 'T'
AND ODMADMIN.BASELINE.NAME = 'recyclebin'))' : An unexpected exception
was thrown
[execute-schema] [ERROR]Error executing statement: 'INSERT INTO 
ODMADMIN.VOCABULARY(ID, STARTID, ENDID, ORIGINALID, NAME, LOCALE,
[execute-schema] DOCUMENTATION, BODY, PROJECT, GRP, UUID, BASELINE,
[execute-schema] TYPE) SELECT OLDVOCABULARY.ID, OLDVOCABULARY.STARTID, 
OLDVOCABULARY.ENDID,
...
ODMADMIN.BASELINE.NAME = 'recyclebin'))' : An unexpected exception was
thrown
[execute-schema] [ERROR]Error executing statement: 'INSERT INTO 
ODMADMIN.BOM(ID, STARTID, ENDID, ORIGINALID, NAME, DOCUMENTATION,
[execute-schema] PROJECT, BODY, GRP, UUID, BASELINE, TYPE) SELECT
OLDBOM.ID, OLDBOM.STARTID,
...
(RTSADMIN.VERSION.DELETED = 'T' AND ODMADMIN.BASELINE.NAME =
'recyclebin'))' : An unexpected exception was thrown
... The statement has been rolled back.
BUILD SUCCESSFUL
Total time: 5 seconds 


CAUSE
From ODM V7.5 onwards, a new constraint on the name column has been added on the Decision Center tables, namely BOM, BOM2XOMMAPPING, and VOCABULARY. 

The name attribute must be unique in the vocabulary, and for BOM, and BOM to XOM mapping. This was not the case in versions prior to V7.5. 


RESOLVING THE PROBLEM
 Before executing the migration script, it is required to check these three tables and resolve the naming attribute conflict. 

This step is described in the documentation at Operational Decision Manager V8.5 > Migrating and upgrading your applications > Migrating from JRules > Migrating from JRules V7 > Migrating the repository database > Resolving conflicts in the name attribute [http://pic.dhe.ibm.com/infocenter/dmanager/v8r5/topic/com.ibm.wodm.family.migrating.rules/topics/tpc_mig_resolving_conflicts_name.html]. 


RELATED INFORMATION
#Migrating from JRules to ODM [http://www.ibm.com/support/docview.wss?uid=swg21589725]