Title: IBM IC97726: FAILED DEPLOYMENT ON MULTI INSTANCE BROKER AFTER START-UP WHEN BROKER COMMANDS ARE RUN ON STANDBY SERVER - United States

Text:
  A FIX IS AVAILABLE
IBM Integration Bus V9.0 - Fix Pack 9.0.0.2 [http://www-01.ibm.com/support/docview.wss?uid=swg24037877]


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  A multi-Instance broker is started in active mode, and a
   secondary instance is started in standby mode on another server.
   
   An mqsichangetrace command is then run on the standby server for
   the same multi-instance broker.
   
   During a deployment to an execution group on the active broker
   instance the following sequence of error messages are observed
   on the
   active machine, and all the multi-instance broker's execution
   groups stop and restart.
   
   BIP2111E: Message broker internal error: diagnostic
   information 'ImbConfigStore::obtainHALock () reported 'Server
   name does not
   match in ImbConfigStore::obtainHALock' with values... ''..
   
   BIP8238E: The multi-instance broker  has detected that another
   broker instance is active. This broker instance stops
   and restarts to maintain integrity of the broker data.
   
   Additional Symptom(s) Search Keyword(s):
   multi-instance,BIP2111E, BIP8238E,deploy
   
   
    
   
   

LOCAL FIX

PROBLEM SUMMARY
 *  ****************************************************************
   USERS AFFECTED:
   All users of WebSphere Message Broker or IBM Integration Bus who
   use multi-instance brokers.
   
   
   Platforms affected:
   MultiPlatform
   
   ****************************************************************
   PROBLEM SUMMARY:
   When an mqsichangetrace or mqsistop command is run against a
   standby multi-instance broker this sometimes bypasses the
   locking mechanism used to protect the shared file directories
   owned by the multi-instance broker.
   
   This causes the broker active instance to stop and restart
   during a deploy or when administrative commands are run
   against it.
   
   
   There are a number of resource name changes between WebSphere
   Message Broker and IBM Integration Bus Version 9.0. For
   details visit
   http://pic.dhe.ibm.com/infocenter/wmbhelp/v9r0m0/topic/com.ibm.e
   tools.mft.doc/bb23814_.htm [http://pic.dhe.ibm.com/infocenter/wmbhelp/v9r0m0/topic/com.ibm.etools.mft.doc/bb23814_.htm]
   
   
    
   
   

PROBLEM CONCLUSION
 *  Administrative commands run against a standby broker instance
   are no longer allowed to obtain locks on the shared directories
   owned by a multi-instance broker.
   
   ---------------------------------------------------------------
   The fix is targeted for delivery in the following PTFs:
   
   Version    Maintenance Level
   v7.0       7.0.0.7
   v8.0       8.0.0.5
   v9.0       9.0.0.2
   v10.0      10.0.0.4
   
   The latest available maintenance can be obtained from:
   http://www-01.ibm.com/support/docview.wss?rs=849&uid=swg27006041 [http://www-01.ibm.com/support/docview.wss?rs=849&uid=swg27006041]
   
   If the maintenance level is not yet available,information on
   its planned availability can be found on:
   http://www-1.ibm.com/support/docview.wss?rs=849&uid=swg27006308 [http://www-1.ibm.com/support/docview.wss?rs=849&uid=swg27006308]
   ---------------------------------------------------------------
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   IC97726
   
   
 * REPORTED COMPONENT NAME
   WEB MESSAGE BRO
   
   
 * REPORTED COMPONENT ID
   5724J0510
   
   
 * REPORTED RELEASE
   700
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2013-11-18
   
   
 * CLOSED DATE
   2014-01-31
   
   
 * LAST MODIFIED DATE
   2015-10-26
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   WEB MESSAGE BRO
   
   
 * FIXED COMPONENT ID
   5724J0510
   
   

APPLICABLE COMPONENT LEVELS
 * R700 PSY
   UP