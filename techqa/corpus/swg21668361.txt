Title: IBM The bootstrapProcessServerData.sh command to fails with a Teamworks exception for IBM Business Process Manager (BPM) - United States

Text:
 TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 When you attempt to initilize the Process Center or Process Server database using the bootstrap command, you see a Teamworks exception. This issue occurs only with IBM Business Process Manager installations that include a DB2 database. 

SYMPTOM
The following error will be logged in the wsadmin.traceout file when you run the bootstrapProcessServerData.sh command. 

[3/17/14 14:24:40:750 CDT] 00000001 SQLErrorCodes I org.springframework.jdbc.support.SQLErrorCodesFactory <init> SQLErrorCodes loaded: [DB2, Derby, H2, HSQL, Informix, MS-SQL, MySQL, Oracle, PostgreSQL, Sybase]
[3/17/14 14:25:01:466 CDT] 00000001 wle_versionin W CWLLG0541W: Current version lock for branch Branch.34a0ce6e-631b-465d-b0dc-414c39fb893f missing. Creating now.
[3/17/14 14:25:01:516 CDT] 00000001 wle I CWLLG0377I: A snapshot with ID 2064.be3f820a-e9c8-4956-a771-5c9b24f10d29 is already present on this server.
[3/17/14 14:25:01:554 CDT] 00000001 wle_expimp I CWLLG0162I: Import Failed
[3/17/14 14:25:01:555 CDT] 00000001 BootstrapHelp I File <BPM_root>/BPM/Lombardi/imports/process-portal.twx failed.....
[3/17/14 14:25:01:555 CDT] 00000001 BootstrapHelp I Branch with ID Branch.34a0ce6e-631b-465d-b0dc-414c39fb893f not found.
[3/17/14 14:25:01:555 CDT] 00000001 BootstrapHelp E 
com.lombardisoftware.core.TeamWorksException: Branch with ID Branch.34a0ce6e-631b-465d-b0dc-414c39fb893f not found.
at com.lombardisoftware.server.ejb.persistence.CommonDAO.assertNotNull(CommonDAO.java:65)
at com.lombardisoftware.server.ejb.persistence.CommonDAO.assertMapNotNull(CommonDAO.java:45)
at com.lombardisoftware.server.ejb.persistence.dao.UnversionedPODAO.findByPrimaryKey(UnversionedPODAO.java:435)
at com.lombardisoftware.server.ejb.persistence.DefaultHandler.findByPrimaryKey(DefaultHandler.java:119)


CAUSE
The Process Center or the Process Server database was not created using the correct page size, which is 32768.


RESOLVING THE PROBLEM
To resolve this issue, recreate the Process Center or the Process Server database with a page size of 32768. 


If the installation is new, complete the following steps to recreate the Process server database: 

 1. Drop the Process Server database 
    
    
 2. Recreate the database using the scripts that are generated for the deployment manager profile under the deployment_manager_profile_name\dbscripts\ProcessServer\DBType\ directory.
    
    
    For detailed instructions, refer to the following product documentation topics:  * Creating DB2 databases [http://www.ibm.com/support/knowledgecenter/SSFTDH_8.5.0/com.ibm.wbpm.imuc.sbpm.doc/topics/db_create_nd_lin_db2.html] 
     * Running the generated DB2 database scripts [http://www.ibm.com/support/knowledgecenter/SSFTDH_8.5.0/com.ibm.wbpm.imuc.sbpm.doc/topics/bpmcfg_db_run_lin_db2.html]
       
       
    
    
 3. Run the appropriate bootstrapProcessServerData [http://www.ibm.com/support/knowledgecenter/SSFTN5_8.5.0/com.ibm.wbpm.imuc.ebpmps.doc/topics/db_bootstrap_nd_sol.html] command again to load the system data after creating the new Process Server database.


The Performance Data Warehouse also requires a database page size of 32768. If the Performance Data Warehouse was not created with the correct table size, use the previous instructions to recreate the Performance Data Warehouse database and avoid future run time problems.  


Cross reference information Segment Product Component Platform Version Edition Business Integration IBM Business Process Manager Standard Installation / Configuration AIX, Linux, Linux zSeries, Solaris, Windows 8.5.5, 8.5 Business Integration IBM Business Process Manager Express Installation / Configuration Linux, Windows 8.5.5, 8.5 
PRODUCT ALIAS/SYNONYM
 BPM