Title: IBM WebSphere v8.0 server profile created as a Windows service could not be started or published to in RAD and how to remove the service? - United States

Text:
server; start; publish. console; windows service.WASservice.exe; WASService; remove; service name; service; dash; space TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 An IBM WebSphere Application Server (WAS) v8.0.0.x server profile created to be run as a Microsoft Windows service could not be started on Windows 7 32-bit in IBM Rational Application Developer (RAD) v8.x. Both are installed in C:\Program Files using an administrator group ID. Security was not enabled on the server. 

SYMPTOM
Could not start the WAS v8 server profile or publish an EAR/application to it in Rational Application Developer. 

In another related user scenario, when running trying to run an application in a WAS server (and start the server) using Run on Server the following error occurred: 

... failed while trying to start windows service associated with server. Problem is executing was service. exc: starting service:machine name node 01 service failed to start. Return code =-1.



CAUSE
RAD was not started using "Run As Administrator" and the WAS server profile was created to be run as a Windows service.


ENVIRONMENT
Windows v7 Professional 32-bit or 64-bit



DIAGNOSING THE PROBLEM

1. Is RAD on Windows 7 (or Vista) installed under C:\Program Files or C:\Program Files (x86)?
2. Is the WebSphere server profile listed in Windows under 
Windows Start > Control Panel > Administrative Tools > Services?



RESOLVING THE PROBLEM
This is a two part problem. However, the major issue is that the WAS server profile was created to be run as a Windows service. 

 *  In the case of Windows 7 (or Vista), with both RAD and WAS installed in the C:\Program Files directory, you must start RAD using Run As Administrator, especially in order to run WAS in IBM Rational Software Architect (RSA) or RAD. 
   
   Note: In Windows 7 you can set up an application to be Run As Administrator by default.
   Right-click on the RAD icon on the desktop (or under Start > Programs)
   > Properties : Compatibility tab .
   There is a checkbox you can check to "Run As Administrator". 
   
   After restarting RAD using Run As Administrator, it is now possible to start/stop the server in RAD but the console view does not show anything and publishing to the server is not successful.
   This leads to the primary issue next.
   Primary issue: You should never create an WAS server profile as a service as it can lead to problems in RAD Server Tools and is not supported in RAD v6+ for any WAS v6+ server.
   
   For example, this RAD document 1263551: Creating a new WebSphere Application Server v6.1 profile [http://www-01.ibm.com/support/docview.wss?uid=swg21263551] stresses to use the Advanced profile creation option and to uncheck the "Run the application as a Windows service" checkbox when creating a profile. It also applies to any WAS 6x/7x/8x server profile created for use in any RAD v7x/8x. In RAD v8x use the Advanced creation selection in the WAS Profile Management Tool (PMT) under:
   Windows > Preferences > Server > WebSphere Application Server 
   
   If you have created a WAS server profile as a Windows service, there is a WAS command to undo this. In the Windows command prompt: 
   
   > [WAS_HOME]\bin\WASService.exe -remove [WAS_SERVICE_NAME] 
   
   For any WAS v6x/7x installed as part of RAD:
   [WAS_HOME] == [RAD install dir]\SDP\runtimes\base_v<n>
   Any WAS v8x server provided with RAD is installed as a standalone server, in a location apart from RAD.
   
   [WAS_SERVICE_NAME] 
   
   The Windows service name for a WAS server profile can be determined using either of these options:  * Take a look at the [WAS_HOME]\profiles\AppSrv0<n>\logs folder. There would be <service name> service.log file if it is a service. The file typically looks like:
      <somename>-<host>Node<0n>Service.log 
      The service name is <somename>-<host>Node<0n>
      
    * In Windows you can find a list of services under 
      Windows Start > Control Panel > Administrative tools > Services
      
      Open the tool and find the service starting with:
      IBM WebSphere Application Server v<N.x> - <somename>-<host>Node<0n>
      The later part of the name after the dash with spaces around it: 
      <somename>-<host>Node<0n>
      , is the service name required by the WASService.exe command.
      Right-click on WebSphere Application Server v<N.x> ... > Properties: General [Tab] will also show it.
   
   
 *  
   This non-IBM reference has helpful screen shots: Removing WAS Service [http://wpcertification.blogspot.ca/2009/07/removing-was-service.html]. It is provided " as is" and is not an officially supported document. Similarly, these non-IBM references explain the WASService.exe command and how to specify the service name for this command, which is not the same as the full Windows service name: 
   - Using the WASService.exe Command [http://blog.webagesolutions.com/archives/172] 
   - How to delete a profile from a WebSphere 6.1 application server [http://www.webspheretools.com/sites/webspheretools.nsf/docs/Delete%20profile%20from%20a%20WebSphere%206.1%20application%20server.!opendocument] 
   
   For example, in Windows the WAS85 Services name has a "dash" with spaces around it: 
   "IBMWAS85Service - SRV-9MINE1Node01" 
   , before SRV-9MINE1Node01 . 
   You must use the service name after the dash with spaces around it: 
   > WASService .exe -remove "SRV-9MINE1Node01" 
   
   Alternately, create a new profile that is not to be run as a service, and use it. 
   
   

References : 

The following RAD Information Center (KC) item stresses not to create a WAS server profile as a service in RAD. 
- RAD v8.5 IC item: 
Creating a profile on a local WebSphere Application Server V8.5, V8.0, or V7.0 [http://www.ibm.com/support/knowledgecenter/SSRTLW_8.5.5/com.ibm.servertools.doc/topics/tcprofile70.html] 
 * 
 * 
 * 
 * 
 * 
 * 
 * Tip:
 * 
 * 
 * 
 * Run the Application Server process as a Windows service
 * 
 * startServer
 * 
 * wasservice
 * 
 * 
 * 
 * 

------------------------ 

More information on Windows services and WASService.exe -remove. 

Changing a WAS or any Windows service to start "manually" from "automatically" in the Windows Services tool is NOT THE SAME as removing the Windows service using the WebSphere 
command/utility: 
> WASService.exe -remove service_name 

WASService "remove" deletes the service. 
Changing to "manual" in Windows Services will keep the service on Windows 
but allow you to start the service manually. 
If you do not want the WAS profile to be a service, then remove it. 
RAD requires removing the service 

A "Windows" and WAS service FYI: 

If you want to keep the WAS profile as a service (assuming its not used by RAD), and don't want the startServer or startNode or startManager commands to use the Windows service on startup then change it to "disabled" instead of "manual" in Windows. 

Windows services have four startup types: 

- Automatic: it is started by the Windows O/S at system bootup. 

- Automatic (delayed start) "NEW": it is started by the Windows O/S at system bootup with a delay. 
A service marked as Automatic (Delayed Start) will start shortly after all other services designated as Automatic have been started.This will ensure that the critical services get the most resources early and become available sooner, while the non-critical services 
start a bit later. The default delay of 120 seconds, which can be overridden by the AutoStartDelay value in HKLM\SYSTEM\CurrentControlSet\Control. 

- Manual: not started at bootup. 
The service will start only when Windows or another service needs it, or if you invoke something to start the service. You can use the command: net start < servicename> , from the command line to enable a manual service. refer to: Start, stop, pause, resume, or restart a service [https://msdn.microsoft.com/en-us/microsoft-r/cc736564.aspx]. When you reboot, the service will again be off until you restart it. 

- Disabled: not started at bootup 
The service will stay off, regardless of whether you try to start it or not. Other services or applications which depend on the disabled service may fail. 

Consult the Microsoft documentation for accurate and latest details on services 
--------------------- 
RELATED INFORMATION
 WASv7: WASService command [http://pic.dhe.ibm.com/infocenter/wasinfo/v7r0/index.jsp?topic=%2Fcom.ibm.websphere.express.doc%2Finfo%2Fexp%2Fae%2Frins_wasservice.html]