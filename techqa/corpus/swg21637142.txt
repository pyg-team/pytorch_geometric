Title: IBM MarshalException and/or UnsatisfiedLinkError when Rule Execution Server is called on z/OS through EJB3 - United States

Text:
 TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 I get a MarshalException and/or UnsatisfiedLinkError message when Rule Execution Server is called remotely on z/OS through the API of Enterprise JavaBeans 3 (EJB3) rule sessions. 

SYMPTOM
I get the following errors when Rule Execution Server is called remotely on z/OS through the API of EJB3 rule sessions:

java.rmi.MarshalException: CORBA MARSHAL 0x4942f896 Maybe; nested exception is:
org.omg.CORBA.MARSHAL: vmcid: IBM minor code: 896 completed: Maybe
at com.ibm.CORBA.iiop.UtilDelegateImpl.mapSystemException(UtilDelegateImpl.java:277)
at javax.rmi.CORBA.Util.mapSystemException(Util.java:84)
at ilog.rules.res.session.impl.ejb3._IlrStatelessSessionRemote_Stub.execute(_IlrStatelessSessionRemote_Stub.java)
...


and/or

Exception in thread "main" java.lang.UnsatisfiedLinkError: bbojutil (Not found in java.library.path)
at java.lang.ClassLoader.loadLibraryWithPath(ClassLoader.java:994)
at java.lang.ClassLoader.loadLibraryWithClassLoader(ClassLoader.java:958)
at java.lang.System.loadLibrary(System.java:453)
at com.ibm.ws390.utility.JAVAtoCPPUtilities.loadNativeLibrary(JAVAtoCPPUtilities.java:52)
at com.ibm.ws390.utility.JAVAtoCPPUtilities.(JAVAtoCPPUtilities.java:31)


ENVIRONMENT
z/OS server


DIAGNOSING THE PROBLEM
As explained in the MustGather: Object Request Broker (ORB) problems with WebSphere Application Server document [http://www.ibm.com/support/docview.wss?uid=swg21157005], activate the CORBA trace on the client side by passing the following JVM arguments: 


-Dcom.ibm.CORBA.Debug=true
-Dcom.ibm.CORBA.CommTrace=true 
-Dcom.ibm.CORBA.Debug.Output=client.log


RESOLVING THE PROBLEM
Regarding the MarshalException message, refer to the WebSphere Application Server (WAS) documentation at Network Deployment (z/OS), Version 7.0 > Developing and deploying applications > Client applications > Deploying client applications > Running the IBM Thin Client for Enterprise JavaBeans (EJB) [http://pic.dhe.ibm.com/infocenter/wasinfo/v7r0/index.jsp?topic=%2Fcom.ibm.websphere.zseries.doc%2Finfo%2Fzseries%2Fae%2Ftcli_ejbthinclient.html]: using the com.ibm.ws.ejb.thinclient.zos_7.0.0.jar file on the client side removes that error.


Regarding the UnsatisfiedLinkError message, the solution depends on the environment of the client that calls WAS on zOS: 

 * For a Windows client, use the com.ibm.ws.ejb.thinclient_7.0.0.jar file to remove the issue. 
 * For a zOS client, the com.ibm.ws.ejb.thinclient.zos_7.0.0.jar file is appropriate, but if the client does not have access to the WAS runtime native libraries, use the com.ibm.ws.ejb.thinclient_7.0.0.jar file instead, along with the JVM option -Dcom.ibm.websphere.zos.forcedist=true. This solution is suggested in the developerWorks blog Thinner 'thin clients' on WebSphere Application Server V7 [https://www.ibm.com/developerworks/community/blogs/aimsupport/entry/thinner_thin_clients_on_websphere_v7].

RELATED INFORMATION
#"Hello World" Remote EJB3 client for RES V7 [http://www.ibm.com/support/docview.wss?uid=swg21461685]
Calling and packaging EJB rule sessions for Java EE [http://pic.dhe.ibm.com/infocenter/dmanager/v8r0m1/topic/com.ibm.wodm.dserver.rules.res.managing/topics/tsk_res_dev_ejb_packag_j2ee.html]


 

Cross reference information Segment Product Component Platform Version Edition Business Integration WebSphere ILOG JRules Modules:Execution Server (BRES / RES) z/OS 7.1, 7.0