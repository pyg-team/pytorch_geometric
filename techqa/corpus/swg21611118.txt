Title: IBM WebSphere Application Server Service Integration Bus messaging engine startup
fails with java.sql.SQLException: ORA-01031:insufficient privileges - United States

Text:
ORA-01031 CWSIS1501E SQLException CWSIS0002E TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 On restarting Websphere Application Server, the Service Integration Bus messaging engine fails to start due to java.sql.SQLException: ORA-01031:insufficient privileges 

SYMPTOM
The following errors are logged in the SystemOut.log: 

CWSIS0002E: The messaging engine encountered an exception while starting. 
Exception: com.ibm.ws.sib.msgstore.PersistenceException: CWSIS1501E: The data 
source has produced an unexpected exception: java.sql.SQLException: ORA-01031:
insufficient privileges


FFDC is produced with the following stack:
key = java.sql.SQLException
com.ibm.ws.rsadapter.jdbc.WSJdbcStatement.pmiExecuteUpdate 1384
Exception = java.sql.SQLException
Source = com.ibm.ws.rsadapter.jdbc.WSJdbcStatement.pmiExecuteUpdate
probeid = 1384
Stack Dump = java.sql.SQLException: ORA-01031: insufficient privileges
at oracle.jdbc.driver.SQLStateMapping.newSQLException(SQLStateMapping.java:74)
at oracle.jdbc.driver.DatabaseError.newSQLException(DatabaseError.java:131)
at oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:204)
at oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:455)
at oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:413)
at oracle.jdbc.driver.T4C8Oall.receive(T4C8Oall.java:1034)
at oracle.jdbc.driver.T4CStatement.doOall8(T4CStatement.java:183)
at oracle.jdbc.driver.T4CStatement.executeForRows(T4CStatement.java:942)
at oracle.jdbc.driver.OracleStatement.doExecuteWithTimeout(OracleStatement.
java:1222)
at oracle.jdbc.driver.OracleStatement.executeUpdateInternal(OracleStatement.
java:1706)
at oracle.jdbc.driver.OracleStatement.executeUpdate(OracleStatement.java:1674)
at oracle.jdbc.driver.OracleStatementWrapper.executeUpdate(OracleStatement
Wrapper.java:275)
at com.ibm.ws.rsadapter.jdbc.WSJdbcStatement.pmiExecuteUpdate(WSJdbcStatement.
java:1612)
at com.ibm.ws.rsadapter.jdbc.WSJdbcStatement.executeUpdate(WSJdbcStatement.
java:993)
at com.ibm.ws.sib.msgstore.persistence.impl.Table.createSchema(Table.java:510)
at com.ibm.ws.sib.msgstore.persistence.impl.Table.initialize(Table.java:208)
at com.ibm.ws.sib.msgstore.persistence.impl.MEOuterOwnerTable.initialize(MEOuter
OwnerTable.java:76)
at com.ibm.ws.sib.msgstore.persistence.impl.TableManager$1.run(TableManager.
java:258)
at com.ibm.ws.sib.msgstore.persistence.impl.DatasourceController.performFirst
Action(DatasourceController.java:182)
at com.ibm.ws.sib.msgstore.persistence.impl.TableManager.initialize(Table
Manager.java:240)
at com.ibm.ws.sib.msgstore.persistence.impl.MEOuterOwnerTable.initialize
(MEOuterOwnerTable.java:76)
at com.ibm.ws.sib.msgstore.persistence.impl.TableManager$1.run(TableManager.
java:258)
at com.ibm.ws.sib.msgstore.persistence.impl.DatasourceController.performFirst
Action(DatasourceController.java:182)
at com.ibm.ws.sib.msgstore.persistence.impl.TableManager.initialize(Table
Manager.java:240)
at com.ibm.ws.sib.msgstore.persistence.impl.PersistentMessageStoreImpl.
start(PersistentMessageStoreImpl.java:194)
at com.ibm.ws.sib.msgstore.impl.MessageStoreImpl.start(MessageStoreImpl.
java:1486)
at com.ibm.ws.sib.admin.impl.JsMessagingEngineImpl.start(JsMessagingEngine
Impl.java:543)
at com.ibm.ws.sib.admin.impl.HAManagerMessagingEngineImpl.activate(HAManager
MessagingEngineImpl.java:978)
at com.ibm.ws.sib.admin.impl.JsActivationThread.run(JsActivationThread.
java:92)


CAUSE
The user running the messaging engine does not have all the required privileges to access the datastore.



RESOLVING THE PROBLEM
When using Oracle for the messaging engine datastore, please make sure that either the SchemaName and the userid specified in the Authentication Alias of the Data Source used by the messaging engine are same or if they are different the userid must have all the required privileges.

RELATED INFORMATION
 Database privileges: [http://www.ibm.com/support/knowledgecenter/SSAW57_8.0.0/com.ibm.websphere.nd.multiplatform.doc/info/ae/ae/rjm0650_.html]
Configuring a messaging engine data store to use a data [http://www.ibm.com/support/knowledgecenter/SSAW57_8.0.0/com.ibm.websphere.nd.doc/info/ae/ae/tjm0045_.html?cp=SSAW57_8.0.0%2F1-8-33-1-0-8-10-0]






Cross reference information Segment Product Component Platform Version Edition Business Integration WebSphere MQ Service Integration Technologies /SIB AIX, HP-UX, Linux, Solaris, Windows 7.5, 7.1, 7.0.1, 7.0 Business Integration WebSphere Enterprise Service Bus SIBus AIX, HP-UX, Linux, Solaris, Windows Business Integration WebSphere Process Server SIB (service integration bus) AIX, HP-UX, Linux, Solaris, Windows Business Integration WebSphere Service Registry and Repository Not Applicable AIX, HP-UX, Linux, Solaris, Windows 
PRODUCT ALIAS/SYNONYM
 WebSphere Application Server WAS SIB SIBUS SI BUS