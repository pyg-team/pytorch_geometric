Title: IBM MQIPT users who upgrade to MQ v7 and later releases should first upgrade MQIPT to avoid failures caused by the MQ v7 protocol changes. - United States

Text:
 TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 You attempt to use MQIPT (SupportPac MS81) V1.3.3 (or earlier) with IBM WebSphere MQ V7 but it results in errors such as "connection reset by peer" . 

CAUSE
MQIPT V1.3.3 is not compatible with WebSphere MQ V7. This is because there are several significant changes in the MQ channel protocol at v7 which fundamentally change the way that MQIPT needs to work. In particular, CLNTCONN/SVRCONN TCP/IP connections are multiplexed by default so MQIPT needs to handle full duplex connections. Data must be able to flow in both directions simultaneously. The old MQIPT V1.3.3 does not properly support full duplex operation and so in general it cannot be used with MQ V7 client applications. 

A customer should use MQIPT V2.0.0.3 (or later) for support for MQ V7.x to eliminate any MQ protocol incompatibility as a possible cause of failures.


DIAGNOSING THE PROBLEM
In general it can be difficult to diagnose a "connection reset by peer" error, as there are various possible causes including: 

- failure of an SSL/TLS handshake 

- network connectivity failure (for example, failing router, load balancer etc.) 

- badly configured proxy server (especially when SOCKS or HTTP are used) 

For troubleshooting, it is recommended to collect error logs and traces showing the failure. An SSL/TLS handshake failure is a possible cause.


RESOLVING THE PROBLEM
Users of MQIPT who upgrade to MQ V7 and later releases should first upgrade MQIPT, to avoid failures caused by the MQ V7 protocol changes. 

RELATED INFORMATION
 MS81: WebSphere MQ Internet Pass-Thru [http://www-01.ibm.com/support/docview.wss?uid=swg24006386]


 

PRODUCT ALIAS/SYNONYM
 WMQ MQ MQSeries