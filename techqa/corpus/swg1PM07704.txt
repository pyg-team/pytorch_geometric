Title: IBM PM07704: MQRC=2500 RETURNED TO MQOPEN REQUEST BY MDB LISTENING TO A      TOPIC THROUGH A NON-DURABLE SUBSCRIPTION. - United States

Text:
z/os SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS DUPLICATE OF ANOTHER APAR.
    
   
   

ERROR DESCRIPTION
 *  The customer reported getting an MQRC=2500
   ('MQRC_HCONN_ASYNC_ACTIVE') returned to an mqopen request that
   was issued by a MDB (message driven bean), while listening to
   topic through a non-durable subscription.  The following error
   messages were received.
   .
   JMSCMQ0001: WebSphere MQ call failed with compcode '2'
   ('MQCC_FAILED') reason '2500' ('MQRC_HCONN_ASYNC_ACTIVE').
   .
   FunctionName:
   Java_com_ibm_mq_jmqi_local_internal_base_Native_lpiSpiSubscribe
   SourceId:
   Java_com_ibm_mq_jmqi_local_internal_base_Native_lpiSpiSubscribe
    Category: FINEST
   ExtendedMessage:
   (Java_com_ibm_mq_jmqi_local_internal_base_Native_lpiSpiSubscribe
   ) &#65529;
   Java_com_ibm_mq_jmqi_local_internal_base_Ntive_lpiSpiSubscribe:
    lpiSPISetContext returned CC=2, RC 2500  <null>
   
   
    
   
   

LOCAL FIX

PROBLEM SUMMARY

PROBLEM CONCLUSION

TEMPORARY FIX

COMMENTS
 *  Problem summary:
   When using a bindings mode MDB listener to monitor a topic with
   a non-durable subscription, the MDB listener incorrectly
   performs asynchronous message consumption on the WebSphere
   thread that started the listener.
   
   This causes subsequent JMS work on the same WebSphere thread to
   fail with compcode 2 and rsncode 2500 (MQRC_HCONN_ASYNC_ACTIVE).
   
   Exceptions similar to the following are seen in the servant
   region:
   
   com.ibm.mq.MQException: JMSCMQ0001: WebSphere MQ call
      failed with compcode '2' ('MQCC_FAILED') reason '2500'
      ('MQRC_HCONN_ASYNC_ACTIVE').
   .at com.ibm.msg.client.wmq.common.internal.Reason.
                         createException(Reason.java:223)
   
   Problem resolution:
   The MQ JMS code has been updated so that MDB listeners for
   non-durable subscriber MDB's use a separate thread for
   asynchronous message consumption.
   
   This fix changes the Java component of MQ, and will be
   included in FixPack 7.0.1.3 (PM09662 [http://www-01.ibm.com/support/docview.wss?uid=swg1PM09662]).
   
   
    
   
   

APAR INFORMATION
 * APAR NUMBER
   PM07704
   
   
 * REPORTED COMPONENT NAME
   WMQ Z/OS V7
   
   
 * REPORTED COMPONENT ID
   5655R3600
   
   
 * REPORTED RELEASE
   018
   
   
 * STATUS
   CLOSED DUB
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2010-02-16
   
   
 * CLOSED DATE
   2010-05-28
   
   
 * LAST MODIFIED DATE
   2010-08-24
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION

APPLICABLE COMPONENT LEVELS