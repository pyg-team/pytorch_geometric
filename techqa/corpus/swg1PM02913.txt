Title: IBM PM02913: OPTIMIZE BATCH LOGGING UNDO RECORDS FOR READ_UPDATE REQUESTS, AND ADD INFORMATION TO THE RCDS REPORT FOR UNDO LOGGING. - United States

Text:
z/os  A FIX IS AVAILABLE
Obtain the fix for this APAR.


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS NEW FUNCTION.
    
   
   

ERROR DESCRIPTION
 *  There are two parts to this problem:
   
   1. The RCDS REPORT utility does not support UNDO logging data.
   
   2. A problem arises when a batch job reads all records using
   READ/UPDATE commands even though only a few records are actually
   updated.  For each READ/UPDATE command the before image of the
   record is logged.  These before images are logged in case undo
   processing is later needed for batch backout.
   
   However unless a record is updated, logging the before image is
   not necessary and it adds to the overhead and runtime of the
   batch job.  Also batch backout will take longer when before
   images are written back to a dataset but they only replace
   identical records.
   
   This unnecessary overhead could be avoided if the application
   were rewritten to use READ commands instead of READ/UPDATE
   commands, and only use READ/UPDATE commands when there is a
   definite intent to UPDATE a record.
   
   
    
   
   

LOCAL FIX

PROBLEM SUMMARY
 *  ****************************************************************
   * USERS AFFECTED: This APAR affects CICS VR 4.2 and 4.3 users  *
   *                 that use VSAM Batch Undo Logging.            *
   ****************************************************************
   * PROBLEM DESCRIPTION: 1. The RCDS REPORT utility does not     *
   *                         support UNDO logging data.           *
   *                      2. A problem arises when a batch job    *
   *                         reads all records using READ/UPDATE  *
   *                         commands even though only a few      *
   *                         records are actually updated. For    *
   *                         each READ/UPDATE command, the before *
   *                         image of the record is logged. These *
   *                         before images are logged in case     *
   *                         undo processing is later needed for  *
   *                         batch backout.                       *
   *                                                              *
   *                         However unless a record is updated,  *
   *                         logging the before image is not      *
   *                         necessary and it adds to the         *
   *                         overhead and runtime of the batch    *
   *                         job.  Also batch backout will take   *
   *                         longer when before images are        *
   *                         written back to a dataset but they   *
   *                         only replace identical records.      *
   *                                                              *
   *                         This unnecessary overhead could be   *
   *                         avoided if the application were      *
   *                         rewritten to use READ commands       *
   *                         instead of READ/UPDATE commands, and *
   *                         only use READ/UPDATE commands when   *
   *                         there is a definite intent to UPDATE *
   *                         a record.                            *
   ****************************************************************
   * RECOMMENDATION:                                              *
   ****************************************************************
   1. The new UNDO operand will be implemented for RCDS REPORT
      utility.
   2. VSAM Batch logger at FRLOG(ALL) logging will prevent
      GET_for_UPDATE before-images logging if no corresponding
      PUT_UPDATE or ERASE is detected.
   Note:
        For HCCV420, the 2nd enhancement is provided by DFSMS
        apar OA31310 [http://www-01.ibm.com/support/docview.wss?uid=isg1OA31310].
   
   
    
   
   

PROBLEM CONCLUSION

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   PM02913
   
   
 * REPORTED COMPONENT NAME
   CICS VSAM RECOV
   
   
 * REPORTED COMPONENT ID
   5655P3000
   
   
 * REPORTED RELEASE
   420
   
   
 * STATUS
   CLOSED UR1
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2009-12-08
   
   
 * CLOSED DATE
   2010-03-01
   
   
 * LAST MODIFIED DATE
   2010-04-03
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
    UK54772
   
   

MODULES/MACROS
 *     CLGJ     DWWBAVUP DWWBLVBB DWWGJCCM DWWGJCMD
   DWWGJREP DWWGJURE DWW1SEOX DWW3GREM HCCV420J HCCV430J ZXGJCB
   
   
    
   
   

Publications Referenced SC34680200 SC34691500 SC34680300 SC34691600 FIX INFORMATION
 * FIXED COMPONENT NAME
   CICS VSAM RECOV
   
   
 * FIXED COMPONENT ID
   5655P3000
   
   

APPLICABLE COMPONENT LEVELS
 * R420 PSY UK54771 [HTTPS://WWW14.SOFTWARE.IBM.COM/WEBAPP/SET2/ORDERMEDIA/SHOPCART?PTFS=UK54771]
   UP10/03/11 P F003
   
   
 * R430 PSY UK54772 [HTTPS://WWW14.SOFTWARE.IBM.COM/WEBAPP/SET2/ORDERMEDIA/SHOPCART?PTFS=UK54772]
   UP10/03/05 P F003
   
   

FIX IS AVAILABLE
 * SELECT THE PTF APPROPRIATE FOR YOUR COMPONENT LEVEL. YOU WILL BE REQUIRED TO SIGN IN. DISTRIBUTION ON PHYSICAL MEDIA IS NOT AVAILABLE IN ALL COUNTRIES.