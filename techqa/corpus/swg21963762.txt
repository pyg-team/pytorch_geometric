Title: IBM Sterling B2B Integrator MustGather: Troubleshooting FTP/FTPs issues - United States

Text:
MustGather; FTP; Troubleshoot; data TECHNOTE (FAQ)

QUESTION
 
Mustgather: What information is required by the support team to investigate FTP/FTPs related problems in IBM Sterling B2B Integrator (SBI) 

ANSWER
Collecting troubleshooting data for problems with IBM Sterling B2B Integrator (SBI) before calling IBM Support will help familiarize you with the troubleshooting process and save you time. 

IBM support would need the following data to troubleshoot FTP/FTPs issues. If you encounter FTP/FTPs related issue then collect the data according to the below and share with IBM support team. 

1. Troubleshooting FTP issues when IBM Sterling B2B Integrator (SBI) is FTP Client. 

DEBUG Logs needed:
1. ftpclient.log
2. perimeter.log
3. system.log
4. noapp.log
5. wf.log 

If external perimeter server is involved then enable DEBUG mode for PSLogger.log. This log resides on the external perimeter server. 

To enable DEBUG mode logging navigate to dashboard > Operations > System > Logs page. In the logs window in the UI, click on the icon next to the log. This should display a small window where you can set the debug logging. The log files are located in the <SI_INSTALL>/logs directory. 

 In addition, share all the other logs in NON-DEBUG mode. 

 Business process details:
1. The FTP Client Business process
2. The FTP Client business process execution details screenshot.
3. Screen-shot of status report from failure step.
4. ProcessData details from failure step.
5. ACTIVE or PASSIVE mode connection used?
6. FTP Client Adapter Configuration

If profile id mentioned in the FTP Client Begin Session then provide us the FTP profile screenshots. 

If FTP server is other than IBM Sterling B2B Integrator FTP Server Adapter then,
1. What is the name of the FTP server?
2. What is the version of the FTP server? 

Note: IBM support might ask for server side logs if needed for further troubleshooting. 

If SSL involved then provide the following.
1. The certificates involved in the client side
2. The certificates involved in the server side
3. SSL DEBUG logs. 

(Refer last section for steps to turn on SSL debug logs) 

 Also gather dump_info and packet trace. (Refer last section for web links to collect the same) 

2. Troubleshooting FTP issue when IBM Sterling B2B Integrator (SBI) is FTP server. 

DEBUG logs needed:
1. ftp.log
2. perimeter.log
3. system.log
4. noapp.log
5. wf.log
6. mailbox.log 

If external perimeter server is involved then enable DEBUG mode for PSLogger.log. This log resides on the external perimeter server. 

To enable DEBUG mode logging navigate to dashboard > Operations > System > Logs page. In the logs window in the UI, click on the icon next to the log. This should display a small window where you can set the debug logging. The log files are located in the <SI_INSTALL>/logs directory. 

In addition, share all the other logs in NON-DEBUG mode. 

Business process details:
1. FTP server adapter configuration screen-shot. 

If FTP client is other than IBM Sterling B2B Integrator business process then,
1. What is the name of the FTP client?
2. What is the version of the FTP client? 

Note: Support might ask for client side logs if needed for further troubleshooting. 

If SSL involved then provide us the following.
1. The certificates involved in the client side
2. The certificates involved in the server side
3. SSL DEBUG logs 

(Refer last section for steps to turn on SSL debug logs) 

Also gather dump_info and packet trace. (Refer last section for web links to collect the same) 

Enabling DEBUG mode for SSL logs: 

STEPS TO TURN ON SSL LOGS: 

 1) Stop the server 

 
2) Add the following option to security.properties.in in <SI_INSTALL_DIR>/properties, TurnOnSSLRecordLog=true 


3) Make backup of following files: 
tmp.sh 


4) Add the following flags <SI_INSTALL_DIR>/bin/tmp.sh_asset_ext.in

SERVER_FLAGS="${SERVER_FLAGS} -Dcom.maverick.ssh.components.ComponentManager.tryStandaloneCryptographyBeforeJCE=true -Dcom.certicom.tls.record.maximumPaddingLength=0 -Dcom.certicom.tls.util.sslLog.default.verboseLevel=3 -Dcom.certicom.tls.util.sslLog.default.output=<SI_INSTALL_DIR>/logs/ssl.txt"
JAVA_FLAGS="${JAVA_FLAGS} -Dcom.maverick.ssh.components.ComponentManager.tryStandaloneCryptographyBeforeJCE=true -Dcom.certicom.tls.record.maximumPaddingLength=0 -Dcom.certicom.tls.util.sslLog.default.verboseLevel=3 -Dcom.certicom.tls.util.sslLog.default.output=<SI_INSTALL_DIR>/logs/ssl.txt"

Note: Here replace the SI_INSTALL_DIR with the actual path to the INSTALL DIRECTORY.

5) run setupfiles.sh

6) Check security.properties to ensure you see the string: 
TurnOnSSLRecordLog=true

7) Start the server

8) Enable DEBUG logging for perimeter.log and noapp.log using the User Interface

9) When problem occurs capture the noapp.log.Dyyyymmdd.Thhmmss and perimeter.log.Dyyyymmdd.Thhmmss. The SSL logs will be printed in the noapp.log.Dyyyymmdd.Thhmmss 

Gathering Dump_Info and Packet Trace: 

Gather DUMP_INFO (Refer link below): 

http://www-01.ibm.com/support/docview.wss?uid=swg21562125 [http://www-01.ibm.com/support/docview.wss?uid=swg21562125] 

Capture Packet Trace (Refer link below) 

IBM Support would need packet sniffer output during the issue time frame for different kind of issues. If requested, follow the steps below to capture the network packets and share with IBM support. 

http://www-01.ibm.com/support/docview.wss?uid=swg21175744 [http://www-01.ibm.com/support/docview.wss?uid=swg21175744]