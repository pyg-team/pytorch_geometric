Title: IBM IT13317: ANS4446E MOUNT FAILURE DUE TO ENABLED LAN-FREE OPTIONS - United States

Text:
 SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS DOCUMENTATION ERROR.
    
   
   

ERROR DESCRIPTION
 *  Lan-free options are not supported for the Mount Proxy Node
   role when performing an iSCSI mount for file-level restore or
   Instant access/Instant Restore operations.
   When Lan-free is enabled in the Mount Proxy node option file,
   attempting an iSCSI mount will produce the following error in
   the dsmerror.log :
   ANS4446E A file restore mount operation for VMware Virtual
   Machine 'vmname' failed. The data center node name is
   '<datacenternode>', the mount proxy node name is
   '<mountproxynode>'.
   
   This issue only can happen when manually updating the mount
   proxy node option file.
   The Tivoli Storage Manager for VMware - Data Protection
   configuration wizard will not use Lan-free options in the mount
   proxy node option file.
   
   Tivoli Storage Manager Versions Affected: Tivoli Storage
   Manager Client 7.1.1 and higher on Windows and Linux
   
   Customer/L2 Diagnostics
   A VM trace of the mount proxy node will display the proxy host
   shortname instead of the expected IP address:
   
   <timestamp> [PID] [TID] :
   ..\..\common\vm\InstantRestoreUtil.cpp( 165): ENTER =====>
   FullVMInstantRestore::getHostIpAddress
   <timestamp> [PID] [TID] :
   ..\..\common\vm\InstantRestoreUtil.cpp( 170):
   FullVMInstantRestore::getHostIpAddress: psTcpGetIpString
   returned with "<hostname>"
   <timestamp> [PID] [TID] :
   ..\..\common\vm\InstantRestoreUtil.cpp( 165): EXIT  <=====
   FullVMInstantRestore::getHostIpAddress, rc = -1
   <timestamp> [PID] [TID] :
   ..\..\common\vm\vmFileLevelRestore.cpp(2525): EXIT  <=====
   vmFileLevelRestore::startFileLevelRestore, rc = 6841
   
   Initial Impact: Medium
   
   Additional Keywords: ANS3174E tdp4ve tsm4ve spectrum protect
   flr file-level restore ia ir
   
   
    
   
   

LOCAL FIX
 *  Remove the Lan-free options from the mount proxy node option
   file and recycle the corresponding client services.
   
   
    
   
   

PROBLEM SUMMARY
 *  ****************************************************************
   * USERS AFFECTED:                                              *
   * IBM Tivoli Storage Manager for Virtual Environments Data     *
   * Protection for VMware Installation Guide V7.1.3 and V7.1.4   *
   * and IBM Tivoli Storage Manager for Virtual Environments Data *
   * Protection for VMware User's Guide V7.1.3 and V7.1.4         *
   ****************************************************************
   * PROBLEM DESCRIPTION:                                         *
   * See ERROR DESCRIPTION                                        *
   ****************************************************************
   * RECOMMENDATION:                                              *
   * The changes related to this documentation can be viewed in   *
   * the following documentation:                                 *
   *                                                              *
   * 1. The "Documentation updates for IBM Spectrum Protect for   *
   * Virtual Environments: Data Protection for VMware 7.1.x " DCF *
   * document under heading "Clarification for manually           *
   * configuring the mount proxy nodes"                           *
   * (http://g01zciwas018.ahe.pok.ibm.com/support/dcf/preview.wss *
   * ?host=g01zcidbs003.ahe.pok.ibm.com&db=support/swg/swgdocs.ns *
   * f&unid=B6EA55B7A76E9DC685257BB00057F294&taxOC=SSC8T2J&MD=201 *
   * 6/03/15%2015:03:55&sid=)                                     *
   *                                                              *
   * 2. The following Tivoli Storage Manager for Virtual          *
   * Environments: Data Protection for VMware Knowledge Center    *
   * "VMware vCenter Server user privilege requirements" topics:  *
   *                                                              *
   * Manually configuring the mount proxy nodes on a Linux system *
   *                                                              *
   * https://www-03preprod.ibm.com/support/knowledgecenter/SS8TDQ *
   * _7.1.6/ve.inst/t_ve_cfg_setmpnodeslnx.html?lang=en           *
   *                                                              *
   * Manually configuring the mount proxy nodes on a remote       *
   * Windows system                                               *
   *                                                              *
   * https://www-03preprod.ibm.com/support/knowledgecenter/SS8TDQ *
   * _7.1.6/ve.inst/t_ve_cfg_setmpnodeswin.html?lang=en           *
   ****************************************************************
   
   
    
   
   

PROBLEM CONCLUSION
 *  (1) The "Documentation updates for IBM Spectrum Protect for
   Virtual Environments: Data Protection for VMware 7.1.x " DCF
   document provides updates to the currently published versions of
   the product User's Guide, Install Guide, and / or Knowledge
   Center. The following content can be viewed in the technote:
   
   Clarification for manually configuring the mount proxy nodes
   
   The following topics in the Tivoli Storage Manager for Virtual
   Environments: Data Protection for VMware version 7.1.3 and 7.1.4
   Knowledge Center are missing information:
   
   The topic "Manually configuring the mount proxy nodes on a Linux
   system" is missing the following information:
   
   Restriction: Do not enable the LAN-free option (ENABLELANFREE
   YES) in the dsm.sys file. This option is not supported for mount
   proxy nodes.
   
   The topic "Manually configuring the mount proxy nodes on a
   remote Windows system", is missing the following information:
   
   Restriction: Do not enable the LAN-free option (ENABLELANFREE
   YES) in the options file. This option is not supported for mount
   proxy nodes.
   
   (2) The following text can be viewed in the The Tivoli Storage
   Manager for Virtual Environments: Data Protection for VMware
   Knowledge Center  topics:
   
   "Manually configuring the mount proxy nodes on a Linux system":
   
   Restriction: Do not enable the LAN-free option (ENABLELANFREE
   YES) in the dsm.sys file. This option is not supported for mount
   proxy nodes.
   
   Manually configuring the mount proxy nodes on a remote Windows
   system":
   
   Restriction: Do not enable the LAN-free option (ENABLELANFREE
   YES) in the options file. This option is not supported for mount
   proxy nodes.
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   IT13317
   
   
 * REPORTED COMPONENT NAME
   TSM FOR VE DP V
   
   
 * REPORTED COMPONENT ID
   5725TVEVM
   
   
 * REPORTED RELEASE
   71W
   
   
 * STATUS
   CLOSED DOC
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt / Xsystem
   
   
 * SUBMITTED DATE
   2016-01-22
   
   
 * CLOSED DATE
   2016-03-16
   
   
 * LAST MODIFIED DATE
   2016-03-16
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION

APPLICABLE COMPONENT LEVELS