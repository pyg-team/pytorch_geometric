Title: IBM Querying Long Description for Calibration Reports - United States

Text:
long description; ldtext; calibration; TPAEUI; TPAECAL TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 Unable to Query LDTEXT in longdescription table. 

SYMPTOM
Either no rows returned or too many rows returned when querying for long description.


RESOLVING THE PROBLEM
Scenario 1: Need to query long description for job tasks added to a job plan 

Job plan 'IT-ISSUE' has two job tasks:
Task 10 has a long description
Task 20 does NOT have a long description

[/support/docview.wss?uid=swg21425997&aid=1] [/support/docview.wss?uid=swg21425997&aid=1]

Task 10 has a long description 'task10 LDTEXT' 

[/support/docview.wss?uid=swg21425997&amp;aid=2]



Steps to get the long description out of the job tasks:

SELECT JOBPLANID FROM JOBPLAN WHERE JPNUM='IT-ISSUE'
output: JOBPLANID = 51

Then take output from the query above and put it in the query below:

SELECT LDTEXT FROM LONGDESCRIPTION WHERE LDOWNERTABLE='JOBTASK' AND LDOWNERCOL='DESCRIPTION' 
AND LDKEY IN (SELECT JOBTASK.JOBTASKID FROM JOBTASK WHERE jobtask.jobplanid= 51)

output: LDTEXT = task10 LDTEXT 

NOTE: Do not use outer join between jobtask and longdescription to query for LDTEXT
----------------------------------------------------------------------------
Scenario 2: Need to query long description for the data sheet long description added to a work order

Data sheet 'NEWDS' has an asset function with long description.

[/support/docview.wss?uid=swg21425997&amp;aid=3]

[/support/docview.wss?uid=swg21425997&amp;aid=4]

Go to the Work Order Tracking application.
Bring up a work order. 
Go to the Data Sheet tab.
Click New Row, enter the data sheet NEWDS in the Data Sheet field.

[/support/docview.wss?uid=swg21425997&amp;aid=5]

Description for asset function 10 has a long description.

[/support/docview.wss?uid=swg21425997&amp;aid=6]


Solution:
Steps to get the long description out of the job tasks:

SELECT PLUSCDSINSTRID FROM PLUSCDSINSTR WHERE DSPLANNUM ='NEWDS' AND REVISIONNUM='0' AND HASLD=1 AND ASSETFUNCTION=10

output:
PLUSCDSINSTRID = 21


Then take output from the query above and put it in the query below:

SELECT * FROM LONGDESCRIPTION 
WHERE ldownertable = 'PLUSCDSINSTR' and ldownercol = 'DESCRIPTION' 
AND LDKEY IN (
select pluscdsinstr.pluscdsinstrID
from pluscdsinstr
where
DSPLANNUM ='NEWDS' AND REVISIONNUM='0' AND HASLD=1 AND ASSETFUNCTION=10)


output:
LDTEXT = asset function 10 LDTEXT

NOTE: the query should use 'PLUSCDSINSTR' and NOT PLUSCWODSINSTR as the ldownertable. 
If PLUSCWODSINSTR is used, it may not return any output.