Title: IBM IC53570: MESSAGESET DEPLOY DEADLOCKS - United States

Text:
 SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  MESSAGESET DEPLOY DEADLOCKS
   
   
    
   
   

LOCAL FIX

PROBLEM SUMMARY
 *  ****************************************************************
   * USERS AFFECTED: All users of Websphere Message Broker        *
   *                 who deploy MRM messagesets and flows in      *
   *                 the same bar file under load.                *
   ****************************************************************
   * PROBLEM DESCRIPTION: When deploying a bar file containing    *
   *                      both MRM artifacts and message flows    *
   *                      the deploy can deadlock if the flows    *
   *                      being deployed to are currently         *
   *                      processing messages. This results in    *
   *                      BIP2066 and the broker becoming         *
   *                      unresponsive.                           *
   ****************************************************************
   * RECOMMENDATION:                                              *
   ****************************************************************
   When an MRM message set is deployed it alters the brokers
   internal database.
   The message processing thread also accesses this table if
   the flow is processing an MRM message.
   This means that the flow processing thread will wait for the
   deploy to finish. However the deploy itself waits
   for all message processing threads to quiesce before
   committing the database work. This results in a deadlock
   making the broker unresponsive.
   
   
    
   
   

PROBLEM CONCLUSION
 *  The broker was changed to quiesce all running message flow
   threads in the same execution group before deploying an MRM
   messageset. This allows the changes to the broker's databases
   to be committed before the threads are restarted.
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   IC53570
   
   
 * REPORTED COMPONENT NAME
   WMB WINDOWS V6
   
   
 * REPORTED COMPONENT ID
   5724J0500
   
   
 * REPORTED RELEASE
   100
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2007-08-22
   
   
 * CLOSED DATE
   2007-10-31
   
   
 * LAST MODIFIED DATE
   2009-09-30
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   WMB WINDOWS V6
   
   
 * FIXED COMPONENT ID
   5724J0500
   
   

APPLICABLE COMPONENT LEVELS
 * R100 PSY
   UP