Title: IBM Connection error for resource jdbc/WorklightAdminDS - United States

Text:
TPAEANYWHERE; J2CA0056I; The Connection Manager received a fatal connection error from the Resource Adapter; resource jdbc/WorklightAdminDS TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 You might be unable to deploy apps in Maximo Anywhere due to a closed connection. 

SYMPTOM
Below is the stack trace from the MobileFirst log: 

[4/14/xx 18:49:30:960 AEST] 000000f7 WebContainer E com.ibm.ws.webcontainer.internal.WebContainer handleRequest SRVE0255E: A WebGroup/Virtual Host to handle / has not been defined.

DSRA8600W: Error closing oracle.jdbc.driver.OraclePreparedStatementWrapper@a7338d37
java.sql.SQLRecoverableException: Closed Connection

[4/14/xx 19:01:39:200 AEST] 000000f7 WSJdbcConnect W DSRA8650W: Error closing a JDBC child wrapper, 

J2CA0206W: A connection error occurred. To help determine the problem, enable the Diagnose Connection Usage option on the Connection Factory or Data Source. This is the multithreaded access detection option. Alternatively check that the Database or MessageProvider is available.
[4/14/xx 19:01:39:200 AEST] 000000f7 ConnectionEve A J2CA0056I: The Connection Manager received a fatal connection error from the Resource Adapter for resource jdbc/WorklightAdminDS. The exception is: java.sql.SQLRecoverableException: IO Error: Connection reset by peer: socket write error:java.net.SocketException: Connection reset by peer: socket write error
[4/14/xx 19:01:39:216 AEST] 000000f7 FfdcProvider W com.ibm.ws.ffdc.impl.FfdcProvider logIncident FFDC1003I: FFDC Incident emitted on C:\IBM\WebSphere\AppServer\profiles\MFServer\logs\ffdc\MFServer_faf4c1cb_17.04.14_19.01.39.2168794150325463682050.txt com.ibm.ws.rsadapter.spi.WSRdbManagedConnectionImpl.clearStatementCache 2169
[4/14/xx 19:01:39:231 AEST] 000000f7 FfdcProvider W com.ibm.ws.ffdc.impl.FfdcProvider logIncident FFDC1003I: FFDC Incident emitted on C:\IBM\WebSphere\AppServer\profiles\MFServer\logs\ffdc\MFServer_faf4c1cb_17.04.14_19.01.39.2312828933677561245777.txt com.ibm.ws.rsadapter.jdbc.WSJdbcConnection.rollback 1860
[4/14/xx 19:01:39:231 AEST] 000000f7 AdapterServic E FWLSE3000E: A server error was detected.
<openjpa-1.2.2-r422266:898935 fatal store error> org.apache.openjpa.persistence.RollbackException: The transaction has been rolled back. See the nested exceptions for details on the errors that occurred.

Caused by: <openjpa-1.2.2-r422266:898935 fatal general error> org.apache.openjpa.persistence.PersistenceException: The transaction has been rolled back. See the nested exceptions for details on the errors that occurred.

Caused by: <openjpa-1.2.2-r422266:898935 nonfatal general error> org.apache.openjpa.persistence.PersistenceException: IO Error: Connection reset by peer: socket write error
FailedObject: prepstmnt 407394499 INSERT INTO AUDIT_TRAIL (ID, ERROR_CODE, ERROR_MESSAGE, MESSAGE, OPERATION_TYPE, OUTCOME, PROJECT_NAME, AUDIT_TIMESTAMP, USER_IDENTITY) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) [org.apache.openjpa.jdbc.kernel.JDBCStoreManager$CancelPreparedStatement]

Caused by: com.ibm.websphere.ce.cm.StaleConnectionException: IO Error: Connection reset by peer: socket write error

[4/14/xx 19:16:42:863 AEST] 0000001d ServerCollabo A WSVR0024I: Server MFServer stopped


CAUSE
J2CA0056I: The Connection Manager received a fatal connection error from the Resource Adapter for resource jdbc/WorklightAdminDS.


RESOLVING THE PROBLEM
Steps: 


1. Go to the Websphere Administrative Console.

2. Click Resources > JDBC > Data Sources

[/support/docview.wss?uid=swg22002082&amp;aid=1]


Click on the "WorklightAdminDS" Data Source.

[/support/docview.wss?uid=swg22002082&aid=2] [/support/docview.wss?uid=swg22002082&aid=2]


Click on the "Connection Pool Properties" under Additional Properties.


[/support/docview.wss?uid=swg22002082&aid=3] [/support/docview.wss?uid=swg22002082&aid=3]


Set the "Minimum connections" to 0.


[/support/docview.wss?uid=swg22002082&aid=4] [/support/docview.wss?uid=swg22002082&aid=4]


Click Apply and Save.


[/support/docview.wss?uid=swg22002082&aid=5] [/support/docview.wss?uid=swg22002082&aid=5]


Restart the MobileFirst applications. 

Run the 'build all' command again. All the apps will now be deployed successfully.

RELATED INFORMATION
 How to configure WebSphere data source parameters when [http://www-01.ibm.com/support/docview.wss?uid=swg21066467]