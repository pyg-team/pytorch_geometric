Title: IBM TroubleShooting: MQ Java Message Service (JMS) problems for WebSphere Application Server - United States

Text:
troubleshooting; troubleshooting; troubleshooting; JMS; Messaging; TroubleShootingDocument; WASCET; TroubleShootingFlowDocument TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 Troubleshooting for MQ Java™ Message Service (JMS) problems in WebSphere Application Server. This should help address common issues with this component before calling IBM support and save you time. 

RESOLVING THE PROBLEM
 

TAB NAVIGATION
 * Learn more [http://www.ibm.com/support/docview.wss?uid=swg21245013]
 * Troubleshoot- selected tab,
 * Collect data [http://www.ibm.com/support/docview.wss?uid=swg21153217]




TroubleShooting steps to help resolve JMS problems  1.  What JMS Provider are you using?
      * WebSphere MQ JMS Provider - continue to Question 2
        
        
      * Default Messaging JMS Provider - refer to the TroubleShooting and MustGather [http://www-1.ibm.com/support/docview.wss?uid=swg21266769] documents for Service integration technologies
        
        
     
     
 2.  Is the listener port or activation specification that is associated with the MDB started? You can check the status using the administrative console or the SystemOut.log file for the application server.  * If yes, continue to Question 3. 
      * If no, start the listener port or activation specification using the Administrative Console.
        
        
     
     
 3.  Is the listener port unable to start? The following error indicates that the listener port is unable to start:
     
     
     WMSG0059E: Maximum restart retry count of 5 reached for Listener Port MyListenerPort
      * If the preceding error does occur when the listener port attempts to start, ensure that the queue manager is started, and consider increasing the MAX.RECOVERY.RETRIES and RECOVERY.RETRY.INTERVAL properties. They are described here [http://pic.dhe.ibm.com/infocenter/wasinfo/v7r0/index.jsp?topic=/com.ibm.websphere.nd.multiplatform.doc/info/ae/ae/umb_prolscp.html]. You should also check for any other errors that may show the reason why the listener port fails to start and then continue to Question 4. 
      * If the listener port does start, continue to Question 4.
        
        
     
     
 4.  Are you getting a specific error that causes the MDB to not receive messages?  * If you are receiving a java.lang.ClassCastException: com.ibm.jms.JMSBytesMessage, review this technote [http://www.ibm.com/support/docview.wss?uid=swg21220378]. 
      * For a MQJMS2005 error with Reason code 2009, review this technote [http://www.ibm.com/support/docview.wss?uid=swg21226703]. 
      * If transaction timeouts or rollbacks occur, review this technote [http://www.ibm.com/support/docview.wss?uid=swg21223180] and set the Maximum messages property on the listener port to 1. 
      * If you are not encountering any of the preceding errors, continue to Question 5.
        
        
        
     
     
 5.  Did the listener port stop due to the Maximum retries property on the listener port being reached? When this occurs, an entry like this will appear in the SystemOut.log file for the application server:
     
     
     WMSG0036E: Maximum message delivery retry count of 1 reached for MDB MyMDB, JMSDestination jms/myQueue, MDBListener stopped
     
      * If yes, ensure that the backout threshold property on the queue is set to a value higher than the Maximum retries property on the listener port. You can find more information about this here [http://www-01.ibm.com/support/docview.wss?uid=swg21187992]. 
      * If no, continue to Question 6.
        
        
     
     
 6.  Is the problem related to slower than expected performance with the MDB? For example, the MDB processes messages more slowly than you believe it should.  * If yes, consider increasing the Maximum sessions property on the listener port (described here [http://pic.dhe.ibm.com/infocenter/wasinfo/v7r0/index.jsp?topic=/com.ibm.websphere.nd.doc/info/ae/ae/umb_prolp.html]) and the com.ibm.mq.jms.tuning.eoqTimeout JVM™ property (described here [http://www-1.ibm.com/support/docview.wss?rs=180&uid=swg21190601]). 
      * If no, continue to Question 7.
        
        
     
     
 7.  Is the problem related to security; for example, any errors related to authentication and authorization of JMS requests?  * If yes, continue to Question 8. 
      * If no, continue to Question 9.
        
        
     
     
 8.  Are either of the following authentication errors occurring when trying to establish a JMS connection?
     
     
     MSGS0508E: The JMS Server security service was unable to authenticate userid: myuser
     javax.jms.JMSSecurityException: MQJMS2013: invalid security authentication supplied for MQQueueManager
     
      * If yes, ensure that a J2C authentication alias is specified on your QCF or TCF. 
      * If no, continue to Question 9.
        
        
     
     
 9.  Is the problem related to the connection between WebSphere Application Server and the messaging system? This would include connection pooling problems.  * If yes, continue to Question 10. 
      * If no, continue to Question 13.
        
        
     
     
 10. Is the problem related to the number of TCP/IP connections that you observe between your application server process and an MQ queue manager?  * If yes, or if you want to gain an understanding of how JMS connection pooling in WebSphere Application Server works, review this technote [http://www.ibm.com/support/docview.wss?uid=swg21201242]. 
      * If no, continue to Question 11.
        
        
     
     
 11. Are you receiving JMS exceptions with MQ reason code 2019?  * If yes, review this technote [http://www.ibm.com/support/docview.wss?uid=swg21229508]. 
      * If no, continue to Question 12.
        
        
     
     
 12. Are you receiving the following exception?
     
     
     J2CA0020E: The Connection Pool Manager could not allocate a Managed Connection: java.lang.IllegalStateException: Internal Error: cannot find the PoolManager Reference
     
      * If yes, review this technote [http://www.ibm.com/support/docview.wss?uid=swg21206150]. 
      * If no, continue to Question 13.
        
        
     
     
 13. Review the WebSphere Application Server [http://publib.boulder.ibm.com/infocenter/wasinfo/v5r0/index.jsp] [http://publib.boulder.ibm.com/infocenter/wasinfo/v5r1/index.jsp] [http://publib.boulder.ibm.com/infocenter/wasinfo/v6r0/index.jsp]Information Center [http://www-01.ibm.com/software/webservers/appserv/was/library/], or the WebSphere Application Server Support site [http://www-306.ibm.com/software/webservers/appserv/was/support/] for additional information that may help you to resolve the problem.


What to do Next? 
If the preceding troubleshooting steps did not solve your problem, see the MustGather [http://www-1.ibm.com/support/docview.wss?rs=180&uid=swg21153217] for JMS problems to continue investigation.  


Cross reference information Segment Product Component Platform Version Edition Application Servers Runtimes for Java Technology Java SDK