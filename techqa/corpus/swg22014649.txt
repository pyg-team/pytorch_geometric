Title: IBM Mitigating CVE-2017-5715, CVE-2017-5753 and CVE-2017-5754 in PureApplication W1500, W2500, W3500, and W3550 - United States

Text:
 TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 The Spectre and Meltdown vulnerabilities are found in most of the modern processors. Therefore, PureApplication System W1500 and W2500 and PureApplication Platform W3500 and W3550 (formerly known as Bluemix Local W3500 and W3550) are also affected by the CVE-2017-5715, CVE-2017-5753 and CVE-2017-5754 vulnerabilities. 

CAUSE
For more information on these vulnerabilities, see Security Bulletin: IBM PureApplication Service/Systems, which includes IBM OS Images for Red Hat Linux Systems, as well as AIX-based and Windows-based deployments, has released a fix in response to the vulnerabilities known as Spectre and Meltdown [http://www-01.ibm.com/support/docview.wss?uid=swg22014848].

RESOLVING THE PROBLEM
Fully addressing these vulnerabilities in PureApplication requires applicable firmware updates from hardware device manufacturers for management and compute nodes, hypervisor software updates, and operating system (OS) updates for virtual images and deployed virtual machines. PureApplication version 2.2.5.0 includes patches to mitigate CVE-2017-5753 (variant 1), CVE-2017-5715 (variant 2), and CVE-2017-5754 (variant 3). 

 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 

If you upgrade your PureApplication system to version 2.2.5.0 and deploy workloads using the latest base operating system (OS) images, those workloads are automatically patched to address CVE-2017-5753, CVE-2017-5715, and CVE-2017-5754.  * 
 *   * IBM OS Image for Red Hat Linux Systems (RHEL 6.9) 2.0.10.0 
    * IBM OS Image for Red Hat Linux Systems (RHEL 7.4) 3.0.9.0
   
   

If you want to patch virtual images from a previous version, OS vendors have released patches to address CVE-2017-5753 (variant 1) and CVE-2017-5754 (variant 3). You can download the patches from the OS websites and use them to patch existing virtual images. 


The patch details are as follows:

Compute node firmware patches 

 *  W2500, W1500: Unified Extensible Firmware Reference (UEFI) B2E156D Included Microcode Levels Updated microcode to address CVE-2017-5715 W3500: Unified Extensible Firmware Reference (UEFI) TBE132L Included Microcode Levels mef406f0_00000014.inc
   mef406f1_0b00002a.inc
   m6f306f2_0000003c.inc
   mef306f1_00000014.inc W3550: Unified Extensible Firmware Reference (UEFI) C4E132J Included Microcode Levels mef406f1_0b00002a.inc
   m6f306f2_0000003c.inc 

vCenter and ESXi patches  *  vCenter: Patch release 6.0 U3e ESXi: Patch release ESXi ESXi600-201803401-BG
   ESXi600-201803402-BG 


To patch existing workloads (also referred to as deployments or instances), you can use a Red Hat Enterprise Linux Satellite Server or an IBM BigFix server (formerly IBM Endpoint Manager server) to update the OS kernel level patches. You must have the corresponding shared service deployed on your system to use this method so that virtual machines (VMs) can access the servers.  1. Log on to the VM.  * Note: If the RHEL Satellite Server shared service is already deployed to the same cloud group as the VM, the VM is already configured to connect to the RHEL Satellite Server. If it is not, then you need to manually configure the yum repository.
    
    
 2. For Red Hat Enterprise Linux (RHEL) 7 VMs, run chkconfig activation.0tools off to disable the activation.0tools service.  * Note: This step is to prevent an issue that was found during testing on RHEL 7 VMs where the OS kept restarting after the kernel update.
    
    
 3. Run yum update kernel to update the OS kernel packages. 
 4. Restart the VM.


Note:The OS kernel patch has a performance impact; it will slow down the CPU speed after the VM is patched. 

Use these steps to extend the virtual image, apply the patches, and capture the updated virtual image for use with your to-be-deployed workloads (also referred to as deployments or instances): 

 1. Extend a virtual image, which deploys a classic virtual system virtual machine image:  1. Click Catalog > Virtual Images. 
     2. Select a virtual image, and then click Extend. 
     3. Enter values in the General information and Deployment configuration sections. 
     4. Click OK. 
     5. A new entry is created in the virtual images list. Click the new image. 
     6. Click the link for In the cloud now. 
     7. You are redirected to the Virtual System Instances (Classic) page. The status of this instance should be Running.
    
    
 2. Log on to the classic virtual system virtual machine, and apply the operating system patch to the virtual machine (VM):  1. From the Virtual System Instances (Classic) page, expand the VM. Find the IP address in the Network Interface 1 field. 
     2. Log on to the VM. For Red Hat Enterprise Linux (RHEL) 7 VMs, run chkconfig activation.0tools off to disable the activation.0tools service. 
     3. Make sure that the VM is configured to connect to the RHEL Satellite Server, and that the latest RHEL packages are loaded on that server. If they are not, create a yum configuration:  1. Run yum update -y to update the OS packages. 
         2. Restart the VM. 
         3. Wait until the VM is running.
        
        
    
    
 3. Capture a new virtual image from the classic virtual system VM:  1. Click Catalog > Virtual images. 
     2. Select your extended image and click Capture.
    
    
 4. Use Pattern Builder to update patterns to use the new virtual image.



For W1700, W2700, and W3700 systems, see: Mitigating CVE-2017-5715, CVE-2017-5753 and CVE-2017-5754 in PureApplication System W1700, W2700, and W3700 [http://www.ibm.com/support/docview.wss?uid=swg22014828].