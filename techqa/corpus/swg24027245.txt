Title: IBM JR36472 - Fail to send emails after Application Server upgrade to V7.0.0.9 - United States

Text:
IFJR36472 DOWNLOADABLE FILES

ABSTRACT
 WebSphere Commerce V7 fails to send email (for example, password reset email) in a web 2.0 enabled sample store (such as, Madison sample store) after an Application Server upgrade. 

DOWNLOAD DESCRIPTION
This download package contains a fix for JR36472, built to be installed on WebSphere Commerce V7.0.0.0. The problem fixed (JR36472) is described as follows: 


Any email functionality for a web 2.0 enabled sample store in WebSphere Commerce V7 fails after upgrading the IBM WebSphere Application Server to Fix Pack 7.0.0.9. For example, the password reset functionality in the Madison store might fail after upgrading the IBM WebSphere Application Server to Fix Pack 7.0.0.9.

You see the following error in the WebSphere Commerce V7 logs when you try to send a password reset mail:

[4/29/10 13:56:53:899 CEST] 00000023 CommerceSrvr E com.ibm.commerce.messaging.commands.SendMsgCmdImpl performExecute 
CMN0208E: Command "com.ibm.commerce.messaging.commands.SendMsgCmdImpl" failed to process. Error: Messaging system. The composer encountered the following error: 
The URL constructed during composition using ViewName
http://<hostname>:80/webapp/wcs/stores/IBM.WC.Compose/MadisonsStorefrontAssetStore//Messages/PasswordNotify.jsp/******** is invalid {1}
...
[4/7/10 13:11:21:109 CDT] 00000024 webapp E com.ibm.ws.webcontainer.webapp.WebApp logServletError SRVE0293E: [Servlet Error]-[CompositionRequestServlet]: java.lang.AbstractMethodError: com/ibm/websphere/servlet/request/IRequest.isStartAsync()Z
at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:946)
at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:500)
at com.ibm.ws.webcontainer.servlet.ServletWrapperImpl.handleRequest(ServletWrapperImpl.java:178)
at com.ibm.ws.webcontainer.webapp.WebApp.handleRequest(WebApp.java:3810)
at com.ibm.ws.webcontainer.webapp.WebGroup.handleRequest(WebGroup.java:276)
at com.ibm.ws.webcontainer.WebContainer.handleRequest(WebContainer.java:931)
at com.ibm.ws.webcontainer.WSWebContainer.handleRequest(WSWebContainer.java:1583)
at com.ibm.wsspi.webcontainer.WebContainer.handleRequest(WebContainer.java:95)
at com.ibm.commerce.messaging.composer.
JSPInvokerWAS6Impl$JSPPrivilegedActionExecutionUnit.run(JSPInvokerWAS6Impl.java:116)
at com.ibm.commerce.messaging.composer.
JSPInvokerWAS6Impl.invokeJSP(JSPInvokerWAS6Impl.java:257)
at com.ibm.commerce.messaging.viewcommands.
MessagingViewCommandImpl.nonHttpForwardDocument(MessagingViewCommandImpl.java:477)

In WebSphere Application Server V7.0.0.9, the interface class com.ibm.websphere.servlet.request.IRequest has been updated with some new methods. This interface class was implemented by WebSphere Commerce. Updating this interface required the corresponding update in WebSphere Commerce.

In WebSphere Application Server V7.0.0.3, the implementation of this class works fine. In V7.0.0.9, the implementation class fails to initialize with the following exception:

[4/29/10 13:56:53:602 CEST] 00000023 webapp E 
com.ibm.ws.webcontainer.webapp.WebApp logServletError SRVE0293E: [Servlet Error]-[/MadisonsStorefrontAssetStore/Messages/PasswordNotify.jsp]: 
java.lang.AbstractMethodError: 
com/ibm/websphere/servlet/request/IRequest.isStartAsync()Z 

Solution:

You should upgrade to WebSphere Commerce V7 Fix Pack 1 (7.0.0.1) or higher when running WebSphere Commerce with WebSphere Application Server V7.0.0.9. 

Fix Pack 1 contains the fix for APAR JR36472 and is available at the following URL:
http://www.ibm.com/support/docview.wss?rs=3046&uid=swg24026649 [http://www.ibm.com/support/docview.wss?rs=3046&uid=swg24026649]

An alternative to updating to Fix Pack 1 is to install the Interim Fix associated with this APAR. It is available at the links in the Download package section below.

PREREQUISITES
Obtain the WebSphere Commerce Update Installer V7.0.0.0 (or higher) at the link below to install this fix. 

URL LANGUAGE SIZE(Bytes) WebSphere Commerce Update Installer [http://www-1.ibm.com/support/docview.wss?rs=3046&uid=swg24013502] English 1 
INSTALLATION INSTRUCTIONS
The download packages contain readme files that provide installation instructions. This Interim Fix can be applied using Roll Out Update [http://publib.boulder.ibm.com/infocenter/wchelp/v6r0m0/index.jsp?topic=/com.ibm.commerce.admin.doc/tasks/tigrolloutupdt.htm].

DOWNLOAD PACKAGE




Download RELEASE DATE LANGUAGE SIZE(Bytes) Download Options 
What is Fix Central(FC)? [https://www.ibm.com/support/fixcentral/help?page=swfaqs] JR36472 for 7.0.0.0 Server 6/30/2010 English 11960 FC [http://www.ibm.com/support/fixcentral/quickorder?fixids=7.0.0.0-WS-WCServer-IFJR36472&product=ibm%2FWebSphere%2FWebSphere%20Commerce&source=dbluesearch] [ ] JR36472 for 7.0.0.0 Developer 6/30/2010 English 9698 FC [http://www.ibm.com/support/fixcentral/quickorder?fixids=7.0.0.0-WS-WCDeveloper-IFJR36472&product=ibm%2FWebSphere%2FWebSphere%20Commerce&source=dbluesearch] [ ] 
 [/support/docview.wss?uid=swg24027245&aid=1]Problems (APARS) fixed [/support/docview.wss?uid=swg24027245&aid=2]Problems (APARS) fixed
JR36472