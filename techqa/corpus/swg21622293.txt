Title: IBM Sporadic failures for scheduled BIRT reports - United States

Text:
jdbc drivers level db2 missing properties tcr birt scheduled error random sporadic TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 From time to time, some BIRT reports end in error. The same reports complete successfully when executed manually. 

SYMPTOM
SystemOut.log may show error messages like:


**************
[11/30/12 9:00:05:139 GMT] 00000026 odaconsumer E org.eclipse.birt.data.engine.odaconsumer.ConnectionManager openConnection Cannot open connection.

org.eclipse.birt.report.data.oda.jdbc.JDBCException: Missing properties in Connection.open(Properties).
at org.eclipse.birt.report.data.oda.jdbc.Connection.open(Connection.java:11.....
**************


CAUSE
Considering that the problem is occurring sporadically, it cannot depends on configuration, but it can be instead related to specific external conditions. For example, similar behavior has been experienced when the JDBC drivers used by the data sources were not at the same level of the target database engine and for this reason it was failing in handling some specific conditions returned by the database.


RESOLVING THE PROBLEM
With regards to the above scenario, if you are using DB2, you can verify if DB2 JDBC drivers used by the BIRT reports are at the same level of the DB2 server connected by the data source, following this procedure: 

1) open a command prompt and move to the directory where db2jcc.jar is located. 

As per TCR documentation, it is always under 

<TCR_Component_Dir>\lib\birt-runtime-2_2_2\ReportEngine\plugins\org.eclipse.birt.report.data.oda.jdbc_2.2.2.r22x_v20071206\drivers 

E.g.
D:\IBM\tivoli\tipv2Components\TCRComponent\lib\birt-runtime-2_2_2\ReportEngine\plugins\org.eclipse.birt.report.data.oda.jdbc_2.2.2.r22x_v20071206\drivers 

2) execute this command to get the JDBC driver version
java -cp ./db2jcc.jar com.ibm.db2.jcc.DB2Jcc -version

E.g.
java -cp ./db2jcc.jar com.ibm.db2.jcc.DB2Jcc -version 

IBM DB2 JDBC Universal Driver Architecture 3.57.82 

3) In order to know the DB2 release associated to this JDBC driver version, you can refer to the following URL: http://www-01.ibm.com/support/docview.wss?rs=71&uid=swg21363866 [http://www-01.ibm.com/support/docview.wss?rs=71&uid=swg21363866] 

For example, driver version 3.57.82 is delivered by DB2 release 9.7 GA. 

4) On DB2 server machine, execute the command "dblevel" to get the information about DB2 server level and verify if they match JDBC drivers one. 

5) If they don't match, upgrade the JDBC drivers installed on TCR to the level of DB2 server.

 

PRODUCT ALIAS/SYNONYM
 Tivoli Common Reporting V2.x