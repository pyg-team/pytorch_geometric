Title: IBM IV53739: WEBSPHERE MQ V7.0.1.11 JMS CLIENT CONNECTION VIA SSL ENABLED CHANNEL FAILS WITH RC 2399 MQRC_SSL_PEER_NAME_ERROR. - United States

Text:
 SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  A WebSphere MQ classes for Java Message Service (JMS) or
   WebSphere MQ classes for Java client application using WebSphere
   MQ Version 7.0.1.11 jar files, tries to make a connection to a
   queue manager secured with SSL/TLS. This fails with a
   JMSException, with reason code MQRC_SSL_PEER_NAME_ERROR.
   The exception is similar to:
   .
   com.ibm.mq.jmqi.JmqiException: CC=2;RC=2399;AMQ9640: SSL invalid
   peer name, channel '?', attribute 'DC (x2)'. [5=DC (x2)]
   .
   The same application works fine when using the WebSphere MQ
   Version 7.0.1.10 jar files.
   .
   Below is an extract of a JMS trace showing the error:
   ----------------------------------------------------------------
   @1a2f02e c.i.m.j.r.internal.system.RemotePeerName(RemotePeerNam
   e) ----+----+--- X parseDN(String)
   CC=2;RC=2399;AMQ9640: SSL invalid peer name, channel '?', attrib
   ute 'DC (x2)'. [5=DC (x2)] [com.ibm.mq.jmqi.JmqiException] at:
     com.ibm.mq.jmqi.remote.internal.system.RemotePeerName.setValue
     (RemotePeerName.java:387)
     com.ibm.mq.jmqi.remote.internal.system.RemotePeerName.parseDN(
     RemotePeerName.java:205)
     com.ibm.mq.jmqi.remote.internal.system.RemotePeerName.<init>(R
     emotePeerName.java:93)
     com.ibm.mq.jmqi.remote.internal.RemoteTCPConnection.protocolCo
     nnect(RemoteTCPConnection.java:1105)
     com.ibm.mq.jmqi.remote.internal.system.RemoteConnection.connec
     t(RemoteConnection.java:1283)
     com.ibm.mq.jmqi.remote.internal.system.RemoteConnectionPool.ge
     tConnection(RemoteConnectionPool.java:355)
     com.ibm.mq.jmqi.remote.internal.RemoteFAP.jmqiConnect(RemoteFA
     P.java:1716)
     com.ibm.mq.jmqi.remote.internal.RemoteFAP.jmqiConnect(RemoteFA
     P.java:1305)
     com.ibm.msg.client.wmq.internal.WMQSession.connect(WMQSession.
     java:372)
     com.ibm.msg.client.wmq.internal.WMQSession.<init>(WMQSession.j
     ava:316)
     com.ibm.msg.client.wmq.internal.WMQConnection.createSession(WM
     QConnection.java:980)
     com.ibm.msg.client.jms.internal.JmsConnectionImpl.createSessio
     n(JmsConnectionImpl.java:573)
     com.ibm.mq.jms.MQConnection.createSession(MQConnection.java:33
     9)
     Jms11Sample.run(Jms11Sample.java:49)
     Object ClassLoader = sun.misc.Launcher$AppClassLoader@1ea2dfe
     CurrentThread ClassLoader = sun.misc.Launcher$AppClassLoader@1
     ea2dfe
   ----------------------------------------------------------------
   .
   
   
    
   
   

LOCAL FIX

PROBLEM SUMMARY
 *  ****************************************************************
   USERS AFFECTED:
   This issue affects users of the WebSphere MQ Classes for JMS
   V7.0.1 who are attempting an SSL Connection to a Queue Manager
   
   
   Platforms affected:
   MultiPlatform
   
   ****************************************************************
   PROBLEM SUMMARY:
   A WebSphere MQ Classes for JMS application established an SSL
   connection to a Queue Manager. The application then attempted to
   create a JMS Session from the connection, on the JMS Session
   connect the SSLPEERNAME property was erroneously set on the
   client side from the distinguished name of the certificate. This
   resulted in the MQRC_SSL_PEER_NAME_ERROR error being returned to
   the application.
   
   
    
   
   

PROBLEM CONCLUSION
 *  The WebSphere MQ Classes for JMS have been altered to not set
   the SSLPEERNAME property from the distinguished name of the
   certificate when attempting the JMS Session connect.
   
   ---------------------------------------------------------------
   The fix is targeted for delivery in the following PTFs:
   
   Version    Maintenance Level
   v7.0       7.0.1.13
   
   The latest available maintenance can be obtained from
   'WebSphere MQ Recommended Fixes'
   http://www-1.ibm.com/support/docview.wss?rs=171&uid=swg27006037 [http://www-1.ibm.com/support/docview.wss?rs=171&uid=swg27006037]
   
   If the maintenance level is not yet available information on
   its planned availability can be found in 'WebSphere MQ
   Planned Maintenance Release Dates'
   http://www-1.ibm.com/support/docview.wss?rs=171&uid=swg27006309 [http://www-1.ibm.com/support/docview.wss?rs=171&uid=swg27006309]
   ---------------------------------------------------------------
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   IV53739
   
   
 * REPORTED COMPONENT NAME
   WMQ SOL SPARC
   
   
 * REPORTED COMPONENT ID
   5724H7223
   
   
 * REPORTED RELEASE
   701
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2014-01-08
   
   
 * CLOSED DATE
   2014-01-31
   
   
 * LAST MODIFIED DATE
   2014-01-31
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   WMQ SOL SPARC
   
   
 * FIXED COMPONENT ID
   5724H7223
   
   

APPLICABLE COMPONENT LEVELS
 * R701 PSY
   UP