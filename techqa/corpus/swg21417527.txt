Title: IBM ClassCastException and CNTR0020E issued in JDBC adapter inbound process - United States

Text:
JDBC Adapter; inbound; ClassCast; ClassCastException; StructuredDataFunctionSelector; incompatible; FunctionSelector TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 Message CNTR0020E and ClassCastException is encountered in the JDBC adapter inbound process 

SYMPTOM
The following ClassCastException is encountered in the inbound process after JDBC adapter polls for an event: 

CNTR0020E: EJB threw an unexpected (non-declared) exception during invocation of method "onNotification" on bean "BeanId(OracleInboundApp#OracleInboundEJB.jar#export.JDBCInboundInterfaceEIS, null)". Exception data: java.lang.ClassCastException: com.ibm.j2ca.extension.emd.runtime.StructuredDataFunctionSelector incompatible with commonj.connector.runtime.FunctionSelector


CAUSE
The error happens due to the a change in class loading in the adapter application. The default class loading order in SCA modules is "Classes loaded with parent class loader first". Changing it from "parent_first" to "parent_last" confuses the function selector.


ENVIRONMENT
WebSphere Process Server 6.2.0.2, WebSphere Application Server 6.0.1.25 and WebSphere Adapter 6.2.



RESOLVING THE PROBLEM
Log on to the administrative console and select the default option "Classes loaded with parent class loader first". The following attachment includes screen shots on how to change the class loader order.

Solution.doc [/support/docview.wss?uid=swg21417527&aid=2] [/support/docview.wss?uid=swg21417527&aid=1]