Title: IBM Rule Execution Server with non-XA database driver - United States

Text:
 TECHNOTE (FAQ)

QUESTION
 Can I use a non-XA database driver with Rule Execution Server although the documentation recommends to use an XA driver? 

ANSWER
The execution unit (XU) supports only the LocalTransaction and NoTransaction levels of transaction support. 

As a general limitation, one local transaction resource at most can participate in a global transaction. So when the XU is configured for LocalTransaction support, it counts as one LocalTransaction resource. Other resources that could be enrolled, such as the Rule Execution Server data source, must support XA to avoid having more than one non-XA resource in the transaction. 


Starting from V7.0, the XU transation-support is set to NoTransaction by default in the ra.xml. The main reason is that transaction support at rule engine level is rarely necessary: typically, it is used only with stateful rule sessions for which there might be a requirement to be able to roll back the engine.

With the NoTransaction setting, the XU itself does not count as a resource that participates in a transaction. However, the XU can still use a data source to access information about the ruleset and that data source can get enrolled in a transaction.

If no other resource is involved in the transaction, there should be no issue with the Rule Execution Server data source being non-XA. But if some other non-XA resource (such as some non-XA data source used to persist application data) is also enrolled in the transaction when the XU is retrieving a ruleset from the Rule Execution Server schema, then the transaction is likely to fail because more than one non-XA resource are involved.

So, having an XA data source for Rule Execution Server is one way of preventing this type of issue in general. But it is not impossible to use a non-XA data source for Rule Execution Server, provided that no other non-XA resource gets enrolled in transactions that involve calls to the XU rule engine.


Note: Before V7.0, when the XU transation-support is set to LocalTransaction by default, you must remove the XU from the transaction so that a non-XA data source can be used for Rule Execution Server. To do that, you change the 'transation-support setting from LocalTransaction to NoTransaction in the ra.xml file.

RELATED INFORMATION
 ODM V8.0.1 doc on execution unit [http://pic.dhe.ibm.com/infocenter/dmanager/v8r0m1/topic/com.ibm.wodm.dserver.rules.res.managing/topics/con_res_exec_xu.html]





Cross reference information Segment Product Component Platform Version Edition Business Integration IBM Operational Decision Manager Platform Independent 8.5, 8.0, 7.5 
HISTORICAL NUMBER
 jrules/FAQ/376