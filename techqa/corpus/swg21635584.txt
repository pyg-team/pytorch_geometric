Title: IBM Installation of a TIP fix pack failed with network protocol error - United States

Text:
TIPL2INST; CTGIN0024E; PROTOCOL Data Stream Syntax Error TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 Fix pack installation fails with below errors:

CTGIN0024E: The exception is java.lang.RuntimeException: java.sql.SQLException: A network protocol error was encountered and the connection has been terminated 

SYMPTOM
Take a look into IA log and the de_trace.log file and look for below errors at the time of failure:

com.ibm.tivoli.ccmdb.install.common.log.CmnInstallLogUtils handleUnexpectedException


SEVERE: CTGIN0024E: An unexpected exception was encountered during processing of a process solution installation service request. The exception is java.lang.RuntimeException: java.sql.SQLException: A network protocol error was encountered and the connection has been terminated: A PROTOCOL Data Stream Syntax Error was detected. Reason: 0x0. Plaintext connection attempt to an SSL enabled server?
at com.ibm.ac.si.iuregistry.IUTypeDatabaseImpl.querySoftwareInstanceData(IUTypeDatabaseImpl.java:4154)
at com.ibm.ac.si.iuregistry.IURegistryViewImpl.listSoftwareInstanceData(IURegistryViewImpl.java:638)
at com.ibm.ac.si.iuregistry.IURegistryViewImpl.listSoftwareInstanceDataByUUID(IURegistryViewImpl.java:279)
at com.ibm.ac.si.runtime.impl.IURegAPIController.listSoftwareInstanceDataByUUID(IURegAPIController.java:152)
at com.ibm.tivoli.ccmdb.install.ps.si.query.SIQuery.getLatestInstalledInstanceData(SIQuery.java:665)
at com.ibm.tivoli.ccmdb.install.ps.si.query.SIQuery.getLatestInstalledInstance(SIQuery.java:632)
at com.ibm.tivoli.ccmdb.install.ps.si.query.SIQuery.getLatestInstalledVersion(SIQuery.java:605)



CAUSE
In general, above exception can occur if there is a version mismatch of derby jar files. 


RESOLVING THE PROBLEM
Perform below steps and try the installation again. 


1. Change derby.connection.requireAuthentication property value to false in <DE_INSTALL_LOCATION>/repos/derby.properties file. 

From : 
derby.connection.requireAuthentication=true
To:
derby.connection.requireAuthentication=false

2. Stop IBM ADE Service using below command
Unix:
<DE_INSTALL_LOCATION>/bin/setenv.sh
<DE_INSTALL_LOCATION>/bin/acsisrv.sh -stop

Windows:
Select IBM ADE Service from the Services window and then select Stop from the Action menu.

3. Wait for 2 minutes
4. Rename /usr/ibm/common/acsi/acsisvc to /usr/ibm/common/acsi/acsisvc_old if it exists

5. Start IBM ADE Service using below command:
Unix:
<DE_INSTALL_LOCATION>/bin/setenv.sh
<DE_INSTALL_LOCATION>/bin/acsisrv.sh -start

Windows:
Select IBM ADE Service from the Services window and then select start from the Action menu.

6. Wait for one minute and then Run listIU.sh (or listIU.bat) command to check if it does not give any errors.

7. Try the fix pack installation again. If the installation still fails with same errors then please provide below files for further investigation: 

 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 *