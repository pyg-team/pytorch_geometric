Title: IBM Orphan tasks are not cleaned up in the Process Portal for IBM Business Process Manager (BPM) - United States

Text:
Process Portal; task; LSW_TASK; Process Server database TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 Unnecessary orphan tasks, which are reflected in the Process Portal, cannot be cleaned up using Process Admin Console.




SYMPTOM
In IBM Business Process Manager Version 7.5.0, you cannot clean up unnecessary orphan tasks from the Process Server database using the Process Admin Console. This process, however, is described in the Deleting tasks from the Process Server database [http://pic.dhe.ibm.com/infocenter/dmndhelp/v7r5mx/index.jsp?topic=/com.ibm.wbpm.admin.doc/adminguide/topic/managing_procsvr_caches_dbs_B.html] topic in the information center. These tasks keep pending in the Process Portal, which poses a usability flaw.


CAUSE
Orphan tasks that cannot be cleaned do not have a CLOSED status in the database. These tasks are considered running and, therefore, cannot be cleaned up in the Process Administrative console. This problem is fixed in IBM Business Process Manager V7.5.1.x and later where the status of finished tasks is correctly set to CLOSED in the database. Tasks with their status properly set to CLOSED are not displayed in the Process Portal.

RESOLVING THE PROBLEM
To resolve this issue, use one of the following options:


 * Create a "ModifyTask" activity at the end of each affected service to change the status to CLOSED. 
   This workaround is described in the Services run from the Favorites menu leave tasks in the Teamworks Portal Inbox [http://www.ibm.com/support/docview.wss?uid=swg21439821] document. In that document, see step 2. "Fix the task status." in the "Cleanup approach #1" section. In this case, orphan tasks are not displayed in the Process Portal anymore. A task is displayed only when a user is aborting it so that you can rerun aborted tasks later.
   
   
 * Update the status of affected tasks in the LSW_TASK table within the database. A status value that is equal to 32 is reserved for the CLOSED status. You must determine which tasks should be updated. You can determine which tasks to update using a SELECT with the appropriate WHERE clause. If you can take a time stamp as a condition, then the following SQL statement will update the status to CLOSED. For example:
   UPDATE <schema>.LSW_TASK SET STATUS=32 WHERE RCVD_DATETIME < '<task timestamp>'
   
   
   Caution: Only update required tasks and do not introduce any inconsistencies in the LSW_TASK table. 
   
   
 * Upgrade to IBM Business Process Manager Version 7.5.1.x or later.

RELATED INFORMATION
 IBM Business Process Manager V7.5.1 Fix Pack 1 [http://www.ibm.com/support/docview.wss?uid=swg24033036]
Deleting orphan tasks in older Lombardi product [http://www.ibm.com/support/docview.wss?uid=swg21439821]


 

Cross reference information Segment Product Component Platform Version Edition Business Integration IBM Business Process Manager Advanced Process Portal AIX, Linux, Linux zSeries, Solaris, Windows 7.5 Business Integration IBM Business Process Manager Express Process Portal Linux, Linux zSeries, Windows 7.5 
PRODUCT ALIAS/SYNONYM
 BPM