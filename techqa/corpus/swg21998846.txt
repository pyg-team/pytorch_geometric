Title: IBM Error: "A server error was detected" in Worklight Console - United States

Text:
TPAEANYWHERE; Unable to open data base; DataStoreFactory returned null for unknown reason; HTTP/1.1 500 Internal Server Error; FWLSE3000E A server error was detected TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 After logging in to worklight console, get an error message. 

SYMPTOM
Excerpt from systemout.log for the MobileFirst profile: 

2CA0036E: An exception occurred while invoking method setDataSourceProperties on com.ibm.ws.rsadapter.spi.WSManagedConnectionFactoryImpl used by resource 

jdbc/AppCenterDS : java.lang.UnsupportedClassVersionError: 
JVMCFRE003 bad major version; class=oracle/jdbc/pool/OracleConnectionPoolDataSource, offset=6


[2/5/17 14:51:43:137 AEST] 000000bc ConnectionFac E J2CA0009E: An exception occurred while trying to instantiate the ManagedConnectionFactory class com.ibm.ws.rsadapter.spi.WSManagedConnectionFactoryImpl used by resource jdbc/WorklightAdminDS_MobileFirst : java.lang.reflect.InvocationTargetException


[2/5/17 14:51:43:152 AEST] 000000bc J2CUtilityCla E J2CA0036E: An exception occurred while invoking method setDataSourceProperties on com.ibm.ws.rsadapter.spi.WSManagedConnectionFactoryImpl used by resource jdbc/WorklightAdminDS_MobileFirst : java.lang.UnsupportedClassVersionError: JVMCFRE003 bad major version; class=oracle/jdbc/pool/OracleConnectionPoolDataSource, offset=6


"Build All" command failed with the error below:
C:\IBM\Anywhere761\MaximoAnywhere\build.xml:140: The following error occurred while executing this line:
C:\IBM\Anywhere761\MaximoAnywhere\anywhere-apps-builder.xml:1378: The following error occurred while executing this line:
C:\IBM\Anywhere761\MaximoAnywhere\anywhere-apps-builder.xml:1401: com.ibm.worklight.admin.restclient.RESTException: Error accessing http://host_name:9082/wladmin/management-apis/1.0/runtimes/worklight/adapters?locale=en_AU: HTTP/1.1 500 Internal Server Error 

FWLSE3000E: A server error was detected.
Unable to open data base. DataStoreFactory returned null for unknown reason. Context path is '/wladmin'.
http://host_name:9082/wladmin/management-apis/1.0/runtimes/worklight/adapters?locale=en_AU 

Error 500: java.lang.RuntimeException: Unable to open data base. DataStoreFactory returned null for unknown reason. Context path is '/wladmin'. 


RESOLVING THE PROBLEM
1. Download the JDBC driver from the Oracle website:http://www.oracle.com/technetwork/database/features/jdbc/index-091264.html 


2. Ensure that the Oracle JDBC driver is in the system path. 


3. Use ojdbc6.jar instead of ojdbc7.jar as the Oracle JDBC Driver during MobileFirst and Anywhere install and deploying runtime via the Server Configuration tool.


[/support/docview.wss?uid=swg21998846&aid=1] [/support/docview.wss?uid=swg21998846&aid=1]



4. Open the Websphere Administrative console.
Access the console panel using the following paths:
Click Resources > JDBC > JDBC providers.
It creates the correct entries for JDBC providers:


[/support/docview.wss?uid=swg21998846&aid=2] [/support/docview.wss?uid=swg21998846&aid=2]


Below is a screen shot for the entries created for JDBC Data Source:


[/support/docview.wss?uid=swg21998846&aid=3] [/support/docview.wss?uid=swg21998846&aid=3]



Select each of the data source and click “Test Connection” to verify the oracle db connection. 

A message will show up: "The test connection operation for data source Application Center database on server MFServer at node MFNode was successful." 

MobileFirst console will no longer display any error message: 

 

[/support/docview.wss?uid=swg21998846&aid=4] [/support/docview.wss?uid=swg21998846&aid=4]