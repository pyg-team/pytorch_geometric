Title: IBM OpenPages Framework Model Generator Service does not start - United States

Text:
IC Documentation TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 An OpenPages Administrator is attempting to start the OpenPages Framework Model Generator service, but it not starting up properly. 

RESOLVING THE PROBLEM
Versions: 5.1.x and 5.5.x

Keywords - 

Tomcat
javajni.c
jvm.dll
prunsrv.c

Problem -

After uninstalling the mistakenly installed JRE 1.6 or after upgrading existing JRE 1.5 to higher version, OpenPages Framework Model Generator Service doesn't start. Windows alert message says that service terminated unexpectedly.

Following error messages are seen in jakarta_service_<latest timestamp>.log

[2009-11-20 21:40:49] [info] Running Service...
[2009-11-20 21:40:49] [info] Starting service...
[2009-11-20 21:40:49] [info] Error occurred during initialization of VM
[2009-11-20 21:40:49] [info] java/lang/NoClassDefFoundError
[2009-11-20 21:40:49] [info] : java/lang/Object

OR 

[2009-11-20 22:47:00] [info] Running Service...
[2009-11-20 22:47:00] [info] Starting service...
[2009-11-20 22:47:00] [173 javajni.c] [error] The specified module could not be found.
[2009-11-20 22:47:00] [924 prunsrv.c] [error] Failed creating java C:\Program Files\Java\jdk1.5.0_06\jre\bin\server\jvm.dll
[2009-11-20 22:47:00] [1179 prunsrv.c] [error] ServiceStart returned 1
[2009-11-20 22:47:00] [info] Run service finished.
[2009-11-20 22:47:00] [info] Procrun finished.

Solution - 

This is due to Tomcat failing to start because of the new JRE version installed or upgrading existing JRE version. 

If CC is installed on a different machine or on the appserver then only JRE 1.5 is required . JRE 1.6 or higher is not required. So uninstall JRE 1.6 or higher if it is installed. 

After uninstalling JRE 1.6, Tomcat will not start though PATH variable contains JRE 1.5 version pointed to the installed directory under Cognos or under BEA folder. Even setting JAVA_HOME variable doesn't help.

Thi is due to Tomcat looking for wrong JRE path which doesn't not exist as seen in the jakarta_service_<latest timestamp>.log - 

[2009-11-20 22:47:00] [info] Running Service...
[2009-11-20 22:47:00] [info] Starting service...
[2009-11-20 22:47:00] [173 javajni.c] [error] The specified module could not be found.
[2009-11-20 22:47:00] [924 prunsrv.c] [error] Failed creating java C:\Program Files\Java\jdk1.5.0_06\jre\bin\server\jvm.dll
[2009-11-20 22:47:00] [1179 prunsrv.c] [error] ServiceStart returned 1
[2009-11-20 22:47:00] [info] Run service finished.
[2009-11-20 22:47:00] [info] Procrun finished.

To resolve this error, on CC server, 
1) go to <Install Drive>:\OpenPages\CommandCenter\Apache-tomcat-5.5.12\bin 
2) double click tomcat5w.exe. 
3) Go to JAVA tab.
4) Check the value for Java Virtual Machine.
5) It will contain an non-existent path.
6) Change this value to either jre\bin\server\jvm.dll under BEA directory or jre\bin\client\jvm.dll under Cognos\crn\bin\jre\1.3.1\bin\client\jvm.dll

Now OpenPages Framework Model Generator service will start successfully.



HISTORICAL NUMBER
 1767