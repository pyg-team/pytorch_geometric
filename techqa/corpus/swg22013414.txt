Title: IBM IGI 5.2.3.1 - Error during target event processing due to limit for the Work_Key column size - United States

Text:
IGI 5.2.3 Target Event Work_Key DataException Out Of Range SQLCODE=-302 TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 When processing an event from a target, a database exception could arise when evaluating the work_key value, which is a concatenation of different information, including entitlement name. 

SYMPTOM
The following error is shown in the scheduler_job: 

ERROR JOB:? - org.hibernate.exception.DataException: could not execute query
org.hibernate.exception.DataException: could not execute query
at org.hibernate.exception.SQLStateConverter.convert(SQLStateConverter.java:102)
[...]
Caused by: com.ibm.db2.jcc.am.SqlDataException: The value of a host variable in the EXECUTE or OPEN statement is out of range for its corresponding use.. SQLCODE=-302, SQLSTATE=22001, DRIVER=3.69.24

that is an SQL error that indicates that the value of an input host variable is found to be out of range.


CAUSE
The WORK_KEY column in DISPACHED_WORK_KEYS is expected to contain a unique value that allows one to identify all the microjobs that have to be clustered to perform a specific operation.
This key is determined with a concatenation of different information using a specific separator (@#@).
It is possible that the set size for the column is not enough (256 char) especially when names include symbols requiring 2 bytes. That's also because one of the substring contained in the WORK_KEY is the entitlement name that, by itself, could be 256 char long.


ENVIRONMENT
IGI 5.2.3.1



RESOLVING THE PROBLEM
Increase the Column_size of Work_key in the IGACORE.DISPATCHED_WORK_KEYS table. 

For example, on DB2 database: "ALTER TABLE IGACORE.DISPATCHED_WORK_KEYS ALTER COLUMN WORK_KEY SET DATA TYPE VARCHAR(1024)".