Title: IBM PI44028: EYUXL0905E ABEND ASRB IN WMWS OR WMAM IN CMAS DURING WLM INITIALISATION. - United States

Text:
z/os  A FIX IS AVAILABLE
Obtain the fix for this APAR.


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  CPSM CMAS 5.1 suffers abends during startup during WLM
   initialisation and transactions are then not routed as expected.
   CMAS message log shows:
   EYUXL0900I   Starting Environment Recovery
   EYUXL0905E,CMASaaaa,ASRB IN WMAM, OFFSET 000002BE PSW=07855000
   B486773E
   EYUXL0905E INTC=0029 ILC=6 TXCP=3AF9D801 SCODE=S00E0 TRAN=WMGR
   or
   EYUXL0905E CMASaaaa ASRB IN WMWS, OFFSET 000004E6 PSW=07855000
   B48BF71E
   EYUXL0905E INTC=0029 ILC=4 TXCP=004D0401 SCODE=S00E0 TRAN=XLEV
   .
   EYUWI0010E KISD51D3 WLM Initialization Failed.
   .
   Once this problem is encountered it recurrs on each attempt
   to restart the CMAS.
   EYU0WMWS (base 510) + 4E2 on suffers pic 29 on SAC 512
   instruction.
   
   
    
   
   

LOCAL FIX
 *  Removing all active connections to the CMAS on this LPAR
   (e.g COSH on MAS) and then restarting CMAS will cause WLM data
   space to be recreated and this allows CMAS/ WLM to restart ok.
   
   
    
   
   

PROBLEM SUMMARY
 *  ****************************************************************
   * USERS AFFECTED: All CICSPlex SM V4R1M0 and V4R2M0 Users      *
   ****************************************************************
   * PROBLEM DESCRIPTION: Various errors can occur when a target  *
   *                      region is added to or removed from a    *
   *                      workload by adding or removing the      *
   *                      CSYSDEF for the target region from a    *
   *                      CICS system group (CSYSGRP) which is    *
   *                      either the AORSCOPE for the WLMSPEC for *
   *                      the workload or a WLMDEF associated     *
   *                      with the workload, or is a member of a  *
   *                      CSYSGRP that is the AORSCOPE.           *
   *                                                              *
   *                      Errors seen include, but are no limited *
   *                      to:                                     *
   *                                                              *
   *                      -  overlays of the WLM data cache.      *
   *                                                              *
   *                      -  abend ASRB/S0E0 in method EYU0WMWS   *
   *                         (WMWS) or EYU0WMAM (WMAM) during     *
   *                         CMAS initialization.  This abend     *
   *                         will cause WLM initialization to     *
   *                         fail, and its services will not be   *
   *                         available for the lifetime of the    *
   *                         CMAS.                                *
   *                                                              *
   *                         Note that if this abend occurs, then *
   *                         it will occur everytime the CMAS is  *
   *                         restarted until a CPSM CMAS cold     *
   *                         start occurs                         *
   *                                                              *
   *                         A CPSM CMAS cold start is defined as *
   *                         a start of a CMAS while no MASes or  *
   *                         batch API programs that were         *
   *                         connected to it when it was last     *
   *                         active, are currently active.  The   *
   *                         CICS START SIT parameter has no      *
   *                         affect on this.                      *
   *                                                              *
   *                      -  a target region will be marked as    *
   *                         inactive for optimization when it    *
   *                         should be active.                    *
   *                                                              *
   *                      -  routing decisions made by CPSM WLM   *
   *                         routing regions may be incorrect.    *
   ****************************************************************
   * RECOMMENDATION: After applying the PTF that resolves this    *
   *                 APAR, all CMASes must be recycled to pick up *
   *                 the new code.  Note that regions do not need *
   *                 to be brought down and restarted at the same *
   *                 time.                                        *
   ****************************************************************
   When a target region is added to the AORSCOPE of a workload
   by adding its CSYSDEF to a CSYSGRP, then method EYU0WMAA
   (WMAA) is called.  As part of its processing, WMAA updates
   the AOR descriptor, EYURWAOR, for the target region.  One
   value in the EYURWAOR that is updated is the name of the
   CMAS to which the target region is connected.  This is
   used during routing decision processing and also when a
   target region is removed from a workload to determine
   processing paths.  A logic error in WMAA may cause it to set
   the connected CMAS name in the EYURWAOR to nulls, which can
   result in several problems, for example, incorrect routing
   decisions, etc.
   
   When a target region is removed from the AORSCOPE of a workload
   by removing its CSYSDEF from a CSYSGRP, then method EYU0WMAT
   (WMAT) is called.  During exit processing, WMAT resets the
   optimization flag for the target region to inactive.
   Additionally, if the target region is connected to another CMAS,
   then it will free the WLM data cache region status block
   associated with the target region.  If the target region is
   still a target region for another workload, then invalid
   processing can occur.
   
   
    
   
   

PROBLEM CONCLUSION
 *  WMAA has been updated to ensure that the connected CMAS name
   in the EYURWAOR is always set correctly when called.
   
   WMAT has been updated to reset a target region's optimization
   flag and free its region status block only if the target region
   is being removed as a target region from all workloads or is
   being terminated.
   
   
    
   
   

TEMPORARY FIX
 *              *********
               * HIPER *
               *********
   FIX AVAILABLE BY PTF ONLY
   
   
    
   
   

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   PI44028
   
   
 * REPORTED COMPONENT NAME
   CICS TS Z/OS V4
   
   
 * REPORTED COMPONENT ID
   5655S9700
   
   
 * REPORTED RELEASE
   60M
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   YesHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2015-06-29
   
   
 * CLOSED DATE
   2015-08-25
   
   
 * LAST MODIFIED DATE
   2015-09-02
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
    PI43487 [http://www-01.ibm.com/support/docview.wss?uid=swg1PI43487]
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
    UI30524 UI30525
   
   

MODULES/MACROS
 *  EYU0WMAA EYU0WMAT
   
   
    
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   CICS TS Z/OS V4
   
   
 * FIXED COMPONENT ID
   5655S9700
   
   

APPLICABLE COMPONENT LEVELS
 * R60M PSY UI30524 [HTTPS://WWW14.SOFTWARE.IBM.COM/WEBAPP/SET2/ORDERMEDIA/SHOPCART?PTFS=UI30524]
   UP15/08/28 P F508 ½
   
   
 * R70M PSY UI30525 [HTTPS://WWW14.SOFTWARE.IBM.COM/WEBAPP/SET2/ORDERMEDIA/SHOPCART?PTFS=UI30525]
   UP15/08/28 P F508 ½
   
   

FIX IS AVAILABLE
 * SELECT THE PTF APPROPRIATE FOR YOUR COMPONENT LEVEL. YOU WILL BE REQUIRED TO SIGN IN. DISTRIBUTION ON PHYSICAL MEDIA IS NOT AVAILABLE IN ALL COUNTRIES.