Title: IBM DFHEJ5102 on second invocation of a Stateful Bean - United States

Text:
DFHOT0103 DFHEJ5103 DFHEJ5102 StatefulBean stateful session bean Passivating EJB 5655M1500 R640 640 R400 400 HCI6400 R650 650 R500 500 HCI6500 5655-M15 5655M15 5655S9700 R660 660 R600 600 HCI6600 5655-S97 5655S97 5655S9700 R670 670 R700 700 HCI6700 5655-S97 5655S97 kixinfo retention42 TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 You are using CICS Transaction Server for z/OS as an Enterprise JavaBeans (EJB) server. A Client Program designed to call the Bean Method twice in succession fails on the second call. You receive messages DFHEJ5102 E, DFHEJ5103 E, and DFHOT0103 in the CICS log. 
The client side is getting an error stack message: 
java.rmi.NoSuchObjectException: CORBA OBJECT_NOT_EXIST 

SYMPTOM
DFHEJ5102 [http://pic.dhe.ibm.com/infocenter/cicsts/v4r2/topic/com.ibm.cics.ts.messages.doc/cics_mc/dfhej/EJ5102E.html] Cannot passivate bean class exception.

DFHEJ5103 [http://pic.dhe.ibm.com/infocenter/cicsts/v4r2/topic/com.ibm.cics.ts.messages.doc/cics_mc/dfhej/EJ5103E.html] [https://publib.boulder.ibm.com/infocenter/cicsts/v4r1/index.jsp?topic=/com.ibm.cics.ts.messages.doc/cics_mc/dfhej/EJ5013E.html]Unable to passivate enterprise bean bean class exception. 

DFHOT0103 [http://pic.dhe.ibm.com/infocenter/cicsts/v4r2/topic/com.ibm.cics.ts.messages.doc/cics_mc/dfhot/OT0103.html] A system exception has occurred while processing a GIOP request. The server that was processing the request can be identified by the hostname hostname. 


CAUSE
Incorrect Bean implementation is causing CICS to serialize a task object.

DIAGNOSING THE PROBLEM
This appears to be a problem with your Stateful Session Bean implementation. The failure of the final call with java.rmi.NoSuchObjectException is a result of a failure during the tidy up in CICS following the previous call. CICS could not passivate the bean, so when the next request comes in, CICS can not find a bean matching the request.

The passivate fails because the session bean is not serializable. The java.io.NotSerializableException indicates that as part of the serialization of the bean, CICS attempts to serialize a com.ibm.cics.server.Task object. Since com.ibm.cics.server.Task does not implement the Seriaizable interface, the exception is thrown.

[http://publibfi.boulder.ibm.com/cgi-bin/bookmgr/BOOKS/DFHG4P03/1.34.115?SHELF=dfhpush4&DT=20030109081628]DFHEJ5102 E Cannot passivate StatefulBeanO(BeanId(DataServer, 5458434943535a3100000082000000f112f082d70000000000000001), state = PASSIVATING) com.ibm.ejs.container.passivator.StatefulPassivator@122e3eb5 java.io.NotSerializableException:

[http://publibfi.boulder.ibm.com/cgi-bin/bookmgr/BOOKS/DFHG4P03/1.34.116?SHELF=dfhpush4&DT=20030109081628]DFHEJ5103 E Unable to passivate enterprise bean StatefulBeanO(BeanId(DataServer,
458434943535a3100000082000000f112f082d70000000000000001), state = PASSIVATING) com.ibm.ejs.container.activator.StatefulSessionActivationStrategy@1fcfbeb5 
com.ibm.ejs.EJSException: ; nested exception is: java.io.NotSerializableException: com.ibm.cics.server.Task java.io.NotSerializableException: com.ibm.cics.server.

[http://publibfi.boulder.ibm.com/cgi-bin/bookmgr/BOOKS/DFHG4P03/1.59.5?SHELF=dfhpush4&DT=20030109081628]DFHOT0103 A system exception has occurred while processing a GIOP request. The server that was processing the request can be identified by the hostname xxx.xxx.xxx.xxx. 

Client side error stack messages:
java.rmi.NoSuchObjectException: CORBA OBJECT_NOT_EXIST 0 No; nested exception is:
org.omg.CORBA.OBJECT_NOT_EXIST: minor code: 0 completed: No 
at java.lang.Throwable.<init>(Throwable.java:104) 
at java.lang.Exception.<init>(Exception.java:52) 
at java.lang.RuntimeException.<init>(RuntimeException.java:57) 
at org.omg.CORBA.SystemException.<init>(SystemException.java:59) 
at org.omg.CORBA.OBJECT_NOT_EXIST.<init>(OBJECT_NOT_EXIST.java:80)

RESOLVING THE PROBLEM
Look at your bean implementation to see why CICS is trying to serialize a Task object. It is most likely that an instance variable on the bean contains a reference to the Task object, and the instance variable is not defined as transient.

Both serialization and the transient keyword are features of the Javaâ„¢ language. You can find more information on them from the Java language specification or most Java language reference books.



PRODUCT ALIAS/SYNONYM
 CICS/TS CICS TS CICS Transaction Server