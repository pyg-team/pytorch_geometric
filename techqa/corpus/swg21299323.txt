Title: IBM Migrating queue-sharing groups to a new release of WebSphere MQ for z/OS - United States

Text:
Migrating ; queue-sharing ; groups ; queue-sharing groups ; queue ; csq45mqs csq456tb csq4570t csq4571t TECHNOTE (FAQ)

QUESTION
 You are migrating to a new release of WebSphere MQ for z/OS. What are the considerations for migrating a queue sharing group (QSG)? 

ANSWER
Review the migration section of the WebSphere MQ Information Center. For example:

- V9.0:
Preparing to migrate a single IBM MQ for z/OS queue manager [https://www.ibm.com/support/knowledgecenter/en/SSFKSJ_8.0.0/com.ibm.mq.mig.doc/q115400_.htm?sc=SSFKSJ_9.0.0] 
Migrating queue sharing groups from a previous version of the product [https://www.ibm.com/support/knowledgecenter/en/SSFKSJ_8.0.0/com.ibm.mq.mig.doc/q118430_.htm?sc=SSFKSJ_9.0.0] 

- V8.0: 
Preparing to migrate a single WebSphere MQ for z/OS queue manager [http://www.ibm.com/support/knowledgecenter/SSFKSJ_8.0.0/com.ibm.mq.mig.doc/q115400_.htm] 
Migrating queue sharing groups from a previous version of the product [http://www.ibm.com/support/knowledgecenter/SSFKSJ_8.0.0/com.ibm.mq.mig.doc/q118430_.htm] 

- V7.1: 
Migrating queue sharing groups from version 7.0.1 to version 7.1 [http://www.ibm.com/support/knowledgecenter/SSFKSJ_7.1.0/com.ibm.mq.doc/mi77181_.htm] or Migrating queue sharing groups from version 6.0 to version 7.1 [http://www.ibm.com/support/knowledgecenter/SSFKSJ_7.1.0/com.ibm.mq.doc/mi21130_.htm] 
Review and modify queue manager customizations from WebSphere MQ version 7.0.1 to WebSphere MQ version 7.1 [http://www.ibm.com/support/knowledgecenter/SSFKSJ_7.1.0/com.ibm.mq.doc/mi77109_.htm] 

 

As stated in the migration section, the sequence has been designed so that at no stage is an outage of the entire queue-sharing group required. It does this by creating new DB2 tables or adding columns to the existing tables 


Some additional details relating to the process are: 

 * Review the list of coexistence, migration and fallback fixes in techdoc 7006519 [http://www.ibm.com/support/docview.wss?uid=swg27006519] for both your current MQ release and the one you are migrating to. 
   
   You can apply the fixes to the old release well in advance of the migration. 
   
   You must restart all members of the QSG at the old release with the coexistence maintenance applied to avoid the following symptoms:
   
   o When running CSQ5PQSG MIGRATE directly or as a step in CSQ45xxx jobs you run as part of the migration:
   - CSQU581E DSG dsg-name has incompatible QMGR levels 
   or
   - CSQU584E QSG qsg-name in DSG dsg-name has incompatible QMGR levels
   
   o When starting a queue manager:
   - CSQ5005E Queue manager release level is incompatible with queue-sharing group 
   - CSQV086E QUEUE MANAGER ABNORMAL TERMINATION REASON=00F50029
   
   You can run a DB2 SPUFI job using command 
   SELECT * FROM CSQ.ADMIN_B_QMGR WHERE QSGNAME='queue_sharing_ group' 
   to see the queue managers that are part of the QSG. If any are no longer available to be started with the coexistence maintenance, remove the queue manager from the table [https://www.ibm.com/support/knowledgecenter/en/SSFKSJ_8.0.0/com.ibm.mq.adm.doc/q022570_.htm?view=kc#q022570___RemovingAQueueManagerFromA...] using CSQ5PQSG REMOVE QMGR.


 * Read the comments of the various SCSQPROC(CSQ45xxx) jobs you run. It is preferable to run some of the jobs when the system is lightly used or quiesced to avoid locking problems. 
   
   When you run CSQ45BPL and CSQ45GEX, you only need to do it once for each Data Sharing Group (DSG) being used for MQ queue sharing. Do this by replacing ++DB2SSID++ with one DB2 subsystem id from the DSG or with the batch group attach name for the DSG.
   
   V7.1.0 has CSQ455TB, CSQ456TB and CSQ457TB rather than the CSQ45ATB job for earlier releases. V8.0 has CSQ4570T and CSQ4571T.
   
   PM69981 [http://www.ibm.com/support/docview.wss?uid=swg1PM69981] for V7.1.0 updates the comments in CSQ457TB for usability.

RELATED INFORMATION
 Maintenance related to the CSQ5PQSG MIGRATE command [https://ibm.biz/Bdr3ps]
Considerations for migrating to a new CFLEVEL [http://www.ibm.com/support/docview.wss?&uid=swg21264321]


 

Cross reference information Segment Product Component Platform Version Edition Business Integration IBM MQ 
PRODUCT ALIAS/SYNONYM
 WebSphere MQ WMQ IBMMQ