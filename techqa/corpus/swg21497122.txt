Title: IBM Collecting Data: WebDAV for WebSphere Portal - United States

Text:
Collecting Data; Collecting Data; Collecting Data; MustGather; MustGather; MustGather; MustGatherDocument; API; webdav; 7.0 RECOMMENDED RESOURCES

ABSTRACT
 Collecting troubleshooting data for WebDAV with IBM® WebSphere® Portal expedites time to resolution by enabling IBM Support to provide informed problem analysis. 

CONTENT
If you have already contacted IBM Support and must collect data to determine the nature of a problem in WebSphere Portal, review the information below for the available methods of data collection. Otherwise, review Collecting Data: Read first for WebSphere Portal. [http://www.ibm.com/support/docview.wss?rs=688&uid=swg21672901] 

Collecting WebDAV information

Common problem scenarios encountered when using WebDAV include two categories: 
1. Connectivity: Unable to connect to WebSphere Portal URIs using certain type of WebDAV client.
2. File management: After the WebDAV client is successfully connected to Portal URIs, problems occur when managing files such as accessing theme and/or skin files or Web Content Manager (WCM) content via WebDAV clients.


Data Collection

Use the following instructions for collecting the necessary troubleshooting data.

I. Enabling trace logging 

Enable tracing during problem recreation in order to investigate the specific behavior of the component(s). Choose to enable either static or dynamic tracing and proceed with the steps accordingly. For further information regarding logging and tracing in the portal, refer to the System event logging [http://www-01.ibm.com/support/knowledgecenter/SSHRKX_8.5.0/mp/trouble/adsyslog.dita] [http://publib.boulder.ibm.com/infocenter/wpdoc/v6r1m0/index.jsp?topic=/com.ibm.wp.ent.doc/trouble/pd_intr_logs.html] topic in the WebSphere Portal Knowledge Center. 

Option A: Enabling static (extended) tracing
Static tracing is the recommended method of capturing data, as it collects data from server startup until problem recreation. 

1. Log into the Integrated Solutions Console as the WebSphere Application Server administrator. 

2. Click Troubleshooting->Logs and Trace->WebSphere_Portal->Diagnostic Trace. 

3. On the Configuration tab, ensure Enable Log is selected. On this same tab, ensure you increase the Maximum File Size and and Maximum Number of Historical Files as needed to ensure that the tracing of the problem recreation is not overwritten due to the amount of traffic on the system and output of the tracing itself. 

4. Click Change Log Level Details and enter the following trace string: 

 * 
 * com.ibm.wps.resolver.webdav.*=all:com.ibm.wps.logging.resolver.RequestResponseLogger=all:com.ibm.wps.engine.Servlet=all: com.ibm.wps.engine.phases.*=all:com.ibm.ws.security.*=all: com.ibm.ws.wim.*=all:com.ibm.websphere.wim.*=all:com.ibm.wsspi.wim.*=all


5. Click OK and save the changes. 
6. Restart the WebSphere_Portal application server. 

Option B: Enabling dynamic tracing 
Dynamic tracing can be used for situations that do not permit a server restart. 1. Log in as the Portal administrator. 

2. Click Administration->Portal Analysis->Enable Tracing. The Enable Tracing portlet appears. 

3. Type the required trace string into the field Append these trace settings: 

 * 
 * com.ibm.wps.resolver.webdav.*=all:com.ibm.wps.logging.resolver.RequestResponseLogger=all:
 * com.ibm.wps.engine.Servlet=all: com.ibm.wps.engine.phases.*=all
 * :com.ibm.ws.security.*=all: com.ibm.ws.wim.*=all:com.ibm.websphere.wim.*=all:com.ibm.wsspi.wim.*=all


4. Click the Add icon. Enable Tracing updates the field Current trace settings. 

Note: Restarting WebSphere Portal will remove traces that were set by using the Enable Tracing Administration portlet. 


II. Collecting and submitting logs and configuration data Using WebDAV client 

1. Create a new directory named "WebDAVdata" under your <wp_profile_root>/logs/<servername>/ directory. e.g. /opt/IBM/WebSphere/wp_profile/logs/WebSphere_Portal/WebDAVdata 

2. Reproduce the problem. 

3. Take a screenshot of your WebDAV client when the issue is reproduced. Save the screenshot to the newly created WebDAVdata directory. 

4. Inspect the trace file(s) for statements similar to the following:
[datetime] 00000042 ExternalLogFi I logging to external file [/opt/IBM/WebSphere/wp_profile/temp/com.ibm.wps.resolver.impl.logging.ExternalLogFileFactory/ ...]


Copy the contents of the "com.ibm.wps.resolver.impl.logging.ExternalLogFileFactory" directory to the newly created WebDAVdata directory. 


5. Run the following script from <wp_profile>/PortalServer/bin to collect the data: 

 * Windows: wpcollector.bat 
 * Linux/Unix/i: wpcollector.sh


Note: If you wish to use wpcollector to FTP the files to IBM Support, include the -Dpmr=<pmr_number> parameter to indicate the relevant PMR #. For example: wpcollector.bat -Dpmr=11111,222,333 

6. If you did not FTP your files via wpcollector, locate the "wp.mustgather.zip" file or the "<pmr #>-wp.mustgather-timestamp.zip" file in <wp_profile_root> [https://idoc2.swg.usma.ibm.com/portal/topic/com.ibm.wp.ent.doc_v70/reference/wpsdirstr.html#wpsdirstr__wp_profile_root]/filesForAutoPD/. Send the files to IBM Support by using the instructions outlined in Exchanging information with IBM Technical Support for problem determination [http://www.ibm.com/support/docview.wss?rs=688&uid=swg21201571]. 
Note: When sending in logs for review, include any relevant screenshots, timestamps, userIds, etc. in order to expedite analysis of the issue. 

 

 Using Web Browser 

IBM Support may request to reproduce the issue using a web browser rather than a WebDAV client. You should only collect the data in this section if instructed to do so by IBM Support. A reference of available WebDAV URLs is provided below for such data collections: 

 * 
 * 
 * 
 * http://<host>:<port>/wps/mycontenthandler/dav/fs-type1/themes?mime-type=application/zip
 * 
 * 
 * 
 * 
 * http://<host>:<port>/wps/mycontenthandler/dav/fs-type1?mime-type=application/zip


Note : To improve Support's analysis of the server tracing, collect and submit HTTP header logging during reproduction of the issue using a tool such as Fiddler [http://www.fiddlertool.com/fiddler/]. Support can then correlate the client requests with the server tracing to ensure proper focus. 

1. Create a new directory named "WebDAVdata" under your <wp_profile_root>/logs/<servername>/ directory. e.g. /opt/IBM/WebSphere/wp_profile/logs/WebSphere_Portal/WebDAVdata 2. Start a Fiddler capture or other HTTP header logging. 

3. Reproduce the problem by accessing the specific URL requested by IBM Support. 

4. Take a screenshot of your web browser when the issue is reproduced. Save the screenshot to the newly created WebDAVdata directory. 

5. Stop the Fiddler capture or other HTTP header logging. Save the data to the newly created WebDAVdata directory. 

6. Inspect the trace file(s) for statements similar to the following:
[datetime] 00000042 ExternalLogFi I logging to external file [/opt/IBM/WebSphere/wp_profile/temp/com.ibm.wps.resolver.impl.logging.ExternalLogFileFactory/ ...]


Copy the contents of the "com.ibm.wps.resolver.impl.logging.ExternalLogFileFactory" directory to the newly created WebDAVdata directory. 


7. Run the following script from <wp_profile>/PortalServer/bin to collect the data: 

 * Windows: wpcollector.bat 
 * Linux/Unix/i: wpcollector.sh


Note: If you wish to use wpcollector to FTP the files to IBM Support, include the -Dpmr=<pmr_number> parameter to indicate the relevant PMR #. For example: wpcollector.bat -Dpmr=11111,222,333 

8. If you did not FTP your files via wpcollector, locate the "wp.mustgather.zip" file or the "<pmr #>-wp.mustgather-timestamp.zip" file in <wp_profile_root> [https://idoc2.swg.usma.ibm.com/portal/topic/com.ibm.wp.ent.doc_v70/reference/wpsdirstr.html#wpsdirstr__wp_profile_root]/filesForAutoPD/. Send the files to IBM Support by using the instructions outlined in Exchanging information with IBM Technical Support for problem determination [http://www.ibm.com/support/docview.wss?rs=688&uid=swg21201571]. 
Note: When sending in logs for review, include any relevant screenshots, timestamps, userIds, etc. in order to expedite analysis of the issue. 

Related Information 

 * IBM Support Portal: WebSphere Portal Troubleshooting [http://www.ibm.com/support/entry/portal/Troubleshooting/Software/WebSphere/WebSphere_Portal] [http://www.ibm.com/support/docview.wss?rs=688&uid=swg21201571] 
 * WebSphere Portal Knowledge Center: Troubleshooting [http://www-01.ibm.com/support/knowledgecenter/SSHRKX_8.5.0/mp/trouble/troubleshooting.dita] 
 * Collecting Data: Read first for WebSphere Portal [http://www.ibm.com/support/docview.wss?rs=688&uid=swg21672901]

 

Cross reference information Segment Product Component Platform Version Edition Organizational Productivity- Portals & Collaboration WebSphere Portal End of Support Products AIX, HP-UX, IBM i, Linux, Solaris, Windows, z/OS 7.0