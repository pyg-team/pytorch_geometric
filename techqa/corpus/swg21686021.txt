Title: IBM Applications connecting to DB2 database show J2CA0027E exception - United States

Text:
 TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 Applications connecting to DB2 database show J2CA0027E: An exception occurred while invoking prepare on an XA Resource Adapter from dataSource jdbc/<datasource_name>,
within transaction ID <transaction_id>


DIAGNOSING THE PROBLEM

The collection of JCC traces is suggested for further analysis, they can be collected as described below:
http://www-01.ibm.com/support/docview.wss?uid=swg21196160 [http://www-01.ibm.com/support/docview.wss?uid=swg21196160] 

Traces might show lock timeout (SQLCODE=-911/ SQLERRMC=68) prior to ERRORCODE=-4203 exception which leads to the cancellation of the transaction and rollback. An example is below:

[7/23/14 11:56:47:703 EDT] 00000039 SystemOut O DB2 SQL Error: 
SQLCODE=-911, SQLSTATE=40001, SQLERRMC=68, DRIVER=3.65.97 
[7/23/14 11:56:47:776 EDT] 0000003b WSRdbXaResour E DSRA0304E: 
XA
Exception occurred. XAException contents and details are: "". 
[7/23/14 11:56:47:777 EDT] 0000003b WSRdbXaResour E DSRA0302E: 
XAException occurred. Error code is: XAER_NOTA (-4). Exception is: 
[jcc][t4][2041][12326][3.65.97] Error executing XAResource.prepare(). 
Server returned XAER_NOTA. ERRORCODE=-4203, SQLSTATE=nu



RESOLVING THE PROBLEM

This issue is generally due to an important workload increase. The value of LOCKTIMEOUT parameter should be increased using benchmarking techniques to tune this parameter. The current LOCKTIMEOUT value can be queried with the following command:
db2 get db cfg for <db-name>. 

The new value can be set with the following command:
db2 update db cfg for <db-name> USING <config-keyword> <value>

RELATED INFORMATION
 LOCKTIMEOUT [http://www-01.ibm.com/support/knowledgecenter/SSEPGG_9.7.0/com.ibm.db2.luw.admin.config.doc/doc/r0000329.html?cp=SSEPGG_9.7.0%2F2-2-6-7-56]
Collection of JDBC Traces [http://www-01.ibm.com/support/docview.wss?uid=swg21196160 ]