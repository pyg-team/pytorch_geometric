Title: IBM PI10794: V11 DSNTEJ1 FAILS IN STEP PH01S19. ABENDS WITH DSNU2900I - DSNURMA-MAPPING TABLE IS SPECIFIED WITH A NON-EXPANDED LRSN COL - United States

Text:
z/os  A FIX IS AVAILABLE
Obtain the fix for this APAR.


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  Migration from DB2 V10 -> V11 migration against a data sharing
   group DSNTEJ1 IVP job fails in step PH01S19. Step does online
   REORG and reference mappbing table MAP_TBL created previously
   in the job.
   .
   Step PH01S19 fails with this message:
   DSNU2900I =DBA1 323 08:58:58.67 DSNURMAP - MAPPING TABLE IS
   SPECIFIED
   WITH A NON-EXPANDED LRSN COLUMN
   .
   LRSN is not the right length as delivered with DSNTEJ1. Can
   occur in DB2 standalone and DS subsystems
   .
   Keywords: ExtendedRBA DB2EXTRBA/K
   
   
    
   
   

LOCAL FIX
 *  Update the MAP_TBL DDL to make the LRSN column
   CHAR(10) and DSNTEJ1 will complete successfully
   
   
    
   
   

PROBLEM SUMMARY
 *  ****************************************************************
   * USERS AFFECTED: All users of DB2 Installation Verification   *
   *                 Procedure (IVP) job DSNTEJ1 in DB2 11 for    *
   *                 z/OS are affected by this change.            *
   ****************************************************************
   * PROBLEM DESCRIPTION: DSNTEJ1 terminates in job step PH01S19  *
   *                      with return code 8 and these messages:  *
   *                        DSNU2900I =DSN  nnn hh:mm:ss.tt       *
   *                          DSNURMAP - MAPPING TABLE IS         *
   *                          SPECIFIED WITH A NON-EXPANDED       *
   *                          LRSN COLUMN                         *
   *                        DSNU1188I   nnn hh:mm:ss.tt DSNUGSQL  *
   *                          - SQLCODE = -551, ERROR:  auth-id   *
   *                          DOES NOT HAVE THE PRIVILEGE TO      *
   *                          PERFORM OPERATION CREATE TABLESPACE *
   *                          ON OBJECT DSN8D11P                  *
   ****************************************************************
   * RECOMMENDATION: Apply the fixing PTF for this APAR.          *
   ****************************************************************
   REORG TABLESPACE with SHRLEVEL CHANGE requires a mapping table
   to correlate RIDs in the original copy of the table space or
   partition with RIDs in the shadow copy.  Applications can read
   from and write to the original area, and DB2 records the writing
   in the log.  DB2 then reads the log and applies it to the shadow
   copy to bring the shadow copy up to date.  The mapping table
   name is specified by the MAPPINGTABLE keyword of the REORG
   control statement.
   
   In DB2 11, two enhancements affect these mapping tables:
   (1) The RBA and LRSN log records are expanded from basic 6-byte
       format to extended 10-byte format.
   (2) The REORG utility can create its own mapping table and
       mapping index instead of requiring you to create one
       explicitly and identify it via the MAPPINGTABLE keyword.
        * The MAPPINGDATABASE keyword specifies the database in
          which REORG implicitly creates the mapping table and
          index objects.
        * The REORG_MAPPING_DATABASE subsystem parameter specifies
          the default database that REORG TABLESPACE SHRLEVEL
          CHANGE uses to implicitly create the mapping table.
        * If the REORG_MAPPING_DATABASE parameter is set to null,
          REORG will create the mapping table database as an
          implicitly-defined database.
   
   Currently, MAP_TBL, the sample mapping table created by IVP
   job DSNTEJ1, specifies the LRSN column as CHAR(6) instead of
   CHAR(10).  As a result, the sample REORG TABLESPACE with
   SHRLEVEL CHANGE request executed in job step PH01S19 outputs
   the DSNU2900I message noted in the Problem Description and
   implicitly creates a mapping table with a CHAR(10) LRSN column
   definition.
   
   If the user ID running DSNTEJ1 is not authorized to create the
   table space for the implicit mapping table then the SQLCODE -551
   error occurs.
   
   
    
   
   

PROBLEM CONCLUSION
 *  In response, DSNTEJ1 is modified to define the LRSN column of
   MAP_TBL as CHAR(10).
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   PI10794
   
   
 * REPORTED COMPONENT NAME
   DB2 OS/390 & Z/
   
   
 * REPORTED COMPONENT ID
   5740XYR00
   
   
 * REPORTED RELEASE
   B10
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2014-02-02
   
   
 * CLOSED DATE
   2014-03-19
   
   
 * LAST MODIFIED DATE
   2014-11-12
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
    UI16238
   
   

MODULES/MACROS
 *  DSNTEJ1
   
   
    
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   DB2 OS/390 & Z/
   
   
 * FIXED COMPONENT ID
   5740XYR00
   
   

APPLICABLE COMPONENT LEVELS
 * RB10 PSY UI16238 [HTTPS://WWW14.SOFTWARE.IBM.COM/WEBAPP/SET2/ORDERMEDIA/SHOPCART?PTFS=UI16238]
   UP14/04/04 P F404
   
   

FIX IS AVAILABLE
 * SELECT THE PTF APPROPRIATE FOR YOUR COMPONENT LEVEL. YOU WILL BE REQUIRED TO SIGN IN. DISTRIBUTION ON PHYSICAL MEDIA IS NOT AVAILABLE IN ALL COUNTRIES.