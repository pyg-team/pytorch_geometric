Title: IBM IZ71522: UNABLE TO DELETE USER - United States

Text:
 SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  When the delete user button is clicked on the GUI, it
   seems ok ( no error message), but the user still remains in the
   list.
   
   In as-server.log, this message can be seen:
   ****************************************************************
   
   Caused by: java.sql.SQLException: ORA-02292: integrity
   constraint
   (VIRTUO.FK_WB_MON_DEFAULT_USERID) violated - child record found
   ORA-06512: at "VIRTUO.PM_GROUP_USER", line 337
   ORA-06512: at line 1
   at
   oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError
   .
   java:112)
   at oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:331)
   at oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:288)
   at oracle.jdbc.driver.T4C8Oall.receive(T4C8Oall.java:745)
   at
   oracle.jdbc.driver.T4CCallableStatement.doOall8(T4CCallableState
   ment.
   java:215)
   at oracle.jdbc.driver.T4CCallableStatement.executeForRows
   (T4CCallableStatement.java:965)
   at oracle.jdbc.driver.OracleStatement.doExecuteWithTimeout
   (OracleStatement.java:1170)
   at oracle.jdbc.driver.OraclePreparedStatement.executeInternal
   (OraclePreparedStatement.java:3339)
   at oracle.jdbc.driver.OraclePreparedStatement.execute
   (OraclePreparedStatement.java:3445)
   at oracle.jdbc.driver.OracleCallableStatement.execute
   (OracleCallableStatement.java:4394)
   at
   org.jboss.resource.adapter.jdbc.WrappedPreparedStatement.execute
   (WrappedPreparedStatement.java:183)
   at
   com.watchmark.prospect.enterprise.api.impl.WmLdapApi.deleteDBUse
   r
   (WmLdapApi.java:3553).
   
   
   
   
   
   ***********************************************************
   
   The problem is in the WB_MON_DEFAULT. There is a foreign key in
   this table referencing WB_PREFERENCES. A 'delete user' operation
   will fire a DELETE statement on WB_PREFERENCES. However, the
   constriant is not declared as 'ON DELETE CASCADE'. This causes
   the delete issue.
   
   
    
   
   

LOCAL FIX
 *  Manual delete on the WB_MON_DEFAULT table was required before an
   actual delete using the GUI was issued. Alternate method would
   be: rebuild the constriant with 'ON DELETE CASCADE'.
   
   
    
   
   

PROBLEM SUMMARY
 *  This shall be corrected in 1.2.1 Interim Fix 3 (IF3) and
   rolled into 1.2.1 Fix Pack 2 (FP2)
   
   
    
   
   

PROBLEM CONCLUSION
 *  ***************************************************************
   *                                                             *
   * USERS AFFECTED: 9.2, 1.2.1 Users                            *
   *                                                             *
   ***************************************************************
   * RECOMMENDATION: Apply the following fix when available      *
   *                                                             *
   * The fix for this APAR is to be contained in the following   *
   * maintenance package(s):                                     *
   *                                                             *
   * | fix pack | 1.2.1.X-TIV-TNPMW-IF0003                       *
   *                                                             *
   ***************************************************************
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   IZ71522
   
   
 * REPORTED COMPONENT NAME
   NETCOOL PM WIRE
   
   
 * REPORTED COMPONENT ID
   5724T0100
   
   
 * REPORTED RELEASE
   912
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2010-03-02
   
   
 * CLOSED DATE
   2010-04-29
   
   
 * LAST MODIFIED DATE
   2010-04-29
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   NETCOOL PM WIRE
   
   
 * FIXED COMPONENT ID
   5724T0100
   
   

APPLICABLE COMPONENT LEVELS
 * R920 PSN
   UP