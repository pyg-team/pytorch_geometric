Title: IBM PM71370: RECURSIVE DFHAP0001 ABENDS IN DFHAPEX EVENTUALLY LEADING TO CICS CRASHING WITH DFHKE1800 - United States

Text:
z/os SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS FIXED IF NEXT.
    
   
   

ERROR DESCRIPTION
 *  You are running CICS Transaction Server  4.2 and receive the
   following messages after an earlier abend in DFHTFXM's
   recovery routine:
   DFHXM0001  An abend (code ---/AKEA) has occurred at
              at offset X'1206' in module DFHXMTA.
   DFHAP0001  An abend (code 0C4/AKEA) has occurred at
              offset X'07EA' in module DFHAPEX.
   DFHAP0001  An abend (code 0C4/AKEA) has occurred at
              offset X'07E6' in module DFHAPEX.
   .
   This AP0001 error repeats until you receive:
   DFHKE0303 A RECURSIVE ABEND HAS BEEN DETECTED BY THE KERNEL
             DOMAIN.
   DFHKE1800 ABNORMAL TERMINATION OF CICS IS COMPLETE.
   .
   DFHXMTA's recovery routine was driven and calls routine
   CLEAN_UP_TXN.  This zeros out the TXN from the TASENTRY, which
   is later referenced by DFHAPEX leading to the OC4.
   
   
   Additional Symptom(s) Search Keyword(s): KIXREVDAM
   CQRY  CICS Crash Crashes
   In another case the following message was also issued:
   DFHME0118  AN ERROR HAS OCCURRED WHEN CALLING THE MESSAGE USER
              EXIT FOR MESSAGE DFHME0116
   
   
    
   
   

LOCAL FIX

PROBLEM SUMMARY
 *  ****************************************************************
   * USERS AFFECTED: All CICS users                               *
   ****************************************************************
   * PROBLEM DESCRIPTION: Recursive DFHAP0001 abends in DFHAPEX   *
   *                      eventually leading to CICS crashing     *
   *                      with DFHKE1800                          *
   ****************************************************************
   * RECOMMENDATION:                                              *
   ****************************************************************
   A CQRY task is running, it encounters an ATNI abend in its
   initialization stage of the task when binding the transaction's
   terminal client. The DFHTFXM's recovery routine is entered to
   handle the ATNI abend, however a program check occurs in the
   recovery routine. So DFHTFXM's recovery is entered again.
   The abend processing causes the abend percolated to an upper
   stack, which is owned by DFHXMTA. DFHXMTA's recovery routine is
   entered and it completes cleaning the task's transaction token.
   After that, DFHXMTA issues an XM0001 message and DFHAPEX is
   driven as part of the dump processing because XDUREQ is active.
   DFHAPEX is trying to pass some parameter to the exit but 0C4
   occurs because the transaction token has been cleared. DFHAPEX
   abends and DFHAPEX is driven again but the same situation
   occurs. Finally the recursive abends in DFHAPEX lead to CICS
   crashing with DFHKE1800.
   keyword: msgDFHKE1800
   
   
    
   
   

PROBLEM CONCLUSION

TEMPORARY FIX

COMMENTS
 *  This APAR is being closed FIN with concurrence from the
   submitting customer.  This means that a fix to this APAR is
   expected to be delivered from IBM in a release which is being
   developed at the time that the APAR was closed.
   The latest release of the product to exit development at the
   time this APAR was closed was:
     CICS Transaction Server for z/OS V4.2.
   SPA57872  SPA 57872
   
   
    
   
   

APAR INFORMATION
 * APAR NUMBER
   PM71370
   
   
 * REPORTED COMPONENT NAME
   CICS TS Z/OS V4
   
   
 * REPORTED COMPONENT ID
   5655S9700
   
   
 * REPORTED RELEASE
   700
   
   
 * STATUS
   CLOSED FIN
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2012-08-22
   
   
 * CLOSED DATE
   2012-09-19
   
   
 * LAST MODIFIED DATE
   2012-09-19
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION

APPLICABLE COMPONENT LEVELS
 * R700 PSY
   UP