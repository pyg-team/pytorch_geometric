Title: IBM "ORA-00904: "DBMS_LOB"."SUBSTR": invalid identifier ... ORA-06512: at line 12" when upgrading database - United States

Text:
 TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 Administrator launches Controller Configuration, and chooses database. Administrator clicks the 'Run' button which launches the 'Database Conversion' utility.

Administrator clicks the 'Run Steps' button, to upgrade the database to the latest version.

After a while, an error appears. 

SYMPTOM
When running steps: 

Running script: script/ora/ora_create_view_vxnyst_c4.sql
Running script: script/ora/ora_create_view_vxnyst_cf.sql
Running script: script/ora/ora_create_view_vxnyst_uc.sql
Running script: script/ora/ora_create_view_vxnyst_uf.sql
Running script: script/ora/ora_create_view_vxnyst_um.sql
Running script: script/ora/ora_update_xmenu.sql
Running DB Step: 949
Running script batch: script/ora_949.batch
Running script: script/ora/ora_update_trg_saxuser.sql
Running DB Step: 950
Running script batch: script/ora_950.batch
Running script: script/ora/ora_update_xmenu.sql
Running DB Step: 951
Running DB Step: 952
Running script batch: ora_952.batch
Running script: script/ora_xrclayout_add_column.sql
** ERROR: java.sql.SQLSyntaxErrorException: ORA-00904: "DBMS_LOB"."SUBSTR": invalid identifier
ORA-06512: at line 12

Swedish:
** ERROR: java.sql.SQLSyntaxErrorException: ORA-00904: "DBMS_LOB"."SUBSTR": ogiltig identifierare
ORA-06512: vid rad 12


CAUSE
The Oracle schema (the user used by the Controller application server to connect to the Oracle database server) does not have enough permission to use the Oracle package "dbms_Lob".


RESOLVING THE PROBLEM
Modify the permissions for the relevant schema, so that it can use the Oracle package "dbms_Lob". 

 

Steps: 

1. On the application server, launch 'Controller Configuration' 

2. Open 'Database Connections' 

3. Select the relevant connection 

4. Make a note of the value 'User ID' 

 * This is the schema name


5. Ask the Oracle administrator (DBA) to assign rights to the relevant Oracle packages, for example by running scripts similar to: 

 * grant execute on dbma_lob to <schemaname>; 
 * grant execute on dbms_lob to <schemaname>;