Title: IBM PM10972: WHEN TABLETYPE=TABLE IN SYSIBM.SQLTABLES, NEW TABLE TYPES 'C', 'P' WERE NOT SUPPORT BY V9 DBMD - United States

Text:
z/os  A FIX IS AVAILABLE
Obtain the fix for this APAR.


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  When TABLETYPE=TABLE in SYSIBM.SQLTABLES, new table types
   'C', 'P' were not support by V9 DBMD.
   
   Scenario description:
   
   The Stored Proc paramaters are as follows:
   
   IN CATALOGNAME VARCHAR(128)
   IN SCHEMANAME VARCHAR(128)
   IN TABLENAME VARCHAR(128)
   IN TABLETYPE VARCHAR(4000)
   IN OPTIONS VARCHAR(4000)
   
   If call the SP for a specific application schema ALL table
   types are returned - inlcuding Clone Tables. The call format is
   as follows:
   
   call sysibm.sqltables('%','GLFMD1','%','%','%')
   
   If pass traditional different table types (e.g. TABLE, VIEW)
   in parameter 4 I get standard tables and views returned - but
   never clone tables.
   
   e.g.
   call sysibm.sqltables('%','GLFMD1','%','TABLE','%')
   call sysibm.sqltables('%','GLFMD1','%','VIEW','%')
   additional symptoms: DB21101E Too few parameters
   when multiple version of native stored procedure
   
   
    
   
   

LOCAL FIX
 *  N/A but this is fixed in next release
   
   
    
   
   

PROBLEM SUMMARY
 *  ****************************************************************
   * USERS AFFECTED: All Users of the DB2 Universal JDBC Driver   *
   *                 or the CLI Driver provided with DB2 for      *
   *                 Linux Unix and Windows Version 8 and above   *
   *                 that connects to DB2 Version 9.1 for z/OS    *
   ****************************************************************
   * PROBLEM DESCRIPTION: This APAR addresses the following       *
   *                      problems:                               *
   *                                                              *
   *                      1. When the JDBC Driver or CLI Driver   *
   *                         calls the SYSIBM.SQLTABLES stored    *
   *                         procedure to return a list of        *
   *                         tables, it does not include new      *
   *                         table types like clone tables in the *
   *                         result set if a list of table types  *
   *                         was explicitly specified by the      *
   *                         caller.                              *
   *                      2. When the JDBC Driver or CLI Driver   *
   *                         calls the SYSIBM.SQLPROCEDURECOLS    *
   *                         stored procedure to return a list of *
   *                         procedure columns, it can return     *
   *                         duplicate columns if multiple        *
   *                         versions of a native SQL procedure   *
   *                         exist.                               *
   ****************************************************************
   * RECOMMENDATION: Apply PTF.                                   *
   ****************************************************************
   The stored procedure SYSIBM.SQLTABLES does not recognized new
   V9 table types like clone table (TYPE='C') and implicit table
   created for XML columns (TYPE='P'). As a result, if the type
   'TABLE' was explicitly specified in the list of table types to
   be returned, then the new tables types are not included in the
   result set.
   
   Finally, the stored procedure SYSIBM.SQLPROCEDURECOLS does
   not handle multiple versions of native SQL procedures correctly.
   As a result, duplicate columns can be returned if multiple
   versions of a native SQL procedure exist.
   
   
    
   
   

PROBLEM CONCLUSION
 *  The SYSIBM.SQLTABLES stored procedure was updated to also
   recognized the new V9 table types.
   
   Finally, the stored procedure SYSIBM.SQLPROCEDURECOLS was fixed
   such that only the columns of an active version of the
   native SQL procedure are returned.
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   PM10972
   
   
 * REPORTED COMPONENT NAME
   DB2 OS/390 & Z/
   
   
 * REPORTED COMPONENT ID
   5740XYR00
   
   
 * REPORTED RELEASE
   910
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2010-03-29
   
   
 * CLOSED DATE
   2010-04-30
   
   
 * LAST MODIFIED DATE
   2011-04-28
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
    UK56627
   
   

MODULES/MACROS
 *  DSN@PCO8 DSN@TBL8 DSNAPCO8 DSNATBL8
   
   
    
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   DB2 OS/390 & Z/
   
   
 * FIXED COMPONENT ID
   5740XYR00
   
   

APPLICABLE COMPONENT LEVELS
 * R910 PSY UK56627 [HTTPS://WWW14.SOFTWARE.IBM.COM/WEBAPP/SET2/ORDERMEDIA/SHOPCART?PTFS=UK56627]
   UP10/05/19 P F005
   
   

FIX IS AVAILABLE
 * SELECT THE PTF APPROPRIATE FOR YOUR COMPONENT LEVEL. YOU WILL BE REQUIRED TO SIGN IN. DISTRIBUTION ON PHYSICAL MEDIA IS NOT AVAILABLE IN ALL COUNTRIES.