Title: IBM Limitations of IBM WebSphere DataPower SOA Appliance URL Rewrite Policy Post-body rule type - United States

Text:
URL; Rewrite; Policy; DataPower; Post; Body; Request; Post-body; rule TECHNOTE (FAQ)

QUESTION
 I tried to use a URL Rewrite Policy with a post-body rule type but it doesn't seem to be working, why is this and what can I do to make it work? 

CAUSE
There are some limitations with post-body rules of a URL Rewrite Policy which need to be documented.

ANSWER
If you are are trying to use a Post-Body rule with a response message, this will not work as post-body only applies to overriding the body of an HTTP POST request. This is documented in the online help for URL Rewrite Policy (clicking the help hyperlink from the Configure URL Rewrite Policy screen in the Web GUI) and in the DataPower Infocenter [http://pic.dhe.ibm.com/infocenter/wsdatap/v5r0m0/index.jsp?topic=%2Fcom.ibm.dp.xi.doc%2Fcommandreference.xi501557.htm&resultof%3D%2522%2575%2572%256c%2522%2520%2522%2572%2565%2577%2572%2569%2574%2565%2522%2520%2522%2572%2565%2577%2572%2569%2574%2522%2520%2522%2570%256f%256c%2569%2563%2579%2522%2520%2522%2570%256f%256c%2569%2563%2569%2522%2520%2522%256d%256f%2564%2565%2522%2520].

If you are trying to use a Post-Body rule in a URL Rewrite Policy with a Multi-Protocol Gateway, unfortunately the Post-Body rule does not work with the Multi-Protocol Gateway. If this functionality is required we would suggest to use an XSL stylesheet to work around.

If you are trying to use a Post-Body rule with an XML Firewall the following conditions must be met for the post-body rule to apply to a POST request for the url-rewrite policy of an XML firewall:

1. The message type is 'unprocessed' or 'preprocessed' (The request type is Non-XML or Pass through)
2. The content type is not one of the following: 


text/xml
text/html
application/xml
application/soap+xml
application/xop+xml
application/x-www-urlencoded
application/x-www-form-urlencoded
multipart/form-data
multipart/byteranges
DIME or MIME

It should also be noted that the Web GUI or CLI will not stop you from adding a policy with a Post-Body rule to a Multi-Protocol Gateway or an XML Firewall that doesn't meet the above conditions, since the policy may have other statements that do apply; the post-body statement will be silently ignored.