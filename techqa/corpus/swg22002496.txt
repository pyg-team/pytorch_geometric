Title: IBM OpenPages OPAdminConsole installer is unable to install Fujitsu software on Linux - United States

Text:
 TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 During a fresh installation of OpenPages on a Linux application server, the Fujitsu workflow control software fails to install. Any of the following reasons can cause this to occur:

1. IBM Java 1.6 SDK is not available in the WebSphere 8.5.5.x deployment
2. The Linux operating system is missing the 'bc' operating system utility
3. The Linux operating system ulimit settings may be set to improper values on the application server(s) 

CAUSE
The following issues can occur when installing the OpenPages application server on a Linux operating system. The portion of the OpenPages installer that deploys the Fujitsu workflow (IBPM) control software requires the following: 

1. The WebSphere 8.5.5.x deployment on each application server must contain the IBM Java 1.6 SDK as one of the available Java versions 

2. The Linux operating system 'bc' command utility must be installed 

3. Several Linux operating system ulimit settings must be increased from their default values


ENVIRONMENT
OpenPages 7.1 thru 7.3 application servers installed on the Linux operating system



DIAGNOSING THE PROBLEM
The OPAdminConsole installer can fail with one or more of the following error messages getting logged (check the session.log files and the OPAdminConsole command output area). 

1. If the IBM Java 1.6 SDK is not available to the WebSphere deployment on the application server(s), you will see the following OPAdminConsole messages: 

 "The required Java SDK version (1.6 - 1.6.9) is not available." 

 " Exception occurred: No SDK available suitable for running IBPM!" 

To determine which Java SDK's are available, execute the following commands on the application server and examine the output to ensure that the Java 1.6 SDK is available (replace <WAS_Home> with the home directory for the WebSphere installation): 


# cd <WAS_Home>/AppServer/bin
# ./managesdk.sh -listAvailable 

 

2. If the 'bc' command utility is not installed in the Linux operating system, you will see a message that contains something similar to the following regarding the setupLinux.bin utility while running the OPAdminConsole: 

"....setupLinux.bin: line 189: bc: command not found" 

 followed by an error message that contains something similar to this:

"Exception occurred: Error executing 'EncryptPassword.sh -efd "<encrypted-password>"' in dir '<OpenPages-Home>/Fujitsu/InterstageBPM/client/samples/configuration' "

3. If the ulimit values on the Linux-based application server are not set to proper values, you may see messages like the following while running the OPAdminConsole that cause the installation to fail: 

"Connection failed when trying connection type 'ConnectionMethod' is set to 'remote_op'
Exception occurred: Connection refused: connect
java.net.DualStackPlainSocketImpl.connect0(Native Method)
java.net.DualStackPlainSocketImpl.socketConnect(DualStackPlainSocketImpl.java:91)
java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:370)
java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:231)
java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:213)
java.net.PlainSocketImpl.connect(PlainSocketImpl.java:192)
java.net.SocksSocketImpl.connect(SocksSocketImpl.java:404)
java.net.Socket.connect(Socket.java:643)
java.net.Socket.connect(Socket.java:590)
java.net.Socket.<init>(Socket.java:454)
java.net.Socket.<init>(Socket.java:234)
com.ibm.openpages.config.core.logic.remote.RemoteAccess.transactForward(Unknown Source)
com.ibm.openpages.config.core.logic.remote.RemoteAccess.transact(Unknown Source)
com.ibm.openpages.config.core.logic.remote.RemoteAccess.transact(Unknown Source)
com.ibm.openpages.config.core.logic.remote.RemoteAccess.listFiles(Unknown Source)
com.ibm.openpages.config.core.logic.op.OpServerBase.setupConnection(Unknown Source)
com.ibm.openpages.config.core.logic.op.OpServerBase.setupConnection(Unknown Source)
com.ibm.openpages.config.core.logic.op.OpServerBase.setup(Unknown Source)
com.ibm.openpages.config.core.logic.op.OpSetupServer.preReqCheck(Unknown Source)
com.ibm.openpages.config.core.logic.ConfigExecutionLogic.conductOperation(Unknown Source)
com.ibm.openpages.config.core.logic.ConfigExecutionLogic.doNext(Unknown Source)
com.ibm.openpages.config.core.logic.ActionExecutionLogic.prereqNext(Unknown Source)
com.ibm.openpages.config.core.logic.ActionExecutionWorkflow.executeDoPreReq(Unknown Source)
com.ibm.openpages.config.core.logic.ActionExecutionWorkflow.executeStep(Unknown Source)
com.ibm.openpages.config.core.logic.ActionExecutionWorkflow.execute(Unknown Source)
com.ibm.openpages.config.ui.logic.ActionExecutionLauncher.run(Unknown Source)
java.lang.Thread.run(Thread.java:809)"



RESOLVING THE PROBLEM
--To resolve the missing IBM Java 1.6 SDK issue, be sure to choose IBM Java 1.6 SDK ("Java SE 6") as the default Java for WebSphere (instead of Java 1.8) when you are installing WebSphere 8.5.5.11 (or newer fix pack); this will enable the Fujitsu (IBPM) workflow component software to install properly. 

NOTE: You must still add (and set as the default SDK) IBM Java 1.7 SDK to the WebSphere deployment on each application server since the OpenPages product requires Java 1.7 to run. See the OpenPages Installation Guide section entitled "Setting up JAVA_HOME for the WebSphere Application Server" for the steps on how to perform this setup. 

 

--To ensure that the OPAdminConsole is able to successfully launch the Fujitsu (IBPM) workflow component installation software, ensure that the 'bc' utility command is installed into the Linux operating system on each application server. 

To add the bc command utility into Linux, enter the following command as a privileged user with full system access: 

 yum install bc 

and then reboot the application server. 

 

-- To avoid file limit errors, socket connection errors, or other OS-centric issues from occurring while running the OPAdminConsole to install/configure the OpenPages application server(s), as a privileged user with full system access ensure that these Linux operating system limits are set to the following minimum values on each Linux-based application server as shown in this "ulimit -a" command output: 

$ ulimit -a
core file size (blocks, -c) 10485760
data seg size (kbytes, -d) unlimited
scheduling priority (-e) 0
file size (blocks, -f) unlimited
pending signals (-i) 63407
max locked memory (kbytes, -l) 65536
max memory size (kbytes, -m) unlimited
open files (-n) 100000
pipe size (512 bytes, -p) 8
POSIX message queues (bytes, -q) 819200
real-time priority (-r) 0
stack size (kbytes, -s) unlimited
cpu time (seconds, -t) unlimited
max user processes (-u) 127457
virtual memory (kbytes, -v) unlimited
file locks (-x) unlimited 

 

and then reboot the application server after making any ulimit changes.