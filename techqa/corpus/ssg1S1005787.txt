Title: IBM How to collect logs from Cisco MDS  9000 series switches - United States

Text:
 TECHNOTE (FAQ)

QUESTION
 How to collect logs from Cisco MDS 9000 series switches 

CAUSE
Cisco switch logs are needed when their is issue with Cisco switch itself or if there is SAN related issues

ANSWER
Configure your telnet or ssh application (example putty) to log the screen output to a text file. 

Baseline data collection for all types of problems
Then connect to the switch and run commands as below.
# term length 0 (this command allows the text output to scroll)
# show tech-support details
# exit

In addition to the baseline data, additional data may be needed for different issue types. 

Data to be collected if the issue is related to performance within the local SAN
Change your screen output file name and connect to switch again.
# term length 0 
# show logging onboard 
# exit

Change your screen output file name and connect to switch again.
# term length 0 
#show hardware internal statistics device fabric errors
#exit

Data for issues with port stability
Change your screen output file name and connect to switch again.
# term length 0 
#show interface transceiver details 
#exit

Data for long distance replication issues using FCIP (Fiber Channel over IP)
# term length 0 
# show tech-support fcip
# exit

Please collect one show tech-support details per switch and name the file as below.
[switchname]_showtech_YYYYMMDD_hhmm.txt
Example: ibmsw_showtech_20160421_1030.txt
ibmsw_showlogging_20160421_1030.txt 
ibmsw_hardwareinternal_20160421_1030.txt 
ibmsw_transceiver_20160421_1030.txt

Collect logs from all the switches in your fabric one by one or from the switches in question.

Compress all show tech details of switch belonging one fabric in one compressed file.
Upload a single compressed file per fabric. 
Example: 
Fabric_A_showtech_20160421_1030.zip
Fabric_B_showtech_20160421_1030.zip 

Upload the file to IBM under your PMR number
http://www.ecurep.ibm.com/app/upload [http://www.ecurep.ibm.com/app/upload]

Error counters on switch are cumulative, so its good practice to clear the stats on switch after collecting the logs, and then to collect another set of logs once problem has re-occurred or after few hours if its ongoing problem.

Run the commands below to clear the stats on switch

#clear counters interface all (Clears the port counters)
#debug system internal clear-counters all (Clears the ASIC counters)
#clear ips stats all (Clears FCIP counters only needed on FCIP enabled switches)


 



Cross reference information Segment Product Component Platform Version Edition Storage Area Networks (SAN) Cisco MDS 9706 Multilayer Director Storage Area Networks (SAN) Cisco MDS 9513 Multiplayer Director Storage Area Networks (SAN) Cisco MDS 9509 Multilayer Director Storage Area Networks (SAN) Cisco MDS 9506 Multilayer Director Storage Area Networks (SAN) Cisco MDS 9396S 16G Multilayer Fabric Switch Storage Area Networks (SAN) Cisco MDS 9140 Multilayer Fabric Switch Storage Area Networks (SAN) Cisco MDS 9124 Fabric Switch Storage Area Networks (SAN) Cisco MDS 9120 Multilayer Fabric Switch Storage Area Networks (SAN) Cisco MDS 9020 Fabric Switch