Title: IBM CJDB023E Could not connect to database - United States

Text:
STERLINGNFX TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 CJDB023E Could not connect to database 

SYMPTOM


Sterling Control Center is unable to get connection with DB2 server.
The SCC engine log showed various messages. The main ones are

Connection refused: connect. ERRORCODE=-4499, SQLSTATE=08001

CJDB023E Could not connect to database. Please check the log file detailed error.


-4499 Explanation: A fatal error occurred that resulted in a disconnect from the data source. The existing connection has become unusable.
08001 The application requester is unable to establish the connection.

Note: See http://publib.boulder.ibm.com/infocenter/db2luw/v9r5/index.jsp?topic=/com.ibm.db2.luw.apdv.java.doc/doc/rjvjcsqc.html for list of IBM DB2 SQLSTATE codes


DB2 was down on the server.


Error Message ccengine log

13 feb 2011 22:39:41,437 5578 [main] INFO SCCAgent - Starting JDBC Services ...
13 feb 2011 22:39:41,437 5578 [main] INFO ServiceMBeanSupport - Starting ...LibrarianService
13 feb 2011 22:39:41,437 5578 [main] INFO ServiceMBeanSupport - Started ...LibrarianService
13 feb 2011 22:39:41,437 5578 [main] INFO ServiceMBeanSupport - Starting ...JDBC Service
13 feb 2011 22:39:41,671 5812 [main] INFO JDBCService - Registered JDBC driver com.ibm.db2.jcc.DB2Driver
13 feb 2011 22:39:45,843 9984 [main] INFO JdbcConfiguration - aUrl = jdbc:db2://10.85.19.189:37190/SCCPROD
13 feb 2011 22:39:45,843 9984 [main] INFO JdbcConfiguration - url = jdbc:db2://10.85.19.189:37190/SCCPROD
13 feb 2011 22:39:45,843 9984 [main] ERROR JdbcConfiguration - Exception, "com.ibm.db2.jcc.am.yn: [jcc][t4][2043][11550][3.57.82] Uitzondering java.net.ConnectException: fout tijdens openen socket voor server /10.85.19.189 op poort 37.190 met bericht: Connection refused: connect. ERRORCODE=-4499, SQLSTATE=08001", occured. Using Password :true
13 feb 2011 22:39:49,359 13500 [main] INFO JdbcConfiguration - aUrl = jdbc:db2://10.85.19.189:37190/SCCPROD
13 feb 2011 22:39:49,359 13500 [main] INFO JdbcConfiguration - url = jdbc:db2://10.85.19.189:37190/SCCPROD
13 feb 2011 22:39:49,359 13500 [main] ERROR JdbcConfiguration - Exception, "com.ibm.db2.jcc.am.yn: [jcc][t4][2043][11550][3.57.82] Uitzondering java.net.ConnectException: fout tijdens openen socket voor server /10.85.19.189 op poort 37.190 met bericht: Connection refused: connect. ERRORCODE=-4499, SQLSTATE=08001", occured. Using Password :false
13 feb 2011 22:39:49,359 13500 [main] INFO SCCAgent - An error occurred while starting the engine ...
13 feb 2011 22:39:49,375 13516 [main] INFO SCCAgent - 
com.sterlingcommerce.scc.common.SCCException: CCTR023E Start Service failed. Service: Agent:Name=CCEngineService,Type=0
---> nested javax.management.MBeanException: com.sterlingcommerce.scc.common.SCCException: CSVC001E Initialization failed.Service: SCC515DB2
---> nested com.sterlingcommerce.scc.common.SCCException: CSVC001E Initialization failed. Service: SCC515DB2
---> nested com.sterlingcommerce.scc.common.SCCException: CCTR027E Error Starting Services.
---> nested com.sterlingcommerce.scc.common.SCCException: CCTR023E Start Service failed.Service: System:Name=JDBCService,Type=JDBC
---> nested javax.management.MBeanException: com.sterlingcommerce.scc.common.SCCException: CSVC001E Initialization failed. Service: JDBC Service
---> nested com.sterlingcommerce.scc.common.SCCException: CSVC001E Initialization failed. Service: JDBC Service
---> nested com.sterlingcommerce.scc.common.ServiceConfigurationException: CJDB023E Could not connect to database. Please check the log file detailed error.



RESOLVING THE PROBLEM


Ask DB2 administrator to start DB2 [ Note: On AIX the DB2 the administrator can issue command to start DB2 > db2start ]

Restart SCC

 

HISTORICAL NUMBER
 NFX10761 

PRODUCT ALIAS/SYNONYM
 

Severity


Normal