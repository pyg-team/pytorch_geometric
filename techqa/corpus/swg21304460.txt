Title: IBM Upgrade of Embedded WebSphere Application Server in WebSphere Partner Gateway 6.0 - United States

Text:
 TECHNOTE (FAQ)

QUESTION
 WebSphere Partner Gateway 6.0 FixPack 5 onwards the embedded WebSphere Application Server version is upgraded to 6.0.2.13. The JDK version will also be upgraded. This technote will help do the following :

a) Check if WebSphere Application Server has been upgraded or not.
b) Troubleshoot the upgrade failure.
c) Steps to manually upgrade WAS and JDK levels. 

ANSWER
 

Upgrading WebSphere Partner Gateway(WPG) 6.0.0.4 and lesser versions to 6.0.0.5/6.0.0.6/6.0.0.7 will result in upgrade of the embedded WebSphere Application Server(WAS) too. 

a) Check if WebSphere Application Server has been upgraded or not.
To check if WAS has been upgraded, run 

 * <installed_path>\was\bin\versionInfo.bat (on windows systems) 
 * <installed_path>/was/bin/versionInfo.sh (on unix system)

The version should be displayed as 6.0.2.13. 

To check the JAVA SDK level , run  * <installed_path>/was/java/bin/java -version (use back slash "\" in windows systems)

The version should be displayed as 
java version "1.4.2" 
Java(TM) 2 Runtime Environment, Standard Edition (build 1.4.2) 
Classic VM (build 1.4.2, J2RE 1.4.2 IBM build cxia32142-20060421 (SR5) (JIT enabled: jitc)) 

b) Troubleshoot the upgrade failure . 
In case a lesser version is displayed, the WAS/JDK upgrade has not happened correctly.The cause of the WAS upgrade failure will be present in the upgrade logs, <bcghub installed location>/was/logs/update. 
Check these logs to determine the cause of the upgrade failure. Primarily WAS upgrade does not happen if the Hardware pre-requisites [http://www.ibm.com/support/docview.wss?rs=180&uid=swg27007250] / Software pre-requisites [http://www.ibm.com/support/docview.wss?rs=180&uid=swg27007251] are not met. 

Also please note WAS upgrade failure will not cause WPG upgrade failure. 
c) Steps to manually upgrade WAS and JDK levels. 

In case WAS upgrade has failed, follow Step b given above to find the cause of the failure. After resolving the issue that caused the upgrade failure, one can now manually upgrade WAS and JAVA levels. Given below are the steps to perform upgrade to WAS 6.0.2.13 and JAVA SDK 1.4.2 SR5 


Please follow the following instructions:
1) Stop all servers,i.e.,bcgconsole, bcgreceiver and bcgdocmgr

Installation of Refresh pack 6.0.2
2) Copy the folder updateInstaller from Fixpack installer/embedWAS/Refreshpack
to the same Installroot location as your WAS directory which is being used by WPG hub. e.g. If WPG hub is installed in C:\Program Files\IBM\bcghub then copy "Fixpack installer/embedWAS/Refreshpack/updateinstaller" to C:\Program Files\IBM\bcghub\was.
3) Run the Update Installer(update.exe) present under this updateInstaller folder to launch the GUI
4) Click Next to continue on the Welcome panel. 
5) Make sure the directory name listed for the product installation is correct and click Next 
6) Select the 'Install maintenance package' radio button and click Next 
7) Make sure the path listed points to the proper Refresh Pack to be applied to the product(should be the .pak file present under C:\Program Files\IBM\bcghub\was\updateinstaller\maintenance) and click Next 
8) Click Next to begin copying the JRE to the updateinstaller directory. 
9) Click Relaunch to restart the Update Installer with the JRE copied to the updateinstaller directory. 
10) The path to the maintenance package is displayed. Note: The wizard will remember all values from the previous launch. Click Next to continue 
11) Click Next to begin applying the Refresh Pack 
12) Click Finish when the Refresh Pack application is complete 
13) Delete the updateinstaller directory (e.g. C:\Program Files\IBM\bcghub\was\updateinstaller). This will save 19M of disk space. 
14) Now go to C:\Program Files\IBM\bcghub\was\bin and check the version of the WAS installed. You can do this by giving the command versionInfo.bat.
The version should be 6.0.2

Installation of Refresh pack 6.0.2.13
15) Copy the folder updateInstaller from Fixpack_installer/embedWAS/Fixpack
to the same Installroot location as your WAS directory which is being used by WPG hub. e.g. If WPG hub is installed in C:\Program Files\IBM\bcghub then copy "Fixpack_installer/embedWAS/Fixpack/updateinstaller" to C:\Program Files\IBM\bcghub\was.
16) Run the Update Installer(update.exe) present under this updateInstaller folder to launch the GUI
17) Click Next to continue on the Welcome panel. 
18) Make sure the directory name listed for the product installation is correct(should be the .pak file present under C:\Program Files\IBM\bcghub\was\updateinstaller\maintenance) and click Next 
19) Select the 'Install maintenance package' radio button and click Next 
20) Make sure the path listed points to the proper Fix Pack to be applied to the product and click Next 
21) Click Next to begin copying the JRE to the updateinstaller directory. 
22) Click Relaunch to restart the Update Installer with the JRE copied to the updateinstaller directory. 
23) The path to the maintenance package is displayed. Note: The wizard will remember all values from the previous launch. Click Next to continue 
24) Click Next to begin applying the Fix Pack 
25) Click Finish when the Fix Pack application is complete 
26) Delete the updateinstaller directory (e.g. C:\Program Files\IBM\bcghub\was\updateinstaller). This will save 149M of disk space. 
27) Now go to C:\Program Files\IBM\bcghub\was\bin and check the version of the WAS installed. You can do this by giving the command versionInfo.bat
The version should be 6.0.2.13

Installation of JDK SR5
28) Copy the folder updateInstaller from Fixpack_installer/embedWAS/JDKFixpack
to the same Installroot location as your WAS directory which is being used by WPG hub. e.g. If WPG hub is installed in C:\Program Files\IBM\bcghub then copy "Fixpack_installer/embedWAS/JDKFixpack/updateinstaller" to C:\Program Files\IBM\bcghub\was.
29) Run the Update Installer(update.exe) present under this updateInstaller folder to launch the GUI
30) Click Next to continue on the Welcome panel. 
31) Make sure the directory name listed for the product installation is correct(should be the .pak file present under C:\Program Files\IBM\bcghub\was\updateinstaller\maintenance) and click Next 
32) Select the 'Install maintenance package' radio button and click Next 
33) Make sure the path listed points to the proper Fix Pack to be applied to the product and click Next 
34) Click Next to begin copying the JRE to the updateinstaller directory. 
35) Click Relaunch to restart the Update Installer with the JRE copied to the updateinstaller directory. 
36) The path to the maintenance package is displayed. Note: The wizard will remember all values from the previous launch. Click Next to continue 
37) Click Next to begin applying the JDK Fix Pack 
38) Click Finish when the Fix Pack application is complete 
39) Delete the updateinstaller directory (e.g. C:\Program Files\IBM\bcghub\was\updateinstaller). This will save 149M of disk space. 
40) Now go to C:\Program Files\IBM\bcghub\was\java\bin and check the version of the JDK installed. You can do this by giving the command java -version
The version should be
java version "1.4.2"
Java(TM) 2 Runtime Environment, Standard Edition (build 1.4.2)
Classic VM (build 1.4.2, J2RE 1.4.2 IBM build cxia32142-20060421 (SR5) (JIT enabled: jitc))

41) Start the servers.