Title: IBM IY79333: WMQ V5.3 Java client connect to WMQ V6 Queue Manager using SSL fails with 2009 and AMQ9631. - United States

Text:
 SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS UNREPRODUCIBLE IN NEXT RELEASE.
    
   
   

ERROR DESCRIPTION
 *  Connecting a Java MQ V5.3 client to a MQ V6.0 queue manager
   using  SSL fails with 2009 MQ exception and MQ log shows:
   
   AMQ9631:The Cipher Specs on the two ends of channel
   'SYSTEM.SSL.SVRCONN'do not match.
   
   
    
   
   

LOCAL FIX

PROBLEM SUMMARY
 *  ****************************************************************
   USERS AFFECTED:
   Any WMQ V5.3 Java client using SSL and Sun's JDK to connect to
   a WMQ v6.0 Queue Manager.
   
   Platforms affected:
    All Distributed (iSeries, all Unix and Windows)
   ****************************************************************
   PROBLEM SUMMARY:
   The problem arises when a WMQ V5.3 Java client is using a Sun
   JDK to connect to a WMQ V6.0 queue manager. Sun JDKs support TLS
   and negotiate to this first, rather than SSL; and WMQ V5.3 Java
   clients do not explicitly request the use of SSL.
   
   The WMQ V6.0 queue manager is expecting clients to connect using
    SSL cipher suites, and recognises the mismatch (which the V5.3
   queue manager does not). This results in the AMQ9631 message.
   
   
    
   
   

PROBLEM CONCLUSION
 *  Sun JDKs negotiate to TLS first, in preference to SSL, whereas
   the WMQ queue managers (5.3 and 6.0) are expecting clients to
   connect with SSL cipher suites. Using a Sun JDK for a V5.3
   client connecting to a V6.0 queue manager will result in the
   cipher specs mismatch.
   
   It is not possible to make changes to WebSphere MQ, due to the
   potential risk with existing set ups. However, any one of the
   following workarounds can be used:
   
   1. Ensure that the V5.3 Java client uses a supported IBM JDK.
   
   2. Upgrade the client from V5.3 to v6.0 client, so the use of
   SSL cipher suites are explicitly requested. A list of cipher
   suites supported by the v6.0 client can be found here:
   
     http://publib.boulder.ibm.com/infocenter/wmqv6/v6r0/ [http://publib.boulder.ibm.com/infocenter/wmqv6/v6r0/]
       index.jsp? topic=/com.ibm.mq.csqzaw.doc/uj34740_.htm
   
   3. As a last alternative, any of the following cipher suites can
   be used when running a V5.3 client with a Sun JDK talking to a
   V6.0 queue manager.
   Cipher Suite                      Cipher Spec
   SSL_RSA_WITH_DES_CBC_SHA      ->  TLS_RSA_WITH_DES_CBC_SHA
   SSL_RSA_WITH_3DES_EDE_CBC_SHA ->  TLS_RSA_WITH_3DES_EDE_CBC_SHA
   
   If the client side is using the cipher suite
   (SSL_RSA_WITH_DES_CBC_SHA), then the
   queue manager on the other side should use the Cipher Spec  ->
   (TLS_RSA_WITH_DES_CBC_SHA).
   
   If the client is using the cipher suite
   (SSL_RSA_WITH_3DES_EDE_CBC_SHA), then the
   queue manager on the other side should use the Cipher Spec ->
   (TLS_RSA_WITH_3DES_EDE_CBC_SHA).
   
   The two sides will then be able to match up, the handshake will
   succeed, and the connection will be established.
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   IY79333
   
   
 * REPORTED COMPONENT NAME
   WEBS MQ FOR HP-
   
   
 * REPORTED COMPONENT ID
   5724H7202
   
   
 * REPORTED RELEASE
   600
   
   
 * STATUS
   CLOSED UR1
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2005-11-30
   
   
 * CLOSED DATE
   2006-01-31
   
   
 * LAST MODIFIED DATE
   2009-06-11
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   WEBS MQ FOR HP-
   
   
 * FIXED COMPONENT ID
   5724H7202
   
   

APPLICABLE COMPONENT LEVELS
 * R600 PSN
   UP