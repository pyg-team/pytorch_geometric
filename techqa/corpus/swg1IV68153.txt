Title: IBM IV68153: WHEN EXTREMELY EXPENSIVE CUSTOM EVENT PROPERTIES ARE SET TO 'OPTIMIZE', THE PROCESSING QUEUE CAN FILL UP AND FAIL - United States

Text:
 SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  The event parsing queue can fill to 100% capacity when
   expensive Custom Event Properties are set to 'Optimize parsing
   for rules, reports, and searches'.  When this occurs, the event
   parsing threads might fail and result in no events parsing.
   
   Messages similar to the following in /var/log/qradar.log that
   may indicate this issue is occuring:
   
   [ecs-ec] [Event Parser[6]]
   com.q1labs.frameworks.core.ThreadExceptionHandler: [ERROR]
   [NOT:0000003000][127.0.0.1/- -] [-/- -]Exception was uncaught
   in thread: Event Parser[6]
   [ecs-ec] [Event Parser[6]] java.lang.StackOverflowError
   [ecs-ec] [Event Parser[6]] at
   java.util.regex.Pattern$GroupHead.match(Pattern.java:4569)
   [ecs-ec] [Event Parser[6]] at
   java.util.regex.Pattern$Loop.match(Pattern.java:4696)
   [ecs-ec] [Event Parser[6]] at
   java.util.regex.Pattern$GroupTail.match(Pattern.java:4628)
   [ecs-ec] [Event Parser[6]] at
   java.util.regex.Pattern$BranchConn.match(Pattern.java:4479)
   [ecs-ec] [Event Parser[6]] at
   java.util.regex.Pattern$CharProperty.match(Pattern.java:3705)
   [ecs-ec] [Event Parser[6]] at
   java.util.regex.Pattern$Branch.match(Pattern.java:4515)
   [ecs-ec] [Event Parser[6]] at
   java.util.regex.Pattern$GroupHead.match(Pattern.java:4569)
   [ecs-ec] [Event Parser[6]] at
   java.util.regex.Pattern$Loop.match(Pattern.java:4696)
   [ecs-ec] [Event Parser[6]] at
   java.util.regex.Pattern$GroupTail.match(Pattern.java:4628)
   [ecs-ec] [Event Parser[6]] at
   java.util.regex.Pattern$BranchConn.match(Pattern.java:4479)
   <hundreds of lines>
   [ecs-ec] [Event Parser[6]] at
   java.util.regex.Pattern$Prolog.match(Pattern.java:4652)
   [ecs-ec] [Event Parser[6]] at
   java.util.regex.Pattern$Start.match(Pattern.java:3419)
   [ecs-ec] [Event Parser[6]] at
   java.util.regex.Matcher.search(Matcher.java:1210)
   [ecs-ec] [Event Parser[6]] at
   java.util.regex.Matcher.find(Matcher.java:603)
   [ecs-ec] [Event Parser[6]] at
   com.q1labs.core.shared.regex.RegexMonitor.find(RegexMonitor.java
   :451)
   [ecs-ec] [Event Parser[6]] at
   com.q1labs.core.shared.ariel.CustomArielPropertyDefinition.parse
   (CustomArielPropertyDefinition.java:156)
   [ecs-ec] [Event Parser[6]] at
   com.q1labs.core.shared.ariel.CustomProperty.parse(CustomProperty
   .java:192)
   [ecs-ec] [Event Parser[6]] at
   com.q1labs.core.shared.ariel.CustomPropertyServices.parsePropert
   ies(CustomPropertyServices.java:164)
   
   
    
   
   

LOCAL FIX
 *  Custom properties flagged with 'Optimize' modified near the
   time when the exceptions started, should be disabled and a Full
   Deploy performed (this will result in a brief outage in event
   collection).
   
   
    
   
   

PROBLEM SUMMARY
 *  This issue has been resolved in 7.2.4 Patch 4.
   
   
    
   
   

PROBLEM CONCLUSION
 *  This issue has been resolved in 7.2.4 Patch 4.
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   IV68153
   
   
 * REPORTED COMPONENT NAME
   QRADAR SOFTWARE
   
   
 * REPORTED COMPONENT ID
   5725QRDSW
   
   
 * REPORTED RELEASE
   723
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2014-12-23
   
   
 * CLOSED DATE
   2015-02-09
   
   
 * LAST MODIFIED DATE
   2015-02-09
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   QRADAR SOFTWARE
   
   
 * FIXED COMPONENT ID
   5725QRDSW
   
   

APPLICABLE COMPONENT LEVELS
 * R724 PSY
   UP