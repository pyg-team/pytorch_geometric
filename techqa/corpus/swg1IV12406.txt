Title: IBM IV12406: RAS LOG CRATED IN THE ROOT DIRECTORY AND NOT IN THE KBB_RAS1_LOG PATH - United States

Text:
  A FIX IS AVAILABLE
ITCAM for Microsoft (R) App : SQL Server 6.2.3-TIV-ITM_SQL-IF0004 [http://www-01.ibm.com/support/docview.wss?uid=swg24031902]


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  Environment
   
   
   ITCAM for MS Applications: SQL Server Agent
   
   Release: 6.23
   
   Problem:
   
   For MS SQL Agent Version: 6.2.3, the RAS log is created
   in the root (c:\) directory and not in the ITM_HOME\TMAITM6\logs
   directory. Also, the log name is incorrect:
   
   For example, expected log name:
   <hostname>__oq_<instance>_koqagent_<hex>-01.log
   
   Generated (incorrect) log name: _oq__koqagent_<hex>-01.log
   
   
   Steps to recreate:
   
   Install, configure and start 6.23 MS SQL Agent instance.
   This problem does not occur with 6.22 level MS SQL agent.
   
   
    
   
   

LOCAL FIX
 *  Work Around:
   
   1) To correct the directory where agent log gets
   created, follow the steps below:
   
   Edit TMAITM6\KOQENV for 32 bit agent and
   
   TMAITM6_x64\KOQENV for 64 bit agent.
   
   Assuming that the ITM_HOME is C:\IBM\ITM:
   
   Add following setting prior to KBB_RAS1 setting:
   For 32 bit agents:
   
   CTIRA_LOG_PATH= C:\IBM\ITM\TMAITM6\logs
   
   For 64 bit agents:
   
   CTIRA_LOG_PATH= C:\IBM\ITM\TMAITM6_x64\logs
   
   
   2) To correct the log name, add following setting for the
   hostname:
   
   COLL_HOSTNAME= <hostname>
   
   Additionally you are running single instance of the agent, you
   may include following setting to incorporate instance name in
   the agent's log name:
   
   COLL_SERVERID= <INSTANCE_NAME>
   
   If you are running multiple instances, then you should not
   specify COLL_SERVERID to KOQENV. Log names for various instances
   will not be distinguishable. View the log to locate instance
   name as KBB_RAS1_LOG gets resolved to correct name later in the
   log.
   
   If you have added following settings before KBB_RAS1:
   
   CTIRA_LOG_PATH= C:\IBM\ITM\TMAITM6_x64\logs
   COLL_SERVERID= INST1
   COLL_HOSTNAME= MYHOST
   
   KBB_RAS1=ERROR
   ...
   
   The log file will be created in following directory:
   C:\IBM\ITM\TMAITM6_x64\logs
   
   With name:
   
   MYHOST_oq_INST1_koqagent_<hex>-01.log
   
   
    
   
   

PROBLEM SUMMARY
 *  RAS LOG CRATED IN THE ROOT DIRECTORY AND NOT IN THE KBB_RAS1_LOG
   PATH.
   
   
    
   
   

PROBLEM CONCLUSION
 *  Now RAS logs gets created in the correct path.
   The fix for this APAR is contained in the following maintenance
   packages:
      | interim fix | 6.2.3-TIV-ITM_SQL-IF0004
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   IV12406
   
   
 * REPORTED COMPONENT NAME
   TIV MON MS SQL
   
   
 * REPORTED COMPONENT ID
   5724B96MO
   
   
 * REPORTED RELEASE
   622
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2011-12-20
   
   
 * CLOSED DATE
   2012-01-31
   
   
 * LAST MODIFIED DATE
   2012-01-31
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   TIV MON MS SQL
   
   
 * FIXED COMPONENT ID
   5724B96MO
   
   

APPLICABLE COMPONENT LEVELS
 * R623 PSY
   UP