Title: IBM IC44054: TSM CLIENT ON SOLARIS WILL LOOK AT DSM.OPT FILE IN /USR/BIN EVEN IF IT IS NOT BEING USED. - United States

Text:
AIX SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  The default TSM for Solaris installation is in the following
   path:
     /opt/tivoli/tsm/client/ba/bin
   The install will create symbolic links in /usr/bin to the
   binaries.  The real dsm.opt and dsm.sys are created in
   /usr/bin and the installation path
   (/opt/tivoli/tsm/client/ba/bin) will have symbolic links
   to these files.
   .
   If the dsm.opt file is not being use and the symbolic link
   is removed then TSM should only look for the dsm.sys
   in the installed directory and use the default stanza.
   .
   The environment variables DSM_DIR and DSM_CONFIG are not set
   nor any other DSM variables.
   .
   With this setup TSM will still look at the dsm.opt file
   from /usr/bin which is not the expected behavior as
   documented in the manual.
   .
   To recreate problem (5.2.3.0)
   0)   unset the DSM_DIR and DSM_CONFIG environment variables
   1)   remove the dsm.opt and dsm.sys symbolic links in
        /opt/tivoli/tsm/client/ba/bin/
   2)   move dsm.sys from /usr/bin to
        /opt/tivoli/tsm/client/ba/bin/
   3)   edit the dsm.opt file in /usr/bin and put
        in an invalid option.
   4)   start dsmc which will error with:
   .
   ANS1036S Invalid option '#SERVERNAME' found in options
            file '/usr/bin/dsm.opt'
            at line number : 1
            Invalid entry : '#servername roswell'
   .
   Initial Impact:
   Low.
   
   
    
   
   

LOCAL FIX
 *  The following can be done to work around the issue:
   a. Remove the dsm.opt file from /usr/bin
   b. Set the environment variables DSM_DIR and DSM_CONFIG
   c. Move the dsm.opt file from /usr/bin to
      /opt/tivoli/tsm/client/ba/bin/
   d. Use both files -- dsm.opt and dsm.sys.   Also make sure
      that the files are in the correct location (symbolic
      links can be use as in the default installation).
   
   
    
   
   

PROBLEM SUMMARY
 *  ****************************************************************
   * USERS AFFECTED: TSM client on Solaris platform.              *
   ****************************************************************
   * PROBLEM DESCRIPTION: See ERROR DESCRIPTION.                  *
   ****************************************************************
   * RECOMMENDATION: Apply fixing level when available. This      *
   *                 problem is currently projected to be fixed   *
   *                 in levels 5.2.4 and 5.3.1. Note that this is *
   *                 subject to change at the discretion of IBM.  *
   ****************************************************************
   On all UNIX and Linux platforms, if DSM_CONFIG is not set or
   the -OPTFILE option is not used, and if DSM_DIR is not set, the
   dsm.opt and dsm.sys are expected to reside in the default
   installation directory. However, the Solaris client was looking
   for the configuration files in the /usr/bin directory.
   
   
    
   
   

PROBLEM CONCLUSION
 *  The Solaris client has been fixed so that by default, it will
   look for the configuration files in the default installation
   directory. Note that on Solaris, the dsm.opt and dsm.sys files
   in the default installation directory are actually symbolic
   links that point to the actual files in the /usr/bin directory.
   This allows the TSM client configuration files to remain intact
   after upgrading the TSM client or uninstalling and installing a
   new TSM client version.
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   IC44054
   
   
 * REPORTED COMPONENT NAME
   TSM CLIENT 5.1
   
   
 * REPORTED COMPONENT ID
   5698ISMCL
   
   
 * REPORTED RELEASE
   52S
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2004-12-23
   
   
 * CLOSED DATE
   2005-02-15
   
   
 * LAST MODIFIED DATE
   2005-02-15
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION

APPLICABLE COMPONENT LEVELS
 * R52S PSY
   UP
   
   
 * R53S PSY
   UP