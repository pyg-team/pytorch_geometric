Title: IBM Configure Content Classification to set expiration dates when archiving email with IBM Content Collector - United States

Text:
 TECHNOTE (FAQ)

QUESTION
 How to integrate Content Classification to set expiration dates when IBM Content Collector (ICC) archives email into IBM FileNet P8? 

CAUSE
A task route template for Content Classification is not available in ICC.

ANSWER
The scenario below shows how you can configure Content Classification to set the expiration date when Content Collector archives email into IBM FileNet P8. 

An insurance company wants to set up a system to automatically classify and archive all new email. For each email, the company wants to determine the claim type and set an appropriate expiration date. They use Content Classification to analyze the content of each email and identify the type of claim, which is specified in an IBM FileNet P8 property called ClaimType. They also use a Content Classification decision plan rule to set an appropriate expiration date according to their retention policies. For example, for an email about damage caused by a fire in a residential building, the ClaimType property would be set to FireResidential and the expiration date would be set to 7 years. 

When Content Collector ingests an email as part of the task route, it passes the document to Content Classification. Content Classification analyzes the document by using the specified decision plan and referenced knowledge base to determine the appropriate expiration date for the document. In this case, Content Classification returns the values of the relevant decision plan output fields (FileNetP8_Metadata:ClaimType and ICC:ExpirationDate) to Content Collector and these values in turn populate the mapped Content Collector user-defined metadata fields. When documents continue to be processed by the Content Collector task route, the P8 Archive Email task sets all P8 metadata properties based on the populated user-defined metadata fields. 

The following scenario assumes that you already completed the following tasks: 

 * Installed Content Collector and Content Classification on separate servers. 
 * Configured the Content Collector server to work with Content Classification. 
 * Defined an IBM FileNet P8 property with the name ClaimType. This property must be defined for the document class that will be assigned to the emails.


Procedure To configure Content Classification to set the claim type property and expiration date when archiving email with Content Collector: 

1. In Classification Workbench, build a Content Classification decision plan. 

2. In the decision plan, create new Field Definitions that you want to be extracted from the email. 

 *  By default, these fields are available for extraction: 
   ICM_SentDate, ICM_From, ICM_Subject, Body, ICM_To, ICM_From_Address, ICM_To_Address. 

3. Create rules that set expiration date and claim type property based on the content of the document.  *  To populate the FileNetP8_Metadata:ClaimType field, use the action Set a metadata field for the document in IBM FileNet Content Manager. To set the ICC:ExpirationDate field, use the actionSet a content field to a date for IBM Content Collectoras it converts the dates to the Content Collector internal date format. 

4. If you want to calculate the expiration date based on the email sent date, you must use:  *  For Copy from this content field, select ICM_SentDate. For Date format, enter "yyyy-MM-dd HH:mm:ss". If the date format does not match the format extracted from the email, Classification will throw an error. 

5. Publish the decision plan (and knowledge base if you have one) to the Content Classification server. 6. For each decision plan output field, create a user-defined metadata property in Content Collector. 

 *  In the ICC Configuration Manager, clickMetadata and Lists>User-Defined Metadata. In the Display name, enter "classification_metadata". You can use any name you like. In the Metadata Properties, add two metadata properties named:  * ICC:ExpirationDate 
    * FileNetP8_Metadata:ClaimType
   
   
   You can choose any names but it is convenient to use the same names as in Content Classification. 

7. In the ICC Configuration Manager, create a task route by using an existing P8 email archiving template. 8. In the "1. Unique Email" branch and after the EC Prepare Email for Archiving task, insert an IBM Content Classification task. 

9. Configure the IBM Content Classification task. 

 *  In theServerarea, specify the host name of the Content Classification server on which the decision plan is running and the port number of the Content Classification listener component. In theInstance typearea, selectDecision Planand click the explore button to retrieve the list of available decision plans. Select the decision plan that you created in previous steps. For theContent fieldlist, selectDocument. Go to theMap Decision Plan Resultstab.
   
   In theMetadata sourcelist, select "classification_metadata" or the user-defined metadata you created in step [http://www.ibm.com/support/knowledgecenter/SSBRAM_8.8.0/com.ibm.classify.admin.doc/t_AG_icc_scenario.htm?lang=en-us#t_AG_icc_scenario__metadata]6. The mapping table is populated with the metadata properties.
   
   Click a metadata property in the table and then select a decision plan output field in theDecision Plan propertylist.
   For example, click theFileNetP8_Metadata:ClaimTypemetadata property in the table and then select the FileNetP8_Metadata:ClaimType field in theDecision Plan propertylist. Repeat this step for theICC:ExpirationDateproperty. 

10. Configure the P8 Archive Email task.  *  Under Property Mappings, set the ClaimType property to <classification_metadata, FileNetP8_Metadata:ClaimType>. Similarly, set the ICCExpirationDate property to <classification_metadata, ICC:ExpirationDate>. 

Your tasks are complete. Test by archiving some emails using ICC, and verify ICCExpirationDate and ClaimType properties in P8 are set correctly. RELATED INFORMATION
 ICC 4.0.1 Documentation on Classification [http://www.ibm.com/support/knowledgecenter/SSAE9L_4.0.1/com.ibm.content.collector.doc_kc/icm/t_afu_setting_up_icm.dita]
Classification Documentation on ICC integration [http://www.ibm.com/support/knowledgecenter/SSBRAM_8.8.0/com.ibm.classify.admin.doc/t_AG_icc_int.htm]
ICC 4.0.1 Documentation - Document classification [http://www.ibm.com/support/knowledgecenter/SSAE9L_4.0.1/com.ibm.content.collector.doc_kc/icm/t_afu_integrate_icm.dita]
Similar Example for Content Manager 8 [http://www.ibm.com/support/knowledgecenter/SSBRAM_8.8.0/com.ibm.classify.admin.doc/t_AG_icc_scenario.htm]