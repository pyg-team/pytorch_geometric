Title: IBM IZ95632: PROBE RESEND ALL CACHED ROLLING SAF EVENTS AFTER RESTARTING - United States

Text:
  DIRECT LINKS TO FIXES
7.3.0-TIV-NCOMNIbus-Windows-FP0017 [http://www.ibm.com/support/fixcentral/quickorder?product=ibm%2FTivoli%2FTivoli+Netcool+OMNIbus&fixids=7.3.0-TIV-NCOMNIbus-Windows-FP0017&source=SAR]
7.3.0-TIV-NCOMNIbus-Solaris-FP0017 [http://www.ibm.com/support/fixcentral/quickorder?product=ibm%2FTivoli%2FTivoli+Netcool+OMNIbus&fixids=7.3.0-TIV-NCOMNIbus-Solaris-FP0017&source=SAR]
7.3.0-TIV-NCOMNIbus-Linux-FP0017 [http://www.ibm.com/support/fixcentral/quickorder?product=ibm%2FTivoli%2FTivoli+Netcool+OMNIbus&fixids=7.3.0-TIV-NCOMNIbus-Linux-FP0017&source=SAR]
7.3.0-TIV-NCOMNIbus-ZLinux-FP0017 [http://www.ibm.com/support/fixcentral/quickorder?product=ibm%2FTivoli%2FTivoli+Netcool+OMNIbus&fixids=7.3.0-TIV-NCOMNIbus-ZLinux-FP0017&source=SAR]
7.3.0-TIV-NCOMNIbus-HPUXIA-FP0017 [http://www.ibm.com/support/fixcentral/quickorder?product=ibm%2FTivoli%2FTivoli+Netcool+OMNIbus&fixids=7.3.0-TIV-NCOMNIbus-HPUXIA-FP0017&source=SAR]
7.3.0-TIV-NCOMNIbus-AIX-FP0017 [http://www.ibm.com/support/fixcentral/quickorder?product=ibm%2FTivoli%2FTivoli+Netcool+OMNIbus&fixids=7.3.0-TIV-NCOMNIbus-AIX-FP0017&source=SAR]
7.3.0-TIV-NCOMNIbus-Windows-FP0016 [http://www.ibm.com/support/fixcentral/quickorder?product=ibm%2FTivoli%2FTivoli+Netcool+OMNIbus&fixids=7.3.0-TIV-NCOMNIbus-Windows-FP0016&source=SAR]
7.3.0-TIV-NCOMNIbus-Solaris-FP0016 [http://www.ibm.com/support/fixcentral/quickorder?product=ibm%2FTivoli%2FTivoli+Netcool+OMNIbus&fixids=7.3.0-TIV-NCOMNIbus-Solaris-FP0016&source=SAR]
7.3.0-TIV-NCOMNIbus-Linux-FP0016 [http://www.ibm.com/support/fixcentral/quickorder?product=ibm%2FTivoli%2FTivoli+Netcool+OMNIbus&fixids=7.3.0-TIV-NCOMNIbus-Linux-FP0016&source=SAR]
7.3.0-TIV-NCOMNIbus-ZLinux-FP0016 [http://www.ibm.com/support/fixcentral/quickorder?product=ibm%2FTivoli%2FTivoli+Netcool+OMNIbus&fixids=7.3.0-TIV-NCOMNIbus-ZLinux-FP0016&source=SAR]
7.3.0-TIV-NCOMNIbus-HPUXIA-FP0016 [http://www.ibm.com/support/fixcentral/quickorder?product=ibm%2FTivoli%2FTivoli+Netcool+OMNIbus&fixids=7.3.0-TIV-NCOMNIbus-HPUXIA-FP0016&source=SAR]
7.3.0-TIV-NCOMNIbus-HPUX-FP0016 [http://www.ibm.com/support/fixcentral/quickorder?product=ibm%2FTivoli%2FTivoli+Netcool+OMNIbus&fixids=7.3.0-TIV-NCOMNIbus-HPUX-FP0016&source=SAR]
7.3.0-TIV-NCOMNIbus-AIX-FP0016 [http://www.ibm.com/support/fixcentral/quickorder?product=ibm%2FTivoli%2FTivoli+Netcool+OMNIbus&fixids=7.3.0-TIV-NCOMNIbus-AIX-FP0016&source=SAR]
7.3.0-TIV-NCOMNIbus-Windows-FP0015 [http://www.ibm.com/support/fixcentral/quickorder?product=ibm%2FTivoli%2FTivoli+Netcool+OMNIbus&fixids=7.3.0-TIV-NCOMNIbus-Windows-FP0015&source=SAR]
7.3.0-TIV-NCOMNIbus-Solaris-FP0015 [http://www.ibm.com/support/fixcentral/quickorder?product=ibm%2FTivoli%2FTivoli+Netcool+OMNIbus&fixids=7.3.0-TIV-NCOMNIbus-Solaris-FP0015&source=SAR]
7.3.0-TIV-NCOMNIbus-Linux-FP0015 [http://www.ibm.com/support/fixcentral/quickorder?product=ibm%2FTivoli%2FTivoli+Netcool+OMNIbus&fixids=7.3.0-TIV-NCOMNIbus-Linux-FP0015&source=SAR]
7.3.0-TIV-NCOMNIbus-ZLinux-FP0015 [http://www.ibm.com/support/fixcentral/quickorder?product=ibm%2FTivoli%2FTivoli+Netcool+OMNIbus&fixids=7.3.0-TIV-NCOMNIbus-ZLinux-FP0015&source=SAR]
7.3.0-TIV-NCOMNIbus-HPUXIA-FP0015 [http://www.ibm.com/support/fixcentral/quickorder?product=ibm%2FTivoli%2FTivoli+Netcool+OMNIbus&fixids=7.3.0-TIV-NCOMNIbus-HPUXIA-FP0015&source=SAR]
7.3.0-TIV-NCOMNIbus-HPUX-FP0015 [http://www.ibm.com/support/fixcentral/quickorder?product=ibm%2FTivoli%2FTivoli+Netcool+OMNIbus&fixids=7.3.0-TIV-NCOMNIbus-HPUX-FP0015&source=SAR]
7.3.0-TIV-NCOMNIbus-AIX-FP0015 [http://www.ibm.com/support/fixcentral/quickorder?product=ibm%2FTivoli%2FTivoli+Netcool+OMNIbus&fixids=7.3.0-TIV-NCOMNIbus-AIX-FP0015&source=SAR]
Tivoli Netcool/OMNIbus 7.3.0 Fix Pack 13, 7.3.0-TIV-NCOMNIbus-FP0013 [http://www-01.ibm.com/support/docview.wss?uid=swg24036691]
Tivoli Netcool/OMNIbus 7.3.0 Fix Pack 14, 7.3.0-TIV-NCOMNIbus-FP0014 [http://www-01.ibm.com/support/docview.wss?uid=swg24036692]
Tivoli Netcool/OMNIbus 7.3.0 Fix Pack 15, 7.3.0-TIV-NCOMNIbus-FP0015 [http://www-01.ibm.com/support/docview.wss?uid=swg24039199]
Tivoli Netcool/OMNIbus 7.3.0 Fix Pack 16, 7.3.0-TIV-NCOMNIbus-FP0016 [http://www-01.ibm.com/support/docview.wss?uid=swg24039351]
Tivoli Netcool/OMNIbus 7.3.0 Fix Pack 17, 7.3.0-TIV-NCOMNIbus-FP0017 [http://www-01.ibm.com/support/docview.wss?uid=swg24039352]


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  OS: Windows
   OMNIbus: 7.3.0
   
   Problem occurs for a probe using the Rolling Store and Forward
   mode  "StoreAndForward: 2" and a single ObjectServer.
   
   Whenever a probe goes down, SAF files with events for at least
   the last rollling SAF window remain in OMNIHOME/var directory.
   When the probe restarts, these events are resent to the
   ObjectServer. The events would be dropped by the DeDup trigger
   unless they were manually or automatically deleted since the
   probe went down.
   If the probe runs for a shorter time than the "RollSAFInterval"
   and then stops again, these events will remain in the SAF cache
   files. This means that if the probe restarts again, the events
   will be resent yet again.
   
   A probe should not resend events to the same ObjectServer that
   it lost its connection from. It should only resend SAF events
   that it received after the ObjectServer disconnected. The
   Rolling SAF events should only be resent when the probe fails
   over from one ObjectServer to another.
   
   How to reproduce the problem using the 'glf' probe:
   <insert your previous description> here.
   
   How to reproduce the problem using the Heartbeat probe:
   
    (0) Modify heartbeat.rules file:
     @Identifier = @Manager + @AlertGroup + $Event +
   @FirstOccurrence
   
    (1) rm $OMNIHOME/var/heart.store.*
   
    (2) Start OS and delete all events
   
    (3) Run heartbeat probe with the following properties:
     StoreAndForward: 2
     RollSAFInterval:90
     SleepTime : 1
     NumEvents: 10
    (4) Wait for probe to complete
   
    (5) nco_sql
     > delete from status
   
    (6) Start probe again as above
    (7) Wait for probe to complete
   
    (8) nco_sql
    > select count(*) from status where Identifier like 'Heart';
   
    RESULT expected: 10
   
    But RESULT found: 20
   
   
    
   
   

LOCAL FIX
 *  Set StoreAndForward: 1
   
   
    
   
   

PROBLEM SUMMARY
 *  ****************************************************************
   * USERS AFFECTED:                                              *
   * Users running OMNIbus probes with the property               *
   * 'StoreAndForward' set to '2'. This is the so-called          *
   * "circular store and forward".                                *
   ****************************************************************
   * PROBLEM DESCRIPTION:                                         *
   * Whenever a probe running in 'circular store and forward'     *
   * mode terminates, SAF files with events for at least the last *
   * rollling SAF window remain in OMNIHOME/var directory. When   *
   * the probe restarts, these events are resent to the           *
   * ObjectServer.                                                *
   ****************************************************************
   * RECOMMENDATION:                                              *
   * Apply the maintenance packages listed in the Problem         *
   * Conclusion.                                                  *
   ****************************************************************
   
   
    
   
   

PROBLEM CONCLUSION
 *  The fix for this APAR is contained in the following maintenance
   packages:
       | fix pack | 7.3.0-TIV-NCOMNIbus-FP0006
       | fix pack | 7.3.1-TIV-NCOMNIbus-FP0002
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   IZ95632
   
   
 * REPORTED COMPONENT NAME
   NETCOOL/OMNIBUS
   
   
 * REPORTED COMPONENT ID
   5724O4800
   
   
 * REPORTED RELEASE
   730
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt / Xsystem
   
   
 * SUBMITTED DATE
   2011-02-24
   
   
 * CLOSED DATE
   2011-06-20
   
   
 * LAST MODIFIED DATE
   2011-06-20
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   NETCOOL/OMNIBUS
   
   
 * FIXED COMPONENT ID
   5724O4800
   
   

APPLICABLE COMPONENT LEVELS
 * R730 PSN
   UP
   
   
 * R731 PSN
   UP