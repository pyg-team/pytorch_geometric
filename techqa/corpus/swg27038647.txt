Title: IBM Incorrect procedures for securing communication with IBM Content Search Services - United States

Text:
 RELEASE NOTES

ABSTRACT
 The FileNet P8 Information Center procedures for configuring SSL to secure Content Platform Engine communication with IBM Content Search Services are incorrect. 

CONTENT
The procedures in the FileNet P8 Information Center topic Deploying CA certificates on Content Platform Engine server [http://pic.dhe.ibm.com/infocenter/p8docs/v5r2m0/topic/com.ibm.p8.install.doc/p8pin318.htm] tell you how to deploy a self-signed certificate or a third-party certificate, issued by a certification authority (CA), for IBM Content Search Services on the application server where Content Platform Engine is deployed.


However, when Content Platform Engine is deployed on WebSphere Application Server, these procedures cause a conflict with the default trust store of the application server and prevent the SSL configuration of other components from working correctly with IBM Content Search Services. 

To avoid this conflict, do not complete the procedures in Deploying CA certificates on Content Platform Engine server [http://pic.dhe.ibm.com/infocenter/p8docs/v5r2m0/topic/com.ibm.p8.install.doc/p8pin318.htm]. Instead, complete one of the following two procedures, which deploy a self-signed certificate or a third-party certificate to the WebSphere default trust store and configure Content Platform Engine to use this trust store. 

Before starting either procedure, make sure that WebSphere Deployment Manager and the WebSphere node agents are running, and that the instances of Content Platform Engine are stopped. 

To deploy a self-signed CA certificate: 

 1.  On the IBM Content Search Services server, open a command prompt and navigate to the YourCSSfolder\bin folder. YourCSSfolder is the folder where you installed the IBM Content Search Services server.
     
     
 2.  Export the certificate to a file by entering the following command:
     
     keytool -export -alias cssSelfsigned -keypass YourKeyPassword -keystore selfsignedServerStore 
     -storepass YourStorePassword -file selfsignedCert.cer
     
     
 3.  Copy the selfsignedCert.cer file to a folder on the Content Platform Engine server, for example, C:\IBM\cssKeystore.
     
     
 4.  On the Content Platform Engine server, log on to the WebSphere Integrated Solutions Console.
     
     
 5.  Navigate to Security > SSL certificates and key management.
     
     
 6.  Navigate to the signer certificates page, depending on the type of your WebSphere installation:
     
      * WebSphere base edition or stand-alone environment: Key stores and certificates > NodeDefaultTrustStore > Signer certificates
      * WebSphere ND: Key stores and certificates > CellDefaultTrustStore > Signer certificates
     
     
     
 7.  Click Add.
     
     
 8.  Type a certificate alias (for example, cssSelfSigned) in the Alias field. The alias is how the certificate is referenced in the keystore.
     
     
 9.  In the File Name field, type the file name and path to where the certificate is located (for example, C:\IBM\cssKeystore\selfsignedCert.cer).
     
     
 10. In the Data Type field, select Base64-encoded ASCII data.
     
     
 11. Click Apply and then click Save to save your changes to the master configuration of WebSphere.
     
     
 12. Navigate to Servers > Server Types > Websphere application servers.
     
     
 13. For each server instance (for example, server1, server2,...) complete the following substeps to set Java system parameters on the Content Platform Engine application server and to change the keystore type to pkcs12:
     
      1.  Navigate to servern > Java and Process Management > Process Definition > Java Virtual Machine and add these two parameters in the Generic JVM arguments field:  *  -Djavax.net.ssl.trustStore=path_to_WebSphere_default_trustStore For example: 
            
            >  -Djavax.net.ssl.trustStore=C:\Progra~1\IBM\WebSphere\AppServer\profiles\
            AppSrv01\config\cells\MyServerCell01\trust.p12 
            MyServerCell01 should reflect the value in your environment.
            
            
          *  -Djavax.net.ssl.trustStorePassword=WebSphere_trustStore_password For example: 
            
            >  -Djavax.net.ssl.trustStorePassword=WebAS 
            Note that WebAS is the default password for the default trust store in WebSphere.
            
            
         
         
      2. In the WAS_HOME/java/jre/lib/security/java.security file, set the keystore type to pkcs12:  
         
         >  keystore.type=pkcs12 
          If your application server is clustered, repeat this java.security file edit on each Content Platform Engine node in the cluster. 
         
         
         
         
     
     
 14. If your application server is clustered, synchronize your changes to all the nodes in the cluster:
     
      1.  Navigate to System Administration > Nodes. 
      2. 
      3.  Select all the nodes in the cluster, and then click Full Resynchronize. 
         
         
     
     
 15. In a command window, stop WebSphere Deployment Manager. When the stop command completes, restart WebSphere Deployment Manager:
     
     >  stopManager.bat -username username -password password
     startManager.bat 
     
     
     
 16. Restart the node agents:
     
      1.  Log on to the WebSphere Integrated Solutions Console. 
         
         
      2.  Navigate to System Administration > Node agents. 
         
         
      3.  Select all the node agents, and then click Restart. 
         
         
     
     
 17. Restart the Content Platform Engine instances on the application server.
     



To deploy a third-party CA certificate: 

 1.  Download a CA certificate from the certification authority website and save it as cssThirdPartyCA.cer in any folder on your Content Platform Engine server, for example, C:\IBM\cssKeystore.
     
     
 2.  On the Content Platform Engine server, log on to the WebSphere Integrated Solutions Console.
     
     
 3.  Navigate to Security > SSL certificates and key management.
     
     
 4.  Navigate to the signer certificates page, depending on the type of your WebSphere installation:
     
      * WebSphere base edition or stand-alone environment: Key stores and certificates > NodeDefaultTrustStore > Signer certificates
      * WebSphere ND: Key stores and certificates > CellDefaultTrustStore > Signer certificates
     
     
     
 5.  Click Add.
     
     
 6.  Type a certificate alias (for example, cssThirdParty) in the Alias field. The alias is how the certificate is referenced in the keystore.
     
     
 7.  In the File Name field, type the file name and path to where the certificate is located (for example, C:\IBM\cssKeystore\cssThirdPartyCA.cer).
     
     
 8.  For the Data Type field, select Base64-encoded ASCII data.
     
     
 9.  Click Apply and then click Save to save your changes to the master configuration of WebSphere.
     
     
 10. Navigate to Servers > Server Types > Websphere application servers.
     
     
 11. For each server instance (for example, server1, server2,...) complete the following substeps to set Java system parameters on the Content Platform Engine application server and to change the keystore type to pkcs12:
     
      1.  Navigate to servern > Java and Process Management > Process Definition > Java Virtual Machine and add these two parameters in the Generic JVM arguments field:  *  -Djavax.net.ssl.trustStore=path_to_WebSphere_default_trustStore For example: 
            
            >  -Djavax.net.ssl.trustStore=C:\Progra~1\IBM\WebSphere\AppServer\profiles\
            AppSrv01\config\cells\MyServerCell01\trust.p12 
            MyServerCell01 should reflect the value in your environment.
            
            
          *  -Djavax.net.ssl.trustStorePassword=WebSphere_trustStore_password For example: 
            
            >  -Djavax.net.ssl.trustStorePassword=WebAS 
            Note that WebAS is the default password for the default trust store in WebSphere.
            
            
         
         
      2. In the WAS_HOME/java/jre/lib/security/java.security file, set the keystore type to pkcs12:  
         
         >  keystore.type=pkcs12 
          If your application server is clustered, repeat this java.security file edit on each Content Platform Engine node in the cluster. 
         
         
         
         
     
     
 12. If your application server is clustered, synchronize your changes to all the nodes in the cluster:
     
      1.  Navigate to System Administration > Nodes. 
      2. 
      3.  Select all the nodes in the cluster, and then click Full Resynchronize. 
         
         
     
     
 13. In a command window, stop WebSphere Deployment Manager, wait for the stop command to complete, and then restart WebSphere Deployment Manager:
     
     >  stopManager.bat -username username -password password
     startManager.bat 
     
     
     
 14. Restart the node agents:
     
      1.  Log on to the WebSphere Integrated Solutions Console. 
         
         
      2.  Navigate to System Administration > Node agents. 
         
         
      3.  Select all the node agents, and then click Restart. 
         
         
     
     
 15. Restart the Content Platform Engine instances on the application server.