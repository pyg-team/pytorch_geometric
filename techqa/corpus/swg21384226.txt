Title: IBM Library icons disabled or greyed out - United States

Text:
Library; icons; disabled; greyed out; grayed out; disappear; not working; lock; locked; library locked TECHNOTE (FAQ)

QUESTION
In one case, a customer attempted to delete a library using the WCM Library Administration Portlet but was unsuccessful. The library was then deleted with the API process mentioned in the WebSphere Portal 6.1 Information Center [http://publib.boulder.ibm.com/infocenter/wpdoc/v6r1m0/index.jsp?topic=/com.ibm.wp.ent.doc/welcome_main.html]. After re-syndicating the library in question to the subscriber machine, the library remained locked and the icons to administer the library were greyed out. 

Using an unlock.jsp file worked to unlock the library until Portal was restarted but at this point, the library was locked again.



CAUSE
The Library is currently locked by a previous failed library delete operation. The previous delete operation created an EJBTimer that starts up during the Portal restart that in turn restarts the library deletion process. 



ANSWER
Use the following procedure to find and delete the EJBTimer: 


1. Run the following command: findEJBTimers.bat WebSphere_Portal -all

2. Remove the timer related to the library delete with the following command: 

 * cancelEJBTimers.bat WebSphere_Portal -timer <timerid>
 * 

3. Unlock the library again. Refer to the 6.1 Information Center for instructions on how to do this:  * http://publib.boulder.ibm.com/infocenter/wpdoc/v6r1m0/index.jsp?topic=/com.ibm.wp.ent.doc/wcm/wcm_admin_library_unlock.html [http://publib.boulder.ibm.com/infocenter/wpdoc/v6r1m0/index.jsp?topic=/com.ibm.wp.ent.doc/wcm/wcm_admin_library_unlock.html]
 * 

4. Restart the server. 

Sample use of commands and partial output: 

[root@myserver bin]# ./findEJBTimers.sh WebSphere_Portal -all
ADMU0116I: Tool information is being logged in file

/usr/local/websphere/wp_profile/logs/WebSphere_Portal/EJBTimers.log
ADMU0128I: Starting tool with the wp_profile profile
ADMU3100I: Reading configuration for server: WebSphere_Portal
Realm/Cell Name: <default>
Username: wpsadmin@mycompany.com
Password:  * EJB Timer : 12301 Expiration: 4/27/09 11:11 AM 

Repeating  * EJB : wcm, WCM_EJBs.jar, EJBScheduler
 * 
 * EJB Key: Not Available
 * 
 * Info :
   

com.ibm.workplace.wcm.util.scheduler.Schedulable|com.ibm.workplace.wcm.services.task.GlobalTaskMonitor|GlobalTaskMonitor|-5312fffa8.......more 

To delete the timer using the timer ID 12301: 

cancelEJBTimers.bat WebSphere_Portal -timer 12301 
RELATED INFORMATION
#WebSphere Protal 6.1 Information Center [http://publib.boulder.ibm.com/infocenter/wpdoc/v6r1m0/index.jsp?topic=/com.ibm.wp.ent.doc/welcome_main.html]




 * 
 *