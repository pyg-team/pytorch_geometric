Title: IBM LDAP server limits number of search results based on bind user - United States

Text:
sun one; LDAP; CWWIM4520E; LimitExceededException; bindDN; bind DN; VMM; search; limit TECHNOTE (TROUBLESHOOTING)

PROBLEM
In IBM WebSphere Portal, a search for people or groups fails because the LDAP server limits search results for Virtual Member Manager's (VMM) bind distinguished name (bindDN).

SYMPTOM

When the People Finder searches for a person or group, the Directory Search -- Webpage Dialog spawns a pop-up: "Error loading xml string Error 500:"

The SystemOut.log contains the following:

... PickerDataSou W com.ibm.wkplc.people.picker.poc.PickerDataSource getExpiration Implement to enable caching...
... PickerDataSou W com.ibm.wkplc.people.picker.poc.PickerDataSource getLastModified Implement to enable caching...
... exception E com.ibm.ws.wim.adapter.ldap.LdapConnection cloneSearchResults(NamingEnumeration, CachedNamingEnumeration, CachedNamingEnumeration) CWWIM4520E The 'javax.naming.LimitExceededException: [LDAP: error code 11 - Administrative Limit Exceeded]; remaining name 'o=yourorganization'; resolved object com.sun.jndi.ldap.LdapCtx@7b2c7b2c' naming exception occurred during processing.
... exception E com.ibm.ws.wim.adapter.ldap.LdapConnection cloneSearchResults(NamingEnumeration, CachedNamingEnumeration, CachedNamingEnumeration)
com.ibm.websphere.wim.exception.WIMSystemException: CWWIM4520E The 'javax.naming.LimitExceededException: [LDAP: error code 11 - Administrative Limit Exceeded]; remaining name 'o=yourorganization'; resolved object com.sun.jndi.ldap.LdapCtx@7b2c7b2c' naming exception occurred during processing. 

 * 

com.ibm.ws.wim.adapter.ldap.LdapConnection.cloneSearchResults(LdapConnection.java:3005)  * 

com.ibm.ws.wim.adapter.ldap.LdapConnection.updateSearchCache(LdapConnection.java:2402)  * 

com.ibm.ws.wim.adapter.ldap.LdapConnection.checkSearchCache(LdapConnection.java:2474)  * 

com.ibm.ws.wim.adapter.ldap.LdapConnection.search(LdapConnection.java:2653)  * 

... 
CAUSE
The "LDAP: error code 11" indicates the following:

* The error originates from the LDAP server and therefore may require assistance from the LDAP administrator to resolve. (Refer to Document #1295558 [http://www.ibm.com/support/docview.wss?rs=899&uid=swg21295558], " 'LDAP: error code ...' messages appear in WebSphere Portal logs"). 

* The search results exceeded an administrative limit.


RESOLVING THE PROBLEM
Work with your LDAP administrator to adjust the administrative limits on results of searches made by the distinguished name with which VMM binds to the LDAP. Refer to <profile>/config/cells/<cell name>/wim/config/wimconfig.xml for this bindDN: 


<config:ldapServers ... bindDN="cn=root" ...>
<config:connectionshost="yourldapserver.com" ... />
</config:ldapServers>

In the case of the Sun ONE Directory Server LDAP implementation, the following parameter settings for VMM's bindDN should resolve the problem:

nslookthroughlimit=-1
nssizelimit=-1

RELATED INFORMATION
 LDAP: error code messages [http://www.ibm.com/support/docview.wss?rs=688&ca=portall2&uid=swg21295558]