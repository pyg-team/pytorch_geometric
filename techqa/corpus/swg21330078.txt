Title: IBM ORB trace files filling up disk space - United States

Text:
 TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 Object Request Broker (ORB) trace (orbtrc*) files are generated when you set the ORB debug parameters in the startup scripts of clients that connect to the Persistent Name Server. These files are large, and over a period of time can cause the disk to run out of space. 

CAUSE
ORB trace files are used only for debugging purpose. They can be removed after the debugging session is finished.

RESOLVING THE PROBLEM
1.To prevent the ORB trace files from being generated by the ORB clients, follow these steps mentioned :


a. Add the following parameter to the ORB_PROPERTY environment variable in the startup scripts of clients that connect to the Persistent Naming Server (PNS). If the parameter is already present in the script, modify it as shown: 


Unix: -Dcom.ibm.CORBA.Debug.Output=/dev/null 

 Windows: -Dcom.ibm.CORBA.Debug.Output=NUL 

b. Remove the following if set in ORB_PROPERTY variable: 

 -Dcom.ibm.CORBA.CommTrace and -Dcom.ibm.CORBA.Debug 

Note: The Debug property turns on trace, message, or both. If you set this property to trace only traces are turned on; if you set it to message, only messages are turned on. Any other value, or no value, turns on traces and messages. The only way turn off this property is not to specify it. 

c.Below are the set of client scripts connecting to PNS where ORB_PROPERTY needs to be modified if required: 
Note: Refer ORB MustGather [http://www-01.ibm.com/support/docview.wss?uid=swg21177465] for more details on how to modify ORB_PROPERTY environment variable.


 * To prevent InterChange Server and its components from generating the ORB trace files: Changes needs to be made in CWSharedEnv.sh (.bat ), in <WICS_INSTALL>/bin.

 * To prevent the adapters from generating the trace files: Changes needs to be made in adapterEnv.sh (.bat), in <Adapter_INSTALL>/bin. 

 * To prevent System Monitor from generating the trace files: In the WebSphere Application Server Java virtual machine. (Set this in the WebSphere Application Server administrative console, in Servers > Application Server > ServerName > Configuration tab >Java and Process Management > Process Definition > Java Virtual Machine > Generic JVM arguments.)

 * When using tomcat this has to be set in setClasspath.sh (.bat) where the ORB parameters are specified.


d. Restart all components, 2. To prevent ORB trace files from being generated by the ORB Naming Server, follow these steps: 

If you have previously enabled PersistentNameServer tracing then to disable simply remove the following parameter from the startup script of PersistentNameServer.sh (.bat) :
-J-Dcom.sun.CORBA.ORBDebug=transport,POA,naming,giop,subcontract,serviceContext >output_file

When using TransientNameServer, ORB trace files are generated even if the parameters to generate them are not explicitly set because FFDC (First Failure Data Capture) is still working, so that only serious errors are reported. To ensure that even that is not generated add the line -J-Dcom.ibm.CORBA.Debug.Output=/dev/null in PersistentNameServer.sh (.bat) as:

Unix:./tnameserv -J-Dcom.ibm.CORBA.Debug.Output=/dev/null -ORBInitialPort 12345

Windows: ./tnameserv -J-Dcom.ibm.CORBA.Debug.Output=NUL -ORBInitialPort 12345

For more information refer Java Diagnostics Guide.

RELATED INFORMATION
#MustGather: Persistent Naming Server (PNS/ORB) related [http://www.ibm.com/support/docview.wss?uid=swg21177465]
Java Diagnostics Guide [http://download.boulder.ibm.com/ibmdl/pub/software/dw/jdk/diagnosis/diag142.pdf]