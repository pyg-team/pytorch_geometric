Title: IBM IY60736: Potential Queue Manager hang on AIX, or a spurious semaphore post on AIX/Linux, if an application is killed during MQDISC - United States

Text:
AIX  FIXES ARE AVAILABLE
WebSphere MQ V5.3 and WebSphere MQ Express V5.3 - Fix Pack 12 (CSD12) [http://www-01.ibm.com/support/docview.wss?uid=swg24011423]
WebSphere MQ V5.3 & WebSphere MQ Express V5.3 - Fix Pack 10 (CSD10) [http://www-01.ibm.com/support/docview.wss?uid=swg24009688]
WebSphere MQ V5.3 for iSeries - Fix Pack 12 (CSD12) [http://www-01.ibm.com/support/docview.wss?uid=swg24011422]
WebSphere MQ V5.3 and WebSphere MQ Express V5.3 - Fix Pack 13 (CSD13) [http://www-01.ibm.com/support/docview.wss?uid=swg24014128]
WebSphere MQ V5.3 and WebSphere MQ Express V5.3 - Fix Pack 14 (CSD14) [http://www-01.ibm.com/support/docview.wss?uid=swg24017668]


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  If a server bindings application is killed, or hangs, at just
   the wrong point during an MQDISC call, it is possible to cause
   the application's agent health thread to hang, which in turn
   can cause the queue manager to stop processing further
   application connection attempts.
   
   There is also a possibility that this could cause a spurious
   semaphore post FDC (e.g. probe XC034071 or XC332071), rather
   than a queue manager hang.
   
   This latter symptom is possible on Linux as well as AIX,
   whereas the queue manager hang is only a possibility on AIX.
   
   
    
   
   

LOCAL FIX
 *  Add a check to avoid reusing an agent thread if the relevant
   semaphore is in a posted state.
   
   
    
   
   

PROBLEM SUMMARY
 *  ****************************************************************
   USERS AFFECTED:
   Users killing server binding applications during an MQDISC call
   on AIX/Linux.
   
   Platforms affected:
   AIX,Linux (Power),Linux (x86),Linux (zSeries)
   
   ****************************************************************
   PROBLEM SUMMARY:
   The MQDISC code failed to take into account certain small
   windows in the disconnect logic where, if an application is
   killed or hangs, there was the potential for locking up the
   whole queue manager. A further small window could give rise to
   a spurious semaphore post.
   
   
    
   
   

PROBLEM CONCLUSION
 *  Improved the MQDISC logic to close the windows of opportunity
   for things to go wrong.
   
   
   
   The fix will be included in the following PTFs:
   
                      v5.3
   Platform           Fix Pack 09
   --------           --------------------
   AIX                U498401
   Linux (x86)        U498687
   Linux (zSeries)    U498689
   Linux (Power)      Not applicable
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   IY60736
   
   
 * REPORTED COMPONENT NAME
   WEB MQ FOR AIX
   
   
 * REPORTED COMPONENT ID
   5724B4101
   
   
 * REPORTED RELEASE
   530
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2004-08-17
   
   
 * CLOSED DATE
   2004-10-13
   
   
 * LAST MODIFIED DATE
   2007-04-27
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION

APPLICABLE COMPONENT LEVELS
 * R530 PSY
   UP