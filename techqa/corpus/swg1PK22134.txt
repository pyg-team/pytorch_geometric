Title: IBM PK22134: JAVA.LANG.ILLEGALSTATEEXCEPTION-SRVE0199E-OUTPUTSTREAM ALREADY O BTAINED, WHEN PRINT/EXPORT (AS PDF) IS DONE IN JSP WITH CR - United States

Text:
 SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PERMANENT RESTRICTION.
    
   
   

ERROR DESCRIPTION
 *  In Rational Application Developer V6011 iFix001, when JSP is usi
   ng JRC code or using Report Page Viewer component (from 'Crystal
    Reports JSP Tags' Drawer in the Pallette view), it can be viewe
   d fine at runtime on Websphere V6 Test Environment ( WAS v6027 w
   ith updated JDK 142 SR4 level), when the Print Button is clicked
    on the Report , depdending upon the crtPrintMode being 'PDF' or
    'ActiveX' , the user will get an option to export the Report as
    PDF or actually Print the report using the Print Dialog box.
   
   In the both the cases,
   a) when the report is exported as PDF
   b) when the report is tried to be printed by clicking the Print
   Button on the Print dialog box,
   
   the following exception trace is shown on the Server Console vie
   w and nothing happens.
   
   -------------------------
   [3/23/06 15:21:44:712 EST] 00000032 WebApp        A   SRVE0180I:
    [SampleWeb] [/SampleWeb] [Servlet.LOG]: Error page exception  T
   he server cannot use the error page specified for your applicati
   on because of the exception printed below.
   [3/23/06 15:21:44:728 EST] 00000032 WebApp        A   SRVE0181I:
    [SampleWeb] [/SampleWeb] [Servlet.LOG]: Error Page Exception: :
    com.ibm.ws.webcontainer.webapp.WebAppErrorReport: SRVE0199E: Ou
   tputStream already obtained
    at com.ibm.ws.webcontainer.webapp.WebApp.sendError(WebApp.java:
   2534)
    at com.ibm.ws.webcontainer.servlet.CacheServletWrapper.handleRe
   quest(CacheServletWrapper.java:101)
    at com.ibm.ws.webcontainer.WebContainer.handleRequest(WebContai
   ner.java:1657)
    at com.ibm.ws.webcontainer.channel.WCChannelLink.ready(WCChanne
   lLink.java:77)
    at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleD
   iscrimination(HttpInboundLink.java:421)
    at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleN
   ewInformation(HttpInboundLink.java:367)
    at com.ibm.ws.http.channel.inbound.impl.HttpICLReadCallback.com
   plete(HttpICLReadCallback.java:94)
    at com.ibm.ws.tcp.channel.impl.WorkQueueManager.requestComplete
   (WorkQueueManager.java:548)
    at com.ibm.ws.tcp.channel.impl.WorkQueueManager.attemptIO(WorkQ
   ueueManager.java:601)
    at com.ibm.ws.tcp.channel.impl.WorkQueueManager.workerRun(WorkQ
   ueueManager.java:934)
    at com.ibm.ws.tcp.channel.impl.WorkQueueManager$Worker.run(Work
   QueueManager.java:1021)
    at com.ibm.ws.util.ThreadPool$Worker.run(ThreadPool.java:1332)
   Caused by: java.lang.IllegalStateException: SRVE0199E: OutputStr
   eam already obtained
    at com.ibm.ws.webcontainer.srt.SRTServletResponse.getWriter(SRT
   ServletResponse.java:462)
    at com.ibm.ws.webcontainer.webapp.WebApp.sendError(WebApp.java:
   2484)
    ... 11 more
   ===================================
   In case a) , the exported PDF (PDF gets exported) cannot be open
   ed in Adobe acrobat reader (v5, v6, v7) , it says : Report is da
   maged, check the source again.
   
   In case b) , the Report does not get printed on the selected pri
   nter.
   THe following link is provided on support.businessobjects.com, t
   hat claims to provide workaround for thi s issue, but does not w
   ork in this case.
   
   
    
   
   

LOCAL FIX

PROBLEM SUMMARY
 *  See Error Description
   
   
    
   
   

PROBLEM CONCLUSION
 *  Limited use case and will not be addressed in the next 18
   months.
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   PK22134
   
   
 * REPORTED COMPONENT NAME
   APP DEV V6 WIN
   
   
 * REPORTED COMPONENT ID
   5724J1901
   
   
 * REPORTED RELEASE
   601
   
   
 * STATUS
   CLOSED PRS
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2006-03-23
   
   
 * CLOSED DATE
   2008-10-06
   
   
 * LAST MODIFIED DATE
   2008-10-06
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION

APPLICABLE COMPONENT LEVELS