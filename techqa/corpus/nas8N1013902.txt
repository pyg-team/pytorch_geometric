Title: IBM USPS Intelligent Mail Barcode - United States

Text:
 TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 This document discusses the United States Postal Service (USPS) Intelligent Mail Barcode. 

RESOLVING THE PROBLEM
This document discusses the United States Postal Service (USPS) Intelligent Mail Barcode. 

This document was last updated on 3 September, 2014.









The Intelligent Mail Barcode (IMB) is the next generation bar code from the United States Postal Service (USPS). It has also been referred to as the following: o USPS Four-State bar code o OneCode bar code o OneCode (4CB), OneCode (4-CB), 4-CB, or 4CB IBM i5/OS has not enhanced its Data Description Specifications (DDS) with a keyword for this bar code. However, you can refer to it using its Bar Code Object Content Architecture (BCOCA) numeric type. There are four possible modifiers that you can specify; the modifiers require that you specify it as fields of different lengths. For assistance in determining the format of the first 20 digits, contact the United States Postal Service. The possible modifiers follow: o X'00' - Present the bar code with no Routing ZIP code. You supply 20 numeric digits. o X'01' - Present the bar code with a 5 digit Routing ZIP code. You supply 25 numeric digits. o X'02' - Present the bar code with a 9 digit Routing ZIP code. You supply 29 numeric digits. o X'03' - Present the bar code with an 11 digit Routing ZIP code. You supply 31 numeric digits. The numeric bar code type is x'22' or decimal 34. Some example DDS follows: 

R RECORD1 
FIELD1 20S 0 3 3BARCODE(34 X'00' *NOHRI) 
R RECORD2 
FIELD2 25S 0 3 3BARCODE(34 X'01' *NOHRI) 
R RECORD3 
FIELD3 29S 0 3 3BARCODE(34 X'02' *NOHRI) 
R RECORD4 
FIELD4 31S 0 3 3BARCODE(34 X'03' *NOHRI) 

Consider the type of printer that you are targeting: o DEVTYPE(*IPDS) printers must support this bar code in its IPDS firmware. Contact support for the printer hardware to determine if your printer has such an upgrade. o Laser ASCII printers that use TRANSFORM(*YES) with a PCL4 or PCL5 level transform have no support because Host Print Transform does not support this bar code. o An IBM Infoprint Server for iSeries emulated DEVTYPE(*IPDS) printer that does a spooled file transformation to PDF has no support for this bar code. Note: We have been informed that the InfoPrint 6500 IPDS line matrix printer has support with the latest IPDS firmware. For more information, please refer to Firmware Downloads for InfoPrint 6500 and 6700 Printers at:

http://support.rpp.ricoh-usa.com/internet/dcfdata.nsf/vwWeb/P4000868 [http://support.rpp.ricoh-usa.com/internet/dcfdata.nsf/vwWeb/P4000868]

Please contact Ricoh or InfoPrint Solutions, or your printer hardware vendor, directly if assistance is needed with updating the firmware on your InfoPrint 6500 printer. 

An Alternative Method to Printing the Barcode 

The United States Postal Service has a Web site that allows you to download a font. It also requires the use of converter software to convert the numeric string that you are bar coding into an alternate 65 character long string that will be printed using the font. This software is available in C, Java 2, COBOL and RPG for the IBM Power Systems. When using the font method of printing the bar code, you can then print it by using IPDS or HPT. They are raster technology fonts, so the IPDS printer must match the pel density of the font resource objects. There are 240 and 300 pel fonts included. 

Note that the 240 pel fonts may not print successfully on many IPDS printers. The printer might return IPDS negative acknowledgement RC023E .. 02, causing a MSGPQT3630 error message in the PDJ joblog. We have not heard of any problems with the 300 pel versions of the fonts. IBM did not create these fonts, and has no responsibility in updating them. 

Also note that you cannot use this method to print to dot matrix technology printers, as you cannot download fonts to them. 

Important Note: The fonts and software that are on the United States Postal Service Web site are not supported in any way by IBM. 
//ribbs.usps.gov/index.cfm?page=intellmailmailpieces [https://ribbs.usps.gov/index.cfm?page=intellmailmailpieces] 

This is not an IBM Web site. From this Web site, there should be a link to downloads. Within the downloads, look for the downloads for System i. The downloads should contain save files with libraries for the fonts, libraries containing the converter software, and instructions on calling the converter software. 

Example DDS for printing the 65 character long barcode string with the barcode font is as follows: 

R USPSBRCD 
BARCODE 65 3 3CDEFNT(X0US23) 

and the library containing this coded font resource and the other font resources should be in the library list of the job creating the spooled file. 

At press time, the names of the two font libraries on this Web site are USPSFON240 and USPSFON300. The numbers 240 and 300 refer to the pel densities of the fonts contained within. If you are printing to a *IPDS printer, you need to use the fonts that match the pel density of your printer. If you are not sure what pel density your printer handles, you may need to try a font from both libraries to see which one works. Ensure the font library you are using is in the library list of the job that creates the spooled file.  


Cross reference information Segment Product Component Platform Version Edition Operating System IBM i 7.2 Operating System IBM i 7.1 Operating System IBM i 6.1 
HISTORICAL NUMBER
 476713695