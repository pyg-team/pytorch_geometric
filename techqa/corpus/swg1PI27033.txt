Title: IBM PI27033: RDZ NOT ACCEPTING LOGONS AND/OR HIGH CPU AND/OR ABEND878-10 FOLLOWED BY ABEND40D CAN BE OBSERVED. - United States

Text:
z/os  A FIX IS AVAILABLE
9.1.1: UI23762 PTF for Rational Developer for System z Host Options [http://www-01.ibm.com/support/docview.wss?uid=swg24039081]
Obtain the fix for this APAR.


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  Rational Developer for System z not accepting logons and/or high
   CPU and/or ABEND878-10 followed by ABEND40D can be observed.
   
   When some abend occurs in lock routine, FFS lock condition
   handler is kicked.  But Another abend occurs in FFS lock
   condition handler. After all, the FFS lock condition handler was
   kicked forever (i.e. entering loop ).
   
   When standard logging is active
   ABSTRACT:
   RDz not accepting logons and/or high CPU and/or ABEND878-10
   followed by ABEND40D can be observed.
   
   DESCRIPTION:
   RDz not accepting logons and/or high CPU and/or ABEND878-10
   followed by ABEND40D can be observed.
   
   When some abend occurs in lock routine, FFS lock condition
   handler is kicked.  But Another abend occurs in FFS lock
   condition handler. After all, the FFS lock condition handler was
   kicked forever (i.e. entering loop ).
   
   When standard logging is active
   _RSE_JAVAOPTS="$_RSE_JAVAOPTS &#65411;  Denable.standard.log=true"
   The system can easily run out of space on the filesystem that
   contains the server log directory /var/rdz/logs/server.
   
   This can be observed by
   EDC5133I No space left on device. (errno2=0xEF01604E)
   EDC5124I Too many open files. (errno2=0x050B0146)
   
   
      3022    2014.09.09 07:30:57:889 EDT PID:50398810
   THREAD:23BDF00000000017 TCB:009C73E8 USER:STCRDZ ERROR: class
   com.ibm.etools.zos.server.LogHandler$ServerStdoutHandler:java.io
   .IOException: EDC5133I No space left on device.
   (errno2=0xEF01604E)
      3023    java.io.IOException: EDC5133I No space left on
   device. (errno2=0xEF01604E)
      3024        at java.io.RandomAccessFile.writeBytes(Native
   Method)
      3025        at
   java.io.RandomAccessFile.write(RandomAccessFile.java:488)
      3026        at
   com.ibm.etools.zos.server.LogHandler.writeServerStandardLog(LogH
   andler.java:738)
      3027        at
   com.ibm.etools.zos.server.LogHandler$ServerStdoutHandler.run(Log
   Handler.java:691)
      3028        at java.lang.Thread.run(Thread.java:781)
      3029    2014.09.09 07:31:25:113 EDT PID:50398810
   THREAD:23BDF00000000017 TCB:009C73E8 USER:STCRDZ ERROR: class
   com.ibm.etools.zos.server.LogHandler$ServerStdoutHandler:java.io
   .FileNotFoundException: /var/rdz/logs/server/stdout.3.log
   (EDC5124I Too
      3030    java.io.FileNotFoundException:
   /var/rdz/logs/server/stdout.3.log (EDC5124I Too many open files.
   (errno2=0x050B0146))
      3031        at java.io.RandomAccessFile.open(Native Method)
      3032        at
   java.io.RandomAccessFile.<init>(RandomAccessFile.java:233)
      3033        at
   com.ibm.etools.zos.server.LogHandler.writeServerStandardLog(LogH
   andler.java:732)
      3034        at
   com.ibm.etools.zos.server.LogHandler$ServerSt2014.09.09
   07:32:48:808 EDT PID:50398810
   
   
   IOEZ00312I Dynamic growth of aggregate ITSX0$P.ZFS.RDZ.VAR.RD01
   in progress, (by user STCRDZ).
   STC35990  +FEK114E accept() failed. reason=(EDC5124I Too many
   open files. (errno2=0x050B0146))
   
   This problem can also cause lead to multiple ABEND878-10 abends
   that end with an ABEND40D (recursive abend).
   
   Also high CPU usage for RSE servers and the RSE daemon can be
   observed.
   Java stack frames during Hi CPU:
   method: String com/ibm/etools/zos/server/CoreJNI.receive(int,
   int, int)  (Native Method)
   method: void
   com/ibm/etools/zos/server/LogHandler$ServerStdoutHandler.run()
   source: LogHandler.java:692
   method: void java/lang/Thread.run()  source: Thread.java:795
   The system can easily run out of space on the filesystem that
   contains the server log directory /var/rdz/logs/server.
   
   This can be observed by
   EDC5133I No space left on device. (errno2=0xEF01604E)
   EDC5124I Too many open files. (errno2=0x050B0146)
   
   
      3022    2014.09.09 07:30:57:889 EDT PID:50398810
   THREAD:23BDF00000000017 TCB:009C73E8 USER:STCRDZ ERROR: class
   com.ibm.etools.zos.server.LogHandler$ServerStdoutHandler:java.io
   .IOException: EDC5133I No space left on device.
   (errno2=0xEF01604E)
      3023    java.io.IOException: EDC5133I No space left on
   device. (errno2=0xEF01604E)
      3024        at java.io.RandomAccessFile.writeBytes(Native
   Method)
      3025        at
   java.io.RandomAccessFile.write(RandomAccessFile.java:488)
      3026        at
   com.ibm.etools.zos.server.LogHandler.writeServerStandardLog(LogH
   andler.java:738)
      3027        at
   com.ibm.etools.zos.server.LogHandler$ServerStdoutHandler.run(Log
   Handler.java:691)
      3028        at java.lang.Thread.run(Thread.java:781)
      3029    2014.09.09 07:31:25:113 EDT PID:50398810
   THREAD:23BDF00000000017 TCB:009C73E8 USER:STCRDZ ERROR: class
   com.ibm.etools.zos.server.LogHandler$ServerStdoutHandler:java.io
   .FileNotFoundException: /var/rdz/logs/server/stdout.3.log
   (EDC5124I Too
      3030    java.io.FileNotFoundException:
   /var/rdz/logs/server/stdout.3.log (EDC5124I Too many open files.
   (errno2=0x050B0146))
      3031        at java.io.RandomAccessFile.open(Native Method)
      3032        at
   java.io.RandomAccessFile.<init>(RandomAccessFile.java:233)
      3033        at
   com.ibm.etools.zos.server.LogHandler.writeServerStandardLog(LogH
   andler.java:732)
      3034        at
   com.ibm.etools.zos.server.LogHandler$ServerSt2014.09.09
   07:32:48:808 EDT PID:50398810
   
   
   IOEZ00312I Dynamic growth of aggregate ITSX0$P.ZFS.RDZ.VAR.RD01
   in progress, (by user STCRDZ).
   STC35990  +FEK114E accept() failed. reason=(EDC5124I Too many
   open files. (errno2=0x050B0146))
   
   This problem can also cause lead to multiple ABEND878-10 abends
   that end with an ABEND40D (recursive abend).
   
   Also high CPU usage for RSE servers and the RSE daemon can be
   observed.
   Java stack frames during Hi CPU:
   method: String com/ibm/etools/zos/server/CoreJNI.receive(int,
   int, int)  (Native Method)
   method: void
   com/ibm/etools/zos/server/LogHandler$ServerStdoutHandler.run()
   source: LogHandler.java:692
   method: void java/lang/Thread.run()  source: Thread.java:795
   
   
    
   
   

LOCAL FIX

PROBLEM SUMMARY
 *  ****************************************************************
   * USERS AFFECTED: 01.All RDz users                             *
   ****************************************************************
   * PROBLEM DESCRIPTION: 01.The condition handler registered in  *
   *                         the resource serialization logic     *
   *                         sets the wrong result value.         *
   ****************************************************************
   * RECOMMENDATION:                                              *
   ****************************************************************
   01.Because a condition handler sets the wrong result value of
      20, it is called repeatedly when an exception occurs while
      serializing a resource.
   
   
    
   
   

PROBLEM CONCLUSION
 *  01.The condition handler is updated to set the correct result
      value of 10 to be called just once when an exception occurs
      while serializing a resource.
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   PI27033
   
   
 * REPORTED COMPONENT NAME
   RD/Z HOST
   
   
 * REPORTED COMPONENT ID
   5724T0723
   
   
 * REPORTED RELEASE
   910
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2014-10-06
   
   
 * CLOSED DATE
   2014-12-05
   
   
 * LAST MODIFIED DATE
   2014-12-09
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

MODULES/MACROS
 *  FEKFENVR FEKFMAIN FEKFMAI6 FEKFMINE FEKFOMVS
   FEKFTSO  FEKFZOS
   
   
    
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   RD/Z HOST
   
   
 * FIXED COMPONENT ID
   5724T0723
   
   

APPLICABLE COMPONENT LEVELS
 * R910 PSY UI23650 [HTTPS://WWW14.SOFTWARE.IBM.COM/WEBAPP/SET2/ORDERMEDIA/SHOPCART?PTFS=UI23650]
   UP14/12/09 I 1000
   
   

FIX IS AVAILABLE
 * SELECT THE PTF APPROPRIATE FOR YOUR COMPONENT LEVEL. YOU WILL BE REQUIRED TO SIGN IN. DISTRIBUTION ON PHYSICAL MEDIA IS NOT AVAILABLE IN ALL COUNTRIES.