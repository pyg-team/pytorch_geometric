Title: IBM Portal migration fails during portal-post-upgrade task during an export of theme policy - United States

Text:
portal-post-upgrade; theme policy; themecustomizer-ExportedThemePolicies.xml; wp.theme.customizer_cfg.xml; action-export-theme-policies; portal migration TECHNOTE (TROUBLESHOOTING)

PROBLEM
Here is an example, where one is doing migration from WebSphere Portal Server 6.0.x to 7.x and it is failing during portal-post-upgrade task -- 

 
[exec] action-update-theme-policy-wp.theme.customizer: 
[exec] Wed May 25 12:42:26 EDT 2011 
[exec] [copy] Copying 1 file to /opt/ts/WPS/7.0/DevPortal/ConfigEngine/config/work 
[exec] [copy] Copying 1 file to /opt/ts/WPS/7.0/DevPortal/ConfigEngine/config/work 

[exec] action-export-theme-policies: 
[exec] Wed May 25 12:42:28 EDT 2011 
[exec] [copy] Copying 1 file to /opt/ts/WPS/7.0/DevPortal/ConfigEngine/config/work 
[exec] [mkdir] Created dir: /opt/ts/WPS/7.0/DevPortal/theme/wp.theme.customizer/config/policies 
[exec] [xmlaccess] EJPXB0006I: Connecting to URL hxxp://localhost:10039/wps/config/ 
[exec] [xmlaccess] EJPXB0002I: Reading input file /opt/ts/WPS/7.0/DevPortal/ConfigEngine/config/work/ExportThemePolicies.xml 
[exec] [xmlaccess] <?xml version="1.0" encoding="UTF-8"?> 
[exec] [xmlaccess] <!-- IBM WebSphere Portal/7.0.0.1 build 
wp7001CF03_001_15 exported on Wed May 25 12:42:29 EDT 2011 from cvg-empwpsd01/10.80.88.55 --> 
[exec] [xmlaccess] <!-- 1 [policy-node type=theme path= --> 
[exec] [xmlaccess] <request build="wp7001CF03_001_15" type="update" version="7.0.0.1" xmlns:xsi="hxxp://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="PortalConfig_7.0.0.xsd"> 
[exec] [xmlaccess] <portal action="locate"> 
[exec] [xmlaccess] <policy-node action="update" path=""> 
[exec] [xmlaccess] <access-control externalized="false" owner="undefined" private="false"/> 
[exec] [xmlaccess] </policy-node> 
[exec] [xmlaccess] </portal> 
[exec] [xmlaccess] <status element="all" result="ok"/> 
[exec] [xmlaccess] </request> 
[exec] [xmlaccess] EJPXB0020I: The request was processed successfully on the server. 
[exec] BUILD FAILED 
[exec] 
/opt/ts/WPS/7.0/PortalServer/theme/wp.theme.customizer/config/includes/wp.theme.customizer_cfg.xml:62: Warning: Could not find file 
/opt/ts/WPS/7.0/DevPortal/theme/wp.theme.customizer/config/policies/themecustomizer-ExportedThemePolicies.xml to copy


RESOLVING THE PROBLEM
In order to correct the issue please do the following steps:

1) Use this xml: ExportThemePolicy.xml [/support/docview.wss?uid=swg21574665&aid=2]ExportThemePolicy.xml [/support/docview.wss?uid=swg21574665&aid=1]

on the source environment and run the manual xmlaccess command to export the theme policy from one's source environment. Basically, use XMLAccess to run this file as the -in input or run it from the Import XML portlet on the Portal Administration page.

In short the above xml file would be -in parameter and make sure one specify -out parameter which we generate the file that one would need for #2.

If one is not familiar with xml access then here is an example - http://www-01.ibm.com/support/docview.wss?uid=swg21260098 [http://www-01.ibm.com/support/docview.wss?uid=swg21260098]

2) Now on the target server - create the new file called "themecustomizer-ExportedThemePolicies.xml" under <PortalServer_home>/theme/wp.theme.customizer/config/policies and copy the contains from output file which got created in step #1

For instance, in the above example one would be copy the contains from output file which got created in step #1 in file called "themecustomizer-ExportedThemePolicies.xml" under 
/opt/ts/WPS/7.0/DevPortal/theme/wp.theme.customizer/config/policies

3) Re-run the migration task



PRODUCT ALIAS/SYNONYM
 portal-post-upgrade
theme policy
themecustomizer-ExportedThemePolicies.xml
wp.theme.customizer_cfg.xml
action-export-theme-policies
portal migration