Title: IBM Deploy the Rule Execution Server EJB rule sessions several times on the same server - United States

Text:
JNDI; EJB; EJB3; name; RES; BRES TECHNOTE (FAQ)

QUESTION
 How do I deploy Rule Execution Server EJB rule sessions more than once, for each application that uses them on the same server, and call them remotely? 

ANSWER
An EJB module can be shared among several applications on the same server or cell. However, you will find it more convenient for maintainability to bundle Rule Execution Server EJB rule sessions within each application that calls Rule Execution Server through EJBs because doing so, you can redeploy the application EAR when necessary (for an application code or XOM modification, for example) without affecting the availability of other applications. You can also have those applications call different versions of Rule Execution Server. 

When you deploy the same EJB on the same server or cell more than once, you must give each instance a unique global JNDI name to avoid conflict errors, because those names need to uniquely identify a bean in a given context. See section "Rule Execution Server > Introducing Rule Execution Server > Rule Execution Server basics > JNDI bindings > Reference bindings for Rule Execution Server modules" of the JRules 7.1 documentation [http://publib.boulder.ibm.com/infocenter/brjrules/v7r1/topic/com.ibm.websphere.ilog.jrules.doc/Content/Business_Rules/Documentation/_pubskel/JRules/ps_JRules_Global941.html]. 

 

Here is an example of the error you might get in WebSphere Application Server 7: 


Unable to start EJB jar, IlrStatelessRuleSessionEJB: The ilog.rules.bres.session.ejb.IlrStatelessRuleSessionHome interface of the IlrStatelessRuleSessionEJB bean in the jrules-res-session-WAS7.jar module of the jrules-res-session-WAS7_jar_2 application cannot be bound to the ejb/IlrStatelessRuleSessionEJB name location. The ilog.rules.bres.session.ejb.IlrStatelessRuleSessionHome interface of the IlrStatelessRuleSessionEJB bean in the jrules-res-session-WAS7.jar module of the jrules-res-session-WAS7_jar application has already been bound to the ejb/IlrStatelessRuleSessionEJB name location. 

 

 

For EJB3, you can set your own unique names for the EJB business interfaces at deployment time (see the documentation of your application server) or you can have them generated by the server automatically. For example, WebSphere AS 7 generates the following JNDI name for the remote business interface of Rule Execution Server stateless rule sessions: 

ejb/My RES application/jrules-res-session-ejb3-WAS7.jar/IlrStatelessSessionEJB3#ilog.rules.res.session.impl.ejb3.IlrStatelessSessionRemote 

(See "Network Deployment (All operating systems), Version 7.0 > Developing and deploying applications > EJB applications > Assembling EJB 3.x enterprise beans > EJB 3.0 application bindings overview > Default bindings for EJB business interfaces and homes" in the WebSphere AS 7 documentation [http://publib.boulder.ibm.com/infocenter/wasinfo/fep/topic/com.ibm.websphere.nd.multiplatform.doc/info/ae/ae/cejb_bindingsejbfp.html#cejbbindingsejbfp__ejb30defaultbindings]) 


In that case, you must adjust the JNDI name in the Rule Execution Server client code by using the method IlrEJB3SessionFactory.setStatelessRemoteJndiName(String jndiName).  

For EJB2, you add a prefix to the JNDI names that are specified in the application-server-specific deployment descriptors and deployment scripts, or by using the console of your application server at deployment. For example: 

myApplication/ejb/IlrStatefulRuleSessionEJB 

and add that prefix at the end of the provider URL (java.naming.provider.url) on the client side through the rule session client API or in the jndi.properties file. For example, for WebSphere AS 7: 

corbaname:iiop:<host name>:<port>#myApplication 

 * 


Note: Default JNDI names and provider URL formats vary from one application server to another. Refer to the corresponding documentation to know what is appropriate in your configuration. 
RELATED INFORMATION
#JNDI bindings for RES V7.5 [http://pic.dhe.ibm.com/infocenter/dmanager/v7r5/topic/com.ibm.dserver.res/Content/Business_Rules/_pubskel/Infocenter_Primary/ps_DS_Rule_Execution_Server1556.html]
JNDI bindings for RES V8.0 [http://pic.dhe.ibm.com/infocenter/dmanager/v8r0/topic/com.ibm.wodm.dserver.rules.res.managing/topics/tpc_res_devclient_jndibind_intro.html]
JNDI bindings for RES V8.5 [http://pic.dhe.ibm.com/infocenter/dmanager/v8r5/topic/com.ibm.wodm.dserver.rules.res.developing/topics/tpc_res_devclient_jndibind_intro.html]






Cross reference information Segment Product Component Platform Version Edition Business Integration IBM Operational Decision Manager Platform Independent 8.5, 8.0, 7.5