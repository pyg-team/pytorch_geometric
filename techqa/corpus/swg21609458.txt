Title: IBM CWSOM1017E: Unable to access log file (file store location) while starting Messaging Engine - United States

Text:
 TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 WebSphere Application Server (WAS) Messaging Engine fails to start. The following errors occurred in the SystemOut.log file:

CWSIS0002E: The messaging engine encountered an exception while starting. Exception: com.ibm.ws.sib.msgstore.PersistenceException: Unexpected exception caught starting persistent message store:
CWSOM1017E:ObjectManagerState=ObjectManagerState( < Log file path> )/Stopped
ManagedObject(0/0)/Ready/<id>(ObjectManagerState) caught exception=<Log file location> (Exception) trying to locate or create log file name={2}(String).

CWSID0035E: Messaging engine <ME_NAME> cannot be started; detected error reported during
com.ibm.ws.sib.msgstore.impl.MessageStoreImpl start()

CWSID0027E:Messaging engine <ME_NAME> cannot be restarted because a serious error has been reported. 

CAUSE
These messages indicate a Messaging Engine is not able to access file system locations used by file store.
Possible causes are:

1) Incorrect path. File store locations provided do not exist.

2) User account is not authorized to read or write to the file system. The user account under which WebSphere Application Server runs or the userID which is trying to start the Messaging Engine is not authorized to read and write to the file system location (Log file system location).

3) Some times NFS version 3 file system may create this type of problem because of its locking issues. NFS3 file system has some locking issues and we suggest to use NFS4 if you see any locking related issues.

NFSv4 is recommended for use with highly available filestores because the NFSv4 specification includes lease-based locking. This ensures that all implementations of NFSv4 have a locking strategy
that allows the file server to detect the failure of an application that owns a lock, and releases that lock in a timely fashion for other applications to obtain.


RESOLVING THE PROBLEM
Please make sure that the file store log file exists and it is accessible by the specified userID. 


To further narrow the appropriate action, check the application server FFDC log for an exception that matches the message seen in SystemOut.log like below :

a) java.io.FileNotFoundException: path (system cannot find the path (file store log file location) specified). 
If you see this type of exception indicating the system could not find the path, note the path and check whether this path exists or not.

b) java.io.FileNotFoundException: path (Access is denied). In this case you see this exception either in SystemOut.log or in the ffdc's: 

 * 
 * Access is denied
 * 

If you see this type of exception indicating access was denied, give access to the User account that was not authorized. 
c) If you are using a NFS file system please also make sure that you are using NFS4 to avoid any locking related issues on the file store.

RELATED INFORMATION
#Default Messaging Provider: Concepts and Architecture [http://www-01.ibm.com/support/docview.wss?uid=swg27019098]
Messaging engine troubleshooting tips: [http://pic.dhe.ibm.com/infocenter/wasinfo/v8r0/index.jsp?topic=%2Fcom.ibm.websphere.nd.doc%2Finfo%2Fae%2Fae%2Frjk_prob0.html]
Diagnosing problems with accessing file store files [http://pic.dhe.ibm.com/infocenter/wasinfo/v8r0/index.jsp?topic=%2Fcom.ibm.websphere.nd.doc%2Finfo%2Fae%2Fae%2Ftjm0251_.html]
File store high availability [http://pic.dhe.ibm.com/infocenter/wasinfo/v7r0/index.jsp?topic=%2Fcom.ibm.websphere.nd.doc%2Finfo%2Fae%2Fae%2Fcjm1460_.html]


 


Cross reference information Segment Product Component Platform Version Edition Business Integration WebSphere MQ Service Integration Technologies /SIB AIX, HP-UX, Linux, Linux on Power, Solaris, Windows, UNIX, Linux zSeries 7.5, 7.1, 7.0, 6.0 Standard 
PRODUCT ALIAS/SYNONYM
 WebSphere Application Server WAS SIB SIBUS SI BUS