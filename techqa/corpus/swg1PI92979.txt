Title: IBM PI92979: HIGH CPU DUE TO THE CLASSLOADER STACK - United States

Text:
 SUBSCRIBE TO THIS APAR
By subscribing, you receive periodic emails alerting you to the status of the APAR, along with a link to the fix after it becomes available. You can track this item individually or track all items by product.

Notify me when this APAR changes.

Notify me when an APAR for this component changes.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  gh CPU due to the classloader stack
   
   
    
   
   

LOCAL FIX
 *  na
   
   
    
   
   

PROBLEM SUMMARY
 *  ****************************************************************
   * USERS AFFECTED:  All users of IBM WebSphere Application      *
   *                  Server Hang Detection.                      *
   ****************************************************************
   * PROBLEM DESCRIPTION: The application server may              *
   *                      exhibit high CPU utilization when       *
   *                      Hang Detection is enabled.              *
   ****************************************************************
   * RECOMMENDATION:                                              *
   ****************************************************************
   The Thread Monitor may loop indefinitely while determining
   the state of a managed thread.  When this problem occurs you
   will find a log containing an FFDC event like that shown below,
   where the failure call stack indicates a
   ConcurrentModificationException occurred while determining a
   managed thread is clear (no longer hung.)  A similar
   exception may occur while determining a managed thread is hung.
   FFDC Exception:java.util.ConcurrentModificationException
   SourceId:com.ibm.ws.runtime.component.ThreadMonitorImpl
   ProbeId:439
   ...
   java.util.ConcurrentModificationException
   at
   java.util.Vector$Itr.checkForComodification(Vector.java:1195)
   at
   java.util.Vector$Itr.next(Vector.java:1148)
   at
   com.ibm.ws.runtime.component.ThreadMonitorImpl.threadIsClear(Thr
   eadMonitorImpl.java:676)
   at
   com.ibm.ws.runtime.component.ThreadPoolMgrImpl$ThreadPoolMonitor
   Adapter.clearThread(ThreadPoolMgrImpl.java:988)
   at
   com.ibm.ws.util.ThreadPool$Worker.disableHungThreadDetection(Thr
   eadPool.java:1968)
   at
   com.ibm.ws.util.ThreadPool$Worker.threadReturned(ThreadPool.java
   :1940)
   at
   com.ibm.ws.util.ThreadPool$Worker.run(ThreadPool.java:1907)
   The problem may be circumvented by disabling Hang Detection on
   the failing application server. Hang Detection is disabled
   whenever custom property
   "com.ibm.websphere.threadmonitor.interval" is set to zero (0)
   in the application server configuration.  Instructions to
   disable Hang Detection are provided in topic "Configuring the
   hang detection policy" of the WebSphere Application Server
   v8.5.5 Knowledge Center:
   https://www.ibm.com/support/knowledgecenter/en/SSAW57_8.5.5/com.
   ibm.websphere.nd.doc/ae/ttrb_confighangdet.html [https://www.ibm.com/support/knowledgecenter/en/SSAW57_8.5.5/com.ibm.websphere.nd.doc/ae/ttrb_confighangdet.html]
   
   
    
   
   

PROBLEM CONCLUSION
 *  Apply APAR PI92979 to ensure the Thread Monitor of an
   application server does enter an infinite loop while
   detecting hung threads.
   
   The fix for this APAR is currently targeted for inclusion in
   fix packs 8.5.5.14 and 9.0.0.8.  Please refer to
   the Recommended Updates page for delivery information:
   http://www.ibm.com/support/docview.wss?rs=180&uid=swg27004980 [http://www.ibm.com/support/docview.wss?rs=180&uid=swg27004980]
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   PI92979
   
   
 * REPORTED COMPONENT NAME
   WEBS APP SERV N
   
   
 * REPORTED COMPONENT ID
   5724H8800
   
   
 * REPORTED RELEASE
   850
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt / Xsystem
   
   
 * SUBMITTED DATE
   2018-01-26
   
   
 * CLOSED DATE
   2018-02-16
   
   
 * LAST MODIFIED DATE
   2018-02-16
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   WEBS APP SERV N
   
   
 * FIXED COMPONENT ID
   5724H8800
   
   

APPLICABLE COMPONENT LEVELS