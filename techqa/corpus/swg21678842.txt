Title: IBM Cannot retrieve the HTDS Description File for a ruleset on Rule Execution Server console (ODM) - United States

Text:
 TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 In the Rule Execution Server (RES) console, we are unable to retrieve the HTDS Description File for the deployed ruleset. The corresponding Java XOM has been deployed on to RES. 

SYMPTOM
 

- In the RES console, under the Explorer tab, after expanding the RuleApp and selecting a ruleset, the link "Retrieve HTDS Description File" under "Show HTDS Options" is not active 

and 

- Under the Explorer tab, after expanding the RuleApp and selecting the ruleset, the following error message is seen after selecting the "Retrieve HTDS Description File" button in the toolbar under the Ruleset view:
"Access refused, you do not have sufficient credentials" 

 

In other scenarios, the user has authorization to retrieve the HTDS Description file, but errors are seen when doing so, such as:
The interaction ruleEngine.loadUptodateRuleset has failed. 
javax.resource.ResourceException: 
com.ibm.rules.res.xu.internal.XUException: GBRXU0436E: The ruleset 
parsing process failed. at ilog.rules.res.xu.spi.IlrManagedXUConnection.createResourceException(Ilr
ManagedXUConnection.java:876) at 
ilog.rules.res.xu.spi.IlrManagedXUConnection.loadUptodateRuleset(IlrMana
gedXUConnection.java:836) 



CAUSE

The first 2 symptoms are due to APAR RS01418 [http://www.ibm.com/support/docview.wss?uid=swg1RS01418] in ODM v8.5.0, and occur if the user is not mapped to resAdministrators role. 

The third symptom can occur if there are problems with the Java XOM.


DIAGNOSING THE PROBLEM
 

Check the version of ODM [http://www.ibm.com/support/docview.wss?uid=swg21400738] you are working with.

Review the logs of the server which hosts RES. They might show similar errors to the following:

Object model GBRMO0003E: LinkageError JVMCFRE003 bad major version; 
class=foo/Bar, offset=6 while trying to load the class foo.Bar 

or

com.ibm.rules.res.xu.engine.cre.internal.RulesetParseException: 
GBRXU0014E: The parsing of the ruleset /MyRuleApp/1.0/MyRuleset/1.0 
failed
Problem occurred loading translation: Error when translating 
task "MyRuleFlow#mytask": Cannot translate class "foo.Bar". 

or

com.ibm.rules.res.xu.engine.cre.internal.RulesetParseException: The parsing of the ruleset /MyRuleApp/1.0/MyRuleset/1.0 failed
Problem occurred loading translation: Error when translating parameter"myParam": Cannot translate class "foo.Bar".

or

com.ibm.rules.res.xu.engine.cre.internal.RulesetParseException: The parsing of the ruleset /MyRuleApp/1.0/MyRuleset/1.0 failed 
Problem occurred loading translation: Error when translating package "myRulePackage": Cannot translate class "foo.Bar". 


RESOLVING THE PROBLEM
 

1. If working with ODM 8.5.0, please upgrade to ODM v8.5.1 (which contains the fix for APAR RS01418 [http://www.ibm.com/support/docview.wss?uid=swg1RS01418]) or later, to allow users mapped to resdeployers and resmonitors roles to be able to retrieve the HTDS Description file as well. If unable to do so immediately, make sure the user is mapped to the resAdministrators role, which is mapped to the Monitor role on WebSphere Application Server.

2. Ensure that the JDK level used for compiling the Java XOM classes is the same as the JDK level of the JVM used to run the application server. For example, the XOM could be compiled with Java 7 but the application server could be using Java 6. 


Review the logs of the server to check the Java version being used. Also check the JAVA_HOME system property value. 
If using Eclipse (Rule Designer) to compile the Java XOM classes, check the workspace logs to verify the Java version being used. Note that your Java project might be using a project-specific JDK level. 

Make sure you redeploy the XOM to RES after recompiling with a different JDK. 

3. If you still see errors during HTDS WSDL generation, please refer to the technote Cannot translate class "test.myClass" [http://www.ibm.com/support/docview.wss?uid=swg21652271]. RELATED INFORMATION
#Error retrieving ruleset HTDS WSDL on RES [http://www.ibm.com/support/docview.wss?uid=swg21652271]
Viewing and managing transparent decision services [http://pic.dhe.ibm.com/infocenter/dmanager/v8r5m1/index.jsp?topic=%2Fcom.ibm.odm.dserver.rules.res.console%2Ftopics%2Ftsk_rescons_tds_downld_wsdl_wadl.html]