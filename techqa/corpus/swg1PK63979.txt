Title: IBM PK63979: PORTAL FAILS TO START ON WEBSPHERE APPLICATION SERVER IF HINDI LOCALE IS USED - United States

Text:
  A FIX IS AVAILABLE
PK63979; 6.1.0.17: Portal fails to start if Hindi locale used [http://www-01.ibm.com/support/docview.wss?uid=swg24019019]


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  Start up of the application server for Portal fails
   to start on WebSphere Application Server if the installation of
   WebSphere Application Server v6.1.0.11 and WebSphere Portal
   Server v6.1 is on a system using Hindi locale.  There are
   several log messages, but root cause seems to be that Hindi
   date/time format is not accepted in the fileRegistry.xml file.
   
   Start of the WebSphere Portal Application Server fails with the
   following errors:
   
   The startServer.log for wp_profile/WebSphere_Portal shows:
   
   [?/??/?? ??:??:??:??? EDT] 0000000a WindowsServic 1   Trying to
   new up
   WindowsService using serverName=WebSphere_Portal,
   winServiceName=null
   [?/??/?? ??:??:??:??? EDT] 0000000a ManagerAdmin  I   TRAS0018I:
   The
   trace state has changed. The new trace state is *=info.
   [?/??/?? ??:??:??:??? EDT] 0000000a AdminTool     A   ADMU0128I:
   Starting tool with the wp_profile profile
   [?/??/?? ??:??:??:??? EDT] 0000000a AdminTool     A   ADMU3100I:
   Reading
   configuration for server: WebSphere_Portal
   [?/??/?? ??:??:??:??? EDT] 0000000a AdminTool     A   ADMU3200I:
   Server
   launched. Waiting for initialization status.
   [?/??/?? ??:??:??:??? EDT] 0000000a AdminTool     A   ADMU3011E:
   Server
   launched but failed initialization. startServer.log,
   SystemOut.log(or
   job log in zOS) and other log files under
   C:\IBM\WebSphere\wp_profile\logs\WebSphere_Portal should contain
   failure information.
   
   The systemout.log for the wp_profile/WebSphere_Portal shows the
   following:
   
   [?/??/?? ??:??:??:??? EDT] 0000000a CoordinatorIm I   HMGR0206I:
   The
   Coordinator is an Active Coordinator for core group
   DefaultCoreGroup.
   [?/??/?? ??:??:??:??? EDT] 0000000a DCSPluginSing I   HMGR0005I:
   The
   Single Server DCS Core Stack transport has been started for core
   group
   DefaultCoreGroup.
   [?/??/?? ??:??:??:??? EDT] 0000000a NameServerImp A   NMSV0018I:
   Name
   server available on bootstrap port 10031.
   [?/??/?? ??:??:??:??? EDT] 0000000a exception     E
   com.ibm.ws.wim.adapter.file.was.FileData load CWWIM4507E Virtual
   member
   manager failed to read the
   'C:\IBM\WebSphere\wp_profile\config\cells\itani\fileRegistry.xml
   ' file:
   'Value '????-??-??T??:??:??.???-04:00' is not legal.
   (file:///C:/IBM/WebSphere/wp_profile/all.datagraph, 12, 79)'.
   [?/??/?? ??:??:??:??? EDT] 0000000a exception     E
   com.ibm.ws.wim.adapter.file.was.FileData load
   
   com.ibm.websphere.wim.exception.InitializationException:
   CWWIM4507E
   Virtual member manager failed to read the
   'C:\IBM\WebSphere\wp_profile\config\cells\itani\fileRegistry.xml
   ' file:
   'Value '????-??-??T??:??:??.???-04:00' is not legal.
   (file:///C:/IBM/WebSphere/wp_profile/all.datagraph, 12, 79)'.
    at
   com.ibm.ws.wim.adapter.file.was.FileData.load(FileData.java:277)
    at
   com.ibm.ws.wim.adapter.file.was.FileAdapter.initialize(FileAdapt
   er.java:
   307)
    at
   com.ibm.ws.wim.RepositoryManager.initialize(RepositoryManager.ja
   va:493)
   ...
   Caused by:
   org.eclipse.emf.ecore.resource.Resource$IOWrappedException:
   Value '????-??-??T??:??:??.???-04:00' is not legal.
   (file:///C:/IBM/WebSphere/wp_profile/all.datagraph, 12, 79)
    at
   org.eclipse.emf.ecore.xmi.impl.XMLLoadImpl.handleErrors(XMLLoadI
   mpl.java
   :80)
    at
   org.eclipse.emf.ecore.xmi.impl.XMLLoadImpl.load(XMLLoadImpl.java
   :189)
    at
   org.eclipse.emf.ecore.xmi.impl.XMLResourceImpl.doLoad(XMLResourc
   eImpl.ja
   va:179)
    at
   org.eclipse.emf.ecore.resource.impl.ResourceImpl.load(ResourceIm
   pl.java:
   1094)
    at
   org.eclipse.emf.ecore.sdo.util.SDOUtil.loadDataGraph(SDOUtil.jav
   a:1175)
    at
   com.ibm.ws.wim.adapter.file.was.FileUtils.loadFileAsDataGraph(Fi
   leUtils.
   java:85)
    at
   com.ibm.ws.wim.adapter.file.was.FileData.load(FileData.java:269)
   Caused by: java.lang.NumberFormatException:
   '????-??-??T??:??:??.???-04:00' has wrong format
    at
   org.eclipse.emf.ecore.xml.type.internal.XMLCalendar.parseIntYear
   (XMLCale
   ndar.java:815)
    at
   org.eclipse.emf.ecore.xml.type.internal.XMLCalendar.getYearMonth
   (XMLCale
   ndar.java:553)
    at
   org.eclipse.emf.ecore.xml.type.internal.XMLCalendar.getDate(XMLC
   alendar.
   java:512)
    at
   org.eclipse.emf.ecore.xml.type.internal.XMLCalendar.parseDateTim
   e(XMLCal
   endar.java:1130)
    at
   org.eclipse.emf.ecore.xml.type.internal.XMLCalendar.<init>(XMLCa
   lendar.j
   ava:176)
    at
   org.eclipse.emf.ecore.xml.type.impl.XMLTypeFactoryImpl.createDat
   eTime(XM
   LTypeFactoryImpl.java:259)
    at
   org.eclipse.emf.ecore.xml.type.impl.XMLTypeFactoryImpl.createDat
   eTimeFro
   mString(XMLTypeFactoryImpl.java:2202)
    at
   org.eclipse.emf.ecore.xml.type.impl.XMLTypeFactoryImpl.createFro
   mString(
   XMLTypeFactoryImpl.java:1608)
    at
   org.eclipse.emf.ecore.xmi.impl.XMLHelperImpl.createFromString(XM
   LHelperI
   mpl.java:1486)
    at
   org.eclipse.emf.ecore.xmi.impl.XMLHelperImpl.setValue(XMLHelperI
   mpl.java
   :1050)
    at
   org.eclipse.emf.ecore.xmi.impl.XMLHandler.setFeatureValue(XMLHan
   dler.jav
   a:2388)
   
   Further analysis would also imply that Eclipse Modeling
   Framework (EMF) does not read the date value
   from the fileRegistry.xml:
   
   Caused by: java.lang.NumberFormatException:
   '????-??-??T??:??:??.???-04:00' has wrong format
    at
   org.eclipse.emf.ecore.xml.type.internal.XMLCalendar.parseIntYear
   (XMLCale
   ndar.java:815)
   
   
   Steps to recreate:
       1. Set locale Hindi (hi_IN) on User (set English in System
          locales)
       2. Install Application Server by manul with Hindi locale
       3. Apply Application Server JDK 1.5 SR7 (PK62155 [http://www-01.ibm.com/support/docview.wss?uid=swg1PK62155]) from
          http://autojdk.rtp.raleigh.ibm.com:80/autoJDK [http://autojdk.rtp.raleigh.ibm.com:80/autoJDK]
       4. Install Portal Server Full using English PII
       5. Start Portal
   
   
   
   
   OS: Windows 2003
   Version: enterprise Edition SP2,
   WebSphere Application SServer 6.1.0.11
   
   
    
   
   

LOCAL FIX

PROBLEM SUMMARY
 *  ****************************************************************
   * USERS AFFECTED: This affects IBM WebSphere Application       *
   *                 Server version 6.1 users who are using       *
   *                 a built-in file repository of "federated     *
   *                 repository" on Hindi locale.                 *
   ****************************************************************
   * PROBLEM DESCRIPTION: WebSphere Portal fails to start if      *
   *                      Hindi locale is used.                   *
   ****************************************************************
   * RECOMMENDATION:                                              *
   ****************************************************************
   The timestamp was stored in Hindi locale in fileRegistry.xml
   which Eclipse Modeling Framework (EMF) was not able to read.
   
   
    
   
   

PROBLEM CONCLUSION
 *  The timestamp is now stored in English locale in the
   fileRegistry.xml.
   
   The fix for this APAR is currently targeted for inclusion
   in fix pack 6.1.0.19.
   Please refer to the recommended updates page for delivery
   information:
   http://www.ibm.com/support/docview.wss?rs=180&uid=swg27004980 [http://www.ibm.com/support/docview.wss?rs=180&uid=swg27004980]
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   PK63979
   
   
 * REPORTED COMPONENT NAME
   WEBSPH APP SERV
   
   
 * REPORTED COMPONENT ID
   5724J0800
   
   
 * REPORTED RELEASE
   61W
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2008-04-07
   
   
 * CLOSED DATE
   2008-04-22
   
   
 * LAST MODIFIED DATE
   2008-04-30
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

MODULES/MACROS
 *  ADAPTER  FILE
   
   
    
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   WEBSPH APP SERV
   
   
 * FIXED COMPONENT ID
   5724J0800
   
   

APPLICABLE COMPONENT LEVELS
 * R60A PSN
   UP
   
   
 * R60H PSN
   UP
   
   
 * R60I PSN
   UP
   
   
 * R60P PSN
   UP
   
   
 * R60S PSN
   UP
   
   
 * R60W PSN
   UP
   
   
 * R60Z PSN
   UP
   
   
 * R61A PSY
   UP
   
   
 * R61H PSY
   UP
   
   
 * R61I PSY
   UP
   
   
 * R61P PSY
   UP
   
   
 * R61S PSY
   UP
   
   
 * R61W PSY
   UP
   
   
 * R61Z PSY
   UP