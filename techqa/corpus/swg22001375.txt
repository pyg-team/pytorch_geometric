Title: IBM After upgrade BFI/LMT server to version 9.2.7 LDAP authentication may not work in for some older LDAP types - United States

Text:
 TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 After upgrade BigFix Inventory (BFI) or IBM License Metric Tool (LMT) server to version 9.2.7 LDAP authentication does not work, but it was working properly before the upgrade. 

SYMPTOM
After upgrade to BFI/LMT 9.2.7 users are no longer able to login to BFI/LMT server web console using domain accounts.


CAUSE
To enhance security, in BFI/LMT server version 9.2.7 the default protocol for LDAP authentication has been changed to TLS 1.2. Before the default was TLS 1 which resulted in no ability to use TLM 1.2 at all. 

This makes the TLS 1.2 to be used by default and fallback to older protocol versions in cases when during automated protocol negotiation LDAP server responds back with highest version supported protocol.

However, with older LDAP server versions, the fallback may not work properly due to the nature of LDAP responses during protocol negotiation.


ENVIRONMENT
BFI/LMT server upgraded from older version to 9.2.7



DIAGNOSING THE PROBLEM
In tema.log file, the following error can be found after upgrade (was not present before upgrade): 


com.ibm.ws.webcontainer.webapp I SRVE0292I: Servlet Message - [tema]:.[INFO] Errors from LDAP Server, e.resultCode.name=connect error


RESOLVING THE PROBLEM
 

The workaround is to change default protocol back to TLS1:

In the file 

...\lib\ldap_connection.rb

change the following line (which defines the starting TLS version for negotiation):

com.unboundid.util.ssl.SSLUtil.default_ssl_protocol = "TLSv1.2"

into:
com.unboundid.util.ssl.SSLUtil.default_ssl_protocol = "TLSv1"