Title: IBM SQL Capture fails with SQL0964C - The transaction log for the database is full during pruning. - United States

Text:
SQL0964C PRUNE CD TABLES TECHNOTE (FAQ)

QUESTION
 
Is it possible for SQL Capture to hit SQL0964C transaction log full condition when the CD tables have lots of rows to prune?


ANSWER

Yes. It is possible for capture to fail with SQL0964C if it is pruning by retention.
Normal pruning commits after every 500 rows but retention limit pruning will attempt to prune all the rows in a CD table that are older than the retention_limit.

Retention_limit is a column in the IBMSNAP_CAPPARMS table and the default is 7 days. So if subscriptions have not run for more than the retention_limit we will see retention limit pruning. 

Retention pruning should be avoided at all costs since it means that subscriptions have not run for that long and the data has not yet been applied to targets. A full refresh will be required to resynchronize the data. Other symptoms related to retention limit pruning are deadlocks (SQL0911N error) between Capture and Apply.

RELATED INFORMATION
# 




Cross reference information Segment Product Component Platform Version Edition Information Management InfoSphere Data Replication Information Management InfoSphere Replication Server