Title: IBM PM46870: SQLCODE -20411 FOR A CURSOR NOT DEFINED WITH ANY CONTINUE ATTRIBUTE - United States

Text:
z/os  A FIX IS AVAILABLE
Obtain the fix for this APAR.


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  COBOL applications prepared using the DB2 Coprocessor which
   have a cursor defined with either FETCH CONTINUE or FETCH
   CURRENT CONTINUE in them, may receive SQLCODE -20411
   SQLCODE20411 from DSNXEFCC with SQLERRD1 = 30 when a FETCH is
   issued that does not contain CONTINUE or CURRENT CONTINUE after
   a FETCH was issued that did.
   
   
    
   
   

LOCAL FIX
 *  Use the DB2 Precompiler as a workaround.
   
   
    
   
   

PROBLEM SUMMARY
 *  ****************************************************************
   * USERS AFFECTED: Users of the COBOL DB2 coprocessor for DB2   *
   *                 V9.1 for z/OS or DB2 V10.1 for z/OS using    *
   *                 FETCH WITH CONTINUE followed by FETCH or     *
   *                 FETCH CURRENT CONTINUE followed by FETCH     *
   ****************************************************************
   * PROBLEM DESCRIPTION: When using FETCH WITH CONTINUE followed *
   *                      by FETCH, or FETCH CURRENT CONTINUE     *
   *                      followed by FETCH in a COBOL            *
   *                      application and using the DB2           *
   *                      coprocessor to prepare the program,     *
   *                      SQLCODE -20411 is issued erroneously.   *
   ****************************************************************
   * RECOMMENDATION:                                              *
   ****************************************************************
   The following example illustrates the reported problem:
   
   EXEC SQL
      FETCH CURRENT CONTINUE FROM C1 INTO :MY-CLOB
   END-EXEC.
   
   ...
   EXEC SQL
      FETCH C2 INTO :MY-BIG-CLOB
   END-EXEC.
   
   At execution time, SQLCODE -20411 is issued erroneously.
   
   SQLCODE = -20411, ERROR:  A FETCH CURRENT CONTINUE OPERATION
   WAS REQUESTED FOR C2 BUT THERE IS NO PRESERVED, TRUNCATED
   DATA TO RETURN.
   SQLSTATE   = 24524 SQLSTATE RETURN CODE
   SQLERRP    = DSNXEFCC SQL PROCEDURE DETECTING ERROR
   
   With the fix, the FETCH following the FETCH CURRENT CONTINUE
   should be executed correctly if there are no other SQL errors.
   
   Additional keywords: SQLCODE20411 db2coprocessor
   
   
    
   
   

PROBLEM CONCLUSION
 *  The DB2 coprocessor is changed so that the SQLCODE -20411 will
   not be issued erroneously.
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   PM46870
   
   
 * REPORTED COMPONENT NAME
   DB2 OS/390 & Z/
   
   
 * REPORTED COMPONENT ID
   5740XYR00
   
   
 * REPORTED RELEASE
   910
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2011-08-31
   
   
 * CLOSED DATE
   2011-09-26
   
   
 * LAST MODIFIED DATE
   2011-11-02
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
    UK72268 UK72269
   
   

MODULES/MACROS
 *  DSNHTARY
   
   
    
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   DB2 OS/390 & Z/
   
   
 * FIXED COMPONENT ID
   5740XYR00
   
   

APPLICABLE COMPONENT LEVELS
 * RA10 PSY UK72268 [HTTPS://WWW14.SOFTWARE.IBM.COM/WEBAPP/SET2/ORDERMEDIA/SHOPCART?PTFS=UK72268]
   UP11/10/12 P F110
   
   
 * R910 PSY UK72269 [HTTPS://WWW14.SOFTWARE.IBM.COM/WEBAPP/SET2/ORDERMEDIA/SHOPCART?PTFS=UK72269]
   UP11/10/12 P F110
   
   

FIX IS AVAILABLE
 * SELECT THE PTF APPROPRIATE FOR YOUR COMPONENT LEVEL. YOU WILL BE REQUIRED TO SIGN IN. DISTRIBUTION ON PHYSICAL MEDIA IS NOT AVAILABLE IN ALL COUNTRIES.