Title: IBM Sterling Integrator SFTP Server not responding to SFTP Client List commands - United States

Text:
STERLINGNFX TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 Sterling Integrator SFTP Server not responding to SFTP Client List commands 

SYMPTOM


Using Sterling Integrator 5.0 and build 5008. The Sterling Integrator SFTP Server not responding to SFTP Client List commands. The SFTP Client times out waiting on a reply from Sterling Integrator SFTP Server.

Error Message No exceptions were observed in SFTP Server log.


RESOLVING THE PROBLEM


Enabled verbose logging for SFTP server and Mailbox log. Notice in Mailbox Log frequent occurrences of a query on the MBX_MESSAGE table. The mailbox contains 3600 messages. The customer is using Oracle data base. Using >Operations>System>Support Tools>SQL Manager ran this query:

SELECT b.sid, b.serial#, b.username, b.osuser, b.status,b.machine, a.buffer_gets bgets, a.disk_reads reads, a.executions execs, a.disk_reads/decode(a.executions,0,1,a.executions) read_exec, a.hash_value,a.sql_text FROM v$sqlarea a, v$session b WHERE (b.status = 'ACTIVE' OR b.status = 'KILLED') AND b.sql_hash_value = a.hash_value AND b.sql_address = a.address order by 10

The query returned 66 results. The Read Exec for some rows was 1248.0000. All rows show the same query as was found in the mailbox log.

Engaged the customer's DBA team. The DBA report that the Oracle Optimizer was using a 'good' execution plan for all queries but one. The query using the 'bad' execution plan was consuming the majority of the resources. The DBA directed the query and all subsequent queries to use the 'good' plan. Now SFTP List function are completing and showing messages. The SFTP List is no longer timing out.



 

HISTORICAL NUMBER
 NFX11701 

PRODUCT ALIAS/SYNONYM
 

Escalation ID


00341247