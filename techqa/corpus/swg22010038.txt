Title: IBM WTX is reading messages from IBM MQ out of sequence - United States

Text:
 TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 A system of maps deployed to IBM WebSphere Transformation Extender (WTX) / IBM Transformation Extender (ITX) Launcher reading messages from IBM WebSphere MQ is not reading / transforming those messages in First-In-First-Out (FIFO) order as expected. 

SYMPTOM
One of the WTX 8.4.1 maps that read messages from a IBM MQ queue is reading messages out of sequence which is causing issues.


CAUSE
The default setting of Integration Flow Designer was used to create the .msl, which defaults to multi-threaded.

ENVIRONMENT
WTX 8.4.1 running Launcher with IBM MQ. However, this discussion pertains to all WTX/ITX levels and platforms. 

DIAGNOSING THE PROBLEM
The first thing we need to understand is whether the map reading the messages is running multi-threaded. Perhaps the new hardware is running faster, hence executing maps more quickly, hence would be more likely to expose the reported behavior.

The next would be to determine if the MQ Listener is detecting the new messages in the order they are committed. And, whether the messages are being committed in the order you expect. The other possible issue is that the process that is putting the messages on the queue is also multi-threading which would cause the messages to be committed out of order.

RESOLVING THE PROBLEM
The IFD setting for "Max concurrent map instances" default is "0", which means as many as possible. MaxThreads in dtx.ini file can also limit this. However, changing the dtx.ini would be a system wide change. Hence, we recommend changing the IFD "Max concurrent map instances" to "1". However, be sure to backup any existing .msd and .msl files before making any changes. Also note that you will need to generate and deploy your .msl file along with restarting the Launcher.