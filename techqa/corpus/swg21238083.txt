Title: IBM ICM query: No built-in means to sort by entity type - United States

Text:
SORTBY(@COMPONENTTYPEID); COMPONENTTYPEID; ITEMTYPEID; Sortby Component Type; Sortby Item Type; Sort by component type; sort by type; sortby type; sort by item type; sort by component type; sortby view; sort by view TECHNOTE (FAQ)

QUESTION
 Can I sort query results by the component type, item type, view type, or any entity type so that my results come back grouped by entity type? For example, can I sort by COMPONENTTYPEID, ITEMTYPEID, ViewName, or ViewID? For example, I can sort by COMPONENTID and ITEMID, but it fails when I try COMPONENTTYPEID or ITEMTYPEID. 

CAUSE
There is no built-in means to sort results by Component Type, Item Type, View Type, or any other Entity Type. Although you can sort any set of root components by ITEMID or any set of components in a query result by COMPONENTID, there is no built-in equivalent of sorting by COMPONENTTYPEID or ITEMTYPEID. 

When you try to add "SORTBY(@COMPONENTTYPEID)", you receive a DKQueryException reporting "DGL7089A: Unknown attribute name COMPONENTTYPEID". This occurs because there is no such public attribute defined in the system. Even if you add "COMPONENTTYPEID" yourself as an attribute definition in the system, although you will receive a different error (similar to the error explained for ITEMTYPEID next), it does not belong to all component type definitions in the system and would not be set by the system automatically. (unless you add COMPONENTTYPEID to all component types and your application could always set and maintain the correct value). 

When you try to add "SORTBY(@ITEMTYPEID)" or similarly with ViewName or ViewID, you receive a DKQueryException reporting "DGL5000A: Sortby expression must evaluate to a single value". This is because all possible qualifying item types and component types in your results are not all defined to have an ITEMTYPEID attribute (or ViewName, ViewID, or equivalent). You can only sort by attributes that exist in all entity types that could appear in your results based on any type restrictions specified in your query. ITEMTYPEID, ViewName, and ViewID are predefined in the system as attribute definitions used only by a select few predefined item type definitions. These predefined attributes do not automatically belong to all item types or component types. Even if you added them to all item types or component types, the values would not be automatically managed by the system. 

By default, you cannot sort results by component type, item type, view type, or any other entity type. You cannot sort a query by COMPONENTTYPEID or ITEMTYPEID. 

Queries that include "SORTBY(@COMPONENTTYPEID)" return a DKQueryException, "DGL7089A: Unknown attribute name COMPONENTTYPEID" because there is no such public attribute defined. Adding "COMPONENTTYPEID" as an attribute definition returns a different error because the attribute does not belong to all component type definitions and is not set automatically. 

Queries that include "SORTBY(@ITEMTYPEID)" as well as queries that include sorting by ViewName or ViewID also return a DKQueryException, "DGL5000A: Sortby expression must evaluate to a single value" because all possible qualifying item types and component types are not defined as having the ITEMTYPEID, ViewName, or ViewID, respectively. Sorts only work with attributes that exist in all entity types that could possibly be returned in query results. Adding these attributes to all item types or component types is not a valid workaround.



ANSWER
Add your own user-defined attribute to all item types and/or component types. Then, ensure that the correct value is always set and maintained for all items (and child components if sorting children by child component type) by all applications that create or update items in the system. Then you could sort by your own user-defined attribute.





Cross reference information Segment Product Component Platform Version Edition Enterprise Content Management Content Manager Usage AIX, Linux, Solaris, UNIX, Windows 2000, Windows NT, Windows XP, Windows 2003 8.1, 8.2, 8.3 All Editions