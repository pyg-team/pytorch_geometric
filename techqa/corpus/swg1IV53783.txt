Title: IBM IV53783: IEM SHOULD SUPPORT A WAY TO BYPASS THE PROXY SERVER FOR LOCAL HTTP REQUESTS - United States

Text:
 SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS FIXED IF NEXT.
    
   
   

ERROR DESCRIPTION
 *  The issue occurs with Fixlets/Tasks downloading file local to
   server.
   External site fixlets and none download fixlets/tasks are fine
   
   Customer configured proxy according the following steps :
   ----------------------------------------------------------------
   
   On the TEM Server, open the Registry and navigate to
   HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\BigFix\EnterpriseClient\
   Settings\Client\_BESGather_Comm_UseDownloadService
    and set the "value" to "0"
   
   Open a command prompt and navigate to the BES Server directory.
   
   Run the command \Program Files (x86)\BigFix Enterprise\BES
   Server\BESAdmin.exe
   /setproxy /user:<username>  /pass:<password> (Make
   sure you use the same user that has proxy settings in Internet
   Explorer or this
   will not work)
   
   In the registry navigate to the key:
   HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\BigFix\Enterprise
   Server\Proxy
   and enter your proxy server's IP address and port as follows:
   
   Proxy  http://proxyserver:port/  where the value proxyserver is
   the
   proxy server's IP address or DNS name.   port is remote proxy
   server's
   port.
   
   For example:
   
   Proxy  REG_SZ    http://10.1.50.1:80/     The proxy server's IP
   address is 10.1.50.1 and port is 80.
   
   Restart the BES Root Server Service and BES Gather Service.
   
   ----------------------------------------------------------------
   
   Performed actions :
   
   1. If we open a IE browser and issue the url
   http://127.0.0.1:52311/Uploads/ITM/ITM_622_FP2_Win64.exe it
   attempts to
   download the file
   
   2. The AV directories exclusion hasn't changed from before the
   TEM
   Server was upgraded to IEM
   
   3. IEM Diagnostics Tool checks out fine
   
   4. IE browser proxy settings have been configured to bypass
   local addresses.
   
   5. Setting NO_PROXY env variable with locahost,127.0.0.1 values
   did not help.
   The reason we suggested this as a test is that we now use CURL
   libraries for
   proxy with v9 and this is a standard CURL configuration
   method for bypassing proxy
   
   6. Based on wireshark capture it seems that the HTTP request for
   the URL
   http: //127.0.0.1:52311/Uploads/ITM/ITM_622_FP2_Win64.exe is
   re-directed
   to the IP address 129.35.95.37 ( proxy IP).
   
   We would expect that the same HTTP request  was handled from the
   IEM
   server itself but for some reason  IEM Server  is not bypassing
   HTTP requests for local addresses.
   
   
    
   
   

LOCAL FIX
 *  For  customers who are having issues bypassing the proxy for
   internal downloads, you should be able to use the following
   configuration, unless they
   have an authenticating proxy that requires entering a user and
   password in the
   browser to get through the proxy.  For authenticating proxies,
   they will require the fix released with this APAR
   
   1. Clear the Proxy, ProxyPass, ProxyUser registry values from
   [HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\BigFix\Enterprise
   Server\Proxy]
   2. Run BESAdmin /setproxy /user:<username>  /pass:<password> (do
   NOT set the
   Proxy key in the registry)
   3. Login as the user specified in step 2 and configure IE
   settings with correct
   proxy URL and bypass exceptions including 127.0.0.1 and any
   internal servers
   (*.ibm.com or equivalent)
   4. Set
   [HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\BigFix\EnterpriseClient
   \Settings\Client\_BESGather_Comm_UseDownloadService]
   value = 1
   5. Set BESGather service to run as the user specified on
   /setproxy command (and
   with IE proxy settings) and restart
   6. Restart BESRootServer service and test downloads
   
   
    
   
   

PROBLEM SUMMARY
 *  This issue will be addressed in the next release of IBM Endpoint
   Manager.
   
   General availability Q1 2014 (release date subject to change).
   
   
    
   
   

PROBLEM CONCLUSION

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   IV53783
   
   
 * REPORTED COMPONENT NAME
   TIV EP MGR SERV
   
   
 * REPORTED COMPONENT ID
   5725C43SV
   
   
 * REPORTED RELEASE
   90W
   
   
 * STATUS
   CLOSED FIN
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2014-01-09
   
   
 * CLOSED DATE
   2014-01-16
   
   
 * LAST MODIFIED DATE
   2014-01-16
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION

APPLICABLE COMPONENT LEVELS
 * R90W PSY
   UP