Title: IBM Omnifind 9.1.0 crashes on search when there is an increased load - United States

Text:
Omnifind 9.1.0; heapdump; Out of Memory; REST API TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 "Out of Memory" errors are thrown when the system load increases, both in search requests and indexed documents. The search is performed on a custom application using a REST API. 

SYMPTOM
The increased load will cause the REST API to return zero results.


Javacore log files show the following Out Of Memory Error:

0SECTION TITLE subcomponent dump routine

NULL ===============================

1TISIGINFO Dump Event "systhrow" (00040000) Detail "java/lang/OutOfMemoryError" received 
1TIDATETIME Date: 2015/11/16 at 13:07:25
1TIFILENAME Javacore filename: /collections/esdata/logs/javacore.20151116.130720.8175.0009.txt
1TIREQFLAGS Request Flags: 0x81 (exclusive+preempt)
1TIPREPSTATE Prep State: 0x4 (exclusive_vm_access)

base of process ID ( 8175 ) via ccl_doctribicap1_0.log file the failing session is col_normativa.searcher.node1

other javacore files also show that the issue is with col_normativa.searcher.node1 session:

Nov 16, 2015 12:57:10 PM com.ibm.es.ccl.server.responders.sys.SessionAttachMessageHandler doMessage
INFO: Session "col_normativa.searcher.node1" was attached PID=8175



CAUSE
Heapdump size is too small to cope with the increased load and is causing the errors.


DIAGNOSING THE PROBLEM
Analyse the Javacore log files for the above error.



RESOLVING THE PROBLEM
 

 * Increase a max_heap for this session according to col_normativa_config.ini config files:
   
   session4.hard_max_heap=10,8192
   session4.id=col_normativa.searcher.node1
   session4.max_heap=2048
   session4.nodeid=node1
   
   Good practice will be to increase max_heap for col_normativa.searcher.node2 from 1536 to 3096 as well. Try to keep both those numbers the same:
   session5.id=col_normativa.searcher.node2
   session5.max_heap=1536
   
   System requires sufficient RAM to cope with this increased heap size.
   
 * After increasing max_heap you need to restart OmniFind (all nodes):
   esadmin system stopall
   esadmin system startall
   
 * Also another suggestion is to install the latest Fix Pack for IBM Omnifind.