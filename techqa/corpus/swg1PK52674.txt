Title: IBM PK52674: FAILED SSL HANDSHAKE MAY RESULT IN A SOCKET LEAK - United States

Text:
z/os  FIXES ARE AVAILABLE
Java SDK 1.5 SR8 Cumulative Fix for WebSphere Application Server [http://www-01.ibm.com/support/docview.wss?uid=swg24020073]
Java SDK 1.5 SR8 Cumulative Fix for WebSphere Application Server [http://www-01.ibm.com/support/docview.wss?uid=swg24021203]
Java SDK 1.5 SR10 Cumulative Fix for WebSphere Application Server [http://www-01.ibm.com/support/docview.wss?uid=swg24024201]
6.1.0.31: Java SDK 1.5 SR11 Cumulative Fix for WebSphere Application Server [http://www-01.ibm.com/support/docview.wss?uid=swg24026453]
6.1.0.33: Java SDK 1.5 SR12 FP1 Cumulative Fix for WebSphere [http://www-01.ibm.com/support/docview.wss?uid=swg24027786]
6.1.0.29: Java SDK 1.5 SR11 Cumulative Fix for WebSphere Application Server [http://www-01.ibm.com/support/docview.wss?uid=swg24025191]
6.1.0.35: Java SDK 1.5 SR12 FP2 Cumulative Fix for WebSphere [http://www-01.ibm.com/support/docview.wss?uid=swg24028574]
6.1.0.37: Java SDK 1.5 SR12 FP3 Cumulative Fix for WebSphere [http://www-01.ibm.com/support/docview.wss?uid=swg24029525]
6.1.0.39: Java SDK 1.5 SR12 FP4 Cumulative Fix for WebSphere Application Server [http://www-01.ibm.com/support/docview.wss?uid=swg24030426]
6.1.0.41: Java SDK 1.5 SR12 FP5 Cumulative Fix for WebSphere Application Server [http://www-01.ibm.com/support/docview.wss?uid=swg24031035]
6.1.0.43: Java SDK 1.5 SR13 Cumulative Fix for WebSphere Application Server [http://www-01.ibm.com/support/docview.wss?uid=swg24031963]
6.1.0.45: Java SDK 1.5 SR14 Cumulative Fix for WebSphere Application Server [http://www-01.ibm.com/support/docview.wss?uid=swg24033270]
6.1.0.47: WebSphere Application Server V6.1 Fix Pack 47 [http://www-01.ibm.com/support/docview.wss?uid=swg24035508]
6.1.0.47: Java SDK 1.5 SR16 Cumulative Fix for WebSphere Application Server [http://www-01.ibm.com/support/docview.wss?uid=swg24035649]
Obtain the fix for this APAR.


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  Under certain conditions, the SSL channel will leak a socket
   file descriptor. The FFDC will record an entry id 507 from the
   SSLQueuedHandshake class.
   
   Stack Dump=javax.net.ssl.SSLException: Handshake terminated SSL
   engine: CLOSED
     at com.ibm.ssl.channel.impl.
       SSLUtils.handleHandshake(SSLUtils.java:808)
     at com.ibm.ssl.channel.impl.
       SSLQueuedHandshake.run(SSLQueuedHandshake.java:81)
   
   
    
   
   

LOCAL FIX

PROBLEM SUMMARY
 *  ****************************************************************
   * USERS AFFECTED: All users of WebSphere Application Server    *
   *                 V6.1 for z/OS using SSL channel.             *
   ****************************************************************
   * PROBLEM DESCRIPTION: Under certain conditions, the SSL hand  *
   *                      shake will fail and leak a socket. FFDC *
   *                      shows the SSLQueuedHandshake class      *
   *                      recording a "handshake terminated"      *
   *                      exception.                              *
   ****************************************************************
   * RECOMMENDATION:                                              *
   ****************************************************************
   In the control region, the SSL handshake work will attempt to
   complete on non-ACRW threads. If this queued handshake event
   receives an SSL handshake failure, then it is possible for the
   queued handshake class to mishandle the error and not properly
   close the socket at that point.
   
   
    
   
   

PROBLEM CONCLUSION
 *  The queued handshake class will now properly notify the SSL
   channel code of the handshake failure in this condition. The
   handshake failure is then handled gracefully, according to the
   individual scenario. The initial handshake of a socket will
   result in the socket closure, while a renegotiation midstream
   will hand the read or write IO failure back to the channel
   user such as HTTP channel, or DCS channel, etc.
   
   APAR PK52674 is currently targeted for inclusion in Service
   Level (Fix Pack) 6.1.0.13 of WebSphere Application Server V6.1
   for z/OS.
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   PK52674
   
   
 * REPORTED COMPONENT NAME
   WEBSPHERE FOR Z
   
   
 * REPORTED COMPONENT ID
   5655I3500
   
   
 * REPORTED RELEASE
   610
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2007-09-11
   
   
 * CLOSED DATE
   2007-10-20
   
   
 * LAST MODIFIED DATE
   2007-12-03
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   WEBSPHERE FOR Z
   
   
 * FIXED COMPONENT ID
   5655I3500
   
   

APPLICABLE COMPONENT LEVELS
 * R500 PSN
   UP
   
   
 * R601 PSN
   UP
   
   
 * R610 PSY UK31212 [HTTPS://WWW14.SOFTWARE.IBM.COM/WEBAPP/SET2/ORDERMEDIA/SHOPCART?PTFS=UK31212]
   UP07/11/22 P F711
   
   

FIX IS AVAILABLE
 * SELECT THE PTF APPROPRIATE FOR YOUR COMPONENT LEVEL. YOU WILL BE REQUIRED TO SIGN IN. DISTRIBUTION ON PHYSICAL MEDIA IS NOT AVAILABLE IN ALL COUNTRIES.