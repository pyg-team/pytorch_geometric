Title: IBM PI84763: IN IBM RTC 6.0.1 EE, EXCESSIVE LOG ENTRIES OF CRJAZ1033I AND CRRTC1033E ARE GENERATED FROM A DELETED BUILD RESULT - United States

Text:
z/os  A FIX IS AVAILABLE
Rational Team Concert 6.0.5 [http://www-01.ibm.com/support/docview.wss?uid=swg24044342]


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  In IBM Rational Team Concert Enterprise Extensions, after
   applying 6.0.1 ifix013, CCM.logs are generating excessive
   entries of CRRTC1033E and CRJAZ1033I when a build result is
   deleted that includes a build report with details that now can
   not be parsed.
   
   2017-06-28 07:01:01,898 [                  Thread-15120]  WARN
   y.maintenance.BuildMapBuildResultDeleteParticipant  - Caught
   exception attempting to parse contents of build or promotion
   report for cleanup
   org.xml.sax.SAXParseException: The reference to entity
   "CBLDB2CMPDFLT" must end with the ';' delimiter.
   	at
   org.apache.xerces.util.ErrorHandlerWrapper.createSAXParseExcepti
   on(Unknown Source)
   	at
   org.apache.xerces.util.ErrorHandlerWrapper.fatalError(Unknown
   Source)
   ...
   	at org.apache.xerces.jaxp.SAXParserImpl.parse(Unknown Source)
   	at
   com.ibm.team.enterprise.build.buildmap.compatability.maintenance
   .BuildMapBuildResultDeleteParticipant$1.run(BuildMapBuildResultD
   eleteParticipant.java:82)
   	at java.lang.Thread.run(Thread.java:809)
   2017-06-28 07:01:02,902 [ccm: AsynchronousTaskRunner-5 @@ 07:00]
   ERROR com.ibm.team.build                                  -
   CRRTC3011E: The contributions to a build,
   _Qpu9kQtXEeOks9obGf8jQQ, could not be pruned by the pruning
   extension,
   com.ibm.team.enterprise.build.buildmap.maintenance.BuildMapBuild
   ResultDeleteParticipant, because an error occurred.
   com.ibm.team.repository.common.InternalRepositoryException:
   CRJAZ1033I Failed to fetch content _mTFkQAtaEeOtLI0HenwcLQ.
   	at
   com.ibm.team.repository.service.internal.RdbRepositoryDataMediat
   or.fetchContent(RdbRepositoryDataMediator.java:1406)
   	at
   com.ibm.team.repository.service.internal.ContentService.doRetrie
   veContent(ContentService.java:1408)
   	...
   	at
   com.ibm.team.enterprise.build.buildmap.compatability.maintenance
   .BuildMapBuildResultDeleteParticipant.doDelete(BuildMapBuildResu
   ltDeleteParticipant.java:98)...
   	at
   com.ibm.team.build.internal.service.delete.BuildResultContributi
   onsPruner.deleteBuildResultContributions(BuildResultContribution
   sPruner.java:212)
   	at
   com.ibm.team.build.internal.service.delete.BuildResultContributi
   onsPruner.deleteBuildResultContributions(BuildResultContribution
   sPruner.java:167)
   	at
   com.ibm.team.build.internal.service.delete.BuildResultContributi
   onsPruner.prune(BuildResultContributionsPruner.java:133)
   	at
   com.ibm.team.build.internal.service.InternalTeamBuildService$1Pr
   uneResultsRunnable.run(InternalTeamBuildService.java:240)
   	at
   com.ibm.team.build.internal.service.AbstractTeamBuildService.run
   WithoutException(AbstractTeamBuildService.java:314)
   	at
   com.ibm.team.build.internal.service.InternalTeamBuildService.pru
   neBuildResults(InternalTeamBuildService.java:253)
   ...
   Caused by:
   com.ibm.team.repository.common.InternalRepositoryException:
   CRJAZ2713E Failed to move the content to an output stream for
   the content "StoredContent(_mTFkQAtaEeOtLI0HenwcLQ, text/xml,
   5355, None, HashCode(0x39873fe2))".
   	at
   com.ibm.team.repository.service.internal.ContentService$ContentD
   irectToStream.receiveContent(ContentService.java:2323)
   	at
   com.ibm.team.repository.service.internal.db.filestorage.ContentS
   torage.visitContentById(ContentStorage.java:344)
   	at
   com.ibm.team.repository.service.internal.RdbRepositoryDataMediat
   or.fetchContent(RdbRepositoryDataMediator.java:1397)
   	... 86 more
   Caused by: java.io.IOException: Pipe closed
   	at
   java.io.PipedInputStream.checkStateForReceive(PipedInputStream.j
   ava:273)
   		... 88 more
   
   In the 10 MB split CCM with an original size of 50 MB, there are
   847 occurrences of this information message.
   
   To recreate:
   1. Open a Enterprise Extensions build result.
   2. Remove the buildReport.xml attached.
   3. Attach a buildReport.xml that has some specific input build
   file that cannot be parsed such as
   <inputs:buildFile>&W</inputs:buildFile>.
   4. Delete the build result.
   5. Wait for 15 minutes and review the ccm log.
   
   Defect:
   https://jazz.net/jazz/web/projects/Rational%20Team%20Concert#act
   ion=com.ibm.team.workitem.viewWorkItem&id=427371 [https://jazz.net/jazz/web/projects/Rational%20Team%20Concert#action=com.ibm.team.workitem.viewWorkItem&id=427371]
   
   
    
   
   

LOCAL FIX
 *  None - recycle and clean up logs before they exceed space
   limitations
   Log settings can be changed to wrap and be limited to a specific
   number and size in log4j.properties for each application.
   
   
    
   
   

PROBLEM SUMMARY
 *  See Jazz Work Item 442767 on jazz.net
   
   
    
   
   

PROBLEM CONCLUSION
 *  Fixed in 6.0.4 iFix005 Dev + Validation
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   PI84763
   
   
 * REPORTED COMPONENT NAME
   JAZZ TEAM SRVR
   
   
 * REPORTED COMPONENT ID
   5724V8210
   
   
 * REPORTED RELEASE
   601
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt / Xsystem
   
   
 * SUBMITTED DATE
   2017-07-19
   
   
 * CLOSED DATE
   2017-11-14
   
   
 * LAST MODIFIED DATE
   2017-11-14
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   JAZZ TEAM SRVR
   
   
 * FIXED COMPONENT ID
   5724V8210
   
   

APPLICABLE COMPONENT LEVELS
 * R604 PSN
   UP