Title: IBM IZ68805: THE WEBSPHERE MQ 6.0 COMMAND SERVER ON AIX STOPS RESPONDING AND SOME APPLICATIONS RECEIVE REASON CODE 2149 (MQRC_PCF_ERROR) - United States

Text:
  FIXES ARE AVAILABLE
WebSphere MQ V7.0.1 for i5/OS Fix Pack 7.0.1.3 [http://www-01.ibm.com/support/docview.wss?uid=swg24026933]
WebSphere MQ V7.0 Fix Pack 7.0.1.3 [http://www-01.ibm.com/support/docview.wss?uid=swg24026932]
WebSphere MQ V6.0 Fix Pack 6.0.2.10 [http://www-01.ibm.com/support/docview.wss?uid=swg24027195]
WebSphere MQ V6.0 for iSeries Fix Pack 6.0.2.10 [http://www-01.ibm.com/support/docview.wss?uid=swg24027197]


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  The WebSphere MQ 6.0 command server on AIX stops responding and
   some applications receive reason code 2149 (MQRC_PCF_ERROR).
   The command server may appear to enter a hang state where it no
   longer responds to applications or even to 'endmqcsv -i', but
   SYSTEM.COMMAND.ADMIN.QUEUE is shown to be open for input.
   
   
    
   
   

LOCAL FIX
 *  Restart queue manager
   
   
    
   
   

PROBLEM SUMMARY
 *  ****************************************************************
   USERS AFFECTED:
   This is a very small timing window in the MQ wait/post logic on
   AIX. This problem could hypothetically affect any MQ user on
   AIX.
   
   Platforms affected:
   AIX
   
   ****************************************************************
   PROBLEM SUMMARY:
   POWER CPU's use a relaxed memory ordering model, and memory
   fences need to be implemented to ensure the correct ordering of
   updates in a multi-processor system.
   
   There is an optimized flow through the MQ wait/post logic in the
   case where an event is posted before the wait is issued. There
   is a very small timing window on this path where a waiter can
   see a Post without an export fence having been issued in the
   posting task, thereby potentially making only a subset of the
   work done by the posting task visible to the waiting task.
   
   
    
   
   

PROBLEM CONCLUSION
 *  The necessary export fence has been added to ensure that all
   of the work performed by the posting task is visible to any
   task that subsequently exits the wait.
   
   ---------------------------------------------------------------
   The fix is targeted for delivery in the following PTFs:
   
                      v6.0
   Platform           Fix Pack 6.0.2.10
   --------           --------------------
   AIX                U832558
   
                      v7.0
   Platform           Fix Pack 7.0.1.3
   --------           --------------------
   AIX                tbc_p700_0_1_3
   
   The latest available maintenance can be obtained from
   'WebSphere MQ Recommended Fixes'
   http://www-1.ibm.com/support/docview.wss?rs=171&uid=swg27006037 [http://www-1.ibm.com/support/docview.wss?rs=171&uid=swg27006037]
   
   If the maintenance level is not yet available, information on
   its planned availability can be found in 'WebSphere MQ
   Planned Maintenance Release Dates'
   http://www-1.ibm.com/support/docview.wss?rs=171&uid=swg27006309 [http://www-1.ibm.com/support/docview.wss?rs=171&uid=swg27006309]
   ---------------------------------------------------------------
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   IZ68805
   
   
 * REPORTED COMPONENT NAME
   WMQ AIX V6
   
   
 * REPORTED COMPONENT ID
   5724H7201
   
   
 * REPORTED RELEASE
   600
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2010-01-27
   
   
 * CLOSED DATE
   2010-02-16
   
   
 * LAST MODIFIED DATE
   2010-02-16
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   WMQ AIX V6
   
   
 * FIXED COMPONENT ID
   5724H7201
   
   

APPLICABLE COMPONENT LEVELS
 * R600 PSY
   UP