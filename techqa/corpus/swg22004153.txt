Title: IBM Even though I reset password, my account is locked before reaching max-login-failures. - United States

Text:
max-login-failures; login-failures-persistent TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 I submit wrong password, for example, three times, then I ask administrator to reset my password. After being reset the password, my account is locked when I submit wrong password only 2 times, even though max-login-failures is 5. 

CAUSE
When login-failures-persistent=yes, password failure count is recorded in LDAP. 

Even if you modify a user's password using pdadmin command, password failure count on LDAP will not be reset.


RESOLVING THE PROBLEM
You need to remove secPwdFailures attribute from user's entry. 

1. To remove the attibute, you need to know the DN of ISAM user information. 

Here is a sample ldapsearch. In this case, the user name is 'ppol':
% idsldapsearch -h <ldap host> -D cn=root -w password -b "" -s sub 'principalname=ppol'
principalName=ppol,cn=Users,secAuthority=Default,o=ibm
objectclass=secUser
objectclass=eUser
objectclass=cimManagedElement
objectclass=top
secAuthority=Default
secLoginType=Default:LDAP
principalName=ppol
secUUID=ef8a4234-3523-11e7-a0ad-00215ea30a21
secHasPolicy=FALSE
secDomainId=Default%ppol
secDN=cn=ppol,ou=users,o=ibm
secPwdLastChanged=20170512073801.0Z
secPwdValid=TRUE
secAcctValid=TRUE
secPwdFailures=1
secPwdLastFailed=20170531045913.0Z 

 

As you can see above, secPwdFailures=1. This attribute will not be reset, even if you modify password using pdadmin. 

2. create a ldif file. use the DN which collected in #1. 

# cat pwdreset.ldif
dn: principalName=ppol,cn=Users,secAuthority=Default,o=ibm
changetype: modify
delete: secPwdFailures 

 

3. use ldapmodify with the ldif 

# cat pwdreset.ldif | idsldapmodify -h <ldap host> -D cn=root -w password 



PRODUCT ALIAS/SYNONYM
 ISAM