Title: IBM PK69407: THEME CUSTOMIZER CANNOT HANDLE IMAGES WITH SPACES CORRECTLY - United States

Text:
 SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  If you use an image with a space or other special character in
   it, the theme customizer does not escape this and will cause the
   html to not render correctly and there for a broken theme,
   
   
    
   
   

LOCAL FIX
 *  Here is the theme recovery procedure that worked in this case
   (as
   described in the referenced post - credit to Michael Harris):
   
   Actually, it's easier in this case to export the theme policies,
   blank
   out the URI to the logo graphic, and then re-import.
   
   To export, run this (change paths as appropriate for unix):
   
   C:\PortalServer\bin\xmlaccess -user wpsadmin -password wpsadmin
   -url
   http://localhost:10040/wps/config/ -in
   C:\ExportThemePolicies.xml
   
   Where ExportThemePolicies.xml looks like this:
   
   <?xml version="1.0" encoding="UTF-8"?>
   <request xsi:noNamespaceSchemaLocation="PortalConfig_1.4.xsd"<br
   />
   create-oids="true" type="export"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
   
   <portal action="locate">
   <policy-node action="export" label="WebPage" type="theme"
   path="">
   <url>file:///C:/ThemePolicies.xml</url>
   </policy-node>
   </portal>
   </request>
   
   This will export all theme policies to the file
   C:\ThemePolicies.xml.
   Then copy ThemePolicies.xml to FixedThemePolicies.xml and edit
   FixedThemePolicies.xml.
   
   Search for your broken graphic name. You should see it in an
   element
   that looks something like this:
   
   <policyValue Name="bannerTitleGraphic" <br
   />Factory="com.ibm.wps.policy.parse.StringFactory" >
   <value>themeGraphic:policy:filePath:SITA SUEZ Logo -
   Small.jpg</value>
   </policyValue>
   
   Blank out the value so that it looks like this:
   
   <policyValue Name="bannerTitleGraphic" <br
   />Factory="com.ibm.wps.policy.parse.StringFactory" >
   <value></value>
   </policyValue>
   
   Then run this command to import the updated policy information:
   
   C:\PortalServer\bin\xmlaccess -user wpsadmin -password wpsadmin
   -url
   http://localhost:10040/wps/config/ -in
   C:\ImportFixedThemePolicies.xml
   
   Where ImportFixedThemePolicies.xml looks like this:
   
   <?xml version="1.0" encoding="UTF-8"?>
   <request xsi:noNamespaceSchemaLocation="PortalConfig_1.4.xsd"<br
   />
   create-oids="true" type="update"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
   
   <portal action="locate">
   <policy-node action="update" label="WebPage" type="" path="">
   <url>file:///C:/FixedThemePolicies.xml</url>
   </policy-node>
   </portal>
   </request>
   
   
   Please note that when you have completed these instructions, you
   have
   not removed the graphic from the policy. You have only reset the
   logo to
   blank. The graphic will still exist in the policy.
   
   To remove the logo graphic and automatically clean up any
   references to
   the graphic, open the Theme Customizer and attempt to select a
   graphic
   (it doesn't matter which one). When you get the list of graphics
   in the
   theme policy, delete the graphic.
   
   
    
   
   

PROBLEM SUMMARY
 *  Uploading an image file with space in name breaks theme style
   
   
    
   
   

PROBLEM CONCLUSION

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   PK69407
   
   
 * REPORTED COMPONENT NAME
   WEBSPHERE PORTA
   
   
 * REPORTED COMPONENT ID
   5724E7600
   
   
 * REPORTED RELEASE
   610
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2008-07-22
   
   
 * CLOSED DATE
   2008-08-22
   
   
 * LAST MODIFIED DATE
   2008-08-22
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   WEBSPHERE PORTA
   
   
 * FIXED COMPONENT ID
   5724E7600
   
   

APPLICABLE COMPONENT LEVELS
 * R610 PSY
   UP