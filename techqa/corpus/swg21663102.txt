Title: IBM Domino agent - KGB5041l message in Server Availability workspace - United States

Text:
5724B98D0TR TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 ITCAM Domino monitoring agent always displays KGB5041l message in Server Availability workspace, and agent logs show kgbclient process exited with code -1073741701 

SYMPTOM
The Domino agent does not display monitoring data in Tivoli Enterprise Portal (TEP). When you access Domino agent workspace "Server Availability" from navigation item "Availability," the "Functionality Test Message" column always displays KGB5041l and the server status remains FAILED. 

 "KGB5041l: Domino agent is starting and initializing" 

[/support/docview.wss?uid=swg21663102&aid=1] [/support/docview.wss?uid=swg21663102&aid=1] 


CAUSE
The Domino agent launches kgbclient process to gather monitoring data from Domino server. If for some reason, the agent is unable to successfully launch the kgbclient process, the agent is not able to complete initializing and the monitoring data cannot be collected. This technote addresses the case when the cause of failure to launch kgbclient process is mismatched bit type of the Domino server and the installed Domino monitoring agent binaries. 


ENVIRONMENT
Windows, 64-bit architecture, where 64-bit Domino monitoring agent at level 6.2.1, LA0003 or above is configured and started. 

Note: 6.2.1 LA0003 and above supports 64 bit Domino agent. It is available for download from Passport Advantage with following part number:

Agent for Lotus Domino V6.2.1 Windows 64 bit Multilingual (CIQY2ML ) 


DIAGNOSING THE PROBLEM
Check kgbstart_<INST>.log in <ITM_HOME>\TMAITM6_x64 for the reason of failure. 

On a 64 bit Windows platform, the following message displays in kgbstart log:
Fri 01/24/2014 14:38:45.18 : starting 
"C:IBM\ITM\TMAITM6_x64"\KGBCLIENT_DOM1.EXE from "C:\Lotus\Domino" 
Fri 01/24/2014 14:38:45.21 : KGBCLIENT_DOM1.EXE exited with return code(-1073741701) Fri 01/24/2014 14:38:45.21 : timeout exit=0 maxexit=5 
Fri 01/24/2014 14:38:48.27 : restarting client ... 


RESOLVING THE PROBLEM
1) Check the bit-type of the Domino server process. Even though Windows OS is 64-bit, the Domino server may be running in 32-bit mode. Check Domino server process nserver.exe in Windows Task Manager, it shows a *32 extension if it is a 32 bit binary on a 64 bit Windows OS. 


2) Determine the bit type of Domino monitoring agent:
Following output shows Platform=WIX64, which indicates that the Domino agent is a 64-bit binary. For 32-bit agent, the kincinfo output will show Platform=WINNT

ITM\ITMInstall\kincinfo -d 
"GB","IBM Tivoli Monitoring for Domino","WIX64","062100070","","KGB64CMA.ver","0" 

3) The bit type of Domino monitoring agent, and the bit type of monitored Domino server must match for locally monitored Domino server. If Domino server is running as a 32-bit process, then uninstall the 64 bit monitoring agent for Domino server and install 32 bit monitoring agent. Reconfigure and restart the agent. 
The kgbclient process should now launch, and the correct status displays on the "Server Availability" workspace.