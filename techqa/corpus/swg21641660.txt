Title: IBM Message in Rational Performance Tester Test Log: Too many open files - United States

Text:
majordomo; startup; ulimit TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 The "Too many open files" message appears in the Test Log of an IBM Rational Performance Tester (RPT) playback on a Linux or AIX system. 

CAUSE
The "Too many open files" message occurs when the total number of open files and network ports exceeds the system's limit. By default, this limit is 1024. 

RESOLVING THE PROBLEM
To avoid the message, increase the maximum number of allowed open files. For RPT 8.3 or RPT 8.5 Linux/AIX agents, the recommended way of increasing the limit is by adding a "ulimit -n" line to the Majordomo start-up script. The steps are:


 1. Log into the Linux/AIX system as root. 
 2. If Majordomo is running (ps -ef | grep Majordomo), stop it with the MDStop.sh shell script (typically /opt/IBM/SDP/Majordomo/MDStop.sh). 
 3. Open the MDStart.sh shell script, typically located at /opt/IBM/SDP/Majordomo/MDStart.sh, in a text editor (such as vi). 
 4. Add the "ulimit -n 100000" command below to MDStart.sh to increase the open file limit to 100,000:
    
    export CLASSPATH
    
    # Increase number of open files to 100,000
    
    ulimit -n 100000
    
    #
    
    # Start Majordomo
    
 5. Save the changes to the MDStart.sh. 
 6. Run MDStart.sh to start the Majordomo agent.