Title: IBM DataPower Default "WS-Sec Actor/Role Identifier" requires an Actor/Role defined if using multiple Security headers - United States

Text:
AAA DataPower WS-Sec WS-Security multiple security headers actor role identifier SOAP fault TECHNOTE (FAQ)

QUESTION
 Why do I see the following SOAP Fault when using multiple Security headers sent to a Default DataPower AAA policy?

SOAP Fault:

The request was invalid for WS-Security standard, it has more than one Security header for the configured actor: "" 

CAUSE
By Default, the WS-Sec Actor/Role Identifier setting has no value (empty string). This indicates that no "actor/role" identifier on the DataPower side is configured. 

If using the Default setting, there should not be more than one Security header omitting the actor/role identifier. If multiple Security headers (even non-wsse Security headers) are being used, you may have only one Security header omitting the actor/role identifier. This means that if you were using 2 Security headers, then you should have at least one actor/role defined.

ANSWER
Following are options to address this SOAP Fault when using the Default WS-Sec Actor/Role Identifier setting: 

 * The most common way to prevent the above SOAP Fault is to provide an individual soap actor/role for each of the Security headers. 
 * Another possible option would be to uncheck Enforce Actor/Role for WS-Sec Message to disable the DataPower feature that enforces the actor/role attribute. 
   
   NOTE: this will prevent the SOAP Fault, but loses the enforcement functionality. 
   
   

For further information, go to the WebSphere DataPower Product Documentation Portal [http://www-01.ibm.com/software/integration/datapower/library/documentation/v3.8.2/index.html]. Specifically, refer to the:  *  [https://www14.software.ibm.com/iwm/web/swg-datapower/index.shtml]DataPower Command Reference for the full command usage for the WS-Sec Actor/Role Identifier attribute and other options. 
 * DataPower WebGui Guide for instructions on where to find the WS-Sec Actor/Role Identifier setting under Object Status.