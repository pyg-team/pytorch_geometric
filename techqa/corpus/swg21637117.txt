Title: IBM Deploying a Solution via IBM Case Manager Administration Client (CMAC) failed with Invocation Failure - 401 error - United States

Text:
SSO; CMAC; deploying; failed; Target Object store; ICM 5.1 TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 When using IBM Case Manager Administration Client to deploy a solution with SSO/Kerberos/SPNEGO enabled, it failed with Invocation Failure - 401 error 

SYMPTOM
Here is the excerpt from CMAC log for the invocation failure. Notice the "Authorization: Basic" message and no entries for any SPNEGO calls. 
...
...
INFO Thu May 09 10:13:32 PDT 2013 Authorization: Basic
INFO Thu May 09 10:13:32 PDT 2013 Request Header: Accept-Language = en-US
INFO Thu May 09 10:13:32 PDT 2013 Invocation Failure - 401
INFO Thu May 09 10:13:32 PDT 2013 Returned cookie String: JSESSIONID=0000KeNlZ25_k6CMHROwwWP01gF:16ptqcfml
INFO Thu May 09 10:13:32 PDT 2013 Entering: com.ibm.ecm.configmgr.app.acm.task.integration.DeploySolution$Execution:getResponse
INFO Thu May 09 10:13:32 PDT 2013 Leaving: com.ibm.ecm.configmgr.app.acm.task.integration.DeploySolution$Execution:getResponse
FINER Thu May 09 10:13:32 PDT 2013 THROW
com.ibm.ecm.configmgr.engine.ConfigurationManagerException thrown while executing method executeWork() of com.ibm.ecm.configmgr.app.acm.task.integration.DeploySolution$Execution
Stack Trace follows (when available):
com.ibm.ecm.configmgr.engine.ConfigurationManagerException: The IBM Case Manager REST protocol returned the 401 response code. Use Enterprise Manager to look at the deployment logs in ICM > IBM Case Manager > Solution Deployments >Solution Name. The following response was returned:
The server did not return additional information.
The deployment error log could not be found. 
at 
...
...


For comparison, here is an example of CMAC log entries when the Kerberos/SPNEGO is configured with IBM Case Manager correctly :

INFO Thu May 09 15:27:42 PDT 2013 SPNEGO token retrieved
INFO Thu May 09 15:27:42 PDT 2013 Retrieving the deployment status by using a GET command on 
..
..
INFO Thu May 09 15:27:42 PDT 2013 Authorization: SPNEGO Token
,..
...





CAUSE
The customer did not follow the "Configuring single sign-on for IBM Case Manager by using Kerberos/SPNEGO" section as outlined in the technote below. 

http://www-01.ibm.com/support/docview.wss?uid=swg27024299 [http://www-01.ibm.com/support/docview.wss?uid=swg27024299] 


ENVIRONMENT
Linux, ICM 5.1



RESOLVING THE PROBLEM
Edit the configmr.ini file, which is located in the following default location, example: install_path\..\IBM\CaseManagement\configure to include the following entries : 

- Djava.security.auth.login.config= point to location of <WAS_PROFILE_HOME>/properties/wsjaas_client.conf file 
- Dicm.spnego.enable= Set this flag to true 
- Dicm.spnego.serverSPN= Set your server Kerberos Service principal name [SPN] 

Note you must edit this file for all of the managed nodes and deployment manager. See the reference technote link below. 
http://www-01.ibm.com/support/docview.wss?uid=swg27024299 [http://www-01.ibm.com/support/docview.wss?uid=swg27024299]