Title: IBM MustGather: Events not received at event receiver - United States

Text:
Mustgather; Collecting data; EIF; omnibus; TEC; Event Integration Facility; must gather; OMNIbus; Must gather; ITM_TEMS_CONFIG; ITM_TEMS_PERFORMANCE TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 Events are not showing up in the event receiver - OMNIbus or Tivoli Enterprise Console 

SYMPTOM
 

 * My events are not showing up in the event receiver (OMNIbus or TEC) 
 * My e-mail and text notifications are not being received


CAUSE
 

Below are a list of possible causes: 
 *  The event receivers may not be configured correctly 
 *  The situation may not be configured correctly to send it to the correct event receivers 
 *  The situation may not have been raised 
 *  The OMNIbus Event Integration Facility (EIF) probe may be down 
 *  Network connectivity issues between the Tivoli Enterprise Management Server (TEMS) and the EIF receiver 


ENVIRONMENT
All platform and All editions



DIAGNOSING THE PROBLEM
 

 

Have any events ever made it to your event receiver?  * · 
 * If No 
 *  
   Verify the event receiver is configured correctly and using the correct port by validating the TEMS settings. This is located in: 
   ITM_HOME/CMS/TECLIB/OM_TEC.CONFIG  
   
   If changes are required, please make the appropriate updates and run the following command to refresh the event receiver dynamically: 
   
   tacmd refreshtecinfo -t eif
   
   
 * 
 * · If event receiver is configured correctly, continue to the next section
   

Is the Event Destination Server up and running?  * 
 * · 
 * To check this: 
 *  
   Execute the following command below: OMNIbus : $OMNIHOME/bin/nco_ping <objserverName> 
   
    * 
    * Should return: 
    * 
    * 
    * 
    * 
   
   
   TEC : wstatesvr 
   
    * 
    * Should return: 
    *  It should return the following if it is running: "The Tivoli Enterprise Console is running"
   
   
   · If no, start the event destination server 
   
    
   
   OMNIbus: $OMNIHOME/bin/nco_ping <objserverName> <=====Need OMNIbus start command 
   
   Should return: 
   
   
    
   
   TEC: wstartesvr 
   
    * 
    * Should return: 
    *  It should return the following when started "............................"
   
   
 *  
 * · If event destination server is up and running, proceed to the next section. 

Is the situation configured to "Forward Events to an EIF Receiver"? 
 * 
 *  
   

[/support/docview.wss?uid=swg21501701&aid=1] [/support/docview.wss?uid=swg21501701&aid=1]  * 
 * 
 * · 
 * If No,
 * 
 * · If the situation is configured to "Forward Events to an EIF Receiver", continue to the next section. 
 * 

Has the situation raised or triggered?  * · 
 * To verify this, 
 * From the TEP UI, locate your situation in the Situation Event Console: 
 * [/support/docview.wss?uid=swg21501701&aid=2] [/support/docview.wss?uid=swg21501701&aid=2] 
 * 
   · If your situation is not showing up in the Situation Event Console, 
   
 * · Wait for the situation to raise. This situation has not tripped so there will not be an event in the event receiver. 
 * 
 * ·If your situation is showing up in the Situation Event Console, 
 * The following are the traces requirement for this issue: 
 * 
   ERROR (UNIT:kfaot all) (UNIT:kfaotatr none) (UNIT:kfastins all)
   
   KEF_DEBUG=M 
 * 





Trace Level and Required Documentation: 
 * Dynamically turn on the following trace: 




Linux/UNIX: 

Directory : $candlehome/config 
Config Filename : <hostname>_ms_<temsname>.config 
Trace : KBB_RAS1='ERROR (UNIT:kfaot all) (UNIT:kfaotatr none) (UNIT:kfastins all)' 

Windows: 

Directory : %candlehome%\cms 
Config Filename : KBBENV 
Trace : KBB_RAS1=ERROR (UNIT:kfaot all) (UNIT:kfaotatr none) (UNIT:kfastins all) 

where $candlehome is the ITM installation directory 

HUB TEMS must be recycled for the trace parameter to be effective. if you are unable to recycle the HUB TEMS, the trace can be set dynamically using service console. For more information, follow the below technote: 

http://www-01.ibm.com/support/knowledgecenter/SSTFXA_6.3.0/com.ibm.itm.doc_6.3/trouble/tools_serviceconsoledynamic_trouble.htm [http://www-01.ibm.com/support/knowledgecenter/SSTFXA_6.3.0/com.ibm.itm.doc_6.3/trouble/tools_serviceconsoledynamic_trouble.htm] 
 * if the events are being cached at the TEMS (in om_tec.cache or event destination specific cache files) and not getting sent forward, then the add the following trace in om_tec.config file.

 * For all 32 bit distributed platforms and on post 6.2.2 FP2 releases, please collect the TEC EIF traces by putting the attached file in the <tmp> directory and adding the following keyword to the om_tec.config file. 


Linux/UNIX: 

Directory : $candlehome/tables/<temsname>/TECLIB 
Config Filename : om_tec.config 
Trace : ed_diag_config_file=<tmp>\diagc 

Windows: 

Directory : %candlehome%\cms\teclib 
Config Filename : om_tec.config 
Trace : ed_diag_config_file=<tmp>\diagc 

The trace output will be in the <tmp>\diagc.out file. 
 * For all releases and platforms upto 6.2.2 FP2 and all 64 bit distributed platforms and zOS on 6.2.2 FP3 onwards, add/replace the below trace


Linux/UNIX: 

Directory : $candlehome/config 
Config Filename : <hostname>_ms_<temsname>.config 
Trace : KEF_DEBUG='M' 

Windows: 

Directory : %candlehome%\cms 
Config Filename : KBBENV 
Trace : KEF_DEBUG=M 

This will trace the EIF library that is responsible for sending events from TEMS to EIF probe. 

 * Situation dump. Export the situation definition that has a trouble forwarding using the below command:


tacmd viewsit -s <situation name> -e <somefile.xml> 

In order to execute any tacmd command, you need to login first using tacmd command 
tacmd login -s <server> -u <user id> -p <password> 

 * Message log from the omnibus server


The message log can obtained from the MessageLog variable on tivoli_eif.props file on the OMNIbus server 

for example, tivoli_eif.log file is the message log 

MessageLog : '$OMNIHOME/log/tivoli_eif.log' 
 * Pdcollect from the HUB TEMS server 
 * The exported situation definition 
 * Message log from Omnibus server for Omnibus 
 * Result of the wtdumprl command for TEC

http://www.softpanorama.info/Admin/Tivoli/TEC/debugging_and_testing_tec_rules.shtml [http://www.softpanorama.info/Admin/Tivoli/TEC/debugging_and_testing_tec_rules.shtml]  * Cached event trace : <tmp>\diagc.out file 


RESOLVING THE PROBLEM
If the suggestion provided in "Diagnosing the problem" section did not resolve the problem, send the documents to your PMR.