Title: IBM High Availability JDBC Gateway sends all events on failover and failback - United States

Text:
JDBC gateway; HA; failover; failback; cold standby; DR TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 During failover or failback between a Primary and Secondary JDBC gateway, all events are transferred to the historical database. 

SYMPTOM
Details on the JDBC gateway high availability configuration are in the Tivoli Netcool Omnibus wiki on deverloperWorks under Best Practices

https://www.ibm.com/developerworks/mydeveloperworks/wikis/home?lang=en#/wiki/Tivoli%20Netcool%20OMNIbus/page/Best%20Practices [https://www.ibm.com/developerworks/mydeveloperworks/wikis/home?lang=en#/wiki/Tivoli%20Netcool%20OMNIbus/page/Best%20Practices]



CAUSE
Certain fields are different between the Primary and Backup Object Servers. Field differences are seen as event updates and cause the event to be transferred to the historical database.

RESOLVING THE PROBLEM
Use the Gate.Jdbc.DupIgnore property to specify which fields should not be compared between the Primary and Backup Object Servers on failover and failback. The fields listed in this property will be ignored if they are different on failover or failback.

The default setting of Gate.Jdbc.DupIgnore is LastModified and StateChange, which is adequate for a single JDBC gateway. When introducing a second JDBC gateway in reporter mode, the field Serial should be added:

Gate.Jdbc.DupIgnore: 'LastModified StateChange Serial'

If the Primary and Secondary JDBC gateways are running in Audit mode, the ActionTime and ActionCode fields should be added as well:

Gate.Jdbc.DupIgnore: 'LastModified StateChange Serial ActionTime ActionCode'


If the problem persists, compare all fields for an event in question between the Primary and Backup Object Servers. If there are any field differences, the bi-directional Object Server failover_gate gateway map file should be updated to transfer the field with updates.