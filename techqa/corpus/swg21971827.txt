Title: IBM How to debug High CPU on the J2EE agent with the Tomcat DC configured. - United States

Text:
tema ITCAM J2EE High CPU Performance YJ agent DC TECHNOTE (TROUBLESHOOTING)

THIS DOCUMENT APPLIES ONLY TO THE FOLLOWING LANGUAGE VERSION(S):
 US English 

PROBLEM(ABSTRACT)
 How to debug High CPU on the J2EE agent with the Tomcat DC configured. 

CAUSE
Low Heap sizes, high Samp Rate and Log Level L2 may lead to high CPU.

ENVIRONMENT
Distributed on Linux environments.

DIAGNOSING THE PROBLEM
When you run the top command, you'll see high CPU for the process with the Tomcat agent.

RESOLVING THE PROBLEM
Try the following steps to resolve the High CPU problem.





1. First see if its the agent or the DC causing the problem. A quick "top" command output will show you the process id for the High CPU process. Look at that process id and determine if its the YJ agent or the DC that's causing the high CPU. 

2. If its the YJ agent that's causing it, then you can do the following things: 

 - first check your Log level and Sampling Rate. The default values are L1 and 2%. If you have it at a higher level, then go back to default values. 

 - increase the -Xmx heap setting in the $ITM_HOME/config/kyjwb.properties file. 

 - restart the YJ agent, then check again using the "top" command. 

3. If its the DC and not the YJ agent that's causing the problem, then look at the heap values in the server startup script you are using. You might need to increase the heap sizes for -Xms, -Xmx parms and possibly add these two extra parms: -XX:PermSize=2048m and -XX:MaxPermSize=3072m.
(You can adjust the heap settings based on the native memory on the system.) Restart the DC/server if any changes are made to the heap sizes. 

Note: In addition to the above, sometimes we've noticed that low disk space, low swap/paging space and less memory also leads to performance/high CPU issues. Another factor is the number of low "open files" (do "ulimit -a" to verify). If you run into these type of issues, then increase your Resources for a long-term permanent solution.

 

PRODUCT ALIAS/SYNONYM
 ITCAM4AD ITCAMfAD ITCAM for J2EE