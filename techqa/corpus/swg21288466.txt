Title: IBM Collecting Data: Read first for Mobile Portal Accelerator (MPA) - United States

Text:
data collection; tracing; must gather; collecting data; wemp; mobile; everyplace TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 This document will aid you in collecting information needed by the IBM support team for issues in IBM WebSphere Everyplace Mobile Portal. 

RESOLVING THE PROBLEM
Collecting data for WebSphere Everyplace Mobile Portal Enable 

[/support/docview.wss?uid=swg21288466&amp;aid=1] General data collection [/support/docview.wss?uid=swg21288466&amp;aid=2] Device related data [/support/docview.wss?uid=swg21288466&amp;aid=3] Runtime [/support/docview.wss?uid=swg21288466&amp;aid=4] Toolkit [/support/docview.wss?uid=swg21288466&amp;aid=5] Start MCS trace and logging [/support/docview.wss?uid=swg21288466&amp;aid=6] Sending files to IBM 
General data collection In production environments, tracing is normally disabled or set to a minimal level. However, information contained in the runtime logs may contain enough information to isolate the component where the problem is occurring. When opening a PMR, the following data should be collected. 
 * Provide a detailed description of the problem. If the problem can be recreated provide the steps to recreate the problem and any sample application code needed to recreate the problem. 
 * Is this a new or existing install? 
 * If this was an existing install was anything changed? 
 * Is this a standalone or cluster environment? 
 * Verify that the MCS database is up and a database connection can be established. Use the Data Source test connection from the WebSphere Application Server console (Testing a database connection using the administrative console [http://www.ibm.com/support/knowledgecenter/SSAW57_8.0.0/com.ibm.websphere.nd.doc/info/ae/ae/tdat_testcon.html]). 
 * Verify that the database listener is up. Specify DB2 port 50000 and port 6789 if you are installing MCS. For Oracle the default port is 1521.
   DB2: use the following commands:  * 
    * 
    * 
   
   Oracle: use the command "netstat -a |grep 1521" 
 * Collect WebSphere Application Server trace and log files:  * 
    * 
    * 
    * 
    * 
    * 
    * 
    * 
    * 
    * 
    * 
   
   
   Log location for WebSphere Everyplace Mobile Portal Enable 5.1
   <was_root>/logs/server1 (server1 is default server name)
   <was_root>/logs/WebSphere_Portal (WebSphere_Portal is default portal server name)
   
   Log location for WebSphere Everyplace Mobile Portal Enable 6.0
   <was_profile_root>/profile_name/logs/server1 (server1 is default server name)
   <was_profile_root>/profile_name/logs/WebSphere_Portal (WebSphere_Portal is default portal server name)
   
 * Collect WebSphere Portal Server trace and log files from <wp_root>/log.
   Config*
   SystemErr*
   SystemOut*
   native*
   wps*
   
 * For install and configuration related problems include the following configuration files.
   WebSphere Everyplace Mobile Portal Enable 5.1
   <wp_root>/config/wpconfig.properties 
   <wp_root>/mcs/mcs-config.xml file
   <wp_root>/repository/bin/ImportPolicies.sh
   <wp_root>/shared/mwp/config/attr-descriptor.xsd
   <wp_root>/shared/mwp/config/mwp.properties
   WebSphere Everyplace Mobile Portal Enable 6.0
   <wp_root>/config/wpconfig.properties
   <wp_root>/config/wpconfig_dbdomain.properties
   <wp_root>/config/wpconfig_dbtype .properties
   <wp_root>/mcs/mcs-config.xml
   <wp_root>/repository/bin/ImportPolicies.sh
   <wp_root>/shared/mwp/config/attr-descriptor.xsd
   <wp_root>/shared/mwp/config/mwp.properties


Device related data For problems with specific devices include the following device information. 
 * Device: make and model 
 * User agent string sent by the device 
 * Browser: type and version 
 * Simulator: if a simulator is used, which one and its version number 
 * Carrier network 
 * MCS policies 
 * MCS trace (see trace section below) 
 * Detailed description of how the problem occurs (for example, the test pages, the markup sent to the device, and the content that causes the problem) 
 * XDIME source that is causing the problem, along with any related policies 
 * Use the wget command to collect device-specific markup: 
   wget -U "user agent" <url> 
   where <url> is the URL of the page having the problem 
 * Access the device capture service with the device and update the PMR with the tracking number:
   http://dc.volantis.com/ibm/ [http://dc.volantis.com/ibm/] 
 * Device repository (devices.mdpr)


Runtime related data RUNTIME problems: 
Collect the following: 
1. Platform where WAS and WP/Everyplace Mobile Portal (WEMPE) are installed:  * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 


2. Installed WEMPE version/build level (please issue command to check: cat [wp_root]/version/*.component):  * 
 * 
 * 


3. WEMPE, WAS and WP fixpacks installed (please issue command to check: ls -la [wp_root]/version/history): 

4. Device/Emulator type/model used: 

5. If emulator, the user agent string used: 

6. Locale and the character encoding that is used when the problem happens: 

7. Location, i.e. indicate which portlet and/or page the user is on, when the problem happens: 

8. Problem detailed description: 

9. Can the problem be duplicated? If it can, then the detailed steps to duplicate it: 

10. Screenshot? 

11. Any log files (under [wp_root]/log dir wps_[date].log, SystemOut.log and SystemErr.log and [wp_root]/ConfigTrace*.log)?  * 
 * 
 * 


12. Configuration files (e.g. [wp_root]/shared/mwp/config/mwp.properties and [wp_root]/shared/mwp/config/attr-descriptor.xml): 

NOTE: The IBM Support Assistant (ISA) plugin for WEMPE can be used by the customer to capture the logs for item 11 and for item 12. 


Toolkit related data TOOLKIT problems 
Collect the following: 
1. Platform information:  * 
 * 
 * 
 * 
 * 
 * 
 * 

2. Rational Application Developer version: 
3. The MPTK install logs <MPTK_INSTALL_DIR>/logs/* 
4. The workspace log <RAD_WORKSPACE>/.metadata/.log 
5. RAD configuration details. Under Help-->"About IBM Rational Software Developer Platform" dialog box, there is a Configuration Details button that causes the current RAD configuration to be displayed in an editor window within RAD. 
6. If it's a plugin problem a screenshot of the problem is required. 
7. If the problem is a test environment problem (runtime problem), collect everything you would for a runtime problem (steps 1-12 above). If possible, see if the problem is recreateable in a standalone runtime environment. This will determine if this is a toolkit runtime only problem. 

NOTE: If there are IBM or Volantis personnel already working with the customer (either on-site or remotely), Level 2 should ask the person opening the PMR to provide a copy of all correspondence that has occurred so far on the problem and include this information in the PMR. Level 2 should also ask if a Volantis ticket number has already been created and if so include the ticket number in the PMR. 


Start MCS trace and logging For problems requiring additional trace and log information follow the instructions below to enable MCS tracing. 

WebSphere Everyplace Mobile Portal Enable 5.1: 

1. Edit the log.properties file: 
<wp_root>/shared/app/config/log.properties 

2. Find the traceString and set it to the following value: 
traceString=com.ibm.mwp.*=all=enabled:com.volantis.*=all=enabled 

3. Edit wp_root/mcs/mcs-jlog.xml and change the priority value attribute to debug for the com.volantis.charset, com.volantis.mcs, com.volantis.shared, com.volantis.synergetics, and com.volantis.xml categories.  * 


4. Stop and restart the Portal_Server. 

Additional information on logging and tracing can be found in the Knowledge Center topic, " Message logging and trace information [http://www.ibm.com/support/knowledgecenter/SS4SHV_7.0.1/com.ibm.websphere.wemp.doc/troubleshooting/messageloggingandtraceinformation.html]". 


WebSphere Everyplace Mobile Portal Enable 6.0: 

1. Set the following trace string for WEMP using the WebSphere Application Server Admin Console: *=info: com.volantis.*=all 

Details are in the WebSphere Portal Knowledge Center. Refer to the Trace logging > Extended section in the following article: 
http://www.ibm.com/support/knowledgecenter/SSHRKX_6.0.0/com.ibm.wp.ent.doc/wps/adsyslog.html [http://www.ibm.com/support/knowledgecenter/SSHRKX_6.0.0/com.ibm.wp.ent.doc/wps/adsyslog.html] 

2. Edit wp_root/mcs/mcs-jlog.xml and change the priority value attribute to debug for the com.volantis.charset, com.volantis.mcs, com.volantis.shared, com.volantis.synergetics, and com.volantis.xml categories. 

3. Restart the WebSphere_Portal application server. The trace.log file can be found in the <wp_home>/logs directory. 

NOTE: For production problems that cannot be recreated in a test environment, narrow the trace scope. 


Sending files to IBM Use the Electronic Service Request [http://www.ibm.com/software/websphere/support/probsub.html] (ESR) tool to create a PMR and upload data to the IBM ECuRep FTP site. 

ESR is not available in all countries. If ESR is not available in your country, upload data to ftp.emea.ibm.com. 

Login is by anonymous FTP (cd to /toibm/other) and upload files to this location. 
 * 
 * 
 * 
 * 
 * 


Alternatively, you can attach files to an e-mail message and e-mail them to ecurep@ecurep.ibm.com. The subject line of the message must begin with the full PMR number: PPPPP,BBB,CCC 

NOTE: Be aware that some mail servers will strip off large attachments.