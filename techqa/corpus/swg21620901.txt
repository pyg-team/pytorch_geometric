Title: IBM InfoSphere Information Server client connection failing on certificate issue. - United States

Text:
 TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 When connecting to DataStage, the following error is seen :

Failed to authenticate the current user against the selected Services Tier
com.ibm.jsse2.util.g: PKIX path building failed: java.security.cert.CertPathBuilderException: PKIXCertPathBuilderImpl could not build a valid CertPath.; 
internal cause is: java.security.cert.CertPathValidatorException: The certificate issued by CN=<<HostName>>, OU=Root Certificate, OU=<<Host>>Node01Cell, OU=<<Host>>Node01, O=IBM, C=US is not trusted; 
internal cause is:java.security.cert.CertPathValidatorException: Certificate chaining error 

SYMPTOM
WebSphere Application Server administration console can connect but not the IIS clients, the IIS web console reports the same issue, even using "UpdateSignerCerts.bat" enabling https configuration causes the issue :

Exception type: javax/security/auth/login/LoginException
Exception message: Unrecognized SSL message, plaintext connection?
Exception stack trace:
javax.security.auth.login.LoginException: Unrecognized SSL message, plaintext connection? at com.ascential.acs.security.auth.client.AuthenticationService.getLoginException(AuthenticationService.java:987) at com.ascential.acs.security.auth.client.AuthenticationService.doLogin(AuthenticationService.java:355)
Caused by: com.ascential.acs.registration.client.RegistrationContextManagerException: Caught an unexpected exception. at com.ascential.acs.registration.client.RegistrationContextManager.setContext(RegistrationContextManager.java:76) at com.ascential.acs.security.auth.client.AuthenticationService.doLogin(AuthenticationService.java:349)
Caused by: com.ascential.acs.registration.client.RegistrationHelperException: Caught an unexpected exception. at com.ascential.acs.registration.client.RegistrationHelper.getBindingProperties(RegistrationHelper.java:728) at com.ascential.acs.registration.client.RegistrationHelper.getBindingProperties(RegistrationHelper.java:595) at com.ascential.acs.registration.client.RegistrationHelper.getBindingConfigProperties(RegistrationHelper.java:574) at com.ascential.acs.registration.client.RegistrationContextManager.setContext(RegistrationContextManager.java:173) at com.ascential.acs.registration.client.RegistrationContextManager.setContext(RegistrationContextManager.java:73) ... 1 more
Caused by: javax.net.ssl.SSLException: Unrecognized SSL message, plaintext connection?
at com.ibm.jsse2.a.c(a.java:184)
at com.ibm.jsse2.a.a(a.java:163)
at com.ibm.jsse2.tc.a(tc.java:540)
at com.ibm.jsse2.tc.g(tc.java:416)
at com.ibm.jsse2.tc.a(tc.java:60)
at com.ibm.jsse2.tc.startHandshake(tc.java:381)
at com.ibm.net.ssl.www2.protocol.https.c.afterConnect(c.java:151)
at com.ibm.net.ssl.www2.protocol.https.d.connect(d.java:64)
at sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1182)
at com.ibm.net.ssl.www2.protocol.https.b.getInputStream(b.java:72)
at com.ascential.acs.registration.client.ConnectionHelper.connect(ConnectionHelper.java:172)
at com.ascential.acs.registration.client.RegistrationHelper.getBindingProperties(RegistrationHelper.java:684)
... 5 more


CAUSE
This can be an issue on the temporary directory when WAS is supposed to initiate JACC policy propagation to the JACC provider as part of application deployment. 

ENVIRONMENT
Windows installation.

DIAGNOSING THE PROBLEM
Collect secured environment configuration with :
https://<<Host>>:9443/RegistrationServlet/registration?SignersInfo=&TIMEOUT=-1

RESOLVING THE PROBLEM
You can repair the WAS configuration file jacc.config following these steps :

- back up existing copy of D:\IBM\Websphere\AppServer\profiles\InfoSphere\config\cells\<<Host>>Node01Cell\jacc.config






- execute
D:\IBM\InformationServer\ASBServer\bin\udpate_jacc.bat -user <wasadmin_user> -password <wasadmin_password>

- restart WAS


Then retry the UpdateSignerCerts.bat operation, gathering the output and IS collection as before should it fail again, and send to the Support team.