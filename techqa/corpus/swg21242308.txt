Title: IBM Fatal Error compiling WSDL "element doesn't exist" - United States

Text:
datapower; compile; schema; wsdl; fatal; error; failed TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 Compiling certain WSDLs gives a fatal error in the log (or similiar message in WebGUI if creating a WSP based on such WSDL):

xmlmgr (default): wsdl Compilation Request: Failed to compile: Fatal Error at local:///WebService.wsdl:1245: e-props-correct 1: element has ref={http://www.w3.org/2001/XMLSchema}schema but that element doesn't exist URL: local:///WebService.wsdl 

CAUSE
The WebSphere® DataPower® WSDL and schema compiler does not support a schema element that references a schema. For example:

<s:element name="XMLResponse">
<s:complexType>
<s:sequence>
<s:element minOccurs="0" maxOccurs="1" name="XMLResult">
<s:complexType>
<s:sequence>
<s:element ref="s:schema" />
<s:any />
</s:sequence>
</s:complexType>
</s:element>
</s:sequence>
</s:complexType>
</s:element>

The schema compiler fails with the error that s:schema doesn't exist.

RESOLVING THE PROBLEM
Add the following embedded schema to the types section of your WSDL and it should no longer encounter the fatal error during compilation: 

<s:schema elementFormDefault="qualified" targetNamespace="http://www.w3.org/2001/XMLSchema">
<s:element name="schema">
<s:complexType>
<s:sequence>
<s:any namespace="##targetNamespace" processContents="lax" />
</s:sequence>
<s:anyAttribute processContents="lax"/>
</s:complexType>
</s:element>
</s:schema>