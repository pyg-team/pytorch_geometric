Title: IBM Cognos Dynamic Cube not generating expected SQL for relative time members - United States

Text:
 TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 On startup of a Dynamic Cube the generation of the relative time members fail with a specific DB2 error "Current period expression failed to execute. XQE-DAT-0001 Data source adapter error: com.ibm.db2.jcc.am.SqlSyntaxErrorException: DB2 SQL Error: SQLCODE=-109, SQLSTATE=42601, SQLERRMC=NULLS". The error is occuring because of an ASC NULLS LAST in the order by clause of the SQL statement. 

CAUSE
Incorrect SQL generation for Dynamic Cube against IBM DB2 because of an unexpected datasource configuration. The datasource connection has been created using SDK, and the database type has been JDBC instead of JD-D2. This resulted in generic JDBC properties being loaded, instead of JDBC properties optimized for DB2.

ENVIRONMENT
IBM Cognos 10.2.1 or higher

DIAGNOSING THE PROBLEM
Verify the XQE logs for errors during startup. In order to see the generated SQL, enable JDBC trace in Dynamic Query Mode (http://www-01.ibm.com/support/docview.wss?uid=swg21579065 [http://www-01.ibm.com/support/docview.wss?uid=swg21579065]).

RESOLVING THE PROBLEM






Edit the datasource connection in IBM Cognos Administration to the appropriate vendor, in this case IBM DB2. 

A restart of the Dynamic Cube is required.

RELATED INFORMATION
 How to trace native SQL for relational DQM datasources [http://www-01.ibm.com/support/docview.wss?uid=swg21579065]