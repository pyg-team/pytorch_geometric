Title: IBM SSL connection attempt using JCC driver fails with errorcode -4499 and DB2 server logs message DIA3604E for SSL function "gsk_secure_soc_init" failing with error 410. - United States

Text:
JDBC JCC WAS SSL -4499 DIA3604E 410 sslConnection TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 Attempts to configure JCC SSL connection to DB2 server fails with communication error -4499 and the DB2 server recording message, "DIA3604E The SSL function "gsk_secure_soc_init" failed with the return code "410" in "sqlccSSLSocketSetup". " in it's diagnostic log (db2diag.log). 

SYMPTOM
Example JCC Exception: 

[jcc][t4][2030][11211][3.64.104] A communication error occurred during operations on the connection's underlying socket, socket input stream, or socket output stream. Error location: Reply.fill() - insufficient data (-1). Message: Insufficient data. ERRORCODE=-4499, SQLSTATE=08001 DSRA0010E: SQL State = 08001, Error Code = -4,499

Example DB2 Server log entry:

2015-01-02-15.19.33.098312-360 I114680187A503 LEVEL: Error 
PID : 7143496 TID : 11054 PROC : db2sysc 0 
INSTANCE: db2inst1 NODE : 000 DB : 
APPHDL : 
HOSTNAME: 
EDUID : EDUNAME: db2agent () 0 
FUNCTION: DB2 UDB, common communication, sqlccMapSSLErrorToDB2Error, probe:30 
MESSAGE : DIA3604E The SSL function "gsk_secure_soc_init" failed with the
return code "410" in "sqlccSSLSocketSetup".


CAUSE
The return code 410 means an incorrectly formatted SSL message is received from the partner. This message is dumped into db2diag.log by server because it receives a bad SSL message from the client. In this case, the cause is that the client does not configure SSL correctly, such as missing or misconfigured sslConnection JCC property and, and the client tries to connect to a SSL port using normal TCPIP protocol.


RESOLVING THE PROBLEM
Ensure JCC driver property sslConnection has been set to true in the client application environment.