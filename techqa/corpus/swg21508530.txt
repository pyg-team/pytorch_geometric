Title: IBM OmniFind Enterprise Edition: portlet is tentatively disabled message - United States

Text:
OEE; WPS; portlet; IMC TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 I have OmniFind integrated with WebSphere Portal and I was using the default search portlet when I started seeing the message "This portlet is tentatively disabled" whenever I access the portlet, either from search bar or portlet page directly, and java.lang.NullPointerException is raised at /common/banner.jsp. 

SYMPTOM
The SystemOut.log shows: 

[7/28/11 14:09:28:883 PDT] 00000073 ServletWrappe E SRVE0068E: Uncaught exception thrown in one of the service methods of the servlet: /common/banner.jsp. Exception thrown : java.lang.NullPointerException
at com.ibm._jsp._banner._jspService(_banner.java:203)
at com.ibm.ws.jsp.runtime.HttpJspBase.service(HttpJspBase.java:87)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:856)


The ESSearchServer.log shows:

Jul 26, 2011 12:16:48 PM com.ibm.es.api.srv.actions.GetUserCredentials processResponse
SEVERE: SQL java.sql.SQLException: DERBY SQL error: SQLCODE: -1, SQLSTATE: XJ041, SQLERRMC: Failed to create database '/opt/IBM/esdata/data/cloudscape/imc', see the next exception for details.::SQLSTATE: XBM0JDirectory /opt/IBM/esdata/data/cloudscape//opt/IBM/esdata/data/cloudscape/imc already exists.
Throwable occurred: java.sql.SQLException: DERBY SQL error: SQLCODE: -1, SQLSTATE: XJ041, SQLERRMC: Failed to create database '/opt/IBM/esdata/data/cloudscape/imc', see the next exception for details.::SQLSTATE: XBM0JDirectory /opt/IBM/esdata/data/cloudscape//opt/IBM/esdata/data/cloudscape/imc already exists. 


CAUSE
The IMC database already exists, thus can not be recreated when accessing the portlet. As a result the portlet is not usable. 


This situation typically occurs when you flush the IMC database for some reason and then accessed the search application or portlet once.


RESOLVING THE PROBLEM
To solve the problem, do as follows: 

 

 1. Login as the OmniFind admin (esadmin) user to OmniFind server 
 2. Stop database session by "esadmin database.node1 stop" command 
 3. Go to $ES_NODE_ROOT/data/cloudscape directory, and move imc directory (like imc.old)  * this directory will be regenerated when a user accesses the portlet
    
    
 4. Restart database session by "esadmin database.node1 start" command 
 5. On OEE server, try to access the portlet again(not going through search bar but directly click the "Enterprise Search" link). 
 6. If you see any error, logout and back into the portal again, then click "Enterprise Search" link again. 
 7. If you continue to see errors, contact IBM support.