Title: IBM Maximo applications fail to start if continuous queues are unavailable - United States

Text:
TPAEINTEGRATION; mdb; reconnect; mq; intjmsact TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 If the continuous queues are unavailable to Maximo's message driven beans (MDBs) upon startup, the Maximo application fails to start. 

SYMPTOM
In this case, the environment is configured to use WebSphere MQ for the continuous queues. When the queue manager is stopped for monthly backups, the Maximo application that has MDBs deployed will continue to run. However if the Maximo application is stopped, it will fail to start again until the queue manager is available. Errors seen in the logs will be similar to:

ActivationSpe E J2CA0138E: The Message Endpoint activation failed 
for ActivationSpec intjmsact (com.ibm.mq.connector.inbound.ActivationSpecImpl) 
and MDB application mboejb due to the following exception: 
javax.resource.spi.ResourceAdapterInternalException:
com.ibm.msg.client.jms.DetailedIllegalStateException: JMSWMQ0018: 
Failed to connect to queue manager 'QM1' with connection mode 'Client' 
and host name 'maximoqmgrhost'. Check the queue manager is started and if running in client mode, check there is a listener running. 
Please see the linked exception for more information.


CAUSE
Queue manager is not available

RESOLVING THE PROBLEM
The application server can be configured to enable Startup Reconnection to the queue manager so that the application can start successfully, and any MDBs that have not connected to the queue manager will attempt to reconnect on a specified interval.
The following generic JVM arguments can be specified for each application server that has MDBs deployed to enable Startup Reconnection:

-Dcom.ibm.mq.jms.tuning.startupReconnectionRetryCount=0
-Dcom.ibm.mq.jms.tuning.startupReconnectionRetryInterval=30000

Setting the ReconnectionRetryCount to 0 allows the MDB to reconnect indefinitely so when the queue manager comes back online the MDBs will automatically reconnect. The ReconnecitonRetryInterval specifies how often the server will attempt to reconnect. The default is 30 seconds (30000 milliseconds).

To set the arguments, log into the WebSphere console and navigate to your application server.
On the right side of the screen, select Java and Process Management
Click on Process definition
Next, click Java Virtual Machine

Enter the arguments in the generic JVM arguments field as shown:
-Dcom.ibm.mq.jms.tuning.startupReconnectionRetryCount=0
-Dcom.ibm.mq.jms.tuning.startupReconnectionRetryInterval=30000

Save the changes and restart the application server.

The Maximo application will be able to start when the queue manager is down for maintenance and will automatically reconnect to the queue manager once it is available again.