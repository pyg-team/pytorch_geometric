Title: IBM Unexpected Network Behavior on Startup of DataPower Appliance - United States

Text:
 TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 During startup of the appliance there is unexpected behavior in relation to the network. For example data is communicated over a different interface than expected or remote endpoints cannot be contacted initially on load of the appliance.

Certain configuration objects do not come to an up state immediately on the appliance boot. 

RESOLVING THE PROBLEM
DataPower loads configuration objects through a set of configuration files that are written to the flash on the appliance. The main file out of the default domain, autoconfig.cfg defines the domains on the appliance along with the overall conifguration, including the network interfaces. 

On each reboot and reload these objects must be loaded from the configuration files. Depending on network configuration settings you may exhibit unexpected network behavior. For example if you have certain interfaces setup with static routes and requires certain traffic to pass through that interface may not be respected until all of the objects are fully loaded. In this situation explained above this is likely due to one interface loading before the other could be completely configured including any static routes. 

 

DataPower's configuration is loaded in a linear but asynchronous way. The autoconfig.cfg will be called and this in turn will call other objects (such as network interfaces and domains), these object configuration changes apply when 'exit' is passed to each object. It is important to note however that while we may exit out of a configuration object that it can still be pending in the background. 

 

Similar behavior can be expected in objects that have remote dependencies that do not completely load on startup. Another example would be a Web Service Proxy attempting to retrieve a remote WSDL when the network interface was not yet up. 

 

It is advised especially in a production setting to allow the DataPower appliance to completely boot and load all domains including objects within before pushing load to the appliance. This will assure traffic passes through the appropriate interfaces and confirm all objects are in the up state to function properly.