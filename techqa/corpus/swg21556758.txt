Title: IBM GIS sporadically throwing ORA-02396 and ORA-01012 errors - United States

Text:
STERLINGNFX TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 GIS sporadically throwing ORA-02396 and ORA-01012 errors 

SYMPTOM


This is usualy caused by the fact that the Database User profile has an Idle Time Out parameter set on the Oracle side which is shorter than the value specified in the jdbc.properties file.

The default value in the properties is: oraclePool.idletimeout=86400000 (in milliseconds) This corresponds to 24 hours. What seems to be hapenning is that the time out is being reached on the Oracle side before the connection times out in the GIS Pool. So when GIs tries using that connection again, it has been broken and we get the ORA errors. This seems to cause both the ORA-01012 and ORA-02396 errors. Error Message [2009-11-11 01:20:26.398] ERROR 000000000000 GLOBAL_SCOPE com.sterlingcommerce.woodstock.workflow.queue.WorkFlowQueueListener.onMessage() caught Exception for workflow 114892
SQL Error Code: 1012
SQL State: 72000
java.sql.SQLException: ORA-01012: not logged on

[2009-11-11 01:20:26.39] ALL 000000000000 GLOBAL_SCOPE java.sql.SQLException: ORA-02396: exceeded maximum idle time, please connect again

 

 


RESOLVING THE PROBLEM


 Ideally you would need to know to what value this has been set in Oracle, so you can adjust the value in the GIS property files.

To make quick progress you can reduce the value in the property file to 1 hour. The best way to implement such a change is to add the follwoing lines to your customer_overrides.properties file: jdbcService.oraclePool.idletimeout=3600000 jdbcService. oraclePool_local.idletimeout=3600000 jdbcService.oraclePool_NoTrans.idletimeout=3600000 jdbcService.oracleArchivePool.idletimeout=3600000 jdbcService.oracleUIPool.idletimeout=3600000  

HISTORICAL NUMBER
 NFX7996 

PRODUCT ALIAS/SYNONYM
 

Severity


Normal