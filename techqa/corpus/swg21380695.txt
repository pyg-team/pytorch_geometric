Title: IBM MustGather: WebSphere DataPower B2B Appliance XB60 - United States

Text:
MustGather; DataPower; B2B; XB60; B2B Gateway; Partner Profile; Data Power; DataPower XB60; WDPB2B; MustGatherDocument TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 Collect the following MustGather information for IBM Support to use in troubleshooting problems with the WebSphere DataPower B2B Appliance XB60. 

RESOLVING THE PROBLEM
Section 1. Checking for resolutions to known problems: 
Visit the WebSphere DataPower SOA Appliances Product support page [http://www.ibm.com/software/integration/datapower/support/] for additional support content.


Section 2. Collecting information on this problem

The following information describes the basic documentation needed by IBM Support to investigate questions or problems when using IBM WebSphere DataPower B2B Appliance XB60.

Step 1. Describe the problem and environment


 1. Develop a clear description of the question or problem. 
 2. Create a simple use case which shows the question or problem. 
 3. List all the software, software version/release, with operating systems in the use case. 


Step 2: Turn on tracing to recreate and capture documentation for IBM Support to review 
 1. Set the debug level tracing and logging settings:  1. Access the DataPower SOA Appliance by using the WebGUI interface through your browser. 
     2. From the Control Panel in the WebGUI, select the Troubleshooting icon. 
     3. On the Troubleshooting Panel, under Logging, set the Log Level to debug from the pull down menu. Click Set Logging Level. Click Confirm at the confirmation pop-up window.
    
    
 2. If the issue involves services on the appliance other than a B2B gateway, enable the Probe:  1. Select the Debug Probe tab near the top of the Troubleshooting Panel. 
     2. Look for the service you are using. 
     3. From the pull down select the service you configured for the simple use case. 
     4. Click on the "Add Probe" button.
    
    
 3. (Optional) In some cases it may be helpful to do a Packet Capture (pcap) to collect a listing of the full network-level exchange between an appliance and another resource on the network in order to understand what is happening. A Packet Trace contains a capture of network traffic in pcap format.  1. Switch to the default domain 
     2. On the Control Panel, click on the Troubleshooting icon 
     3. Look for the Packet Capture section 
     4. Set the packet capture options available based on your installed firmware level 
     5. Click Start Packet Capture to enable this change 
     6. Click Confirm on the confirmation pop-up window
    
    


See also How to generate a continuous Packet Capture on the WebSphere DataPower device using CLI [http://www.ibm.com/support/docview.wss?rs=2362&context=SS9H2Y&context=SS6L4E&context=SS6L6N&context=SS6L5J&context=SSQ3J2&context=SSNHP3&q1=Packet+Capture&uid=swg21327223&loc=en_US&cs=utf-8&lang=en].

Step 3: Recreate the problem.


 1. Using the simple use case, with sample data (such as the EDI file), recreate the problem using 2 or 3 transactions. 
 2. Document the recreate steps. 
 3. Capture screen images from the Web GUI or do a "File / Save As ..." from the B2B Transaction Viewer window to save the file to a local file, if it has error messages or other information that might be helpful to IBM support. 
 4. Turn off traces. 


Step 4: Collect these files: 

Error Report:  1. From the Control Panel in the WebGUI, select the Troubleshooting icon. 
 2. On the Troubleshooting Panel, under Reporting, click the Generate Error Report button. 
 3. Once the Error Report is generated, right click on the "View Error Report" and select "Save Target As" to save the Error Report to a local file. 


Export of appliance configuration:  1. Export your configuration to a file by opening the ADMINISTRATION menu from the left hand navigation list. 
 2. Click Export Config to display the initial Export Configuration screen. 
 3. Click the Create a backup of the entire system radio button and click Next. 
 4. Enter a comment noting the problem and click the Build Export button. 
 5. The configuration of the entire system is backed up to a file named export.zip. An opportunity to download the zip is automatically presented on the next page. 
 6. Click the Download button to download the file to your workstation. 


Probe file:  1. From the Control Panel in the WebGUI, select the Troubleshooting icon. 
 2. Select Debug Probe tab. 
 3. Look for the service you are using. 
 4. From the pull down, select the service you configured for the simple use case. 
 5. Under Probe column, click on the magnifying glass icon. 
 6. Press the Export Capture button. 
 7. The appliance will prompt you to download the file.


Section 3. Preparing to contact IBM Support 
 1. Obtain the serial number of the appliance which experienced the problem. This is needed for IBM entitlement processing before a PMR can be created. Use the WebGUI, select Status > System > Version Information, locate tag on the case of the appliance, or from the CLI use Show System 
 2. Locate the firmware version of the appliance. Using the WebGUI, select Status > System > Version Information or from the CLI use Show Version. 
 3. Locate your IBM customer number from your records. 
 4. Describe the business impact and severity of the problem based on the Severity Levels table found in the following Technote: "WebSphere DataPower Extended Maintenance and Support Services". [http://www.ibm.com/support/docview.wss?rs=2362&uid=swg21254180#severity.] 
 5. Determine which telephone number IBM should use to contact you or your associate concerning this problem report.


Section 4. Contacting IBM Support and sending your MustGather information to IBM support 
 1. Refer to specifics in Contacting IBM WebSphere DataPower SOA Appliance Support [http://www.ibm.com/support/docview.wss?rs=2362&uid=swg21236322]. 
 2. After you have contacted IBM Support, a PMR number will be assigned. Create a zip file of the MustGather information listed below:  1. A text file which contains: the questions and answers to any of the MustGather steps, elaboration on the problem, list of steps to recreate, notation on specific errors, and description external events noted at the time of the error. 
     2. WebSphere DataPower WebGUI and B2B Viewer Screen Captures 
     3. An error report at the time of the error, from either the WebGui [http://www.ibm.com/support/docview.wss?rs=2362&uid=swg21235587] or CLI [http://www.ibm.com/support/docview.wss?rs=2362&uid=swg21242396]. 
     4. WebSphere DataPower export zip 
     5. WebSphere DataPower probe export 
     6. Input and output files sent through the B2B Gateway including headers, for example XML or EDI files.
    
    
 3. Rename the zip file and send it to IBM as noted in Exchanging information with IBM WebSphere DataPower Technical Support for problem determination [http://www-1.ibm.com/support/docview.wss?rs=2362&uid=swg21267385]. 
 4. Do not send any proprietary or confidential information from your company.

RELATED INFORMATION
#MustGather: Read first [http://www.ibm.com/support/docview.wss?rs=2362&uid=swg21269260]
How to generate a continuous Packet Capture on the We [http://www.ibm.com/support/docview.wss?rs=2362&context=SS9H2Y&context=SS6L4E&context=SS6L6N&context=SS6L5J&context=SSQ3J2&context=SSNHP3&q1=Packet+Capture&uid=swg21327223&loc=en_US&cs=utf-8&lang=en]




Cross reference information Segment Product Component Platform Version Edition Business Integration WebSphere DataPower SOA Appliances Not Applicable Firmware 3.7.3, 1.0.0 Edition Independent