Title: IBM IZ31919: PLOT CHART LEGEND INCORRECT AFTER AGENT GOES OFFLINE - United States

Text:
 SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  Severity: 2
   Approver: BS
   Compid:  5724C04EP Tivoli Enterprise Portal
   Abstract: Plot Chart legend incorrect after agent goes offline
   
   Environment:
   TEMS/TEPS: AIX 5.3 - ITM 6.2 FP01
   TEP:       Windows 2003 - ITM 6.2 FP01 (using Java Web Start)
   Agent:     OMEGAMON XE 4.2 for z/OS, ITM 6.2 FP01 Unix OS agent
              for AIX 5.3
   
   Problem Description:
   Customer creates a plot chart view to have two Agents' data
   drawn simultaneously in one window with refreshing every 30
   seconds.  Detailed steps of creating the workspace is described
   in "Steps_to_create_workspace" sheet in
   pmr04505_steps_to_create_problem.xls.  When two agents are
   online, two plot charts are drawn in the view as expected.  When
   one agent goes offline, the stopped Agent has correctly stopped
   plotting.  However, unexpected new text, e.g.
   "vedbaek:KUX:INSTANCE1/Load Average", is added in Legend box,
   and the plot chat color of remaining agent changes in yellow.
   The TEP screen copies are "PMR_04505" sheet in
   pmr04505_steps_to_create_problem.xls.
   
   Expected Result:
   Plot chart of the online agent continues to be drawn correctly
   with the specified color and the text in Legend box when one
   agent goes offline.
   
   Detailed Recreation Procedure:
   The problem can be reproduced on 62fp1 or 62fp1if1 using Unix OS
   Agents on AIX5.3.  The TEP screen copies are stored in
   pmr04505_steps_to_create_problem.xls in ECuRep.
   [1] Create a new Logical Navigator
   [2] Assign 2 Unix Agents
   [3] Navigate to the Enterprise Level of the new Logical
       Navigator tree
   [4] Create / amend the workspace/view to a Plot Chart
   [5] Assign the Unix OS/System/System Load Average query to the
       view
   [6] On View Properties, change the tab to 'Style'
   [7] Click on Legend graphic to display Legend props
   [8] Click on Legend Label
   [9] Amend 'Text' from existing value to new value, ie from
       'vedbaek:KUX\Load Average (1min)' to  'vedbaek'
   [10] Amend 'Color' in 'Line Style' from existing value to new
        value, ie from yellow to orange
   [11] Repeat for other Managed System in the Legend, ie from
        'soro:KUX\Load Average (1 Min) to  'soro', and from yellow
        to green
   [12] Apply and OK the changes.
   [13] Start both UNIX OS Agents.
   [14] You should now have the TEMAs plotting their values
        successfully.
   [15] The Legend should contain the newly amended value (vedbaek
        and soro, or whatever values you choose).
   [16] Stop one of the UNIX OS Agents.
   
   After a period of time (next refresh) observe that the stopped
   Agent has correctly stopped plotting, but notice that the legend
   has increased by one entry, and that entry is the Agent that is
   NOT stopped.
   
   The legend appears to have been rebuilt, ignoring the new names
   that we put in step #9 & #10 above.
   
   This problem occurs only the certain one of two agent is
   stopped.
   In this case,
   - When the agent of "soro" is stopped, the problem is always
     reproduced.
   - When the agent of "vedbaek" is stopped, the problem doesn't
     happen.  Plot chart is drawn as expected.
   
   Related Files and Output:
   The following files are put in 04505.69C.760.20080901a.tar.Z in
   ECuRep:/ecurep/pmr/0/4/04505,69C,760 directory.
   TEP: kjr.trace.params=ERROR (UNIT:Navigator ALL) (UNIT:DataBus
   ALL)(UNIT:Attribute ALL) (UNIT:Workspace ALL) (UNIT:Adapter
   ALL))(UNIT:Graph ALL)
   - pmr04505_steps_to_create_problem.xls
   - TEP/KCJvedbaek.LOG
   - TEP/kincinfo-i.out
   - TEP/kcjerror_vedbaek.log
   - TEP/kcjras1_vedbaek.log
   
   
    
   
   

LOCAL FIX

PROBLEM SUMMARY
 *  If the legends for a chart view are customized while it is
   charting data from two or more agents and later the number of
   online agents is reduced to one, an additional legend line using
   default text and colors is sometimes added.
   
   
    
   
   

PROBLEM CONCLUSION
 *  The legends for a chart view are customized while it is charting
   data from two or more agents.  Later the number of online agents
   is reduced to one.  On the next refresh, if the last remaining
   agent is not the one associated with the first legend entry, a
   new legend line using default text and colors will be added to
   track the ongoing data flow from the remaining agent.
   
   The logic was changed to remove special handling of single-row
   result sets that was causing the association between customized
   settings and the data series to be lost when agents went online
   and offline.
   
   After installing the fix, it may be necessary to repeat the
   customization of some previously saved legend settings.  Not all
   views will be affected and it is not practical to identify those
   that could be affected because there are too may factors
   involved.  For those that are impacted, the settings should only
   need to be re-customized the first time the affected view is
   visited after the fix has been installed.  For views displaying
   data from more than one managed system, the customizations
   should be done while all the managed systems providing data to
   the view are online.
   
   
   The fix for this APAR is contained in the following maintenance
   packages:
   
      | interim fix | 6.2.0.2-TIV-ITM-IF0001
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   IZ31919
   
   
 * REPORTED COMPONENT NAME
   TEP
   
   
 * REPORTED COMPONENT ID
   5724C04EP
   
   
 * REPORTED RELEASE
   620
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2008-09-11
   
   
 * CLOSED DATE
   2009-02-17
   
   
 * LAST MODIFIED DATE
   2009-02-17
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   TEP
   
   
 * FIXED COMPONENT ID
   5724C04EP
   
   

APPLICABLE COMPONENT LEVELS
 * R620 PSY
   UP