Title: IBM PI68196: WMQ CLUSRCVR CHANNEL WITH CHLAUTH DOES NOT USE MCAUSER ID - United States

Text:
z/os  A FIX IS AVAILABLE
Obtain the fix for this APAR.


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  Messages arriving over a cluster receiver channel are put to
   the dead letter queue with an MQRC 2035 as the USER ID used to
   check authorization is defaulting to the CHIN task authority
   instead of to the MCAUSER ID which was mapped by CHLAUTH rule.
   Change Team finds that the CHLAUTH rule is matched as
   pStatus.MCAUser is set based on the rule however,
   CD.MCAUserIdentifier is blank. This results in MQPUT being
   issued using the CHIN userid. The issue in rriCheckChlAuth
   is that MCAUserIdentifier is not updated in the status entry.
   
   
    
   
   

LOCAL FIX

PROBLEM SUMMARY
 *  ****************************************************************
   * USERS AFFECTED:                                              *
   * All users of IBM MQ for z/OS Version 9 Release 0             *
   * Modification 0.                                              *
   ****************************************************************
   * PROBLEM DESCRIPTION:                                         *
   * When using CHLAUTH QMGRMAP authentication records to set     *
   * MCAUSERID to receiver channels, incoming messages are put to *
   * dead letter queue with MQRC 2035 MQRC_NOT_AUTHORIZED.        *
   ****************************************************************
   * RECOMMENDATION:                                              *
   * N/A                                                          *
   ****************************************************************
   DISPLAY CHSTATUS shows that the correct MCA userID has been set
   to the channel but messages are discarded to dead letter queue.
   The channel definition control blocks have two fields to set the
   MCA userId: MCAUserID and MCAUserIdentifier. The CHLAUTH MCAUser
   is only copied to MCAUserID and MCAUserIdentifier is left blanks
   resulting in messages put to dead letter queue with MQRC 2035
   MQRC_NOT_AUTHORIZED.
   
   
    
   
   

PROBLEM CONCLUSION
 *  CMQXRMSA (rriCheckChlAuth) has been changed to copy MCAUser to
   MCAUserID and MCAUserIdentifier in the channel definition
   control blocks.
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   PI68196
   
   
 * REPORTED COMPONENT NAME
   MQ Z/OS V9
   
   
 * REPORTED COMPONENT ID
   5655MQ900
   
   
 * REPORTED RELEASE
   000
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt / Xsystem
   
   
 * SUBMITTED DATE
   2016-08-26
   
   
 * CLOSED DATE
   2016-09-12
   
   
 * LAST MODIFIED DATE
   2016-11-02
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
    PI67200 [http://www-01.ibm.com/support/docview.wss?uid=swg1PI67200]
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
    UI40761
   
   

MODULES/MACROS
 *  CMQXRMSA
   
   
    
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   MQ Z/OS V9
   
   
 * FIXED COMPONENT ID
   5655MQ900
   
   

APPLICABLE COMPONENT LEVELS
 * R000 PSY UI40761 [HTTPS://WWW14.SOFTWARE.IBM.COM/WEBAPP/SET2/ORDERMEDIA/SHOPCART?PTFS=UI40761]
   UP16/10/14 P F610
   
   

FIX IS AVAILABLE
 * SELECT THE PTF APPROPRIATE FOR YOUR COMPONENT LEVEL. YOU WILL BE REQUIRED TO SIGN IN. DISTRIBUTION ON PHYSICAL MEDIA IS NOT AVAILABLE IN ALL COUNTRIES.