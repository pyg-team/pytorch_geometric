Title: IBM JR48321: INFINITE LOOP OCCURS WHEN HUMAN SERVICE WITH A TRANSITION FROM ONE COACH BACK TO THE SAME COACH WHICH CHANGES A LIST CONTAINSNU - United States

Text:
  FIXES ARE AVAILABLE
Version 8.5 Refresh Pack 5 for the IBM Business Process Manager products [http://www-01.ibm.com/support/docview.wss?uid=swg24037683]
Download Version 8.0.1 Fix Pack 3 for the IBM Business Process Manager products [http://www-01.ibm.com/support/docview.wss?uid=swg24037734]
Version 8.5.0 Fix Pack 2 for the IBM Business Process Manager products [http://www-01.ibm.com/support/docview.wss?uid=swg24040683]


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  When a Human Service transitions from one Coach step back to
   the same Coach step (with potentially other steps in between)
   the user will not observe a page refresh. Instead, only the
   delta data is transferred back to the client.
   If this delta contains a change to a variable that is a list
   and that list contains null, the thread running the Coach will
   enter an end-less loop and the server will appear hanging.  The
   user may detect high CPU utilization on one or more threads.
   The Java stack of the thread in a javacore file looks like the
   following:
   3XMTHREADINFO      "WebContainer : 7"
   J9VMThread:0x0000000006172A00,
   j9thread_t:0x00007F6AD0A4C940,
   java/lang/Thread:0x000000001C8D1118,
   state:CW, prio=5
   3XMJAVALTHREAD            (java/lang/Thread getId:0xF8,
   isDaemon:true)
   3XMTHREADINFO1            (native thread ID:0x20E7, native
   priority:0x5, native policy:UNKNOWN)
   3XMTHREADINFO2            (native stack address range
   from:0x00007F6A64C28000, to:0x00007F6A64C69000, size:0x41000)
   3XMHEAPALLOC             Heap bytes allocated since last GC
   cycle=0
   (0x0)
   3XMTHREADINFO3           Java callstack:
   4XESTACKTRACE                at
   com/lombardisoftware/core/TWObject.getArrayData(TWObject.java:75
   0(Compil
   ed Code))
   4XESTACKTRACE                at
   com/lombardisoftware/server/ejb/workflow/EJBWorkflowManagerBean.
   addObjectToJSON(EJBWorkflowManagerBean.java:1885(Compiled Code))
   4XESTACKTRACE                at
   com/lombardisoftware/server/ejb/workflow/EJBWorkflowManagerBean.
   getSymbolTableDifferencesAsJSON(EJBWorkflowManagerBean.java(Comp
   iled Code))
   4XESTACKTRACE                at
   com/lombardisoftware/server/ejb/workflow/EJBWorkflowManagerBean.
   generateStayOnUiResult(EJBWorkflowManagerBean.java:1702(Compiled
   Code))
   There will also be a WSVR0605W message logged for the thread
   [10/25/13 16:29:02:349 EDT] 0000001c ThreadMonitor W
   WSVR0605W: Thread "WebContainer : 7" (0000006b) has been active
   for 732844 milliseconds and may be hung.  There is/are 1
   thread(s) in total in the server that may be hung.
    at
   com.lombardisoftware.server.ejb.workflow.EJBWorkflowManagerBean.
   addObjectToJSON(EJBWorkflowManagerBean.java:1888)
    at
   com.lombardisoftware.server.ejb.workflow.EJBWorkflowManagerBean.
   getSymbolTableDifferencesAsJSON(EJBWorkflowManagerBean.java)
   
   
    
   
   

LOCAL FIX
 *  Make sure list items do not contain null values in
   their human service.
   
   
    
   
   

PROBLEM SUMMARY
 *  Human Service does not transition and causes CPU starvation
   
   PROBLEM DETAILED DESCRIPTION:
   When a Human Service transitions from one Coach step back to the
   same Coach step with potentially other steps in between; the
   client will not observe a page refresh.  Instead, only the
   delta data is transferred back to the client. If this delta
   contains a change to a variable that is a list and that list
   contains null, the server will end in end-less loop.
   
   
    
   
   

PROBLEM CONCLUSION
 *  The endless loop was removed by correcting the logic causing it.
   
   FIX AVAILABILITY:
   iFix for 8.0.1.1 is available on Fix Central, search for APAR
   JR48321 at http://www.ibm.com/support/fixcentral/ [http://www.ibm.com/support/fixcentral/]
   
   For 8.0.1.2 the iFix is superseded by JR49373 [http://www-01.ibm.com/support/docview.wss?uid=swg1JR49373].
   
   iFix for 8.5.0.0 is available on Fix Central, search for APAR
   JR48321 at http://www.ibm.com/support/fixcentral/ [http://www.ibm.com/support/fixcentral/]
   
   iFix for 8.5.0.1 is available on Fix Central, search for APAR
   JR48321 at http://www.ibm.com/support/fixcentral/ [http://www.ibm.com/support/fixcentral/]
   
   Fix is also targetted for inclusion in next fixpack for BPM
   8.0.1, BPM 8.5.0
   
   When obtaining any of the above fixes, be sure to download the
   accompanying readme for itself, and any prerequisite fixes, and
   review them thoroughly.
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   JR48321
   
   
 * REPORTED COMPONENT NAME
   BPM ADVANCED
   
   
 * REPORTED COMPONENT ID
   5725C9400
   
   
 * REPORTED RELEASE
   801
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2013-10-30
   
   
 * CLOSED DATE
   2014-08-01
   
   
 * LAST MODIFIED DATE
   2014-08-01
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   BPM STANDARD
   
   
 * FIXED COMPONENT ID
   5725C9500
   
   

APPLICABLE COMPONENT LEVELS
 * R801 PSY
   UP
   
   
 * R850 PSY
   UP