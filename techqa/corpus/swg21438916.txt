Title: IBM Webseal fails to load the ARM library on AIX - United States

Text:
71TT-PLAN; 71TT-INS; 71TT-TS; 71GEN-DCOLL; 71GEN-ARM TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 Webseal does not provide ARM/TTAPI output even after it has been configured to do so. This is due to setuid bit of the webserver being set, which in turns disables LIBPATH environment variable. 

SYMPTOM
Webseal does not provide ARM/TTAPI output even after it has been configured to do so.


CAUSE
No TTAPI events are generated by the ARM library plug-in. Closer examination via strace will show that the ARM/TTAPI libraries are not found because it is not in the LIBPATH, even when LIBPATH was explicitly set in the environment,


To instrument Webseal, ITCAM for Transactions provides an ARM library which gets loaded. On AIX, when setuid bit is set on a binary (which is a common security procedure for webservers), OS security automatically remove LIBPATH to prevent malicious libraries from being executed as another user. WebSEAL's startup script, pdweb_start, has the setuid bit enabled by default. This in turn causes Webseal to fail to load the TTAPI library.


RESOLVING THE PROBLEM
There are several options to resolve this problem, the user should evaluate each option in the context of their own security polices and pick the option that is most appropriate - 

 1. Start WebSEAL, via pdweb_start, as the root user. 
 2. Remove the setuid bit on Webseal, and create a wrapper that is "setuid" to the same user as pdweb_start. This wrapper can then call Webseal. Note that setting the setuid bit on shell scripts will not have any effect, and must be done on a binary executable.