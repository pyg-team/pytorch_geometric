Title: IBM WebSphere MQ client connection failures due to resource shortages - United States

Text:
XC035007 ZT049001 ZS266000 ZC000040 ZX005025 XY195001 XC381009 Insufficient system resources exist Not enough storage is available xecL_E_TOO_MANY_HANDLES xecP_E_NO_RESOURCE rrcE_CREATE_THREAD_ERROR rc 1450 (NO_SYSTEM_RESOURCES) from WriteFile rc 12 (ENOMEM = insufficient system resources)v TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 Your WebSphere MQ client suddenly fails when attempting to connect to your MQ server. 

SYMPTOM
You receive many FDCs for the AMQRMPPA and RUNMQLSR processes. The FDCs indicate a shortage of system resources.

xecP_E_NO_RESOURCE 
rrcE_CREATE_THREAD_ERROR 
xecL_E_TOO_MANY_HANDLES 
rc 1450 (NO_SYSTEM_RESOURCES) from WriteFile
rc 12 (ENOMEM = insufficient system resources) 


CAUSE
Recent changes to your Security Exit program caused the resource problem.

DIAGNOSING THE PROBLEM
The following errors were reported in FDC files on the server: 

Probe Id :- XC035007 
Component :- xcsCreateThread 
Process Name :- C:\Program Files\IBM\WebSphere MQ\bin\amqzlaa0.exe 
Major Errorcode :- xecP_E_NO_RESOURCE 
Comment1 :- Not enough space 

Probe Id :- ZT049001 
Component :- zutPreReadMachineIniFile 
Process Name :- C:\Program Files\IBM\WebSphere MQ\bin\amqmsrvn.exe 
Major Errorcode :- xecF_E_UNEXPECTED_RC 
Minor Errorcode :- xecU_W_KEY_NOT_FOUND 

Probe Id :- ZS266000 
Component :- lpiObtainQMDetails 
Process Name :- C:\Program Files\IBM\WebSphere MQ\bin\amqmsrvn.exe 
Major Errorcode :- xecF_E_UNEXPECTED_RC 
Minor Errorcode :- MQRC_UNEXPECTED_ERROR 

Probe Id :- ZC000040 
Component :- zcpCreatePipe 
Process Name :- C:\Program Files\IBM\WebSphere MQ\bin\amqzxma0.exe
Major Errorcode :- xecF_E_UNEXPECTED_RC 
Minor Errorcode :- xecL_E_TOO_MANY_HANDLES

Probe Id :- ZX005025
Component :- zxcProcessChildren
Process Name :- C:\Program Files\IBM\WebSphere MQ\bin\amqzxma0.exe 
Major Errorcode :- zrcX_PROCESS_MISSING 

Probe Id :- XY195001 
Component :- xstSemaphoreRequest 
Process Name :- C:\Program Files\IBM\WebSphere MQ\bin\amqxssvn.exe 
Major Errorcode :- xecL_E_TOO_MANY_HANDLES 
Comment1 :- Failed to create Event semaphore:Global\mqm.qmgrs.MAIL1!STATION 
Comment2 :- Not enough storage is available to process this command. 

Probe Id :- XC381009 
Component :- xcsDisplayMessageForSubpool 
Process Name :- C:\Program Files\IBM\WebSphere MQ\bin\RUNMQLSR.exe 
Major Errorcode :- xecF_E_UNEXPECTED_SYSTEM_RC 
Comment1 :- WinNT error 1450 from WriteFile. 
Comment2 :- Insufficient system resources exist 


RESOLVING THE PROBLEM
Make corrections to your security exit so that it does not leak system resources like handles and memory.

 

PRODUCT ALIAS/SYNONYM
 wmq/mq