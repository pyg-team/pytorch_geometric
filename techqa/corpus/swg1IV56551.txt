Title: IBM IV56551: ISSUE WITH RECEIVED CA-SIGNED CERTIFICATE WITH NC_GSKCMD - United States

Text:
 SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS FIXED IF NEXT.
    
   
   

ERROR DESCRIPTION
 *  Customer trying to setup SSL on OMNIbus server, but nc_gskcmd
   refuses to receive a certificate signed by an external CA (the
   IBM internal CA in fact).  Receiving the same certificate
   through nc_ikeyman inside the same kdb works correctly.
   
   OMNIbus is at version 7.4 FP2 running on AIX 7.1.
   
   Here are the commands we used to create the kdb and add the
   signer
   certificates:
   /usr/bin/su - netcool -c "/opt/IBM/tivoli/netcool/bin/nc_gskcmd
   -keydb -
   create -type cms -db
   /opt/IBM/tivoli/netcool/etc/security/keys/omni.kdb
   -pw $KEYSTORE_PWD -stash -strong -fips"
   /usr/bin/su - netcool -c "/opt/IBM/tivoli/netcool/bin/nc_gskcmd
   -cert -
   add -db /opt/IBM/tivoli/netcool/etc/security/keys/omni.kdb -pw
   $KEYSTORE_PWD -trust enable -label ibmrootca -file
   /tmp/carootcert.der"
   /usr/bin/su - netcool -c "/opt/IBM/tivoli/netcool/bin/nc_gskcmd
   -cert -
   add -db /opt/IBM/tivoli/netcool/etc/security/keys/omni.kdb -pw
   $KEYSTORE_PWD -trust enable -label ibminterca -file
   /tmp/caintermediatecert.der"
   
   Here is the command we used to generate the certificate request:
   /usr/bin/su - netcool -c "/opt/IBM/tivoli/netcool/bin/nc_gskcmd
   -
   certreq -create -db
   /opt/IBM/tivoli/netcool/etc/security/keys/omni.kdb -
   pw $KEYSTORE_PWD -label AGG_P -size 2048 -dn
   cn=AGG_V,OU=MD,O=IBM,
   L=BROMONT,ST=QC,C=CA -file
   /opt/IBM/tivoli/netcool/etc/security/keys/AGG_P.arm"
   
   Finally, here is the command we used to received the signed
   certificate
   (that is the command that doesn't work):
   /usr/bin/su - netcool -c "/opt/IBM/tivoli/netcool/bin/nc_gskcmd
   -cert -
   receive -db /opt/IBM/tivoli/netcool/etc/security/keys/omni.kdb
   -pw
   $KEYSTORE_PWD -file
   /opt/IBM/tivoli/netcool/etc/security/keys/AGG_P.der
   -default_cert enable -fips"
   
   
   Latest update from GSKit team:
   
   Yes, we know that problem. GSKit validates the certs on input
   and has problem
   with the ordering of the certs if the validation of one depends
   on the others that it has not processed yet.
   
   It used to be an error if the ordering was not correct or the
   root cert was not already there, now it is just a warning
   message and the load should happen
   anyway.
   
   A trial validation, once all certs are loaded, can be attempted
   using a command similar to the following:
   
     >gsk8capicmd -cert -validate -db key.kdb -pw jjj -label mycert
   
   iKeyman does no validation so it just imports them. There is
   currently no way to check that all certs required for a
   validation are present with
   ikeyman.
   
   The bundler should look for defect id 6558 in the change log
   (a.k.a. manifest) of of the next GSKit v8 release to confirm
   that a fix is included which
   adds the warning message where cert loads without the full cert
   chain are possible.
   
   
    
   
   

LOCAL FIX
 *  No fix yet.
   
   
    
   
   

PROBLEM SUMMARY
 *  ****************************************************************
   * USERS AFFECTED:                                              *
   * Users of an internal IBM Certificate with nco_gskcmd         *
   ****************************************************************
   * PROBLEM DESCRIPTION:                                         *
   * he issue happens only when there is a certificate file which *
   * contains multiple certificates. He has seen the issue in DER *
   * or pkcs7 format. If he tries to import the certificate file  *
   * which contains multiple certs from GSKIT command line, it    *
   * fails. If he takes the certificate file and lists the        *
   * contents with openssl, and extracts each certificate into    *
   * individual files, the import is successful. The GSKIT        *
   * ikeyman GUI works with all the files and it a valid          *
   * workaround in this case.                                     *
   ****************************************************************
   * RECOMMENDATION:                                              *
   * Use nco_ikeyman instead of nco_gskcmd                        *
   ****************************************************************
   
   
    
   
   

PROBLEM CONCLUSION

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   IV56551
   
   
 * REPORTED COMPONENT NAME
   NETCOOL/OMNIBUS
   
   
 * REPORTED COMPONENT ID
   5724O4800
   
   
 * REPORTED RELEASE
   740
   
   
 * STATUS
   CLOSED FIN
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2014-03-11
   
   
 * CLOSED DATE
   2014-03-25
   
   
 * LAST MODIFIED DATE
   2014-03-25
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION

APPLICABLE COMPONENT LEVELS
 * R740 PSY
   UP