Title: IBM "VPA1_CreatePath failure detected 1007" and "error code 44" - United States

Text:
GSKIT44 SQL1 SQL1LOGONINFOERROR TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 TEP login fails with KFWITM393E error mentioning userid or password invalid. In the TEPS log, an error referencing "Create Path Error. status 1007" appears. 

SYMPTOM
1. TEP Client login fails with a KFWITM393E error code. 

2. TEPS Server log (*cq_KfwServices_5*.log file(s)): error similar to the following appears:

(54AEF677.0000-D:kdssqrun.c,964,"CreatePath") Create Path Error. status 1007 path NCS:{SOCKET=ip.spipe:#12.34.56.78[3660]} CT/DS:{SERVER=SRVR01}

3. TEMS log around the same timestamp shows errors similar to the following:

(54AEF677.0018-1A:kglcry.c,2808,"initializeICC") ICC initialization: failed to load ICC DLL Library /opt/IBM/ITM/li6243/gs/lib64/libgsk8iccs_64.so.
(54AEF677.0019-1A:kglcry.c,3499,"CRY_Decrypt") Function failed with error code 44
(54AEF677.001A-1A:kdspac1.c,1602,"VPA1_CreatePath") VPA1_CreatePath failure detected 1007.

Key message is the "Function failed with error code 44" message.


CAUSE
The key consideration is that this was a 64-bit TEMS build, running on a 64-bit system. Yet, the log showed it was trying to load a 32-bit GSKit image with a "lib64" path for a 64-bit library, which doesn't exist. The library can't load, so the call fails, and TEP Client login / authentication fails.


ENVIRONMENT
TEP login using standard authentication method (authentication at the TEMS using username, not LDAP).



RESOLVING THE PROBLEM
--Identify the correct GSKit 64-bit image path on the system. 

For example, on Linux x64 a path like /opt/IBM/ITM/lx8266/gs/lib64 is expected. 

--View the TEMS config file and confirm what's set for ICCRTE_DIR and GSKLIB, and fix the values to match the 64-bit system. 

For example, if the TEMS config file was at /opt/IBM/ITM/config/host123_ms_hubtems.config, and the following incorrect values were seen:



ICCRTE_DIR='/opt/IBM/ITM/li6243/gs'
GSKLIB='lib' 
Then the correct values should be edited to replace it: 

ICCRTE_DIR='/opt/IBM/ITM/lx8266/gs'
GSKLIB='lib64' 
--Also edit the ms.ini file to include the corrected values. 

--Stop / restart the Hub TEMS for the changes to take effect. 

Afterwards, verify the errors seen in the logs above no longer appear, and that the TEP Client login succeeds.