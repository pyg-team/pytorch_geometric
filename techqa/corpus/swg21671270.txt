Title: IBM Lotus Domino agent does not return data (error 127) - United States

Text:
5724B98D0TR TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 Lotus Domino agent workspaces in Tivoli Enterprise Portal (TEP) do not return data, kgbclient process fails due to "Dependent module libnotes_r.a could not be loaded", CR=127 error. 

SYMPTOM
No data in TEP workspaces for Lotus Domino agent.


CAUSE
Domino monitoring agent starts collector program (kgbclient) as Notes user - for example notesusr, as the following command:
+ su notesusr -c /dombin8/lotus/bin/kgbclient <instance>

If the environment is set up such that the library in /opt/lotus/notes/latest/ibmpow/ is not loaded, 

then the kgbclient process fails to start and agent cannot collect monitoring data from the Domino server.


ENVIRONMENT
AIX



DIAGNOSING THE PROBLEM
1) Start the Domino agent instance. Check 'ps -ef' output. if kgbagent process is running but kgbclient process is not running, then you may have encountered the problem of this technote. 

2) Check in the log file named <host>_gb_<number>.log such as ibmhost_gb_1396952672.log in ITM/log directory. Look for following errors:
+ su notesb -c /dombin8/lotus/bin/kgbclient ibmdom1 
exec(): 0509-036 Cannot load program 
/dombin8/lotus/notes/latest/ibmpow/kgbclient because of the following errors: 
0509-150 Dependent module libnotes_r.a could not be loaded. 
0509-022 Cannot load module libnotes_r.a. 
0509-026 System error: A file or directory in the path name does not exist. 
+ CR=127 
+ date 
+ echo Tue Apr 8 06:24:42 EDT 2014 : kgbclient exited with return code(127) 




RESOLVING THE PROBLEM
Use following steps to resolve the problem: 

1) Create following soft links, where /opt/lotus/notes is Lotus Notes directory:
ln -s /opt/lotus/notes/latest/ibmpow/libxmlproc_r.a /usr/lib/libxmlproc_r.a 
ln -s /opt/lotus/notes/latest/ibmpow/libnotes_r.a /usr/lib/libnotes_r.a 
ln -s /opt/lotus/notes/latest/ibmpow/libndgts_r.a /usr/lib/libndgts_r.a 

Note: Change the Lotus Notes directory path (/opt/lotus/notes/) as per your installation. 

2) Stop the Lotus Domino agent, make sure the kgbagent process is stopped. 

3) Restart the Lotus Domino monitoring agent.