Title: IBM How do I trace DB2 lock suspension  problems ? - United States

Text:
locking; performance manager; z/OS; OS/390 TECHNOTE (FAQ)

QUESTION
 How do I trace DB2 lock suspension problems ? 

ANSWER
DB2 for z/OS performance trace class(6,7) traces the IFCIDs that provide summary and detailed lock information. How long you run these traces depends on the nature of the problem. For most problems you run the traces for about 30 seconds or less.

You can minimize the trace data generated by starting the trace for a specific PLAN or AUTHID that is experiencing the problem. For example: 

-START TRACE(PERFM) CLASS(6,7) AUTHID(myauth)

If you are only interested in the Lock Suspensions and Resumes, start the traces only for IFCID(44,45) and use a User Trace Class such as CLASS(31). 

For example:
-START TRACE(PERFM) CLASS(31) IFCID(44,45) PLAN(myplan)

From the DB2 trace records you can generate lock suspension reports and traces by using the following OMPE batch control cards:

LOCKING REPORT LEVEL(SUSPENSION)
ORDER(DATABASE-PAGESET) for summary report.
LOCKING TRACE LEVEL (DETAIL) for detailed trace.

RELATED INFORMATION
 OMEGAMON XE for DB2 Performance Expert [http://publib.boulder.ibm.com/infocenter/tivihelp/v15r1/topic/com.ibm.omegamon.xe.pe_db2.doc_5.2.0/ko2rr/lkstrc.htm]