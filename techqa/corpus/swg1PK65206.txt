Title: IBM PK65206: CICS 3270 BRIDGE RECEIVES ABENDAEXZ IN DFHBRMP BECAUSE REQUEST_FACILITYTOKEN BEGINS WITH X'D0' - United States

Text:
z/os  A FIX IS AVAILABLE
Obtain the fix for this APAR.


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  3270 bridge (LINK3270) receiving AbendAEXZ in DFHBRMP, and an
   invalid token is observed in CICS' Trace.
   In the AOR, the exception trace entry shows:
   AP 2144 BRFM *EXC* - INVALID_TOKEN -
           FUNCTION(ALLOCATE_BRIDGE_FACILITY)
           REQUEST_FACILITYTOKEN(D02C029D0000001D)
   The INVALID_TOKEN happens because the REQUEST_FACILITYTOKEN
   starts with x'D0' (which is the character '}').  DFHBRFR doesn't
   accept a token that begins with x'D0'.
   
   
    
   
   

LOCAL FIX
 *  Stop all regions that use the Routing dataset DFHBRNSF ('routing
   regions'), define a new DFHBRNSF file, and restart the routing
   regions; this should reset the connection_number back at '0',
   correcting the problem.
   Additional Symptom(s) Search Keyword(s):
   KIXREVKMG
   
   
    
   
   

PROBLEM SUMMARY
 *  ****************************************************************
   * USERS AFFECTED: All CICS users.                              *
   ****************************************************************
   * PROBLEM DESCRIPTION: Abend AEXZ in DFHBRMP (Link3270         *
   *                      bridge module) because                  *
   *                      REQUEST_FACILITYTOKEN begins with       *
   *                      x'D0'.                                  *
   ****************************************************************
   * RECOMMENDATION:                                              *
   ****************************************************************
   The Link3270 bridge facility is receiving an ABEND AEXZ
   in DFHBRMP because the number of times routing regions,
   using the same DFHBRNSF data set, were started reached
   x'3400'. This resulted in an invalid FACILITYTOKEN being
   allocated.
   
   
    
   
   

PROBLEM CONCLUSION
 *  DFHBRNS has been changed to issue message DFHBR0509 warning
   the user that they are approaching or have reached the maximum
   number of times routing regions, using the same DFHBRNSF data
   set, can be started.
   The message explains that the DFHBRNSF data set should be
   re-initialized. This resets the connection_number (number of
   times a routing region has been started) back down to 0.
   
   The CICS Transaction Server for z/OS Messages and Codes 3.1
   (GC34-6442-03) and 3.2 (GC34-6827-01) will be updated to
   included message DFHBR0509 as follows:
   
   DFHBR0509 "DATE TIME APPLID" YOU ARE
             APPROACHING OR HAVE REACHED THE MAXIMUM NUMBER OF
             TIMES A LINK3270 BRIDGE ROUTING REGION CAN BE
             STARTED.
   
   EXPLANATION:  The maximum number of times Link3270 bridge
   routing regions that use the same DFHBRNSF data set can be
   started is approaching or has already been reached.  An
   invalid facilitytoken is allocated if the number of times
   these CICS routing regions are connected
   (connection_number), exceeds the maximum.
   
   This message is issued if you have exceeded 90% of the
   available times routing regions using the same DFHBRNSF data
   set can be started.
   
   SYSTEM ACTION:  The Link3270 bridge request continues to
   be processed. When 100% of the available times routing
   regions, using the same DFHBRNSF data set, can be started is
   reached, the request abends AEXZ.
   
   USER RESPONSE:  At a convenient time, stop all regions
   that use the Link3270 bridge routing data set, DFHBRNSF, and
   redefine it.  This resets connection_number to 0. Restart
   your routing regions.
   
   DESTINATION:  Console and Transient Data Queue CSBR
   
   MODULE:  DFHBRNS
   
   XMEOUT PARAMETERS: date, time, applid
   The same message will be included in the DFHCMACD data set.
   
   
    
   
   

TEMPORARY FIX
 *  FIX AVAILABLE BY PTF ONLY
   
   
    
   
   

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   PK65206
   
   
 * REPORTED COMPONENT NAME
   CICSTS V3 Z/OS
   
   
 * REPORTED COMPONENT ID
   5655M1500
   
   
 * REPORTED RELEASE
   400
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2008-04-28
   
   
 * CLOSED DATE
   2008-07-30
   
   
 * LAST MODIFIED DATE
   2008-08-01
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
    UK38519 UK38520
   
   

MODULES/MACROS
 *     DESBRNS  DFHBRNS  DFHMEBRC DFHMEBRE DFHMEBRK
   DFH65206 MFHMEBRE
   
   
    
   
   

Publications Referenced GC34644203 GC34682701 FIX INFORMATION
 * FIXED COMPONENT NAME
   CICSTS V3 Z/OS
   
   
 * FIXED COMPONENT ID
   5655M1500
   
   

APPLICABLE COMPONENT LEVELS
 * R400 PSY UK38519 [HTTPS://WWW14.SOFTWARE.IBM.COM/WEBAPP/SET2/ORDERMEDIA/SHOPCART?PTFS=UK38519]
   UP08/08/01 P F807
   
   
 * R500 PSY UK38520 [HTTPS://WWW14.SOFTWARE.IBM.COM/WEBAPP/SET2/ORDERMEDIA/SHOPCART?PTFS=UK38520]
   UP08/08/01 P F807
   
   

FIX IS AVAILABLE
 * SELECT THE PTF APPROPRIATE FOR YOUR COMPONENT LEVEL. YOU WILL BE REQUIRED TO SIGN IN. DISTRIBUTION ON PHYSICAL MEDIA IS NOT AVAILABLE IN ALL COUNTRIES.