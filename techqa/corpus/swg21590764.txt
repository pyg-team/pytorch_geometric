Title: IBM IMCDC : 'Error 22 returned when trying to open file (...) A system call received a parameter that is not valid.' while accessing redo logs - United States

Text:
error 22; cio; o_cior; o_cio; syscall; redo logs; oracle 11; aix 6.1 TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 Source instance running on AIX 6.1 with Oracle 11g (version >= 11.2.0.2) fails to open redo log files with error 22. Archive logs are accessed and processed without problem. As a result subscriptions are not able to replicate most recent data. 

CAUSE
AIX 6.1 has introduced a new flag O_CIOR which can be used in file open syscall. From version 11.2.0.2 Oracle Database uses this flag while opening redo log files. But if filesystem on which redo log files are stored is mounted with "cio" mount option or parameter mirror_open_log_with_cio is set on source datastore, CDC uses flag O_CIO while opening redo log files. As those two flags are incompatible, CDC fails to open and report error 22.

ENVIRONMENT
AIX 6.1 with Oracle 11g (version >= 11.2.0.2)

DIAGNOSING THE PROBLEM
Check if trace files located in <CDC_install_dir>\instance\<instance_name>\log directory contain an error message 'Error 22 returned when trying to open file (...) A system call received a parameter that is not valid.' 




Check if CDC is running on AIX 6.1 with Oracle 11g (version >= 11.2.0.2). 

Check if filesystem on which redo logs are stored is mounted with "cio" option or parameter mirror_open_log_with_cio is set on source datastore.


RESOLVING THE PROBLEM
If filesystem on which redo logs are stored is mounted with "cio" option, remove "cio" option and remount file system. 

If parameter mirror_open_log_with_cio is set on the source datastore, remove it and restart an instance.