Title: IBM Collecting Data: Read First for ITM Summarization and Pruning Agent (S&P) V6 - United States

Text:
 TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 Collecting Data documents helps with problem determination and saves time resolving Problem Management Records (PMRs). 

RESOLVING THE PROBLEM
Collecting data early, even before opening the PMR, helps IBMÂ® Support quickly determine if: 

Symptoms match known problems (rediscovery).
There is a non-defect problem that can be identified and resolved.
There is a defect that identifies a workaround to reduce severity.
Locating root cause can speed development of a code fix.

Collecting Data: Readme first table of contents:
[http://www.ibm.com/i/v14/rules/dotted_blue_rule_443.gif] 

[/support/docview.wss?uid=swg22007581&amp;aid=1] Gathering general information [/support/docview.wss?uid=swg22007581&amp;aid=2] Gathering component specific information [/support/docview.wss?uid=swg22007581&amp;aid=3] ITM Collector Tool [/support/docview.wss?uid=swg22007581&amp;aid=4] Manually gathering data [/support/docview.wss?uid=swg22007581&amp;aid=5] Additional information to collect for the Windows Agent [/support/docview.wss?uid=swg22007581&amp;aid=6] Submitting information to IBM Support [http://www.ibm.com/i/v14/rules/dotted_blue_rule_443.gif] 

 

Gathering general information 
You can use the IBM Support Assistant (ISA) to capture general S&P information. Alternatively you can manually collect general information from the environment. Entering general information into an electronically-opened PMR (through SR) prevents having to manually provide that info to Level 1 support on the phone. 

The S&P is enabled with default RAS1 (Reliability, Accessibility and Serviceability) settings. If you do not know what the problem is, then collecting the general S&P logs and configuration files is should help to further isolate the problem. For these instances see the section on manually collecting information and send the data with the default trace settings. 

Gathering component specific information 
Several components can be involved in a problem with the S&P. This section will detail the common component areas and some trace settings that can be helpful in isolating issues related to them. These trace settings are suggested but will not isolate every problem scenario. Logs with default trace settings can still be provided to IBM Support, and the logs can be reviewed to help suggest additional trace settings. 

ITM Tivoli Summarization and Pruning Agent V6 and Related Components 

 * General S&P tracing recommendations and log information 
   Update the S&P configuration file to set RAS1 tracing:  * Windows - CANDLEHOME\tmaitm6\KSYENV 
      UNIX/Linux - CANDLEHOME/config/sy.ini 
   
   
 * Default tracing level:  * KBB_RAS1=ERROR 
      
   
   
 * The suggested trace level for diagnosing the vast majority (~90%) of S&P problems:  * KBB_RAS1=ERROR (UNIT:ksy1 ALL) 
      
   
   
 * Intense S&P agent tracing begins with ksy2 and continues through ksy5, per the following:  * Connection level trace: (UNIT:ksy2 ALL) 
      Statement level trace: (UNIT:ksy3 ALL) 
      ResultSet level trace: (UNIT:ksy4 ALL) 
      Column value level trace (UNIT:ksy5 ALL) 
      
   
   
 * For S&P startup problems, use the following:  * KBB_RAS1=ERROR (UNIT:ksz ALL) (UNIT:ksy1 ALL) 
      
   
   
 * To see what statements were issued by the S&P during summarization or pruning, use:  * SQL statements only: (UNIT:ksysql ALL) 
      SQL statements and value parameters: (UNIT:ksysql1 ALL) 
      
   
   
 * For problems during S&P configure or reconfigure, get the following in CANDLEHOME/logs:  * Cfg_PluginProcessing.trc 
      <hostname>_sy_ksyconfigureagent_<hextime>-<0-9>.log 
      KSYCFG.LOG 
      
   
   

For communication problems or to trace the RPC layer, use KBS_DEBUG=Y in S&P config file 
Restart the S&P for the above changes to take effect**  * 
   
 * 
 * 
 * Summarization and Pruning
 *  
 * Process Flow 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 *  Collector Tool 


As of ITM V6.2 a new tool called pdcollect exists to aid in collecting PD information. Instructions for using pdcollect in a V6.1 ENV can be found from the technote. pdcollect is available for Linux, UNIX, Windows. Once the you have collected the PD information with pdcollect, upload it to IBM using the steps provided in this URL: Exchanging information with IBM Technical Support [http://www-306.ibm.com/software/support/exchangeinfo.html] 

Manually gathering general information 
This section details how to manually collect information from the on which the S&P is installed: 

From a command prompt on a Unix/Linux S&P, collect: 
# cinfo -i > /tmp/cinfo_i.out 
# cinfo -t > /tmp/cinfo_t.out 

From a command prompt on a Windows S&P, collect: 
C:\> kincinfo -i > \cinfo_i.out 
C:\> kincinfo -t > \cinfo_t.out 

Collect the S&P logs: 
CANDLEHOME/logs/<hostname>_sy_<hextime>-<0-9>.log 
CANDLEHOME/logs/<hostname>_sy_java_<hextime>-<0-9>.log 
CANDLEHOME/config/*sy* and CANDLEHOME/config/.ConfigData/ksyenv 
(CANDLEHOME\tmaitm6\KSYENV and CANDLEHOME\tm1itm6\ksycma.ini on Windows) 

Additional information for the S&P Agent 
Operating system and level 
/etc/SuSE-release (for SuSE Linux) 
/etc/system-release (for Redhat) 
winver (for Windows) 

Hostname and IP address 
netstat -a 
Firewall configuration information (if applicable) 
Operating system error log messages (if applicable) 
/var/adm/messages (if applicable) 


Submitting information to IBM Support 
After a PMR is open, you can submit diagnostic MustGather data to IBM. 
See this URL Exchanging information with IBM Technical Support [http://www-306.ibm.com/software/support/exchangeinfo.html] for methods to submit the information, including FTP, using SR, and ISA. 

Related information 
Troubleshooting information for supported versions of Tivoli Monitoring v6 is 
in the Problem Determination Guides, available at the IBM Tivoli Monitoring v6 
Information Center. The IBM Tivoli Monitoring Version 6.3 Information Center 
is now available. You can access this information center at: 
http://pic.dhe.ibm.com/infocenter/tivihelp/v61r1/topic/com.ibm.itm.doc_6.3fp2/welcome.htm [http://pic.dhe.ibm.com/infocenter/tivihelp/v61r1/topic/com.ibm.itm.doc_6.3fp2/welcome.htm]. 

See also: IBM Tivoli Monitoring V6.3 Fix Pack 2 - Documentation 

PRODUCT ALIAS/SYNONYM
 ITM
Monitoring