Title: IBM JR49606: SNAPSHOT NOT IMPORTED TO SAME PROCESS CENTER AFTER SNAPSHOT IS DELETED BY USING BPMSNAPSHOTCLEANUP WSADMIN COMMAND - United States

Text:
  FIXES ARE AVAILABLE
Version 8.5 Refresh Pack 5 for the IBM Business Process Manager products [http://www-01.ibm.com/support/docview.wss?uid=swg24037683]
Download Version 8.0.1 Fix Pack 3 for the IBM Business Process Manager products [http://www-01.ibm.com/support/docview.wss?uid=swg24037734]
Version 8.5.0 Fix Pack 2 for the IBM Business Process Manager products [http://www-01.ibm.com/support/docview.wss?uid=swg24040683]


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  After you delete a snapshot by using the BPMSnapshotCleanup
   wsadmin command, you cannot import the snapshot again to the
   same Process Center it was deleted from.
   
   
   PRODUCTS AFFECTED:
   IBM Business Process Manager (BPM) Advanced
   IBM BPM Standard
   IBM BPM Express
   
   
    
   
   

LOCAL FIX

PROBLEM SUMMARY
 *  After you delete a snapshot by using the BPMSnapshotCleanup
   wsadmin command, you cannot import the snapshot again to the
   same Process Center it was deleted from because a participant
   group from the original snapshot was not deleted when the
   original snapshot was deleted. When you import the snapshot into
    Process Center again, an error occurs with the following stack
   trace:
   
   [4/25/14 14:43:53:450 CDT] 000000cd wle_security W
    com.lombardisoftware.client.delegate.BusinessDelegateException:
   PreparedStatementCallback; SQL [insert into LSW_USR_GRP_XREF
   (GROUP_ID,GROUP_NAME,DISPLAY_NAME,GROUP_TYPE,DESCRIPTION,GROUP_S
   TATE,PARENT_GROUP_ID) values (?,?,?,?,?,?,?)]; Error for batch
   element #1: DB2 SQL Error: SQLCODE=-803, SQLSTATE=23505,
   SQLERRMC=2;DB2ADMIN.LSW_USR_GRP_XREF, DRIVER=4.12.55; nested
   exception is
   com.ibm.db2.jcc.am.SqlIntegrityConstraintViolationException:
   Error for batch element #1: DB2 SQL Error: SQLCODE=-803,
   SQLSTATE=23505, SQLERRMC=2;DB2ADMIN.LSW_USR_GRP_XREF,
   DRIVER=4.12.55
     at
   com.lombardisoftware.client.delegate.BusinessDelegateException.a
   sBusinessDelegateException(BusinessDelegateException.java:41)
     at
   com.lombardisoftware.client.delegate.PersistenceServicesDelegate
   Default.save(PersistenceServicesDelegateDefault.java:533)
     at
   com.lombardisoftware.client.persistence.common.factorydelegate.U
   nversionedFactoryDelegate.save(UnversionedFactoryDelegate.java:8
   4)
     at
   com.lombardisoftware.client.persistence.common.AbstractUnversion
   edPOFactory.save(AbstractUnversionedPOFactory.java:158)
     at
   com.lombardisoftware.server.ejb.security.ParticipantGroupsCore.p
   opulateUserGroup(ParticipantGroupsCore.java:450)
     at
   com.lombardisoftware.server.ejb.security.ParticipantGroupsCore.g
   etOrCreateSnapshotParticipantGroup(ParticipantGroupsCore.java:34
   6)
     at
   com.lombardisoftware.server.ejb.security.ParticipantGroupsCore.g
   etOrCreateSecurityGroup(ParticipantGroupsCore.java:230)
     at
   com.lombardisoftware.server.ejb.security.ParticipantGroupsCore.c
   reateParticipantGroups(ParticipantGroupsCore.java:143)
     at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
     . . .
    Caused by:
   org.springframework.dao.DataIntegrityViolationException:
   PreparedStatementCallback; SQL [insert into LSW_USR_GRP_XREF
   (GROUP_ID,GROUP_NAME,DISPLAY_NAME,GROUP_TYPE,DESCRIPTION,GROUP_S
   TATE,PARENT_GROUP_ID) values (?,?,?,?,?,?,?)]; Error for batch
   element #1: DB2 SQL Error: SQLCODE=-803, SQLSTATE=23505,
   SQLERRMC=2;DB2ADMIN.LSW_USR_GRP_XREF, DRIVER=4.12.55; nested
   exception is
   com.ibm.db2.jcc.am.SqlIntegrityConstraintViolationException:
   Error for batch element #1: DB2 SQL Error: SQLCODE=-803,
   SQLSTATE=23505, SQLERRMC=2;DB2ADMIN.LSW_USR_GRP_XREF,
   DRIVER=4.12.55
     at
   org.springframework.jdbc.support.SQLExceptionSubclassTranslator.
   translate(SQLExceptionSubclassTranslator.java:69)
     at
   org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTransla
   tor.translate(SQLErrorCodeSQLExceptionTranslator.java:237)
     at
   org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.
   java:607)
     at
   org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.
   java:619)
     at
   org.springframework.jdbc.core.JdbcTemplate.batchUpdate(JdbcTempl
   ate.java:866)
     at
   com.lombardisoftware.server.ejb.persistence.dao.UnversionedPODAO
   .doInserts(UnversionedPODAO.java:502)
     at
   com.lombardisoftware.server.ejb.persistence.dao.UnversionedPODAO
   .saveInternal(UnversionedPODAO.java:492)
     at
   com.lombardisoftware.server.ejb.persistence.AbstractDAO.save(Abs
   tractDAO.java:92)
     at
   com.lombardisoftware.server.ejb.persistence.AbstractDAO.save(Abs
   tractDAO.java:73)
     at
   com.lombardisoftware.server.ejb.persistence.DefaultHandler.save(
   DefaultHandler.java:201)
     at
   com.lombardisoftware.server.ejb.persistence.PSDefaultHandler.sav
   e(PSDefaultHandler.java:83)
     at
   com.lombardisoftware.server.ejb.persistence.PersistenceServicesC
   ore.saveInternal(PersistenceServicesCore.java:429)
     at
   com.lombardisoftware.server.ejb.persistence.PersistenceServicesC
   ore.save(PersistenceServicesCore.java:409)
    . . .
   Caused by:
   com.ibm.db2.jcc.am.SqlIntegrityConstraintViolationException:
   Error for batch element #1: DB2 SQL Error: SQLCODE=-803,
   SQLSTATE=23505, SQLERRMC=2;DB2ADMIN.LSW_USR_GRP_XREF,
   DRIVER=4.12.55
     at com.ibm.db2.jcc.am.hd.a(hd.java:672)
     at com.ibm.db2.jcc.am.hd.a(hd.java:60)
     at com.ibm.db2.jcc.am.hd.a(hd.java:127)
     at com.ibm.db2.jcc.t4.cb.a(cb.java:481)
     at com.ibm.db2.jcc.t4.cb.a(cb.java:70)
     at com.ibm.db2.jcc.t4.q.a(q.java:57)
     at com.ibm.db2.jcc.t4.sb.a(sb.java:225)
     at com.ibm.db2.jcc.am.nn.a(nn.java:3089)
     at com.ibm.db2.jcc.am.nn.d(nn.java:5049)
     at com.ibm.db2.jcc.am.nn.a(nn.java:4494)
     at com.ibm.db2.jcc.am.nn.c(nn.java:4320)
     at com.ibm.db2.jcc.am.nn.executeBatch(nn.java:2589)
     at
   com.ibm.ws.rsadapter.jdbc.WSJdbcPreparedStatement.pmiExecuteBatc
   h(WSJdbcPreparedStatement.java:1035)
     at
   com.ibm.ws.rsadapter.jdbc.WSJdbcStatement.executeBatch(WSJdbcSta
   tement.java:838)
     at
   org.springframework.jdbc.core.JdbcTemplate$4.doInPreparedStateme
   nt(JdbcTemplate.java:881)
     at
   org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.
   java:591)
     ... 141 more
   
   
    
   
   

PROBLEM CONCLUSION
 *  A fix is available for IBM BPM V7.5.1.2, V8.0.1.2, V8.5.0.1 that
   cleans up the participant groups when you delete snapshots from
   Process Center so that you can re-import the snapshot that you
   deleted without receiving errors.
   
   On Fix Central (http://www.ibm.com/support/fixcentral), search
   for JR49606:
   
       1. Select IBM Business Process Manager with your edition
   from the product selector, the installed version to the fix pack
   level, and your platform, and then click Continue.
       2. Select APAR or SPR, enter JR49606, and click Continue.
   
   When you download fix packages, ensure that you also download
   the readme file for each fix. Review each readme file for
   additional installation instructions and information about the
   fix.
   
   In addition to this interim fix, install the other interim fixes
   that are required for the BPMDeleteSnapshot and
   BPMSnapshotCleanup commands, which are listed in "Issues with
   BPMDeleteSnapshot and BPMSnapshotCleanup commands in IBM
   Business Process Manager (BPM)"
   (http://www.ibm.com/support/docview.wss?uid=swg21669992).
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   JR49606
   
   
 * REPORTED COMPONENT NAME
   BPM STANDARD
   
   
 * REPORTED COMPONENT ID
   5725C9500
   
   
 * REPORTED RELEASE
   751
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2014-03-12
   
   
 * CLOSED DATE
   2014-04-29
   
   
 * LAST MODIFIED DATE
   2014-05-09
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   BPM STANDARD
   
   
 * FIXED COMPONENT ID
   5725C9500
   
   

APPLICABLE COMPONENT LEVELS
 * R750 PSY
   UP
   
   
 * R800 PSY
   UP