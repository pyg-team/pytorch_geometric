Title: IBM PK46099: CONNECTION EXCEPTIONS WHEN REBUILDING THE EVENT LOG ON STARTUP - United States

Text:
 
APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  Connections exceptions occur during start up when rebuilding the
   event log database. The server skips the failed items and starts
   successfully but the event log does not contain the correct list
   of items which may cause problems during syndication. The
   following exceptions will appear in the SystemOut.log file:
   
   [5/25/07 21:51:08:694 NZST] 0000000a ConnectionEve A
   J2CA0056I: The Connection Manager received a fatal connection
   error from the Resource Adaptor for resource jdbc/JCRDS.  The
   exception which was received is
   com.ibm.websphere.ce.cm.StaleConnectionException: No more data
   to read from socket
   [5/25/07 21:51:08:763 NZST] 0000000a EventLogServi E
   IWKMU1062X: Message: Cannot add version entry for item
   [Ljava.lang.Object;@2a28b07f., Cause: java.sql.SQLException:
   ORA-01000: maximum open cursors exceeded
   
   [5/25/07 21:51:09:084 NZST] 0000000a EventLogServi E
   IWKMU1062X: Message: Cannot add log entry for item 5/25/07 9:51
   PM., Cause: com.ibm.websphere.ce.cm.ObjectClosedException:
   DSRA9110E: Connection is closed.
   
   com.ibm.workplace.wcm.services.eventlog.EventLogException:
   IWKMU1062X: Message: Cannot add log entry for item 5/25/07 9:51
   PM., Cause: com.ibm.websphere.ce.cm.ObjectClosedException:
   DSRA9110E: Connection is closed.
   
   
    
   
   

LOCAL FIX

PROBLEM SUMMARY
 *  Connection exceptions when rebuilding the event log on startup
   
   Users Affected: Administartor
   
   Problem: Connections exceptions occur during start up when
   rebuilding the event log database. The server skips the failed
   items and starts successfully but the event log does not contain
   the correct list of items which may cause problems during
   syndication. The following exceptions will appear in the
   SystemOut.log file:
   
   [5/25/07 21:51:08:694 NZST] 0000000a ConnectionEve A
   J2CA0056I: The Connection Manager received a fatal connection
   error from the Resource Adaptor for resource jdbc/JCRDS.  The
   exception which was received is
   com.ibm.websphere.ce.cm.StaleConnectionException: No more data
   to read from socket
   [5/25/07 21:51:08:763 NZST] 0000000a EventLogServi E
   IWKMU1062X: Message: Cannot add version entry for item
   [Ljava.lang.Object;@2a28b07f., Cause: java.sql.SQLException:
   ORA-01000: maximum open cursors exceeded
   
   [5/25/07 21:51:09:084 NZST] 0000000a EventLogServi E
   IWKMU1062X: Message: Cannot add log entry for item 5/25/07 9:51
   PM., Cause: com.ibm.websphere.ce.cm.ObjectClosedException:
   DSRA9110E: Connection is closed.
   
   com.ibm.workplace.wcm.services.eventlog.EventLogException:
   IWKMU1062X: Message: Cannot add log entry for item 5/25/07 9:51
   PM., Cause: com.ibm.websphere.ce.cm.ObjectClosedException:
   DSRA9110E: Connection is closed.
   
   
    
   
   

PROBLEM CONCLUSION
 *  All connections are now closed in a finally block after use and
   if they become stale to ensure they are returned to the pool of
   available connections.
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   PK46099
   
   
 * REPORTED COMPONENT NAME
   WRKPLC WEB CON
   
   
 * REPORTED COMPONENT ID
   5724I2900
   
   
 * REPORTED RELEASE
   60B
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2007-05-31
   
   
 * CLOSED DATE
   2007-05-31
   
   
 * LAST MODIFIED DATE
   2007-05-31
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   WRKPLC WEB CON
   
   
 * FIXED COMPONENT ID
   5724I2900
   
   

APPLICABLE COMPONENT LEVELS
 * R601 PSY
   UP
   
   
 * R60C PSY
   UP
   
   
 * R60D PSY
   UP
   
   
 * R60E PSY
   UP