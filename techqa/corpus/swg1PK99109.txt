Title: IBM PK99109: RUNNING REPORT AGAINST TM1 CUBE RESULTS IN DMP FILE - United States

Text:
 SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  When running a report against a TM1 cube we see BIBus grow to
   2GB and produce a dmp file before which the report will error
   out with:
   
   DPR-ERR-2077
   
   The request failed because the associated report service process
   with pid 6772 is unavailable.
   
   TM1S.exe will stay at maximum CPU usage through this process and
   will slowly increase in memory usage by about 100KB/second until
   BIBus dies, the memory increase will stop but it will remain
   running at max CPU usage. BIBus will remain at 0-3% CPU usage
   but will grow by ~3MB/second until reaching 2GB and dying.
   
   
    
   
   

LOCAL FIX

PROBLEM SUMMARY
 *  ****************************************************************
   * USERS AFFECTED:                                              *
   * Problem is specific to this customer                         *
   ****************************************************************
   * PROBLEM DESCRIPTION:                                         *
   * A report is being using C8 with TM1 as a data source. The    *
   * TM1 server stops responding when memory usage reaches 2Gb.   *
   * Entries in the tm1server.log file exist for fatal Out of     *
   * Memory errors.                                               *
   ****************************************************************
   * RECOMMENDATION:                                              *
   * The TM1 server is running out of memory and shutting down. A *
   * change was made in 9.4.1 FP3 that changes server behavior to *
   * abort operations that run out or memory instead of shutting  *
   * down. This release is not yet released and this change is    *
   * not available in 9.5. Having the change won't correct the    *
   * problem, it will just make handling out of memory more       *
   * graceful when using Report Server so the unavailability of   *
   * FP3 is pretty much moot.                                     *
   *                                                              *
   * Actions need to be taken by support to try to address memory *
   * usage.                                                       *
   * 1. Customer is running win32 version of TM1 server which has *
   * a 2Gb memory limit. Can they run the x64 version on a        *
   * machine with more memory? Note that using an x64 server is   *
   * independent of which client applicaiton is used.             *
   * 2. Is the customer running the TM1 Server on the same        *
   * machine as the web server? If so the TM1 Server should run   *
   * on a standalone box so that the memory remains dedicated.    *
   * 3. Analyze the model and determine how much data is needed   *
   * for the report. The TM1 support team can help with this. See *
   * if the report can be reworked to contain data that fits in   *
   * the 2Gb limit if more memory is not an option.               *
   *                                                              *
   *                                                              *
   * or Upgrade to Cognos Business Intelligence 8.4.1             *
   ****************************************************************
   
   
    
   
   

PROBLEM CONCLUSION
 *  The TM1 server is running out of memory and shutting down. A cha
   nge was made in 9.4.1 FP3 that changes server behavior to abort
   operations that run out or memory instead of shutting down. This
    release is not yet released and this change is not available in
    9.5. Having the change won't correct the problem, it will just
   make handling out of memory more graceful when using Report Serv
   er so the unavailability of FP3 is pretty much moot.
   
   The issue is that a Win32 server has a 2Gb memory limit and the
   request report is larger than that.
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   PK99109
   
   
 * REPORTED COMPONENT NAME
   COG8 BI REPORT
   
   
 * REPORTED COMPONENT ID
   5724W12RS
   
   
 * REPORTED RELEASE
   840
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2009-10-20
   
   
 * CLOSED DATE
   2012-07-26
   
   
 * LAST MODIFIED DATE
   2012-07-26
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   COG8 BI REPORT
   
   
 * FIXED COMPONENT ID
   5724W12RS
   
   

APPLICABLE COMPONENT LEVELS
 * R841 PSN
   UP