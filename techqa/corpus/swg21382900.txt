Title: IBM MustGather: WebSphere Application Server HTTP plug-in problems on IBM i (i5/OS) - United States

Text:
mustgather; mustgather; mustgather; MustGatherDocument TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 MustGather for IBM WebSphere Application Server HTTP plug-in problems with the IBM i (i5/OS) HTTP Apache Server. Gathering this information before calling IBM support helps familiarize you with the troubleshooting process and saves you time. 

ENVIRONMENT
i5/OS (OS400)

RESOLVING THE PROBLEM
If you already contacted support, continue to the component-specific MustGather information. Otherwise, click: MustGather: Read first for all WebSphere Application Server [http://www.ibm.com/support/docview.wss?rs=180&context=SSEQTP&uid=swg21145599].

Problems encountered when using the WebSphere Application Server HTTP plug-in can be caused by an incorrect Web server or plugin-cfg.xml configuration. IBM recommends first reviewing the following documentation to assist in resolving problems related to the WebSphere Application Server HTTP plug-in. 

 * For WebSphere Application Server release V6.1, V7, V8/V8.5 and V9 (select your version of WebSphere):  * Web Server configuration [http://publib.boulder.ibm.com/infocenter/wasinfo/v6r1/index.jsp?topic=/com.ibm.websphere.base.iseries.doc/info/iseries/ae/welcconfigwebservers.html] 
    * Web Server plug-in properties setting [http://publib.boulder.ibm.com/infocenter/wasinfo/v6r1/index.jsp?topic=/com.ibm.websphere.base.iseries.doc/info/iseries/ae/uwsv_plugin_props.html]
      
      
   
   

IBM HTTP Server for i5/OS 
 1.  Stop the IBM HTTP Server for i5/OS.
     
     
 2.  Edit the plugin-cfg.xml file and change Loglevel to Trace.
     
     For example:
     
     
     <Log LogLevel="Trace" Name="/QIBM/UserData/WebSphere/AppServer/V85/ND/profiles/Bennie/logs/http_plugin.log"/> 
     Note: The location of the plugin-cfg.xml file will be listed in the /www/<webServer>/conf/httpd.conf configuration file.
     
     Steps to view the httpd.conf file:  1. Use the following IBM i (i5/OS) command:
         
         
         WRKLNK '/www/<webServer>/conf/httpd.conf' 
         
      2. Option 5
         
         
      3. Locate the WebSpherePluginConfig directive.
         
         For example:
         
         
         WebSpherePluginConfig /qibm/userdata/websphere/appserver/v85/nd/profiles/Bennie/config/cells/plugin-cfg.xml
         
     
     
     [/support/docview.wss?uid=swg21382900&amp;aid=1] 
 3.  Clear the plug-in log from the install_root\logs directory.
     
     
 4.  On the Application Server, set the following trace string:  * For releases of WebSphere Application Server V6.1, V7.0, V8.0, V8.5 and V9:  1. In the Administrative Console, expand the Troubleshooting section and click Logs and Trace
            
            
         2. Click on your server.
            
            
         3. Select Diagnostic Trace
            
            
         4. Click Change Log Detail Levels.
            
            
         5. In Trace Specification, type the following trace string (Note: this should be one line but was broken up here for display purposes):
            
            
            *=info:
            com.ibm.ws.webcontainer.*=all:
            com.ibm.wsspi.webcontainer.*=all:
            HTTPChannel=all:
            GenericBNF=all 
            
         6. For Trace Output, choose File and type a filename.
            
            
         7. Click Apply and save your configuration.
            
            
            
        
        
     
     
 5.  Restart the IBM HTTP Server for i5/OS and Application Server.
     
     
 6.  Start a verbose trace on the IBM HTTP Server using the following IBM i (i5/OS) command:
     
     
     TRCTCPAPP APP(*HTTP) HTTPSVR(MYWEBSVR) TRCLVL(*VERBOSE) 
     
 7.  Recreate the problem.
     
     
 8.  Stop the verbose trace on the IBM HTTP Server using the following IBM i (i5/OS) command:
     
     
     TRCTCPAPP APP(*HTTP) SET(*OFF) 
     
 9.  Change the plugin-cfg.xml file Loglevel back to Error (See step 2 for example).
     
     
 10. Collect [http://www.ibm.com/support/docview.wss?rs=180&context=SSEQTP&uid=swg21153852]the following data files and information:  * plugin-cfg.xml
        
        
      * http_plugin.log
        
        
      * stderr and stdout
        
        
      * TraceFile (from step 4)
        
        
      * Spool files generated from TRCTCPAPP
        
        Note: The data will be with the spooled files for the user profile that ran the TRCTCPAPP command rather than with the spooled files for QTMHHTTP. Spooled files will be named QZSRHTTPTR.To download the trace data to your PC, open iSeries Navigator, and click on Basic Operations > Printer Output (ensure that the user profile used to run the trace is the one on the Include window in iSeries Navigator). Drag-and-drop the files from System i Navigator to your Desktop. A plain text file will be created.
        
        
      * The date and time of failure.
        
        
      * The browser version.
        
        
      * The full URL that resulted in failure. For example:
        
        
        http: //www.mycompany.com/mystuff/goodies/index.html 
        
     
     

Follow instructions to send diagnostic information to IBM support [http://www.ibm.com/support/docview.wss?uid=swg21153852]. RELATED INFORMATION
 Recording your screen to share with IBM Support [https://www.ibm.com/developerworks/community/blogs/IBMElectronicSupport/entry/recording_your_screen_to_share_with_support?lang=en]