Title: IBM PM13911: ILLEGALSTATEEXCEPTION ATTEMPTING TO START A MESSAGING ENGINE    AGAINST AN SQL SERVER 2008 DATABASE WITH A JDBC 2.0 DRIVER - United States

Text:
  FIXES ARE AVAILABLE
PM13911; 7.0.0.7: Problems using SQL Server as a data store [http://www-01.ibm.com/support/docview.wss?uid=swg24027230]
7.0.0.13: WebSphere Application Server V7.0 Fix Pack 13 for AIX [http://www-01.ibm.com/support/docview.wss?uid=swg24027977]
7.0.0.13: WebSphere Application Server V7.0 Fix Pack 13 for HP-UX [http://www-01.ibm.com/support/docview.wss?uid=swg24027999]
7.0.0.13: WebSphere Application Server V7.0 Fix Pack 13 for IBM i [http://www-01.ibm.com/support/docview.wss?uid=swg24028000]
7.0.0.13: WebSphere Application Server V7.0 Fix Pack 13 for Linux [http://www-01.ibm.com/support/docview.wss?uid=swg24028001]
7.0.0.13: WebSphere Application Server V7.0 Fix Pack 13 for Solaris [http://www-01.ibm.com/support/docview.wss?uid=swg24028002]
7.0.0.13: WebSphere Application Server V7.0 Fix Pack 13 for Windows [http://www-01.ibm.com/support/docview.wss?uid=swg24028003]
7.0.0.13: Java SDK 1.6 SR8FP1 Cumulative Fix for WebSphere Application Server [http://www-01.ibm.com/support/docview.wss?uid=swg24028004]
7.0.0.15: WebSphere Application Server V7.0 Fix Pack 15 for AIX [http://www-01.ibm.com/support/docview.wss?uid=swg24028875]
7.0.0.15: Java SDK 1.6 SR9 Cumulative Fix for WebSphere Application Server [http://www-01.ibm.com/support/docview.wss?uid=swg24028881]
7.0.0.15: WebSphere Application Server V7.0 Fix Pack 15 for HP-UX [http://www-01.ibm.com/support/docview.wss?uid=swg24029071]
7.0.0.15: WebSphere Application Server V7.0 Fix Pack 15 for IBM i [http://www-01.ibm.com/support/docview.wss?uid=swg24029072]
7.0.0.15: WebSphere Application Server V7.0 Fix Pack 15 for Linux [http://www-01.ibm.com/support/docview.wss?uid=swg24029073]
7.0.0.15: WebSphere Application Server V7.0 Fix Pack 15 for Solaris [http://www-01.ibm.com/support/docview.wss?uid=swg24029074]
7.0.0.15: WebSphere Application Server V7.0 Fix Pack 15 for Windows [http://www-01.ibm.com/support/docview.wss?uid=swg24029075]
7.0.0.17: WebSphere Application Server V7.0 Fix Pack 17 [http://www-01.ibm.com/support/docview.wss?uid=swg24029634]
7.0.0.17: Java SDK 1.6 SR9 FP1 Cumulative Fix for WebSphere Application Server [http://www-01.ibm.com/support/docview.wss?uid=swg24029894]
7.0.0.19: WebSphere Application Server V7.0 Fix Pack 19 [http://www-01.ibm.com/support/docview.wss?uid=swg24030660]
7.0.0.21: WebSphere Application Server V7.0 Fix Pack 21 [http://www-01.ibm.com/support/docview.wss?uid=swg24031366]
7.0.0.23: WebSphere Application Server V7.0 Fix Pack 23 [http://www-01.ibm.com/support/docview.wss?uid=swg24032493]
7.0.0.25: WebSphere Application Server V7.0 Fix Pack 25 [http://www-01.ibm.com/support/docview.wss?uid=swg24033267]
7.0.0.27: WebSphere Application Server V7.0 Fix Pack 27 [http://www-01.ibm.com/support/docview.wss?uid=swg24033882]
7.0.0.29: WebSphere Application Server V7.0 Fix Pack 29 [http://www-01.ibm.com/support/docview.wss?uid=swg24034966]
7.0.0.31: WebSphere Application Server V7.0 Fix Pack 31 [http://www-01.ibm.com/support/docview.wss?uid=swg24036768]
7.0.0.27: Java SDK 1.6 SR13 FP2 Cumulative Fix for WebSphere Application Server [http://www-01.ibm.com/support/docview.wss?uid=swg24035324]
7.0.0.33: WebSphere Application Server V7.0 Fix Pack 33 [http://www-01.ibm.com/support/docview.wss?uid=swg24037573]
7.0.0.35: WebSphere Application Server V7.0 Fix Pack 35 [http://www-01.ibm.com/support/docview.wss?uid=swg24038310]
7.0.0.37: WebSphere Application Server V7.0 Fix Pack 37 [http://www-01.ibm.com/support/docview.wss?uid=swg24039338]
7.0.0.39: WebSphere Application Server V7.0 Fix Pack 39 [http://www-01.ibm.com/support/docview.wss?uid=swg24041013]
7.0.0.41: WebSphere Application Server V7.0 Fix Pack 41 [http://www-01.ibm.com/support/docview.wss?uid=swg24041931]
7.0.0.43: WebSphere Application Server V7.0 Fix Pack 43 [http://www-01.ibm.com/support/docview.wss?uid=swg24043400]
7.0.0.45: WebSphere Application Server V7.0 Fix Pack 45 [http://www-01.ibm.com/support/docview.wss?uid=swg24044551]


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  One of the following problems are seen using
   Microsoft SQL Server as the data store for a Service
   Integration Bus messaging engine:
   
   * If an attempt is made to start a messaging engine
     against a schema that does not exist, the messaging engine
     fails to start even though the "Create tables" checkbox
     is ticked and all necessary authority to create the
     schema has been granted.
     For other databases, the schema is automatically created
     under these circumstances.
   
   * If an attempt is made to run the DDL generated by
     by the sibDDLGenerator against a schema that does not
     exist, the DDL fails to create the tables for the
     messaging engine.
     For other databases, the generated DDL contains
     DDL to create the schema if it does not exist.
   
   * The sibDDLGenerator tool fails if '2008' is specified
     as the database version.
   
   * The following exception occurs and prevents startup of the
     messaging engine, when using a JDBC Version 2.0 driver:
     CWSIS1530E: The data type, -9, was found instead of the
     expected type, 12, for column, URI, in table,
     IBMWSSIB.SSIBCLASSMAP.
   
   
    
   
   

LOCAL FIX

PROBLEM SUMMARY
 *  ****************************************************************
   * USERS AFFECTED:  Users of the default messaging provider for *
   *                  IBM WebSphere Application Server using      *
   *                  Microsoft SQL Server as the data store      *
   *                  for a Service Integration Bus messaging     *
   *                  engine                                      *
   ****************************************************************
   * PROBLEM DESCRIPTION: Cannot configure Microsoft SQL Server   *
   *                      as a data store when using a JDBC 2.0   *
   *                      driver, or without manually creating    *
   *                      the schema                              *
   ****************************************************************
   * RECOMMENDATION:                                              *
   ****************************************************************
   The behavior of the Service Integration Bus is incorrect for
   Microsoft SQL Server in the following ways:
   * The "Create tables" tickbox does not cause the messaging
     engine to automatically create the schema if it does not exist
   * The sibDDLGenerator tool does not generate DDL to create
     the schema for the messaging engine
   * The sibDDLGenerator tool does not allow '2008' to be
     specified as a database version for Microsoft SQL Server
   * A messaging engine fails to start when a JDBC 2.0 driver
     is used to connect to the database
   
   
    
   
   

PROBLEM CONCLUSION
 *  The fix for this APAR corrects issues as follows, when
   using Microsoft SQL Server as a data store:
   * A messaging engine will automatically create a messaging
   engine's schema during startup if:
   1) It does not exist
   2) The "Create tables" tickbox is enabled
   3) The authority to query the existing schemas is available,
   using a SELECT query against SYS.SCHEMAS
   4) The authority to issue the CREATE SCHEMA command
   is available.
   * The DDL generated by the sibDDLGenerator for Microsoft
   SQL Server includes commands to create the schema.
   * The sibDDLGenerator tool accepts '2008' as a valid version
   when combined with system 'sqlserver'
   * A messaging engine can start successfully against a
   data store hosted in Microsoft SQL Server, when using
   a JDBC 2.0 driver.
   
   The fix for this APAR is currently targeted for inclusion in
   fix pack 7.0.0.13.  Please refer to the Recommended Updates
   page for delivery information:
   http://www.ibm.com/support/docview.wss?rs=180&uid=swg27004980 [http://www.ibm.com/support/docview.wss?rs=180&uid=swg27004980]
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   PM13911
   
   
 * REPORTED COMPONENT NAME
   PLAT MSG COM
   
   
 * REPORTED COMPONENT ID
   620800101
   
   
 * REPORTED RELEASE
   300
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2010-05-06
   
   
 * CLOSED DATE
   2010-06-21
   
   
 * LAST MODIFIED DATE
   2010-06-21
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   PLAT MSG COM
   
   
 * FIXED COMPONENT ID
   620800101
   
   

APPLICABLE COMPONENT LEVELS
 * R300 PSY
   UP