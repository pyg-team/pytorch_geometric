Title: IBM LO54798: SAMETIME SERVER SHOULD TIME OUT REQUESTS SENT TO LDAP AND REMOVE FROM QUEUE IF NOT RESPONDED TO - United States

Text:
 SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS FIXED IF NEXT.
    
   
   

ERROR DESCRIPTION
 *  Configuration:  Sametime 8.0.2 Community Server using Tivoli
   Directory Server
   LDAP authentication
   sametime.ini parameters are set to enable synchronous binds to
   LDAP (whereas
   default for ST is asynchronous):
   ST_DB_LDAP_PENDING_BIND_MAX=1
   ST_DB_LDAP_PENDING_BIND_LOW=0
   
   customer experienced a full Sametime "outage" where no
   users could
   log into the server, because Sametime did not receive a response
   from an
   authentication bind request sent to LDAP. When investigating, it
   appears that
   the bind request was not received by the LDAP server for some
   unknown reason
   At that time, the server's
   PENDING_BIND queue was
   set to 1, since we had that outstanding request; and since no
   response was
   received, we never reset the PENDING_BIND queue to 0, meaning
   that no other
   user bind requests were sent to LDAP, and thus no one could log
   into Sametime.
   
   This issue was only resolved once the Tivoli Directory server
   was restarted,
   which reset all of our connections.
   
   Resolution required:
   Sametime cannot be put in a scenario where our Authentication
   queue (or Resolve
   queues) get backed up because of LDAP queries which are not
   responded to.
   Sametime should have a realistic default timeout (60, or 120
   seconds), after
   which we disregard any outstanding requests to LDAP, and remove
   them from the
   queue. If that had been the case, in the above scenario, the
   server would have
   moved forward after the initial bind request timed out, and not
   caused a full
   server outage.
   
   
    
   
   

LOCAL FIX
 *  The setting below allows us to set a timeout value, however,
   this only helps in
   scenarios that the LDAP server receives the query.
   In sametime.ini under [Directory] section add the following:
   ST_DB_LDAP_SERVER_TIMELIMIT=30
   
   We would still be vulnerable if the LDAP server has an error and
   does not
   respond to a query, or if the LDAP server doesn't get the query
   for some reason
   like a network drop
   
   
    
   
   

PROBLEM SUMMARY
 *  This APAR was closed as FIN. We have deferred the fix to a
    future release.
   
   
    
   
   

PROBLEM CONCLUSION

TEMPORARY FIX

COMMENTS
 *  This APAR is associated with SPR# RDES89BU8M.
   This APAR was closed as FIN. We have deferred the fix to a
    future release.
   
   
    
   
   

APAR INFORMATION
 * APAR NUMBER
   LO54798
   
   
 * REPORTED COMPONENT NAME
   LOTUS SAMETIME
   
   
 * REPORTED COMPONENT ID
   5724J2300
   
   
 * REPORTED RELEASE
   802
   
   
 * STATUS
   CLOSED FIN
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2010-09-15
   
   
 * CLOSED DATE
   2012-12-10
   
   
 * LAST MODIFIED DATE
   2012-12-10
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION

APPLICABLE COMPONENT LEVELS
 * R802 PSN
   UP