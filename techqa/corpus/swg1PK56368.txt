Title: IBM PK56368: EXCEPTION OCCURRED WHEN USING CEI EMITTER - United States

Text:
  FIXES ARE AVAILABLE
Java SDK 1.5 SR8 Cumulative Fix for WebSphere Application Server [http://www-01.ibm.com/support/docview.wss?uid=swg24020073]
Java SDK 1.5 SR8 Cumulative Fix for WebSphere Application Server [http://www-01.ibm.com/support/docview.wss?uid=swg24021203]
Java SDK 1.5 SR10 Cumulative Fix for WebSphere Application Server [http://www-01.ibm.com/support/docview.wss?uid=swg24024201]
6.1.0.31: Java SDK 1.5 SR11 Cumulative Fix for WebSphere Application Server [http://www-01.ibm.com/support/docview.wss?uid=swg24026453]
6.1.0.33: Java SDK 1.5 SR12 FP1 Cumulative Fix for WebSphere [http://www-01.ibm.com/support/docview.wss?uid=swg24027786]
6.1.0.29: Java SDK 1.5 SR11 Cumulative Fix for WebSphere Application Server [http://www-01.ibm.com/support/docview.wss?uid=swg24025191]
6.1.0.35: Java SDK 1.5 SR12 FP2 Cumulative Fix for WebSphere [http://www-01.ibm.com/support/docview.wss?uid=swg24028574]
6.1.0.37: Java SDK 1.5 SR12 FP3 Cumulative Fix for WebSphere [http://www-01.ibm.com/support/docview.wss?uid=swg24029525]
6.1.0.39: Java SDK 1.5 SR12 FP4 Cumulative Fix for WebSphere Application Server [http://www-01.ibm.com/support/docview.wss?uid=swg24030426]
6.1.0.41: Java SDK 1.5 SR12 FP5 Cumulative Fix for WebSphere Application Server [http://www-01.ibm.com/support/docview.wss?uid=swg24031035]
6.1.0.43: Java SDK 1.5 SR13 Cumulative Fix for WebSphere Application Server [http://www-01.ibm.com/support/docview.wss?uid=swg24031963]
6.1.0.45: Java SDK 1.5 SR14 Cumulative Fix for WebSphere Application Server [http://www-01.ibm.com/support/docview.wss?uid=swg24033270]
6.1.0.47: WebSphere Application Server V6.1 Fix Pack 47 [http://www-01.ibm.com/support/docview.wss?uid=swg24035508]
6.1.0.47: Java SDK 1.5 SR16 Cumulative Fix for WebSphere Application Server [http://www-01.ibm.com/support/docview.wss?uid=swg24035649]


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  Symptoms or statement of problem (required):
   I have the following topology in Network Deployment:
   1- An MECluster for Messaging
   2- A BPELCluster for Business Process Applications that uses a
   the Remote Messaging Cluster (MECluster)
   3- A SupportCluster for Events that also uses the remote
   messaging cluster (MECluster)
   
   First to test if the BPC Container works, I installed the
   claimshandling process from the BPC Samples page. I could run
   the process.
   Then I stop all the cluster and enabled CEI on the
   BPELCluster(BFM and HTM container). Afterward I restarted the
   MECluster, the SupportCluster and the BPELCluster).
   Up to this point all logs were okay.At the time I then tried
   to run the claimshandling process again, The following
   Exception occured while events were about to be emitted:
   NOTE: The security is enabled on the cell and on the bus.
   
   
    
   
   

LOCAL FIX

PROBLEM SUMMARY
 *  ****************************************************************
   * USERS AFFECTED: Common Event Infrastructure (CEI) users on   *
   *                 IBM WebSphere Application Server V6.1        *
   ****************************************************************
   ERROR DESCRIPTION:
   Symptoms or statement of problem (required):
   I have the following topology in Network Deployment:
   1- A MECluster for Messaging
   2- A BPELCluster for Business Process Applications that uses a
   the Remote Messaging Cluster (MECluster)
   3- A SupportCluster for Events that also uses the remote
   messaging cluster (MECluster)
   
   First to test if the BPC Container works, I installed the
   claimshandling process from the BPC Samples page. I could run
   the process.
   Then I stop all the cluster and enabled CEI on the
   BPELCluster(BFM and HTM container). Afterward I restarted the
   MECluster, the SupportCluster and the BPELCluster).
   Up to this point all logs were okay.At the time I then tried to
   run the claimshandling process again, The following Exception
   occurred while events were about to be emitted:
   NOTE: The security is enabled on the cell and on the bus.
   ***************************************************************
   PROBLEM DESCRIPTION: An exception is thrown when using CEI
   Emitter for sending CBEs events asynchronously. The exception is
   thrown only when the WebSphere Application Server Administrative
   security is enabled and the CommonEventInfrastructure_Bus
   security is enabled and the Permitted transport is set to
   ?Restrict the use of defined transport channel chains to those
   protected by SSL?
   
   Below is the exception thrown by the CEI Emitter
   
   com.ibm.websphere.sib.exception.SINotPossibleInCurrentConfigurat
   ionException: CWSIT0010E: A client request for messaging engine
   MECluster.000-CommonEventInfrastructure_Bus in bus
   CommonEventInfrastructure_Bus failed with reason: CWSIT0092E: An
   attempt was made to connect to bus CommonEventInfrastructure_Bus
   using channel chain InboundBasicMessaging. Use of this chain is
   not permitted by bus CommonEventInfrastructure_Bus
   ***************************************************************
   RECOMMENDATION:
   The problem that is addressed by this APAR happens when the
   following conditions are met:
   WebSphere Application Server Administrative security is enabled,
   CommonEventInfrastructure_Bus security is enabled and the
   Permitted transport is set to ?Restrict the use of defined
   transport channel chains to those protected by SSL?
   When the above conditions occur, the Common Event
   Infrastructure?s JMS Queue and Topic Connection factories should
   be configured with the ?Target inbound transport chain? field
   set to ?InboundSecureMessaging?. If this does not happen the CEI
   client applications are not able to connect to the
   CommonEventInfrastructure_Bus?s messaging engine and the
   exception described in the problem description section is
   thrown.
   
   The CommonEventInfrastructure_Bus is created and configured,
   when CEI is the first time deployed on a WebSphere Application
   Server (WAS) cell. The fix is not applicable if the user
   undeploy CEI and redeploy it later or setup WAS security,
   CommonEventInfrastructure_Bus security as enabled or the
   Permitted transport to ?Restrict the use of defined transport
   channel chains to those protected by SSL? after CEI is deployed.
   In these conditions the user has to setup manually the JMS
   factories? ?Target inbound transport chain? field to ?Inbound
   SecureMessaging?. The reason of this is: CEI undeploy function
   never removes CommonEventInfrastructure_Bus bus and CEI JMS
   Queue and Topic Connection factories. These are created when CEI
   is deployed on A fresh WAS installation.
   
   In the current CEI implementation the JMS Queue and Topic
   Connection Factories are created and configured, when CEI is
   deployed the first time on a WAS scope,  with the default value
   for the name of Target inbound transport chain
   ("InboundBasicMessaging"), even when WAS security is enabled.
   This means that the CEI clients will not be able to connect to
   the CommonEventInfrastructure_Bus having the "Permitted
   transports" set to ?Restrict the use of defined transport
   channel chains to those protected by SSL?.
   
   After applying the fix the JMS Queue and Topic Connection
   Factories will be created and configured, when CEI is deployed
   on a WAS scope,  with the ?Target inbound transport chain? set
   to "InboundSecureMessaging". This means that the CEI client
   applications will be able to connect to the
   CommonEventInfratstructure_Bus messaging engine using a
   transport channel protected by SSL.
   *************************************************************
   
   
    
   
   

PROBLEM CONCLUSION
 *  Some modifications were made in the Common Event
   Infrastructure deploy code in order to set the Target
   Transport Chain.
   The fix for this APAR is currently targeted for inclusion in
   fix pack 6.1.0.15. Please refer to the Recommended Updates page
   for delivery information:
   http://www-1.ibm.com/support/docview.wss?uid=swg27004980 [http://www-1.ibm.com/support/docview.wss?uid=swg27004980]
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   PK56368
   
   
 * REPORTED COMPONENT NAME
   WEBSPH APP SERV
   
   
 * REPORTED COMPONENT ID
   5724J0800
   
   
 * REPORTED RELEASE
   61W
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2007-11-12
   
   
 * CLOSED DATE
   2007-12-12
   
   
 * LAST MODIFIED DATE
   2008-02-11
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   WEBSPH APP SERV
   
   
 * FIXED COMPONENT ID
   5724J0800
   
   

APPLICABLE COMPONENT LEVELS
 * R61A PSY
   UP
   
   
 * R61H PSY
   UP
   
   
 * R61I PSY
   UP
   
   
 * R61P PSY
   UP
   
   
 * R61S PSY
   UP
   
   
 * R61W PSY
   UP
   
   
 * R61Z PSY
   UP