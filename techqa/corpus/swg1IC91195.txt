Title: IBM IC91195: When you run a task to assimilate an appliance to form a two-appliance collective, the task might fail. - United States

Text:
 SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  When assimilating one appliance into another to form a
   two-appliance collective, the assimilation task might fail. The
   following error is displayed in the "Tasks" view of the web
   console at the end of the page:
   
   info Feb 20, 2013 11:33:21 AM     Placed task into queue.
   info Feb 20, 2013 11:33:21 AM     Task has begun running.
   info Feb 20, 2013 11:33:21 AM     Start the assimilation process
   with the appliance 10.1.1.136.
   info Feb 20, 2013 11:33:22 AM     Verify the secret key of
   10.1.1.136 is valid.
   info Feb 20, 2013 11:33:23 AM     Request was validated, now
   requesting the appliance 10.1.1.136 to restart.
   info Feb 20, 2013 11:34:26 AM     Stopping the servers on
   appliance 10.1.1.136.
   info Feb 20, 2013 11:35:36 AM     Notify appliance 10.1.1.135 of
   new catalog servers.
   info Feb 20, 2013 11:36:03 AM     Stopping the servers on
   appliance 10.1.1.135.
   info Feb 20, 2013 11:36:03 AM     All appliances have restarted
   with new catalog servers. Restarting 10.1.1.136 now.
   info Feb 20, 2013 11:36:11 AM     Restarting appliance
   10.1.1.135 with the catalog servers [10.1.1.135:2809,
   10.1.1.136:2809].
   info Feb 20, 2013 11:37:06 AM     The appliance 10.1.1.136 has
   successfully restarted with the new catalog servers.
   info Feb 20, 2013 11:37:06 AM     The appliance 10.1.1.135 has
   successfully restarted with the new catalog servers.
   error Feb 20, 2013 12:06:11 PM     The appliance 10.1.1.135 did
   not restart in the allotted time.
   
   
    
   
   

LOCAL FIX

PROBLEM SUMMARY
 *  ****************************************************************
   * USERS AFFECTED:  Administrators of the IBM WebSphere         *
   *                  DataPower XC10 Appliance using appliance    *
   *                  collectives Version 2.1 and higher.         *
   ****************************************************************
   * PROBLEM DESCRIPTION: The appliance assimilation task fails   *
   *                      with an error.                          *
   ****************************************************************
   * RECOMMENDATION:  Install a firmware version that contains    *
   *                  this APAR.                                  *
   ****************************************************************
   During assimilation, the appliance that you assimilate into the
   new appliance (the source appliance), does not restart
   correctly.
   The StartHandler process for the xsa.admin command does not
   have the system SSL properties set early enough during
   processing, which results in the following exceptions that are
   displayed in the xsa.admin log files:
   [2013-03-19 19:17:11:848 EDT] 00000001 XSMBeanHelper W
   com.ibm.ws.xsa.server.mbean.XSMBeanHelper
   getCatalogServerConnection Failed to create connection to
   service:jmx:rmi:///jndi/rmi://10.1.1.137:109
   java.rmi.ConnectIOException: error during JRMP connection
   establishment; nested exception is:
   javax.net.ssl.SSLHandshakeException:
   com.ibm.jsse2.util.h: PKIX path building failed:
   java.security.cert.CertPathBuilderException: unable to find
   valid certification path to requested target
   at
   sun.rmi.transport.tcp.TCPChannel.createConnection(TCPChannel.jav
   a:298)
   at
   sun.rmi.transport.tcp.TCPChannel.newConnection(TCPChannel.java:1
   96)
   at sun.rmi.server.UnicastRef.invoke(UnicastRef.java:122)
   at
   javax.management.remote.rmi.RMIServerImpl_Stub.newClient(RMIServ
   erImpl_Stub.java:53)
   at
   javax.management.remote.rmi.RMIConnector.getConnection(RMIConnec
   tor.java:2338)
   at
   javax.management.remote.rmi.RMIConnector.connect(RMIConnector.ja
   va:288)
   at
   com.ibm.ws.xsa.server.mbean.XSMBeanHelper.getCatalogServerConnec
   tion(XSMBeanHelper.java:282)
   at
   com.ibm.ws.xsa.server.mbean.XSMBeanHelper.getCatalogServerConnec
   tionFromCatalogServers(XSMBeanHelper.java:137)
   at
   com.ibm.ws.xsa.server.mbean.XSMBeanHelper.getPlacementServiceMBe
   an(XSMBeanHelper.java:454)
   at
   com.ibm.websphere.xsa.admin.StartHandler.waitForPlacementConnect
   ion(StartHandler.java:1649)
   at
   com.ibm.websphere.xsa.admin.StartHandler.startCatalogServer(Star
   tHandler.java:1464)
   at
   com.ibm.websphere.xsa.admin.StartHandler.startSequence(StartHand
   ler.java:281)
   at
   com.ibm.websphere.xsa.admin.StartHandler.onStartDaemon(StartHand
   ler.java:128)
   at sun.reflect.NativeMethodAccessorImpl.invoke0(Native
   Method)
   at
   sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessor
   Impl.java:60)
   at
   sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethod
   AccessorImpl.java:37)
   at java.lang.reflect.Method.invoke(Method.java:611)
   at
   zero.core.interpreter.JavaInterpreter.invoke(JavaInterpreter.jav
   a:64)
   at
   zero.core.events.EventEngine.dispatch(EventEngine.java:305)
   at
   zero.core.events.EventEngine.fire(EventEngine.java:135)
   at zero.core.DaemonManager.start(DaemonManager.java:90)
   at zero.core.tasks.Run.onCliTask(Run.java:44)
   at sun.reflect.NativeMethodAccessorImpl.invoke0(Native
   Method)
   at
   sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessor
   Impl.java:60)
   at
   sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethod
   AccessorImpl.java:37)
   at java.lang.reflect.Method.invoke(Method.java:611)
   at
   zero.core.interpreter.JavaInterpreter.invoke(JavaInterpreter.jav
   a:64)
   at
   zero.core.events.dispatcher.EventDispatcher.invoke(EventDispatch
   er.java:73)
   at
   zero.core.events.dispatcher.OneDispatcher.invoke(OneDispatcher.j
   ava:43)
   at
   zero.core.events.EventEngine.dispatch(EventEngine.java:305)
   at
   zero.core.events.EventEngine.fire(EventEngine.java:135)
   at zero.core.Main.fireCliTask(Main.java:368)
   at zero.core.Main.invoke(Main.java:345)
   at zero.core.Main.main(Main.java:113)
   Caused by: javax.net.ssl.SSLHandshakeException:
   com.ibm.jsse2.util.h: PKIX path building failed:
   java.security.cert.CertPathBuilderException: unable to find
   valid certification path to requested target
   at com.ibm.jsse2.o.a(o.java:33)
   at com.ibm.jsse2.SSLSocketImpl.a(SSLSocketImpl.java:649)
   at com.ibm.jsse2.kb.a(kb.java:56)
   at com.ibm.jsse2.kb.a(kb.java:502)
   at com.ibm.jsse2.lb.a(lb.java:107)
   at com.ibm.jsse2.lb.a(lb.java:570)
   at com.ibm.jsse2.kb.s(kb.java:327)
   at com.ibm.jsse2.kb.a(kb.java:529)
   at com.ibm.jsse2.SSLSocketImpl.a(SSLSocketImpl.java:300)
   at com.ibm.jsse2.SSLSocketImpl.h(SSLSocketImpl.java:403)
   at com.ibm.jsse2.SSLSocketImpl.a(SSLSocketImpl.java:774)
   at com.ibm.jsse2.k.write(k.java:7)
   at
   java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.ja
   va:76)
   at
   java.io.BufferedOutputStream.flush(BufferedOutputStream.java:134
   )
   at
   java.io.DataOutputStream.flush(DataOutputStream.java:117)
   at
   sun.rmi.transport.tcp.TCPChannel.createConnection(TCPChannel.jav
   a:223)
   ... 34 more
   Caused by: com.ibm.jsse2.util.h: PKIX path building failed:
   java.security.cert.CertPathBuilderException: unable to find
   valid certification path to requested target
   at com.ibm.jsse2.util.f.b(f.java:37)
   at com.ibm.jsse2.util.f.b(f.java:15)
   at com.ibm.jsse2.util.e.a(e.java:19)
   at com.ibm.jsse2.pc.a(pc.java:17)
   at com.ibm.jsse2.pc.checkServerTrusted(pc.java:85)
   at com.ibm.jsse2.pc.b(pc.java:31)
   at com.ibm.jsse2.lb.a(lb.java:49)
   ... 45 more
   Caused by: java.security.cert.CertPathBuilderException: unable
   to find valid certification path to requested target
   at
   com.ibm.security.cert.PKIXCertPathBuilderImpl.buildCertPath(PKIX
   CertPathBuilderImpl.java:642)
   at
   com.ibm.security.cert.PKIXCertPathBuilderImpl.engineBuild(PKIXCe
   rtPathBuilderImpl.java:357)
   at
   java.security.cert.CertPathBuilder.build(CertPathBuilder.java:25
   8)
   at com.ibm.jsse2.util.f.b(f.java:11)
   ... 51 more
   The assimilation task never finishes in time, which causes the
   error that is displayed in the "Tasks" view, and assimilation
   fails.
   
   
    
   
   

PROBLEM CONCLUSION
 *  The StartHandler has been corrected to set the SSL properties
   early enough during processing to prevent the error from
   occurring.
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   IC91195
   
   
 * REPORTED COMPONENT NAME
   WSDATAPOWER XC1
   
   
 * REPORTED COMPONENT ID
   5765H4200
   
   
 * REPORTED RELEASE
   210
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2013-04-02
   
   
 * CLOSED DATE
   2013-04-08
   
   
 * LAST MODIFIED DATE
   2013-04-08
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   WSDATAPOWER XC1
   
   
 * FIXED COMPONENT ID
   5765H4200
   
   

APPLICABLE COMPONENT LEVELS
 * R210 PSY
   UP