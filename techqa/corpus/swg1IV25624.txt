Title: IBM IV25624: UPDATEDB ERROR - SCCD BEST PRACTICES CONTENT V7210_09.DBC SCRIPT - United States

Text:
 SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  Updatedb error - SCCD Best Practices content V7210_09.dbc script
   Steps:
   1. Starting at SRM 7210, enable WF support for the Problem
   application using the WF Designer app
   2. Upgrade to SCCD 75
   
   Expected result: updatedb is successful
   
   
   BMXAA7025E -- Script failed while running.;
   BMXAA8313E -- A statement failed to execute inside a freeform
   statement. See the nested exception.;
   BMXAA7968E -- A unique key error with index WFAPPTOOLBAR_NDX1 is
   defined on table wfapptoolbar, columns (APPNAME,
   TOOLBARSEQUENCE).;
   One or more values in the INSERT statement, UPDATE statement, or
   foreign key update caused by a DELETE statement are not valid
   because the primary key, unique constraint or unique index
   identified by "2" constrains table "MAXIMO.WFAPPTOOLBAR" from
   having duplicate values for the index key.. SQLCODE=-803,
   SQLSTATE=23505, DRIVER=4.11.69
   psdi.dbmanage.MXExceptionWithDefault: scriptrun#freeformfail
   at
   psdi.dbmanage.statement.FreeFormStatement.executeFreeFormStateme
   nt(Unknown Source)
   at psdi.dbmanage.statement.FreeFormStatement.run(Unknown Source)
   at psdi.dbmanage.statement.Script.runStatement(Unknown Source)
   at psdi.dbmanage.statement.Script.run(Unknown Source)
   at psdi.dbmanage.ScriptRun.run(ScriptRun.java:329)
   at
   psdi.dbmanage.Utility.runDbcScriptLastGoodLine(Utility.java:359)
   at psdi.tools.UpdateDB.runDbcScript(Unknown Source)
   at psdi.tools.UpdateDB.runDbcFileInfo(Unknown Source)
   at psdi.tools.UpdateDB.runScripts(Unknown Source)
   at psdi.tools.UpdateDB.startProcess(Unknown Source)
   at psdi.tools.UpdateDB.startProcess(Unknown Source)
   at psdi.tools.UpdateDB.loadScriptInfo(Unknown Source)
   at psdi.tools.UpdateDB.main(Unknown Source)
   Caused by: psdi.dbmanage.connection.MXUniqueKeyException:
   scriptrun#UniqueKey
   at
   psdi.dbmanage.connection.DatabaseConnection.createUniqueKeyExcep
   tion(DatabaseConnection.java:706)
   at
   psdi.dbmanage.connection.DatabaseConnection.doSql(DatabaseConnec
   tion.java:569)
   at
   psdi.dbmanage.connection.DB2DatabaseConnection.doSql(DB2Database
   Connection.java:295)
   at
   psdi.dbmanage.connection.DB295DatabaseConnection.doSql(DB295Data
   baseConnection.java:1)
   at
   psdi.dbmanage.connection.DatabaseConnection.doSql(DatabaseConnec
   tion.java:522)
   at psdi.dbmanage.statement.ChangeStatement.doSql(Unknown Source)
   ... 13 more
   Caused by:
   com.ibm.db2.jcc.am.SqlIntegrityConstraintViolationException: One
   or more values in the INSERT statement, UPDATE statement, or
   foreign key update caused by a DELETE statement are not valid
   because the primary key, unique constraint or unique index
   identified by "2" constrains table "MAXIMO.WFAPPTOOLBAR" from
   having duplicate values for the index key.. SQLCODE=-803,
   SQLSTATE=23505, DRIVER=4.11.69
   at com.ibm.db2.jcc.am.gd.a(gd.java:672)
   at com.ibm.db2.jcc.am.gd.a(gd.java:60)
   at com.ibm.db2.jcc.am.gd.a(gd.java:127)
   at com.ibm.db2.jcc.am.jn.c(jn.java:2561)
   at com.ibm.db2.jcc.am.jn.d(jn.java:2549)
   at com.ibm.db2.jcc.am.jn.b(jn.java:1965)
   at com.ibm.db2.jcc.t4.cb.h(cb.java:224)
   at com.ibm.db2.jcc.t4.cb.b(cb.java:47)
   at com.ibm.db2.jcc.t4.q.b(q.java:38)
   at com.ibm.db2.jcc.t4.rb.h(rb.java:114)
   at com.ibm.db2.jcc.am.jn.hb(jn.java:1960)
   at com.ibm.db2.jcc.am.jn.a(jn.java:2805)
   at com.ibm.db2.jcc.am.jn.e(jn.java:1036)
   at com.ibm.db2.jcc.am.jn.execute(jn.java:1020)
   at
   psdi.dbmanage.connection.DatabaseConnection._executeSql(Database
   Connection.java:603)
   at
   psdi.dbmanage.connection.DatabaseConnection.doSql(DatabaseConnec
   tion.java:557)
   ... 17 more
   
   rollback
   ;
   
   -- BEGINUPDATEDBERROR
   -- Product: Service Desk Best Practices Content for IBM
   SmartCloud Control Desk
   -- Error running file: V7210_09
   -- UPDATEDBFILE:V7210_09.dbc
   -- Script: Error
   psdi.util.MXSystemException: dbchange#ScriptFailure
   at psdi.dbmanage.ScriptRun.run(ScriptRun.java:334)
   at
   psdi.dbmanage.Utility.runDbcScriptLastGoodLine(Utility.java:359)
   at psdi.tools.UpdateDB.runDbcScript(Unknown Source)
   at psdi.tools.UpdateDB.runDbcFileInfo(Unknown Source)
   at psdi.tools.UpdateDB.runScripts(Unknown Source)
   at psdi.tools.UpdateDB.startProcess(Unknown Source)
   at psdi.tools.UpdateDB.startProcess(Unknown Source)
   at psdi.tools.UpdateDB.loadScriptInfo(Unknown Source)
   at psdi.tools.UpdateDB.main(Unknown Source)
   Caused by: psdi.dbmanage.MXExceptionWithDefault:
   scriptrun#freeformfail
   at
   psdi.dbmanage.statement.FreeFormStatement.executeFreeFormStateme
   nt(Unknown Source)
   at psdi.dbmanage.statement.FreeFormStatement.run(Unknown Source)
   at psdi.dbmanage.statement.Script.runStatement(Unknown Source)
   at psdi.dbmanage.statement.Script.run(Unknown Source)
   at psdi.dbmanage.ScriptRun.run(ScriptRun.java:329)
   ... 8 more
   Caused by: psdi.dbmanage.connection.MXUniqueKeyException:
   scriptrun#UniqueKey
   at
   psdi.dbmanage.connection.DatabaseConnection.createUniqueKeyExcep
   tion(DatabaseConnection.java:706)
   at
   psdi.dbmanage.connection.DatabaseConnection.doSql(DatabaseConnec
   tion.java:569)
   at
   psdi.dbmanage.connection.DB2DatabaseConnection.doSql(DB2Database
   Connection.java:295)
   at
   psdi.dbmanage.connection.DB295DatabaseConnection.doSql(DB295Data
   baseConnection.java:1)
   at
   psdi.dbmanage.connection.DatabaseConnection.doSql(DatabaseConnec
   tion.java:522)
   at psdi.dbmanage.statement.ChangeStatement.doSql(Unknown Source)
   ... 13 more
   Caused by:
   com.ibm.db2.jcc.am.SqlIntegrityConstraintViolationException: One
   or more values in the INSERT statement, UPDATE statement, or
   foreign key update caused by a DELETE statement are not valid
   because the primary key, unique constraint or unique index
   identified by "2" constrains table "MAXIMO.WFAPPTOOLBAR" from
   having duplicate values for the index key.. SQLCODE=-803,
   SQLSTATE=23505, DRIVER=4.11.69
   at com.ibm.db2.jcc.am.gd.a(gd.java:672)
   at com.ibm.db2.jcc.am.gd.a(gd.java:60)
   at com.ibm.db2.jcc.am.gd.a(gd.java:127)
   at com.ibm.db2.jcc.am.jn.c(jn.java:2561)
   at com.ibm.db2.jcc.am.jn.d(jn.java:2549)
   at com.ibm.db2.jcc.am.jn.b(jn.java:1965)
   at com.ibm.db2.jcc.t4.cb.h(cb.java:224)
   at com.ibm.db2.jcc.t4.cb.b(cb.java:47)
   at com.ibm.db2.jcc.t4.q.b(q.java:38)
   at com.ibm.db2.jcc.t4.rb.h(rb.java:114)
   at com.ibm.db2.jcc.am.jn.hb(jn.java:1960)
   at com.ibm.db2.jcc.am.jn.a(jn.java:2805)
   at com.ibm.db2.jcc.am.jn.e(jn.java:1036)
   at com.ibm.db2.jcc.am.jn.execute(jn.java:1020)
   at
   psdi.dbmanage.connection.DatabaseConnection._executeSql(Database
   Connection.java:603)
   at
   psdi.dbmanage.connection.DatabaseConnection.doSql(DatabaseConnec
   tion.java:557)
   ... 17 more
   
   java.lang.Exception: DATABASE Script UPDATE COMPLETED WITH
   ERROR. CHECK ERRORS IN UPDATE LOG FILE
   -Updatedb20120728072458.log
   dbchange#ScriptFailure
   at psdi.tools.UpdateDB.startProcess(Unknown Source)
   at psdi.tools.UpdateDB.startProcess(Unknown Source)
   at psdi.tools.UpdateDB.loadScriptInfo(Unknown Source)
   at psdi.tools.UpdateDB.main(Unknown Source)
   
   Javier Guajardo is working on this issue for ITD and should be
   contacted for further details.
   
   
    
   
   

LOCAL FIX
 *  N/A
   
   
    
   
   

PROBLEM SUMMARY
 *  UPDATEDB ERROR - SCCD BEST PRACTICES CONTENT V7210_09.DBC SCRIPT
   
   
    
   
   

PROBLEM CONCLUSION
 *  Fix to be included in next fix pack.
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   IV25624
   
   
 * REPORTED COMPONENT NAME
   SMARTCLOUD CTRL
   
   
 * REPORTED COMPONENT ID
   5725E2400
   
   
 * REPORTED RELEASE
   750
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt / Xsystem
   
   
 * SUBMITTED DATE
   2012-08-03
   
   
 * CLOSED DATE
   2012-08-06
   
   
 * LAST MODIFIED DATE
   2012-08-06
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   SMARTCLOUD CTRL
   
   
 * FIXED COMPONENT ID
   5725E2400
   
   

APPLICABLE COMPONENT LEVELS