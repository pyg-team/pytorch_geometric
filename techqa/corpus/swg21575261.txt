Title: IBM Rational Application Developer terminates unexpectedly due to out of memory exception or may fail to start at all - United States

Text:
oome; native; memory; RN8.0.4.iFix001C TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 IBM® Rational® Application Developer may fail to start, or will start then appear to hang and may eventually crash. Rational Application Developer encounters an OutOfMemoryError due to exhaustion of native memory under certain conditions. 

SYMPTOM
Attempts to start the product result in error "Failed to create the Java Virtual Machine", or once started, a hang/crash may occur when performing any action that will create objects occupying native memory such as threads or classloaders. In the second case, this situation will generally only occur when Rational Application Developer has been used for long periods of time, several hours, but it is dependent upon the usage. This is more common with function that requires the use of a larger amounts of native memory such as publishing, debugging, or any action creating a large number of threads. When this situation is encountered, Rational Application Developer will appear to hang, and will typically crash after a period of time.


CAUSE
The Java Virtual Machine executable listed in the eclipse.ini file that is used to start Rational Application Developer is jvm.dll instead of javaw.exe.

ENVIRONMENT
1. Rational Application Developer v7.5.5.4, v7.5.5.5 and v8.0.3, v8.0.4 on a Windows 32-bit platform. 

2. Rational Application Developer v8.0.3 and v8.0.4 on a Windows 64-bit platform with Rational Application Developer installed using Installation Manager option 32-bit bit mode.


DIAGNOSING THE PROBLEM
The eclipse.ini file located in the installation directory ( typically located in C:\Program Files\IBM\SDP) indicates jvm.dll is the executable being used to launch Rational Application Developer; For example, -vm C:\Program Files\IBM\SDP\jdk\jre\bin\j9vm\jvm.dll. Once Rational Application Developer is started, the Windows Task Manager image name is eclipse.exe instead of javaw.exe as in earlier versions. 

 1. The problem of Rational Application Developer not being able to start is more prevalent on Windows 32 bit Operating systems with the /3GB SWITCH turned on, and the JVM configured to take advantage of the switch together with using a larger Heap size than the default ; For example, set the JVM arguments -Xss2048k and -Xmx1024m in the eclipse.ini file. 
 2. If a hang/crash occurs, Java Core files will typically be created in the Rational Application Developer Home product directory. Examine one of the Java Core files to determine if this is a native out of memory error. The section below will be located at the top of the Java Core File. In this section, the key indicator is the line containing the java/lang/OutOfMemoryError message indicating the JVM "Failed to create a thread" which is a native resource. 
    
    NULL ------------------------------------------------------------------------
    0SECTION TITLE subcomponent dump routine
    NULL ===============================
    1TISIGINFO Dump Event "systhrow" (00040000) Detail "java/lang/OutOfMemoryError" "Failed to create a thread: retVal -1073741830, errno 12" received 
    1TIDATETIME Date: 2011/12/12 at 08:35:40
    1TIFILENAME Javacore filename: E:\MyProduct\javacore.20111212.083535.3356.0011.txt
    1TIREQFLAGS Request Flags: 0x81 (exclusive+preempt)
    1TIPREPSTATE Prep State: 0x4 (exclusive_vm_access)
    NULL ------------------------------------------------------------------------


RESOLVING THE PROBLEM
Update to version 8.0.4 iFix 1 (or later) 

 1. Open the eclipse.ini file in your installation directory (typically located in C:\Program Files\IBM\SDP) and change the lines from:


-vm
<installation_directory>\jdk\jre\bin\j9vm\jvm.dll 

to: 

-vm
jdk\jre\bin\javaw.exe 




Cross reference information Segment Product Component Platform Version Edition Software Development Rational Application Developer Standard Edition for WebSphere Software General Information Windows 8.0.3, 8.0.4 All Editions 
PRODUCT ALIAS/SYNONYM
 RAD