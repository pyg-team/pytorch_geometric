Title: IBM IO17673: TDI 7.0 WINDOWS PASSWORD PLUGIN - MQ ERRORS - United States

Text:
z/os  A FIX IS AVAILABLE
7.0.0-TIV-TDI-FP0009 [http://www-01.ibm.com/support/docview.wss?uid=swg24038931]


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  Description:
   
   Customer is using TDI 7.0 Password Plugin.
   
   Customer explained that they have a local MQ on each domain
   controller
   (Windows 2008 R2.)
   The local MQ is only used for the password plugin.  Despite
   this, we are
   seeing errors in the proxy.log saying that the address is
   already in
   use.
   
   Every few days they see an error in the proxy.log like:
   
   [2/23/12 6:32 PM] {JMSStore}     INFO:   CTGDKN214I An exception
   occurred while sending password update message. The exception
   will be
   ignored.
   com.ibm.msg.client.jms.DetailedIllegalStateException:
   JMSWMQ0018: Failed
   to connect to queue manager '' with connection mode 'Client' and
   host
   name 'sovpdc1(1425)'. Check the queue manager is started and if
   running
   in client mode, check there is a listener running. Please see
   the linked
   exception for more information.
    at
   com.ibm.msg.client.wmq.common.internal.Reason.reasonToException(
   Reason.j
   ava:496)
   ....
   Caused by: com.ibm.mq.MQException: JMSCMQ0001: WebSphere MQ call
   failed
   with compcode '2' ('MQCC_FAILED') reason '2059'
   ('MQRC_Q_MGR_NOT_AVAILABLE').
    at
   com.ibm.msg.client.wmq.common.internal.Reason.createException(Re
   ason.jav
   a:223)
    ... 12 more
   Caused by: com.ibm.mq.jmqi.JmqiException: CC=2;RC=2059;AMQ9204:
   Connection to host 'sovpdc1(1425)' rejected.
   [1=com.ibm.mq.jmqi.JmqiException[CC=2;RC=2059;AMQ9248: The
   program could
   not bind to a 'TCP' socket.
   [1=Socket.bind,3=TCP,4=1,5=java.net.BindException[Address
   already in
   use:
   NET_Bind]]],3=sovpdc1(1425),5=RemoteTCPConnection.connnectUsingL
   ocalAddr
   ess]
   
   this is the plugin.log
   
   INFO:  480: Thu Feb 23 18:32:03 2012: : Entering PasswordFilter
   INFO:  480: Thu Feb 23 18:32:03 2012: : User: OWENSEL
   INFO:  480: Thu Feb 23 18:32:03 2012: : FullName: owensel
   INFO:  480: Thu Feb 23 18:32:03 2012: : SetOperation = 0
   INFO:  480: Thu Feb 23 18:32:03 2012: : Exiting PasswordFilter
   INFO:  480: Thu Feb 23 18:32:03 2012: : Entering
   PasswordChangeNotify
   INFO:  480: Thu Feb 23 18:32:03 2012: : User: OWENSEL
   INFO:  480: Thu Feb 23 18:32:03 2012: : Relative ID (RID) of the
   user:
   61434
   ERROR: 480: Thu Feb 23 18:32:03 2012: : The proxy response
   represents
   error.
   ERROR: 480: Thu Feb 23 18:32:03 2012: : Could not synchronize
   password
   for user 'OWENSEL': PWPROXY_ERROR_PROTOCOL_PASSWORD_OP_FAILED
   INFO:  480: Thu Feb 23 18:32:03 2012: : Exiting
   PasswordChangeNotify
   
   So the local MQ is telling the TDI Password Plugin that the
   host/port is
   already in use, even though MQ is only being used for the TDI
   Password
   Plugin.
   
   Engineering has provided a JAR file which should provide more
   logging
   information.
   
   Steps to Duplicate: This cannot be duplicated on command.
   
   Desired Behavior: The customer would like to determine the cause
   and
   prevent the error from MQ.
   
   Environment: TDI 7.0, Windows 2008 R2, MQ 7.0.1.3
   
   
    
   
   

LOCAL FIX
 *  1679
   
   
    
   
   

PROBLEM SUMMARY
 *  MQ related error messages should not be seen in the logs. The
   error occurs because of dynamic port changes while communicating
   with MQ.
   
   
    
   
   

PROBLEM CONCLUSION
 *  This is a bug in the TDI code and has been fixed. The official
   fix would be made available in 7.0.0-TIV-TDI-FP0009.
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   IO17673
   
   
 * REPORTED COMPONENT NAME
   ITDI MULTIPLATF
   
   
 * REPORTED COMPONENT ID
   5724D9960
   
   
 * REPORTED RELEASE
   700
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2012-11-30
   
   
 * CLOSED DATE
   2012-12-30
   
   
 * LAST MODIFIED DATE
   2012-12-30
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
    IO17879 [http://www-01.ibm.com/support/docview.wss?uid=swg1IO17879] IO17880 [http://www-01.ibm.com/support/docview.wss?uid=swg1IO17880]
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   ITDI MULTIPLATF
   
   
 * FIXED COMPONENT ID
   5724D9960
   
   

APPLICABLE COMPONENT LEVELS
 * R70D PSY
   UP