Title: IBM IY93703: Alcatel 5620 SAM P2P documentation notes - United States

Text:
 SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS DOCUMENTATION ERROR.
    
   
   

ERROR DESCRIPTION
 *  The conclusion from Netcool Development is;
   
   "Scenario 1 - One probe fails and the other starts up
   
   We think that If both probes contain the same persistent Id and
   Probe A Fails - then Probe B should be able to connect with the
   same Persistent ID.
   However Probe B may not be managing to connect because the SAM
   server takes a long time to come up ( the default retry time is
   about 8 minutes).
   
   In our current configuration in Production we have
   PersistentJmsId set to two different values for the Master and
   the Slave probes. This appears to function well but we are
   currently trying to verify the events we have by cross-checking
   them with the 5620SAM platform..
   
   Scenario 2 -
   2 Probes are started at the same time - The probes cannot share
   the same persistent ID
   
   My finding is that two probes cannot share the same
   PersistentJmsID at any time no matter when you try to start
   them, at the same time or 20 minutes apart. My testing shows
   that if you connect probe1 with PersistentJmsId
   'netcool@1@127.0.0.1' then you can never connect another probe
   with that same ClientId because of course the 5620SAM already
   has something registered with that PersistentJmsId.
   
   Peer to Peer with the default configuration in the properties
   file does not work and I would sugges that you highlight this
   because in future other people might have the same problem.
   
   Scenario 3 - persistent ID is set to ""
   This wont work as the latest version of SAM requires an ID of
   some sort"
   
   I verified here you cannot have PersistentJmsId set to ''
   (BLANK) with version 3.0 of 5620SAM. I believe the version 2.1
   functions exactly the same because the SAM documentation states
   that you cannot have ClientId as BLANK in either version.
   Development said that 2.1 will work with a blank ID, I don't
   know what that is based on but my testing shows it does not
   work.
   
   
   Yes.
   This is the expected configuration for two queues on the same
   Alcatel 5620 SAM;
   
   Host1 :
   PersistentJmsId : 'netcoolmaster@1@127.0.0.1'
   JmsFilter: 'ALA_clientId in ( 'netcoolmaster@1@127.0.0.1','')
   and ALA_category not in ('STATISTICS', 'ACCOUNTING')'
   
   Host2 :
   PersistentJmsId : 'netcoolslave@1@127.0.0.1'
   JmsFilter: 'ALA_clientId in ( 'netcoolslave@1@127.0.0.1','') and
   ALA_category not in ('STATISTICS', 'ACCOUNTING')'
   
   I have tested this configuration here and unfortunately these
   properties do not work together. If I set the PersistentJmsId
   value only then this works. But if I set the JmsFilter property
   like the above examples then the probe will not even startup,
   see below
   
   bash-2.05$ $OMNIHOME/probes/nco_p_alcatel_5620_sam_v3 -propsfile
   /opt/netcool/omnibus/probes/solaris2/alcatel_5620_sam_v3_1.props
   -messagelevel debug -messagelog stdout
   bash-2.05$
   
   No logfile is created, no messages written to the console.
   
   So for now we will try to verify with the 5620SAM people that we
   are receiving the correct alarms but I am worried that we will
   not be because our JmsFilter does not match the PersistentJmsId.
   Development said that this configuration could be used?
   
   The properties we have are below, this is from the test
   environment where we only have one probe without P2P. I found
   that if I just uncomment the two default properties in the props
   file, without moving them or changing the values the probe fails
   to start like above? When just uncommenting PersistentJmsId the
   probe starts.
   
   I need to know why this does not work, I hope we can confirm on
   the alarms from 5620SAM but in the meantime we need to be sure
   we have the probe configured correctly as per the way it was
   written. Any further testing I can do please let me know.
   SamServerUserName       : 'samouser'
   SamServerPassword       : '5620Sam1'
   Host                    : '10.18.2.101'
   ReconnectionAttempts: 3
   ReconnectionInterval: 180
   MessageLevel            : 'debug'
   MessageLog              :
   '$OMNIHOME/log/alcatel_5620_sam_001.log'
   Server                  : 'NCOMS_C'
   NetworkTimeout: 30
   PropsFile:
   '$OMNIHOME/probes/solaris2/alcatel_5620_sam_v3_1.props'
   RulesFile: '$OMNIHOME/probes/solaris2/alcatel_5620_sam_v3.rules'
   PersistentJmsId : 'netcoolmaster@1@127.0.0.1'
   JmsFilter: 'ALA_clientId in ( 'netcoolmaster@1@127.0.0.1','')
   and ALA_category not in ('STATISTICS', 'ACCOUNTING')'
   I look forward to a response on the problems with the JMSFilter
   property, all the other points are resolved for me in that we
   have proved they are issues but I don't require you to
   specifically do anything else on them for this ticket.
   
   
    
   
   

LOCAL FIX
 *  Customer is to use two queues with the standard JMS filter
   
   
    
   
   

PROBLEM SUMMARY
 *  ****************************************************************
   * USERS AFFECTED: All users.                                   *
   ****************************************************************
   * PROBLEM DESCRIPTION: Product: Probe for Alcatel 5620 SAM     *
   *                                                              *
   *                      In Document: Netcool/OMNIbus Probe for  *
   *                      Alcatel 5620 SAM Reference Guide        *
   *                                                              *
   *                      Document Version: 1.0                   *
   *                                                              *
   *                      Requested Change: The Peer-to-Peer      *
   *                      failover functionality does not work    *
   *                      when values of the  JmsFilter property  *
   *                      of the master and slave probe are same. *
   *                      Customer is to use two different queues *
   *                      with the standard JMS filter.           *
   ****************************************************************
   * RECOMMENDATION:                                              *
   *                                                              *
   ****************************************************************
   The Peer-to-Peer Failover section of the Probe for Alcatel 5620
   SAM Reference guide should provide a warning to the customer
   against using the same value for the JmsFilter property in the
   properties files of the Master and Slave probes. This warning
   may prompt the user to use different values for the JmsFilter
   properties of the Master and Slave probes.
   
   
    
   
   

PROBLEM CONCLUSION
 *  The product documentation will be updated with the next release
   of Tivoli Netcool/OMNIbus Probe for Alcatel 5620 SAM.
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   IY93703
   
   
 * REPORTED COMPONENT NAME
   ALCATEL 5620 SA
   
   
 * REPORTED COMPONENT ID
   5724P17AS
   
   
 * REPORTED RELEASE
   100
   
   
 * STATUS
   CLOSED DOC
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2007-01-19
   
   
 * CLOSED DATE
   2007-08-17
   
   
 * LAST MODIFIED DATE
   2007-08-17
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

Publications Referenced SC23766300 FIX INFORMATION

APPLICABLE COMPONENT LEVELS