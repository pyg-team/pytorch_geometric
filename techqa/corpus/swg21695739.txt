Title: IBM High CPU usage caused by btpool0-3 - Acceptor0 - United States

Text:
Sterling B2B Integrator TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 Top command show that Sterling B2B Integrator has high CPU usage. 

SYMPTOM
Thread dump:

3XMTHREADINFO "btpool0-3 - Acceptor0
SelectChannelConnector@1xxx.xxx.xxx.xxx:20000"
J9VMThread:0x000000000C534900, j9thread_t:0x00002B91D1F35670,
java/lang/Thread:0x000000060180CCE8, state:CW, prio=5
3XMJAVALTHREAD (java/lang/Thread getId:0x3F,
isDaemon:false)
3XMTHREADINFO1 (native thread ID:0x2129, native
priority:0x5, native policy:UNKNOWN)
3XMTHREADINFO2 (native stack address range
from:0x00002B91DCBC6000, to:0x00002B91DCC07000, size:0x41000)
3XMCPUTIME CPU usage total: 7333.344085464 secs
3XMHEAPALLOC Heap bytes allocated since last GC
cycle=65536 (0x10000)
3XMTHREADINFO3 Java callstack:
4XESTACKTRACE at
org/mortbay/io/nio/SelectorManager$SelectSet.doSelect(SelectorMa
nager.java:768(Compiled Code))
4XESTACKTRACE at
org/mortbay/io/nio/SelectorManager.doSelect(SelectorManager.java
:192(Compiled Code))
4XESTACKTRACE at
org/mortbay/jetty/nio/SelectChannelConnector.accept(SelectChanne
lConnector.java:124(Compiled Code))
4XESTACKTRACE at
org/mortbay/jetty/AbstractConnector$Acceptor.run(AbstractConnect
or.java:708(Compiled Code))
4XESTACKTRACE at
org/mortbay/thread/BoundedThreadPool$PoolThread.run(BoundedThrea
dPool.java:451)

Note: xxx.xxx.xxx.xxx:20000 is the IP
and base port of this node.

The high CPU issue has caused outages on Production system requiring system restart.

java.lang.StackOverflowError error in the ui.log.


DIAGNOSING THE PROBLEM
High CPU utilization.
Obtain thread dumps and compare against symptoms.

RESOLVING THE PROBLEM
Please apply 5020402_5 for Sterling B2B Integrator 5.2.4.2.
Please apply 5020500_1 for Sterling B2B Integrator 5.2.5.0.

This fix is off by default. 

To activate the fix:
Stop Sterling B2B Integrator.
Add a property usingNIOConnector=false in noapp.properties or add noapp.usingNIOConnector=false to customer_overrides.properties. 
Start Sterling B2B Integrator. 
Verify in noapp.log.xxx that "Using org.mortbay.jetty.bio.SocketConnector!" is present in the file.