Title: IBM CTGKM0648I  Device already exists - Message when trying to add device in SKLM - United States

Text:
duplicate TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 Unable to add new device via the GUI or CLI, receive message that device already exist, even though it does not show up in GU in device group. 

CAUSE
Device is only partially added

RESOLVING THE PROBLEM
Since the device is partially added in SKLM, we need to remove it then add it. 

Please refer to below instructions : 

**** Before we make any changes, please take a SKLM backup. You can go into the GUI to the Backup and Restore section and take a manual backup****

Open a Windows command prompt and change directory to WAS_HOME\bin: 

cd Program Files\IBM\WebSphere\AppServer\bin 

Log into wsadmin as the built-in local administrator account : 

wsadmin.bat -username sklmadmin -password <sklmpasswd> -lang jython 

On UNIX 

cd /opt/IBM/WebSphere/AppServer/bin

./wsadmin.sh -username sklmadmin -password <sklmpasswd> -lang jython 

Part 1: If you have pending devices and you need to accept them. List all Pending devices requests & accept them if you find any: 

a) List all devices pending requests, look for devices that you are 
trying to add and copy UUID value: 
print AdminTask.tklmPendingDeviceList() 

b) Accept pending devices requests: 
print AdminTask.tklmPendingDeviceAccept('[-deviceUUID 
DEVICE-7d588437-e725-48bf-a836-00a47df64e78 -usage LTO]]') 


Part 2: If there are no pending devices requests listed, you can try to list existing devices and remove them from there: 

a) List all devices, look for devices that you are trying to add and copy UUID value: 

print AdminTask.tklmDeviceList('[-type LTO]')

Example below for serial number 009912345678 

Description = test1234124 
Serial Number = 009912345678 
Device uuid = DEVICE-bc063d11-2587-4101-a2c3-e4937c02b057 
Device group = LTO 
World wide name = 
Sym alias = LATEST 


b) Remove devices specifying the problem device UUID: 

print AdminTask.tklmDeviceDelete('[-uuid DEVICE-bc063d11-2587-4101-a2c3-e4937c02b057]') 

c) List all devices again making sure the the problem device is not in the list: 
print AdminTask.tklmDeviceList('[-type LTO]') 

d) When confirmed, try to add devices manually through the SKLM portal (GUI) 



PRODUCT ALIAS/SYNONYM
 SKLM Security Key Lifecycle Manager