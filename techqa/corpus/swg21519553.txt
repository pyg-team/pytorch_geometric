Title: IBM How to call an Oracle stored procedure with IN parameters - United States

Text:
Extensions; Adapters; STERLINGFAQ TECHNOTE (FAQ)

QUESTION
 How to call an Oracle stored procedure with IN parameters 

CAUSE
Customer want to insert some process data information into a oracle table

ANSWER


 You need to configure the LWJDBC adapter with query_type: "PROCEDURE" and use 

{call StoredProcedureName(?,?,?)} where ?,?,? are the arguments passed in from the parameter specifications. 





Example: The example shows calling a stored procedure which only inserts a record into a sample table. The table only has two entries: a number and a name. Both coming from the process data of the sample BP.

Before you can use this example please replace <custom_schema> with a schema on your db system and <custom_pool> with a prior created Sterling B2B Integrator jdbc pool. First create the table and the stored procedure. Afterwards check in the sample BP. You can run the BP without an input file, because the first assigns insert the test data into the process data. After the BP has finished a select shows the entry "2, test".

create table <custom_schema>.lwjdbc_sample_in_param (
nr number(6),
name char(20)
);


CREATE OR REPLACE PROCEDURE <custom_schema>.proc_lwjdbc_sample_in_param (
out_ret OUT NUMBER,
arg_nr IN NUMBER,
arg_name IN VARCHAR
)
IS
BEGIN
out_ret := 0;
INSERT INTO <custom_schema>.lwjdbc_sample_in_param (nr, name) VALUES (arg_nr, arg_name);
commit;
END proc_lwjdbc_sample_in_param;

<process name="BP_LWJDBC_sample_in">
<sequence name="Sequence Start">
<assign name="Assign" to="/ProcessData/number">2</assign>
<assign name="Assign" to="/ProcessData/name">test</assign>
<operation name="Lightweight JDBC Adapter">
<participant name="LightweightJDBCAdapterQuery"/>
<output message="LightweightJDBCAdapterTypeInputMessage">
<assign to="param1">1</assign>
<assign to="param2" from="/ProcessData/number/text()"></assign>
<assign to="param3" from="/ProcessData/name/text()"></assign>
<assign to="paramtype1">Integer</assign>
<assign to="paramtype2">Integer</assign>
<assign to="paramtype3">String</assign>
<assign to="pool"><custom_pool></assign>
<assign to="query_type">PROCEDURE</assign>
<assign to="result_name">result</assign>
<assign to="row_name">row</assign>
<assign to="sql">call <custom_schema>.proc_lwjdbc_sample_in(?, ?,?)</assign>
<assign to="." from="*"></assign>
</output>
<input message="inmsg">
<assign to="." from="*"></assign>
</input>
</operation>

</sequence>
</process>




 



Cross reference information Segment Product Component Platform Version Edition Commerce Sterling B2B Integrator Adapters 
HISTORICAL NUMBER
 FAQ1721