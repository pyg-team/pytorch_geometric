Title: IBM The Optim Performance Manager server reports Out of Memory errors - United States

Text:
OPM OoM Linux Redhat 6 errno 11 TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 The OPM server gets an 'Out of Memory' error message. The message is seen in the javacore as:
"java/lang/OutOfMemoryError" "Failed to create a thread: ..., errno 11" 

SYMPTOM
"java/lang/OutOfMemoryError" "Failed to create a thread: retVal -1073741830, errno 11"


CAUSE
The ulimit setting on Linux for nproc and nofile is not allowing the process to expand

ENVIRONMENT
Linux Redhat version 6

DIAGNOSING THE PROBLEM
The javacore file has the OoM error and the errno 11. A review of the heapdump shows the heap is not near the defined limit .

RESOLVING THE PROBLEM
There was a change to the default configuration of how the limits are configured starting in version 6 of Redhat Linux. The default nproc value was lowered to 1024 for user started processes. This value is too small for the needs of the OPM server. Adjust the setting in /etc/security/limits to allow the user running the OPM server to use a larger value. The DB2 (9.7) suggestion for the instance owner is 64k. The OPM team is suggesting at least 16k or 16383 units be used for both the nproc value and the nofile value in the limits file. If PAM limits are in use on the Linux system, these also will need to be adjusted to allow the system to run the select values.