Title: IBM IV38030: A SQL ERROR OCCURS IN CHANGEMANAGER WHEN THE DATA EXCEEDS THE CLOB SIZE. - United States

Text:
 SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  The following exception may occurs in ChangeManager.log:
   2013-03-13 22:18:45,150 ChangeManager [pool-2-thread-1]  ERROR
   cdb.RawEv
   entHandler - com.ibm.db2.jcc.am.SqlDataException: DB2 SQL Error:
   SQLCODE
   =-302, SQLSTATE=22001, SQLERRMC=null, DRIVER=3.63.75
   com.ibm.db2.jcc.am.SqlDataException: DB2 SQL Error:
   SQLCODE=-302, SQLSTA
   TE=22001, SQLERRMC=null, DRIVER=3.63.75
    at com.ibm.db2.jcc.am.fd.a(fd.java:671)
    at com.ibm.db2.jcc.am.fd.a(fd.java:60)
    at com.ibm.db2.jcc.am.fd.a(fd.java:127)
    at com.ibm.db2.jcc.am.yn.b(yn.java:2317)
    at com.ibm.db2.jcc.am.yn.c(yn.java:2300)
    at com.ibm.db2.jcc.t4.cb.l(cb.java:370)
    at com.ibm.db2.jcc.t4.cb.a(cb.java:62)
    at com.ibm.db2.jcc.t4.q.a(q.java:50)
    at com.ibm.db2.jcc.t4.tb.b(tb.java:220)
    at com.ibm.db2.jcc.am.zn.lc(zn.java:3314)
    at com.ibm.db2.jcc.am.zn.b(zn.java:4271)
    at com.ibm.db2.jcc.am.zn.b(zn.java:4425)
    at com.ibm.db2.jcc.am.zn.dc(zn.java:757)
    at com.ibm.db2.jcc.am.zn.executeUpdate(zn.java:740)
    at
   com.collation.changemgr.ChangeManagerPersisterImpl.persistOnward
   Even
   t(ChangeManagerPersisterImpl.java:965)
    at
   com.collation.changemgr.ChangeManagerPersisterImpl.persistOnward
   Even
   t(ChangeManagerPersisterImpl.java:567)
    at
   com.collation.changemgr.jini.RawEventListener.persistOnwardEvent
   (Raw
   EventListener.java:396)
    at
   com.collation.changemgr.jini.RawEventListener.handleTopologyEven
   t(Ra
   wEventListener.java:204)
    at
   com.collation.changemgr.jini.RawEventListener$TopologyEventHandl
   er.r
   un(RawEventListener.java:459)
    at
   java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoo
   lExe
   cutor.java:678)
    at
   java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExe
   cuto
   r.java:703)
    at java.lang.Thread.run(Thread.java:813)
   
   This may result some events are not persisted to change history.
   
   This can occur when data collected, such as a very large file
   capture(entire directory) exceeds the 1M clob size.
   
   The APAR change will truncate the input such that the SQL error
   will not occur.
   
   
    
   
   

LOCAL FIX
 *  Reduce the size of the data collected to not exceed 1M.
   
   
    
   
   

PROBLEM SUMMARY
 *  The following exception may occurs in FP4 in ChangeManager.log:
   2013-03-13
   22:18:45,150 ChangeManager [pool-2-thread-1] ERROR cdb.RawEv
   entHandler -
   com.ibm.db2.jcc.am.SqlDataException: DB2 SQL Error:SQLCODE
   =-302, SQLSTATE=22001,
   SQLERRMC=null, DRIVER=3.63.75
   com.ibm.db2.jcc.am.SqlDataException: DB2 SQL Error:
   SQLCODE=-302, SQLSTA TE=22001, SQLERRMC=null, DRIVER=3.63.75 at
   com.ibm.db2.jcc.am.fd.a(fd.java:671) at
   com.ibm.db2.jcc.am.fd.a(fd.java:60) at
   com.ibm.db2.jcc.am.fd.a(fd.java:127) at
   com.ibm.db2.jcc.am.yn.b(yn.java:2317) at
   com.ibm.db2.jcc.am.yn.c(yn.java:2300) at
   com.ibm.db2.jcc.t4.cb.l(cb.java:370) at
   com.ibm.db2.jcc.t4.cb.a(cb.java:62) at
   com.ibm.db2.jcc.t4.q.a(q.java:50) at
   com.ibm.db2.jcc.t4.tb.b(tb.java:220) at
   com.ibm.db2.jcc.am.zn.lc(zn.java:3314) at
   com.ibm.db2.jcc.am.zn.b(zn.java:4271) at
   com.ibm.db2.jcc.am.zn.b(zn.java:4425) at
   com.ibm.db2.jcc.am.zn.dc(zn.java:757) at
   com.ibm.db2.jcc.am.zn.executeUpdate(zn.java:740) at
   com.collation.changemgr.ChangeManagerPersisterImpl.persistOnward
   Even
   t(ChangeManagerPersisterImpl.java:965) at
   com.collation.changemgr.ChangeManagerPersisterImpl.persistOnward
   Even
   t(ChangeManagerPersisterImpl.java:567) at
   com.collation.changemgr.jini.RawEventListener.persistOnwardEvent
   (Raw
   EventListener.java:396) at
   com.collation.changemgr.jini.RawEventListener.handleTopologyEven
   t(Ra
   wEventListener.java:204) at
   com.collation.changemgr.jini.RawEventListener$TopologyEventHandl
   er.r
   un(RawEventListener.java:459) at
   java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoo
   lExe
   cutor.java:678) at
   java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExe
   cuto r.java:703)
   at java.lang.Thread.run(Thread.java:813) This may result some
   events are not
   persisted to change history.
   
   
    
   
   

PROBLEM CONCLUSION
 *  The fix for this APAR is contained in the following maintenance
   packages:
   | Fix Pack | 7.2.1-TIV-ITADDM-FP0005
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   IV38030
   
   
 * REPORTED COMPONENT NAME
   APP DEPENDENCY
   
   
 * REPORTED COMPONENT ID
   5724N5500
   
   
 * REPORTED RELEASE
   721
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2013-03-14
   
   
 * CLOSED DATE
   2013-04-12
   
   
 * LAST MODIFIED DATE
   2013-04-12
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   APP DEPENDENCY
   
   
 * FIXED COMPONENT ID
   5724N5500
   
   

APPLICABLE COMPONENT LEVELS
 * R721 PSY
   UP