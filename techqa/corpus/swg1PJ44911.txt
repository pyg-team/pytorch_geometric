Title: IBM PJ44911: DB2TS - TEXT SEARCH DOES NOT RESPOND AND JAVA PROCESS GRABS HIGHCPU USAGE. - United States

Text:
 SUBSCRIBE TO THIS APAR
By subscribing, you receive periodic emails alerting you to the status of the APAR, along with a link to the fix after it becomes available. You can track this item individually or track all items by product.

Notify me when this APAR changes.

Notify me when an APAR for this component changes.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  Content Search Services Text search does not respond and java
   process grabs high cpu usage.
   
   From javacore.20170620.092154.4414.0001.txt.
   
   There are nine "Socket Request Handler Thread_pool-4-thread-xxx"
   threads that appear to be in a lock waiting state with similar
   stack traces:
   
   3XMTHREADINFO      "Socket Request Handler
   Thread_pool-4-thread-39" J9VMThread:0x00000000BCD5A800,
   j9thread_t:0x00007F775ADF5C20,
   java/lang/Thread:0x0000000002238808, state:CW, prio=5
   3XMJAVALTHREAD            (java/lang/Thread getId:0x52,
   isDaemon:false)
   3XMTHREADINFO1            (native thread ID:0x1CE4, native
   priority:0x5, native policy:UNKNOWN)
   3XMTHREADINFO2            (native stack address range
   from:0x00007F770611B000, to:0x00007F770615C000, size:0x41000)
   3XMCPUTIME               CPU usage total: 2104.411438194 secs
   3XMHEAPALLOC             Heap bytes allocated since last GC
   cycle=0 (0x0)
   3XMTHREADINFO3           Java callstack:
   4XESTACKTRACE                at
   java/util/HashMap.getEntry(HashMap.java:480(Compiled Code))
   4XESTACKTRACE                at
   java/util/HashMap.get(HashMap.java:432(Compiled Code))
   4XESTACKTRACE                at
   com/ibm/es/nuvo/tokenizer/service/TokenizerRegistry.getConfig(To
   kenizerRegistry.java:97(Compiled Code))
   4XESTACKTRACE                at
   com/ibm/es/nuvo/tokenizer/service/DefaultTokenizerPool.aquire(De
   faultTokenizerPool.java:185(Compiled Code))
   4XESTACKTRACE                at
   com/ibm/es/nuvo/search/query/LinguisticQueryParser.getFieldQuery
   (LinguisticQueryParser.java:724(Compiled Code))
   4XESTACKTRACE                at
   com/ibm/es/nuvo/search/query/parser/QueryParser.Term(QueryParser
   .java:1820(Compiled Code))
   4XESTACKTRACE                at
   com/ibm/es/nuvo/search/query/parser/QueryParser.Clause(QueryPars
   er.java:1652(Compiled Code))
   4XESTACKTRACE                at
   com/ibm/es/nuvo/search/query/parser/QueryParser.ConjQuery(QueryP
   arser.java:1542(Compiled Code))
   4XESTACKTRACE                at
   com/ibm/es/nuvo/search/query/parser/QueryParser.DisjQuery(QueryP
   arser.java:1511)
   4XESTACKTRACE                at
   com/ibm/es/nuvo/search/query/parser/QueryParser.Query(QueryParse
   r.java:1470)
   4XESTACKTRACE                at
   com/ibm/es/nuvo/search/query/parser/QueryParser.TopLevelQuery(Qu
   eryParser.java:1448)
   4XESTACKTRACE                at
   com/ibm/es/nuvo/search/query/parser/QueryParser.parse(QueryParse
   r.java:253)
   4XESTACKTRACE                at
   com/ibm/es/nuvo/search/query/LinguisticQueryParser.parse(Linguis
   ticQueryParser.java:2463)
   4XESTACKTRACE                at
   com/ibm/es/nuvo/search/query/LinguisticQueryParser.extract(Lingu
   isticQueryParser.java:2617)
   4XESTACKTRACE                at
   com/ibm/es/nuvo/search/query/LinguisticQueryParser.parseAndExtra
   ct(LinguisticQueryParser.java:2559)
   4XESTACKTRACE                at
   com/ibm/es/nuvo/search/SearchableImpl.getParsedQuery(SearchableI
   mpl.java:353)
   4XESTACKTRACE                at
   com/ibm/es/nuvo/search/SearchableImpl.getParsedQuery(SearchableI
   mpl.java:267)
   4XESTACKTRACE                at
   com/ibm/es/nuvo/search/SearchableImpl.search(SearchableImpl.java
   :201)
   4XESTACKTRACE                at
   com/ibm/es/nuvo/search/SearchBean.search(SearchBean.java:98)
   4XESTACKTRACE                at
   com/ibm/es/nuvo/inyo/search/SelectivityHandler.computeSelectivit
   y(SelectivityHandler.java:219)
   4XESTACKTRACE                at
   com/ibm/es/nuvo/inyo/search/SelectivityHandler.execute(Selectivi
   tyHandler.java:81)
   4XESTACKTRACE                at
   com/ibm/es/nuvo/inyo/common/InyoServer$InyoListener.run(InyoServ
   er.java:430)
   4XESTACKTRACE                at
   java/util/concurrent/ThreadPoolExecutor.runWorker(ThreadPoolExec
   utor.java:1156)
   4XESTACKTRACE                at
   java/util/concurrent/ThreadPoolExecutor$Worker.run(ThreadPoolExe
   cutor.java:626)
   4XESTACKTRACE                at
   java/lang/Thread.run(Thread.java:804)
   3XMTHREADINFO3           Native callstack:
   4XENATIVESTACK               (0x00007F77668A6122
   [libj9prt26.so+0x13122])
   4XENATIVESTACK               (0x00007F77668B379F
   [libj9prt26.so+0x2079f])
   4XENATIVESTACK               (0x00007F77668A5E6B
   [libj9prt26.so+0x12e6b])
   4XENATIVESTACK               (0x00007F77668A5F67
   [libj9prt26.so+0x12f67])
   4XENATIVESTACK               (0x00007F77668B379F
   [libj9prt26.so+0x2079f])
   4XENATIVESTACK               (0x00007F77668A5A8B
   [libj9prt26.so+0x12a8b])
   4XENATIVESTACK               (0x00007F776689F8E2
   [libj9prt26.so+0xc8e2])
   4XENATIVESTACK               (0x00007F77682B3370
   [libpthread.so.0+0xf370])
   4XENATIVESTACK               pthread_cond_wait+0xc3
   (0x00007F77682AF6D3 [libpthread.so.0+0xb6d3])
   4XENATIVESTACK               (0x00007F7766AED46F
   [libj9thr26.so+0x846f])
   4XENATIVESTACK               (0x00007F7766C5CA29
   [libj9vm26.so+0x64a29])
   4XENATIVESTACK               (0x00007F7766C03856
   [libj9vm26.so+0xb856])
   
   
    
   
   

LOCAL FIX

PROBLEM SUMMARY
 *  ****************************************************************
   * USERS AFFECTED:                                              *
   * Customers using Content Search Services 5.2.1.7-P8CSS-FP007  *
   * and 5.5.0.0-P8CPE and prior and prior or DB2 Text Search     *
   * v10.5 FP8 and prior and encountering high text search server *
   * CPU utilization during concurrent search operations.         *
   ****************************************************************
   * PROBLEM DESCRIPTION:                                         *
   * During concurrent search operations, the text search server  *
   * can exhibit high CPU utilization and become unresponsive to  *
   * the calling client application when no available search text *
   * language parser can be acquired from an internal parser pool *
   * due to a potential synchronization issue.                    *
   ****************************************************************
   * RECOMMENDATION:                                              *
   * Upgrade to 5.2.1.7-P8CSS-IF001, 5.5.1.0-P8CSS, DB2 Text      *
   * Search V10.5 FP9 or later.                                   *
   ****************************************************************
   
   
    
   
   

PROBLEM CONCLUSION
 *  Fixed in 5.2.1.7-P8CSS-IF001, and 5.5.1.0-P8CSS, DB2 Text Search
   V10.5 FP9 and later.
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   PJ44911
   
   
 * REPORTED COMPONENT NAME
   CONTENT SEARCH
   
   
 * REPORTED COMPONENT ID
   5724R8109
   
   
 * REPORTED RELEASE
   521
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt / Xsystem
   
   
 * SUBMITTED DATE
   2017-07-25
   
   
 * CLOSED DATE
   2018-03-15
   
   
 * LAST MODIFIED DATE
   2018-03-15
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   CONTENT SEARCH
   
   
 * FIXED COMPONENT ID
   5724R8109
   
   

APPLICABLE COMPONENT LEVELS