Title: IBM PK70936: If preserveDownloadedArtifacts is enabled, users cannot upgrade to V7.0.0.7 - United States

Text:
 SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  Using Installation Manager V1.1.2, when 'Save files for rollback
   ' or 'com.ibm.cic.common.core.preferences.preserveDownloadedArti
   facts' feature is enabled, users cannot upgrade Rational Applica
   tion Developer(RAD) to V7.0.0.7 due to the following exception '
   Error getting file for installation: zip com.ibm.rad.icons 1.0.0
   .20060919'.
   
   Steps to reproduce:
   1. Upgrade IM to 1.1.2
   2. Launch IM ? File ? Preferences ? Files for Rollback
   3. Uncheck 'Save files for rollback' ? Press Delete Saved Files
   button
   4. Ensure 'Size of saved files' is 0.0 KB
   5. Upgrade RAD 7.0.0.7
   (ibmimc.exe --launcher.ini silent-install.ini -input ?response f
   ile?
   
   Error:
   03:34.73 ERROR [Thread:main] com.ibm.cic.agent.core.Engine.Phase
    perform
     Error getting file for installation: zip com.ibm.rad.icons 1.0
   .0.20060919
       com.ibm.cic.agent.core.CacheManager$CacheManagerException: '
   zip com.ibm.rad.
   icons 1.0.0.20060919' not found in C:\Program Files\IBM\SDP70Sha
   red.
     com.ibm.cic.agent.core.CacheManager$CacheManagerException: 'zi
   p com.ibm.rad.ic
   ons 1.0.0.20060919' not found in C:\Program Files\IBM\SDP70Share
   d.
       at com.ibm.cic.agent.core.CacheManager.getLocationNoExplode(
   CacheManager.jav
   a:990)
       at com.ibm.cic.agent.core.CacheManager.getArtifactLocation(C
   acheManager.java
   :968)
       at com.ibm.cic.agent.core.commonNativeInstallAdapter.ZipInst
   allOperation.ins
   tall(ZipInstallOperation.java:81)
       at com.ibm.cic.agent.core.commonNativeInstallAdapter.ZipInst
   allOperation.per
   form(ZipInstallOperation.java:59)
       ...
   04:14.29 ERROR [Thread:main] com.ibm.cic.agent.internal.core.Dir
   ector install
     Error during 'install' phase:
       Error getting file for installation: zip com.ibm.rad.icons 1
   .0.0.20060919
         com.ibm.cic.agent.core.CacheManager$CacheManagerException:
    'zip com.ibm.ra
   d.icons 1.0.0.20060919' not found in C:\Program Files\IBM\SDP70S
   hared.
     com.ibm.cic.agent.core.CacheManager$CacheManagerException: 'zi
   p com.ibm.rad.ic
   ons 1.0.0.20060919' not found in C:\Program Files\IBM\SDP70Share
   d.
       at com.ibm.cic.agent.core.CacheManager.getLocationNoExplode(
   CacheManager.jav
   a:990)
       at com.ibm.cic.agent.core.CacheManager.getArtifactLocation(C
   acheManager.java
   :968)
       at com.ibm.cic.agent.core.commonNativeInstallAdapter.ZipInst
   allOperation.ins
   tall(ZipInstallOperation.java:81)
       at com.ibm.cic.agent.core.commonNativeInstallAdapter.ZipInst
   allOperation.per
   form(ZipInstallOperation.java:59)
       ...
   Error during 'install' phase:
     Error getting file for installation: zip com.ibm.rad.icons 1.0
   .0.20060919
   04:14.45 ERROR [Thread:main] com.ibm.cic.agent.internal.applicat
   ion.HeadlessAppl
   ication run
     Error during 'install' phase:
       Error getting file for installation: zip com.ibm.rad.icons 1
   .0.0.20060919
         com.ibm.cic.agent.core.CacheManager$CacheManagerException:
    'zip com.ibm.ra
   d.icons 1.0.0.20060919' not found in C:\Program Files\IBM\SDP70S
   hared.
     com.ibm.cic.agent.core.CacheManager$CacheManagerException: 'zi
   p com.ibm.rad.ic
   ons 1.0.0.20060919' not found in C:\Program Files\IBM\SDP70Share
   d.
       at com.ibm.cic.agent.core.CacheManager.getLocationNoExplode(
   CacheManager.jav
   a:990)
       at com.ibm.cic.agent.core.CacheManager.getArtifactLocation(C
   acheManager.java
   :968)
       at com.ibm.cic.agent.core.commonNativeInstallAdapter.ZipInst
   allOperation.ins
   tall(ZipInstallOperation.java:81)
       at com.ibm.cic.agent.core.commonNativeInstallAdapter.ZipInst
   allOperation.per
   form(ZipInstallOperation.java:59)
       ...
   Ibmimc:
   JVM terminated. Exit code=1
   C:\Program Files\IBM\Installation Manager\eclipse\jre_5.0.2.sr5_
   20070511\jre\bin
   \java.exe
   -jar C:\Program Files\IBM\Installation Manager\eclipse\plugins\o
   rg.eclipse.equin
   ox.launcher_1.0.100.v20080303.jar
   -os win32
   -ws win32
   -arch x86
   -launcher C:\Program Files\IBM\Installation Manager\eclipse\ibmi
   mc.exe
   -name Ibmimc
   --launcher.library C:\Program Files\IBM\Installation Manager\ecl
   ipse\plugins\org
   .eclipse.equinox.launcher.win32.win32.x86_1.0.100.v20080201a\ecl
   ipse_1108.dll
   -startup C:\Program Files\IBM\Installation Manager\eclipse\plugi
   ns\org.eclipse.e
   quinox.launcher_1.0.100.v20080303.jar
   -exitdata f20_7c0
   -silent
   -input c:\upgradeAll.xml
   -vm C:\Program Files\IBM\Installation Manager\eclipse\jre_5.0.2.
   sr5_20070511\jre
   \bin\java.exe
   -vmargs
   -jar C:\Program Files\IBM\Installation Manager\eclipse\plugins\o
   rg.eclipse.equin
   ox.launcher_1.0.100.v20080303.jar
   Press any key to continue . . .
   
   
    
   
   

LOCAL FIX

PROBLEM SUMMARY
 *  The fix to another defect added an implicit
   "order.dependencies" property to the
   "com.ibm.rad.shortcut.win32" IU. That is, the following is
   implicitly added to the IU:
   
   ?property name='order.dependencies'
   value='com.ibm.sdp.eclipse.ide/org.eclipse.rcp.feature..org.
   eclipse.executable.win32.win32.x86'/?
   
   This is bad because the "com.ibm.rad.shortcut.win32" IU has
   a zip artifact associated with it. This means anytime the
   "org.eclipse.executable.win32.win32.x86" IU version is
   updated (which it is in 7006 and 7007), the
   "com.ibm.rad.shortcut.win32" IU gets uninstalled and then
   re-installed. The re-install fails since the artifact has
   been deleted by the "delete saved files" via the Preferences
   dialog.
   
   
    
   
   

PROBLEM CONCLUSION
 *  Fix delivered in Installation Manager V1.2
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   PK70936
   
   
 * REPORTED COMPONENT NAME
   RATL APP DEV WI
   
   
 * REPORTED COMPONENT ID
   5724J1901
   
   
 * REPORTED RELEASE
   700
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2008-08-21
   
   
 * CLOSED DATE
   2008-09-26
   
   
 * LAST MODIFIED DATE
   2008-09-26
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   RATL APP DEV WI
   
   
 * FIXED COMPONENT ID
   5724J1901
   
   

APPLICABLE COMPONENT LEVELS
 * R700 PSN
   UP