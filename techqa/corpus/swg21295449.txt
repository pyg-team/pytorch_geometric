Title: IBM Increasing the API timeout value to prevent search server failures - United States

Text:
CCL; CCL timeout; API timeout; FFQO0283; FFQC2002E TECHNOTE (FAQ)

QUESTION
 With OmniFindâ„¢ Enterprise Edition, Version 8.3 Fix Pack 3 or later, the search servers repeatedly fail when you attempt to start the search runtime for a collection. You might be able to solve this problem by setting a new timeout value. 

CAUSE
Check the common communication layer (CCL) log files, such as ccl.log, for errors FFQO0283 or FFQC2002E, which indicate that an API timed out. The problem might be caused by a large delta index that causes the API to time out.

ANSWER
Check the ccl.log file for errors similar to the following messages:


Example 1: 

2/6/08 18:10:55/802 MST [Error] [ES_ERR_CCLSRV_SESSION_API_CALL_TIMEOUT [] [] 

nbxla 139:0:56958807:oss:ESSession.java:com.ibm.es.ccl.sessionclient..
ESSession.sendRequest(1):-3
FFQO0283E The requested [switchDeltaIndex] call for session [col_id.runtime.node.3.4] timed out.
The timeout value is 300,000 milliseconds. Increase the time out value. 

 

Example 2: 

FFQC5303I Controller (node1) (sid: controller) is already running. PID: 31935
Feb 7, 2008 12:30:10 PM com.ibm.es.ccl.sessionclient.ESSession sendRequest
WARNING: during sendRequest to session api controller:startSearch timed out
FFQO0283E The requested [startSearch] call for session [controller] timed out. The timeout value is 600,000 milliseconds. Increase the time out value.
FFQC2002E An error occurred while starting the search server for collection col_id - Message Code: ES_ERR_CCLSRV_SESSION_API_CALL_TIMEOUT. Check controller logs for more detail.
Feb 7, 2008 12:34:19 PM com.ibm.es.ccl.sessionclient.ESSession sendRequest
WARNING: during sendRequest to session api controller:startSearch timed out
FFQO0283E The requested [startSearch] call for session [controller] timed out. The timeout value is 600,000 milliseconds. Increase the time out value.
FFQC2002E An error occurred while starting the search server for collection col_id - Message Code: ES_ERR_CCLSRV_SESSION_API_CALL_TIMEOUT. Check controller logs for more detail.


 

These errors indicate that an API timed out. When the search runtime is started, it might send messages to load the delta and main index. If an index is large, the message can time out, which can prevent the search runtime from starting. 


You can specify a new timeout value in the ES_INSTALL_ROOT/configurations/interfaces/component-name_interface.ini file. For example, to increase the amount of time for a delta index, runtime.switchDeltaIndex(), add an APIid.timeout=new-timeout-value entry in the runtime_interface.ini file. In the following example, the API ID is 3:

API3.name=switchDeltaIndex
API3.requesttype=com.ibm.es.control.communication.common.CtrlMessageNameValuePairs
API3.responsetype=com.ibm.es.control.communication.common.CtrlMessageLong
API3.timeout=600000

The default value for the API timeout is 3 minutes. The value 0 sets the timeout to indefinite.

Note that APIs are sometimes nested. If you set a timeout value for only one of the APIs (such as the most nested), it might cause another API to time out and the nested API pipeline can fail higher up the chain. If you continue to have timeout problems after you change timeout values as shown above, contact IBM Software Support. 

In addition to increasing the API timeout value, you can manage the frequency of the delta index and main index builds so that the builds are more frequent. More frequent builds ensures that the indexes are not as large, which means that the search runtime might not time out.index and main index builds so that the builds are more frequent. More frequent builds ensures that the indexes are not as large, which means that the search runtime might not time out.