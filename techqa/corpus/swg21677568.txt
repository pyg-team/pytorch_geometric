Title: IBM ITCAMfT 7.4 - AMC / T3 - KCIIN0198E Unable to start agent - United States

Text:
71AMCON-PLAN; 71AMCON-INS; 71AMCON-TS; 71INS-AMC; 71INS-FP TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 After upgrading the AMC / T3 agent to ITCAMfT 7.4 the agent fails to start. 

SYMPTOM
Upon completion of the upgrade the following error is displayed:

Processing. Please wait... 

Starting ITCAM Console ...
KCIIN0198E Unable to start agent. Please, check log file.

And.....
The following error is seen in the T3 agent operations log
eg. /opt/IBM/ITM/logs/cam-rh_t3_1403298714.log:

Loading kt2jras
/opt/IBM/ITM/JRE/li6263/lib/i386:/opt/IBM/ITM/tmaitm6/li6263/lib:/opt/IBM/ITM/li6243/gs/lib:/opt/IBM/ITM/JRE/li6263/bin/j9vm:/opt/IBM/ITM/JRE/li6263/bin:/opt/IBM/ITM/lx8263/t3/lib:/opt/IBM/ITM/tmaitm6/lx8263/lib:/usr/lib
kt3agent: symbol lookup error: /opt/IBM/ITM/lx8263/t3/lib/libkt1jni.so: undefined symbol: _Z24IRA_GetCurrentCMSAddressPci


CAUSE
An error in the LD_LIBRARY_PATH means that libraries from the following directory are incorrectly being used: 

[ITM_HOME]/tmaitm6/li6263


ENVIRONMENT
Linux x86_64 R2.6 (64 bit) 


ITCAMfT AMC / T3 upgrade path:
7.3.0.0 > 7.3.0.1 > 7.4.0.0

Please note:
This problem is not seen when performing a fresh ITCAMfT 7.4 installation or upgrading from ITCAMfT 7.3.0.0


DIAGNOSING THE PROBLEM
Check LD_LIBRARY_PATH as follows:

t3.config:
LD_LIBRARY_PATH='/opt/IBM/ITM/li6243/gs/lib:/opt/IBM/ITM/JRE/li6263/bin/j9vm:/opt/IBM/ITM/JRE/li6263/bin:/opt/IBM/ITM/tmaitm6/lx8263/lib:/opt/IBM/ITM/lx8263/t3/lib'

In the t3 ras1 agent log 

eg. /opt/IBM/ITM/logs/cam-rh_t3_53a4a39a-01.log:
(53A4EF25.002C-1:kbbssge.c,52,"BSS1_GetEnv") LD_LIBRARY_PATH="/opt/IBM/ITM/tmaitm6/li6263/lib:/opt/IBM/ITM/li6243/gs/lib:/opt/IBM/ITM/JRE/li6263/bin/j9vm:/opt/IBM/ITM/JRE/li6263/bin:/opt/IBM/ITM/lx8263/t3/lib:/opt/IBM/ITM/tmaitm6/lx8263/lib"

"/opt/IBM/ITM/tmaitm6/li6263/lib" is the first path in the t3 ras1 log LD_LIBRARY_PATH but it isn't seen at all in "t3.config".


RESOLVING THE PROBLEM
The long term solution is to correct the content of LD_LIBRARY_PATH in ITCAMfT 7.4

Whilst waiting for the fix, the workaround is to rename the "li6263" directory:
eg.
[root: /opt/IBM/ITM/tmaitm6]mv li6263 backup_li6263



PRODUCT ALIAS/SYNONYM
 ITCAMfT
TCAMfT
CAMfT