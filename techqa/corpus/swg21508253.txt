Title: IBM DataStage job monitor fails with out of memory error in the javacore file - United States

Text:
 TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 DataStage job monitor (jobmon process) might fail with an out of memory error if the process has been up and running for long time.


SYMPTOM
If DataStage job log contains following warnings: 

 *   * Warning main_program: failed to initialize job monitoring. Monitor information will not be generated. 
    * Warning: Failed to connect to JobMonApp on port 13401
   
   
 * 
 * 
 * 
 * 
 * 0SECTION TITLE subcomponent dump routine
 * 
 * NULL ===============================
 * 
 * 1TISIGINFO Dump Event "systhrow" (00040000) Detail
 * 
 * "java/lang/OutOfMemoryError" received
 * 
 * 1TIDATETIME Date: 2011/05/30 at 12:00:00
 * 
 * 
 * ...
 * 
 * 
 * 0SECTION MEMINFO subcomponent dump routine
 * 
 * NULL =================================
 * 
 * 1STHEAPFREE Bytes of Heap Space Free: 0
 * 
 * 1STHEAPALLOC Bytes of Heap Space Allocated: 4000000
 * 
 * 

RESOLVING THE PROBLEM
The max heap size for jobmon process has to be increased to resolve the out of the memory error. The file that needs to be modified is: jobmoninit file in $PXEngine/java directory. The recommended change is to set the max heap size to 512 MB, by adding this java argument: -Xmx512m. The change in jobmoninit file is highlighted here in bold font: 


if [ "$systype" = Windows_NT ] ; then
$jrehome/bin/java -Xrs -classpath $CLASSPATH JobMonApp $jobmon_port1 $jobmon_port2 > $logfile 2>&1 &
else
nohup $jrehome/bin/java -Xmx512m-classpath $CLASSPATH JobMonApp $jobmon_port1 $jobmon_port2 > $logfile 2>&1 &