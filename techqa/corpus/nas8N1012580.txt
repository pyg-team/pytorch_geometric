Title: IBM IFS Time Attributes Difference After Restore Operation - United States

Text:
 TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 This document explains the reason why IFS time attributes can be different when restoring to a system with R540 and a system with R610. 

RESOLVING THE PROBLEM
This document explains the reason why IFS time attributes can be different when restoring to a system with R540 and a system with R610. 

Restoring an IFS object to a system with R540 and a system with R610 time attribute can be different. For example, restoring object at R540 attributes were set as follows:

Creation date/time . . . . . . . . . . : 12/06/09 15:19:19
Last access date/time . . . . . . . . : 12/04/09 09:54:17
Data change date/time . . . . . . . . : 10/09/09 08:12:20
Attribute change date/time . . . . . . : 12/14/09 09:01:43

Restoring the same object at R610 attributes were set as follows:

Creation date/time . . . . . . . . . . : 12/06/09 15:19:19
Last access date/time . . . . . . . . : 12/04/09 09:54:17
Data change date/time . . . . . . . . : 10/09/09 09:12:20
Attribute change date/time . . . . . . : 12/14/09 09:02:04

As indicated above, the data change date/time has a 1-hour difference between the two systems.

The R540 date is incorrect and the R610 date is correct. R540 has a limitation in which Daylight Savings Time information cannot be calculated and thus it sometimes shows dates as one hour different than they should be. This limitation was removed in R610, and the correct dates are shown.

In R540 and earlier releases, the system applies the current QUTCOFFSET to the given time value which was passed in and does not do any additional Daylight Savings Time adjustment to the time.

In R610, job time zone support was added so restore process can now query the job and get the necessary information to compute whether Daylight Savings Time was in effect for any given time. It adjusts for QUTCOFFSET and also adjusts for Daylight Savings Time if the given time was in Daylight Savings Time, based on the current job time zone.

For the above example, time value was UTC time of Fri Oct 9 14:12:20 2009. For the Central Time zone (our example), Daylight Savings Time (DST) was in effect at that time so the correct time would be 5 hours prior to that time, which is Fri Oct 9 09:12:20 2009. This is the time shown on R610 and is the correct value. On R540, the code does not know that the time occurred within DST and therefore the value is not adjusted for DST and shows as Fri Oct 9 08:12:20 2009.

All times which have a different DST value than the current time will show up as different between R540 and R610. For example, when DST is not in effect, every time on a R540 partition for which DST is in effect would have a difference by exactly one hour when viewed on a R610 partition. Every time on a R540 partition for which DST is not in effect would match the time shown on a R540 partition. Once DST comes into effect again, then every time on a R540 partition for which DST is in effect would match when viewed on a R610 partition; however, every time on a R540 partition for which DST is not in effect would not match the time shown on a R610 partition.

If both the R540 partition and the R610 partition could be set to Q0000UTC *TIMZON or Q000GMT *TIMZON, the times will show up to be the same because time change is due to DST and time zones,




Cross reference information Segment Product Component Platform Version Edition Operating System IBM i 7.2 Operating System IBM i 7.1 Operating System IBM i 6.1 
HISTORICAL NUMBER
 546253239