Title: IBM HD67667: UNIX HP 11 LINKER PROBLEM. A CAA PROGRAMM USES SYMBOLS OF AN O THER CAA PROGRAMM. - United States

Text:
AIX SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PERMANENT RESTRICTION.
    
   
   

ERROR DESCRIPTION
 *  UNIX HP 11  Linker Problem. A CAA programm
   uses symbols of an other CAA programm.
   ***********************************
   First you have to unpack the attached tar file:
   You will get a directory -HpSymbole- with 4 CAA-
   Workspaces:
   1. TCATest1Wks -> depends on TCATools1Wks ->
   only one class with only one method
   2. TCATest2Wks -> depends on TCATools2Wks ->
   only one class with only one method
   3. TCATools1Wks
   4. TCATools2Wks
   .
   Please compile and link TCATools1Wks. You will get
   the shared library: libTCATrace1.sl.
   Then compile and link TCATest1Wks. This
   workspace depends on TCATools1Wks.
   Now launch CATIA. You will get a new toolbar in a
   CATPart document. Launch TCATest1 and notice
   the output in shell:
   Start command
   In Constructor of TCATest1Command
   In TCATest1Command::Build()
   In TCATest1Func1::Build1()
   I am in TCATrace1 shared lib <- this is the
   important line, but for this case everthing is ok!!!
   .
   If you do the same with TCATools2Wks and
   TCATest2Wks you will get the message:
   Start command
   In Constructor of TCATest2Command
   In TCATest2Command::Build()
   In TCATest2Func2::Build1()
   I am in TCATrace2 shared lib <- this is the
   important line, but for this case everthing is ok!!!
   .
   Now create one environment to get both toolsbars
   at the same time.
   If you select TCATest1 you will get the message:
   Start command
   In Constructor of TCATest1Command
   In TCATest1Command::Build()
   In TCATest1Func1::Build1()
   I am in TCATrace1 shared lib
   .
   Then select TCATest2 and you will get the wrong
   message:
   Start command
   In Constructor of TCATest2Command
   In TCATest2Command::Build()
   In TCATest2Func2::Build1()
   I am in TCATrace1 shared lib <- this is wrong, it is
   the method of the library: libTCATrace1.sl !!!!!!!!
   .
   
   
    
   
   

LOCAL FIX

PROBLEM SUMMARY
 *  UNIX HP 11  Linker Problem. A CAA programm uses symbols of an o
   ther CAA programm.
   UNIX HP 11  Linker Problem. A CAA programm
   uses symbols of an other CAA programm.
   ***********************************
   First you have to unpack the attached tar file:
   You will get a directory -HpSymbole- with 4 CAA-
   Workspaces:
   1. TCATest1Wks -> depends on TCATools1Wks ->
   only one class with only one method
   2. TCATest2Wks -> depends on TCATools2Wks ->
   only one class with only one method
   3. TCATools1Wks
   4. TCATools2Wks
   .
   Please compile and link TCATools1Wks. You will get
   the shared library: libTCATrace1.sl.
   Then compile and link TCATest1Wks. This
   workspace depends on TCATools1Wks.
   Now launch CATIA. You will get a new toolbar in a
   CATPart document. Launch TCATest1 and notice
   the output in shell:
   Start command
   In Constructor of TCATest1Command
   In TCATest1Command::Build()
   In TCATest1Func1::Build1()
   I am in TCATrace1 shared lib <- this is the
   important line, but for this case everthing is ok!!!
   .
   If you do the same with TCATools2Wks and
   TCATest2Wks you will get the message:
   Start command
   In Constructor of TCATest2Command
   In TCATest2Command::Build()
   In TCATest2Func2::Build1()
   I am in TCATrace2 shared lib <- this is the
   important line, but for this case everthing is ok!!!
   .
   Now create one environment to get both toolsbars
   at the same time.
   If you select TCATest1 you will get the message:
   Start command
   In Constructor of TCATest1Command
   In TCATest1Command::Build()
   In TCATest1Func1::Build1()
   I am in TCATrace1 shared lib
   .
   Then select TCATest2 and you will get the wrong
   message:
   Start command
   In Constructor of TCATest2Command
   In TCATest2Command::Build()
   In TCATest2Func2::Build1()
   I am in TCATrace1 shared lib <- this is wrong, it is
   the method of the library: libTCATrace1.sl !!!!!!!!
   .
   
   
    
   
   

PROBLEM CONCLUSION
 *  THIS PROBLEM IS PERMANENT RESTRICTION IN
   CATIA.
   Analysis:
   In TcTools1Ws and TcTools2Ws the same class is
   define: TcTrace::print. As TcTools1Ws and
   TcTools2Ws generate 2 different librairies
   containing the same symbol for TcTrace::print. The
   loader of HPUX is unable to differentiate the two
   symboles. The resolution of the symbol is not
   predictable
   This is a normal behaviour. For every OS, there is
   no way to predict how the loader resolve duplicate
   symboles.
   ByPass:
   Change the name of the symbol. The better way is
   to change the name of the class TcTrace by
   TcTrace1 in TcTools1Ws for example.
   .
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   HD67667
   
   
 * REPORTED COMPONENT NAME
   CATIA V5 NT>XP
   
   
 * REPORTED COMPONENT ID
   569151000
   
   
 * REPORTED RELEASE
   516
   
   
 * STATUS
   CLOSED PRS
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2007-09-25
   
   
 * CLOSED DATE
   2007-10-05
   
   
 * LAST MODIFIED DATE
   2007-10-05
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION

APPLICABLE COMPONENT LEVELS