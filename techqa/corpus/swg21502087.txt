Title: IBM Web service listener 404 exception. - United States

Text:
404; Webservice; application.xml TECHNOTE (TROUBLESHOOTING)

THIS DOCUMENT APPLIES ONLY TO THE FOLLOWING LANGUAGE VERSION(S):
 English 

PROBLEM(ABSTRACT)
 Cluster Web Service returns Not Found. 

SYMPTOM
Accessing Netcool/Impact web service listener is returning a "404" exception and causing the interface application to fail to contact the Impact Web Service. This issue is seen after applying Netcool/Impact 5.1 IF0004 

2010-12-14 17:12:13,852 ERROR [Thread-14629] 

NetcoolAlarmForwarderServiceImpl 
Exception caught is
RemoteException 
AxisFault 
faultCode: {http://xml.apache.org/axis/ [http://xml.apache.org/axis/]}HTTP
faultSubcode: 
faultString: (404)Not Found 
faultActor: 
faultNode:
faultDetail:
{}:return code: 404
&lt;H1&gt;SRVE0255E: A WebGroup/Virtual Host to handle
/jaxrpc/impact/ImpactWebServiceListenerDLIfc has not been defined.&lt;
/H1&gt;&lt;BR&gt;&lt;H3&gt;SRVE0255E: A WebGroup/Virtual Host to handle <Server_hostname>:9080 has not been defined.&lt;/H3&gt;
&lt;BR&gt;&lt;I&gt;IBM WebSphere Application Server&lt;/I&gt; 
{http://xml.apache.org/axis/ [http://xml.apache.org/axis/]}HttpErrorCode:404
(404)Not Found
------------------------------------------



CAUSE
In a cluster environment, when using a load balancer, you would have your application.xml file configured for single URL. By applying Netcool/Impact 5.1 interim fix, it will change your application.xml back to the default.



ENVIRONMENT
Netcool/Impact 5.1 IF2 Clustering



DIAGNOSING THE PROBLEM
To find our all your application.xml file run the following command in the $NCHOME directory:

$ find . -exec grep -l 'application.xml' {} \;


Example returns from the above;
./eWAS/profiles/ImpactProfile/installedApps/ImpactCell/NCI.ear/META-INF/application.xml

./eWAS/profiles/ImpactProfile/config/cells/ImpactCell/applications/guiserver.ear/deployments/guiserver/META-INF/application.xml

./eWAS/profiles/ImpactProfile/config/cells/ImpactCell/applications/NCI.ear/deployments/NCI/META-INF/application.xml

./impact/install/build/ear/application.xml

./guiserver/install/stage/META-INF/application.xml


RESOLVING THE PROBLEM
The original application.xml will have been changed in order to support Single URL configuration. Once the Fix Pack has been installed, you must reinstate those changes in the new copy of the application.xml file. 


Example of default application xml is as follows:

<?xml version="1.0" encoding="UTF-8"?>
<application xmlns="http://java.sun.com/xml/ns/j2ee [http://java.sun.com/xml/ns/j2ee]" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance [http://www.w3.org/2001/XMLSchema-instance]" xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee [http://java.sun.com/xml/ns/j2ee]http://java.sun.com/xml/ns/j2ee/application_1_4.xsd [http://java.sun.com/xml/ns/j2ee/application_1_4.xsd]" version="1.4" id="Application_ID">
<display-name>NCI1</display-name>
<module>
<web>
<web-uri>db.war</web-uri>
<context-root>/NCICLUSTER_NCI1_db</context-root>
</web>
</module>
<module>
<web>
<web-uri>documenter.war</web-uri>
<context-root>/NCICLUSTER_NCI1_documenter</context-root>
</web>
</module>
<module>
<web>
<web-uri>jaxrpc.war</web-uri>
<context-root>/NCICLUSTER_NCI1_jaxrpc</context-root>
</web>
</module>
<module>
<ejb>startup-ejb.jar</ejb>
</module>
</application>


Sample example of the Single URL configuration application.xml:

<?xml version="1.0" encoding="UTF-8"?>
<application xmlns="http://java.sun.com/xml/ns/j2ee [http://java.sun.com/xml/ns/j2ee]" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance [http://www.w3.org/2001/XMLSchema-instance]" xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee [http://java.sun.com/xml/ns/j2ee]http://java.sun.com/xml/ns/j2ee/application_1_4.xsd [http://java.sun.com/xml/ns/j2ee/application_1_4.xsd]" version="1.4" id="Application_ID">
<display-name>NCI1</display-name>
<module>
<web>
<web-uri>db.war</web-uri>
<context-root>/db</context-root>
</web>
</module>
<module>
<web>
<web-uri>documenter.war</web-uri>
<context-root>/documenter</context-root>
</web>
</module>
<module>
<web>
<web-uri>jaxrpc.war</web-uri>
<context-root>/jaxrpc</context-root>
</web>
</module>
<module>
<ejb>startup-ejb.jar</ejb>
</module>
</application>

Mainly to remove the <clustername>_<servername> from the end point. 

Finally check $NCHOME/guiserver/etc/server.props and see if there is a property: server.uri.buildPrefix=false

and

check $NCHOME/impact/etc/<instance>_server.props 
impact.server.uri.buildPrefix=false

The 404 error means the link has not been found.