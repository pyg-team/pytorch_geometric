Title: IBM JR54520: Addresses preprocess issues when using the multithread and local ENAME PARAMETERS - United States

Text:
  A FIX IS AVAILABLE
JR57861 - Mandatory cumulative Interim Fix 5 for WebSphere Commerce Version 7 Feature Pack 8 [http://www-01.ibm.com/support/docview.wss?uid=swg24043760]


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  This APAR addresses errors encountered during preprocess when
   using multithreaded preprocess, and localename parameters. This
   also addresses issues with a large amount of languages.
   
   Errors encountered:
   
   DB2 package caused by multithreading and a large amount of
   languages:
   
   Oct 14, 2015 12:25:58 PM
   com.ibm.commerce.foundation.dataimport.preprocess.DataImportPreP
   rocessorMain handleExecutionException
   SEVERE: Exception message: CWFDIH0001: Data Import encountered a
    generic error. The error is CWFDIH0002: An SQL exception was
   caught. The following error occurred: DB2 SQL Error:
   SQLCODE=-805, SQLSTATE=51002, SQLERRMC=NULLID.SYSLH203
   0X5359534C564C3031, DRIVER=4.19.26.
   . , stack trace:
   com.ibm.commerce.foundation.dataimport.exception.DataImportAppli
   cationException: CWFDIH0001: Data Import encountered a generic
   error. The error is CWFDIH0002: An SQL exception was caught. The
    following error occurred: DB2 SQL Error: SQLCODE=-805,
   SQLSTATE=51002, SQLERRMC=NULLID.SYSLH203 0X5359534C564C3031,
   DRIVER=4.19.26.
   .
    at
   com.ibm.commerce.foundation.dataimport.preprocess.DataImportPreP
   rocessorMain.execute(DataImportPreProcessorMain.java:957)
    at
   com.ibm.commerce.foundation.dataimport.preprocess.DataImportPreP
   rocessorMain.main(DataImportPreProcessorMain.java:372)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at
   sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessor
   Impl.java:60)
    at
   sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethod
   AccessorImpl.java:37)
    at java.lang.reflect.Method.invoke(Method.java:611)
    at com.ibm.ws.bootstrap.WSLauncher.main(WSLauncher.java:267)
   
   
   DB2 connection closed error caused by multithreading and
   localename parameters:
   
   0 Oct 8, 2015 10:27:05 AM
   com.ibm.commerce.foundation.dataimport.preprocess.config.util.La
   nguageHelper getSupportedLanguageIds(Long)
   FINER: ENTRY 12,301
   0 Oct 8, 2015 10:27:05 AM
   com.ibm.commerce.foundation.dataimport.preprocess.DataImportPreP
   rocessorMain deleteFromDeltaTable(DataProcessingConfig, boolean)
   INFO: [jcc][t4][10335][10366][4.14.137] Invalid operation:
   Connection is closed. ERRORCODE=-4470, SQLSTATE=08003
   0 Oct 8, 2015 10:27:05 AM
   com.ibm.commerce.foundation.dataimport.preprocess.DataImportPreP
   rocessorMain execute(String, List<DataImportPreProcessConfig>,
   boolean)
   FINE:  met problem when delete delta table content
   Throwable occurred:
   com.ibm.commerce.foundation.dataimport.exception.DataImportSyste
   mException: CWFDIH0002: An SQL exception was caught. The
   following error occurred: [jcc][t4][10335][10366][4.14.137]
   Invalid operation: Connection is closed. ERRORCODE=-4470,
   SQLSTATE=08003.
    at
   com.ibm.commerce.foundation.dataimport.preprocess.DataImportPreP
   rocessorMain.deleteFromDeltaTable(DataImportPreProcessorMain.jav
   a:1582)
    at
   com.ibm.commerce.foundation.dataimport.preprocess.DataImportPreP
   rocessorMain.execute(DataImportPreProcessorMain.java:803)
    at
   com.ibm.commerce.foundation.dataimport.preprocess.DataImportPreP
   rocessorMain.main(DataImportPreProcessorMain.java:372)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at
   sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessor
   Impl.java:60)
    at
   sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethod
   AccessorImpl.java:37)
    at java.lang.reflect.Method.invoke(Method.java:611)
    at com.ibm.ws.bootstrap.WSLauncher.main(WSLauncher.java:267)
   Caused by:
   com.ibm.db2.jcc.am.SqlNonTransientConnectionException:
   [jcc][t4][10335][10366][4.14.137] Invalid operation: Connection
   is closed. ERRORCODE=-4470, SQLSTATE=08003
    at com.ibm.db2.jcc.am.ed.a(ed.java:667)
    at com.ibm.db2.jcc.am.ed.a(ed.java:60)
    at com.ibm.db2.jcc.am.ed.a(ed.java:120)
    at
   com.ibm.db2.jcc.am.Connection.checkForClosedConnection(Connectio
   n.java:5579)
    at
   com.ibm.db2.jcc.am.Connection.nativeSQLX(Connection.java:1049)
    at com.ibm.db2.jcc.am.Connection.escape(Connection.java:8296)
    at
   com.ibm.db2.jcc.am.Connection.prepareStatementX(Connection.java:
   2283)
    at
   com.ibm.db2.jcc.am.Connection.prepareStatement(Connection.java:8
   98)
    at
   com.ibm.commerce.foundation.dataimport.preprocess.config.util.La
   nguageHelper.getSupportedLanguageIds(LanguageHelper.java:112)
    at
   com.ibm.commerce.foundation.dataimport.preprocess.DataImportPreP
   rocessorMain.deleteFromDeltaTable(DataImportPreProcessorMain.jav
   a:1564)
    ... 7 more
   
   
    
   
   

LOCAL FIX
 *  using single thread
   
   
    
   
   

PROBLEM SUMMARY
 *  USERS AFFECTED:
   wc.70fep7.apar
   
   PROBLEM ABSTRACT:
   Addresses preprocess issues when using the multithread and
   localename parameters
   
   BUSINESS IMPACT:
   will not be able to use multithread option
   
   RECOMMENDATION:
   
   
    
   
   

PROBLEM CONCLUSION
 *  fix the connection close issue and prepared statement not close
   issue
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   JR54520
   
   
 * REPORTED COMPONENT NAME
   WC BUS EDITION
   
   
 * REPORTED COMPONENT ID
   5724I3800
   
   
 * REPORTED RELEASE
   700
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2015-10-14
   
   
 * CLOSED DATE
   2015-11-16
   
   
 * LAST MODIFIED DATE
   2015-12-14
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   WC BUS EDITION
   
   
 * FIXED COMPONENT ID
   5724I3800
   
   

APPLICABLE COMPONENT LEVELS
 * R700 PSY
   UP