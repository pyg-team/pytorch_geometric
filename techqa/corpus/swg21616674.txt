Title: IBM Log size and usage for the Tivoli Storage Manager Server v6 - United States

Text:
LOGFILSIZ LOGPRIMARY LOGSECOND reuse TECHNOTE (FAQ)

QUESTION
 Why does the log directory that is used by the Tivoli Storage Manager Server remain at a steady amount of usage? Shouldn't the number of uncommitted transactions fluctuate and affect how many logs exist? 

CAUSE
The DB2 Primary logs are created at startup and reused by DB2.


ANSWER
The amount of log space utilized by DB2 is determined by the settings in the DB2 configuration. For example, the following settings may be seen in the output from the 'db2 get db config' command: 

 * 
 * 
 * 
 * 
 * 
 * 



In this example, when DB2 starts it would create 8 Primary log files at a size of .5 GB each (131072 x 4KB page size). They are initially created so that the overhead on creating these logs at a later time is offset. 
The number of secondary logs (LOGSECOND) indicates the total number of additional logs that DB2 is allowed to create up to a maximum of 256 logs for both the Primary and Secondary combined. As shown in this example, the LOGSECOND value is set to "0", which prohibits DB2 from creating any additional logs. If there is a case where a transaction that was long running such that all 8 DB2 Primary log files became full due to an uncommitted transaction, then an out of log space error would be witnessed. 


After all the transactions in a log are committed, then the Tivoli Storage Manager Server DB2 interface will copy the log to the archive log directory. At that point, the original Primary log is available for reuse by DB2, it is not removed. It is more efficient for DB2 to rename/reuse the log than to create a new one. Thus, the 8 Primary logs would consistently exist in the log directory.

 

PRODUCT ALIAS/SYNONYM
 TSM