Title: IBM Unable to deploy an IBM Case Manager 5.2.1 Solution due to error property CmAcmSavedDefinitions exceeds the maximum permitted length (5,242,880) - United States

Text:
workflow; deploy; solution TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 After making workflow definition changes in IBM FileNet Process Designer, the IBM Case Manager Solution cannot be deployed due to the error:
[The value given for a property or list element lies outside the permitted range or value set, or exceeds the maximum length allowed. The length of the value (#,###,###) specified for property CmAcmSavedDefinitions exceeds the maximum permitted length (5,242,880).] 

SYMPTOM
Example of the error stack:
[7/18/16 13:33:39:644 EDT] 00000095 SystemErr R Jul 18, 2016 1:33:39 PM com.ibm.ws.webcontainer.srt.SRTServletResponse setStatus
WARNING: WARNING: Cannot set status. Response already committed.
[7/18/16 13:34:48:941 EDT] 00000099 SystemErr R com.ibm.acm.
icmbuilder.exception.AcmException: B8003E.ADD_DRAFT_ELEM_ERROR [The value given for a property or list element lies outside the permitted range or value set, or exceeds the maximum length allowed. The length of the value (5,248,903) specified for property CmAcmSavedDefinitions exceeds the maximum permitted length (5,242,880).]||B8003E.
ADD_DRAFT_ELEM_ERROR [The value given for a property or list element lies outside the permitted range or value set, or exceeds the maximum length allowed. The length of the value (5,248,903) specified for property CmAcmSavedDefinitions exceeds the maximum permitted length (5,242,880).]||B8003E.ADD_DRAFT_ELEM_ERROR [The value given for a property or list element lies outside the permitted range or value set, or exceeds the maximum length allowed. The length of the value (5,248,903) specified for property CmAcmSavedDefinitions exceeds the maximum permitted length (5,242,880).]


CAUSE
This limit is set to avoid performance issues in ACCE when trying to display content. It is rare that the default 5MB is too small during Solution development.

ENVIRONMENT
This error is generated when deploying Solution modification in IBM Case Manager Builder after making a large amount of workflow definition changes in Process Designer, which result in the 5MB limit being exceeded.

DIAGNOSING THE PROBLEM
The Solution deployment fails and the server logs record the error stack provided above.

RESOLVING THE PROBLEM
The issue can and should be avoided by using the “Commit” button on the solution in IBM Case Manager Builder to keep the size of the “Saved Definitions” (“CmAcmSavedDefinitions”) property on the “DraftArea” (“CmAcmDraftArea”) custom object (much) lower than the hardcoded limit of 5MB. 

This in no way imposes any limit on the overall size of the WFs used with IBM Case Manager. It only limits the size of the pending changes stored in the “Saved Definitions” (“CmAcmSavedDefinitions”) property on the “DraftArea” (“CmAcmDraftArea”) custom object prior to the user hitting “Commit”.





However, if using the "Commit" button becomes overly cumbersome, the property value may be increased from the default 5MB to 10MB manually. Do not increase the value to anything other than what is shown in these instructions. 

 

To increase this manually, do the following:

[/support/docview.wss?uid=swg21988219&aid=1] [/support/docview.wss?uid=swg21988219&aid=1]


 1. Open the Design Object Store from ACCE. 
 2. Navigate to 'Data Design > Classes > Custom Object > Draft Area' 
 3. Click on the properties tab for the 'Draft Area' custom object 
 4. In the Property Definitions row, click on the drop down on the 'Property Value'. This will show all of the property definitions for Draft Area. 
 5. Inside the drop down, click on 'Saved Definitions', as seen in the screen shot, above, "31) Saved Definitions". 
 6. With Saved Definitions open, scroll down to the property 'Maximum Length String'.

[/support/docview.wss?uid=swg21988219&aid=2] [/support/docview.wss?uid=swg21988219&aid=2] 


Next, change the default value of 5,242,880 to 10,485,760. This will increase the size from 5MB to 10MB. 

[/support/docview.wss?uid=swg21988219&aid=3] [/support/docview.wss?uid=swg21988219&aid=3] 

Then save the change 
You will notice that there is no Save button on the "Saved Definition" tab. To save the change, click the "Draft Area" tab and click the "Save" button there: 
[/support/docview.wss?uid=swg21988219&amp;aid=4] 

You will see the little asterisks on both the Draft Area and Saved Definitions tabs disappear once the save is completed. 


Normally, you should not have to recycle the Application Server after making changes in ACCE, the change should take affect immediately after being saved. 


NOTE: the default value may be changed to 10MB in an upcoming IBM Case Manager 5.2.1 Fix Pack.