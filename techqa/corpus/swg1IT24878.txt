Title: IBM IT24878: If a shared memory set is unavailable then the queue manager canenter an infinite loop - United States

Text:
 SUBSCRIBE TO THIS APAR
By subscribing, you receive periodic emails alerting you to the status of the APAR, along with a link to the fix after it becomes available. You can track this item individually or track all items by product.

Notify me when this APAR changes.

Notify me when an APAR for this component changes.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  If a shared memory set is unavailable then the queue manager may
   enter an
   infinite loop when using CHLAUTH administration commands.  If
   this
   problem occurs then the IBM MQ amqzlaa0 process
   will be seen to use a large amount of CPU.
   
   Extract from a failure data capture (FDC) record that was
   generated as a result of the issue:
   
   WebSphere MQ First Failure Symptom Report
   =========================================
   Probe Id          :- XY388255
   Component         :- xcsConnectSharedMemSet
   Probe Description :- AMQ6109: An internal WebSphere MQ error has
   occurred.
   ----------------------------------------------------
   MQM Function Stack
   zlaMainThread
   zlaProcessMessage
   zlaProcessSPIRequest
   zlaSPIKernel
   zsqSPIKernel
   kpiGeneric
   kqiSetChlAuthMap
   rsxAccessCache
   xcsConnectSharedMemSet
   xcsFFST
   
   
    
   
   

LOCAL FIX
 *  Restarting the queue manager will work around the problem.  It
   may be necessary to end the queue manager with the -p
   (pre-emptive) option.
   
   
    
   
   

PROBLEM SUMMARY
 *  ****************************************************************
   USERS AFFECTED:
   Users who remove IBM MQ shared memory resources may be affected
   by this issue.
   
   
   Platforms affected:
   MultiPlatform
   
   ****************************************************************
   PROBLEM DESCRIPTION:
   If a shared memory segment belonging to IBM MQ was removed when
   MQ is running then the amqzlaa0 process may have entered an
   infinite loop as it attempts to access this segment.
   
   
    
   
   

PROBLEM CONCLUSION
 *  The IBM MQ code was modified so that it does not continually
   attempt to access the shared memory resource if it does not
   exist.  Instead, an FDC record with probe RM951010 is generated
   and the following error will be seen when using CHLAUTH
   administration commands:
   
   SET CHLAUTH('*') TYPE(BLOCKADDR) ADDRLIST('xxx.xxx.xxx.xxx')
        1 : SET CHLAUTH('*') TYPE(BLOCKADDR)
   ADDRLIST('xxx.xxx.xxx.xxx')
   AMQ9774: Error accessing the Channel authentication table
   
   The queue manager should be restarted as soon as possible.  It
   is advisable to check whether the ipcrm (or host OS equivalent)
   command had recently been run by an administrator or a script,
   as MQ IPC resources should not be removed while the queue
   manager is running.
   
   ---------------------------------------------------------------
   The fix is targeted for delivery in the following PTFs:
   
   Version    Maintenance Level
   v7.5       7.5.0.9
   v8.0       8.0.0.11
   v9.0 LTS   9.0.0.6
   v9.1 CD    9.1.1
   v9.1 LTS   9.1.0.1
   
   The latest available maintenance can be obtained from
   'WebSphere MQ Recommended Fixes'
   http://www-1.ibm.com/support/docview.wss?rs=171&uid=swg27006037 [http://www-1.ibm.com/support/docview.wss?rs=171&uid=swg27006037]
   
   If the maintenance level is not yet available information on
   its planned availability can be found in 'WebSphere MQ
   Planned Maintenance Release Dates'
   http://www-1.ibm.com/support/docview.wss?rs=171&uid=swg27006309 [http://www-1.ibm.com/support/docview.wss?rs=171&uid=swg27006309]
   ---------------------------------------------------------------
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   IT24878
   
   
 * REPORTED COMPONENT NAME
   WEBSPHERE MQ 7.
   
   
 * REPORTED COMPONENT ID
   5724H7240
   
   
 * REPORTED RELEASE
   750
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   YesHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt / Xsystem
   
   
 * SUBMITTED DATE
   2018-04-26
   
   
 * CLOSED DATE
   2018-07-05
   
   
 * LAST MODIFIED DATE
   2018-07-12
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   WEBSPHERE MQ 7.
   
   
 * FIXED COMPONENT ID
   5724H7240
   
   

APPLICABLE COMPONENT LEVELS