Title: IBM PI57013: APPLYCF COMMAND MAY FAIL ON CLUSTERED ENVIRONMENTS WITHIN TARGET WCM-RUN-EJB-TASK - United States

Text:
  DIRECT LINK TO FIX
8.5.0.0-WCM-IFPI57013-CF09 [http://www.ibm.com/support/fixcentral/quickorder?product=ibm%2FLotus%2FWorkplace+Web+Content+Management&fixids=8.5.0.0-WCM-IFPI57013-CF09&source=SAR]



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  IBM WebSphere Portal and IBM Web Content Manager V8.5.0.0 CF08
   and CF09 applyCF command may fail when executed on clustered
   environments. This issue may also occur on CF05, CF06 and CF07
   when the equivalent APPLY-FIX ConfigEngine task is being
   executed in order to complete the CF installation.
   
   The following error can be seen in the ConfigTrace.log file when
   the applyCF command or APPLY-FIX task fails:
   Target started: wcm-run-ejb-task:
   ....
   [java] java.rmi.NoSuchObjectException: CORBA OBJECT_NOT_EXIST
   0x0 No; nested exception is:
   [java] org.omg.CORBA.OBJECT_NOT_EXIST:
   ....
   [java] >> org.omg.CORBA.OBJECT_NOT_EXIST:
   java.rmi.NoSuchObjectException:
   Stateful bean BeanId(wcm-remote-admin-ejb#wcm-remote-admin-ejb
   .jar#MigrationService, .... was removed or timed out.
   
   or
   
   Target started: wcm-run-ejb-task:
   ....
   [java] java.rmi.MarshalException: CORBA MARSHAL 0x4942f89a No;
   nested exception is:
   [java] org.omg.CORBA.MARSHAL: Unable to read value from
   underlying bridge : Mismatched serialization UIDs : Source
   (RepId RMI:com.ibm.workplace.wcm.app.migration.ejb
   .MigrationResult .... whereas Target (RepId
   RMI:com.ibm.workplace.wcm.app.migration.ejb.MigrationResult ....
   [java] Caused by: org.omg.CORBA.MARSHAL: Unable to read value
   from underlying bridge : Mismatched serialization UIDs : Source
   (RepId RMI:com.ibm.workplace.wcm.app.migration.ejb
   .MigrationResult ...
   [java] Caused by: org.omg.CORBA.MARSHAL: Unable to read value
   from underlying bridge : Mismatched serialization UIDs ...
   [java] Caused by: java.io.IOException: Mismatched serialization
   UIDs : Source (RepId RMI:com.ibm.workplace.wcm.app.migration.ejb
   .MigrationResult ....
   
   
    
   
   

LOCAL FIX
 *  Stop WebSphere Portal on all remaining cluster node members and
   then attempt to re-run the applyCF command again on the failing
   node.
   
   
    
   
   

PROBLEM SUMMARY
 *  IBM WebSphere Portal and IBM Web Content Manager V8.5.0.0 CF08
   and CF09 applyCF command may fail when executed on clustered
   environments. This issue may also occur on CF05, CF06 and CF07
   when the equivalent APPLY-FIX ConfigEngine task is being
   executed in order to complete the CF installation.
   
   The following error can be seen in the ConfigTrace.log file when
   the applyCF command or APPLY-FIX task fails:
   Target started: wcm-run-ejb-task:
   ....
   [java] java.rmi.NoSuchObjectException: CORBA OBJECT_NOT_EXIST
   0x0 No; nested exception is:
   [java] org.omg.CORBA.OBJECT_NOT_EXIST:
   ....
   [java] >> org.omg.CORBA.OBJECT_NOT_EXIST:
   java.rmi.NoSuchObjectException:
   Stateful bean BeanId(wcm-remote-admin-ejb#wcm-remote-admin-ejb
   .jar#MigrationService, .... was removed or timed out.
   
   or
   
   Target started: wcm-run-ejb-task:
   ....
   [java] java.rmi.MarshalException: CORBA MARSHAL 0x4942f89a No;
   nested exception is:
   [java] org.omg.CORBA.MARSHAL: Unable to read value from
   underlying bridge : Mismatched serialization UIDs : Source
   (RepId RMI:com.ibm.workplace.wcm.app.migration.ejb
   .MigrationResult .... whereas Target (RepId
   RMI:com.ibm.workplace.wcm.app.migration.ejb.MigrationResult ....
   [java] Caused by: org.omg.CORBA.MARSHAL: Unable to read value
   from underlying bridge : Mismatched serialization UIDs : Source
   (RepId RMI:com.ibm.workplace.wcm.app.migration.ejb
   .MigrationResult ...
   [java] Caused by: org.omg.CORBA.MARSHAL: Unable to read value
   from underlying bridge : Mismatched serialization UIDs ...
   [java] Caused by: java.io.IOException: Mismatched serialization
   UIDs : Source (RepId RMI:com.ibm.workplace.wcm.app.migration.ejb
   .MigrationResult ....
   
   
    
   
   

PROBLEM CONCLUSION
 *  If the current node of the cluster that is being updated does
   not hold the lease to WPSTaskScheduler (wps/Scheduler), then all
   remote EBJ tasks from WCM when issued will get executed on a
   different node member.
   
   And if the none member where the WCM EJB tasks is being executed
   on is at different CF level, then the wcm-run-ejb-task will fail
   with the error messages listed above.
   
   To overcome this, all usages of the wcm-run-ejb-task target
   within the applyCF has been replaced with alternative mechanism
   that no longer relies upon EJB tasks.
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   PI57013
   
   
 * REPORTED COMPONENT NAME
   LOTUS WEB CONT
   
   
 * REPORTED COMPONENT ID
   5724I2900
   
   
 * REPORTED RELEASE
   850
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt / Xsystem
   
   
 * SUBMITTED DATE
   2016-02-10
   
   
 * CLOSED DATE
   2016-02-18
   
   
 * LAST MODIFIED DATE
   2016-02-18
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   LOTUS WEB CONT
   
   
 * FIXED COMPONENT ID
   5724I2900
   
   

APPLICABLE COMPONENT LEVELS
 * R850 PSY
   UP