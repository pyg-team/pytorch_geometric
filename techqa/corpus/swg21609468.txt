Title: IBM Daylight Saving Time (DST) locales, and lenient Date and Time parsing for invalid date and time errors - United States

Text:
 TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 The start of Daylight Savings Time can cause invalid date errors in EDI Deenveloping or data translation. Sterling B2B Integrator Builds 5104 and 5020500 (and above) contain a "lenientDateParsing" parameter in enveloping.properties and translator.properties that can resolve issues related to these errors. 

SYMPTOM
 An EDI transaction received from a trading partner in a different time zone on the date of the Spring Daylight Saving Time changeover in the recipient's country fails date validation when the hour in the time field is between 02:00:00 and 02:59:59 am . 


CAUSE
On the day of the Spring Daylight Savings Time changeover, the recipient's server will flag a time between 02:00:00 and 02:59:59 as invalid; technically, that hour does not exist in the time zone in which it is received. 

For example, a transaction dated Mar. 13, 2016 at 2:30 AM from Paris (where the spring DST changeover is Mar. 27, 2016) will fail validation in New York (where the spring DST changeover date is Mar. 13, 2016 2:00 AM). This problem occurs because, strictly speaking, the time between 2:00-2:59 AM does not exist in the Eastern Time Zone on Mar. 13, 2016. Similarly data dated Mar. 27, 2016 2:30 AM, from New York will fail validation in Paris. 


DIAGNOSING THE PROBLEM
When incoming dates and times are specified in Universal Time, GMT, or specified with a time zone offset, the date is correctly converted to a valid local time in Sterling B2B Integrator (that is, it is converted to the local date and time specified by the locale setting on the recipient's operating system) . When the dates and times are not specified with UTC, GMT, or with a time zone offset, dates and times are always in local wallclock time (again, determined by the locale setting on the operating system). 

 
Java supports several hundred locales. A locale contains a language, an encoding, and other information, such as a time offset from GMT, whether DST is supported, the time offset of the DST, and the start and end rules for DST in the region. There is no standardization for DST, the rules vary widely from country to country. The spring changeover date for DST varies from February to April, and can vary even between countries in close proximity to one another. Sometimes the changeover date is fixed, sometime it is variable (having a rule based on holidays or special events, for example.)

Sterling B2B Integrator's JVM performs the date and time validation based on the specified locale. With a simple date (one not based on Universal Time, GMT, or not containing a time zone offset) it is difficult or impossible to differentiate a valid error from one caused by DST, as the date becomes local time. In translations, knowing the time zone by using a date/time format that is UTC, GMT, or includes the time zone or offset eliminates this problem. The date can be correctly converted to local time. The problem is more complex when the Interchange headers do not support those date/time formats, and data is coming from countries that do not support DST, or have different changeover dates. 



RESOLVING THE PROBLEM
Sterling B2B Integrator Builds 5104 and 5020500 (and above) contain a lenientDateParsing parameter for enveloping.properties and translator.properties. 


The easiest way to set these is by adding the parameters to the customer_overrrides.properties file in <SI ROOT>/install/properties, then stopping and restarting the application.

enveloping.lenientDateParsing=true
translator.lenientDateParsing=true



The enveloping.lenientDateParsing parameter allows lenient date parsing for date and time fields in EDI Envelope segments.

The translator.lenientDateParsing parameter allows lenient date parsing for mapped fields in translations.

These properties pass a flag to Java to allow "lenient" rather than strict date parsing. Lenient date parsing will allow a technically invalid Date and Time to process successfully. Use these parameters with caution, as lenient parsing will also allow January 32, to be validated as February 1.