Title: IBM Policy migration limitations and facts to consider - United States

Text:
gx xgs migration TECHNOTE (FAQ)

QUESTION
 What are the limitations and facts that need to be considered before running the policy migration utility for Network IPS (GX) to IBM QRadar Network Security(IQNS/XGS)? 

ANSWER

IBM QRadar Network Security(IQNS) migration limitations and facts to consider

Important: It is recommended that the SiteProtector Database services pack be upgrade to 3.1.1.18 or greater, to allow you to migrated the 4.6.2 version policies. If you have updated the SiteProtector Database component to version 3.1.1.18 or later, you can only migrate directly from firmware 4.6.2 GX policies.

If your SiteProtector Database is version 3.1.1.17 or earlier, you can only migrate firmware 4.6.1 GX policies to IQNS/XGS. Only the following policies are migrated: 

 * Protection Domains Policy 
 * X-Force Virtual Patch Policy 
 * Response Objects Policy 
 * Security Events Policy 
 * Web Application Protection Policy 
 * Response Filters Policy 
 * Tuning Parameters Policy

The other policies either don’t exist in the IQNS/XGS or must be manually created. 

Create a custom repository to run the migration utility on. If you already have IQNS/XGS policies in the repository running the migration utility will wipe them out. If you make any mistakes you can just delete the custom repository and rebuild it. 

 * 
 *   1. Select the group that you want to create the custom repository. 
    2. Right-click the group and select Manage Policy. 
    3. Right click the group and select New > Policy repository.
   
   
 * Note:
 * 
 * 
 * 

If you used a custom repository to migrate the GX policies and you want to add them to the default repository you must merge it with the default repository. However, you can use the Import action for any of the shared objects policies, since the imported policy immediately gets deployed any policy that is pointing to the old policy gets Invalid Reference object errors. You then must go into those policies and change those objects to point to the new ones you just imported or create new objects and then use those. 

You should not run the migration utility multiple times in the default repository as each time you run it deletes and recreates the IQNS/XGS policies. If you plan on running the utility more than once then you need to create a custom repository. Copy over the GX policies you want to migrate then run the utility. 

If you have multiple policies of the same type, you need to create a group for each policy and deploy the policy to that group. For example, if you have five Security Events policies you would create five groups, import one Security Events policy into each group and then run the utility. 


If you want to use FW 5.3 policies, once you have migrated to 5.2 you have to run the utility again to get to the current version 5.3.0.x. 

 *   1. In the policy view select the group that the policies are deployed to, right click, Migrate Agent Policy version. 
    2. Set the agent type to IBM QRadar Network Security. 
    3. Select Upgrade details and choose 5.2 for the Migrate from version and then 5.3.0.x Upgrade to version and then select OK.
       
       
   
   

The only other way of getting the shared object policies to co-exist is to export each shared objects policy as a .xml file in both repositories, add the objects from the custom repository to the .xml from the default repository and them import that policy back into the default repository. You would have to do this on the grayed out shared object policies as well. As you can see ‘merging’ is the preferred method. 

 * 
 * 
   
 *   * Intrusion Prevention 
    * Remote Directory Servers 
    * Address Geolocation 
    * Address Host 
    * Address List 
    * Application Group Collection 
    * Domain Certificate lists 
    * Email 
    * IP Reputation Categories 
    * IPS Event Filter 
    * Local Identity 
    * LogDB 
    * Management Address 
    * Management Service 
    * Non-Web Application 
    * Packet Capture 
    * Quarantine 
    * Remote Identity 
    * Rsyslog 
    * Schedule Objects 
    * SNMP 
    * URL Categories 
    * URL Lists 
    * Web Application
   
   



To merge a repository into the default : 

 1. Highlight the custom repository in the Policy View > right click and chose Merge.
    
    
 2. Once complete all of the custom IQNS/XGS policies should now be in the default repository.
    
    Notes:  * You must ensure that the IPS inspection that is named policies are unique in the Intrusion prevention shared object policy as any duplicate IPS inspection objects that are found in the custom repository will be deleted by the merge.
       
     * Therefore, you can not merge a custom repository into another custom repository if you are not using the default repository that you can cannot use the ‘merge’ feature. Only option is to run the migration utility on that repository but only if does not contain any IQNS/XGS policies. If you already have IQNS/XGS policies in the custom repository the only other way of getting the policies to co-exist is to export each shared objects policy as a .xml file in both repositories, add the objects from one custom repository into the other xml file, and then import that policy back into custom repository of choice. You must do that for every shared objects policy.
       
     * This procedure is not recommended without supports help. 
       
       
    
    
 3. Once migrated open up all of the policies and verify that the information has been migrated properly into the IQNS/XGS policies.
     * For the WAP policy, verify that the enabled events are now in the IPS inspection policy and if you had the Injection Category enabled check the tuning parameters policy for the added parameters. 
     * For the Event filter policy, policy verifies verify that the source and destination objects were created properly. Verify rule ordering and delete any redundant rules. 
     * For the Virtual patch policy, policy checks all of the migrated IPS inspection policies to ensure that they have the correct X-Force settings. 
     * For the Response Objects policy, check the response folder in the NAP and Event filter policy to ensure that the objects have been created. Note: Only the custom response objects in use in a migrated policy gets migrated 
     * For all custom Protection Domains verify that a new IPS inspection policy was created and contains the same enabled signatures. 
     * NAP Policy - Verify and update Network Access rule ordering.
       
       
    
    
 4. Update migrated adapters in List Address objects to match your IQNS/XGS appliance.
     * GX Interface A-D-> XGS Interface 1.1– 1.4 
     * GX Interface E-H -> XGS Interface 2.1-2.4 
     * GX Interface I-L -> XGS Interface 3.1-3.4 
     * GX Interface M-P -> XGS Interface 4.1-4.4
       
       
    
    
 5. Once migrated you need to check the IQNS/XGS objects and rename the objects to something more meaningful. For example, addresses under the List heading you see: filter_address_1, filter_address_2 and items under the Service heading you see: filter_service_1 , filter_service_2. 
    

Note: There is a bug in the migration utility where you cannot have more than 255 characters in the comments field and if you migrate a policy that does you cannot edit that policy at all once migrated. The only way to correct the policy and make it usable is to manually edit the xml to reduce the comment fields to <=255 and then you can create/edit rules. 




[/support/docview.wss?uid=swg21902773&aid=1] [https://ibm.biz/BdHdZx] [/support/docview.wss?uid=swg21902773&aid=2] [http://ibm.biz/InfraSecForumTechnote] [/support/docview.wss?uid=swg21902773&aid=3] [http://ibm.biz/SecSuptUTube] [/support/docview.wss?uid=swg21902773&aid=4] [http://ibm.biz/InfraSecFixes] [/support/docview.wss?uid=swg21902773&aid=5] [http://ibm.biz/FlexLicLogin] [/support/docview.wss?uid=swg21902773&aid=6] [http://ibm.biz/MyNotification] [/support/docview.wss?uid=swg21902773&aid=7] [http://ibm.biz/ContactSecSupport] 



Cross reference information Segment Product Component Platform Version Edition Security IBM Security Network Intrusion Prevention System Policy Firmware 4.5, 4.6, 4.6.1, 4.6.2 Security IBM Security Network Protection Firmware 5.2.0, 5.3, 5.3.1, 5.3.2, 5.3.3