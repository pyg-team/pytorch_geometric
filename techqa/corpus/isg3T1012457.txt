Title: IBM RSH - permission denied - United States

Text:
 TECHNOTE (FAQ)

QUESTION
 How troubleshoot the most common permission denied errors for the RSH command 

ANSWER
 

1) First step is to make sure the RSH daemon is running:
# lssrc -ls inetd

You should have these output lines:
shell /usr/sbin/rshd rshd active (for rsh/rcp)
login /usr/sbin/rlogind rlogind active (for rsh to login)
exec /usr/sbin/rexecd rexecd active (for rsh date)

If these daemons are not running. vi /etc/inetd.conf and uncomment each line. Then refresh the inetd subsystem with this command:
# refresh -s inetd 

2) If all daemons are running, next check to see if there is a .rhosts file in the home directory of the user you are trying to log in as.

a) log in as that user
b) type: echo $HOME to get the users home directory
root could be / or /home/root
c) make sure the .rhosts file has the correct hostname and username of the machine you are coming from. If you need to do a test, you can put a + + at the top of the file to indicate any user from any machine (only as a test, remove when done as this is not secure)

3) If the .rhosts file looks correct and you are still getting permission denied, you will next want to make sure the name resolution is correct by doing the following:

a) From the source machine (in nim this will be the nim master) telnet, or ssh to the target.

on the command line after logging in type:
# who am i (NOT whoami)

example output:
# who am i
root pts/0 Sep 8 07:11 (scooterbso.austin.ibm.com)

This shows the user is root, and the machine hostname coming in is scooterbso.austin.ibm.com. This entry in the .rhosts file must match exactly (long name). What ever you see in the ( ) must show up exactly the same as the .rhosts file down to the character. The .rhosts file does not know the difference between an alias and a fully qualified hostname.

4) If you are still having permission issues. Next step is to check the rsh command on the source machine :

ls -al /usr/bin/rsh

permission's should be -r-sr-xr-x 2 root system (size should not be zero) Permission's should be 4555