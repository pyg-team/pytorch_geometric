Title: IBM Using the relocateschemarepo and relocateuserdb commands to update database information - United States

Text:
1376697; CQ; ClearQuest; command line; installutil; relocateschemarepo; relocateuserdb; update; connection; connect; information; info; options; database; user database; schema repository TECHNOTE (FAQ)

QUESTION
 How can you update the schema repository connection information using the installutil commands "relocateschemarepo" and "relocateuserdb" in IBM Rational ClearQuest? 

ANSWER
 

These command line tools offer an alternative to using ClearQuest Designer and the Maintenance Tool to update connection information for your ClearQuest databases. 

 

RelocateSchemaRepo 

You can use this command to update the connection information for your schema repository database. For example:

installutil relocateschemarepo -dbset dbset_name -delete_cqtracking_file db_vendor server database dbo_login dbo_password rw_login rw_password ro_login ro_password connect_options




installutil Parameter Description relocateschemarepo Command to update the schema repository. -dbset Identifier for the connection name as it appears in the Maintenance Tool. dbset_name The actual name of the connection. -delete_cqtracking_files Optional parameter. Will delete the information stored in ClearQuest about the tracking files used by a Rational Administrator Project. If you are making just a test copy, this option is recommended. Otherwise, avoid using it. vendor The new upgrade database vendor name. Available choices are
MS_ACCESS, SQL_ANYWHERE, SQL_SERVER, ORACLE, DB2. Note: SQL Anywhere is no longer supported as of 2003.06.16.

server The new upgrade database server name. database The new upgrade database name. dbo_login The new empty database owner's login name. dbo_password The new empty database owner's login password. rw_login The new empty database owner's login name. rw_password The new empty database owner's login password. ro_login The new empty database owner's login name. ro_password The new empty database owner's login password. connect_options Optional parameters that vary by vendor. 
(Refer to the latest ClearQuest Documentation Supplement [http://publibfp.boulder.ibm.com/epubs/pdf/i1159795.pdf] for details on use of the vendor connect options). 

Sample command for ClearQuest versions 2003.06.13 and later that use Oracle with the CLOB datatype: installutil relocateschemarepo -dbset 2003.06.00 ORACLE MyServer MySID cqRepoDBuser password cqRepoDBuser password cqRepoDBuser password "LOB_TYPE=CLOB" Sample command for ClearQuest versions 2003.x and earlier that use Oracle with the Long datatype: installutil relocateschemarepo -dbset 2003.06.00 MS_ACCESS "" C:\temp\copySAMPL.mdb "" "" "" "" "" "" ""

Notes:  * In the Oracle example, MyServer is the Oracle server name and MySID is the System ID (SID) made to connect to the server. The name of the Oracle user associated to the destination tablespace (listed 3 sets of times after the SID) is cqRepoDBuser with a password of password. 
 * The command should be run until the you see an exit code of 0 in the command prompt. An exit code of 1 means that there was an error.



RelocateUserDb 

You can use this command to update the connection information for your user databases. For example: 


installutil relocateuserdb -dbset dbset_name cq_login cq_password user_dbname vendor server database dbo_login dbo_password rw_login rw_password connect_options




installutil Parameter Description relocateuserdb Command to update a user database. -dbset Identifier for the connection name as it appears in the Maintenance Tool. dbset_name The actual name of the connection. cq_login The user login to ClearQuest that has Super User privileges. cq_password Password for the super user of ClearQuest. user_dbname Logical name of the ClearQuest user database. vendor The new upgrade database vendor name. Available choices are
MS_ACCESS, SQL_ANYWHERE, SQL_SERVER, ORACLE, DB2. Note: SQL Anywhere is no longer supported as of 2003.06.16.

server The new upgrade database server name. database The new upgrade database name. dbo_login The new empty database owner's login name. dbo_password The new empty database owner's login password. rw_login The new empty database owner's login name. rw_password The new empty database owner's login password. connect_options Optional parameters that vary by vendor. 
(Refer to the latest ClearQuest Documentation Supplement [http://publibfp.boulder.ibm.com/epubs/pdf/i1159795.pdf] for details on use of the vendor connect options). 

Sample command for ClearQuest versions 2003.06.13 and later that use Oracle with the CLOB datatype: installutil relocateuserdb -dbset 2003.06.00 admin "" SAMPL ORACLE MyServer MySID cqDBuser password cqDBuser password "LOB_TYPE=CLOB" Sample command for ClearQuest versions 2003.x and earlier that use Oracle with the Long datatype: installutil relocateuserdb -dbset 2003.06.00 admin "" SAMPL MS_ACCESS "" C:\temp\copySAMPL.mdb "" "" "" "" "" 
Note: There is no password for the admin login for this schema repository. Therefore, "" are used to show that there is no password. 



BACKING UP FILES  Always make new database back-ups of your schema repository and user databases prior to making schema changes and performing database upgrades. Failure to create back-up copies can limit your ability to recover from a an upgrade failure, design change issues or other unforeseen failures.