Title: IBM Changing the bind-dn value in a configuration file. - United States

Text:
ACLD bind-dn TECHNOTE (FAQ)

QUESTION
 We have an Authorization Server conf file, ivacld.conf, with the following settings,

[ldap]
#bind-dn = cn=ivacld/hostname,cn=SecurityDaemons,secAuthority=Default
bind-dn = cn=root

The server is operational and we are not experiencing any problems, but need to put this back to it's proper value.

What would be the reason for doing this and how do we fix it? 

ANSWER
This is normally done when a new suffix has been added to LDAP but the ACLs have not been updated with the necessary entries which allow TAM servers access.
A common work-around is to use a bind-dn with admin privileges. There are two issues in doing this,


 1. This is a potential security exposure because TAM now has admin access to the LDAP server data. 
 2. The automatic or manual refresh of the TAM Server SSL certificate will fail because the code will try to update the TAM information for cn=root, which does not exist.


The resolution steps are: 

Add LDAP ACL Entries 
The LDAP ACLs need to be updated with entries for the TAM server groups. This can be done using the ivrgy_tool command. However, the command will update all suffixes defined in the directory and this may not be wanted. 

Complete details are located in the Applying Tivoli Access Managers ACLS to new LDAP suffixes [http://www-01.ibm.com/support/knowledgecenter/SSPREK_6.1.1/com.ibm.itame.doc_6.1.1/am611_admin605.htm?lang=en] section of the IBM Tivoli Access Manager for e-business Administration Guide, Version 6.1.1 

Update the bind-dn password in the .obf file 
The password is stored on the user object defined with the bind-dn attribute. This search can be used to retrieve the password, 

idsldapsearch -h ldaphost -D "cn=root" -w password \ 
-b "cn=ivacld/hostname,cn=SecurityDaemons,secAuthority=Default" \ 
objectClass=* userPassword 

cn=ivacld/hostname,cn=SecurityDaemons,secAuthority=Default 
userPassword=klkl37ITy0iw 

The above password is a normal randomly generated server password. If one-way encryption is enabled on LDAP, then the password will need to be reset by an LDAP admin. 

Use the following commands to reset the password. Each command must be issued as one line. 

pdadmin -l 
pdadmin local> config modify keyvalue set -obfuscate /opt/PolicyDirector/etc/ivacld.conf ldap bind-pwd klkl37ITy0iw 

Change the bind-dn setting back to it's original value and restart the Authorization Server. 

/opt/PolicyDirector/bin/pdacld 

Tivoli Access Manager authorization server v6.0.0.28 (Build 110815a) 

Copyright (C) IBM Corporation 1994-2003. All Rights Reserved. 

2012-08-10-13:12:59.023-05:00I----- 0x14C521D3 pdacld NOTICE mis ivcore ivacld.cpp 445 0x00000001 
HPDMS0467I Server startup 
2012-08-10-13:12:59.031-05:00I----- 0x14C526F2 pdacld NOTICE mis ivmgrd ivacld.cpp 450 0x00000001 

Verify correct start-up in msg__pdacld_utf8.log, 

2012-08-10-13:12:59.023-05:00I----- 0x14C521D3 pdacld NOTICE mis ivcore ivacld.cpp 445 0x00000001 HPDMS0467I Server startup 
2012-08-10-13:12:59.031-05:00I----- 0x14C526F2 pdacld NOTICE mis ivmgrd ivacld.cpp 450 0x00000001 HPDMS1778I Loading configuration 
2012-08-10-13:12:59.507-05:00I----- 0x14C52960 pdacld NOTICE mis libivacl ivauthzn_cache.cpp 375 0x00000001 HPDMS2400I Starting authorization service 
2012-08-10-13:12:59.507-05:00I----- 0x14C52962 pdacld NOTICE mis libivacl ivauthzn_cache.cpp 384 0x00000001 HPDMS2402I Initializing replica database 
2012-08-10-13:12:59.558-05:00I----- 0x10652105 pdacld NOTICE bas mts mtsserver.cpp 945 0x00000607 HPDBA0261I The server is listening on port 7137. 
2012-08-10-13:12:59.744-05:00I----- 0x14C52963 pdacld NOTICE mis libivacl ivauthzn_cache.cpp 412 0x00000001 Initializing authorization evaluator 
2012-08-10-13:12:59.745-05:00I----- 0x14C52966 pdacld NOTICE mis libivacl ivauthzn_cache.cpp 430 0x00000001 Authorization service ready 
2012-08-10-13:12:59.755-05:00I----- 0x14C521D4 pdacld NOTICE mis ivcore ivacld.cpp 629 0x00000001 HPDMS0468I Server ready 
2012-08-10-13:12:59.805-05:00I----- 0x10652105 pdacld NOTICE bas mts mtsserver.cpp 945 0x0000090a HPDBA0261I The server is listening on port 7136.  

PRODUCT ALIAS/SYNONYM
 TAM TAMeB