Title: IBM HTTP with SSL Connection Failure - United States

Text:
 TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 Connections from SB2BI as the client using HTTP with SSL to a SSO server are failing with an error message from the server. 



SYMPTOM
 

 * Enhanced SSL logging shows "Error: None of client suites is enabled on server or ECC ciphersuite curve and/or pointformat does not match." 
 * After the above, enhanced SSL logging shows
   "ALERT
   Severity Level: FATAL
   Alert Type: 40
   HANDSHAKE_FAILURE - The handshake handler was unable to negotiate an acceptable set of security parameters." 
 * TCP captures show that Client does not send a certificate in the Client Certificate step 
 * TCP captures show server sending a fatal alert message of "Handshake Failure" after both sides have sent their Certificate messages and client has sent "Client Key Exchange", "Change Cipher Suite" and an "Encrypted Handshake Message". 
   


CAUSE
In SB2BI version 525, MD5 is an algorithm that is disabled by default, but that was the signing algorithm used by the server's certificate.. 

ENVIRONMENT
This occurred on IBM Sterling B2B Integrator 5020500_2 with an AIX operating system and an Oracle database, but could theoretically occur in any supported environment at 5020500 or above. 



DIAGNOSING THE PROBLEM
The diagnosis was made more difficult by the fact that the server did not immediately send a failure alert when the client did not send a certificate, but waited until the client had sent an Encrypted Handshake Message. 



RESOLVING THE PROBLEM
The recommended fix is for the server to use a new certificate with a signature algorithm that is at least at the SHA1 level and send the public key to the client. 

SB2BI Support recommends against changing the default settings to enable MD5 on the SB2BI side. Due to that, no instructions for doing so are provided here.