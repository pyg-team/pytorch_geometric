Title: IBM Content Manager OnDemand defined macros in SQL - United States

Text:
SQL statements; object values; Application Group Name; user ID; userid; CMOD; Content Manager OnDemand; V90; v90; OnDemand; SQL; macros TECHNOTE (FAQ)

QUESTION
 How can I write SQL statements to include current object values like Application Group Name or user ID? 

CAUSE
Content Manager OnDemand Version V9.0 added macros support that can be used in SQL statements (including the query restriction) which allows the macro to be substituted by the appropriate value.

ANSWER
The new macros are: 

Name Description $ODUSERID The user ID used to log into Content Manager OnDemand $ODALIAS The alias defined to Content Manager OnDemand for the user session $ODAGNAME The application group name $ODAGID The application group internal identifier 

The substitution does not include any necessary quotes for the macro, therefore you must ensure that you properly quote the macro (if required). 

For example: 

ODTBL.ag_field in (SELECT <column1> FROM <customer_table> where userid = '$ODUSERID') 

if the user logs onto Content Manager OnDemand as USER1, the SQL becomes: 

ODTBL. account in (SELECT value FROM AAA1 where userid = 'USER1') 

Example for System i: 

ODTBL.ACCTNO IN ( SELECT ACCOUNT FROM QGPL.SECTEST WHERE USERNAME = '$ODUSERID')