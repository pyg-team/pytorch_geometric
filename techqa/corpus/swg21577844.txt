Title: IBM Design Studio crashes when the EXIT function calls a dll - United States

Text:
EXIT; EXIT Function; crash; Design Studio crash TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 WebSphere Transformation Extender Design Studio crashes using the EXIT function. 

SYMPTOM
WebSphereÂ® Transformation Extender (WTX) Design Studio crashes when the EXIT function calls a dll


CAUSE
Using a dll with the EXIT function uses GlobalAllPtr to allocate memory for lpDataFromApp buffer will cause a memory corruption situation.

ENVIRONMENT
Windows Server 2008 R2

DIAGNOSING THE PROBLEM
The WTX 8.4.0.0 releases notes explains this situation under " 3. UPGRADE AND MIGRATION INFORMATION ".




http://www-01.ibm.com/support/docview.wss?uid=swg27023585 [http://www-01.ibm.com/support/docview.wss?uid=swg27023585]



RESOLVING THE PROBLEM
Users will have to recompile their dll using the newest version of the SDK. 

Custom function memory management changes: 

WebSphere Transformation Extender version 8.4 requires custom functions (including the EXIT function) that run on Microsoft Windows systems to use new memory management functions: 

- In the code for a WebSphere Transformation Extender custom function, use the C programming language malloc and free runtime functions instead of the Microsoft Visual Studio GlobalAllocPtr and GlobalFreePtr macros. 

- Use the following new WebSphere Transformation Extender programming interface functions to allocate the lpDataFromApp buffer: 

o mpiMemMalloc 

o mpiMemRealloc 

o mpiMemFree 


The function prototypes are defined in runmerc.h which should be installed when WTX for Application Programming is installed. 

You will need to include runmerc.h and to link with dtxpi.lib (where functions are implemented). 




PRODUCT ALIAS/SYNONYM
 Ascential DataStage TX