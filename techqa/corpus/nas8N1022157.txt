Title: IBM How To Disable SSL/TLS for the ADMIN HTTP Server and ADMIN2 Application Server - United States

Text:
ADMIN; SSL; TLS; Disable; Security; Remove TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 This document will discuss how to manually disable SSL/TLS communications and enable IP-only communications for the ADMIN HTTP Server and the ADMIN2 Application Server. 

SYMPTOM
None of the ADMIN server jobs will stay started in the QHTTPSVR subsystem AND/OR connection issues are experienced when accessing port 2010/2005. When reviewing the ADMIN job log, the following message might be logged. 

HTP8351 Diagnostic 10 QZSRAPR QHTTPSVR *STMT QZSRVSSL QHTTPSVR *STMT
From module . . . . . . . . : QZSRSNDM 
From procedure . . . . . . : sendMessageToJobLog_CCSID 
Statement . . . . . . . . . : 27 
To module . . . . . . . . . : MOD_SSL 
To procedure . . . . . . . : ssl_initializer 
Statement . . . . . . . . . : 187 
Message . . . . : Secure Sockets session failed to initialize successfully. 
Cause . . . . . : Secure Sockets failed to initialize successfully.

When connecting to the URLs, https://<server>:2010 or https://<server>:2005/ibm/console, you might experience a "Secure Connection Failed" error in your browser.


CAUSE
The SSL/TLS certificate assigned to the ADMIN application ids in the Digital Certificate Manager (DCM) has expired or there is something wrong with the ADMIN server's SSL/TLS configuration.


ENVIRONMENT
IBM i OS



RESOLVING THE PROBLEM
IBM recommends manually disabling the SSL/TLS configuration for the ADMIN HTTP Server and ADMIN2 application server; then restarting the ADMIN server so that the ADMIN Server's SSL/TLS configuration can be re-enabled. Please follow the instructions below on how to do this. 

 

1) Backup the current ADMIN HTTP Server and ADMIN2 Applicaton Server configuration files.

STRQSH
cp /QIBM/UserData/HTTPA/admin/conf/admin-cust.conf /QIBM/UserData/HTTPA/admin/conf/admin-cust.bak
cp /qibm/userdata/os/admininst/admin2/wlp/usr/servers/admin2/resources/security/admin-cust.xml /qibm/userdata/os/admininst/admin2/wlp/usr/servers/admin2/resources/security/admin-cust.bak 2) Manually edit the ADMIN HTTP Server and ADMIN2 Application Server configuration files to remove their SSL/TLS configuration.

a)WRKLNK '/QIBM/UserData/HTTPA/admin/conf/admin-cust.conf'
b) Option 2 to edit
c) Delete the contents of this file.
d) Press F3 twice to save and exit.

e)WRKLNK '/qibm/userdata/os/admininst/admin2/wlp/usr/servers/admin2/resources/security/admin-cust.xml'
f) Option 2 to edit
g) Replace the contents of this file with the following text. DO NOT copy the empty line after </server>. You would want to only copy the 4 lines of code below.
<?xml version="1.0" encoding="UTF-8"?>
<server>
<httpEndpoint host="*" httpPort="2004" httpsPort="-1" id="defaultHttpEndpoint"/>
</server>

h) Press F3 twice to save and exit. 3) Restart the ADMIN Server.

ENDTCPSVR *HTTP HTTPSVR(*ADMIN)
WRKACTJOB SBS(QHTTPSVR)
Wait for all of the ADMIN server jobs to end.

STRTCPSVR *HTTP HTTPSVR(*ADMIN)
WRKACTJOB SBS(QHTTPSVR)
Wait for all of the ADMIN server jobs to start and CPU utilization goes down to 0%. 4) Re-configure the ADMIN server for SSL/TLS using the instructions in the URLs below.

The ADMIN HTTP Apache server will need to be configured for SSL and listening on port 2010:
http://www.ibm.com/support/docview.wss?uid=nas8N1013544 [http://www.ibm.com/support/docview.wss?uid=nas8N1013544]

- The ADMIN2 server job will need to be configured for SSL:
[http://www.ibm.com/support/docview.wss?uid=nas8N1013544]http://www.ibm.com/support/docview.wss?uid=nas8N1021834 [http://www.ibm.com/support/docview.wss?uid=nas8N1021834] 


Cross reference information Segment Product Component Platform Version Edition Operating System IBM i 7.3 Operating System IBM i 7.2 Operating System IBM i 7.1