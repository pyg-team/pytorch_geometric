Title: IBM PM50402: IN A WAS CLUSTER ENVIRONMENT WITH TWO ADJNUCT REGIONS WHEN SHUTTING ONE ADJUNCT DOWN, THE SECOND ADJUNCT HANGS. - United States

Text:
z/os SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS DUPLICATE OF ANOTHER APAR.
    
   
   

ERROR DESCRIPTION
 *  The customer has a WAS cluster with two adjunct regions. The
   problem occurred when the customer was closing the first
   adjunct, the second one is taking all the queued messages and
   hangs.
   .
   The change has analyzed the javacores provided by the customer
   and they are seeing a deadlock that is being reported with the
   following stack:
   .
   
   3XMTHREADINFO      "Default : 0" J9VMThread:0x0000000809344000,
   j9thread_t:0x0000000809331E50,
   java/lang/Thread:0x000000082067C250,
   state:B, prio=5
   3XMTHREADINFO1            (native thread ID:0x2DEF5E00, native
   priority:0x5, native policy:UNKNOWN)
   3XMTHREADINFO3           Java callstack:
   4XESTACKTRACE                at
   com/ibm/ws/sib/ra/inbound/impl/SibRaCommonEndpointActivation.cl
   earTimer(SibRaCommonEndpointActivation.java:443)
                         --> waiting to get a lock on timerLock
   4XESTACKTRACE                at
   com/ibm/ws/sib/ra/inbound/impl/SibRaCommonEndpointActivation.dr
   opConnection(SibRaCommonEndpointActivation.java:1416)
                         --> obtained a lock on _connections
   4XESTACKTRACE                at
   com/ibm/ws/sib/ra/inbound/impl/SibRaCommonEndpointActivation.se
   ssionError(SibRaCommonEndpointActivation.java:1329)
   4XESTACKTRACE                at
   com/ibm/ws/sib/ra/inbound/impl/SibRaMessagingEngineConnection$S
   ibRaConnectionEventThread.executeCallback(SibRaMessagingEngineC
   onnection.java:1423)
   4XESTACKTRACE                at
   com/ibm/ws/sib/ra/inbound/impl/SibRaMessagingEngineConnection$S
   ibRaConnectionEventThread.run(SibRaMessagingEngineConnection.ja
   va:1377)
   4XESTACKTRACE                at
   com/ibm/ws/util/ThreadPool$Worker.run(ThreadPool.java:1550)
   3XMTHREADINFO3         -->  No native callstack available
                                      for this thread
   
   
   3XMTHREADINFO      "Thread-2462" J9VMThread:0x000000080950BC00,
   j9thread_t:0x0000000809503D20,java/lang/Thread:0x0000000821699E
   40,state:B, prio=5
   3XMTHREADINFO1            (native thread ID:0x2E3A2400, native
   priority:0x5, native policy:UNKNOWN)
   3XMTHREADINFO3           Java callstack:
   4XESTACKTRACE                at
   com/ibm/ws/sib/ra/inbound/impl/SibRaCommonEndpointActivation.co
   nnectUsingTrmWithTargetData(SibRaCommonEndpointActivation.java:
   655(Compiled Code)) ---> waiting to get a lock on _connections
   4XESTACKTRACE                at
   com/ibm/ws/sib/ra/inbound/impl/SibRaCommonEndpointActivation.co
   nnectUsingTrm(SibRaCommonEndpointActivation.java:582(Compiled
   Code))
   4XESTACKTRACE                at
   com/ibm/ws/sib/ra/inbound/impl/SibRaCommonEndpointActivation.co
   nnect(SibRaCommonEndpointActivation.java:486(Compiled Code))
   4XESTACKTRACE                at
   com/ibm/ws/sib/ra/inbound/impl/SibRaCommonEndpointActivation.ch
   eckMEs(SibRaCommonEndpointActivation.java:366(Compiled Code))
   4XESTACKTRACE                at
   com/ibm/ws/sib/ra/inbound/impl/SibRaCommonEndpointActivation.ti
   merLoop(SibRaCommonEndpointActivation.java:325(Compiled Code))
   4XESTACKTRACE                at
   com/ibm/ws/sib/ra/inbound/impl/SibRaCommonEndpointActivation$1.
   run(SibRaCommonEndpointActivation.java:413(Compiled Code))
                          --> holding a timerLock
   4XESTACKTRACE                at
   java/util/Timer$TimerImpl.run(Timer.java:291(Compiled Code))
   3XMTHREADINFO3    No native callstack available for this thread
   .
   The customer had APAR PM41822 applied. This new deadlock issue
   that is occurring is not due to a regression of PM41822 and was
   not introduced because of PM41822.
   
   
    
   
   

LOCAL FIX

PROBLEM SUMMARY

PROBLEM CONCLUSION

TEMPORARY FIX

COMMENTS
 *  PM50402 is a sysroute of APAR PM49608 [http://www-01.ibm.com/support/docview.wss?uid=swg1PM49608]. APAR PM50402 was taken
   to deliver a ++APAR. APAR PM50402 is being closed DUP of APAR
   PM53810 [http://www-01.ibm.com/support/docview.wss?uid=swg1PM53810] because PM53810 [http://www-01.ibm.com/support/docview.wss?uid=swg1PM53810] will document the delivery of APAR
   PM49608 [http://www-01.ibm.com/support/docview.wss?uid=swg1PM49608] in Service Level (Fix Pack) 7.0.0.23 of WebSphere
   Application Server V7.0 for z/OS.
   
   
    
   
   

APAR INFORMATION
 * APAR NUMBER
   PM50402
   
   
 * REPORTED COMPONENT NAME
   WEBSPHERE FOR Z
   
   
 * REPORTED COMPONENT ID
   5655I3500
   
   
 * REPORTED RELEASE
   700
   
   
 * STATUS
   CLOSED DUB
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2011-10-19
   
   
 * CLOSED DATE
   2012-01-17
   
   
 * LAST MODIFIED DATE
   2012-05-09
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
    PM49608 [http://www-01.ibm.com/support/docview.wss?uid=swg1PM49608]
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION

APPLICABLE COMPONENT LEVELS