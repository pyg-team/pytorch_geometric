Title: IBM PJ43514: WHEN TRYING TO CREATE AN INDEX THAT INCLUDED OBJECT_CLASS_ID IN CPE 5.2.1 USING ACCE A E_INVALID_ENUM_VALUE ERROR APPEARS. - United States

Text:
 SUBSCRIBE TO THIS APAR
By subscribing, you receive periodic emails alerting you to the status of the APAR, along with a link to the fix after it becomes available. You can track this item individually or track all items by product.

Notify me when this APAR changes.

Notify me when an APAR for this component changes.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  When trying to create an index that included object_class_id in
   CPE 5.2.1 using ACCE a E_INVALID_ENUM_VALUE error appears.
   
   The steps to reproduce the issue:
   * In ACCE, open the Object Store and select the Properties tab
   * Scroll down to the Table Definitions and select DocVersion
   from the pull down
   * Select the Index tab for DocVersion and click Add to create a
   new index
   * Pick "object_class_id" to index
   * Optionally add another column to the index (the error will
   occur on single or composite indexes)
   * Refresh and save the change
   
   Error stack:
   2015-08-06T14:16:38.543 F0B7689B ENG  FNRCE0029E - ERROR method
   name: toInstance principal name: nnn Global Transaction: true
   User Transaction: false Exception Info: An attempt was made to
   create an enum with a value that is not allowed for this enum.
   The invalid value is 10.
   com.filenet.api.exception.EngineRuntimeException: FNRCE0029E:
   E_INVALID_ENUM_VALUE: An attempt was made to create an enum with
   a value that is not allowed for this enum. The invalid value is
   10. failedBatchItem=0
           at
   com.filenet.apiimpl.constants.ToInstance.toInstance(ToInstance.j
   ava:29)
           at
   com.filenet.api.constants.TypeID.getInstanceFromInt(TypeID.java:
   156)
           at
   com.filenet.apiimpl.core.ColumnDefinitionImpl.get_DataType(Colum
   nDefinitionImpl.java:78)
           at
   com.filenet.engine.persist.IndexDefinitionPersister.handleCreati
   on(IndexDefinitionPersister.java:210)
           at
   com.filenet.engine.persist.IndexDefinitionPersister.preExecuteCh
   ange(IndexDefinitionPersister.java:92)
           at
   com.filenet.engine.persist.DependentPersister.applyChanges(Depen
   dentPersister.java:331)
   ...
   
   The index can be created manually to workaround the issue.
   
   
    
   
   

LOCAL FIX

PROBLEM SUMMARY
 *  ****************************************************************
   * USERS AFFECTED:                                              *
   * Customers using 5.2.1.2-P8CPE-FP002 and prior that are       *
   * trying to create and IndexDefinition that references the     *
   * object_class_id column.                                      *
   ****************************************************************
   * PROBLEM DESCRIPTION:                                         *
   * When referencing internal columns (like object_class_id)     *
   * that do not map to actual properties, the server uses an     *
   * internal data type indicator for these kinds of columns.     *
   * However, when retrieving the ColumnDefinition, the server    *
   * was not mapping the internal data type indicator to one of   *
   * the valid data type indicators exposed in the API.  As a     *
   * result, ACCE didn't know how to treat the column's data      *
   * type.                                                        *
   ****************************************************************
   * RECOMMENDATION:                                              *
   * Upgrade to 5.2.1.3-P8CPE-FP003 and higher                    *
   ****************************************************************
   
   
    
   
   

PROBLEM CONCLUSION
 *  Fixed in 5.2.1.3-P8CPE-FP003 and higher.  Inclusion of
   object_class_id columns was resolved by mapping some internal
   data types to the formal API data types so ACCE can present such
   internal columns correctly.
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   PJ43514
   
   
 * REPORTED COMPONENT NAME
   CONTENT ENGINE
   
   
 * REPORTED COMPONENT ID
   5724R8101
   
   
 * REPORTED RELEASE
   521
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2015-08-24
   
   
 * CLOSED DATE
   2015-12-15
   
   
 * LAST MODIFIED DATE
   2015-12-15
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   CONTENT ENGINE
   
   
 * FIXED COMPONENT ID
   5724R8101
   
   

APPLICABLE COMPONENT LEVELS
 * R521 PSY
   UP