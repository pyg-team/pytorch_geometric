Title: IBM IZ95879: WAS V6.1 MDB IS POSTED WITH MQRC 2206 AFTER Z/OS MQ UPGRADE TO V701 - United States

Text:
  FIXES ARE AVAILABLE
WebSphere MQ V6.0 Fix Pack 6.0.2.12 [http://www-01.ibm.com/support/docview.wss?uid=swg24033317]
WebSphere MQ V6.0 for iSeries Fix Pack 6.0.2.12 [http://www-01.ibm.com/support/docview.wss?uid=swg24033319]
WebSphere MQ 6.0 for HP OpenVMS Alpha and Itanium - Fix Pack 6.0.2.12 [http://www-01.ibm.com/support/docview.wss?uid=swg24035627]


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  An MQ V6.0.2.6 client under WAS executes with an MDB listener
   and accesses a SHARED queue indexed by CORRELID. After an
   upgrade of the z/OS MQ Server to 7.0.1 the MDB issues GET but
   this call now fails with MQRC 2206  (MQRC_MSG_ID_ERROR).
   
   
    
   
   

LOCAL FIX

PROBLEM SUMMARY
 *  ****************************************************************
   USERS AFFECTED:
   This issue affects users of either:
   
   - The WebSphere Application Server V6.1 WebSphere MQ
   messaging provider.
   - The WebSphere Application Server V6.1 WebSphere MQ
   messaging provider who have configured the application
   server to use the WebSphere MQ V6 classes for JMS (by
   setting the MQ_INSTALL_ROOT variable to point to the
   directory where WebSphere MQ V6 has been installed)
   
   who have Listener Ports configured to run in ASF mode (the
   default mode of operation) which monitor shared queues on a
   WebSphere MQ for z/OS V701 queue manager, where the shared
   queues have the INDXTYPE property set to
   either "MQIT_CORREL_ID", "MQTT_MSG_TOKEN" or "MQIT_GROUP_ID".
   
   Platforms affected:
   All Distributed (iSeries, all Unix and Windows) +Java
   ****************************************************************
   PROBLEM SUMMARY:
   When a WebSphere Application Server V6.1 Listener Port (running
   in ASF mode) starts up, it uses the WebSphere MQ V6 classes for
   JMS to query the level of the WebSphere MQ queue manager it is
   connecting to.
   
   If WebSphere Application Server V6.1 determines that a Listener
   Port is connecting to a WebSphere MQ for z/OS V6 or V7 queue
   manager, then the application server will make a WebSphere MQ
   MQGET API call with the match option MQMO_MATCH_MSG_TOKEN when
   getting messages from a queue to deliver to a message-driven
   bean.
   
   For all other WebSphere MQ queue managers, the application
   server will issue MQGET calls specifying the match option
   MQMO_MATCH_MSG_ID.
   
   
   Due to an issue with the WebSphere MQ V6 classes for JMS,
   WebSphere Application Server did not correctly recognise
   WebSphere MQ for z/OS V701 queue managers, and so issued MQGET
   calls with the match option MQMO_MATCH_MSG_ID. If the queue
   being monitored by the Listener Port was a shared queue that
   had the INDXTYPE property set to either "MQIT_CORREL_ID",
   "MQIT_MSG_TOKEN" or "MQIT_GROUP_ID", then the MQGET call would
   fail with the reason code MQRC_MSG_ID_ERROR.
   
   As a result of this error, messages on the shared queue would
   never be delivered to message-driven beans.
   
   
    
   
   

PROBLEM CONCLUSION
 *  The WebSphere MQ V6 classes for JMS have been updated to
   correctly identify WebSphere MQ for z/OS V701 queue managers.
   This means that WebSphere Application Server V6.1 Listener
   Ports will now use the MQGET API call with the match option
   MQMO_MATCH_MSG_TOKEN when getting messages to deliver to a
   message-driven bean from a shared queue running on a WebSphere
   MQ for z/OS V701 queue manager.
   
   ---------------------------------------------------------------
   The fix is targeted for delivery in the following PTFs:
   
                      v6.0
   Platform           Fix Pack 6.0.2.12
   --------           --------------------
   Windows            U200331
   AIX                U842074
   HP-UX (PA-RISC)    U842208
   HP-UX (Itanium)    U842213
   Solaris (SPARC)    U842209
   Solaris (x86-64)   tbc_p600_0_2_12
   iSeries            tbc_p600_0_2_12
   Linux (x86)        U842210
   Linux (x86-64)     tbc_p600_0_2_12
   Linux (zSeries)    U842211
   Linux (Power)      U842212
   Linux (s390x)      U842214
   
   The latest available maintenance can be obtained from
   'WebSphere MQ Recommended Fixes'
   http://www-1.ibm.com/support/docview.wss?rs=171&uid=swg27006037 [http://www-1.ibm.com/support/docview.wss?rs=171&uid=swg27006037]
   
   If the maintenance level is not yet available, information on
   its planned availability can be found in 'WebSphere MQ
   Planned Maintenance Release Dates'
   http://www-1.ibm.com/support/docview.wss?rs=171&uid=swg27006309 [http://www-1.ibm.com/support/docview.wss?rs=171&uid=swg27006309]
   ---------------------------------------------------------------
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   IZ95879
   
   
 * REPORTED COMPONENT NAME
   WMQ AIX V6
   
   
 * REPORTED COMPONENT ID
   5724H7201
   
   
 * REPORTED RELEASE
   601
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2011-03-01
   
   
 * CLOSED DATE
   2011-03-30
   
   
 * LAST MODIFIED DATE
   2011-03-30
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   WMQ AIX V6
   
   
 * FIXED COMPONENT ID
   5724H7201
   
   

APPLICABLE COMPONENT LEVELS
 * R601 PSY
   UP