Title: IBM Tivoli Monitoring V630 Warehouse OJDBC error. - United States

Text:
ojdbc7 ojdbc8 ITM Warehouse JVMCFRE003 UnsupportedClassVersionError KSY KHD TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 The IBM Tivoli Monitoring Release 6.3.X Summarization and Pruning or Warehouse Proxy Agents fail to start when using Oracle's OJDBC Driver that is shipped with Oracle 12c, Oracle 12.1.x and Oracle 12.2.x. 

The following error message can be found in the Agent's log file:

Exception message: java.lang.UnsupportedClassVersionError: JVMCFRE003 bad major version; class=oracle/jdbc/OracleDriver, offset=6



SYMPTOM
Neither the Summarization and Pruning Agent nor the Warehouse Proxy Agent will start successfully when the Oracle ojdbc7 or ojdbc8 Drivers are installed on the Agent system for use by the Agents. The message: 

Exception message: java.lang.UnsupportedClassVersionError: JVMCFRE003 bad major version; class=oracle/jdbc/OracleDriver, offset=6 

appears in the Agent's log files when the failure occurs.


CAUSE
The ITM 630 Summarization and Pruning and Warehouse Proxy Agents are built using IBM JVM 6, whereas Oracle's ojdbc7 or ojdbc8 Drivers are built with JVM 7 and JVM 8 respectively. The Java Runtime prevents the execution of a Java Class, in this case the Oracle Driver, which is of a more recent JVM version than that of the Application (ITM Agents) invoking the Class. 


ENVIRONMENT
IBM Tivoli Monitoring 630 Warehouse



DIAGNOSING THE PROBLEM
When the Summarization and Pruning or Warehouse Proxy Agents do not start, examine their log files and look for the reported Java Exception message 

 

Exception message: java.lang.UnsupportedClassVersionError: JVMCFRE003 bad major version; class=oracle/jdbc/OracleDriver, offset=6


RESOLVING THE PROBLEM
Download Oracle's ojdbc6 Driver from the Oracle Web Page http://www.oracle.com/technetwork/database/features/jdbc/index-091264.html [http://www.oracle.com/technetwork/database/features/jdbc/index-091264.html]. Specify the Oracle fully qualified path to the downloaded ojdbc6 Driver 'jar' files as the response to the Agent's configuration prompt . 


Fully qualified paths to JDBC JAR files (comma separated)
JDBC JARs List :

where JDBC JARS List is the fully qualified file names of each of the Oracle ojdbc6 Driver files. 

RELATED INFORMATION
 Oracle Drivers [http://www.oracle.com/technetwork/database/features/jdbc/index-091264.html]




PRODUCT ALIAS/SYNONYM
 ITM