Title: IBM JR55335: BPMCONFIG -UPGRADE FAILED IF THE PASSWORD WERE ENCRYPTED - United States

Text:
 SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS DOCUMENTATION ERROR.
    
   
   

ERROR DESCRIPTION
 *  If the password are encrypted at the custoemr environemnt
   BPMConfig -upgrade command will fail with the following
   exception
   
   ./BPMConfig.sh -upgrade -profile $DMGR
   
   
   2016-02-12 14:39.17.025
   com.ibm.bpm.config.util.ConfigHelper.getCommandMgr(): RETURN
   com.ibm.ws.management.cmdframework.impl.LocalCommandMgr@1dad4687
   2016-02-12 14:39.17.025
   com.ibm.bpm.config.util.ConfigHelper.invokeAdminCommand(): ENTRY
   anonymous1455305664063
   com.ibm.ws.management.cmdframework.impl.LocalCommandMgr@1dad4687
   createKeyStore {keyStoreReadOnly=false,
   keyStoreName=IBMBPMKeyStore-De1,
   keyStorePasswordVerify=********,
   keyStoreLocation=${CONFIG_ROOT}/cells/PSCell1/ibmbpmks-De1.jceks
   ,
   keyStoreDescription=IBM BPM key store for De1,
   keyStoreType=JCEKS,
   keyStorePassword=********, keyStoreUsage=KeySetKeys,
   scopeName=(cell):PSCell1} null null
   
   [2/12/16 14:39:17:222 EST]     FFDC
   Exception:com.ibm.bpm.config.util.ConfigException
   SourceId:com.ibm.bpm.config.BPMConfig.main ProbeId:163
   Reporter:java.lang.Class@59426a1a
   com.ibm.bpm.config.util.ConfigException: CWMCB0046E: The
   'createKeyStore' command failed: Both password and verify
   password were
   not supplied.
   at
   com.ibm.bpm.config.util.ConfigHelper.invokeAdminCommand(ConfigHe
   lper.jav
   a:2468)
            at
   
   com.ibm.bpm.config.util.ConfigHelper.invokeAdminCommand(ConfigHe
   lper.jav
   a:1998)
   at
   com.ibm.bpm.config.capability.standard.ComponentProcessServer.ad
   dKeyStor
   eForBpm(ComponentProcessServer.java:3059)
   at
   com.ibm.bpm.config.capability.standard.ComponentProcessServer.up
   gradeDep
   loymentTarget(ComponentProcessServer.java:613)
   at
   com.ibm.bpm.config.capability.Capability.upgrade(Capability.java
   :511)
   at
   com.ibm.bpm.config.capability.ProvisionDe.upgradeDeploymentEnvir
   onment(P
   rovisionDe.java:1052)
   at
   com.ibm.bpm.config.BPMConfig.upgradeProfile(BPMConfig.java:1266)
            at
   com.ibm.bpm.config.BPMConfig.access$1100(BPMConfig.java:150)
   ==============
   
   All upgrade documents need to be updated with a note to edit
   the file
   
   http://www-01.ibm.com/support/docview.wss?uid=swg27047000 [http://www-01.ibm.com/support/docview.wss?uid=swg27047000]
   
    Step X : optional
     *  DBUpgrade script modification already listed
      * BPMConfig script modification
    - Find the comment block "Enabling custom password encryption"
   - Modify the value of the CUSTOMPWDPROPS property based on your
   custom encryption class name and add any required variables
   -  Add CLASSPATH=$CLASSPATH: <full file path of your custom
   password encryption jar file>
   
   
    
   
   

LOCAL FIX
 *  DOC improvment
   
   
    
   
   

PROBLEM SUMMARY
 *  ****************************************************************
   * USERS AFFECTED:  IBM Business Process Manager (BPM)          *
   *                  Advanced                                    *
   *                  IBM Business Process Manager (BPM)          *
   *                  Standard                                    *
   *                  IBM Business Process Manager (BPM) Express  *
   ****************************************************************
   * PROBLEM DESCRIPTION: In                                      *
   *                      http://www-                             *
   *                      01.ibm.com/support/docview.w            *
   *                      ss?uid=swg27047000 before step 15 "     *
   *                      Start the deployment manager server."   *
   *                      and before step 11 "For each            *
   *                      stand-alone profile in the IBM BPM      *
   *                      Express installation" add the same      *
   *                      following new step (4 times in total):  *
   *                      Optional: If you enabled custom         *
   *                      password encryption in your IBM BPM     *
   *                      environment to protect passwords that   *
   *                      are contained in your WebSphere         *
   *                      Application Server configuration, you   *
   *                      must enable the BPMConfig script to     *
   *                      support custom encryption. From         *
   *                      install_root/bin, open the script or    *
   *                      batch file for the BPMConfig command.   *
   *                      - Find the comment block "Enabling      *
   *                      custom password encryption." Read the   *
   *                      comments and then uncomment the         *
   *                      properties.                             *
   *                      - Modify the value of the               *
   *                      CUSTOMPWDPROPS property based on your   *
   *                      custom encryption class name. Also      *
   *                      add any additional system properties    *
   *                      that your custom encryption class       *
   *                      needs.                                  *
   *                      - Modify the value of the CLASSPATH     *
   *                      property and replace it with the full   *
   *                      file path of your custom password       *
   *                      encryption jar file.                    *
   ****************************************************************
   * RECOMMENDATION:                                              *
   ****************************************************************
   In http://www-01.ibm.com/support/docview.wss?uid=swg27047000 [http://www-01.ibm.com/support/docview.wss?uid=swg27047000]
   before step 15 "
   Start the deployment manager server." and before step 11 "For
   each stand-alone profile in the IBM BPM Express installation"
   add the same following new step (4 times in total):
   Optional: If you enabled custom password encryption in your
   IBM BPM environment to protect passwords that are contained in
   your WebSphere Application Server configuration, you must
   enable the BPMConfig script to support custom encryption. From
   install_root/bin, open the script or batch file for the
   BPMConfig command.
   - Find the comment block "Enabling custom password
   encryption." Read the comments and then uncomment the
   properties.
   - Modify the value of the CUSTOMPWDPROPS property based on
   your custom encryption class name. Also add any additional
   system properties that your custom encryption class needs.
   - Modify the value of the CLASSPATH property and replace it
   with the full file path of your custom password encryption jar
   file.
   
   
    
   
   

PROBLEM CONCLUSION
 *  This will be updated in next refresh
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   JR55335
   
   
 * REPORTED COMPONENT NAME
   BPM STANDARD
   
   
 * REPORTED COMPONENT ID
   5725C9500
   
   
 * REPORTED RELEASE
   856
   
   
 * STATUS
   CLOSED DOC
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt / Xsystem
   
   
 * SUBMITTED DATE
   2016-02-16
   
   
 * CLOSED DATE
   2016-03-28
   
   
 * LAST MODIFIED DATE
   2016-03-28
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION

APPLICABLE COMPONENT LEVELS