Title: IBM Using regular expressions in the WS-Proxy Local Endpoint Handler URI on the IBM WebSphere DataPower SOA Appliance. - United States

Text:
wsp; ws-proxy; ws proxy; web service proxy; No WS-Proxy service endpoints matched request; wildcard; wild card; reqular expression; datapower; 9004; 9235; 9003; dWAnswers TECHNOTE (FAQ)

QUESTION
 I want to configure the Web Service Proxy (WS-Proxy) Local Endpoint Handler URI to match on incoming URIs based on some regular expression. Is this posible?

For example:
Configure the Local Endpoint Handler URI with the following match:
/some/uri/to/match/on/query/strings*

so the WS-Proxy clients can send the requests using a URI similar to the following:
/some/uri/to/match/on/query/string?name=value 

ANSWER
Note: The information contained in this document is being moved to developerWorks Answers located here [https://developer.ibm.com/answers/questions/22088/using-regular-expressions-in-the-ws-proxy-local-endpoint-handler-uri-on-datapower/]. [https://developer.ibm.com/answers/questions/20646/how-do-i-configure-the-datapower-appliance-to-forward-outgoing-requests-to-an-http-proxy-server/]The new format will allow you to ask additional questions of the community to better understand the information. This technote will be archived at some point in the near future. Please bookmark the new location.




It is currently not possible to configure the WS-Proxy Front-side (Local Endpoint) Handler URI to match on the client's or incoming URI using a regular expression. That is, when the WS-Proxy Front-side Handler URI is specified, the URI value is fixed and therefore requires the incoming (client) URI to match exactly as specified. Any other URI used by the client will result in the following error message: 
source-http (FSH-HTTP): No WS-Proxy service endpoints matched request. 

To work around this issue, you may want to see if putting a Multi-Protocol Gateway (MPGW) service in front of the WS-Proxy is a viable approach in your environment. The clients can then send the requests to the MPGW using the expected URIs and then the MPGW can process the client's URI before forwarding the request to the WS-Proxy. 

The MPGW can manipulate the incoming client URI by use of a "URL Rewrite Policy" or by setting a new URI via the " var://service/URI" variable in a custom stylesheet. The "URL Rewrite Policy" can be used to rewrite the entire URL or a portion of a URL. 

For additional information on the "URL Rewrite Policy" and " var://service/URI" variable, refer to the Multi-Protocol Gateway Developers Guide available in the DataPower Knowledge Center [http://www-01.ibm.com/support/knowledgecenter/SS9H2Y/welcome]