Title: IBM PI83585: ERRORS WHEN SHUTTING DOWN CICS WITH JVM SERVER STILL RUNNING WORKLOAD - United States

Text:
z/os  A FIX IS AVAILABLE
Obtain the fix for this APAR.


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  If CICS is shut down normally with work
   still running in a JVM server, 0999,
   AKEH and A03 abends can occur.
   
   
    
   
   

LOCAL FIX

PROBLEM SUMMARY
 *  ****************************************************************
   * USERS AFFECTED: All CICS users.                              *
   ****************************************************************
   * PROBLEM DESCRIPTION: If CICS is shut down normally with work *
   *                      still running in a JVM server, 0999,    *
   *                      AKEH and A03 abends can occur.          *
   ****************************************************************
   When CICS is shut down while workload is running in a JVM server
   that does not have an associated CICS task, CICS does not wait
   for this work to complete. Instead it proceeds to quiesce the
   SJ domain, which deletes T8 and TP TCBs.
   This can cause 0999, AKEH and A03 abends and also DFHSJ0005 and
   BPXP018I messages can occur.
   
   Additional keywords: abend0999 abendAKEH abendA03 msgDFHSJ0005
   SJ0005 msgBPXP018I
   
   
    
   
   

PROBLEM CONCLUSION
 *  CICS is changed to wait for all JVMSERVERs to reach the
   DISABLED state before shutting down normally. New message
   DFHTM1786I is issued if JVMSERVERs remain enabled, and
   DFHTM1787I is issued when they all reach the DISABLED state.
   DFHCESD, DFH$CESD and DFH0CESD are updated to PURGE, FORCEPURGE
   and KILL JVMSERVERs as required during shutdown.
   
   The CICS TS Knowledge Center pages:
   https://www.ibm.com/support/knowledgecenter/SSGMCP_5.3.0/
   com.ibm.cics.ts.messages.doc/topics/dfhg4_dfhtm.html [https://www.ibm.com/support/knowledgecenter/SSGMCP_5.3.0/com.ibm.cics.ts.messages.doc/topics/dfhg4_dfhtm.html]
   https://www.ibm.com/support/knowledgecenter/SSGMCP_5.4.0/
   reference/messages/cics-messages/dfhg4_dfhtm.html [https://www.ibm.com/support/knowledgecenter/SSGMCP_5.4.0/reference/messages/cics-messages/dfhg4_dfhtm.html]
   will be updated with new messages as follows:
   
   DFHTM1786 date time applid CICS shutdown cannot complete because
   some JVMSERVERs have not been disabled.
   
   Explanation
   This message is issued during shutdown of the CICS region and
   indicates that one or more JVMSERVERs are still active, and are
   delaying the successful termination of CICS.
   
   System action
   CICS shutdown waits until the active JVMSERVER resources are
   successfully disabled.
   If the default shutdown transaction (CESD) is active, it
   attempts, after a delay, to purge all JVMSERVERs. This usually
   leads to a successful termination of CICS within a few minutes
   without operator intervention.
   
   User response
   If the default shutdown transaction (CESD) is not active,
   determine which JVMSERVER resources are still enabled using the
   CEMT INQUIRE JVMSERVER command, and take whatever steps are
   necessary to disable them.
   
   Module: DFHSTP
   Message inserts:
   1. date
   2. time
   3. applid
   
   Destination: Console
   
   DFHTM1787 date time applid All JVMSERVERs have been successfully
   disabled.
   
   Explanation
   This message is issued during shutdown of the CICS region after
   successful termination of any active JVMSERVER resources which
   had previously prevented termination.
   
   System action
   CICS shutdown continues normally.
   
   User response
   None.
   
   Module: DFHSTP
   Message inserts:
   1. date
   2. time
   3. applid
   
   Destination: Console
   
   The CICS TS Knowledge Center pages:
   https://www.ibm.com/support/knowledgecenter/SSGMCP_5.3.0/
   com.ibm.cics.ts.recrestart.doc/topics/dfht2c0040.html [https://www.ibm.com/support/knowledgecenter/SSGMCP_5.3.0/com.ibm.cics.ts.recrestart.doc/topics/dfht2c0040.html]
   https://www.ibm.com/support/knowledgecenter/SSGMCP_5.3.0/
   com.ibm.cics.ts.recrestart.doc/topics/dfht25w.html [https://www.ibm.com/support/knowledgecenter/SSGMCP_5.3.0/com.ibm.cics.ts.recrestart.doc/topics/dfht25w.html]
   https://www.ibm.com/support/knowledgecenter/SSGMCP_5.4.0/
   administering/recovery/dfht2c0040.html [https://www.ibm.com/support/knowledgecenter/SSGMCP_5.4.0/administering/recovery/dfht2c0040.html]
   https://www.ibm.com/support/knowledgecenter/SSGMCP_5.4.0/
   administering/recovery/dfht25w.html [https://www.ibm.com/support/knowledgecenter/SSGMCP_5.4.0/administering/recovery/dfht25w.html]
   will be updated to describe the actions CICS takes to shutdown
   JVMSERVERs.
   
   The CICS TS Knowledge Center pages:
   https://www.ibm.com/support/knowledgecenter/SSGMCP_5.3.0/
   com.ibm.cics.ts.doc/dfha6/topics/dfha69f.html [https://www.ibm.com/support/knowledgecenter/SSGMCP_5.3.0/com.ibm.cics.ts.doc/dfha6/topics/dfha69f.html]
   https://www.ibm.com/support/knowledgecenter/SSGMCP_5.3.0/
   com.ibm.cics.ts.doc/dfha6/topics/dfha609.html [https://www.ibm.com/support/knowledgecenter/SSGMCP_5.3.0/com.ibm.cics.ts.doc/dfha6/topics/dfha609.html]
   https://www.ibm.com/support/knowledgecenter/SSGMCP_5.4.0/
   reference/utilities/dfha69f.html [https://www.ibm.com/support/knowledgecenter/SSGMCP_5.4.0/reference/utilities/dfha69f.html]
   will be updated to describe the actions taken by DFHCESD for
   JVMSERVERs.
   
   
    
   
   

TEMPORARY FIX

COMMENTS
 *  Ã—**** PE18/01/15 FIX IN ERROR. SEE APAR PI92451 [http://www-01.ibm.com/support/docview.wss?uid=swg1PI92451]  FOR DESCRIPTION
   
   
    
   
   

APAR INFORMATION
 * APAR NUMBER
   PI83585
   
   
 * REPORTED COMPONENT NAME
   CICS TS Z/OS V5
   
   
 * REPORTED COMPONENT ID
   5655Y0400
   
   
 * REPORTED RELEASE
   000
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt / Xsystem
   
   
 * SUBMITTED DATE
   2017-06-26
   
   
 * CLOSED DATE
   2017-12-05
   
   
 * LAST MODIFIED DATE
   2018-02-08
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
    UI52394 UI52395 UI52396 UI52397 UI52398 UI52399 UI52400 UI52401
   UI52402 UI52403
   
   

MODULES/MACROS
 *  DFH$CESD DFH0CESD DFHAPJVM DFHAPLJP DFHAXIS2 DFHCAL64 DFHCDJNI
   DFHCDK64 DFHCESD  DFHCESDP DFHDSIT  DFHKETIX DFHMETMC DFHMETME
   DFHMETMK DFHSJBD  DFHSJDM  DFHSJDS  DFHSJDUF DFHSJIN  DFHSJIS
   DFHSJJS  DFHSJL   DFHSJNT  DFHSJPTI DFHSJRE  DFHSJRL  DFHSJRM
   DFHSJSA  DFHSJSC  DFHSJSM  DFHSJSR  DFHSJST  DFHSJTE  DFHSJTH
   DFHSJTRI DFHSJWL  DFHSJXM  DFHSTP   DFJ@H356 DFJ@H360 DFJ@H427
   DFJ@H467 DFJ@H468 DFJDTCOE DFJOUTRE DFJWLPPL
   
   
    
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   CICS TS Z/OS V5
   
   
 * FIXED COMPONENT ID
   5655Y0400
   
   

APPLICABLE COMPONENT LEVELS
 * R000 PSY UI52394 [HTTPS://WWW14.SOFTWARE.IBM.COM/WEBAPP/SET2/ORDERMEDIA/SHOPCART?PTFS=UI52394]
   UP17/12/06 P F712
   
   
 * R001 PSY UI52396 [HTTPS://WWW14.SOFTWARE.IBM.COM/WEBAPP/SET2/ORDERMEDIA/SHOPCART?PTFS=UI52396]
   UP17/12/06 P F712
   
   
 * R002 PSY UI52397 [HTTPS://WWW14.SOFTWARE.IBM.COM/WEBAPP/SET2/ORDERMEDIA/SHOPCART?PTFS=UI52397]
   UP17/12/06 P F712
   
   
 * R003 PSY UI52398 [HTTPS://WWW14.SOFTWARE.IBM.COM/WEBAPP/SET2/ORDERMEDIA/SHOPCART?PTFS=UI52398]
   UP17/12/06 P F712
   
   
 * R00D PSY UI52395 [HTTPS://WWW14.SOFTWARE.IBM.COM/WEBAPP/SET2/ORDERMEDIA/SHOPCART?PTFS=UI52395]
   UP18/01/03 P F712
   
   
 * R100 PSY UI52399 [HTTPS://WWW14.SOFTWARE.IBM.COM/WEBAPP/SET2/ORDERMEDIA/SHOPCART?PTFS=UI52399]
   UP17/12/07 P F712
   
   
 * R101 PSY UI52401 [HTTPS://WWW14.SOFTWARE.IBM.COM/WEBAPP/SET2/ORDERMEDIA/SHOPCART?PTFS=UI52401]
   UP17/12/07 P F712
   
   
 * R102 PSY UI52402 [HTTPS://WWW14.SOFTWARE.IBM.COM/WEBAPP/SET2/ORDERMEDIA/SHOPCART?PTFS=UI52402]
   UP17/12/07 P F712
   
   
 * R103 PSY UI52403 [HTTPS://WWW14.SOFTWARE.IBM.COM/WEBAPP/SET2/ORDERMEDIA/SHOPCART?PTFS=UI52403]
   UP18/01/03 P F712
   
   
 * R10D PSY UI52400 [HTTPS://WWW14.SOFTWARE.IBM.COM/WEBAPP/SET2/ORDERMEDIA/SHOPCART?PTFS=UI52400]
   UP18/01/03 P F712
   
   

FIX IS AVAILABLE
 * SELECT THE PTF APPROPRIATE FOR YOUR COMPONENT LEVEL. YOU WILL BE REQUIRED TO SIGN IN. DISTRIBUTION ON PHYSICAL MEDIA IS NOT AVAILABLE IN ALL COUNTRIES.