Title: IBM Applying a Fixpack to Tivoli Dynamic Workload Console fails - United States

Text:
TIPL2; TIPL2INST; DEL2; FP3 ; fail ; upgrade; TDWC; Tivoli Dynamic Workload Console; TIP; invalid; locatonj; based; not found TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 Applying a Fixpack (FP3 in this case) to Tivoli Dynamic Workload Console (TDWC) 8.6 failed with the error listed below. 

SYMPTOM
The upgrade fails and the TIPFPInstaller-00.log contains errors like these: 

Setting IAGLOBAL_COI_INVENTORY_STATUS=FAILED 
Aborting installer: ${IAGLOBAL_INVALID_TIP22_LOCATION_BASED_NOT_FOUND}
...
Exiting with exit code: -10


The following error can be found in the tdwcinstall.log: 

The following error occurred while executing this line:
/opt/depot/vendors/Tivoli/TWS/TWS86/TDWC86/patches/FP0003/WEBUI/LINUX_X64/xml/commonTargets.xml:2017: 

ERROR: Tivoli Integrated Portal Update Failed.


CAUSE
Deployment Engine (DE) registry got somehow corrupted and does not contain the necessary entries for Tivoli Integrated Portal (TIP). 


DIAGNOSING THE PROBLEM
Check the content of the listIU entries, you may find only entries for DE listed, but none for TIP: 

/usr/ibm/common/acsi/bin/listIU.sh

IU UUID: DDCE934782398B3E81431666515AC8B5 Name: DE Extensions Interfaces CLI Version: 1.4.0.16 
IU UUID: C37109911C8A11D98E1700061BDE7AEA Name: Deployment Engine Version: 1.4.0.16 
IU RootIU UUID: D94240D11C8B11D99F2D00061BDE7AEA Name: Install IU Version: 1.4.0.16 

Please note: 
The TDWC install process does not add any entries for the product to the DE registry.


RESOLVING THE PROBLEM
1). Restore the two file systems listed below from a backup dated prior to the corruption. (It is advised to take a backup of these current directories prior to restore) . 

/usr/ibm/common/acsi
/var/ibm/common/acsi 

 

2). Then run the listIU command again and double-check. if you see entries for TIP like these: 

An example of correct entries would look like this (with other product/versions may be present as well): 

[root@test bin]# ./listIU.sh 
IU UUID: 5FFE79F918DF3BA0D67511FD3F7C358E Name: SIU-TIPCore Version: 2.2.0.7 
IU UUID: DDCE934782398B3E81431666515AC8B5 Name: DE Extensions Interfaces CLI Version: 1.4.0.16 
IU UUID: C37109911C8A11D98E1700061BDE7AEA Name: Deployment Engine Version: 1.4.0.16 
IU UUID: 5FFE79F918DF3BA0D67511FD3F7C358E Name: SIU-TIPCore Version: 2.2.0.9 
IU UUID: 5FFE79F918DF3BA0D67511FD3F7C358E Name: SIU-TIPCore Version: 2.2.0.0 
IU RootIU UUID: 2ADC4A33F09F4E85AD27963E850290C3 Name: TIPCore Version: 2.2.0.0 
IU RootIU UUID: 2ADC4A33F09F4E85AD27963E850290C3 Name: TIPCore Version: 2.2.0.7 
IU RootIU UUID: 2ADC4A33F09F4E85AD27963E850290C3 Name: TIPCore Version: 2.2.0.9 
IU RootIU UUID: D94240D11C8B11D99F2D00061BDE7AEA Name: Install Version: 1.4.0.16 



3). Then try the FP3 upgrade again.