Title: IBM ANS3140E: iSCSI mount connection to iSCSI targets failed - United States

Text:
Spectrum; Protect; TDP; VE; TSM; Tivoli; storage; manager TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 When mounting the backup of a Linux VM using the 'mount' option in the web GUI, this mount fails with ANS3140E. 

SYMPTOM
The mount of the backup from the Virtual Machine is failing on the Linux Mount Proxy Node while the iSCSI initiator is created correctly on the Windows Mount Proxy Node.


CAUSE
Only 32 bit iSCSI packages are installed on the Linux Mount Proxy Node.

ENVIRONMENT
Tivoli Storage Manager / IBM Spectrum Protect for Virtual Environments - Data Protection for VMware, using a Mount Proxy Node pair for the restore of a Linux VM.

DIAGNOSING THE PROBLEM
Monitoring the CPU usage on the Linux Mount Proxy Node will show high CPU usage (up to 100%) for the iSCSI process when trying to log in to the iSCSI target. The iSCSI mount process seems to hang.



[root@proxynode ~]# service iscsid status
iscsid (pid xxxxx) is running...

[root@proxynode ~]# iscsiadm -m discovery -t sendtargets -p <target host name>:3260
aaa.bbb.ccc.ddd:3260,1 tsmve

[root@proxynode ~]# iscsiadm -m discovery -t sendtargets -p <target host name>:3260 --login
aaa.bbb.ccc.ddd:3260,1 tsmve
Logging in to [iface: default, target: tsmve, portal: aaa.bbb.ccc.ddd,3260]

** Note: At this point, cpu usage is going to 100% and the login seems to hang . The login process can be cancelled using CTRL-C

^Ciscsiadm: caught SIGINT, exiting...



RESOLVING THE PROBLEM
Verify if the 64 bit iSCSI packages are installed on the Linux Mount Proxy host. 

On RedHat, this can be done using yum. Check the output for the x86_64 package:

[root@proxynode ~]# yum list iscsi*
Loaded plugins: product-id, refresh-packagekit, rhnplugin, subscription-manager
This system is receiving updates from RHN Classic or RHN Satellite.
Installed Packages
iscsi-initiator-utils.x86_64 6.2.0.873-13.el6 @rhel-x86_64-server-6
Available Packages
iscsi-initiator-utils.i686 6.2.0.872-10.el6 rhel-x86_64-server-6
iscsi-initiator-utils.x86_64 6.2.0.873-14.el6 rhel-x86_64-server-6
[root@igstsm20016 ~]#


If the 64 bit package isn't installed, install the missing packages using:

[root@proxynode ~]# yum install local iscsi-initiator-utils.x86_64 libdiscid.x86_64





Cross reference information Segment Product Component Platform Version Edition Storage Management Tivoli Storage Manager for Virtual Environments