Title: IBM ITCAM4Tx : TEP Situation Event Console shows many MS_Offline <Application_Name>:KT3A events - United States

Text:
71AMCON-PLAN; 71AMCON-CONF; 71AMCON-WV; 71GEN-ITM; 71GEN-TEPWV; 71GEN-TS TECHNOTE (FAQ)

QUESTION
 Why deleting a monitored application in AMCe causes ITM TEP "Situation Event Console" workspace to show MS_Offline <Application Name>:KT3A alert? 

CAUSE
Generally, if the AMC agent (t3) is stopped, all the 'KT3A' managed systems status become 'N' (means MS_Offline will trigger) a few minutes after. 

- If you use the TEP AMC editor and !delete! one application corresponding to your 'kt3a' entry, its associated managed system status becomes 'N' a few minutes after as well. That's normal behaviour 

Remark: If you delete the profile associated to this application, the 'kt3a' managed systems status takes much longer to change.


ANSWER
1) Example of events as seen in TIP GUI console : 

[/support/docview.wss?uid=swg21976697&aid=1] [/support/docview.wss?uid=swg21976697&aid=1]


 

This above symptom is linked to the situation named "MS_OFFLINE" under "All Managed Systems" situation group; 

if you want to !avoid! getting such alert, then consider modifying its current default Formula value from :

( #'INODESTS.O4ONLINE' == *OFFLINE AND #'INODESTS.ONLINE' != 'FA')

to :

( #'INODESTS.O4ONLINE' == *OFFLINE AND #'INODESTS.ONLINE' != 'FA AND
SCAN(#INODESTS.ORIGINNODE) !=':KT3A')

This should exclude these origin nodes *:KT3A from sending alerts when becoming offline. 

 

 

You can do the same thing if you want to exclude MS_OFFLINE alerts from 'KT3S' managed system with the formula :

( #'INODESTS.O4ONLINE' == *OFFLINE AND #'INODESTS.ONLINE' != 'FA' AND SCAN(#'INODESTS.NODE') != ':KT3')


2) Now, if the MS-Offline alert is generated with a source = <agent node>:T3, as seen below, it's really the AMC t3 agent itself that is
detected as being offline. And this is normally something that you would like to report an alert for...
[/support/docview.wss?uid=swg21976697&aid=2] [/support/docview.wss?uid=swg21976697&aid=2] 
example : as seen here, 'PYCCTNSAPP'' system has the T3 agent reported as offline.
What is incorrect in the above example is that there are 3 AMC (t3) agents installed in this ITM environment, as seen with the sources :
- PYCCTNSAPP:T3
- PYCCTNSDB:T3
- PYCCTNSAV:T3

This is NOT a valid configuration. With ITCAM for Transactions, only ONE AMC (t3) agent is supported per ITM environment. 
Here we have 2 "extra" AMC T3 agents that should be uninstalled. This should avoid getting many MS_Offline alerts from several "<agent>:T3" sources.

Complementary info regarding MS_Offline situation can be found on this APM blog link :
https://www.ibm.com/developerworks/community/blogs/0587adbc-8477-431f-8c68-9226adea11ed/entry/itcamft_how2_offline_amc_subnodes?lang=en [https://www.ibm.com/developerworks/community/blogs/0587adbc-8477-431f-8c68-9226adea11ed/entry/itcamft_how2_offline_amc_subnodes?lang=en]



PRODUCT ALIAS/SYNONYM
 itcam itcam4tx tep tip itcamfortransactions itcam4trans