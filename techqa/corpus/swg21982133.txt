Title: IBM CSPA091E Secure+ session attempted with non-Secure+ - United States

Text:
CSPA091E XIPT016I XIPT008I XSMG623I TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 Process initiated from Connect:Direct for z/OS (CDZ) to Connect:Direct for UNIX (CDU) fails with a CSPA091E - Secure+ session attempted with non-Secure+ node. 

SYMPTOM
SVTM310I SESSION (004) NOT ESTABLISHED WITH SNODE=UNIXVL15NDM
SVTM055I SESSION (004) ESTABLISHED WITH SNODE=UNIXVL15NDM
CSPA091E Secure+ session attempted with non-Secure+ node
SVTM105I PNAME=DONDMDEX, PNUM= 71,257 MOVED TO Q=HOLD , QSTATUS=HE
SVTM056I SESSION (004) TERMINATED WITH SNODE=UNIXVL15NDM 

Further research shows that the Unix node was experiencing the following:

TCP lost the connection. System error is Broken pipe. Message ID XIPT016I, rc=16, fdbk=0.
SSL handshake failure, reason=Handshake failure, GSK codes (init/validate) are - GSK_ERROR_SOCKET_CLOSED / GSK_OK, error strings are - The partner closed
TCP write failed. System error is Success. 
Message ID XIPT008I, rc=8, fdbk=0.
The send response operation failed. Message ID XSMG623I, rc=8, fdbk=8.


DIAGNOSING THE PROBLEM
Normally the CSPA091E message means exactly what it says. The PNODE attempts to establish a session with a node where the SNODE does not have Secure+ enabled for the session. But in this case there had been successful session establishment before and after this process encountered the CSPA091E error.

A review of the CDU logs provided several messages that indicate that there was a loss of connectivity seen by the Linux node. Once this occurs, all bets are off on trying to get anything else going. Then they received the XIPT008I that means that it cannot send a response of the failure to the trading partner and the XSMG623I that indicates that you had a problem writing to the file. The XIPT008I and XSMG623I are a result of the XIPT016I error. 

The other thing to note is the text GSK_ERROR_SOCKET_CLOSED.
This message usually occurs when there is a problem with the initial SSL handshake. This situation can return the CSPA091E error because Secure+ thinks that the other node is not Secure+ enabled.



RESOLVING THE PROBLEM
Further review of the issue on the Unix node is needed to attempt to determine if there is a problem there or not. In this instance it appears that there was some sort of error in the network that failed the session on the Unix side. Because of the failure on the Unix node, Connect:Direct Secure+ saw this as a situation where the other node did not have Secure+ enabled.

In most cases the only thing that you can do is flush the process from the queue and resubmit it. It is unknown as to what the cause of the error is but every retry of the process gets the same error.

 



Cross reference information Segment Product Component Platform Version Edition Commerce Sterling Connect:Direct for UNIX AIX, HP-UX, Linux, Solaris 4.2, 4.1, 4.0