Title: IBM PK66077: JAVA.SQL.SQLEXCEPTION WHEN INITIALIZING THE UDDI SERVLET - United States

Text:
 SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  The UDDI v3 servlet of WebSphere Application Server makes the
   following query when it is initializing:
   "select count(1) from (select count(1) from
   IBMUDS30.UDDIDBSCHEMAVER intersect select count(1) from
   IBMUDS30.UDDIDBSCHEMAVER) as temp"
   .
     Using Oracle as the persistent store for UDDI, this query
   causes this java.sql.SQLException.
   [2/28/08 14:40:28:933 GMT] 0000002c OracleDataSto >
   findMappingClass for : Entry
   java.sql.SQLException: ORA-00933: SQL
   command not properly ended
     at oracle.jdbc.driver.DatabaseError.throwSqlException
   (DatabaseError.java:125)
     at oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.
   java:316)
     at oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.
   java:282)
     at oracle.jdbc.driver.T4C8Oall.receive(T4C8Oall.
   java:639)
     at oracle.jdbc.driver.T4CStatement.doOall8(T4CStatement.
   java:113)
     at oracle.jdbc.driver.T4CStatement.execute_for_describe
   (T4CStatement.java:431)
     at oracle.jdbc.driver.OracleStatement.execute_maybe_describe
   (OracleStatement.java:965)
     at oracle.jdbc.driver.T4CStatement.execute_maybe_describe
   (T4CStatement.java:463)
     at oracle.jdbc.driver.OracleStatement.doExecuteWithTimeout
   (OracleStatement.java:1051)
     at oracle.jdbc.driver.OracleStatement.execute(OracleStatement.
   java:1552)
     at com.ibm.ws.rsadapter.jdbc.WSJdbcStatement.pmiExecute
   (WSJdbcStatement.java:1141)
     at com.ibm.ws.rsadapter.jdbc.WSJdbcStatement.execute
   (WSJdbcStatement.java:436)
     at com.ibm.uddi.v3.persistence.jdbc.
   DatabaseFacilitiesPersister.databaseSupportsIntersect
   (DatabaseFacilitiesPersister.java:79)
     at com.ibm.uddi.v3.persistence.jdbc.PersisterControl.
   determineDatabaseSpecificRequirements
   (PersisterControl.java:458)
     at com.ibm.uddi.v3.persistence.jdbc.PersisterControl.
   acquireFromJNDI(PersisterControl.java:128)
     at com.ibm.uddi.v3.policy.NodeManager.txnlInit
   (NodeManager.java:217)
     at com.ibm.uddi.v3.policy.NodeManager.txnlInit
   (NodeManager.java:158)
     at com.ibm.uddi.soap.UDDISoapServlet.init
   (UDDISoapServlet.java:144)
   at com.ibm.ws.cache.servlet.ServletWrapper.init
   (ServletWrapper.java:222)
   .
      The cause of this is the as temp on the SQL statement.
   
   
    
   
   

LOCAL FIX

PROBLEM SUMMARY
 *  ****************************************************************
   * USERS AFFECTED:  IBM WebSphere Application Server V6.0.2     *
   *                  users of Universal Description, Discovery,  *
   *                  and Integration (UDDI) with databases that  *
   *                  support SQL intersection.                   *
   ****************************************************************
   * PROBLEM DESCRIPTION: A java.sql.SQLException is recorded     *
   *                      in the WebSphere Application Server     *
   *                      logs on UDDI startup.                   *
   ****************************************************************
   * RECOMMENDATION:                                              *
   ****************************************************************
   UDDI uses an incorrect SQL intersect statement to identify
   whether a database supports SQL intersection.  This might
   cause UDDI to incorrectly identify a database as not
   supporting intersection and therefore use sub-optimal SQL
   queries.
   
   
    
   
   

PROBLEM CONCLUSION
 *  The statement has been corrected.
   The fix for this APAR is currently targeted for inclusion in
   fix pack 6.0.2.31.  Please refer to the Recommended Updates
   page for delivery information:
   http://www.ibm.com/support/docview.wss?rs=180&uid=swg27004980 [http://www.ibm.com/support/docview.wss?rs=180&uid=swg27004980]
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   PK66077
   
   
 * REPORTED COMPONENT NAME
   WEBSPH APP SERV
   
   
 * REPORTED COMPONENT ID
   5724J0800
   
   
 * REPORTED RELEASE
   60A
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2008-05-14
   
   
 * CLOSED DATE
   2008-07-29
   
   
 * LAST MODIFIED DATE
   2008-07-29
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   WEBSPH APP SERV
   
   
 * FIXED COMPONENT ID
   5724J0800
   
   

APPLICABLE COMPONENT LEVELS
 * R60A PSY
   UP
   
   
 * R60H PSY
   UP
   
   
 * R60I PSY
   UP
   
   
 * R60P PSY
   UP
   
   
 * R60S PSY
   UP
   
   
 * R60W PSY
   UP
   
   
 * R60Z PSY
   UP