Title: IBM IV81420: WHEN TRYING TO IMPORT PRIVATE KEY AN INCORRECT MESSAGE ABOUT VALIDITY OF THE KEY AND ITS PASSWORD IS DISPLAYED - United States

Text:
 SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS DOCUMENTATION ERROR.
    
   
   

ERROR DESCRIPTION
 *  When trying to import a certificate and private key one can get
   a misleading error message that:
   "The private key could not be read with the provided password.
   Ensure that the file and the password are valid." In the
   tema.log there will be a java exception:
   "I SRVE0292I: Servlet Message - [tema]:.[ERROR] Error when
   validating private key password: problem parsing ENCRYPTED
   PRIVATE KEY: java.lang.SecurityException: JCE cannot
   authenticate the provider BC"
   The root cause is related with missing BouncyCastle provider in
   the java.security file.
   
   
    
   
   

LOCAL FIX
 *  In order to mitigate this issue, please follow the below
   procedure:
   
   1. Add the provider in the java.security file stored under:
   LMT_HOME/jre/jre/lib/security/java.security
   
   security.provider.1=com.ibm.jsse2.IBMJSSEProvider2
   security.provider.2=com.ibm.crypto.provider.IBMJCE
   security.provider.3=com.ibm.security.jgss.IBMJGSSProvider
   security.provider.4=com.ibm.security.cert.IBMCertPath
   security.provider.5=com.ibm.security.sasl.IBMSASL
   security.provider.6=com.ibm.xml.crypto.IBMXMLCryptoProvider
   security.provider.7=com.ibm.xml.enc.IBMXMLEncProvider
   security.provider.8=com.ibm.security.jgss.mech.spnego.IBMSPNEGO
   security.provider.9=sun.security.provider.Sun
   security.provider.10=org.bouncycastle.jce.provider.BouncyCastleP
   rovider
   
   2. Make sure that you have the unrestricted java policy files
   used. I think it was introduced within the release where the
   SSO was delivered with ILMT.
   If not, you will need to download it from
   
   https://www14.software.ibm.com/webapp/iwm/web/preLogin.do?source
   =jcesdk [https://www14.software.ibm.com/webapp/iwm/web/preLogin.do?source=jcesdk]
   
   <https://www14.software.ibm.com/webapp/iwm/web/preLogin.do?sourc
   e =jcesdk>
   
   and place them in, assuming they differ from the already
   installed:
   LMT_HOME/jre/jre/lib/security/
   
   before replacement, customer should do a backup of those two
   files:
   local_policy.jar
   US_export_policy.jar
   
   3. Finally copy the bouncycastle jar file library from already
   deployed
   jruby package to the java lib/ext directory
   from:
   LMT_HOME/wlp/usr/servers/server1/apps/tema.war/WEB-INF/gems/gems
   /bouncy-castle-java-1.5.0147/lib/bcprov-jdk15on-147.jar
   to:
   LMT_HOME/jre/jre/lib/ext/bcprov-jdk15on-147.jar
   
   4. Restart the server and re-attempt the import of private key
   and certificate
   
   
    
   
   

PROBLEM SUMMARY
 *  ****************************************************************
   * PROBLEM DESCRIPTION:
   ****************************************************************
   * ERROR DESCRIPTION:
   * When you are importing a certificate in the PEM format and
   * an encrypted private key in the pkcs8 format, the following
   * error is displayed:
   * The private key could not be read with the provided password.
   * Ensure that the file and the password are valid.
   * AFTER FIX:
   * Documentation is updated to contain information that the
   * java.security file must be updated to allow for using
   * encrypted private key in the pkcs8 format.
   ****************************************************************
   * RECOMMENDATION: Refer to updated product documentation for
   * the corrected statement when available.
   ****************************************************************
   
   
    
   
   

PROBLEM CONCLUSION
 *  The fix for this APAR is contained in the product on-line
   documentation (Knowledge Center).
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   IV81420
   
   
 * REPORTED COMPONENT NAME
   LIC METRIC TOOL
   
   
 * REPORTED COMPONENT ID
   5724LMTEM
   
   
 * REPORTED RELEASE
   920
   
   
 * STATUS
   CLOSED DOC
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt / Xsystem
   
   
 * SUBMITTED DATE
   2016-02-12
   
   
 * CLOSED DATE
   2016-04-05
   
   
 * LAST MODIFIED DATE
   2016-04-05
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION

APPLICABLE COMPONENT LEVELS