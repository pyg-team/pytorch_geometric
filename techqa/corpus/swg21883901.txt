Title: IBM DQM gives error 'DPR-ERR-2002' when testing Data Source connection - United States

Text:
Dynamic Query data source connection java memory TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 DQM connection 
gives error when testing Data Source connection:



"DPR-ERR-2002 Unable to execute the request because there were no 
connection to the process available within the configured time limit"


SYMPTOM
Testing of DQM based data sourfce connection fails and Application Server OS process manager (Windows Task Manager) does not show 'java.exe' process for DQM, only 'java.exe' belonging to dispatcher is running. 


CAUSE
JVM Garbage Collection Nursery heap size setting was set to same value as initial/max DQM memory heap and Query Service failed to start as per error.

ENVIRONMENT
Cognos 10.2.1 BI

DIAGNOSING THE PROBLEM
Logfile has following entries:

"-Dorg.dom4j.DocumentFactory.singleton.strategy=org.dom4j.util.PerThreadSingleton, com.cognos.xqebifw.cubingservices.DQServer] with console output: JVMJ9GC019E 
-Xmns too large for -Xmx JVMJ9VM015W Initialization error for library j9gc26(2): Failed to initialize Error: 
Could not create the Java Virtual Machine. Error: A fatal exception has occurred. Program will exit."

"External Report Server process External Process cannot be startedAccept timed out java.net.SocketTimeoutException: Accept timed out at java.net.DualStackPlainSocketImpl.waitForNewConnection(Native Method) at java.net.DualStackPlainSocketImpl.socketAccept"






RESOLVING THE PROBLEM
By default JAVA Garbage Collection memory is set for value '0' and in most cases memory allocation should get determined automatically based on demand.

To fix the problem, adjust JVM Nursery Nursery heap size under "Cognos Administration > System > Disp > Query Service > Properties", use default '0' or set it based on available total JVM memory for Query Service. For example half of total: 2048Mb for JAVA heap / 1024Mb for GC.



RELATED INFORMATION
 Java technology IBM style: Garbage collection policies [http://www.ibm.com/developerworks/library/j-ibmjava2/]
A dozen IBM JVM arguments to cut & paste [https://www.ibm.com/developerworks/community/blogs/timdp/entry/adozentopjvmarguments?lang=en]
IBM SDK Java Technology - Generational Concurrent Garba [http://www-01.ibm.com/support/knowledgecenter/SSYKE2_6.0.0/com.ibm.java.doc.diagnostics.60/diag/understanding/mm_gc_generational.html]
SDK Sample modifying settings on the QueryService JVM H [http://www.ibm.com/support/docview.wss?uid=swg21682454]