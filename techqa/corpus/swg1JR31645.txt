Title: IBM JR31645: PARTICULAR WSDL/XSD SCHEMA CONSTRUCTS CAUSES INCORRECT SOAP MESSAGES TO BE GENERATED. - United States

Text:
  FIXES ARE AVAILABLE
WebSphere Process Server V6.2.0 Fix Pack 1 (V6.2.0.1) [http://www-01.ibm.com/support/docview.wss?uid=swg24022185]
WebSphere Enterprise Service Bus V6.2.0 Fix Pack 1 (6.2.0.1) [http://www-01.ibm.com/support/docview.wss?uid=swg24022868]
WebSphere Enterprise Service Bus V6.2.0 Fix Pack 2 (6.2.0.2) [http://www-01.ibm.com/support/docview.wss?uid=swg24024407]


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  A particular WSDL/XSD schema causes incorrect SOAP
   messages when used with WebService Import and Export
   components.
   
   
   The schema definition has a a complexType that contains a
   messagetype with type from the "soapenc" namespace (
   "http://schemas.xmlsoap.org/soap/encoding/").
   
   
   SAMPLE WSDL SNIPPET:
   <wsdl:message name="retrieveByIDRequest1">
          <wsdl:part name="contactID" type="soapenc:long"/>
      </wsdl:message>
   
   
   SAMPLE SOAP OUTPUT:
           <?xml version="1.0" encoding="UTF-8"?>
   <soapenv:Envelope
    xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"
       xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/
       xmlns:xsd="http://www.w3.org/2001/XMLSchema"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
     <soapenv:Header
   soapenv:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/
   "/>
     <soapenv:Body
   soapenv:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/
   ">
       <p660:retrieveByID xmlns:p660="urn:AxisContactHandler">
         <contactID href="#id0"/>
       </p660:retrieveByID>
      <multiRef
          id="id0"
          soapenc:root="0"
   soapenv:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/
   "xsi:type="soapenc:long"
   xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/">
         12345
         <href xsi:type="xsd:anyURI"/>
         <id xsi:type="xsd:ID"/>
       </multiRef>
     </soapenv:Body>
   </soapenv:Envelope>
   
   
   
   Even when the href/id attributes are not set, the additional
   href and id are generated in the SOAP message as elements.
   
   This APAR will resolve this issue so that correct messages are
   generated.
   
   
    
   
   

LOCAL FIX
 *  avoid using this construct if possible.
   
   
    
   
   

PROBLEM SUMMARY
 *  ****************************************************************
   * USERS AFFECTED: WebSphere Process Server v6.1.2.x and        *
   *                 v6.2.0 users.                                *
   ****************************************************************
   * PROBLEM DESCRIPTION: When WSDL/XSD constructs use soap       *
   *                      encoding data types, WebServices        *
   *                      binding generates incorrect SOAP        *
   *                      request.                                *
   ****************************************************************
   * RECOMMENDATION:                                              *
   ****************************************************************
   HREF and ID attributes that are part of the business object
   are generated as elements in the multi-ref element serialized
   by the SOAP binding. For a WSDL definition containing:
   
   The schema definition has a a complexType that contains a
   messagetype with type from the "soapenc" namespace (
   "http://schemas.xmlsoap.org/soap/encoding/").
   
   
   SAMPLE WSDL SNIPPET:
   <wsdl:message name="retrieveByIDRequest1">
   <wsdl:part name="contactID" type="soapenc:long"/>
   </wsdl:message>
   
   The binding generated SOAP request looks like:
   SAMPLE SOAP OUTPUT:
   <?xml version="1.0" encoding="UTF-8"?>
   <soapenv:Envelope
   xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"
   xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/
   xmlns:xsd="http://www.w3.org/2001/XMLSchema"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
   <soapenv:Header
   soapenv:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/
   "/>
   <soapenv:Body
   soapenv:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/
   ">
   <p660:retrieveByID xmlns:p660="urn:AxisContactHandler">
   <contactID href="#id0"/>
   </p660:retrieveByID>
   <multiRef
   id="id0"
   soapenc:root="0"
   soapenv:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/
   "xsi:type="soapenc:long"
   xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/">
   12345
   <href xsi:type="xsd:anyURI"/>
   <id xsi:type="xsd:ID"/>
   </multiRef>
   </soapenv:Body>
   </soapenv:Envelope>
   
   The href and id elements generated in the multi-ref element
   are incorrect.
   
   
    
   
   

PROBLEM CONCLUSION
 *  Applying this interim fix will resolve the issue.
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   JR31645
   
   
 * REPORTED COMPONENT NAME
   WEB PROC SERVER
   
   
 * REPORTED COMPONENT ID
   5724L0100
   
   
 * REPORTED RELEASE
   610
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2009-01-12
   
   
 * CLOSED DATE
   2009-04-13
   
   
 * LAST MODIFIED DATE
   2009-04-13
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   WEB PROC SERVER
   
   
 * FIXED COMPONENT ID
   5724L0100
   
   

APPLICABLE COMPONENT LEVELS
 * R600 PSN
   UP
   
   
 * R601 PSN
   UP
   
   
 * R602 PSN
   UP
   
   
 * R610 PSN
   UP
   
   
 * R612 PSY
   UP
   
   
 * R620 PSY
   UP