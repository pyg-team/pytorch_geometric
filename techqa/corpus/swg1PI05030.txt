Title: IBM PI05030: DFHFC0999 : CICS NEVER RECONNECTS TO RLS FOLLOWING A DYNAMIC RLS RESTART. - United States

Text:
z/os  A FIX IS AVAILABLE
Obtain the fix for this APAR.


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  A CICS region remains up while the DFSMS RLS server is brought
   down and restarted. Dynamic RLS restart begins but does not
   end.  Access to RLS files from this CICS region remains
   disabled.
   .
   This CICS region issues the following message when dynamic RLS
   restart begins:
   .
   DFHFC0568I CICSPRD1 File control dynamic RLS restart has
   started.
   .
   But this CICS region never issues the message DFHFC0569I saying
   that dynamic RLS restart has ended.  And it never issue the
   message DFHFC0570 saying that RLS access is enabled.
   .
   In this state when there is an attempt to open an RLS file from
   this region, the following message is issued:
   .
   DFHFC0999 CICSPRD1 RLS OPEN of file FILERLS1 failed. RLS access
   is disabled.
   .
   Earlier in the log, this CICS region issued the following
   message:
   .
   DFHFC0001 CICSPRD1 An abend (code 058/AKEX) has occurred at
   offset X'4D7A' in module DFHFCRO.
   .
   
   In the DFHFC0001 dump you can see that this abend058 happened
   while a file ABCDFIL1 was being closed.
   .
   In a dump taken later, you can see that there is a CSFR task
   that is in a FCACWAIT *CTLACB* wait.  This task is waiting for
   all open RLS files to close.  In FC=3 you can find the FC
   Static area.  +3B8 into that is FC_RLS_ACB_CHAIN which is the
   anchor for a chain of open RLS files.  File ABCDFIL1, the file
   involved with the Close that resulted in abend058, is on that
   chain. Because of the abend while closing the file, the file
   will never completely close and CICS will never be able to
   reconnect to RLS.
   
   
   
   
   
   
   Additional Symptom(s) Search Keyword(s): KIXREVDWZ
   
   
    
   
   

LOCAL FIX

PROBLEM SUMMARY
 *  ****************************************************************
   * USERS AFFECTED: All CICS users.                              *
   ****************************************************************
   * PROBLEM DESCRIPTION: CICS will not reconnect to the SMSVSAM  *
   *                      server after an 058 abend during a      *
   *                      close.                                  *
   ****************************************************************
   * RECOMMENDATION:                                              *
   ****************************************************************
   The SMSVSAM server recycles while CICS has files open in RLS
   mode. This causes CICS to attempt to close all the open RLS
   files.
   
   However, if a close abends and drives DFHFCRO's recovery
   routine, subsequent close processing is bypassed leaving
   the file on the open ACB chain. In the case of an 058 abend
   during close processing, the close should be treated as if it
   had worked and the abend can be ignored.
   
   SMSVSAM is automatically restarted, but CICS does not reconnect.
   
   Additional Keywords: AKEX abendAKEX msgDFHFC0001 DFHFC0001
                        FC0001 abend058 abend0D6 0D6 PK92828 [http://www-01.ibm.com/support/docview.wss?uid=swg1PK92828] 0D5
                        FC_RLS_ACB_CHAIN
   
   
    
   
   

PROBLEM CONCLUSION
 *  DFHFCRO's recovery processing has been amended for an 058 or 0D6
   abend to clean up the environment so that the ACB is not left on
   the open chain.
   
   
    
   
   

TEMPORARY FIX
 *  FIX AVAILABLE BY PTF ONLY
   
   
    
   
   

COMMENTS
 *  Å¾**** PE14/01/22 FIX IN ERROR. SEE APAR PI09362 [http://www-01.ibm.com/support/docview.wss?uid=swg1PI09362]  FOR DESCRIPTION
   
   
    
   
   

APAR INFORMATION
 * APAR NUMBER
   PI05030
   
   
 * REPORTED COMPONENT NAME
   CICS TS Z/OS V4
   
   
 * REPORTED COMPONENT ID
   5655S9700
   
   
 * REPORTED RELEASE
   600
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2013-10-29
   
   
 * CLOSED DATE
   2013-11-14
   
   
 * LAST MODIFIED DATE
   2014-01-22
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
    PI05227 [http://www-01.ibm.com/support/docview.wss?uid=swg1PI05227] UI12536 UI12537
   
   

MODULES/MACROS
 *     DFHFCRO
   
   
    
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   CICS TS Z/OS V4
   
   
 * FIXED COMPONENT ID
   5655S9700
   
   

APPLICABLE COMPONENT LEVELS
 * R600 PSY UI12536 [HTTPS://WWW14.SOFTWARE.IBM.COM/WEBAPP/SET2/ORDERMEDIA/SHOPCART?PTFS=UI12536]
   UP13/12/02 P F311
   
   
 * R700 PSY UI12537 [HTTPS://WWW14.SOFTWARE.IBM.COM/WEBAPP/SET2/ORDERMEDIA/SHOPCART?PTFS=UI12537]
   UP13/12/02 P F311
   
   

FIX IS AVAILABLE
 * SELECT THE PTF APPROPRIATE FOR YOUR COMPONENT LEVEL. YOU WILL BE REQUIRED TO SIGN IN. DISTRIBUTION ON PHYSICAL MEDIA IS NOT AVAILABLE IN ALL COUNTRIES.