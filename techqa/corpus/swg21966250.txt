Title: IBM Content Search Services search doesn't find all indexed IBM Content Collector emails - United States

Text:
ICC CSS FileNet AFUI0052E TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 Emails imported into Content Platform Engine 5.2.1 with IBM Content Collector (ICC) for Email are not being properly indexed. The Content Search Services (CSS) graphical user interface does not indicate any problems with the indexing job. 

SYMPTOM
Approximately 50% of the emails index properly. The other 50% display indexing errors when performing the following select statement on the docversion table: 

select count (*) from docversion where INDEX_FAILURE_CODE=1 

1 = "Other" 

 

CSS log error: [2015-07-28] [11:17:43.916] 4 PreparationThread-0 SEVERE DOC: INVALID_CHARACTER_ERR: An invalid or illegal XML character is specified. : {B80BC9EF-F3E2-587A-B923-502289395D37}#{994A5806-8B10-4E94-BDA6-CBD0587A1CD9}#ComplianceArchive#FilteredDir_5723812473378431824; Collection: F:\CSSDATA\DEUGRO_ICC/ICC_Document_20150715134328_0543C27A725F4A37AA22AA3775FC8974; Type: PlainText [com.ibm.afu.icc.shared.tools.LoggingTools: logDoc]
[2015-07-28] [11:17:43.916] 4 PreparationThread-0 SEVERE DOC: Attaching message: 
AFUI0052E The XML representation for document '{B80BC9EF-F3E2-587A-B923-502289395D37}[ComplianceArchive]' could not be created. Contact IBM Software Support. [ERROR: AFUI0052E The XML representation for document '{B80BC9EF-F3E2-587A-B923-502289395D37}[ComplianceArchive]' could not be created.


CAUSE
The error is caused by an invalid character in the constructors.xml file. CSS index and ICC use the constructors.xml file to create the CSS index. 

The constructors.xml file contains custom attributes which are not necessary when creating indices. These custom entries caused emails with attachments to not index. The error An invalid or illegal XML character is specified in the CSS log indicates invalid characters in the constructors.xml file.


ENVIRONMENT
Content Search Services server 5.2.1.2-P8CSS-FP002
ECMTS 5.2.1.2 Build# 4832
ICC 4.0.1-20150216-1349
IBM FileNet CPE P8 5.2.1
WAS 8.5.5 FP5
DB2 10.5 FP4
Mail ServerDomino
Client ICC WebApp, ACCE




DIAGNOSING THE PROBLEM
 

1. Review CSS.log to determine exact indexing error message. 

2. Compare original and custom constructors.xml file.


RESOLVING THE PROBLEM
 

1. Review the constructors.xml file for custom entries. 

2. Make a backup of the constructors.xml file and remove the custom entries. 

3. Re-index to see if errors still occur. If indexing succeeds without errors, make sure you add the following entries for indexing ICC Emails with attachments:
<customConfig name="ICC:ARCHIVEATTRIBUTES">
<options>
<option name="ICCMailboxID">/icc_document/icc_mailbox_id</option>
<option name="ICCExpirationDate">/icc_document/icc_email/@icc_expiration_date</option>
<option name="ICCVaryingFields">/icc_document</option>
<option name="ICCMailboxID">/icc_document/icc_instancefields/icc_instancefield$/@mailboxid</option>
<option name="ICCFolder">/icc_document/icc_instancefields/icc_instancefield$/folder</option>
</options>
</customConfig> 

4. Test indexing again with the ICC Email with attachment entries in the constructors.xml file. 

5. Verify that you do not see any indexing errors. 

6. Verify that the Emails with attachments are being indexed properly by performing a full-text search.

RELATED INFORMATION
 Verifying proper indexing of email [http://www-01.ibm.com/support/knowledgecenter/SSAE9L_4.0.0/com.ibm.content.collector.doc_kc/p8_indexing/t_afu_verify_p8_css_email.html?lang=en]