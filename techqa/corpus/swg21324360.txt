Title: IBM Telelogic Change displays errors which include the text: "java.lang.OutOfMemoryError" - United States

Text:
 TECHNOTE (FAQ)

QUESTION
 Telelogic Change displays errors which include the text: "java.lang.OutOfMemoryError" 

ANSWER


The java.lang.OutOfMemoryError indicates the JRE has run out of memory in the heap that is allocated to it. This has been seen during installation while extracting files from the jar file and also when running reports whose query returns a large number of objects. Typically this will result in error messages like:  *  CsAPI: Throwable Exception: java.lang.OutOfMemoryError: Java heap space 
 *  Stack trace: java.lang.OutOfMemoryError: Java heap space 
 *  HTTP ERROR: 503 Service Unavailable java.lang.OutOfMemoryError 

The solution is to either allocate more memory to the JRE, or to simply scale down the query so it will return fewer objects.  

 Out of the box, Change has a maximum heap size setting (256MB) which should be sufficient to support about 200 active users (each making a request every 5-10 minutes) under normal usage patterns. If the Jetty webserver process exceeds this threshold, performance may degrade and heap errors may be encountered. Telelogic recommends that you periodically check the size of this process, and if it exceeds the maximum heap size threshold, change that threshold to a more appropriate number based on experimentation. (In earlier versions the max heap size was set to 128Mb (-Xmx128m)). 

 

 The following will show how to change the memory allocation for the JRE: 

 

 For UNIX Telelogic Change Servers : 

The memory allocation is set on the command line to java when Jetty is started. Run "java -X" to see available options, then follow the steps below:  1.  Stop Telelogic Change. 
 2.  Edit cs_home/cs_app/bin/jetty.sh. Search for the Java maximum heap size flag, -Xmx<size> (-Xmx256m by default), and increase the number to one more suitable to your needs. 
 3.  Start Telelogic Change. 

 Note the original values may reflect something like: -Xms32m|-Xmx128m, where the -Xms32m is setting the minimum usage to 32megs, and the -Xmx128m is setting the max usage to 128megs. 

 For Windows Telelogic Change Servers : The memory usage is set in the following registry keys where the assumption is made that you have installed into port 8600. If this is not the case, modify the 8600 in the registry pat to reflect the correct value for your installation: 

 

 HKEY_LOCAL_MACHINE\System\ControlSet001\Services\Telelogic Change8600\Parameters 

 HKEY_LOCAL_MACHINE\System\ControlSet002\Services\Telelogic Change8600\Parameters 

 HKEY_LOCAL_MACHINE\System\CurrentControlSet\Services\Telelogic Change8600\Parameters 

 

 

 The following registry entry can be set to specify the minimum and maximum memory usage of the JRE: 

 Simply add the bolded items to the beginning of the Registry key: 

 

 -Xms32m|-Xmx128m|-Djava.class.path=D:\cs40\cs_app\lib\com.mortbay.jetty.jar;D 

 :\cs40\cs_app\lib\com.sun.net.ssl.jar;D:\cs41sp1\cs_app\lib\javax.servlet.jar 

 ;D:\cs40\cs_app\lib\org.apache.jasper.jar;D:\cs40\cs_app\lib\com.microstar.xm 

l.jar|D:\cs40\cs_app\etc\synergy.xml|wrkdir=D:\cs40\cs_app|port=8600 As an alternative to manually editing the registry settings, you can follow these steps:  1.  Run cs_home\cs_app\csservu.bat to stop and uninstall the Telelogic Change service. 
 2.  Edit cs_home\cs_app\csserv.bat. Search for the Java maximum heap size flag, -Xmx<size> (-Xmx256m by default), and increase the number to one more suitable to your needs. 
 3.  Run cs_home\cs_app\csserv.bat to install the Telelogic Change service and then start the service. 

 

 Note: the -Xms32m is setting the minimum usage to 32megs, and the -Xmx128m is setting the max usage to 128megs. These values are not strict and should be set as appropriate for your specific environment. It is possible that the minimum and maximum settings will need to increase substantially depending on your level of usage. 

 

 As memory tuning is different for every customer and every machine, monitoring the memory usage of the machine may lend some insight as to what settings may be necessary for your usage patterns. It may also be beneficial to experiment with the maximum heap size setting in the jetty.sh script to find a setting that works best for you. 

Telelogic Change 4.1, 4.2, 4.3, 4.4, 4.5, 4.6, 4.6.1, 4.7FAQSCM0189AnswerProduct versionPartner ContentInternal ContentCategoryReference I 

HISTORICAL NUMBER
 KB1100