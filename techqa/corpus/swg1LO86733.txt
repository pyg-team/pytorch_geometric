Title: IBM LO86733: LOCK TIME OUT IN SELECTMASTERBINDINGFORUSER.GETONEROW COULD CAUSE TRANSACTION LOG GROWTH. - United States

Text:
 SUBSCRIBE TO THIS APAR
By subscribing, you receive periodic emails alerting you to the status of the APAR, along with a link to the fix after it becomes available. You can track this item individually or track all items by product.

Notify me when this APAR changes.

Notify me when an APAR for this component changes.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  Internally we found that this stack can effect performance and
   cause DB transaction logs to grow while waiting for the lock.
   Stack shown is for DB2, but same is possible on MS SQL Server.
   
   com.lotus.sync.db.PersistenceException:
   com.ibm.db2.jcc.am.SqlTransactionRollbackException: DB2 SQL
   Error: SQLCODE=-911, SQLSTATE=40001, SQLERRMC=68,
   DRIVER=4.13.127 (SQLState: 40001 ErrorCode: -911)
    at
   com.lotus.sync.db.TransactionManager.execute(TransactionManager.
   java:492)
    at
   com.lotus.sync.db.TransactionManager.execute(TransactionManager.
   java:419)
    at
   com.lotus.sync.db.TransactionManagerStatementExecuter.executeSta
   tement(TransactionManagerStatementExecuter.java:31)
    at
   com.lotus.sync.db.AbstractSqlStatement.executeStatement(Abstract
   SqlStatement.java:84)
    at
   com.lotus.sync.db.queries.SelectMasterBindingForUser.getOneRow(S
   electMasterBindingForUser.java:117)
    at
   com.lotus.sync.hadr.HADRUtil.isMonitorStill(HADRUtil.java:74)
    at
   com.lotus.sync.push.NewAPIMonitor.monitor(NewAPIMonitor.java:533
   )
    at
   com.lotus.sync.push.NewAPIMonitor.run(NewAPIMonitor.java:379)
    at
   com.lotus.sync.util.ThreadPoolThread.run(ThreadPoolThread.java:4
   81)
   
   
    
   
   

LOCAL FIX
 *  NA
   
   
    
   
   

PROBLEM SUMMARY
 *  Internal testing found that this code path can cause unecessary
   locking and lock timeouts in the database.  While waiting for
   the timeout to occur, the transaction log may be held open.
   
   
    
   
   

PROBLEM CONCLUSION
 *  The IBM Traveler server has been updated to resolve this
   particular issue with locking during this sql query.
   
   
    
   
   

TEMPORARY FIX
 *  This fix is included in IBM Traveler server 9.0.1.8 and all
   future releases.  For the latest available maintenance please
   see this technote:
   
   http://www.ibm.com/support/docview.wss?uid=swg24019529 [http://www.ibm.com/support/docview.wss?uid=swg24019529]
   
   
    
   
   

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   LO86733
   
   
 * REPORTED COMPONENT NAME
   LOTUS NOTES TRA
   
   
 * REPORTED COMPONENT ID
   5724E6204
   
   
 * REPORTED RELEASE
   901
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2015-10-16
   
   
 * CLOSED DATE
   2015-10-16
   
   
 * LAST MODIFIED DATE
   2015-10-16
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   LOTUS NOTES TRA
   
   
 * FIXED COMPONENT ID
   5724E6204
   
   

APPLICABLE COMPONENT LEVELS
 * R901 PSY
   UP