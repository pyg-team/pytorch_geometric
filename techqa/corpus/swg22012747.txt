Title: IBM Instance credential validation fails during upgrade with CTGRI0001E reported in log - United States

Text:
TSM dsmicfgx ssh connection localhost TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 During IBM Spectrum Protect server upgrade, the DB2 instance credential validation phase fails without a clear error on the console. CTGRI0001E is reported in the install log. 

SYMPTOM
A console install displays the following when validating the instance: 

"An error occurred while verifying the instance. To continue the installation, skip the instance verification. In this case, you must manually recreate the instance after the installation." 

The install log shows:
.validateCredential(349) : An exception occurred during checking credential(RXA) on Linux/Unix..
.validateCredential(351) : CTGRI0001E The application could not establish a connection to 127.0.0.1 .

That usually indicates a ssh problem but a ssh test with user 'root' using the command :
ssh <instance_user_name>@<hostname or FQDN>
displays a successful connection to the DB2 instance user. 


CAUSE
The upgrade program has a problem to validate the DB2 instance password with ssh protocol.


ENVIRONMENT
IBM Spectrum Protect server upgrade on AIX platform. 



DIAGNOSING THE PROBLEM
Check in /var/ibm/InstallationManager/logs directory if the install log displays the error mentioned in the symptom area above. If yes, try to connect to the DB2 instance user from root user by doing: 

 "ssh <instance_user_name>@127.0.0.1"
If that fails that is the reason for the problem. 


RESOLVING THE PROBLEM
Correct the ssh configuration problem that prevents the above ssh command to run. This was observed when the file /etc/ssh/sshd_config file has the option "listenaddress aaa.bbb.ccc.ddd" . This prevents any connection using the address 127.0.0.1.