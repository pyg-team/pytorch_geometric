Title: IBM Infosphere CDC: How to handle txq pointbase database? - United States

Text:
 TECHNOTE (FAQ)

QUESTION
 Why is size of txq pointbase database too big? 

CAUSE
The data is only persisted to this database when all subscription does a controlled shutdown. If the source process crashes, or the subscriptions are shutdown abnormally, there will be no transaction data. so CDC must always be able to go back to the customer database log files. The EarliestBookmarkTracker will return the earliest log position that is still needed for all subscriptions. This is based on the bookmarks that are confirmed on the target, not on what is stored in the transaction queues. The customer should only release log files that are older than the log position returned by EarliestBookmarkTracker. 

The transaction queue database stores all uncommitted transactions for all subscriptions. If all subscriptions are shutdown controlled at the same time, then all uncommitted transaction data will need to be stored in the transaction queue DB at the same time. So the transaction queue database will grow to be as large as the largest amount of uncommitted transaction data for all subs that existed when they were all shutdown. You would not need long running transactions to cause this, you would just need a shutdown of all subs that occurred while every subscription was scraping a particularly busy period in the log. Adding more subscriptions would increase the likelihood of increasing the amount of data to persist in the transaction queue database. So if they are adding subs over time, the transaction queue database could be growing over time as well.



ANSWER
The transaction queue database can always be safely deleted when all subscriptions are running. It can also be safely deleted if the only subs that are not running are subs that were not stopped normally or immediate during last execution, or these subs will be refreshed before mirroring them again, or you don't care about these subs (all there tables are currently parked or the sub is never used). 



PRODUCT ALIAS/SYNONYM
 Transaction Queue Database
Disk Space