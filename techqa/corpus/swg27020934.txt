Title: IBM Ask the Experts Replay: WebSphere MQ Failover on Distributed Platforms - United States

Text:
wste_webcast; WSTE; Support Technical Exchange; education; presentation; webcast; STEwebcastDocument; Failover; HA Clustering; multi-instance WEBCAST

ABSTRACT
 This Ask the Experts session addresses questions concerning failover options and features available for WebSphere MQ on distributed platforms. This includes high availability clustering as well as the new multi-instance queue manager feature included with WebSphere MQ version 7.0.1. 

CONTENT
Ask the Experts sessions are conducted in a question and answer format. The table below provides a time index (minutes:seconds) to the recording and describes the questions or topics discussed. You can fast forward to any question using the time index, a table containing the panel of experts is also included.


To play or download the audio of this Ask the Experts session, see the Audio Section of this document.

See the Related Information Section of this document for a list of documents referenced during the presentation.








Ask the Experts session 
30 March 2011 - 11:00 a.m. - 12:00 p.m. EDT 

Time Questions asked 00:00 Silence 00:00 General introduction 03:47 Technical introduction 04:23 What failover options are available for WebSphere MQ? 05:40 How should I choose between multi-instance queue managers and HA clusters? 08:02 Why was MC91 withdrawn and what replaces it? 10:24 What should I consider when setting up a multi-instance queue manager within a cluster in a mixed MQ version 6 & 7 environment? 14:57 How do you migrate or update MQ in a multi-instance or HA environment? 16:23 If we are looking for to share/run WMQ (HUB) on multiple platforms using the new capabilities added in MQV7 (i.e. MultiInstances), is it necessary to recommend/use an external NFS storage device, in order to meet the customer expectations in terms of HA? And if yes, how do we integrate them? 18:38 What needs to be changed within Windows registry to allow for the proper startup of WMQ Services on a “backup server” when manually failing over outside the control of something like MSCS? Given a configuration of two servers (A & B) both having WMQ installed and having used the hamvmqm utility to move the qmgr to a “common” drive that is only mapped on the “active” server - what needs to happen on server B within the registry to ensure that WMQ services are start up automatically? 21:30 We are running SUSE 10.3 on a distributed platform. Is SUSE 11.x required to support multi-instance? Also, is it correct to assume that it doesn't work with NSF3 due to the auto-locking capabilities enabled by NFS4? 23:11 I have an iSeries, MQ version 7, multi-instance queue manager wishing to join cluster, where the full repository is mainframe, MQ version 6. The current security policy prevents the use of default port (1414). Our conclusion at the moment is that this isn't possible to configure (making use of the auto switching). Our current plan is to set the cluster receiver channel CONNAME to be the DNS(port) of the system where the queue manager is running. E.g. if the iASP is active on PROD, then I will set the CONNAME of the cluster receiver to "prod.hsbc.com(99999)". Then, when the iASP is varied onto the CONT iSeries, we will set the CONNAME to "cont.hsbc.com(99999)", & perform a "refresh cluster" (we have found that the refresh is required, please advise if you think that this is not the case?). Can you please provide some inputs on the scenario above? 26:33 Is using multiple IP addresses in CONNAME to connect to remote queue manager supported when they aren't configured as multi-instance queue managers? 27:38 Does CONNAME support multiple addresses in WebSphere MQ for z/OS? 28:35 What kind of events causes a client connection switch from an active IP address to another? 29:59 I am running V6 queue managers on HP-UX. HA configuration was done using the MC91 support pack. We use the Veritas (VCS) agent that is provided in MC91. I understand that MC91 is fully embedded in MQ V7 and that it has much more than MC91, but how do I migrate my existing V6 queue managers to V7? Also, optionally, is it possible to continue using the existing configuration of MC91 but still upgrade to V7? 31:08 In the scenario where I create brand new queue managers in V7 – let us say I create them as multi-instance queue managers using the new flags as documented. My data disk is different than /var. I understand MQ will monitor and offline the queue managers as necessary. In case of failover, how will MQ bring the virtual IP and disk online on the second node? Will it have enough permissions to do that? Or is it necessary to give root authority to the MQM id? 32:51 We are currently migrating from V6 to V7 and one of the issues that came up was relative addressing for XSLT and schemas. We had some misunderstanding about the use of shared storage and working storage. We are concerned about where WebSphere Message Broker in a multi-instance environment will look for the XSLT? 35:50 I have encountered a couple of situations with customers where we have 2 queue managers communicating over standard MCH channels - sender and receive pairs. We are trying to establish a HA capacity between them (this is between one company and an external partner). Is there a way to configure the channels and the transmit queue to allow one queue manager to automatically switch to an alternate queue manager at a different geographic location to continue the message flow if say the partner QM fails? 38:28 I have a question related to slide 35, does the client connection switch only work for both MQ managers, or can the client using a channel definition table, where there are multiple available candidates for connecting to, connect the failing one where it is connected to and switch it to another one on the list from the CCDT. 39:50 In relation to WebSphere Message Broker, if we are using multi-instance and We have services on Oracle databases now, do we lose our resources when we failover to the JDBC resources? 40:54 We are currently running WebSphere MQ V6 on windows. Recently we tried to do a recovery test where we rebuilt the MQ from scratch and re-created it again. We were able to recover all the queue manager objects via script, but one thing that we went into was that in Windows, we discovered that there are some configuration settings which are embedded in the registry itself, such as maxchannel. We have done some research and found that we cannot modify the maxchannel setting via script. My question is are there any tricks or registry settings that we should be concerned about when we perform recovery like this? 42:57 We are running in a Windows environment and I just wanted to know if there is any workaround to making multi-instance queue managers work if we cannot have domain controllers. 44:49 When we use multi-instance queue managers and when they failover from the active instance to the standby instance, how should I let the application know that the queue manager has is running on the standby instance? 47:23 How long does it take for the queue manager to failover from the primary instance to the standby instance, and what factors affect this time? 50:27 Is it possible to use queue managers in an active-active scenario instead of an an active-standby scenario? 53:01 We currently have a single system running on AIX that hosts both the MQ manager and the application together. We want to separate the MQ manager by moving it to a new Linux system and keep the application on the AIX system. What is your recommended way to go about doing this if the goal is to maximize performance? 55:47 I set my Message Broker up to run as a service on MQ, then run it as an MQM user. If I want to run it as an MQSI user, is there any documentation on how to modify the start/stop script to do that? 58:15 I have a question on a multi-instance set up. Let's say we have two queue managers configured as multi-instance, one on machine #1, and the other on machine #2. If we don't want these machines to stay idle all the time, how do we implement a start-up/shutdown script to automatically bring the idle up or to shut it down? 59:52 We are planning to upgrade our MQ from V6 to V7. We are using IBM MC91 agents and are planning to replace them. Are there any special considerations we should be aware of? 62:29 Could you please repeat the options of choosing between when to use HA and Multi-instance? 63:56 Closing remarks 64:27 End of Call 
Panel of Experts: Barry Robbins Team Lead, WebSphere MQ Distributed Support Snezhana Johnson WebSphere MQ Distributed Support Tameka Woody WebSphere MQ System i - Windows Support Andrew Schofield Senior Software Engineer, WebSphere MQ Jason Edmeades Service Architect, WebSphere MQ Jonathan Rumsey Lead System i Developer, WebSphere MQ 

PRESENTATION
[http://www.ibm.com/i/v16/icons/weblecture.gif]WSTE-03302011-AskTheExperts-WebSphereMQFailoverDistributedPlatforms-Robbins.pdf [/support/docview.wss?uid=swg27020934&aid=2] WSTE-03302011-AskTheExperts-WebSphereMQFailoverDistributedPlatforms-Robbins.pdf [/support/docview.wss?uid=swg27020934&aid=1]

Get Adobe Reader [http://www.adobe.com/products/acrobat/readstep2.html] to view PDF

AUDIO
[http://www.ibm.com/i/v16/icons/aud.gif]To replay the recording of this 64 minutes conference call, click on Download Audio [http://public.dhe.ibm.com/software/websphere/techexchange/Mar-30-2011-Robbins.mp3] (7.0MB - audio in MP3 format). Right-click and select Save As to store the file on your local computer for later playback. Remember that you can fast forward to any question using the time index.

RELATED INFORMATION
 WebSphere Support Technical Exchange [http://www.ibm.com/software/websphere/webcast]




Cross reference information Segment Product Component Platform Version Edition Business Integration WebSphere MQ Recovery PRODUCT ALIAS/SYNONYM
 WMQ WebSphere MQ