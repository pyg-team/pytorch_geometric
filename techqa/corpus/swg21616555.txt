Title: IBM Unable to initialize object store for CSS - United States

Text:
Index area; CSS; Indexrequest TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 We created an Index Area in IBM FileNet Enterprise Manager (FEM) for IBM FileNet Content Search Services (CSS) for an object store, and go ahead to enable CBR for the object store, but it throws an error. 

SYMPTOM
The error message reads:
2012-10-16T00:17:22.443Z 245A245A CBR FNRCD0009E - ERROR Can't initalize object store cmos01 for CBR, attempt #2
com.filenet.api.exception.EngineRuntimeException: FNRCD0009E: DB_ERROR: The database access failed with the following error: ErrorCode -302, Message 'DB2 SQL Error: SQLCODE=-302, SQLSTATE=22001, SQLERRMC=null, DRIVER=3.62.56' SQL: "INSERT INTO IndexRequests (object_id, security_id, epoch_id, creator, home_id, target_id, target_id_class, operation, indexation_id, status, request_time, retry_count, index_area_id, create_date, seqnum_identity) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, (CURRENT TIMESTAMP - CURRENT TIMEZONE), NEXTVAL FOR CISequence)" In-bindings: ({00000000-0000-0000-0000-000000000000},{00000000-0000-0000-0000-000000000000},0,[len=85] 'cn=svc_fn_bootstrap_ext,ou=Service Accounts,ou=JBMS,ou=Admin,dc'...,{00000000-0000-0000-0000-000000000000},{00000000-0000-0000-0000-000000000000},{00000000-0000-0000-0000-000000000000},3,{00000000-0000-0000-0000-000000000000},1,Fri Apr 26 12:00:00 NZST 2999,0,{00000000-0000-0000-0000-000000000000})
at com.filenet.engine.dbpersist.DBDB2Context.throwEngineException(DBDB2Context.java:806)
at com.filenet.engine.dbpersist.DBExecutionElement.execute(DBExecutionElement.java:266)
at com.filenet.engine.dbpersist.DBExecutionContext.getNextResult(DBExecutionContext.java:106)
at com.filenet.engine.dbpersist.DBExecutionContext.getNextCount(DBExecutionContext.java:147)
at com.filenet.engine.dbpersist.DBStatementBase.executeCount(DBStatementBase.java:290)
at com.filenet.engine.cbr.CBRDispatcher.initObjectStoreForCBR(CBRDispatcher.java:1401)
at com.filenet.engine.cbr.CBRDispatcher.initialize(CBRDispatcher.java:804)
at com.filenet.engine.tasks.ScheduledBackgroundTask.execute(ScheduledBackgroundTask.java:192)
at com.filenet.engine.tasks.BackgroundTask.safeExecute(BackgroundTask.java:239)
at com.filenet.engine.tasks.ScheduledObjectStoreTask.safeExecute(ScheduledObjectStoreTask.java:51)
at com.filenet.engine.tasks.BackgroundTask$BackgroundTaskPriviledgedExceptionAction.run(BackgroundTask.java:1017)
at com.filenet.engine.context.CallState.doAsSystem(CallState.java:416)
at com.filenet.engine.tasks.BackgroundTask.run(BackgroundTask.java:195)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:896)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:918)
at java.lang.Thread.run(Thread.java:735)
Caused by: com.ibm.db2.jcc.am.SqlDataException: DB2 SQL Error: SQLCODE=-302, SQLSTATE=22001, SQLERRMC=null, DRIVER=3.62.56
at com.ibm.db2.jcc.am.fd.a(fd.java:668)
at com.ibm.db2.jcc.am.fd.a(fd.java:60)
at com.ibm.db2.jcc.am.fd.a(fd.java:127)
at com.ibm.db2.jcc.am.jn.b(jn.java:2299)
at com.ibm.db2.jcc.am.jn.c(jn.java:2282)
at com.ibm.db2.jcc.t4.cb.k(cb.java:370)
at com.ibm.db2.jcc.t4.cb.a(cb.java:62)
at com.ibm.db2.jcc.t4.q.a(q.java:50)
at com.ibm.db2.jcc.t4.sb.b(sb.java:220)
at com.ibm.db2.jcc.am.kn.lc(kn.java:3077)
at com.ibm.db2.jcc.am.kn.b(kn.java:4034)
at com.ibm.db2.jcc.am.kn.b(kn.java:4188)
at com.ibm.db2.jcc.am.kn.fc(kn.java:2433)
at com.ibm.db2.jcc.am.kn.execute(kn.java:2417)
at com.ibm.ws.rsadapter.jdbc.WSJdbcPreparedStatement.pmiExecute(WSJdbcPreparedStatement.java:961)
at com.ibm.ws.rsadapter.jdbc.WSJdbcPreparedStatement.execute(WSJdbcPreparedStatement.java:637)
at com.filenet.engine.dbpersist.DBExecutionElement.execute(DBExecutionElement.java:218)
... 14 more


CAUSE
The caused of the error is due to the "Creator" field in the IndexRequests table for the object store, which is limited to 80 characters in length, but from the query statement above it is trying to insert a value that is 85 characters long ([len=85] 'cn=svc_fn_bootstrap_ext,ou=Service Accounts,ou=JBMS,ou=Admin,dc'...,). 

In tracking the INSERT statement through the code, we find that the Creator that is branded on the queue locking control row (which is what the INSERT is trying to create) is the Bootstrap user for Content Engine (CE). So the customer must have used the fully qualified name when bootstrapping the CE ear file, and the name exceeds the limit. 


RESOLVING THE PROBLEM
To resolve the issue: 

1. use short name of the CE bootstrap user (e.g.svc_fn_bootstrap_ext) to re-bootstrap CE ear file by utilizing configuration manager 

2. redeploy CE application.