Title: IBM How do I generate Keys for EBICS Client user? - United States

Text:
ebics client; Authentication; Encryption; Signature; x509; com.ibm.b2b.ebics.client.common.security.RSAKeyUtil; getRSAPrivateKeyInstance].java.security.spec.InvalidKeySpecException; InvalidKeySpecException TECHNOTE (FAQ)

QUESTION
 Unable to use key-pair, generated using openssl commands below, to configure Authentication/Encryption/Signature keys in EBICS client user. How do I generate right keys?

openssl genpkey -algorithm RSA -out private_key.pem -pkeyopt rsa_keygen_bits:2048 

openssl rsa -pubout -in private_key.pem -out public_key.pem 

CAUSE
When keys (not X509 format) from above commands used while creating EBICS Client User through ebicsClient URL (http://<host>:<port>/ebicsClient), error in ebicsClient.log

[com.ibm.b2b.ebics.client.common.security.RSAKeyUtil,getRSAPrivateKeyInstance].java.security.spec.InvalidKeySpecException: Inappropriate key specification: PrivateKeyInfo parsing error, Error in converting from byte[] to PrivateKey instance 
[com.ibm.b2b.ebics.client.common.security.RSAKeyUtil,getRSAPublicKeyInstance].java.security.spec.InvalidKeySpecException: Inappropriate key specification: invalid key format Error in converting from byte[] to PublicKey instance

ANSWER
Create RSA Keys in DER format and also add PKCS8 padding for the private key. 

Following are sample commands to generate key-par usable in EBICS Client user accounts. 
openssl genpkey -outform DER -out ebics_private.key -algorithm RSA -pkeyopt rsa_keygen_bits:2048
openssl rsa -inform DER -in ebics_private.key -pubout -outform DER -out ebics_public.der
openssl pkcs8 -topk8 -inform DER -in ebics_private.key -outform DER -nocrypt -out ebics_private_pkcs8.key

ebics_public.der - to be used as public key (Trusted Certificate)
ebics_private_pkcs8.key : to be used as private key (System Certificate)