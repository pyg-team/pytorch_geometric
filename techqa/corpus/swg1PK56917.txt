Title: IBM PK56917: ERROR DURING GENERATION OF DEPLOYMENT CODE: NULL WHEN PROJECT IS SHARED IN SUBVERSION - United States

Text:
  FIXES ARE AVAILABLE
Rational Application Developer for WebSphere Software, Version 7.0.0.6 [http://www-01.ibm.com/support/docview.wss?uid=swg24018313]
Rational Software Architect, Version 7.0.0.6 [http://www-01.ibm.com/support/docview.wss?uid=swg24018199]
6.1.1.6: WebSphere Application Server Toolkit Version 6.1.1 Fix Pack 6 [http://www-01.ibm.com/support/docview.wss?uid=swg24018784]


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  Environment:
   - Operating System:
   Microsoft Windows XP SP 2
    - Product name:
   IBM Rational Application Developer 6.0.1.2
   
   Description of problem:
   
   When generating deploy code from RAD 6.0.1.2 targeting WAS 6.0.x
   for a project that has been shared using Subversion,
   the following error may appear and the deployment stops:
   
   !MESSAGE Deployment from com.ibm.etools.ejbdeploy.EJBDeployer
   had
   errors: Error during generation of deployment code: null.
   
   !STACK 0
   java.lang.NullPointerException
    at
   com.ibm.ObjectQuery.crud.schema.QueryGenConfigInfo.reset(QueryGe
   nConfigI
   nfo.java:206)
    at
   com.ibm.ObjectQuery.crud.schema.DataStoreMap.initialize(DataStor
   eMap.jav
   a:114)
    at
   com.ibm.ObjectQuery.crud.schema.DataStoreMap.<init>(DataStoreMap
   .java:72
   )
    at
   com.ibm.ObjectQuery.crud.schema.DataStoreMap.singletonFor(DataSt
   oreMap.j
   ava:791)
    at
   com.ibm.etools.ejbdeploy.plugin.EJBDeployOperation.generateQueri
   es(EJBDe
   ployOperation.java:1883)
    at
   com.ibm.etools.ejbdeploy.plugin.EJBDeployOperation.getClassMapsF
   orBacken
   d(EJBDeployOperation.java:1851)
    at
   com.ibm.etools.ejbdeploy.plugin.EJBDeployOperation.invokeCodeGen
   eration(
   EJBDeployOperation.java:1622)
    at
   com.ibm.etools.ejbdeploy.plugin.EJBDeployOperation.doRun(EJBDepl
   oyOperat
   ion.java:1487)
    at
   com.ibm.etools.ejbdeploy.plugin.EJBDeployOperation.run(EJBDeploy
   Operatio
   n.java:1376)
    at
   com.ibm.etools.ejbdeploy.EJBDeployer.visit(EJBDeployer.java:112)
    at
   com.ibm.etools.ejbdeploy.EJBDeployer.doExecute(EJBDeployer.java:
   260)
    at
   com.ibm.etools.ejbdeploy.EJBDeployer.execute(EJBDeployer.java:24
   0)
    at
   com.ibm.wtp.j2ee.deploy.J2EEDeployOperation.deploy(J2EEDeployOpe
   ration.j
   ava:90)
    at
   com.ibm.wtp.j2ee.deploy.J2EEDeployOperation.execute(J2EEDeployOp
   eration.
   java:67)
    at
   com.ibm.wtp.common.operation.WTPOperation.doRun(WTPOperation.jav
   a:267)
    at
   com.ibm.wtp.common.operation.WTPOperation$1.run(WTPOperation.jav
   a:181)
    at
   org.eclipse.core.internal.resources.Workspace.run(Workspace.java
   :1673)
    at
   org.eclipse.core.internal.resources.Workspace.run(Workspace.java
   :1693)
    at
   com.ibm.wtp.common.operation.WTPOperation.run(WTPOperation.java:
   199)
    at
   com.ibm.wtp.common.operation.WTPOperationJobAdapter.run(WTPOpera
   tionJobA
   dapter.java:34)
    at org.eclipse.core.internal.jobs.Worker.run(Worker.java:66)
   
   Workaround:
   
   It appears that ejbDeploy fails in this case due to the presence
   of the
   .svn folder created by Subversion/Subclipse inside the
   META-INF\Schema folder (that contains the backend).
   If you delete this .svn folder, then the deploy operation
   suceeds.
   
   
    
   
   

LOCAL FIX
 *   Workaround:
   
   It appears that ejbDeploy fails in this case due to the presence
   of the
   .svn folder created by Subversion/Subclipse inside the
   META-INF\Schema folder (that contains the backend).
   If you delete this .svn folder, then the deploy operation
   suceeds.
   
   
    
   
   

PROBLEM SUMMARY
 *  ****************************************************************
   * USERS AFFECTED: All users of Rational Application            *
   *                 Developer and WebSphere Application Server   *
   *                 Toolkit EJB Deploy code generation tool      *
   ****************************************************************
   * PROBLEM DESCRIPTION: EJB Deploy code generation tool fails   *
   *                      when generating code against a 1.1      *
   *                      EJB and the Schema backend folder       *
   *                      contains any directories                *
   ****************************************************************
   * RECOMMENDATION:                                              *
   ****************************************************************
   If a Schema backend folder contains a directory, such as
   'Test', then the EJB Deploy code generation tool will fail
   with the following error:
   
   java.lang.NullPointerException
   at
   com.ibm.ObjectQuery.crud.schema.QueryGenConfigInfo.reset(QueryGe
   nConfigInfo.java:206)
   at
   com.ibm.ObjectQuery.crud.schema.DataStoreMap.initialize(DataStor
   eMap.java:114)
   at
   com.ibm.ObjectQuery.crud.schema.DataStoreMap.<init>(DataStoreMap
   .java:72)
   at
   com.ibm.ObjectQuery.crud.schema.DataStoreMap.singletonFor(DataSt
   oreMap.java:791)
   at
   com.ibm.etools.ejbdeploy.plugin.EJBDeployOperation.generateQueri
   es(EJBDeployOperation.java:1883)
   
   This typically happens when using source control systems such
   as Subversion as it will create a .svn directory within the
   Schema directory.
   
   
    
   
   

PROBLEM CONCLUSION
 *  While looking for backend directory we will only look for the
   'Schema' directory in the META-INF EJB project when it
   contains EJB 1.1 modules.  The fix for this APAR is currently
   targeted for inclusion in Rational Application Developer
   fixpack v6.0.1.2 iFix 001, v7.0.0.6 and WebSphere Application
   Server Toolkit v6.1.1.6.  Please refer to the Recommended
   Updates page for WebSphere Application Server Toolkit delivery
   information:
   http://www.ibm.com/support/docview.wss?uid=swg27004980 [http://www.ibm.com/support/docview.wss?uid=swg27004980]
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   PK56917
   
   
 * REPORTED COMPONENT NAME
   WEBAPP SERVER A
   
   
 * REPORTED COMPONENT ID
   5724J0820
   
   
 * REPORTED RELEASE
   600
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2007-11-21
   
   
 * CLOSED DATE
   2008-01-09
   
   
 * LAST MODIFIED DATE
   2008-09-03
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   WEBAPP SERVER A
   
   
 * FIXED COMPONENT ID
   5724J0820
   
   

APPLICABLE COMPONENT LEVELS
 * R600 PSY
   UP
   
   
 * R610 PSY
   UP