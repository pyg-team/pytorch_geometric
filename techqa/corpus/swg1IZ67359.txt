Title: IBM IZ67359: JMS APPLICATION USING WEBSPHERE MQ JMS V7 CLIENT FAILS TO RECEIVE MESSAGES WITH 2119 (MQRC_NOT_CONVERTED). - United States

Text:
  FIXES ARE AVAILABLE
WebSphere MQ V7.0.1 for i5/OS Fix Pack 7.0.1.3 [http://www-01.ibm.com/support/docview.wss?uid=swg24026933]
WebSphere MQ V7.0 Fix Pack 7.0.1.3 [http://www-01.ibm.com/support/docview.wss?uid=swg24026932]


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  The following error is seen when a WebSphere MQ V7 application
   using the classes for Java Message Service (JMS) application
   attempts to get a message:
   
   com.ibm.mq.MQException: JMSCMQ0001: WebSphere MQ call failed
   with compcode '1' ('MQCC_WARNING') reason
   '2119'('MQRC_NOT_CONVERTED').
   at
   com.ibm.msg.client.wmq.common.internal.Reason.
   createException(Reason.java:223)
   at
   com.ibm.msg.client.wmq.internal.WMQMessageConsumer.
   checkJmqiCallSuccess(WMQMessageConsumer.java:123)
   at
   com.ibm.msg.client.wmq.internal.WMQConsumerShadow.
   getMsg(WMQConsumerShadow.java:1198)
   at
   com.ibm.msg.client.wmq.internal.WMQSyncConsumerShadow.
   receiveInternal(WMQSyncConsumerShadow.java:233)
   at
   com.ibm.msg.client.wmq.internal.WMQConsumerShadow.
   receive(WMQConsumerShadow.java:922)
   at
   com.ibm.msg.client.wmq.internal.WMQMessageConsumer.
   receive(WMQMessageConsumer.java:450)
   at
   com.ibm.msg.client.jms.internal.JmsMessageConsumerImpl.
   receiveInboundMessage
   (JmsMessageConsumerImpl.java:742)
   at
   com.ibm.msg.client.jms.internal.JmsMessageConsumerImpl.
   receive(JmsMessageConsumerImpl.java:423)
   at
   com.ibm.mq.jms.MQMessageConsumer.
   receive(MQMessageConsumer.java:258)
   at
   com.ibm.ejs.jms.JMSMessageConsumerHandle.
   receive(JMSMessageConsumerHandle.java:522)
   
   At the same time, the entry shown below may be written to the
   Queue Manager error logs:
   
   AMQ6047: Conversion not supported.
   Additional symptoms: J2CA0056I MQRC_NOT_CONVERTED0x00000847
   JMSWMQ2002CONVERT(YES)
   EXPLANATION:
   WebSphere MQ is unable to convert string data tagged in
   CCSID 1208 to data in CCSID 1051.
   ACTION:
   Check the WebSphere MQ Application Programming Reference
   Appendix and the appropriate National Language Support
   publications to see if the CCSIDs  are supported by your
   system.
   
   
    
   
   

LOCAL FIX
 *  1. Messages can be sent in a CCSID that can be converted to 1208
   2. CCSID table located in /var/mqm/conv/table/ccsid.tbl can be
      altered to uncomment following lines:
      default      0x1100     500
      default      0x2100     850
      Uncommenting these lines will mean that for ASCII characters,
      codepage 850 will be used.
   
   
    
   
   

PROBLEM SUMMARY
 *  ****************************************************************
   USERS AFFECTED:
   This issue affects users of the WebSphere MQ v7 classes for Java
   Message Service (JMS) who attempt to receive messages that are
   in CCSID's other than 1208 if the queue manager does not support
   the required conversion.
   
   Platforms affected:
    All Distributed (iSeries, all Unix and Windows) +Java
   ****************************************************************
   PROBLEM SUMMARY:
   The problem occurs because of two changes between V6 and V7 of
   the WebSphere MQ classes for JMS.
   1. Receiving messages now uses the MQGMO_CONVERT option, meaning
   any required codepage conversion is performed by the server
   rather than the client.
   2. The CCSID in the MQMD used by the client is set to 1208 in V7
   but was 819 in V6.
   The result of this is that the queue manager might now be
   required to perform conversion that previously it did not need
   to.
   
   
    
   
   

PROBLEM CONCLUSION
 *  A new configuration property has been added to the WebSphere MQ
   classes for JMS. This property is named:
   com.ibm.msg.client.wmq.receiveConversionCCSID
   and can be set to an integer value. This value will be set as
   the CCSID value in the MQMD used to receive messages.
   If this property is not set, the client will use the default
   value for the client platform.
   Like other configuration properties for the WebSphere MQ classes
   for JMS, this property can either be set in the client
   configuration file or as a Java System Property on the command
   line.
   
   If the queue manager is hosted on the AIX platform, ensure that
   the required conversion table filesets are installed on the
   operating system.
   
   ---------------------------------------------------------------
   The fix is targeted for delivery in the following PTFs:
   
                      v7.0
   Platform           Fix Pack 7.0.1.3
   --------           --------------------
   Windows            U200320
   AIX                U834987
   HP-UX (PA-RISC)    U834414
   HP-UX (Itanium)    U834413
   Solaris (SPARC)    U834986
   Solaris (x86-64)   U834210
   iSeries            tbc_p700_0_1_3
   Linux (x86)        U834415
   Linux (x86-64)     U834985
   Linux (zSeries)    U834412
   Linux (Power)      U835662
   
   The latest available maintenance can be obtained from
   'WebSphere MQ Recommended Fixes'
   http://www-1.ibm.com/support/docview.wss?rs=171&uid=swg27006037 [http://www-1.ibm.com/support/docview.wss?rs=171&uid=swg27006037]
   
   If the maintenance level is not yet available, information on
   its planned availability can be found in 'WebSphere MQ
   Planned Maintenance Release Dates'
   http://www-1.ibm.com/support/docview.wss?rs=171&uid=swg27006309 [http://www-1.ibm.com/support/docview.wss?rs=171&uid=swg27006309]
   ---------------------------------------------------------------
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   IZ67359
   
   
 * REPORTED COMPONENT NAME
   WMQ AIX V7
   
   
 * REPORTED COMPONENT ID
   5724H7221
   
   
 * REPORTED RELEASE
   701
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2009-12-23
   
   
 * CLOSED DATE
   2010-02-24
   
   
 * LAST MODIFIED DATE
   2011-05-02
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   WMQ AIX V7
   
   
 * FIXED COMPONENT ID
   5724H7221
   
   

APPLICABLE COMPONENT LEVELS
 * R701 PSY
   UP