Title: IBM Content Search Services intermittently throws "IQQG0020E java.lang.IncompatibleClassChangeError" exception during indexing - United States

Text:
 TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 The IBM Content Search Services (CSS) intermittently throws "IQQG0020E java.lang.IncompatibleClassChangeError" exception while indexing. 

SYMPTOM
During indexing, the following exceptions are logged in CSS and Content Platform Engine (CPE) server respectively: 

CSS trace.log:
<message>IQQI0019E The system encountered a problem when indexing documents.
Causes of the problem:
IQQI0005E The document with ID {8997C900-128B-4CBB-972E-CFFE02032C99} cannot be indexed.
IQQG0020E java.lang.IncompatibleClassChangeError
org.apache.lucene.util.ArrayUtil$2.compare(ArrayUtil.java:600)
org.apache.lucene.util.SorterTemplate.insertionSort(SorterTemplate.java:54)
org.apache.lucene.util.SorterTemplate.mergeSort(SorterTemplate.java:126)
org.apache.lucene.util.SorterTemplate.mergeSort(SorterTemplate.java:132)
org.apache.lucene.util.SorterTemplate.mergeSort(SorterTemplate.java:132)
org.apache.lucene.util.ArrayUtil.mergeSort(ArrayUtil.java:687)
org.apache.lucene.util.ArrayUtil.mergeSort(ArrayUtil.java:695)
org.apache.lucene.index.FrozenBufferedDeletes.&lt;init&gt;(FrozenBufferedDeletes.java:53)
org.apache.lucene.index.DocumentsWriter.pushDeletes(DocumentsWriter.java:486)
org.apache.lucene.index.DocumentsWriter.flush(DocumentsWriter.java:666)
org.apache.lucene.index.IndexWriter.doFlush(IndexWriter.java:3580)
org.apache.lucene.index.IndexWriter.flush(IndexWriter.java:3545)
org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java:2067)
com.ibm.es.nuvo.indexer.IndexWriterContainer.addDocument(IndexWriterContainer.java:106)
com.ibm.es.nuvo.indexer.Indexer.upsertDocument(Indexer.java:623)
com.ibm.es.nuvo.indexer.Indexer.processUpsert(Indexer.java:473)
com.ibm.es.nuvo.indexer.Indexer.processDocument(Indexer.java:785)
com.ibm.es.nuvo.indexer.DocumentIndexer.processDocuments(DocumentIndexer.java:233)
com.ibm.es.nuvo.manager.DocumentIndexerTask.run(DocumentIndexerTask.java:109)
com.ibm.es.nuvo.manager.IndexerThread.run(IndexerThread.java:80)</message>


CPE p8_server_trace.log 
com.filenet.api.exception.EngineRuntimeException: FNRCB0040E: CBR_TS_INDEXING_FAILED_EXCEPTION: An IBM Content Search Services server could not complete an indexing operation while accessing the <index id> index for the server that runs on the <CSS server>:8,191 host and port. Content Engine failed to index batch "###" because of the following error: "Batch job error. Task id :200 with indexing error :IQQI0063E Task [###] did not complete successfully. Collection <index id> could not be committed. The indexed data might have been partially indexed. Verify that there is sufficient disk space and permissions to access the disk. Then run the indexing of the failed task again. IQQI0005E The document with ID command://updateIndex cannot be indexed. IQQG0020E java.lang.IncompatibleClassChangeError". For information about the location of this log, see "Viewing the IBM FileNet P8 log files" in the IBM FileNet P8 information center. If you cannot determine the cause of the error, contact IBM Software Support.
at com.ibm.filenet.cse.cascade.CSECascadeIndexProcessing.endBatch(CSECascadeIndexProcessing.java:1784) at com.filenet.engine.cbr.spi.CSEIndexProcessor$BatchExecutor.execute(CSEIndexProcessor.java:2739) ... 7 more



CAUSE
This issue has been identified to be a JIT issue by the IBM Java team. Please see the following APAR IV32630 [http://www-01.ibm.com/support/docview.wss?uid=swg1IV32630] for more details.



RESOLVING THE PROBLEM
Download and install the appropriate JDK or CSS Interim Fix: 

 

1) For CSS 5.1, either (a) download and install JDK 1.6 SR13 or (b) download an install 5.1.0.0-P8CSS-IF005 at Fix Central for Interim Fix 5.1.0.0-P8CSS-IF005. [http://www.ibm.com/support/fixcentral/swg/quickorder?parent=FileNet+Product+Family&product=ibm/Information+Management/FileNet+Content+Search+Services&release=5.1.0.0&platform=All&function=browse] (shipped with JDK 1.6 SR13) 

2) For CSS 5.2, [http://www.ibm.com/support/fixcentral/swg/quickorder?parent=FileNet+Product+Family&product=ibm/Information+Management/FileNet+Content+Search+Services&release=5.2.0.0&platform=All&function=browse]either (a) download and install JDK 1.6 SR13 or (b) download an install 5.2.0.0-P8CSS-IF003 (when available).