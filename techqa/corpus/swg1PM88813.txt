Title: IBM PM88813: DEVELOPMENT FIXES - United States

Text:
z/os  A FIX IS AVAILABLE
Obtain the fix for this APAR.


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS UNREPRODUCIBLE IN NEXT RELEASE.
    
   
   

ERROR DESCRIPTION
 *  Development Fixes
   
   
    
   
   

LOCAL FIX

PROBLEM SUMMARY
 *  ****************************************************************
   * USERS AFFECTED:                                              *
   * All users of the IBM z/OS Communications Server for z/OS     *
   * Version 2 Release 1                                          *
   * E2827/K                                                      *
   ****************************************************************
   * PROBLEM DESCRIPTION:                                         *
   * 13245 EZBSRUTL(HIP6210 13.058)+00EE4A S0C4/00000010          *
   * 14704 AB/S0C4 EZBSRWCX +1D1E in TCPIP                        *
   * 14540 Stopped PFID(6) killed workloads running on PFID(5)    *
   * 14544 Symmetric links does not switch when primary PFID die  *
   * 13366 EZASATC2 EZASASUB PER DIRTSTOR ipsa sweden             *
   * 14347 FTP client connect fails when a link is available, but *
   * the fail over link is not correctly configured.              *
   * 14487 AB/S00C4 IEACSS1 +0D9A EZBRCSTG AFTER P TCPSVT2        *
   * 14591 ABEND S4c5 EZBSRUTL(HIP6210 13.092)+007DC6             *
   * S4C5/74300402                                                *
   * 14820 invalid mtu value on accept and confirm                *
   * 15149 Urgent data broken                                     *
   * 14037 Java readUTF() failed                                  *
   * 14680 error detection                                        *
   * 15085 remove traps for 8481 and 8552                         *
   ****************************************************************
   * RECOMMENDATION:                                              *
   * Apply fix.                                                   *
   ****************************************************************
   13245 A 64-bit memory region associated with buffer was freed
   prior to the storage being de-registered to the devices. This
   can cause result in an Abend in EZBSRUTL (TCP/IP stack) or a DC2
   Abend registered by IOS'
   14704 abend in EZBSRWCX caused by residual data in reg 15 during
   inline ITLOCK release which the downlevel SYSEVENT macro does
   not clear
   14540 - device outage caused stack to initiate failover. We
   first saw the error on a Test Link signal and, as part of
   failover, replayed the Test Link over the other link. When we
   got a test link reply over the other link we weren't expecting
   it and failed that link also.
   14544 The stack processing for an INOP is incorrect. A link
   INOPed when the stack had an alternate. The stack is incorrectly
   resetting the TCP connections associated with the failed link.
   
   13366 The SNMP TCP/IP subagent was not checking whether an
   instance value had been specified for an SNMP Getnext request.
   If no instance value had been specified, the subagent to
   accessed low core when trying to use the instance value.
   14347 Timing window during link group establishment after
   alternate link fails due to a switch misconfiguration.
   14487 Abend S0C4 ocurrs when a STOP TCPIP is issued when tracing
   is active.
   14591Running short lived streaming jobs there were observed
   Abends during the de-activation of one or more of the links.
   14820 Packet trace is formatting the MTU field in all ACCEPT and
   CONFIRM messages. However, only for the connection that causes
   the link to be set up is the MTU valid. For cases where the MTU
   is not used packet trace should not format it.
   15149 The sender stopped sending data after sending urgent data
   because it did not recognize that the urgent data had been
   consumed by the receiver.
   14037 Code did not properly handle IOV64 structures passed from
   the application on send/receive calls.
   14680 New Function.
   15085 During the release, we had written several traps to catch
   particular problems that occur infrequently during stress runs.
   Those traps were implemented with defects 8481 and 8552. This
   defect is to remove those traps.
   
   
    
   
   

PROBLEM CONCLUSION
 *  13245 Code was changed in EZBSRUTL de-register only after a
   DM_Act_REQ Function(DEREGISTER) has been performed for each
   associated link. Additionally logic was added to make sure that
   when the VTAM had issues with the de-registration of a buffer
   that it is not freed until VTAM completes "force close"
   processing for the associated link.
   14704 change EZBSRWCX to use out-of-line ITLOCK release instead
   14540 Change EZBSRUTL to not retransmit Test Link LLC signal
   during link failover processing. A Test Link is only meaningful
   over the link where it was originally sent so we should never
   retransmit these during failover.
   14544 Change EZBSRUTL to allow link failover processing to occur
   after an INOP.
   13366 The SNMP TCP/IP subagent has been changed to verify that
   an instance value has been specified for an SNMP Getnext
   request, before using the instance value.
   14347 Send a Delete Link LLC signal when cleaning up after an
   alternate link failure.
   14487 There is a timing window where the SRB routine to copy
   trace data to user storage where
   the trace collection buffer has been freed.
   14591 Changed EZBSRUTL to correctly de-register buffers from
   links and IOS'. Fixed race conditions where buffer pool
   expansion and link inactivation could be happening
   simultaneously.
   14820 Packet trace will now bypass formatting the MTU field if
   it is not set (0). Additionally,
   the psn field is valid only on first connection and will also be
   bypassed by packet
   trace when it is not set.
   15149 EZBSCINB is changed to check for urgent data being
   consumed when there is not data on the send queue.
   14037 EZBTSFWR and EZBTCFRD were updated to properly handle
   IOV64 structures.
   14680 New Function.
   15085 Removed 2 traps
   
   
    
   
   

TEMPORARY FIX

COMMENTS
 *  No additional comments.
   
   
    
   
   

APAR INFORMATION
 * APAR NUMBER
   PM88813
   
   
 * REPORTED COMPONENT NAME
   TCP/IP V3 MVS
   
   
 * REPORTED COMPONENT ID
   5655HAL00
   
   
 * REPORTED RELEASE
   210
   
   
 * STATUS
   CLOSED UR1
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2013-05-10
   
   
 * CLOSED DATE
   2013-05-31
   
   
 * LAST MODIFIED DATE
   2013-08-19
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
    UK94777
   
   

MODULES/MACROS
 *  EZBSRWCX EZBSCINB EZBCTFME EZBSRUTL EZASAIP  EZBRCINI EZASATCP
   EZASAUDP EZBRCSTG EZASATC2 EZASADV  EZASAIP2 EZASASYS EZBTSFWR
   EZASAINT EZBTSCON EZBSRLLC EZBPTSMC EZASAICM EZASAPOR EZBTCFRD
   EZBIFIUM EZBIFIUT
   
   
    
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   TCP/IP V3 MVS
   
   
 * FIXED COMPONENT ID
   5655HAL00
   
   

APPLICABLE COMPONENT LEVELS
 * R210 PSY UK94777 [HTTPS://WWW14.SOFTWARE.IBM.COM/WEBAPP/SET2/ORDERMEDIA/SHOPCART?PTFS=UK94777]
   UP13/06/21 P F306
   
   

FIX IS AVAILABLE
 * SELECT THE PTF APPROPRIATE FOR YOUR COMPONENT LEVEL. YOU WILL BE REQUIRED TO SIGN IN. DISTRIBUTION ON PHYSICAL MEDIA IS NOT AVAILABLE IN ALL COUNTRIES.