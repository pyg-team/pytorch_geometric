Title: IBM PDA-OS upgrades for INPDS systems - United States

Text:
INPDS TROUBLESHOOTING

PROBLEM


The PDA OS Security release provides the Red Hat Enterprise Linux (RHEL) monthly repository releases. This upgrade will only work on systems running RHEL 5.10 and RHEL 6.5 or above. Once the RHEL update is applied, it CANNOT be downgraded to the previous version. 

For all models, HPF 5.6 is a minimum release prerequisite before applying the PDA OS Security upgrade. However, for INPDS systems there is no HPF setup and thus yum update script fails while performing required HPF check. 

To upgrade PDA-OS on INPDS systems, a change is required in yum_update script mentioned below. Please follow diagnostic and remediation steps to upgrade PDA-OS successfully on INPDS. 

SYMPTOM
While executing yum_update script following error message is seen :

The system does not meet the minimum HPF version level. Please upgrade to HPF version 5.6 or above.

DIAGNOSING THE PROBLEM
Run yum_update script on INPDS system and monitor the output.

RESOLVING THE PROBLEM


Applying security patches on PDA OS on a system with INPDS enabled, needs additional steps than that mentioned in the regular PDA-OS upgrade document. Since INPDS setup does not have HPF component installed, prerequisite check done by PDA OS upgrade script, for HPF version, needs to be skipped. Please follow below instructions while applying PDA OS patch on an INPDS system: 

1. Follow the RHELx_pda_security_upgrade.pdf* provided with the kit to perform upgrade process. In "Performing the Upgrade" section, before executing step 2, edit the yum_update script to skip the HPF check as follows :

#vi yum_update.sh 

Comment out following section and add a comment in front of following function : 

#check_hpf_version 

#if [[ $? -eq 1 ]];then 

# exit 0 

#fi 

Save the file and execute it : 

#sh yum_update.sh 

(*: RHELx - x refers to 5 or 6 depending on RHEL version of the system where upgrade s being performed )



2. After successful upgrade check if LDAP authentication is working as expected using following command: 

[root@netezza ~]# nzsql -u <ldap_user> -pw <password>

If LDAP authentication fails and following error is observed in /var/log/messages, execute the remediation given below : 

>   *   *   * pam_ldap: ldap_simple_bind Can't contact LDAP server 
      
      
   
   




REMEDIATION - 

Copy certificate from LDAP server under /etc/openldap/cacerts/ directory: 

[root@netezza ~]# scp <ldap_server>:/etc/ldap/cacert.pem /etc/openldap/cacerts/ 

Run following command to rehash certificate :

[root@netezza ~]# cacertdir_rehash /etc/openldap /cacerts/ 



After performing the above remediation steps, try the LDAP authentication again.