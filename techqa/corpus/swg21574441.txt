Title: IBM View DBOS plan files without NPS access - United States

Text:
 TECHNOTE (FAQ)

QUESTION
 How do you view DBOS plan files without NPS host access? 

ANSWER
Developers without NPS host access can use NPS external table functionality to view plan (*.pln) files. The following script works for a Linux or Unix client. However, the same SQL statements will work if you are using an interactive ODBC tool.
For versions 4.6.x and up


 * #!/bin/sh
 * 
 * 
 * nzsql -At -F ' ' <
 * 
 * select nps_ext_file_read from external '/nz/kit/log/planshist/current/${1}.pln' (nps_ext_file_read nvarchar(16000)) using (encoding 'internal' crinstring true ctrlchars true delimiter '' truncstring true)
 * 
 * EOF


The first and only argument ($1) is the plan ID in question. 

For versions 4.0.x thru 4.5.x 
 * #!/bin/sh
 * 
 * 
 * nzsql -At -F ' ' <
 * 
 * select nps_ext_file_read from external '/nz/kit/log/planshist/${1}/${2}/${2}.pln' (nps_ext_file_read nvarchar(16000)) using (encoding 'internal' crinstring true ctrlchars true delimiter '' truncstring true)
 * 
 * EOF


The first argument ($1) is the NPS instance and the second argument ($2) is the plan ID in question. 

For versions prior to 4.x 
 * #!/bin/sh
 * 
 * 
 * nzsql -At -F ' ' <
 * 
 * select nps_ext_file_read from external '/nz/data/plans/${1}.pln' (nps_ext_file_read nvarchar(16000)) using (encoding 'internal' crinstring true ctrlchars true delimiter '' truncstring true)
 * 
 * EOF


The first and only argument ($1) is the plan ID in question. 

HISTORICAL NUMBER
 NZ475417