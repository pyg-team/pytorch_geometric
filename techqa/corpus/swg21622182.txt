Title: IBM Information Server Install error when installing Engine tier that connects to a WebSphere Application Server Cluster - United States

Text:
core group TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 The following error is seen the install log:
org.omg.CORBA.NO_IMPLEMENT: No Cluster Data Available vmcid: 0x49421000
minor code: 42 completed: No 

SYMPTOM
When installing the Engine tier connecting to WebSphere Application Server (WAS) the complete stack trace in the install log is: 
Caused by: java.rmi.RemoteException: CORBA NO_IMPLEMENT 0x49421042 No; nested exception is: org.omg.CORBA.NO_IMPLEMENT: 
>> SERVER (id=11c328fe, host=yourhost.com) TRACE START:
>> org.omg.CORBA.NO_IMPLEMENT: No Cluster Data Available vmcid: 0x49421000 

minor code: 42 completed: No
>> at com.ibm.ws.cluster.router.selection.WLMLSDRouter.select(WLMLSDRouter.java:295)
>> at com.ibm.ws.cluster.propagation.ServerClusterContextListenerImpl.forwardRequest(ServerClusterContextListenerImpl.java:625)
>> at com.ibm.ws.cluster.propagation.ServerClusterContextListenerImpl.validateRequest(ServerClusterContextListenerImpl.java:669)
>> at com.ibm.ws.wlm.server.WLMServerRequestInterceptor.notifyValidationListeners(WLMServerRequestInterceptor.java:317)
>> at com.ibm.ws.wlm.server.WLMServerRequestInterceptor.receive_request_service_contexts(WLMServerRequestInterceptor.java:206)
>> at com.ibm.rmi.pi.InterceptorManager.invokeInterceptor(InterceptorManager.java:621)
>> at com.ibm.rmi.pi.InterceptorManager.iterateServerInterceptors(InterceptorManager.java:528)
>> at com.ibm.rmi.pi.InterceptorManager.iterateReceiveContext(InterceptorManager.java:746)
>> at com.ibm.rmi.iiop.ServerRequestImpl.runInterceptors(ServerRequestImpl.java:157)
>> at com.ibm.rmi.iiop.Connection.respondTo(Connection.java:2827)
>> at com.ibm.rmi.iiop.Connection.doWork(Connection.java:2753)
>> at com.ibm.rmi.iiop.WorkUnitImpl.doWork(WorkUnitImpl.java:63)
>> at com.ibm.ejs.oa.pool.PooledThread.run(ThreadPool.java:118)
>> at com.ibm.ws.util.ThreadPool$Worker.run(ThreadPool.java:1613)
>> SERVER (id=11c328fe, host=yourhost.com) TRACE END.
vmcid: 0x49421000 minor code: 42 completed: No
at com.ibm.CORBA.iiop.UtilDelegateImpl.mapSystemException(UtilDelegateImpl.java:330)
at javax.rmi.CORBA.Util.mapSystemException(Util.java:84)
at com.ascential.xmeta.shared.repository.core._ISandboxRemoteStatefulService_Stub.getEJBHome(_ISandboxRemoteStatefulService_Stub.java:86)
at com.ascential.xmeta.shared.repository.core.ejb.EJBIRemoteSandboxBusiness.getEJBHome(EJBIRemoteSandboxBusiness.java:67)
at com.ascential.xmeta.binding.repository.core.impl.SandboxBusinessBinding.getEjbHandle(SandboxBusinessBinding.java:273)
... 13 more
Caused by: org.omg.CORBA.NO_IMPLEMENT: 
>> SERVER (id=11c328fe, host=yourhost.com) TRACE START:
>> org.omg.CORBA.NO_IMPLEMENT: No Cluster Data Available vmcid: 0x49421000 minor code: 42 completed: No
>> at com.ibm.ws.cluster.router.selection.WLMLSDRouter.select(WLMLSDRouter.java:295)
>> at com.ibm.ws.cluster.propagation.ServerClusterContextListenerImpl.forwardRequest(ServerClusterContextListenerImpl.java:625)
>> at com.ibm.ws.cluster.propagation.ServerClusterContextListenerImpl.validateRequest(ServerClusterContextListenerImpl.java:669)
>> at com.ibm.ws.wlm.server.WLMServerRequestInterceptor.notifyValidationListeners(WLMServerRequestInterceptor.java:317)
>> at com.ibm.ws.wlm.server.WLMServerRequestInterceptor.receive_request_service_contexts(WLMServerRequestInterceptor.java:206)
>> at com.ibm.rmi.pi.InterceptorManager.invokeInterceptor(InterceptorManager.java:621)
>> at com.ibm.rmi.pi.InterceptorManager.iterateServerInterceptors(InterceptorManager.java:528)
>> at com.ibm.rmi.pi.InterceptorManager.iterateReceiveContext(InterceptorManager.java:746)
>> at com.ibm.rmi.iiop.ServerRequestImpl.runInterceptors(ServerRequestImpl.java:157)
>> at com.ibm.rmi.iiop.Connection.respondTo(Connection.java:2827)
>> at com.ibm.rmi.iiop.Connection.doWork(Connection.java:2753)
>> at com.ibm.rmi.iiop.WorkUnitImpl.doWork(WorkUnitImpl.java:63)
>> at com.ibm.ejs.oa.pool.PooledThread.run(ThreadPool.java:118)
>> at com.ibm.ws.util.ThreadPool$Worker.run(ThreadPool.java:1613)
>> SERVER (id=11c328fe, host=yourhost.com) TRACE END.
vmcid: 0x49421000 minor code: 42 completed: No
at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:56)
at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:39)
at java.lang.reflect.Constructor.newInstance(Constructor.java:527)
at com.ibm.rmi.iiop.ReplyMessage._getSystemException(ReplyMessage.java:250)
at com.ibm.rmi.iiop.ReplyMessage.getSystemException(ReplyMessage.java:198)
at com.ibm.rmi.iiop.ClientResponseImpl.getSystemException(ClientResponseImpl.java:230)
at com.ibm.rmi.corba.ClientDelegate.intercept(ClientDelegate.java:999)
at com.ibm.rmi.corba.ClientDelegate.invoke(ClientDelegate.java:453)
at com.ibm.CORBA.iiop.ClientDelegate.invoke(ClientDelegate.java:1193)
at com.ibm.rmi.corba.ClientDelegate.invoke(ClientDelegate.java:795)
at com.ibm.CORBA.iiop.ClientDelegate.invoke(ClientDelegate.java:1223)
at org.omg.CORBA.portable.ObjectImpl._invoke(ObjectImpl.java:484)
at com.ascential.xmeta.shared.repository.core._ISandboxRemoteStatefulService_Stub.getEJBHome(_ISandboxRemoteStatefulService_Stub.java:76)
... 15 more

CAUSE
The node agent was not part of the same "core group" as the deployment manager (dmgr) and application server. The node agent, dmgr and application server need to be in the same "core group".



DIAGNOSING THE PROBLEM
The CORBA NO_IMPLEMENT message occurs when the EJB client code cannot find a server to send the EJB request to. The Workload Management component maintains a list of active servers. If the list is empty, then the request cannot be sent. 

Ensure that the node agent, deployment manager (dmgr), and application server are up and running and in the same core group. 

 * To check if the node agent, deployment manager (dmgr), and application server are running use the WAS Web Admin console.  * For a cluster, the WAS Web Admin console is operated by the deployment manager. So, if you can get to the WAS Admin console, you know that the deployment manager is running. 
    *  Once inside the WAS Admin Console to check node agents, select System Administration->Node agents. This will list the node agents and their status. Note that if a node agent is stopped, it can only be started from the command line using:
      
      startNode, i.e. <nodeAgentProfile>/bin/startNode.{sh|bat} 
    * To check the application servers select Servers->Server Types->WebSphere application servers. This lists the application servers individually and you can start them from this page. Alternately, since this is a cluster, you could select Servers->Clusters->WebSphere application server clusters. This latter page gives a view of the cluster as a whole. If all app servers are started, you will see a green arrow. If all app servers are stopped, a red X. If some app servers are started and some are stopped, it will show as an X, but not filled in. Also, hovering the mouse over the icon gives a textual description.
   
   
 * To find the core group look in the SystemOut.log for the application server, node agent and dmgr search for DCSV8050I. See the examples below:
   
   Application Server
   CoreGroupMemb I DCSV8050I: DCS Stack DefaultCoreGroupat Member <Cell>\<Server>\<application server>...
   Nodeagent
   CoreGroupMemb I DCSV8050I: DCS Stack SecondCoreGroupat Member <Cell>\<Server>\<node agent>...
   dmgr
   CoreGroupMemb I DCSV8050I: DCS Stack DefaultCoreGroup at Member <Cell>\<Server>\<dmgr>...
   
   In the example above the application server and dmgr are in the same core group, called DefaultCoreGroup, but the node agent is in the core group SecondCoreGroup.

RESOLVING THE PROBLEM
The "No cluster data available" exception, indicates either the node agent is not running, or it is running but not in the same "core group" with the deployment manager and the application server. For the WLM (workload manager) function to work correctly, the node agent, deployment manager, and application server all have to be up and running and in the same core group. 

 

 * To restart the node agent, deployment manager (dmgr), or application server if they are not running see one of the following links:
   IS 8.7: Restarting application server processes [http://publib.boulder.ibm.com/infocenter/iisinfsv/v8r7/topic/com.ibm.swg.im.iis.found.admin.ha.common.doc/topics/admappsvclstr_restartprocess.html]
   IS 8.5: Restarting application server processes [http://publib.boulder.ibm.com/infocenter/iisinfsv/v8r5/topic/com.ibm.swg.im.iis.found.admin.ha.common.doc/topics/admappsvclstr_restartprocess.html]
   IS 9.1: Restarting application server processes [http://pic.dhe.ibm.com/infocenter/iisinfsv/v9r1/topic/com.ibm.swg.im.iis.found.admin.ha.common.doc/topics/admappsvclstr_restartprocess.html]
   
 * The links below discuss how to move core group members:
   Moving core group members in WAS Version 6.1 [http://pic.dhe.ibm.com/infocenter/wasinfo/v6r1/topic/com.ibm.websphere.ejbfep.multiplatform.doc/info/ae/ae/trun_ha_addcgmems.html]
   Moving core group members in WAS Version 7.0 [http://publib.boulder.ibm.com/infocenter/wasinfo/v7r0/topic/com.ibm.websphere.nd.doc/info/ae/ae/trun_ha_addcgmems.html]
   Moving core group members in WAS Version 8.0 [http://pic.dhe.ibm.com/infocenter/wasinfo/v8r0/topic/com.ibm.websphere.nd.iseries.doc/info/iseriesnd/ae/trun_ha_addcgmems.html]