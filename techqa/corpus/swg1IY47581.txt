Title: IBM IY47581: DOMAIN FAILOVER COOKIE DOES NOT GET SET WITH PROPER DOMAIN VALUE IN WINDOWS ENVIRONMENT - United States

Text:
AIX SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS DOCUMENTATION ERROR.
    
   
   

ERROR DESCRIPTION
 *  Customer is running TAM 4.1 FP05 on Windows 2k. They have
   failover cookies set up. I am including the problem description
   .
   Basically, the problem they are seeing is that we can't get
   WebSeal
   to send a domain failover cookie.  Using Mozilla, we watched th
   cookies, and see the PD-ID being set.  In it, the Domain is
   always
   being set to www.qaavantage.ca.  What we want is to set it to
   .qaavantage.ca so that the cookie will be sent to any address i
   that
   domain.  However, even when we enable the domain fialover
   cookies
   option, it's always www.qaavantage.ca.
   .
   I was able to get this to work fine on my AIX box, but I
   couldn't
   get my Win2k one to work properly to test.
   .
   We installed FP05 and still no difference.  I suepect one of 2
   things
   at this point....
   .
   - There's a problem with the windows version of webseal with th
   domain failover cookie option.
   .
   or
   .
   - from http://wp.netscape.com/newsref/std/cookie_spec.html we
   find the
   following requirement...
   .
   domain=DOMAIN_NAME
                   When searching the cookie list for valid
   cookies, a
   comparison of the domain attributes of the cookie is made with
   the
   Internet domain name of the host from which the URL will be
   fetched. If
   there is a tail match, then the cookie will go through path
   matching to
   see if it should be sent. "Tail matching" means that domain
   attribute is
   matched against the tail of the fully qualified domain name of
   the host.
   A domain attribute of "acme.com" would match host names
   "anvil.acme.com"
   as well as "shipping.crate.acme.com".
                   Only hosts within the specified domain can set
   cookie
   for a domain and domains must have at least two (2) or three (3
   periods
   in them to prevent domains of the form: ".com", ".edu", and
   "va.us". Any
   domain that fails within one of the seven special top level
   domains
   listed below only require two periods. Any other domain require
   at
   least three. The seven special top level domains are: "COM",
   "EDU",
   "NET", "ORG", "GOV", "MIL", and "INT".
                   The default value of domain is the host name of
   the
   server which generated the cookie response.
   .
   I suspect we're encountering the 2nd issue, but since I haven't
   been
   able to test myself on Win2k, can you test this quickly on win2
   to see if you can get it to work?
   .
   -----------------------
   .
   I have recreated this on my windows environment. The domain
   cookie gets set to hostname. I have conf files if needed.
   .
   BACKGROUND INFO:
   .
   well to give you a better idea what they're doing
   this for,  they have a cisco content switch in front of the
   webseals to offload the ssl.  What it also does is do some ip
   redirecting, so they can do traffic shapping per app.  They have
   addresses setup for inotes.www.qaavantage.ca,
   app2.www.qaavantage.ca, etc, which all get forwarded by the
   switch to webseal, which is www.qaavantage.ca.  When they get
   their cookie, it's set for www.qaavantage.ca, so when the client
   requests inotes.ww.qaavantage.ca the cookie isn't sent, so they
   have to login again.  With the domain cookie that should prevent
   them from having to login again for each different app they
   access
   
   
    
   
   

LOCAL FIX

PROBLEM SUMMARY
 *  See problem description.
   
   
    
   
   

PROBLEM CONCLUSION
 *  The following was added to the 4.1-AWS-0008LA.README:
   
   7.15 Ensuring that the fully qualified hostname is provided
        by the OS (IY47581)
   
   CDSSO, eCSSO, and some other WebSEAL configurations require
   that machine hostnames are described as fully qualified
   hostnames.  You must ensure that your system and network
   can resolve machine names into fully qualified hostnames.
   
   On Unix platforms:
    -Modify /etc/hosts so that the fully qualified hostname
     preceeds the shortname in the appropriate entry.
     Example:
       1.2.3.4 servername.ibm.com servername loghost
   
   On Windows platforms:
     -Right click on "My Computer", go to "Properties", click
      the "Computer Name" tab, click the "Change" button, click
      the "More" button, enter the Primary DNS Suffix in the
      blank, and click "OK" in all of the previously opened
      windows.
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   IY47581
   
   
 * REPORTED COMPONENT NAME
   ACCESS MGR WEBS
   
   
 * REPORTED COMPONENT ID
   5724C0811
   
   
 * REPORTED RELEASE
   410
   
   
 * STATUS
   CLOSED DOC
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2003-08-14
   
   
 * CLOSED DATE
   2003-12-22
   
   
 * LAST MODIFIED DATE
   2003-12-22
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION

APPLICABLE COMPONENT LEVELS