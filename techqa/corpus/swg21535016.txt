Title: IBM Manifest client leaving open database connections when using Citrix - United States

Text:
STERLINGPRI TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 Manifest client leaving open database connections when using Citrix 

SYMPTOM
PART: DCS 6.2 SP2
COMPONENT: Manifest Client
OS: All
DATABASE: Oracle

When using Citrix to run the manifest client, we are seeing open Oracle sessions with no corresponding eglmnfst sessions. Citrix is configured to kill the session after a certain amount of time if the session is inactive.


RESOLVING THE PROBLEM
Citrix does have a timeout value so if a user is idle for so-long it would end their Citrix connection. However, even if they were logged into Manifest (eglmnfst) at the time, the OS and Oracle should see the disconnect and clean-up.

We added a "detach bequeath = Y" to our sqlnet.ora file on the Unix server. This let the OS come along and clean-up the eglmnfst processes. We were seeing {defunct} processes running away with CPU for our eglmnfst processes before using the detach bequeath command. Do they get defunct processed on their server? Maybe you can tell their DBA and OS admins to look at using this configuration in their sqlnet.ora file 

There are also tools in Oracle that look for dead or alive processes and can auto kill them. We did not have to pursue using that tool but maybe someone should make sure that's not involved.
********************************
here is our sqlnet.ora file

# SQLNET.ORA Configuration
File:/db01/opt/oracle/product/8.1.6/network/admin/sqlnet.ora<br ># Generated by Oracle configuration tools.

SQLNET.EXPIRE_TIME = 30
NAMES.DEFAULT_DOMAIN = xxxxx

NAMES.PREFERRED_SERVERS =
(ADDRESS_LIST =
(ADDRESS = (PROTOCOL = TCP)(HOST = ons3)(PORT = 15075))
(ADDRESS = (PROTOCOL = TCP)(HOST = ons1)(PORT = 15075))
(ADDRESS = (PROTOCOL = TCP)(HOST = ons2)(PORT = 15075))
)

NAMES.DIRECTORY_PATH= (ONAMES, TNSNAMES)
bequeath_detach=YES
***********************************
Nothi ng in cron.
I remember the only change we had to make was in the sqlnet.ora. The doc on the detach bequeath statement implied the OS would automatically react to these processes because they are some how flagged in their PID or child PID. It was something like the child PID would be "1" and the OS knows if it finds any "1" without a parent to delete them.

That's just how I seem to remember it working. I'm pretty sure the OS guys did not have to make any changes when we put in the detach bequeath.

We were able to put the change into test and see the results right away. 

I assume the customer has the latest manifest.exe on their Citrix server and the latest patches and Oracle client ? Because some of our past problems with eglmnfst hanging was in the application, solved in hot fixes.



HISTORICAL NUMBER
 PRI49375 

PRODUCT ALIAS/SYNONYM
 

Fact