Title: IBM How to list locked VOBs - United States

Text:
List; Locked; Vobs; How; 1150818 TECHNOTE (FAQ)

QUESTION
 How do I get a listing of all the IBM® Rational® ClearCase® VOBs that are locked in a particular registry region? 

ANSWER
To determine a listing of locked VOBs in a particular region, you need to run the cleartool lslock command. 

There is no method provided by ClearCase to list all VOBs that are locked. The cleartool lslock command works on a single VOB only. 

Example: 

C:\>cleartool lslock vob:\name
23-Jul.17:01 name lock versioned object base "\name" (locked)
"Locked for all users." 

 

Review the IBM Rational ClearCase Command Reference [http://publib.boulder.ibm.com/infocenter/cchelp/v7r0m0/topic/com.ibm.rational.clearcase.cc_ref.doc/topics/refintro.htm] on the topic of lslock (cleartool man lslock) for more information. 






You can write a simple script that can automate the task of listing all lock VOBs on the host using the following commands:

cleartool lsvob -short 

cleartool lslock

Examples: 

[http://www.ibm.com/i/v16/icons/fw_bold.gif] Microsoft® Windows® [javascript:void(0);] [javascript:void(0);] (click to expand) Using the Windows FOR command, you can obtain a listing of all VOBs in the region the server is set to.

Note: From the command line, type for /? for help information about the FOR command. 
for /F %v in ('cleartool lsvob -short') do cleartool lslock vob:%v

Example:

C:\>for /F %v in ('cleartool lsvob -short') do cleartool lslock vob:%v
08-Mar.14:44 jdoe lock versioned object base "\PVOB" (locked)
"Locked for all users."
21-Feb.08:29 jdoe lock versioned object base "\MyVOB" (locked)
"Locked for all users."
21-Feb.08:32 jdoe lock versioned object base "\test" (locked)
"Locked for all users."


[http://www.ibm.com/i/v16/icons/fw_bold.gif] UNIX® and Linux® [javascript:void(0)] [javascript:void(0)] (click to expand) Using the FOR shell command, you can obtain a listing of all VOBs in the region the server is set to.

Note: From the command line, type man <shell> (<shell> for which ever shell script you are running) for help information about the FOR command.
To list all the locked VOBs in a given region, type the following command:

for i in `cleartool lsvob -short -host <hostname>`; do cleartool lslock vob:$i; done

Example:

#> for i in `cleartool lsvob -short -host host1`; do cleartool lslock vob:$i; done
--04-05T14:26 root lock versioned object base "/vobs/top" (locked)
"Locked for all users."
--04-05T14:26 root lock versioned object base "/vobs/sys" (locked)
"Locked for all users."
--04-05T14:26 root lock versioned object base "/vobs/common" (locked)
"Locked for all users."
--04-05T14:26 root lock versioned object base "/vobs/ckvob2" (locked)
"Locked for all users."



RELATED INFORMATION
#Locking and unlocking all VOBs on the VOB server [http://www.ibm.com/support/docview.wss?uid=swg21136290]
Determine if and when and who locked a VOB [http://www.ibm.com/support/docview.wss?uid=swg21120455]