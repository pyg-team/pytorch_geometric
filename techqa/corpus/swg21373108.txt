Title: IBM Resource not found error, when trying to connect to ClearQuest Web - United States

Text:
1373108; CQ; CQ Web; CQWEB; 7.1; connect; login; repository; connection; CRVAP0237E; Resource; cq.dbset:; not found; db set; XalanMessages_1_10.dll; cqcoreutil.dll; cqexcpmsglib.dll; olch2du8.dll; drive; cqrpc cannot be run; Entry point not found; The procedure entry point XalanMessages_1_10_dat could not be located in the dynamic link library XalanMessages_1_10.dll; CRVSV0202E; Unable to start server: null; CRVSV0205E; Unable to start server: cqrpc.exe; RPC server unexpectedly terminated with exit code 128; CRVSV0898E; Unable to obtain an RPC server for a connection after one or more attempts (see previous log entries for possible reasons why). Server is probably too busy and cannot process additional requests at this time; RATLC02488515; PM40005 TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 This technote explains how to resolve a Resource error that can occur when trying to connect to IBM Rational ClearQuest Web 7.1.x. 

SYMPTOM
When accessing ClearQuest Web, the Repository field does not populate. After trying to connect, you receive the following error: 

 * 
 * CRVAP0237E Resource 'cq.dbset:<connection_name>' : not found.
 * 
 * 



[/support/docview.wss?uid=swg21373108&amp;aid=1] CAUSE
There are several causes of this problem. 

 1. On Microsoft Windows platforms, the program .dll files might not have been copied correctly. This might happen during the installation of ClearQuest server components. 1 
 2. This problem can occur when the database set connection is not properly configured on the server. 2 
 3. On UNIX/Linux and Windows platforms, this problem occurs with an incorrect deployment of the CM Server. 3


DIAGNOSING THE PROBLEM
 

To verify Cause 1, try manually starting the cqrpc.exe process from the command line. It is located in this directory by default: 

 * 
 * <drive>:\Program Files\IBM\RationalSDLC\common\CM\bin



You will receive this error message:  * cqrpc cannot be run. Entry point not found.
   The procedure entry point XalanMessages_1_10_dat could not be located in the dynamic link library XalanMessages_1_10.dll
   


The .dll file might be different than indicated in this example. Make note if what file is referenced here. 

Additionally, you can check the SystemOut.log file under <drive>:\Program Files\IBM\RationalSDLC\common\CM\profiles\cmprofile\logs\server1 for this output:  * 
 * 
 * CRVSV0202E Unable to start server: null: CRVSV0205E Unable to start server: cqrpc.exe: RPC server unexpectedly terminated with exit code 128
 * 
   
   CRVSV0898E Unable to obtain an RPC server for a connection after one or more attempts (see previous log entries for possible reasons why). Server is probably too busy and cannot process additional requests at this time.



Additionally, registering the XalanMessages_1_10.dll throws the following error :  * 
 * 
 * Regsvr32 "<drive>:\Program Files\IBM\RationalSDLC\common\XalanMessages_1_10.dll"
   XalanMessages_1_10.dll was loaded but the DllRegisterServer entry point was not found. The file cannot be registered.
 * 
   
   

To verify Cause 3, check for the following error in the SystemOut.log stack trace: 

NMSV0610I: A NamingException is being thrown from a javax.naming.context implementation. Details follow:context implementation: com.ibm.ws.naming.java.java..../CqRpc: First component in name CqRpc not found. [Root exception is org.omg.CosNaming.NamingContextPackage.NotFound: IDL:...

...Caused by: javax.naming.NameNotFoundException: Context: dfltcell/nodes/dfltNode/servers/server1, name: eis/com/ibm/rational/stp/server/oncrpc/CqRpc: First component in name CqRpc not found 

SystemOut.log is located in the following directory by default: Windows: 
<drive>:\Program Files\IBM\RationalSDLC\common\CM\profiles\cmprofile\logs\server1
UNIX/Linux: 
/opt/rational/common/CM/logs/server1/



RESOLVING THE PROBLEM
 

 

Resolution to Cause 1 

On the ClearQuest Web server, add the ClearQuest and Common directories of the Rational program files to the beginning of the system environment variable PATH. For example: if you installed ClearQuest with the default directory structure, like on the E: drive, then add the following paths: 

 * 
 * E:\Program Files\IBM\RationalSDLC\Common
 * 
 * E:\Program Files\IBM\RationalSDLC\ClearQuest



You also need to copy the specific .dll file(s) referenced in the error message discussed in the Diagnosing the problem section of this technote. You can copy them from this directory, assuming a default installation path: 

 * C:\Program Files\IBM\RationalSDLC\Common



Copy the referenced .dll file(s) into these directories:  * C:\Program Files\IBM\RationalSDLC\ClearQuest
 * 
 * C:\WINDOWS\system32

Unless you have multiple errors with multiple .dll files, you will typically only copy the XalanMessages_1_10.dll file. Only copy the necessary .dll files. If you copy files outside the context of the error message, it could cause problems with Perl for ClearQuest. 

You must reboot the server for these changes to take effect. 

Note: You might have to follow this process multiple times, as multiple .dll files can affect this. 

 

 

Resolution to Cause 2 

On Windows platforms:
1. Verify that a connection to the databases exists in the ClearQuest Maintenance Tool on the Web server. Also verify that this connection is valid by connecting to ClearQuest using a local client on the server.

2. Try exporting the ClearQuest Maintenance tool connections from the ClearQuest Web server. Re-run the Maintenance tool with Windows Run As Administrator permission (if using Windows 7 or Windows 2008 Server). Then, open the Windows registry and when you import the connections back in, watch under the following keys to ensure the connections are being written to the registry:

CQ Web server: 
HKEY_USERS\.DEFAULT\Software\Rational Software\ClearQuest\7.0.0

CQ Windows/Eclipse clients: HKEY_CURRENT_USER\Software\Rational Software\ClearQuest\7.0.0

Note: For Windows 64-bit systems, sometimes the proper registry key setting is under:
HKEY_LOCAL_MACHINE\Software\Wow6432node\Rational Software\ClearQuest\7.0.0

On Linux/UNIX platforms, make sure that the cqreg add_dbset command is run on the server. Also verify that the command successfully registers the connection. For more information on this command, see technote 1320850 [http://ibm.com/support/docview.wss?rs=988&uid=swg21320850]. 

If all is well, the output should look like this: 

 * 10:27:25 --- Default DB path is
 * 
 * /opt/rational/clearquest/CQDB_rgys/cqdb_registry/
 * 
 * 10:27:25 --- Default version is 7.0.0
 * 
 * 10:27:25 --- Add database set 7.0.0
 * 
 * 10:27:35 --- Master db registry needs to be created
 * 
 * 10:27:35 +++ Master db registry was created successfully
 * 
 * 10:27:35 --- Db registry SAMPL needs to be created
 * 
 * 10:27:35 +++ Db registry SAMPL was created successfully
 * 
 * 10:27:35 +++ Database set 7.0.0 successfully added
 * 
 * 10:27:35 ::: [cqreg has finished]
   
 * 


Resolution to Cause 3 

Running this script will redeploy the CM Server. After doing so, the connections will appear on the ClearQuest Web login screen without an error. These instructions assume a default installation path. 

On Microsoft Windows platforms, run the following commands, in order: 
1. cd <drive>:\Program Files\IBM\RationalSDLC\common\CM\scripts
2. "<drive>:\Program Files \IBM\RationalSDLC\common\CM\profiles\cmprofile\bin\wsadmin.bat" -f installAll.jacl -rationalDir "<drive>:\Program Files\IBM\RationalSDLC" -all

Note: For Windows 64-bit systems, make sure that the directory paths are correct and include (x86) if required. 

For UNIX/Linux platforms, run these commands, in order: 

 * 
 * 
 * cd /opt/RationalSDLC/common/CM/scripts
   
 * 
 * 
 * 
   /opt/RationalSDLC/common/CM/profiles/cmprofile/bin/wsadmin.sh -f 
   
 * 
 * 
 * 
   installAll.jacl -rationalDir /opt/rational -all
   




Alternate Resolutions 
 * Applying a Fix Pack to the ClearQuest installation has also been observed as a resolution to this problem. For example, if you are using the base 7.1.0.0 version, the error no longer occurs after upgrading to version 7.1.0.1. 
 * Verify that the ClearQuest home directory is in the PATH environment variable. See the solution for technote 1414944 [http://www.ibm.com/support/docview.wss?rs=988&uid=swg21414944] for details.

RELATED INFORMATION
#Japanese technote 1431736 [http://www.ibm.com/support/docview.wss?uid=swg21431736]






Cross reference information Segment Product Component Platform Version Edition Software Development Rational ClearQuest Command Line Tools Software Development Rational ClearQuest Web Server (7.1)