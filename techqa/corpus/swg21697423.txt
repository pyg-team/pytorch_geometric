Title: IBM TIP Windows service start failure with javacore files - United States

Text:
TIPL2; TIPL2CONF; Windows service; javacore; start TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 The Windows service for Tivoli Integrated Portal is failing to start and is producing javacore files in the <TIP HOME>/profiles/TIPProfile directory 

CAUSE
Corrupted shared classes cache. The most likely reason to corrupt a shared classes cache is because Windows suddenly stopped a thread/process while it is writing to the shared classes cache. Once the shared class is corrupted, it will cause crashes when the JDK is re-started.

DIAGNOSING THE PROBLEM
The javacore files created under <TIP Home>/profiles/TIPProfile/logs will contain stack messages including these lines:
ntdll!RtlDispatchException+0x22
ntdll!KiUserExceptionDispatcher+0x2e

RESOLVING THE PROBLEM
To avoid this issue is to edit the server.xml and change genericJvmArguments=""
to
genericJvmArguments="-Xshareclasses:none"





Restart the TIP for the above change to take effect. 

As an alternative, the following can be done each time it WAS service startup issue occurs: 

 1. Clear out the content of these temp folders. Leave the folders.
    <TIP home>/profiles/TIPProfile/wstemp
    <TIP home>/profiles/TIPProfile/temp
    <TIP home>/profiles/TIPProfile/config/temp 
 2. Clear the cache:
    <TIP home>/profiles/TIPProfile/bin/clearClassCache.sh
    <TIP home>/profiles/TIPProfile/bin/osgiCfgInit.sh 
 3. Clear the logs in the <TIP home>/profiles/TIPProfile/logs/server1 folder but leave the folder. 
 4. Disable the TIP Windows service. 
 5. Start TIP via command line: <TIP home>/profiles/TIPProfile/bin/startServer server1 
 6. Stop TIP via command line: <TIP home>/profiles/TIPProfile/bin/stopServer server1 -username <primary admin userID> -password <primary admin password> 
 7. Enable the TIP Windows services. 
 8. Start TIP from the Windows service.