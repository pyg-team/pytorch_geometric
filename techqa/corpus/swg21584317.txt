Title: IBM How to manually import Data from Short Term History Files - United States

Text:
SPA krarloff import TECHNOTE (FAQ)

QUESTION
 This technote explains how to manually import data from short term history files back into the Warehouse so that summarization and pruning can be carried out. 

ANSWER
This procedure depends the customer having the detailed data for this agent still available. If you do not have this, then there is no way to import this data. If the customer does have this, then the steps that must be followed are below. 

1. The first thing we need to do is look at your warehouse marker table, this is what the SPA uses to tell it when it last summarized/pruned the tables. You can get this output by running this SQL - 

db2 "select substr(originnode,1,31) originnode,substr(object,1,30) table, markerwritetime from warehousemarker" 

This should give you output similar to this - 

mastershake:KUX UNIX_IP_Address 1120125165959999 

mastershake:KUX UNIX_IP_Address_D 0700101000000000 

mastershake:KUX UNIX_IP_Address_H 0700101000000000 

3. Once you identify the table, you need to import the data you've exported back into the raw table, not the D/H versions. Then what we need to do is change the marker to a time just before you had the issue on the target node. 

4. The SQL for that would look something like this - 

db2 "update warehousemarker set markerwritetime='1120119185959999' where originnode='xxxxxxxxx:UA' and object='<raw_table_name>'" 

You will need to set the "markerwritetime" to just before the last updated time that you got from the first piece of SQL. Then, when the SPA runs again, it will pick up from that updated timestamp and proceed normally.