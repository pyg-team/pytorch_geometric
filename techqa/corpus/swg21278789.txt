Title: IBM P8PE-3.5.2 - Getting unhandled fault in after an invoke step - United States

Text:
pe 3.5.2 Received an unhandled fault in an invoke Invalid F_EndPointRefXXX TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 P8PE-3.5.2 - Getting unhandled fault in after an invoke step 

SYMPTOM
After an invoke system step in a workflow, the work item goes to the Conductor queue with the following error message:

F_LastErrorText..Malfunction: [Err=d56d007a] Received an unhandled fault in an
Invoke [filenet.vw.api.VWException: ssunas400(10.217.134.50) filenet.vw.api.VWException Invalid F_EndPointRefXXX. Parse error (line 1). The reference to entity "To" must end with the ';' delimiter.]
Stack (isheet/oper/onlineWO#/authWO#/timerref#/rpt/dly/excpisheet/excptype#):
(Workflow/Invoke/9/56/1/F/F/Malfunction/7) Malfunction: [Err=d56d007a] Received an unhandled fault in an Invoke [filenet.vw.api.VWException: ssunas400(10.217.134.50) filenet.vw.api.VWException Invalid F_EndPointRefXXX. Parse error (line 1). The reference to entity "To" must end with the ';' delimiter.]


CAUSE
This error is caused by a URL encoding issue. URL Encoding is the process of converting a string into valid URL format. Valid URL format means that the URL contains only what are termed "alpha | digit | safe | extra | escape" characters. You can read more about these terms on the World Wide Web Consortium site: 

http://www.w3.org/Addressing/URL/url-spec.html and

http://www.w3.org/International/francois.yergeau.html In this specific situation, The EndPoint URL was: http://webservername:9084/PSIGW/PeopleSoftServiceListeningConnector?From=N_FILENET&To=EFIND&MessageName=N_AP_IMG_INDEX_VALUES&MessageVersion=VERSION_1 Notice that the endpoint url has an & ampersand character in it. 


RESOLVING THE PROBLEM
Add an assignment step before the invoke step and replace '&' with '&amp;' 

F_EndPointRefInvokePSAP = "<wsa:EndPointReference xmlns:wsa=""http://schemas.xmlsoap.org/ws/2003/03/addressing ""> <wsa:Address>http://web server name :9084/PSIGW/PeopleSoftServiceListeningConnector?From=N_FILENET&amp;To=EFIND&amp;MessageName=N_AP_IMG_INDEX_VALUES&ampMessageVersion=VERSION_1</wsa:Address><WSDLEndPoint>" + EndPoint + "</WSDLEndPoint><wsa:ReferenceProperties/> </wsa:EndPointReference>" 




HISTORICAL NUMBER
 20006977 

PRODUCT ALIAS/SYNONYM
 ePROCESS SERVICES