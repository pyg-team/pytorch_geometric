Title: IBM Error: A view cannot be created under another view's storage directory or snapshot view storage directory. - United States

Text:
mkview; view; creation; storage; 1227672; cleartool: Error: A view cannot be created under another view's storage directory or snapshot view storage directory TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 This technote discusses an error, A view cannot be created under another view's storage directory or snapshot view storage directory, that will occur if you attempt to make a new view in an existing view's storage directory when using IBM Rational ClearCase on Microsoft Windows, UNIX or Linux. 

SYMPTOM
 

Attempts to create a view using cleartool mkview or make view GUI functionality, results in this error:

cleartool: Error: A view cannot be created under another view's storage directory or snapshot view storage directory.

CAUSE
 

There are various causes for this error which include these: 

 

 1. This error will occur when you attempt to create a new view in a directory which contains other view related files such as .view files. These files will exist in a directory that is currently (or was) in use as a view storage directory.
    
 2. This error has also been shown to be caused by left over view.dat files from snapshot views that were not removed correctly. The view.dat file resides in the view work space or view root; the location where the files are loaded. Be sure to check the parent directory and then traverse up the directory structure to the root of the drive as well. ClearCase will check those directories as well to ensure that the new view is not within another view.
    
 3. Attempts to make use of an existing (dynamic) view storage directory using cleartool mkview [http://publib.boulder.ibm.com/infocenter/cchelp/v7r0m0/topic/com.ibm.rational.clearcase.cc_ref.doc/topics/ct_mkview.htm?resultof=%22%6d%6b%76%69%65%77%22%20]will result in the above error. 
    
 4. The UNC global path is being assigned to an explicit Storage Location that is located inside another existing view. 

RESOLVING THE PROBLEM
 

Solution for Cause 1

As specified in the error, you cannot create a new view in an existing view's storage directory.

The location you specify for storing the new view should be a ClearCase server storage location [http://www-1.ibm.com/support/docview.wss?uid=swg21147041], a network share on Windows or an export on UNIX or Linux.

A network share is a location on a computer network, typically allowing multiple users on the same network to have a centralized space for storing and accessing data. You can review this Microsoft article 301198 [http://support.microsoft.com/kb/301198/en-us] for more information.

An export on UNIX or Linux is a way to make a local resource available for mounting by remote systems. For more information, you should refer to the man page for export or share. Otherwise, consult your systems administrator.

When creating a view, you should be sure that the directory is not in use by an existing view and that it does not contain remnants of a previous view, which may have not been properly removed.

A view directory contains the following files and directories: 

 * .access_info A file of view access event information that is periodically updated by the view_server.
   
   
 * .pid A one-line text file that lists the process ID of the view’s view_server process.
   
   
 * admin A directory that contains administrative data related to the amount of disk space a view is using. Use space –view to list this data.
   
   
 * config_spec A file that stores the view’s current config spec, in the form displayed by catcs.
   
   
 * .compiled_spec A modified version of config_spec, which includes accounting information.
   
   
 * .identity On UNIX, a subdirectory whose zero-length files establish the view’s owner and group memberships.
   
   
 * identity.sd On Windows, a binary data file that contains the security descriptor for the view storage directory.
   
   
 * .s A subdirectory that implements the view’s private storage area.
   
   
 * db A subdirectory containing the files that implement the view’s embedded database.


Refer to the IBM Rational ClearCase Administrator's Guide for more information on View Administration. 


Solution for Cause 2 

Check the selected location to store the snapshot view work space directory (view root) to see if any view.dat files exist. 
Note: The view.dat files is a hidden file on Windows, so the option to show hidden files and folders in Windows Explorer will need to be enabled before a search can be conducted for these files.

If found, remove them and attempt the view creation again.


Solution for Cause 3

Use these commands to get past this issue:


 * cleartool register -view <view storage directory> 
 * cleartool mktag -view -tag <viewtag> <view storage directory>


The view tag will now exist and the view can be started. 

Note: You will need to be the owner of the view storage directory to create a tag for the view. 


Solution for Cause 4 

Select the Advanced View options button and verify the UNC path under "Use Explicit Path". This path can not live inside another views .vws folder. 




Cross reference information Segment Product Component Platform Version Edition Software Development Rational ClearCase View: Snapshot Software Development Rational ClearCase View: Snapshot