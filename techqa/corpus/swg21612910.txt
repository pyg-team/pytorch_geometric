Title: IBM Insecure SSL Server Error when using Domain Configuration mode "Import" on 4.0 Firmware or newer - United States

Text:
0x81200008 0x83a00010 TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 If the user sets a Domain Configuration mode to "Import" and specifies an https URL location to retrieve the configuration, the domain import may fail if the remote SSL server is not patched to use RFC 5746 to prevent insecure SSL renegotiation. 

SYMPTOM
The domain import may fail and log errors similar to:

Import package - Could not open 'https://host/domain.zip'

url-open: Remote error on url 'https://host/domain.zip'

SSL handshake aborted due to detection of insecure SSL server




CAUSE
The "Import" Domain configuration mode requires that the remote SSL server hosting the configuration has been patched to use RFC 5746 for security purposes.

ENVIRONMENT
This scenario applies to when IBM WebSphere DataPower SOA Appliances using Firmware 4.0+ are configured to use the "Import" Domain configuration mode where the configuration files are fetched using SSL from an insecure remote SSL server.

DIAGNOSING THE PROBLEM
When using the Environment outlined above and experiencing the Symptom outlined above.

NOTE: This could occur when migrating from pre-4.0 Firmware to 4.0+ Firmware since the RFC 5746 enforcement was added in 4.0 Firmware.

RESOLVING THE PROBLEM
There is a toggle for service objects to allow "insecure" SSL server connections, but not for this particular management function for importing domain configuration through Domain configuration mode "Import".

Possible work arounds that may be used as a solution:

a. Patch the remote SSL server to only allow secure renegotiation per RFC 5746.
b. Use a non-ssl URL if acceptable
c. Use "Local" Configuration Mode and manually import the configuration using the "Import Configuration" button
d. Use a chained service to have more control over the SSL connection settings. 

For example, the user could configure the Domain Configuration "import-url" to point to a "chained" local XML Firewall using a non-ssl URL, then have the XML Firewall point to the insecure remote SSL server hosting the configuration.

In the XML Firewall configuration, enable the toggle to allow insecure SSL connections:

1. Click the XML Firewall icon on the Control Panel. 
2. Select the XML Firewall service to edit. 
3. Click the Advanced tab. 
4. Set Permit Connections to Insecure SSL Servers to on. 
5. Click Apply. Optional: Click Save Config.