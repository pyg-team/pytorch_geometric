Title: IBM Error messages in Atlas log when Matter Real Time Metrics Extraction Timer task is executed - United States

Text:
 TECHNOTE (FAQ)

QUESTION
 Why do we see error messages in Atlas log when Matter Real Time Metrics Extraction Timer task is executed? 

CAUSE
The error message below is caused by duplicate parent_legalnotice_id in the legalnotice table. Atlas expects a 1:1 relationship between noticeid and parent_legalnotice_id

"at org.quartz.core.JobRunShell.run(JobRunShell.java:191)
at org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:516)
CAUSED BY: SQLException: ORA-01427: single-row subquery returns more than one row"


ANSWER
 

 1. To identify the notice(s), Login to database as PSSAPL and run
    the following query:
    select * from legalnotice where parent_legalnotice_id IN (select
    parent_legalnotice_id from legalnotice group by parent_legalnotice_id
    having
    count(parent_legalnotice_id) > 1) 
 2. Identify the noticeid which has the same parent_legalnotice_id and status as " Inactive" 
 3.  Back up the database 
 4.  Run the following update statement to set the parent_legalnotice_id to null for the inactive notice. 
 5. UPDATE LEGALNOTICE SET PARENT_LEGAL_NOTICE_ID=null where NOTICEID=<noticeid of the Inactive Notice in step 2 above >; 
 6. commit; 
 7. Restart the Atlas application server 
 8. Monitor the Atlas log and confirm that the issue is resolved.