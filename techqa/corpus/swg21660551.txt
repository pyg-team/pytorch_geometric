Title: IBM Tivoli Integrated Portal install failure executing propagateTIPRoles.py - United States

Text:
TIPL2INST; Tivoli; Integrated; Portal; embedded; ILM; install; failure; propagate; TIPRoles.py TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 The propagateTIPRoles.py script will update the policy files for all applications deployed into Websphere. If this script fails during the upgrade, there exists a way to do this manually through the WebSphere Admin console. 

SYMPTOM
The Tivoli Integrated Portal portion of the ILMT 7.0 Base install failed with this error:

"CODBB0022E The installation of Tivoli Integrated Portal has failed with return code -1." 


CAUSE
During the post install portion of the install, the call to propagateTIPRoles.py failed.

ENVIRONMENT
This could happen for all TIP installs or upgrades.

DIAGNOSING THE PROBLEM
Errors in the TIPInstaller-00.log or TIPFPInstaller-00.log

2013-11-12 17:05:05.923+00:00 : INFO : propagateTIPRoles: (from AntRuntime.execute)
2013-11-12 17:05:05.939+00:00 : INFO : [echo] Propagate TIP Roles (from AntRuntime.execute)
2013-11-12 17:05:05.955+00:00 : INFO : [echo] C:\Program Files\IBM\TIP/bin/wsadmin.bat -lang jython -profileName TIPProfile -username xxxx -password xxxx -f C:\Program Files\IBM\TIP/profiles/TIPProfile/bin/propagateTIPRoles.py (from AntRuntime.execute)
2013-11-12 17:05:22.361+00:00 : FINE : PlanStepEventOccurred(Failed target 'step_00004_TIPCorePostConfig') (from com.ibm.ac.coi.ext.ia.COIWrapperPluginImpl.eventOccurred)
2013-11-12 17:05:22.377+00:00 : FINE : COIEventType.ERROR (from com.ibm.ac.coi.ext.ia.COIWrapperPluginImpl.eventOccurred) 

Errors in the MachinePlan.localhost.log:

Caused by: The following error occurred while executing this line:
C:\Program Files\IBM\TIP\_uninst\TIPInstall22\plan\install\MachinePlan_localhost\00004_TIPCorePostConfig\TIPCorePostConfig.xml:420: An exception was thrown when propagating TIP roles.
at org.apache.tools.ant.ProjectHelper.addLocationToBuildException(ProjectHelper.java:508)

RESOLVING THE PROBLEM
A work around for this issue is to bypass the call to propagateTipRoles.py during the upgrade and propagate the TIP Roles manually through the WebSphere Admin Console. 





 1) Make a backup copy of the TIPCorePostConfig.xml file on the cdimage: 
<INSTALL_IMAGE>/cdimage.fixpack/COI/PackageSteps/TIPCorePostConfig/
TIPCorePostConfig.xml 

 2) Remove call to propagateTIPRoles from the TIPCorePostConfig.xml file. 

The first line is commented out and no changes need to be made. The next line after the commented out line is where the change needs to be made, remove as shown: 

Before: 
<!--D254341
<target description="Configure a package" name="configure" depends="retrieveSigners, propagateTIPRoles,fixpackPatch,deployOSLC,fixDEPermission"> -->
<target description="Configure a package" name="configure" depends="fixConfigFile,retrieveSigners, propagateTIPRoles,fixpackPatch,deployOSLC">


After:
<!--D254341
<target description="Configure a package" name="configure" depends="retrieveSigners, propagateTIPRoles,fixpackPatch,deployOSLC,fixDEPermission"> -->
<target description="Configure a package" name="configure" depends="fixConfigFile, retrieveSigners, fixpackPatch,deployOSLC">

If there is any question about the exact line, please contact TIP Support for help.

3) Retry the installation.


When the installation is complete, log into TIP, then access the WebSphere Admin console and do the following: 

From TIP menu: 

Settings -> WebSphere Administrative Console -> Launch WebSphere administrative console 

Security -> Global security -> External authorization providers ( right side at bottom ) 

 

Check the "Update with all applications" option.

Click "Apply". 

When this is done, you will see a pop up that shows this: 

 "Changes have been made to your local configuration. You can" 

At this point select "Save" 

You can then log out of the WebSphere Admin console. 

If see any errors please collect logs in this technote and upload to the PMR that was opened for this issue:

www-304.ibm.com/support/docview.wss?uid=swg21502184