Title: IBM PI51216: DFHUS0002(CODE X'0309') PRODUCED DURING VERIFY PASSWORD COMMAND - United States

Text:
z/os  A FIX IS AVAILABLE
Obtain the fix for this APAR.


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  During ADD_USER_WITH_PASSWORD processing, DFHUSAD calls
   DFHXSSA to invoke RACF for a
   RACROUTE REQUEST=VERIFY,
              ENVIR=CREATE,
   
   The customer has code running at RACF exit ICHRIX01. The exit
   code is driven and decides to fail the call. The exit code
   tells RACF to fail the call and RACF returns to CICS with
   SAF_RESPONSE(8) SAF_REASON(0) and ESM_RESPONSE(18)
   ESM_REASON(0) to indicate the call was failed by the
   installation exit routine.
   
   DFHXSSA does not expect this combination of return code and
   raises and exception for UNKNOWN_ESM_RESPONSE.  This is
   percolated back up to DFHUSAD who issues message DFHUS0002 and
   causes a system dump to be produced.
   
   DFHUS0002  A severe error (code X'0309') has occurred in module
              DFHUSAD.
   
   DFHXSSA needs to be updated to understand and handle the
   response and reason codes more gracefully.
   
   Additional Symptom(s) Search Keyword(s): KIXREVRER
   MSGDFHUS0002 verify_password
   
   
    
   
   

LOCAL FIX

PROBLEM SUMMARY
 *  ****************************************************************
   * USERS AFFECTED: All CICS users                               *
   ****************************************************************
   * PROBLEM DESCRIPTION: The message IRR016I VERIFICATION FAILED *
   *                      BY RACF INSTALLATION EXIT is followed   *
   *                      by message DFHUS0002 applid A severe    *
   *                      error (code X'0309') has occurred in    *
   *                      module DFHUSAD.                         *
   ****************************************************************
   * RECOMMENDATION:                                              *
   ****************************************************************
   A transaction issues an EXEC CICS VERIFY PASSWORD() USERID()
   command or an EXEC CICS VERIFY PHRASE() USERID() command for
   which CICS issues a RACROUTE REQUEST=VERIFY(X) request.
   The request is failed by RACF exit ICHRIX01 with RC=4.
   This is returned to the CICS security domain as SAF_RESPONSE=8x,
   ESM_RESPONSE=18x and ESM_REASON=00x which it does not expect.
   The result is an UNKNOWN_ESM_RESPONSE and a severe error
   (code X'0309') in module DFHUSAD and an SVC dump with dump code
   US0002.  The transaction is abended with abend code AEXZ.
   
   Additional keywords:
   IRR016I msgIRR016I DFHUS0002 msgDFHUS0002 AEXZ abendAEXZ
   
   
    
   
   

PROBLEM CONCLUSION
 *  The module DFHXSSA and DFHXSSB have been changed for a RACROUTE
   REQUEST=VERIFY(X) request to expect SAF_RESPONSE=8x,
   ESM_RESPONSE=18x and ESM_REASON=00x.
   In this case an EXEC CICS VERIFY PASSWORD() USERID() command
   is returned RESP=NOTAUTH, RESP2=2, ESM_RESP=18 and ESM_REASON=0.
   
   The CICS TS Application Programming Reference manual is updated
   for VERIFY PASSWORD and for VERIFY PHRASE to explain the
   condition NOTAUTH for ESM_RESPONSE = 18x (decimal 24).
   
   VERIFY PASSWORD
   ---------------
   Conditions
   
   70 NOTAUTH
     RESP2 values:
        2 The supplied password is wrong. If the external security
          manager is RACF, the revoke count maintained by RACF is
          incremented.  However, if ESM RESP = 24 the revoke count
          is not incremented.
        3 A new password is required.
       19 The user ID is revoked.
       20 The user's connection to their default group has been
          revoked.
   
     ESM RESP values:
       24 The RACROUTE REQUEST=VERIFY(X) was failed by an ICHRIX01
          installation exit routine.
     Default action: terminate the task abnormally.
   
   VERIFY PHRASE
   -------------
   Conditions
   
   70 NOTAUTH
     RESP2 values:
        2 The supplied password or password phrase is wrong.
          If the external security manager is RACF , the revoke
          count maintained by RACF is incremented.  However, if
          ESM RESP = 24 the revoke count is not incremented.
        3 A new password or password phrase is required.
       19 The user ID is revoked.
       20 The user's connection to their default group has been
          revoked.
     ESM RESP values:
       24 The RACROUTE REQUEST=VERIFY(X) was failed by an ICHRIX01
          installation exit routine.
     Default action: terminate the task abnormally.
   
   
    
   
   

TEMPORARY FIX
 *  FIX AVAILABLE BY PTF ONLY
   
   
    
   
   

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   PI51216
   
   
 * REPORTED COMPONENT NAME
   CICS TS Z/OS V5
   
   
 * REPORTED COMPONENT ID
   5655Y0400
   
   
 * REPORTED RELEASE
   800
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt / Xsystem
   
   
 * SUBMITTED DATE
   2015-10-26
   
   
 * CLOSED DATE
   2016-06-14
   
   
 * LAST MODIFIED DATE
   2016-07-04
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
    PI61629 PI61666 [http://www-01.ibm.com/support/docview.wss?uid=swg1PI61666] UI38869 UI38870
   
   

MODULES/MACROS
 *  DFHUSAD  DFHXSSA  DFHXSSB
   
   
    
   
   

Publications Referenced SC34284500 SC34726700 FIX INFORMATION
 * FIXED COMPONENT NAME
   CICS TS Z/OS V5
   
   
 * FIXED COMPONENT ID
   5655Y0400
   
   

APPLICABLE COMPONENT LEVELS
 * R800 PSY UI38869 [HTTPS://WWW14.SOFTWARE.IBM.COM/WEBAPP/SET2/ORDERMEDIA/SHOPCART?PTFS=UI38869]
   UP16/07/01 P F606
   
   
 * R900 PSY UI38870 [HTTPS://WWW14.SOFTWARE.IBM.COM/WEBAPP/SET2/ORDERMEDIA/SHOPCART?PTFS=UI38870]
   UP16/07/01 P F606
   
   

FIX IS AVAILABLE
 * SELECT THE PTF APPROPRIATE FOR YOUR COMPONENT LEVEL. YOU WILL BE REQUIRED TO SIGN IN. DISTRIBUTION ON PHYSICAL MEDIA IS NOT AVAILABLE IN ALL COUNTRIES.