Title: IBM Configuring the nco_p_xml.env script CLASSPATH - United States

Text:
nco_p_xml; ApacheMQ; apache mq; CLASSPATH; classpath; nonnative; nsprobe; log4j-1.2.14.jar; log4j; slf4j-log4j12-1.5.11.jar; slf4j; slf4j-log4j TECHNOTE (FAQ)

QUESTION
 nco_p_xml probe : "Apache MQ 5.5.1 : Cannot get events". Why is this message seen? 

CAUSE
Apache MQ 5.5.1 requires the logging jars as well as the Apache MQ jar file

ANSWER
 

The XML message bus probe requires the correct JAR files to connect to the Apache MQ server. 

 

For Apache MQ 5.5.1 the XML probe requires three jar files:
activemq-all-5.5.1.jar
lib/optional/log4j-1.2.14.jar
lib/optional/lslf4j-log4j12-1.5.11.jar

The recommendation is to use the latest Non-Native probes probe specific environment script alongside a dedicated probe directory [${OMNIHOME}/probes/java/nco_p_xml] to hold the additional JAR files. 


In the latest Non-Native probe the probe specific nco_p_xml.env script can be used to set the probes CLASSPATH:

vi $NCHOME/omnibus/probes/java/nco_p_xml.env
CLASSPATH=${OMNIHOME}/probes/java/${PROGRAM}:$CLASSPATH
CLASSPATH=$CLASSPATH:${OMNIHOME}/probes/java/${PROGRAM}/log4j-1.2.14.jar
CLASSPATH=$CLASSPATH:${OMNIHOME}/probes/java/${PROGRAM}/slf4j-log4j12-1.5.11.jar
CLASSPATH=$CLASSPATH:${OMNIHOME}/probes/java/${PROGRAM}/activemq-all-5.5.1.jar
echo "CLASSPATH= " $CLASSPATH
#EOF
:wq

Where the directory $NCHOME/omnibus/probes/java/nco_p_xml contains all of the required jar files and the JNDI property file: 

 * activemq-all-5.5.1.jar 
 * log4j-1.2.14.jar 
 * slf4j-log4j12-1.5.11.jar 
 * jndi.properties 
 * jmsTransport.properties 
 * transformers.xml 


With the probe property file referring to the files: 
TransportType : 'JMS' 
TransformerFile : '$NCHOME/omnibus/probes/java/nco_p_xml/transformers.xml' 
TransportFile : '$NCHOME/omnibus/probes/java/nco_p_xml/jmsTransport.properties' 

Please refer to Support's Guide to The Message Bus [XML] Integration for further details. RELATED INFORMATION
 Apache MQ server [http://activemq.apache.org]
Support's Guide to the Message Bus Integration [http://www-01.ibm.com/support/docview.wss?uid=swg21622274]