Title: IBM MustGather: Host On-Demand Redirector problems when using SSL - United States

Text:
gskit; ssl; redirector; gather; 1220238; MUSTGATHERDOCUMENT; must gather; mustgather; collecting data; HOD TECHNOTE (FAQ)

QUESTION
 What information should be collected when experiencing problems with the IBM Rational Host On-Demand redirectory when SSL is enabled? 

ANSWER
You need to gather multiple sources of documentation for IBM Support to determine the cause of the problem you are reporting.
The following diagram shows the location in the network where traces should be collected. 


Client PC <Trace A><---network---> <Trace B> Redirector <-------->Telnet Host 

 

From the Client PC, gather 

 * Java console 
 * Transport trace


The transport trace instructions are below.  

For problems involving the Redirector, gather 

 * the Redirector log 
 * IP Connection trace 
 * GSKit traces
   


Review all the sections in this MustGather to prepare for gathering a trace showing one recreate through all the trace points.  

Host On-Demand Level 3 Transport Trace

Enable the Host On-Demand Service Manager Tracing for the Redirector

Enable GSKIT Tracing

Final Step: Using the Configured Trace Options to Gather Traces

What to do Next




 

Obtain a Host On-Demand Level 3 Transport Trace for the Host On-Demand Client 

There are two ways to collect depending on the type of html files you are using. 

 *  If you are using Host On-Demand HTML files created using the Deployment Wizard, you can enable transport tracing by adding the TraceOptions parameter to the APPLET tag in your HTML file. The easiest way to add this parameter is using the Deployment Wizard. To enable Transport tracing using the Deployment Wizard, do the following:  1.  Open the Host On-Demand Deployment Wizard to create a new or edit an existing HTML file. 
    2.  Click through the windows until you reach the Additional Options window. Click the Advanced Options button. 
    3.  Click Problem Determination in the left tree view. 
    4.  Select Advanced. 
    5.  Enter the name of the log file in the 'Log file name' field. The Deployment Wizard provides the default file name hodtrace.txt, but you can change it if you wish. For UNIX based client platforms, include the absolute path to where you want to save the file. For Microsoft Windows client platforms, if you do not specify an absolute path, the log file will be saved to the client desktop. 
    6.  Select Enable transport trace. 
    7.  Click OK. 
    8.  Finish creating your HTML file.
        
        To capture a trace of the problem after you have enabled transport tracing, do the following: 
    9.  Start the Host On-Demand client. Once the desktop appears, the Host On-Demand Automatic Component Trace window appears noting that tracing has started. You might have to move other windows around to find this window. 
    10. Click the session icon, if the session does not auto-start. 
    11. Switch to the emulator window and recreate the problem. Do not close the trace window. 
    12. When the problem occurs again, select the Host On-Demand Automatic Component Trace window. The window might now be hidden behind other windows. Select the END trace option and click OK. 
    13. Open the browser's Java Console and copy the contents to a text file (*.txt). Make sure you obtain all the Java Console entries. The Java Console might be multiple windows in length. For more information, refer to Displaying the Java Console [https://www.ibm.com/support/knowledgecenter/SSS9FA_12.0.0/com.ibm.hod.doc/doc/troubleshoot/javaconsole.html]. 
        
   
   If you are not using Host On-Demand HTML files created using the Deployment Wizard, then use the HODDebug.html, the Host On-Demand client with problem determination from HODMain.html when gathering the requested traces. To use the transport trace, do the following:  1.  Start the host session you want to trace if it does not auto-start. 
    2.  Select Actions from the session menu. 
    3.  Select Problem Determination. 
    4.  Select Trace Facility. 
    5.  Click Host Access Class Library in the Function window to highlight it. 
    6.  Click Transport in the Component window to highlight it. 
    7.  Click Level 3 in the Trace Level window to highlight it. 
    8.  Click Settings. 
    9.  Set the file to be saved on the local machine. 
    10. Click OK. 
    11. Click Start. 
    12. Do not close the trace window. 
    13. When the problem occurs again, select the Host On-Demand Trace Facility window. The window might now be hidden behind other windows. Select the END trace option and click OK. 
    14. Open the browsers Java Console and copy the contents to a text file (*.txt). Make sure you obtain all the Java Console entries. The Java Console might be multiple windows in length. For more information, refer to Displaying the Java Console [https://www.ibm.com/support/knowledgecenter/SSS9FA_12.0.0/com.ibm.hod.doc/doc/troubleshoot/javaconsole.html]. 
   
   

 Back to top 

Enable the Host On-Demand Service Manager Tracing for the Redirector 

On the Host On-Demand server, enable the Host On-Demand Redirector tracing by doing the following: 

 

 *  Logon to HODADMIN. On Left Panel select Redirector Service. Select Change and enable connection logging and specify a log file name. If it is possible to know the IP address of the failing client, update the field IP Trace with the client's IP address. Select Services, highlight the Redirector selection to be traced. On Left Panel select Services. Select Service Manager Trace Select Yes for Set trace to Active and set it to level 3. Stop and restart the Redirector Service. 

 Back to top 

Enable GSKIT Tracing 

 

Enable the GSKIT SSL trace on the Host On-Demand server by making the following modifications to the Host On-Demand server environment: 

 *  Add the following two System Variables to the Windows Environment in the system properties of the Host On-Demand Server machine. Go to the Control Panel. Select System. Select the Advanced Tab. Find Environment Variables. Under System Variables, Add the two below. 
 * 


To start the GSKIT trace, do the following:  * 
 * 
 *  Variable value= filespec (filespec=Where you want the trace to be located, 
   for instance c:\gsktrace.trc)


Start Native SSL Trace  * 
 * 
 * Variable value= Yes 
 * 


The native SSL trace information gets created in the Host On-Demand private directory as the file, NativeSSLTrace.trc. To enable the Gskit Trace and Server trace on AIX and Linux, do the following: 

 * 
 * 


You can create the environment variable in either of the two ways: setenv GSK_TRACE_FILE value (full path and filename) 

csh example: 

setenv GSK_TRACE_FILE /usr/IBM/logs/gsktrace_log 

OR 

export GSK_TRACE_FILE=value (full path and filename) 

ksh example: 

export GSK_TRACE_FILE=/usr/IBM/logs/gsktrace_log 

 

Repeat this process and create the SVR_START_TRACE variable and trace log. 

 



 Back to top 

Final Step: Using the Configured Trace Options to Gather Traces 

Restart the sessions from the Host On-Demand Session Icons on the Host On-Demand desktop. 

 1. Recreate the problem. 
 2. Select Stop on the transport trace window. 
 3. Select Save on the trace window to save this file.


Gather the following files to send IBM: 

 * Gskit trace, gsk.tr or what ever you named it in the environment variable 
 * NativeSSLTrace.trc 
 * The Host On-Demand service manager located in the Host On-Demand private folder under NCoDServices.RAS.txt 
 * The client java console from #1 above 
 * The client transport trace from # 1 above 
 * The CustomizedCAs.p12 or jks file and the server certificate being used


 Back to top 

 

What to do next? 
Once you have collected the MustGather information, submit the diagnostic information to IBM support. See the [http://www-1.ibm.com/support/docview.wss?rs=132&context=SS5RCF&dc=DB520&uid=swg21208712&loc=en_US&cs=utf-8&lang=en]"IBM Software Support Exchanging information with IBM Technical Support" [http://www-01.ibm.com/software/support/exchangeinfo.html] page for specific information. 

For a listing of all technotes, downloads, and educational materials specific to IBM Host On-Demand, see the Host On-Demand support portal [http://www-947.ibm.com/support/entry/portal/Overview/Software/Rational/Rational_Host_On-Demand].