Title: IBM IZ34554: SYSROUTE OF IZ93583:MULTIPLE COPIES OF TRUST CERTS CAUSES FBTSOC008E EXCEPTION - United States

Text:
  FIXES ARE AVAILABLE
Tivoli Federated Identity Manager 6.2.0 Fixpack 3 (6.2.0-TIV-TFIM-FP0003) [http://www-01.ibm.com/support/docview.wss?uid=swg24024318]
Tivoli Federated Identity Manager 6.2.0 Fixpack 8 (6.2.0-TIV-TFIM-FP0008) [http://www-01.ibm.com/support/docview.wss?uid=swg24025908]
Tivoli Federated Identity Manager 6.2.0 Fixpack 9 (6.2.0-TIV-TFIM-FP0009) [http://www-01.ibm.com/support/docview.wss?uid=swg24029497]
Tivoli Federated Identity Manager 6.2.0 Fixpack 13 (6.2.0-TIV-TFIM-FP0013) [http://www-01.ibm.com/support/docview.wss?uid=swg24032915]


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  Customer on FIM 6.1.1, observes the following exception:
   -------------------------------------
   [1/12/07 3:18:40:369 GMT] 0000002a SoapClientTru >
   com.tivoli.am.fim.soap.client.trust.SoapClientTrustManager
   checkClientTrusted ENTRY
   [1/12/07 3:18:40:371 GMT] 0000002a SoapClientTru 2
   com.tivoli.am.fim.soap.client.trust.SoapClientTrustManager
   checkClientTrusted Authentication Type = UNKNOWN; Certificate
   chain = [ [ CERTIFICATE 0:  SUBJECT = CN=Test-Only, OU=Tivoli
   Systems, O=IBM, C=US ISSUER = CN=Test-Only, OU=Tivoli Systems,
   O=IBM, C=US SERIALNUMBER = 999106950 ] ]
   [1/12/07 3:18:40:372 GMT] 0000002a SoapClientTru >
   com.tivoli.am.fim.soap.client.trust.SoapClientTrustManager
   checkServerTrusted ENTRY
   [1/12/07 3:18:40:372 GMT] 0000002a SoapClientTru 2
   com.tivoli.am.fim.soap.client.trust.SoapClientTrustManager
   checkServerTrusted Authentication Type = RSA; Certificate chain
   = [ [ CERTIFICATE 0:  SUBJECT = CN=Test-Only, OU=Tivoli Systems,
   O=IBM, C=US ISSUER = CN=Test-Only, OU=Tivoli Systems, O=IBM,
   C=US SERIALNUMBER = 999106950 ] ]
   [1/12/07 3:18:40:374 GMT] 0000002a HttpClientImp I
   com.tivoli.am.fim.soap.client.HttpClientImpl doRequest
   javax.net.ssl.SSLHandshakeException: unknown certificate
    at com.ibm.jsse.bv.a(Unknown Source)
    at com.ibm.jsse.bv.startHandshake(Unknown Source)
    at com.ibm.net.ssl.www2.protocol.https.b.o(Unknown Source)
   --------------------------------------------------
   
   Looking at the logs, we do see the 999106950 being added to list
   
   -------------------------------------------------
   [1/12/07 3:17:57:219 GMT] 0000000a KessServiceCl >
   com.tivoli.am.fim.kess.service.jks.mgmt.KessServiceClientConfigu
   ration$ClientConfigurationBeanList add ENTRY
   [1/12/07 3:17:57:220 GMT] 0000000a KessServiceCl 1
   com.tivoli.am.fim.kess.service.jks.mgmt.KessServiceClientConfigu
   ration addToCCBList certificate with dn [cn=test-only,ou=tivoli
   systems,o=ibm,c=us] and serial [999106950] was added to list
   which now contains 1 certificates.
   [1/12/07 3:17:57:220 GMT] 0000000a KessServiceCl 1
   com.tivoli.am.fim.kess.service.jks.mgmt.KessServiceClientConfigu
   ration addToCCBList webseal.jks: alias=webseal_webseal-test-only
   [1/12/07 3:17:57:220 GMT] 0000000a KessServiceCl 1
   com.tivoli.am.fim.kess.service.jks.mgmt.KessServiceClientConfigu
   ration displayClientConfigurationBeanList [[dn:
   cn=test-only,ou=tivoli systems,o=ibm,c=us][count: 1][certificate
   list: [serial: 999106950 NotBefore: [Tue Aug 28 17:42:30 GMT
   2001] NotAfter: [Sat Aug 27 17:42:30 GMT 2011] PrivateKey:
   true]]]
   --------------------------------------------------
   
   We have  tried numerous times to re-enter the "Server
   Certificate Validation for SOAP" for partner configuration.
   However  FIM never reconizes the server cert, which is
   webseal-test-only cert. The webseal-test-only cert for this case
   was imported into seperate keystore 'webseal' with label
   'webseal-test-only'. We also inserted the same cert in
   DefaultTrustedKeyStore, which FIM reconizes as a dup, thereby
   not adding to list of key service.
   
   
    
   
   

LOCAL FIX
 *  workaround is remove all duplicate trusted certs from all
   keystores defined in FIM 'key service'
   
   
    
   
   

PROBLEM SUMMARY
 *  TFIM runtime can fail to establish an SSL conne
   ction when performing an SSO operation and an exception can be f
   ound in the log for the WAS running TFIM.
   
   
    
   
   

PROBLEM CONCLUSION
 *  The fix for this APAR is expected to be cont
   ained in the following maintenance delivery vehicle:
   | fix pack | 6.2.0-TIV-TFIM-FP0001
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   IZ34554
   
   
 * REPORTED COMPONENT NAME
   TIV FED ID MGR
   
   
 * REPORTED COMPONENT ID
   5724L7300
   
   
 * REPORTED RELEASE
   620
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2008-10-13
   
   
 * CLOSED DATE
   2008-10-13
   
   
 * LAST MODIFIED DATE
   2008-10-13
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
    IY93583 [http://www-01.ibm.com/support/docview.wss?uid=swg1IY93583]
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   TIV FED ID MGR
   
   
 * FIXED COMPONENT ID
   5724L7300
   
   

APPLICABLE COMPONENT LEVELS
 * R620 PSN
   UP