Title: IBM IC81063: FDC PROBE DN1494001 WHEN V7.1 CLIENT CONNECTS TO V6.0 SERVER. - United States

Text:
  A FIX IS AVAILABLE
Fix Pack 7.1.0.2 for WebSphere MQ V7.1 [http://www-01.ibm.com/support/docview.wss?uid=swg24033287]


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  ERROR DESCRIPTION:
   Customer reports  V7.1 client connects OK to a V6.0 server but
   FDC is generated on disconnect.  The application is an XMS or
   other .Net application using the WMQ Managed .Net client.
   
   The FDC contains:
   
   | Probe Id          :- DN1494001
   |
   | Application Name  :- MQM
   |
   | Component         :- MQFAPConnection.SendTSH(MQTSH)
   |
   | SCCS Info         :-
   lib/dotnet/pc/winnt/nmqi/managed/MQFAPConnection.cs 1. |
   |                      72
   |
   | Line Number       :- 1485
   ...
   | Major Errorcode   :- 0x20009504
   |
   | Minor Errorcode   :- OK
   |
   | Probe Type        :- MSGAMQ9504
   |
   | Probe Severity    :- 2
   |
   | Probe Description :-
   |
   | FDCSequenceNumber :- 0
   |
   | Arith1            :- 2
   |
   |Comment1          :- Incorrect TSH type for communication flow
   |
   | Comment2          :- TSHTYPE = 2 Expected type = 1
   
   With Stack Trace:
      at System.Environment.GetStackTrace(Exception e, Boolean
   needFileInfo)
      at System.Environment.get_StackTrace()
      at IBM.WMQ.ManagedCommonServices.FFST(String objectId,
   String sccsid, String lineno, UInt32 component, UInt32 method,
   UInt32 probeid, UInt32 tag, UInt16 alert_num)
      at IBM.WMQ.CommonServices.FFST(String objectId, String
   sccsid, String
   lineno, UInt32 component, UInt32 method, UInt32 probeid, UInt32
   tag, UInt16 alert_num)
      at IBM.WMQ.MQBase.FFST(String sccsid, String lineno, UInt32
   method, UInt32 probeid, UInt32 tag, UInt16 alert_num)
      at IBM.WMQ.Nmqi.MQFAPConnection.SendTSH(MQTSH tsh)
      at IBM.WMQ.Nmqi.MQFAPConnection.Disconnect()
      at IBM.WMQ.Nmqi.MQFAPConnection.RemoveSession(Int32 convId,
   Boolean informQmgr)
      at IBM.WMQ.Nmqi.MQSession.Disconnect()
      at IBM.WMQ.MQFAP.Disconnect(ManagedHconn remoteHconn, Int32&
   pCompCode, Int32& pReason)
      at IBM.WMQ.MQFAP.MQDISC(Phconn phconn, Int32& pCompCode,
   Int32& pReason)
   .
   Additional symptoms:
   AMQ9504: A protocol error was detected for channel 'Incorrect
     TSH type for communication flow'.
   AMQ6183: An internal WebSphere MQ error has occurred.
   
   
    
   
   

LOCAL FIX

PROBLEM SUMMARY
 *  ****************************************************************
   USERS AFFECTED:
   Customers using the managed .Net client to connect to V6.0 queue
   managers or when shared conversations (multiplexing) on the
   channel has been disabled.
   
   Platforms affected:
   Windows
   
   ****************************************************************
   PROBLEM SUMMARY:
   For non-multiplexed channels the MQ .Net managed client
   disconnect function was sending data not allowed by the
   protocol.  This was caught by an internal consistency check that
   issued the FDC.
   
   
    
   
   

PROBLEM CONCLUSION
 *  The managed .Net client Disconnect function was corrected to use
   the correct protocol when multiplexing was not in use.
   
   ---------------------------------------------------------------
   The fix is targeted for delivery in the following PTFs:
   
                      v7.1
   Platform           Fix Pack 7.1.0.2
   --------           --------------------
   Windows            7.1.0.2
   
   The latest available maintenance can be obtained from
   'WebSphere MQ Recommended Fixes'
   http://www-1.ibm.com/support/docview.wss?rs=171&uid=swg27006037 [http://www-1.ibm.com/support/docview.wss?rs=171&uid=swg27006037]
   
   If the maintenance level is not yet available information on
   its planned availability can be found in 'WebSphere MQ
   Planned Maintenance Release Dates'
   http://www-1.ibm.com/support/docview.wss?rs=171&uid=swg27006309 [http://www-1.ibm.com/support/docview.wss?rs=171&uid=swg27006309]
   ---------------------------------------------------------------
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   IC81063
   
   
 * REPORTED COMPONENT NAME
   WMQ WINDOWS V7
   
   
 * REPORTED COMPONENT ID
   5724H7220
   
   
 * REPORTED RELEASE
   710
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2012-01-27
   
   
 * CLOSED DATE
   2012-02-29
   
   
 * LAST MODIFIED DATE
   2013-04-04
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   WMQ WINDOWS V7
   
   
 * FIXED COMPONENT ID
   5724H7220
   
   

APPLICABLE COMPONENT LEVELS
 * R710 PSY
   UP