Title: IBM OA37005: EVENT PUMP SENDS MALFORMED EIF EVENTS - United States

Text:
z/os  A FIX IS AVAILABLE
Obtain the fix for this APAR.


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  Problem is related to the presence of event with Severity =
   Indeterminate on the TIP. Those events contain very few
   infomation (only AlertGroup, AlertKey and Agent contain
   meaningful information). Customer checked the EIF probe log
   matching the event based on the last occurrence field value and
   found an error saying:
   
   "Received a malformed alarm, Handling it as best as possible."
   
   In particular customer identified event DSNR035I (coming from
   DB2) as the "malformed" event causing the error.
   
   The specific event as it appears on the system console is the
   following:
   
   DSNR035I  =DV2P DSNRPBCW WARNING -
   
   AFTER 70 CHECKPOINTS -
             CORRELATION NAME = INIF92R0
             CONNECTION ID  = BATCH
             LUWID = ATNETWRK.SYSDV2P.C7ECE9221826
             PLAN NAME = PANNBT
             AUTHID = STCANA
             END USER ID = *
             TRANSACTION NAME = *
             WORKSTATION NAME = *
   
   The problem is in the formatting of the event on the Event Pump
   side when there is a "*" character in the message text.
   Customer checked some of the "malformed" events and all have
   the "*" character in the text while same event (with same
   message id like DSNR035I) with no "*" character are well
   formatted.
   
   Event Pump L3 engineers investigated that DSNR035I message
   contains hex zeroes after  the asterisk (*) character. Event
   Pump C code which sends EIF messages to the OMNIbus considers
   it as the end-of-line. That is why customer sees corrupted
   messages on the distributed side.
   
   
    
   
   

LOCAL FIX

PROBLEM SUMMARY
 *  ****************************************************************
   * USERS AFFECTED: All Tivoli Event Pump for z/OS users.        *
   ****************************************************************
   * PROBLEM DESCRIPTION: Tivoli Event Pump for z/OS sends        *
   *                      corrupted events to Tivoli EIF          *
   *                      Probe server.                           *
   ****************************************************************
   * RECOMMENDATION: Apply the PTF.                               *
   ****************************************************************
   Tivoli Event Pump for z/OS generates and sends malformed EIF
   events to the Tivoli EIF Probe server. Malformed events are cut
   off and not properly shown on Netcool/OMNIbus side.
   
   In most cases, users see purple events with cut-off/empty
   Summary field in Netcool/OMNIbus console. For example, DSNR035I
   message is malfomed for cases if it contains asterisk (*)
   characters in the message text.
   
   Malformed events could also appear on Netcool/OMNIbus console
   from any EDI feed which sends low values (hex zeroes) in EDI
   message body.
   
   
    
   
   

PROBLEM CONCLUSION
 *  The problem is in the formatting of the EIF events on the Tivoli
   Event Pump for z/OS side. DSNR035I message contains hex zeroes
   after the asterisk (*) character. Event Pump C code which sends
   EIF messages to the Netcool/OMNIbus servers considers it as the
   end-of-line and cut off the message.
   
   Current update fixes this issue and translates all low values in
   message body into blank characters. This also makes it possible
   to pass messages containing low values by using the EDI feeds.
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   OA37005
   
   
 * REPORTED COMPONENT NAME
   EVENT PUMP FOR
   
   
 * REPORTED COMPONENT ID
   5698B3400
   
   
 * REPORTED RELEASE
   420
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2011-07-12
   
   
 * CLOSED DATE
   2011-10-03
   
   
 * LAST MODIFIED DATE
   2012-01-01
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
    UA62469 UA62470 UA62471
   
   

MODULES/MACROS
 *  GTMEIF03 GTM2TEC
   
   
    
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   EVENT PUMP FOR
   
   
 * FIXED COMPONENT ID
   5698B3400
   
   

APPLICABLE COMPONENT LEVELS
 * R420 PSY UA62469 [HTTPS://WWW14.SOFTWARE.IBM.COM/WEBAPP/SET2/ORDERMEDIA/SHOPCART?PTFS=UA62469]
   UP11/12/08 P F112
   
   
 * R421 PSY UA62470 [HTTPS://WWW14.SOFTWARE.IBM.COM/WEBAPP/SET2/ORDERMEDIA/SHOPCART?PTFS=UA62470]
   UP11/12/08 P F112
   
   
 * R422 PSY UA62471 [HTTPS://WWW14.SOFTWARE.IBM.COM/WEBAPP/SET2/ORDERMEDIA/SHOPCART?PTFS=UA62471]
   UP11/12/08 P F112
   
   

FIX IS AVAILABLE
 * SELECT THE PTF APPROPRIATE FOR YOUR COMPONENT LEVEL. YOU WILL BE REQUIRED TO SIGN IN. DISTRIBUTION ON PHYSICAL MEDIA IS NOT AVAILABLE IN ALL COUNTRIES.