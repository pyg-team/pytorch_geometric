Title: IBM Property Searches using the LIKE operator and Force Case-Insensitive Search on IBM FileNet Content Manager with DB2 LUW - United States

Text:
search; LIKE operator; FCIS; DB2 TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 Enabling Force Case-Insensitive Search (FCIS) for an object store causes Content Engine queries to be issued with the LOWER() operator on string columns and values in the WHERE clause. In order for the search to be fast, for DB2® versions prior to DB2 LUW 10.5, an index must be created on a generated column which uses the LOWER() function. However searches will not use a generated column index on DB2 LUW if the LIKE operator is used and FCIS is enabled. This is a limitation of DB2 when using generated columns. DB2 cannot rewrite the query condition which uses LOWER to access the generated column index for that column.

For DB2 LUW 10.5 and later, using expression-based indexes, this LIKE restriction does not apply. See: http://www-01.ibm.com/support/docview.wss?uid=swg27039704 [http://www-01.ibm.com/support/docview.wss?uid=swg27039704].

For DB2 zOS see: http://www-01.ibm.com/support/docview.wss?uid=swg27038918 [http://www-01.ibm.com/support/docview.wss?uid=swg27038918].

Note: Support for DB2 10.5 LUW requires the IBM® FileNet® CPE 5.2 FP2 release. 

Therefore when possible, avoid using LIKE on DB2 LUW (prior to 10.5) with FCIS, for both single and multi- valued property searches.

For example, this CE SQL will be not be able to use a generated column index on DB2:

WHERE myProperty LIKE 'abc%'

Note also that regardless of FCIS, avoid using LIKE with a wild card at the front because a database index can not be used for such a search. This includes the CONTAINS operator in some client applications such as Workplace XT.

An example of CE SQL using LIKE with a wildcard at the front is:

WHERE myListProperty LIKE '%abc%'

Now an example of not using LIKE, for a much faster search even when using FCIS which can use the index above is this syntax:

WHERE 'abc' IN myListProperty

You can performing such a search on WPXT / ICN by using the INCLUDES / Include All operator instead of CONTAINS / LIKE.

Lastly, for multiple list property conditions separated by the OR operator, use the INTERSECTS operator. See the latest P8 InfoCenter documentation on the Content Engine SQL Syntax page for more info.

For instructions on indexing properties when using FCIS, see the following:
http://pic.dhe.ibm.com/infocenter/p8docs/v5r2m0/topic/com.ibm.p8.ce.admin.tasks.doc/properties/pr_create_db_column_indexes.htm [http://pic.dhe.ibm.com/infocenter/p8docs/v5r2m0/topic/com.ibm.p8.ce.admin.tasks.doc/properties/pr_create_db_column_indexes.htm]

https://www.ibm.com/support/docview.wss?uid=swg21634811 [https://www.ibm.com/support/docview.wss?uid=swg21634811] 

SYMPTOM
Slow searches when using CONTAINS or LIKE operators using DB2 LUW (prior to 10.5) and Force Case Insensitive Search.


CAUSE
DB2 LUW cannot use a generated column index with the LIKE operator.

ENVIRONMENT
Using DB2 LUW (prior to 10.5) only.

DIAGNOSING THE PROBLEM
Slow user response times for searches using LIKE.

RESOLVING THE PROBLEM
Create appropriate indexes and avoid the LIKE operator if possible.



Cross reference information Segment Product Component Platform Version Edition Enterprise Content Management Content Foundation Content Engine