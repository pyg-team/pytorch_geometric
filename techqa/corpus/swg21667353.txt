Title: IBM START CHANNEL command on a receiver or server-connection channel, only enables the channel. Why is the channel not started? - United States

Text:
 TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 You start a WebSphere MQ (WMQ ) receiver (RCVR) or a server-connection (SVRCONN) channel and you expect that the STATUS of the channel to be RUNNING, however the channel is not actually running.
You look at the error logs for the queue manager and you do not see any errors. 

CAUSE
Please see the following section of the MQ 7.5 documentation:
WebSphere MQ 7.5.0>WebSphere MQ>Reference>Administration reference>MQSC reference>The MQSC commands> 
START CHANNEL [http://www.ibm.com/support/knowledgecenter/SSFKSJ_7.5.0/com.ibm.mq.ref.adm.doc/q086660_.htm]

+ begin excerpt

The START command can be issued to a channel of any type except CLNTCONN channels (including those that have been defined automatically).

If, however, it is issued to a receiver (RCVR), server-connection (SVRCONN) or cluster-receiver (CLUSRCVR) channel, the only action is to enable the channel, not to start it.

+ end excerpt


RESOLVING THE PROBLEM
The text mentioned in the "Cause" section means that when the START CHANNEL command is issued via runmqsc or via the MQ Explorer, a receiver (RCVR) or a server-connection (SVRCONN) channel is just enabled to process incoming requests, however it is not actually running. It is really started only when there is an incoming request for that channel. 


For example, you define a server-connection channel called MY.SVRCONN, which has a CHLTYPE(SVRCONN) and you try to start it:


 * start channel(MY.SVRCONN)
 * 
 * AMQ8018: Start WebSphere MQ channel accepted.


However the above command did not actually start the channel and if you display the status, you will get the following error: 
 * display chstatus(MY.SVRCONN)
 * 
 * AMQ8420: Channel Status not found.
 * 

The above information message AMQ8420 might sound confusing, and hopefully the rest of this technote may help to clarify the situation. 

In order for a remote MQ client (or a remote MQ queue manager) to access the target queue manager, it is necessary to have 2 things available at the target queue manager: 
 1. A listener, who is waiting for inbound requests. The default port is 1414. 
 2. A server-connection channel (in the case of an MQ client), or a receiver channel (in the case of an MQ queue manager).


If there are NO actual inbound requests that arrive at port 1414 for a particular channel, then that server-connection channel has nothing to do, and thus, the channel is NOT started. This means that in MQ Explorer the channel will be shown as inactive, and if you issue DISPLAY CHSTATUS for that channel, you will get a rather confusing message, which really means that no active instances were found.  * AMQ8420: Channel Status not found.


However, if there is an incoming request for that channel, then the channel actually starts and has something useful to do. In this case the MQ Explorer will show the channel as active, and the DISPLAY CHSTATUS will show an entry for that channel, such as: 
 * display chstatus(MY.SVRCONN)
 * 
 * AMQ8417: Display Channel Status details.
 * 
 * CHANNEL(MY.SVRCONN) CHLTYPE(SVRCONN)
 * 
 * CONNAME(127.0.0.1) CURRENT
 * 
 * 
 * STATUS(RUNNING)
 * SUBSTATE(RECEIVE)
 * 

If the MQ client gracefully disconnects, then the server-connection channel does not have anything useful to do, and it will terminate, and it will be shown again as inactive in MQ Explorer. In runmqsc you will get the following if you display the status:  * AMQ8420: Channel Status not found.


This explains why sometimes you may see the server-connection or receiver channels as active or as inactive. These channels will be active only when these channels are actually being used by an active connection. 

+ If you try to stop this server-connection channel that is not active, you will get the following error message in the error log for the queue manager: 

AMQ9533: Channel 'MY.SVRCONN' is not currently active. 
EXPLANATION: 
The channel was not stopped because it was not currently active. If attempting 
to stop a specific instance of a channel by connection name or by remote queue 
manager name this message indicates that the specified instance of the channel 
is not running. 
ACTION: 
None.