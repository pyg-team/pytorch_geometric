Title: IBM IZ52966: STORE AND FORWARD FILE NOT GETTING DELETED EVEN THOUGH ALL THE EVENTS HAVE BEEN FORWARDED TO OBJECTSERVER - United States

Text:
  FIXES ARE AVAILABLE
Tivoli Netcool/OMNIbus 7.2.0 InterimFix 4, 7.2.0-TIV-NCOMNIbus-IF0004 [http://www-01.ibm.com/support/docview.wss?uid=swg24024892]
Tivoli Netcool/OMNIbus 7.2.1 Fix Pack 7, 7.2.1-TIV-NCOMNIbus-FP0007 [http://www-01.ibm.com/support/docview.wss?uid=swg24025507]
Tivoli Netcool/OMNIbus 7.2.1 Fix Pack 15, 7.2.1-TIV-NCOMNIbus-FP0015 [http://www-01.ibm.com/support/docview.wss?uid=swg24036693]
Tivoli Netcool/OMNIbus 7.2.1 Fix Pack 13, 7.2.1-TIV-NCOMNIbus-FP0013 [http://www-01.ibm.com/support/docview.wss?uid=swg24031554]


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  Environment: Linux
   
   OMNIbus version: 7.2.1 FP3
   Probe version: syslog probe 5.0.4066
   
   Current behaviour/symptoms/Problem description:
   
   store and forward file not getting deleted if probe goes to
   store and forward mode, then straight be shuted down, even
   though all the events have been forwarded to ObjectServer. This
   results in duplicated events forwarded to ObjectServer.
   
   Steps to re-create:
   
   1. start ObjectServer "NCOMS"
   2. start syslog probe by CleanStart : 1 and ReplayFile :0 to
   make sure probe ignores the recovery file and starts reading
   events from the log file created after the probe started.
   3. shutdown ObjectServer
   4. generate syslog message with logger  :
      # logger -p debug test_alarm_1
      test_alarm_1 is stored in
   $NCHOME/omnibus/var/syslog.store.NCOMS file
   5.  shutdown syslog probe (note: this step is crucial, the issue
   only happens when probe is shutdown after probe goes to store
   and forward mode)
   6.  start objectserver
   7.  start syslog probe. test_alarm_1 is forwarded to
   ObjectServer with Tally=1.However syslog.store.NCOMS file is not
   deleted.
   8.  restart syslog probe
   9. test_alarm_1 is forwarded to ObjectServer again. Now
   test_alarm_1 become Tally=2. However syslog.store.NCOMS file is
   not deleted.
   
   Expected behaviour:
   
   store and forward file is deleted after all the events have been
   forwarded to ObjectServer no matter probe is shutdown or not.
   
   
    
   
   

LOCAL FIX
 *  Manually delete store and forward file after all events have
   been forwarded to ObjectServer
   
   
    
   
   

PROBLEM SUMMARY
 *  ****************************************************************
   USERS AFFECTED:
   Users of probes where the store-and-forward file is used.
   ****************************************************************
   PROBLEM DESCRIPTION:
   The store-and-forward file of a probe was not being deleted if
   the file contents were forwarded by the probe after the probe
   was restarted. The failure to delete the file caused duplicate
   events to be sent each time the probe was restarted.
   ****************************************************************
   RECOMMENDATION:
   Apply one of the listed maintenance packages as appropriate for
   the version of OMNIbus you have installed.
   ****************************************************************
   
   
    
   
   

PROBLEM CONCLUSION
 *  This problem has been fixed, and the store-and-forward file is
   now deleted as expected.
   
   The fix for this APAR is contained in the following maintenance
   packages:
    | fix pack | 7.2.0-TIV-NCOMNIbus-FP0007
    | fix pack | 7.2.1-TIV-NCOMNIbus-FP0005
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   IZ52966
   
   
 * REPORTED COMPONENT NAME
   NETCOOL/OMNIBUS
   
   
 * REPORTED COMPONENT ID
   5724O4800
   
   
 * REPORTED RELEASE
   720
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2009-06-10
   
   
 * CLOSED DATE
   2009-07-29
   
   
 * LAST MODIFIED DATE
   2009-07-29
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

MODULES/MACROS
 *  LIBOPL
   
   
    
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   NETCOOL/OMNIBUS
   
   
 * FIXED COMPONENT ID
   5724O4800
   
   

APPLICABLE COMPONENT LEVELS
 * R720 PSN
   UP