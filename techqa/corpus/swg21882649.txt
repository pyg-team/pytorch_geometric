Title: IBM After running IBM Case Foundation peupgrade to upgrade the Process Engine (PE) database, it failed with with javax.net.ssl.SSLHandshakeException error - United States

Text:
https; cerificate; upgrade; PE; 5.2.1; failed; handshake TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 After running IBM Case Foundation peupgrade to upgrade the Process Engine (PE) database, it failed with with javax.net.ssl.SSLHandshakeException and FNRCA0031E errors.


SYMPTOM
Here is the sample excerpt from the peupgrade log file : 


Error: com.filenet.api.exception.EngineRuntimeException: FNRCA0031E: API_UNABLE_TO_USE_CONNECTION: The URI for server communication cannot be determined from the connection object https://CEServer:9444/wsi/FNCEWS40MTOM/. Message was: com.ibm.jsse2.util.j: PKIX path building failed: java.security.cert.CertPathBuilderException: PKIXCertPathBuilderImpl could not build a valid CertPath.; internal cause is: 
java.security.cert.CertPathValidatorException: The certificate issued by CN=ABC-CA, DC=MINE, DC=NET is not trusted; internal cause is: 
java.security.cert.CertPathValidatorException: Certificate chaining error
stack:
com.filenet.apiimpl.wsi.ServiceSessionNst.cOpenMultipartOutputStream(ServiceSessionNst.java:287)
com.filenet.apiimpl.wsi.ServiceSessionNst.cReqRespPath(ServiceSessionNst.java:170)
com.filenet.apiimpl.wsi.ServiceSessionNst.getObjects(ServiceSessionNst.java:118)
com.filenet.apiimpl.util.SessionHandle.getObjects(SessionHandle.java:346)
com.filenet.apiimpl.core.Session.callGetObjects(Session.java:94)
com.filenet.apiimpl.core.Session.executeGetObject(Session.java:302)
com.filenet.apiimpl.core.Session.getObject(Session.java:316)
com.filenet.apiimpl.core.IndependentObjectImpl.getObject(IndependentObjectImpl.java:149)
com.filenet.apiimpl.core.IndependentObjectImpl.refresh(IndependentObjectImpl.java:157)
com.filenet.api.core.Factory$Domain.fetchInstance(Factory.java:1550)
filenet.pe.ejb.client.EJBGCDHelper$LocalActionGetDocumentationURL.run(EJBGCDHelper.java:1308)
filenet.pe.ejb.client.EJBGCDHelper$LocalActionGetDocumentationURL.run(EJBGCDHelper.java:1284)
java.security.AccessController.doPrivileged(AccessController.java:366)
javax.security.auth.Subject.doAs(Subject.java:572)
com.filenet.apiimpl.util.J2EEUtil.doAs(J2EEUtil.java:79)
com.filenet.api.util.UserContext.doAs(UserContext.java:142)
filenet.pe.ejb.client.EJBGCDHelper.getDocumentationURL(EJBGCDHelper.java:1324)
filenet.pe.ejb.client.PEEJBSession.getDocumentationURL(PEEJBSession.java:3729)
filenet.vw.api.VWClassFactory.ShortCircuit_getDocumentationURL(VWClassFactory.java:1991)
filenet.jpe.peupgrade.PEUpgrade.performUpgrade(PEUpgrade.java:304)
filenet.jpe.peupgrade.PEUpgrade.execute(PEUpgrade.java:232)
filenet.jpe.peupgrade.PEUpgrade.main(PEUpgrade.java:78)
Caused by: javax.net.ssl.SSLHandshakeException: com.ibm.jsse2.util.j: PKIX path building failed: java.security.cert.CertPathBuilderException: PKIXCertPathBuilderImpl could not build a valid CertPath.; internal cause is: 
java.security.cert.CertPathValidatorException: The certificate issued by CN=ABC-CA, DC=MINE, DC=NET is not trusted; internal cause is: 
java.security.cert.CertPathValidatorException: Certificate chaining error com.ibm.jsse2.util.j: PKIX path building failed: java.security.cert.CertPathBuilderException: PKIXCertPathBuilderImpl could not build a valid CertPath.; internal cause is: 
java.security.cert.CertPathValidatorException: The certificate issued by CN=ABC-CA, DC=MINE, DC=NET is not trusted; internal cause is: 
java.security.cert.CertPathValidatorException: Certificate chaining error


CAUSE
The SSL certificate was not imported into the Java keystore of the location below. 
<drive>:\Program Files\IBM\FileNet\ContentEngine\_cejvm\jre\lib\security\cacerts


RESOLVING THE PROBLEM
Download the appropriate SSL certificate and use the JRE keytool to import the SSL certificate into the Java keystore of the location below. 
<drive>:\Program Files\IBM\FileNet\ContentEngine\_cejvm\jre\lib\security\cacerts

See an example on how to use the JRE keytool to import the SSL certificate into the Java keystore in the reference link below.
http://www-01.ibm.com/support/knowledgecenter/SSNW2F_5.1.0/com.ibm.p8.doc/ae_help/workplace/wp_basics_first_jre.htm?lang=en [http://www-01.ibm.com/support/knowledgecenter/SSNW2F_5.1.0/com.ibm.p8.doc/ae_help/workplace/wp_basics_first_jre.htm?lang=en]