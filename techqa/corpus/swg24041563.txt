Title: IBM ITCAM Agent for WebSphere DataPower Applications: 7.1.0-TIV-ITM_WDP-FP0003 - United States

Text:
DataPower; BN; KBN DOWNLOADABLE FILES

ABSTRACT
 This fix resolves the enhancements listed in the "Problems Fixed"
section below. 

DOWNLOAD DESCRIPTION
Copyright International Business Machines Corporation 2016.


All rights reserved.

Component: IBM(R) Tivoli(R) Composite Application Manager Agent for WebSphere DataPower Appliance
Version 7.1 Fix Pack 3

Component ID: 5724SOADP

Fix Pack: 3, 7.1.0-TIV-ITM_WDP-FP0003

Date: Revised January 8, 2016

Contents:

1.0 General description
2.0 Problems fixed
3.0 Architecture and prerequisites
4.0 Image directory contents
5.0 Installation instructions
6.0 Additional installation information
7.0 Known problems and workarounds
8.0 Additional product information
9.0 Notices

1.0 General description
=======================
This fix resolves the RFEs, APARs and defects listed in the "Problems Fixed"
section below. This fix also includes the superseded fixes listed in
section 2.6.

2.0 Problems fixed
==================
The following problems are addressed by this fix.

2.1 APARs:
----------

N/A 

2.2 Defects
--------------

Defect: 61583
Abstract: Increase java heap size and thread pool size.
Additional Information: In order to support monitoring more DPs per instance, we increased the maximum heap size from 512M to 1024M. And the thread pool size is changed from 5 to 10.

To enable the new maximum heap size, agent need to be restarted.

To enable the new thread pool size:
1. Re-config the instances.
2. Modify the agent's config file and restart the agent instances.
--For UNIX/LINUX
Modify the file "bn_<instanceName>.config", change the item "CDP_DP_THREAD_POOL_SIZE" to "10".
--For Windows
Modify the file "KBNENV_<instanceName>", change the item "CDP_DP_THREAD_POOL_SIZE" to "10".

2.3 Enhancements:
-----------------
Enhancement: RFE: 68385 
Abstract: AMEX - Additional DataPower monitoring capabilities to monitor new capabilities in V6/V7 of firmware
Additional Information: 
Priority 1- Link Aggregation - First available in V7 firmware. This is at the network layer. Can add monitoring for the network connections to ensure there are no failures in link aggregation.
Priority 1- IMS Connect - Can monitor up/down connection monitoring in SNMP files.
Lower priority - On Demand Router - Load balancing for Websphere. Can add monitoring for the network connections and load balancing work its doing. 

4 new attribute groups were introduced in FP3.
-IMS_Connect:
IMSConnect, Domain, Requests, Responses, RequestErrors, ResponseErrors
4 queries:
--IMS Connect Status: Use the IMSConnect attributes to obtain information about IMS connect status on the monitored DataPower appliance.
--IMS Connect Requests Top 10: Provides the top 10 requests IMS Connect.
--IMS Connect Responses Top 10: Provides the top 10 responses IMS Connect.
--IMS Connect Request Errors Top 10: Provides the top 10 request errors IMS Connect.
--IMS Connect Response Errors Top 10: Provides the the top 10 response errors IMS Connect.

-Link_Aggregation:
Index, Name, MgmtName, MTU, Mode, Status, Primary, Active, LACPHashPolicy, LACPDURate, LACPSelectionPolicy, LACPAggregatorID, LACPNumPorts, LACPActorKey, LACPPartnerKey, LACPPartnerMAC, MIIStatus
3 queries:
--Link Aggregation Status: Use the Link Aggregation Status attributes to obtain information about Link Aggregation Status on the monitored DataPower appliance.
--Link Aggregation Status No-link: Provides all No-link status for Link Aggregation.
--Link Aggregation MIIStatus No-link: Provides all No-link MIIStatus for Link Aggregation.

-Link_Aggregation_Member_Status:
AggregateIndex, AggregateName, MgmtName, MemberIndex, MemberName, AggregatorID
1 query:
--Link Aggregation Member Status: Use the Link Aggregation Member Status attributes to obtain information about Link Aggregation Member Status on the monitored DataPower appliance.

-Load_Balancer:
Group, Domain, Server, Port, Health, Weight, AdminState
3 queries:
--Load Balancer Status: Use the Load Balancer Status attributes to obtain information about Load Balancer status on the monitored DataPower appliance.
--Load Balancer Groups Down: Provides all Down status groups for Load Balancer.
--Load Balancer Groups Softdown: Provides all Softdown status groups for Load Balancer. 

Enhancement: (internal) Remove the UE dependance
Abstract: Remove the UE dependance
Additional Information: Details as below:
ax is upgraded to 06.30.04.00
gs is upgraded to 08.00.50.20
jr is upgraded to 07.07.00.00
ui is upgraded to 06.30.04.00

2.4 Superseded fixes
-------------------------
None.


2.5 APARs and defects included from superseded fixes
----------------------------------------------------
None.


3.0 Architecture and prerequisites
=================================
Supported operating systems are shown in the system requirements reports 
for the DataPower agent. You can access these reports here:

- Prerequisites topic in Knowledge Center:
http://www-01.ibm.com/support/knowledgecenter/SS3JRN_7.2.1/com.ibm.itcama.doc_7.2.1/prerequisites/apps721_systemreqs.html [http://www-01.ibm.com/support/knowledgecenter/SS3JRN_7.2.1/com.ibm.itcama.doc_7.2.1/prerequisites/apps721_systemreqs.html]

- Software Product Compatibility Reports (SPCR)
http://publib.boulder.ibm.com/infocenter/prodguid/v1r0/clarity/index.html [http://publib.boulder.ibm.com/infocenter/prodguid/v1r0/clarity/index.html]

3.1 Prerequisites for this fix
--------------------------------
There is no prerequisite level for this fix.

Because this fix is cumulative, it can be installed on any fix level 
for the version, release, and modification level above the prerequisite. 


4.0 Image directory contents
============================
Physical Part Number: ITCAM Apps Agent for WebSphere DataPower Appliance CBNR3ML
Electronic Part Number: ITCAM Apps Agent for WebSphere DataPower Appliance CN8KBML

5.0 Installation instructions
=============================
When this fix pack image is downloaded from the IBM Software Support website, 
these rules apply:
* You can install the fix pack only locally on a system that hosts a 
licensed copy of IBM Tivoli Monitoring for Databases already. Similar to other 
upgrade software, you can install the fix pack image locally on a 
computer where the product software is not already installed.
* You can populate agents to the depot.
* You can deploy agents remotely to existing or new installations.

When this fix pack image is downloaded from Passport Advantage, these rules 
apply:
* You can install the fix pack locally on a system that hosts a 
licensed copy of IBM Tivoli Monitoring for Databases already.
* You can install the fix pack locally on a system that does not host 
a licensed copy of IBM Tivoli Monitoring for Databases already.
* You can populate agents to the depot.
* You can deploy agents remotely to existing or new installations.


5.1 Before installing the fix
-----------------------------
- The prerequisites listed under section 3.1 entitled 'Upgrade prerequisites 
for this fix' must be installed when upgrading.

- For the purpose of this README, the <CANDLEHOME> symbol is the 
IBM Tivoli Monitoring installation directory. The default value
for CANDLEHOME is '/opt/IBM/ITM' on UNIX systems and 'C:\ibm\itm'
on Windows systems.

- If you customize the Extended Monitoring Agent for WebSphere DataPower Appliance 
bn.ini file on a UNIX system, back up this file before installing the fix. 
After this fix is installed, edit the latest bn.ini file and merge 
your modifications into this bn.ini file.


5.2 Local agent install and update (including silent installation)
--------------------------------------------------------------
1. Transfer the appropriate archive file to a 
temporary directory on the system that contains the agent code to be 
updated. For the purpose of this README, the <TEMP> symbol represents 
the fully qualified path to this directory.
Note: On Windows systems, this path includes the drive letter. 

2. Expand the archive file by using the tar command on UNIX systems or 
an unzip utility on Windows systems. This expansion creates a directory 
structure that contains fixes for all supported platforms.

3. Use the procedures in the "IBM Tivoli Monitoring, Version 6.3 FP3
Installation and Setup Guide" to install the agent.

4. Use the procedures in the specific monitoring agent user's
guide to complete the installation and configuration.


5.3 Remote agent update and installation
----------------------------------------
1. Make sure that all potential targets of the remote deployment are
running version 6.2.3 Fix Pack 4 or later of the OS monitoring 
agent.
2. Transfer the appropriate archive file to 
a temporary directory on the Tivoli Enterprise 
Monitoring Server system. For the purpose of this README, the 
<TEMP> symbol represents the fully qualified path to this directory.
Note: On Windows systems, this path includes the drive letter. 

3. Expand the archive file by using the tar command on UNIX systems or an 
unzip utility on Windows systems. This expansion creates a directory structure
that contains fixes for all supported operating systems.

4. To add the fix pack bundles to the remote deployment depot, use the
tacmd addBundles command found in $CANDLEHOME/bin on UNIX systems
or in %CANDLE_HOME%\bin on Windows systems. For more information
about the tacmd addBundles command, see the "IBM Tivoli
Monitoring Command Reference."

On a UNIX system: if the fix was expanded to 
<TEMP>/<PARTNUMBER>:
> $CANDLEHOME/bin/tacmd addBundles -i <TEMP>/<PARTNUMBER>/WINDOWS/Deploy -t bn -f
> $CANDLEHOME/bin/tacmd addBundles -i <TEMP>/<PARTNUMBER>/unix -t bn -f 

where:
-i is the directory that contains the deployment bundles to be
added to the depot.
-t is the product code of the product to add, for example, bn 
represents the Extended Monitoring Agent for WebSphere DataPower Appliance
-f shows that the actions are complete and confirmation is not requested

On a Windows system: if the fix was expanded to 
<TEMP>/<PARTNUMBER>:
> %CANDLE_HOME%\bin\tacmd addBundles -i <TEMP>\<PARTNUMBER>\WINDOWS\Deploy -t bn -f
> %CANDLE_HOME%\bin\tacmd addBundles -i <TEMP>\<PARTNUMBER>\unix -t bn -f 

where:
-i is the directory that contains the deployment bundles to be
added to the depot. 
-t is the product code of the product to add, for example, bn 
represents the Extended Monitoring Agent for WebSphere DataPower Appliance
-f shows that the actions are complete and confirmation is not requested

5. To login to the Tivoli Enterprise Monitoring server and deploy
the fix to the appropriate nodes where the agent is running, use
the following tacmd commands. For more information about the
tacmd login and updateAgent commands, see the "IBM Tivoli
Monitoring Command Reference."

On a UNIX system: 
> $CANDLEHOME/bin/tacmd login -s <server>
-u <itmuser> 
-p <password>

> $CANDLEHOME/bin/tacmd listSystems

The output shows the managed system name for the OS agent on the 
remote system to be installed/update. Use this value as the target of the
tacmd addsystem/updateAgent command. 

> $CANDLEHOME/bin/tacmd addsystem -t bn 
-n <Managed system name>
-p <Configration Info>

> $CANDLEHOME/bin/tacmd updateAgent -t bn
-n <Managed system name>
-v 071003000

On a Windows system:
> %CANDLE_HOME%\bin\tacmd login -s <server>
-u <itmuser> 
-p <password>

> %CANDLE_HOME%/bin/tacmd listSystems

The output shows the managed system name for the OS agent on the 
remote system to be installed/updated. Use this value as the target of the
tacmd addsystem/updateAgent command. 

> $CANDLEHOME%\bin\tacmd addsystem -t BN 
-n <Managed system name>
-p <Configration Info>

> %CANDLE_HOME%\bin\tacmd updateAgent -t BN
-n <Managed system name>
-v 071003000
Note:
- The component (-t) for the updateAgent command is specified as 
two characters (bn), not three characters (kbn).
- The node (-n) for the updateAgent command is the managed system
name of the operating system (OS) agent to be updated. The 
target node for an updateAgent command is always an OS agent.
- The component (-p) for the addsystem command is for agent's configuration info.
Here is an example:
INSTANCE="value"
KQZ_SNMPEVENT.KQZ_SNMPEVENT_PORT="162"
KQZ_SNMPEVENT.KQZ_SNMPEVENT_SECURITY_LEVEL="authPriv"
KQZ_SNMPEVENT.KQZ_SNMPEVENT_USER_NAME="admin"
KQZ_SNMPEVENT.KQZ_SNMPEVENT_AUTH_PROTOCOL="SHA"
KQZ_SNMPEVENT.KQZ_SNMPEVENT_AUTH_PASSWORD="value"
KQZ_SNMPEVENT.KQZ_SNMPEVENT_PRIV_PROTOCOL="DES"
KQZ_SNMPEVENT.KQZ_SNMPEVENT_PRIV_PASSWORD="value"
DPS:<Managed_System_Name>.SOAP_HOST="value"
DPS:<Managed_System_Name>.DP_PORT="5550"
DPS:<Managed_System_Name>.DP_UID="admin"
DPS:<Managed_System_Name>.DP_PASSWORD="value"
DPS:<Managed_System_Name>.KBN_LOG_FILE="value"
DPC:<Managed_System_Name>.SNMP_VERSION="snmpV2"
DPC:<Managed_System_Name>.SNMP_HOST="value"
DPC:<Managed_System_Name>.SNMP_PORT="161"
DPC:<Managed_System_Name>.SNMP_COMMUNITY="public" 

- The following error might occur with the updateAgent command on 
Linux and UNIX endpoints; however, the agent is successfully 
updated. This error does not occur on Windows endpoints.

KUICUA011I: Updating the bn agents.
KUICUA015E: The updateAgent command did not complete because an
error occurred. Refer to the following error
returned from the server:

The monitoring server encountered an error while updating the
managed system type.

The kuiras1.log file might provide more information about 
this error. If you require further assistance to resolve the 
error, contact IBM Software Support.

A timeout occurred while waiting for an agent task to complete on
{node name}.

The agent task did not complete within the configured 
time out period.

Verify that the target system is online. Increase the 
time out value and try the operation again.



5.4 Agent support update
------------------------
Fix 7.1.0-TIV-ITM_WDP-FP0003 included changes to the agent
support files that must be installed. If you installed these updates already, there are no additional installation
steps. Otherwise, use the following steps to update the Tivoli
Enterprise Monitoring Server, Tivoli Enterprise Portal Server, or
Tivoli Enterprise Portal Desktop.

1. Transfer the appropriate archive file 
to the IBM Tivoli Enterprise Monitoring Servers, IBM Tivoli
Enterprise Portal Servers, or Tivoli Enterprise Portal desktops. 

2. Expand the archive file by using the tar command on UNIX systems or an 
unzip utility on Windows systems. 

3. Use the procedures in the "IBM Tivoli Monitoring, Version 6.3 FP3
Installation and Setup Guide."

4. Use the procedures in the specific monitoring agent user's
guide to complete the installation and configuration.

5. If the Tivoli Enterprise Monitoring Server that is updated is remote (not a 
Hub Tivoli Enterprise Monitoring Server) then restart the Tivoli Enterprise 
Monitoring Server.



6.0 Additional installation information
========================
6.1 Installation instructions for agent baroc file
-----------------------------------------------------
There are no updates to the baroc files included in this fix or
any of the superseded fixes. No additional installation steps are
required.

6.2 Additional information on new configuration item "KBN_SOMA_PROTOCOL"
------------------------------------------------------------------------
A new configuration item "KBN_SOMA_PROTOCOL" is introduced to support TLS.
The value should be SSL/TLSv1/TLSv1.1/TLSv1.2. The default value is "TLSv1". 
If you want to support TLSv1.1/TLSv1.2, please change it manually.

1. For Windows platform:
The new item "KBN_SOMA_PROTOCOL" is in KBNENV and KBNENV_<instanceName>.

a. Agent instance must be restarted to enable the new configuration change.
b. The vaule of "KBN_SOMA_PROTOCOL" in KBNENV_<instanceName> will be updated to 
the same vaule of "KBN_SOMA_PROTOCOL" in KBNENV while the instance is re-configured.

2. For Linux/Unix platform:
The new items "KBN_SOMA_PROTOCOL" is in bn.ini and bn_<instanceName>.config.

a. Agent instance must be restarted to enable the new configuration change.
b. The vaule of "KBN_SOMA_PROTOCOL" in bn_<instanceName>.config will be updated to 
the same vaule of "KBN_SOMA_PROTOCOL" in bn.ini while the instance is re-configured.

6.3 Verifying the update
----------------------------
1. To verify that the agent was updated correctly, use the tacmd command
to view the current version of the agent after the agent is restarted.
You are required to log in to a Tivoli Enterprise Monitoring
Server before viewing the agent version.

For example:
On UNIX systems, where $CANDLEHOME is the IBM Tivoli Monitoring
installation directory, the default location is '/opt/IBM/ITM'.

> $CANDLEHOME/bin/tacmd login -s <server>
-u <itmuser>
-p <password>
> $CANDLEHOME/bin/tacmd listSystems -t or

On Windows systems, where %CANDLE_HOME% is the IBM Tivoli
Monitoring installation directory, the default location
is 'C:\IBM\ITM'.

> %CANDLE_HOME%\bin\tacmd login -s <server>
-u <itmuser>
-p <password>
> %CANDLE_HOME%\bin\tacmd listSystems -t bn

Note: The component (-t) for the tacmd listSystems command is
specified as two characters (bn), not three characters (kbn).

When the agent update is successful, the agent version is:
07.10.03.00

After the agent is restarted, you can also use the GUI to verify
that the agent was successfully updated.

For the agent on Windows systems, the version number is
07.10.03.00.
For the agent on UNIX systems, the version number is
07.10.03.00.

2. To verify that the agent support files were updated correctly, use the
kincinfo command on Windows systems or the cinfo command on
Linux or UNIX systems. The sample output below shows the versions
of the Tivoli Enterprise Portal Server, Tivoli Enterprise
Monitoring Server, or Tivoli Enterprise Portal Desktop systems
after this fix has been successfully applied.

Note: The date shown for the build might not be accurate. This
is a known problem.

On UNIX or Linux systems:
-------------------------
To validate that all components have been installed, run the
following command:

./cinfo -i

*********** Fri Mar 18 13:23:02 CST 2011 ******************
User: root Groups: root bin daemon sys adm disk wheel
Host name : myaixsys Installer Lvl:06.30.04.00
CandleHome: /opt/IBM/ITM
***********************************************************
...Product inventory
.
.
.
Monitoring Agent for WebSphere DataPower Appliance update:

bn ITCAM Agent for WebSphere DataPower Appliance
lx8266 Version: 07.10.03.00


.
.
.
Tivoli Enterprise Monitoring Server update:

bn ITCAM Agent for WebSphere DataPower Appliance
tms Version: 07.10.03.00

.
.
.

On Windows systems:
---------------------
To validate that all components have been installed, run the
following command:

For example:
> %CANDLE_HOME%\InstallITM\kincinfo -i


kincinfo output:

*********** Wednesday, January 8, 2014 3:46:34 PM ***********
User : Administrator Group : NA
Host Name : IBM-8B96EE78239 Installer : Ver: 063004000
CandleHome : C:\IBM\ITM
Installitm : C:\IBM\ITM\InstallITM
*************************************************************
...Product Inventory

.
.
.
[ Tivoli Enterprise Monitoring Server |
Tivoli Enterprise Portal Server and Tivoli Enterprise Portal Desktop] update:
BN DataPower Agent Support
WINNT Version: 07.10.03.00 Build: 

Tivoli Enterprise Portal Server and Tivoli Enterprise Portal
Desktop update:


BN DataPower Agent Support
WINNT Version: 07.10.03.00 Build: 


ITCAM Agent for WebSphere DataPower Appliance update:
BN ITCAM Agent for WebSphere DataPower Appliance
WINNT Version: 07.10.03.00 Build: 

Note:

- The date of the build that is shown might not be accurate. This
problem is known and is being addressed.
- The kincinfo and cinfo command output examples in the sections
that follow show all components that you can update. If you install only 
some of these components then only the components that you install are 
shown in the output of these commands.


7.0 Known problems and workarounds
==================================
None.

8.0 Additional product information
=================================
None.

9.0 Notices
===========
This information was developed for products and services offered in the United 
States. IBM may not offer the products, services, or features discussed in this
document in other countries. Consult your local IBM representative for information
on the products and services currently available in your area. Any reference to an
IBM product, program, or service is not intended to state or imply that only that
IBM product, program, or service may be used. Any functionally equivalent product,
program, or service that does not infringe any IBM intellectual property right may
be used instead. However, it is the user's responsibility to evaluate and verify
the operation of any non-IBM product, program, or service.

IBM may have patents or pending patent applications covering subject matter 
described in this document. The furnishing of this document does not grant you
any license to these patents. You can send license inquiries, in writing, to:

IBM Director of Licensing
IBM Corporation
North Castle Drive
Armonk, NY 10504-1785
U.S.A.

The following paragraph does not apply to the United Kingdom or any other
country where such provisions are inconsistent with local law:

INTERNATIONAL BUSINESS MACHINES CORPORATION PROVIDES THIS PUBLICATION 
"AS IS" WITHOUT WARRANTY OF ANY KIND, EITHER EXPRESS OR IMPLIED, 
INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF 
NON-INFRINGEMENT, MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.

Some states do not allow disclaimer of express or implied warranties in
certain transactions, therefore, this statement may not apply to you.

Trademarks and service marks
------------------------------------
IBM, the IBM logo, and ibm.com are trademarks or registered trademarks
of International Business Machines Corp., registered in many
jurisdictions worldwide. Other product and service names might be
trademarks of IBM or other companies. A current list of IBM trademarks 
is available on the Web at "Copyright and trademark information" at 
www.ibm.com/legal/copytrade.shtml [www.ibm.com/legal/copytrade.shtml].

Microsoft, Windows, Windows NT, and the Windows logo are trademarks
of Microsoft Corporation in the United States, other countries, or 
both.

Java and all Java-based trademarks are trademarks of Sun Microsystems, 
Inc. in the United States, other countries, or both.

UNIX is a registered trademark of The Open Group in the United States 
and other countries.

Linux is a registered trademark of Linus Torvalds in the United States,
other countries, or both.

Other company, product, or service names may be trademarks or service
marks of others.

DOWNLOAD PACKAGE



HOW CRITICAL IS THIS FIX?
RFE:68385



PROBLEMS SOLVED
Introduce new attribute groups:IMS_Connect, Link_Aggregation, Link_Aggregation_Member_Status and Load_Balancer.




Download RELEASE DATE LANGUAGE SIZE(Bytes) Download Options 
What is Fix Central(FC)? [https://www.ibm.com/support/fixcentral/help?page=swfaqs] 7.1.0.0-TIV-ITM_WDP-FP0003 8 Jan 2016 English 1717046972 FC [http://www.ibm.com/support/fixcentral/quickorder?product=ibm%2FTivoli%2FTivoli+Composite+Application+Manager+for+Applications&fixids=7.1.0.0-TIV-ITM_WDP-FP0003&source=SAR] [ ]