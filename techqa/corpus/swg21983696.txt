Title: IBM MustGather - Collecting data: IBM API Connect problem determination - United States

Text:
 TECHNOTE (FAQ)

QUESTION
 Contact IBM Support if you experience a problem with IBM API Connect. Use the details in this document to provide all of the relevant information to the support team to help with your problem resolution. 

CAUSE
IBM MustGather information:
Providing IBM Support with a good description of the problem and all of the problem details will expedite problem resolution. When explaining a problem to IBM Support, be as specific as possible. Also, describe all of the relevant background information so that IBM Support specialists can help you solve the problem efficiently.

This document details mustgather information when raising a PMR and providing details of a problem to IBM for V5.0 IBM API Connect.


ANSWER
NOTICE: The content of this document has been migrated to a new IBM Technical Support document. The new document can be found here [http://www-01.ibm.com/support/docview.wss?uid=swg22013512]. [https://developer.ibm.com/answers/questions/170359/how-can-i-define-a-custom-directory-path-for-tempo.html]If you have bookmarked this information, please update it accordingly. This document will be removed from the web in the near future. 



Please DO NOT send any confidential information from your company! 

Fully describe the problem you are experiencing: 

 * What were you attempting when the problem occurred?


Reproducible?  * Is it repeatable or a one-off problem? If it can be repeated or recreated easily, provide detailed steps and artifacts so IBM Support can attempt this internally.


Do you have a work around in place?  * If yes, provide full details. 


Provide business impact this problem is having.  * This is extremely useful when prioritising work within the Support Team.


Has anything recently changed in the environment prior to the problem starting:  * For example, have you applied fixes or fix packs? 
 * Have any settings been changed? 
 * Have any APIs or API operations been updated?


Provide details of your topology:  * What clusters and how many of each server are defined in your topology?


Provide Version information: 
For Management servers:  * Log on to the Cloud Management Console, navigate to the Services page, and capture the version information by clicking on the Server Information icon; or 
 * Log on to the command line and enter the command "system show version"; 
   


For Gateway servers (DataPower):  * Log on to the Cloud Management Console, navigate to the Services page, and capture the version information by clicking on the Server Information icon; or 
 * Log on to the DataPower command line interface and enter the command "show version"; or 
 * Log on to the DataPower web interface and navigate to "Status -> System -> Version Information"; 


Provide log files for all servers in your environment: 
It might be necessary for IBM Support to analyse internal system logs from the servers in your topology; therefore, gather the postmortem logs. 

Log on to the cloud management console, navigate to the Servers page and use the relevant button against each node to collect the debug log for that server. 

Note: Ensure that the Gateway server (DataPower) debug log is generated from the Environment console. By using the cloud management console, the debug log collects additional API Management related debug information, which is not included when you use the Datapower web interface or command line interface. 

Provide details of the hosting environment:  * Are you using VMware, XEN or physical appliance? 
 * Provide the version of the hosting environment that you are using. 


Are you having issues with a specific API and / or operation. 
If it is possible, please provide a copy of the API by exporting it and sending the export file to IBM. It maybe possible for IBM Support to re-use this API internally to recreate and debug the problem. 
( Note: Please remember to send your exported plans password or support cannot load it into their environment) 

Enabling additional datapower gateway trace: 
Sometimes it is necessary to generate extra debug information to analyse the flow of the API through DataPower. 


To enable the debug logging that focuses on API requests, run the following sequence in the DataPower CLI (you can run that in the default domain or the APIMgmr_hhhh domain) 

top; co 

logging target apimdebug 
type file 
format text 
timestamp zulu 
size 2048 
local-file logtemp:///apimdebug 
event xsltmsg debug 
event apiconnect debug 
exit 

set-system-var var://system/apim/debug 2 

Run your test case, and upon failure, download "logtemp:///apimdebug" file from the appliance. 

To disable this level of logging, enter the following command: 
switch domain <APIMgmt_hhhh> 
top; co 
no logging target apimdebug 


Useful DataPower Commands to execute: 
Sometimes additional DataPower diagnostics are useful to help understand the topology set up, especially when an initial environment set up has resulted in errors. 

 * 
 * 
 * 
 * 
   
   Checking DataPower firmware and licensing
 * 
 * 
 * 
 * show version
 * 
 * 
 * show license
 * 
 * 
   Checking DataPower services are running
 * 
 * 
 * show domains
 * 
 * 
 * switch APIMgmt_xxxxxxxx
 * 
 * 
 * 
 * show services
 * 
 * 
 * show tcp
 * 
 * 
 * 
 * show op-state
 * 
 * 
 * 
 * show loadbalancer-st
 * 
 * 
 * 
   Virtual IP address configuration
 * 
 * 
 * switch default 
 * 
 * 
 * 
 * show network-in
 * 
 * 
 * show standby
 * 
 * 
 * 
 * show self
 *  


Microgateway problems: 
Please supply the file:  * 


User Interface problems: 
Please capture calls from the user interface by completing the following actions:  * Capture the REST calls or browser network calls by using a tool like fiddler as the issue happens. 
 * You can use tools like fiddler / developer tools of chrome to capture the REST calls , export them as an archive ( For example: har export). 


For Developer Portal Server problems: 
 * Provide Version information. To obtain the version, log on to the command line and enter the following command 


version  * Provide log files. To generate log files, log on to any Advanced Portal server via the command line and enter the following command:


generate_logs 

 * Use scp, or another system tool, to copy the resulting output off the system to send to IBM support. 
   

For API designer problems:  * Which browser type / version does the error occur on. 
 * Is the designer running locally or connecting to it running on a remote host.