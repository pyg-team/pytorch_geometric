Title: IBM Receiving [Err=7900001d] or [Err=7900001e] error when importing a region export XML when there are two indices sharing the same data fields defined. - United States

Text:
 TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 You receive an error when you try to import an export XML from an existing Process Engine region. If you examine the XML, you will see that there are multiple indices that have the same data fields defined. 

SYMPTOM
You can transfer the configuration of a Process Engine (PE) region to a different region using the import / export XML file function in Process Configuration Console. However, if your region configuration contains 2 or more indices which uses the same data fields on the same queue/roster/eventlog, you will receive the following error during the import: 

DB2:
Exception during import from file, [Err=7900001d] name is already used by an existing object.

Oracle:
Exception during import from file, [Err=7900001e] column is already indexed. [Err=7900001e] column is already indexed.

In the PE server elog, you will see the following:

2011/04/05 09:39:40.593 121,0,29 <fnsw> VW/Process (5868.4876.151 0x16ec.130c) ...
VW (VWRs) (Region=2): Transfer failed.


CAUSE
The errors, [Err=7900001d] or [Err=7900001e], are associated to a database error when PE tries to create an index with data field columns that are the same as an existing index. Oracle and DB2 database will not allow any subsequent index with the same columns to be defined on the same table if an existing index with the same columns already exist. 

Microsoft SQL server (MSSQL), being the exception, does allows indices with the same columns to be created. Therefore, one of the ways you might encounter this failure is if you are trying to import an export XML file that came from a PE server with a MSSQL database into a PE server that is using an Oracle or DB2 database.

Another way where this failure can occur is if the indices against the PE queue/roster/eventlogs were added manually through separate transfers. Versions prior to PE 4.0.3 will create a new logical index as a side-effect for the index conflict in the database. As a result, the export XML from this environment might contain 2 logical indices which references the same data fields.

As explained above, prior versions of PE would handle duplicate indices differently and end up creating a separate logical index. This is changed in later versions of PE, as handling duplicate indices adds unnecessary overhead, and is more prone to inefficiencies making PE less scalable to different databases. Therefore, PE will no longer allow duplicate indices to be created and creating duplicate indices is not recommended.


DIAGNOSING THE PROBLEM
If you encounter the following errors from Process Configuration Console, 

"[Err=7900001d] name is already used by an existing object" or 

"[Err=7900001e] column is already indexed. [Err=7900001e] column is already indexed." 

you will need to examine the export XML file and correct the index conflict. 

Find and locate the offending index that share the same data fields in the export XML. 

Here is an example:



<ArrayOfIndexDefinition>
<IndexDefinition
Name="idx_PCN_Entity"
IsSystemIndex="false"
IsMandatorySystemIndex="false">
<FieldNames>
<Value>PE_sPCN</Value>
<Value>PE_sEntityKeyID</Value>
<Value>F_WobNum</Value>
</FieldNames>
</IndexDefinition>

<IndexDefinition
Name="idx_InceptionDate"
IsSystemIndex="false"
IsMandatorySystemIndex="false">
<FieldNames>
<Value>PE_sPCN</Value>
<Value>PE_sEntityKeyID</Value>
<Value>F_WobNum</Value>
</FieldNames>
</IndexDefinition> 
</ArrayOfIndexDefinition> 
RESOLVING THE PROBLEM
Having 2 or more indices on the same table referencing the same database columns is not recommended. This will create additional overhead against the database, which will result in performance issues. As this is neither recommended from PE or the database, the best way to correct this failure is to not create the 2nd index or to remove the existing duplicate index from the export XML file. 

To correct this failure, you will need to manually edit the export XML file to remove the conflicting indices in question.

1) Take corrective action by removing one of the indices from the export XML file. 
2) Once it has been corrected, try the import operation again.
3) If there are applications using the index that was removed, make sure to also correct the reference in the application.