Title: IBM FileNet Image Services: Hitachi HCP devices report UNIX stale mount point errors. - United States

Text:
ISDS; Hitachi; HCP; HCAP; Integral SDS; Image Servies; stale mount point; errno=52 TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 Retrieving documents from a Hitachi HCP device can result in stale mount point errors reported in the Image Services error log (see the following example from an AIX server).

2012/02/09 00:52:42.687 238,3,9 <fnsw> SDS_worker 3 7 (1372218.1.96 0x14f03a.1) ... [SERIOUS]
Error from SDSw_open_object doc_id=2518315609 line=6967
err_msg='SDSw_open_object: open() failed errno=52 docfile='/fcfs_data/1100987654/sds2/96/1A/72/2518315609' Network Error

2012/02/09 00:52:42.688 238,3,9 <fnsw> SDS_worker 3 1 (1404960.1.85 0x157020.1) ... [SERIOUS]
Error from SDSw_open_object doc_id=2518315609 line=6967
err_msg='SDSw_open_object: open() failed errno=52 docfile='/fcfs_data/1100987654/sds2/96/1A/72/2518315609' Network Error

2012/02/09 00:52:45.791 238,0,1 <fnsw> SDS_worker 3 7 (1372218.1.96 0x14f03a.1) ... [INFO]
sds_read_doc_from_sds: successfully read doc_id=2518315609 after 1 retries due to SDSw repository errors

2012/02/09 00:52:51.034 238,0,1 <fnsw> SDS_worker 3 1 (1404960.1.85 0x157020.1) ... [INFO]
sds_read_doc_from_sds: successfully read doc_id=2518315609 after 1 retries due to SDSw repository errors.

The Hitachi HCP stale mount point error and retry operation causes four error log entries to be written for each document retrieved. If the stale mount point errors occur frequently, the Image Services error log can become very large and difficult to manage. The stale mount point error and retry operations could also impact performance.



CAUSE
The stale mount point problem is caused by a limitation in the design of Hitachi HCP NFS. Because the Hitachi HCP file system is “virtual,” it creates inodes on the fly and over time they can get reused or discarded. When an application tries to reference the file handle that has been discarded, the stale mount point error is returned. The solution is to retry the operation. 

For further details on the stale mount point issue, contact Hitachi.


RESOLVING THE PROBLEM
1) Image Services 4.1.2 FP4 and later has retry logic that handles the stale mount point condition. When a stale mount point condition exists, the Image Services software retries the retrieval. 

 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * touch /fnsw/local/trigger/SDS_no_retry_logging
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 *