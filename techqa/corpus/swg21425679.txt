Title: IBM WebSphere DataPower SOA Appliance: AAA Authorization step sends empty XACML request to configured PDP - United States

Text:
datapower; AAA; AZ; authorize; XACML; PDP; HTTP; GET; 404; PEP ; SOAPAction TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 IBM WebSphere DataPower SOA AAA Policy actions configured to send XACML requests to a remote Policy Decision Point (PDP) in the authorization (AZ) step may send empty request node sets if not configured properly. 

SYMPTOM
The following symptoms may occur: 

 * The DataPower probe will show an empty node set for the PDP request, but a non-empty result from the binding XSLT. 
 * A packet capture will indicate that an HTTP GET was sent to the PDP. 
 * The PDP may reply with a "404 Not Found" response. 
 * Request arrives at PDP without SOAPAction in the HTTP header 


CAUSE
The binding XSLT does not have a root Request node that uses either the XACML 1.0 or XACML 2.0 context namespace URIs: 
xmlns:xacml1-context="urn:oasis:names:tc:xacml:1.0:context" 
xmlns:xacml-context="urn:oasis:names:tc:xacml:2.0:context:schema:os"


RESOLVING THE PROBLEM
Ensure that the request node exists at the root of the binding XSLT's output with one of the supported namespace URIs. 

If you would like to wrap the request in a SOAP envelope, use the SOAP Enveloping setting available through the AAA Policy's authorization phase "Use XACML Authorization Decision" configuration option. 

If you would like to include SOAP headers in the envelope (such as the SOAPAction header), use the SoapHeader notation described in this sample binding style sheet: 

store:///aaa-xacml-binding-sample.xsl 

 


Cross reference information Segment Product Component Platform Version Edition Business Integration WebSphere DataPower Integration Appliance XI50 Firmware 3.8, 3.7.3, 3.7.2, 3.7.1 Business Integration WebSphere DataPower B2B Appliance XB60 Firmware 3.8, 3.7.3, 1.0 Business Integration WebSphere DataPower Low Latency Appliance XM70 Firmware 3.8, 3.7.3, 1.0 Business Integration WebSphere DataPower XML Security Gateway XS40 Not Applicable Firmware 3.8.1, 3.8, 3.7.3