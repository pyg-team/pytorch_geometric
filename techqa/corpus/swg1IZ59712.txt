Title: IBM IZ59712: KOQCOLL.EXE CRASHES AFTER MICROSOFT SQL SERVER STOPS. - United States

Text:
  A FIX IS AVAILABLE
IBM Tivoli Monitoring for Microsoft(R)App: SQL Server 6.2.1.1-TIV-ITM_SQL-IF0005 [http://www-01.ibm.com/support/docview.wss?uid=swg24029533]


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  Severity: 2
   Approver: Steven Barnett
   Compid: 5724B96MO
   Abstract: koqcoll.exe crashes after Microsoft SQL Server stops.
   
   Environment:
   All windows versions
   All Microsoft SQL Server versions.
   
   Microsoft SQL Server Agent 6.2.1.
   
   Problem Description: SQL Server agent does not show data on
   portal after MSSQL Server Stops due to 'Shared Memory Error'.
   
   korcoll.exe goes down with the Application Error in Application
   Event Log:
   ---
   2009/08/21 15:20:10 Application Error Error (100) 1000 N/A
   KV031030 Faulting Application koqcoll.exe, Versoin 0.0.0.0,
   Faulting Module koqsqld.dll, Version 0.0.0.0, fault address
   0x0001dee1
   ----
   
   Here is the output in C:\WINDOWS\System32\KOQCOLL.ras
   ---
   Exception 0xC0000005 (ACCESS_VIOLATION)
   
          Computer: KV031030                   Windows: 5.2-SP2
      Current Time: 2009/08/21, 15:20:09    Start Time: 2009/08/21,
   15:15:26
     Current Clock: 0x4A8E3C99             Start Clock: 0x4A8E3B7E
        Process ID: 0x00000D64               Thread ID: 0x000014D0
           Program: C:\Tivoli\itm\TMAITM6\KOQCOLL.EXE
            Origin: koqsqld.dll<>execSqlRequest+0x1CE81
   ...
   ---
   
   
   Detailed Recreation Procedure:
   1. Stop MSSQL Server service.
   2. Go to TEP.
   3. Click on any of the workspaces, it will not show data.
   
   Related Files and Output:
   <%CANDLE_HOME%>\TMAITM6\Logs\[SERVERNAME_OQ_INSTANCENAME_COL.out
   ]
   
   Search for '[Microsoft][ODBC SQL Server Driver][DBMSLPCN]
   ConnectionOpen'
   or
   '[Microsoft][ODBC SQL Server Driver][SharedMemory]
   ConnectionOpen' in collector log file which restricts Collector
   service from restarting and hence collector cannot collect data.
   
   
    
   
   

LOCAL FIX

PROBLEM SUMMARY
 *  KOQCOLL.EXE Crashes after Microsoft SQL Server stops.
   
   
    
   
   

PROBLEM CONCLUSION
 *  Now no more KOQCOLL.EXE Crash occurs after Microsoft SQL Server
   stops.
   
   The fix for this APAR is contained in the following maintenance
   packages:
      | interim fix | 6.2.1-TIV-ITM_SQL-IF0004
      | interim fix | 6.2.1.1-TIV-ITM_SQL-IF0001
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   IZ59712
   
   
 * REPORTED COMPONENT NAME
   TIV MON MS SQL
   
   
 * REPORTED COMPONENT ID
   5724B96MO
   
   
 * REPORTED RELEASE
   621
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2009-09-01
   
   
 * CLOSED DATE
   2009-10-23
   
   
 * LAST MODIFIED DATE
   2010-06-15
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   TIV MON MS SQL
   
   
 * FIXED COMPONENT ID
   5724B96MO
   
   

APPLICABLE COMPONENT LEVELS
 * R621 PSY
   UP