Title: IBM nzstart command requires password - United States

Text:
 TECHNOTE (FAQ)

QUESTION
 Why do I receive a 'Password:' prompt when running nzstart -i? 

ANSWER
This document applies to NPS 4.5 and later. 
If you run the nzstart -I command, you may be prompted for a "Password:" and see output similar to the following: 

 

nzstart -i


(startupsvr) Info: NZ-00022: --- program 'startupsvr' (24644) starting on host 'nps01' ... ---
(startupsvr) Info: NZ-00307: starting the system, restart = no
(startupsvr) Info: NZ-00313: running onStart: 'prepareForStart'
(startupsvr) Info: NZ-00312: invoking program: 'sessionmgr', restart type = 'this'


(sessionmgr) Info: NZ-00022: --- program 'sessionmgr' (25222) starting on host 'nps01' ... ---
(startupsvr) Info: NZ-00312: invoking program: 'initvrels', restart type = 'none'
Password: 

The "Password:" prompt is occurring as a result of the initvrels process calling /nz/kit/bin/adm/nzauth. This script is used to copy LDAP configuration files, regardless of whether LDAP is configured or not. Since the LDAP files reside under /etc (specifically as, /etc/ldap.conf and /etc/pam.d/netezza_nps), root access is need to access these files. 

 

Normally, the nz user and thus nzstart can access these files as a result of the following lines in the /etc/sudoers file: 

# NPS setup -- do not edit below this line -- initarp
nz ALL = NOPASSWD: /usr/local/sbin/nzinitarp
nz ALL = NOPASSWD: /nzlocal/scripts/rpc/spapwr.sh
nz ALL = NOPASSWD: /nz/kit/bin/adm/nzauth
nz ALL = NOPASSWD: /sbin/clustat 

If this line is commented out, or not present in the /etc/sudoers file, then you will be prompted for "Password:" when running nzstart. 

The resolution is to correctly define the /etc/sudoers as described above. 



HISTORICAL NUMBER
 NZ914210