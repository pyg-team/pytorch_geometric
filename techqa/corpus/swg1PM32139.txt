Title: IBM PM32139: REORG ABEND 00E40347 / ICE046A WHEN REAL-TIME STATS ARE MISSING FOR SOME PARTITIONS WITH UNLOAD/RELOAD PARALLELISM. - United States

Text:
z/os  A FIX IS AVAILABLE
Obtain the fix for this APAR.


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  Incorrect sort work data set allocation for mapping table index
   when real-time stats are missing for some partitions with
   unload/reload parallelism causes  Reorg abend 00E40347 / ICE046A
   
   
   Utility output will show:
   DSNU1160I  - PARTITIONS WILL BE UNLOADED/RELOADED IN PARALLEL
   UTILITY BATCH MEMORY EXECUTION ABENDED, REASON=X'00E40347'
   
   and DFSORT output will show:
   ICE046A 0 SORT CAPACITY EXCEEDED
   
   
    
   
   

LOCAL FIX
 *  Running with a single unload/reload task, then this problem
   would not occur.
   
   See "DB2 V9.1 for z/OS Utility Guide and Reference", section
   2.23.14 How to unload and reload partitions in parallel" for
   situations how REORG does not attempt to unload and reload table
   space partitions in parallel.
   
   
    
   
   

PROBLEM SUMMARY
 *  ****************************************************************
   * USERS AFFECTED: All DB2 9 for z/OS and DB2 10 for z/OS REORG *
   *                 TABLESPACE SHRLEVEL CHANGE utility users     *
   *                 with ZPARM UTSORTAL=YES running against      *
   *                 partitioned table spaces                     *
   ****************************************************************
   * PROBLEM DESCRIPTION: REORG TABLESPACE SHRLEVEL CHANGE fails  *
   *                      with MSGICE046A SORT CAPACITY EXCEEDED  *
   *                      in DFSORT and ABEND04E with RC00E40347  *
   *                      or RC00E40005 when some partitions are  *
   *                      missing real-time statistics (indicated *
   *                      by MSGDSNU3343I).                       *
   ****************************************************************
   * RECOMMENDATION: Apply corrective PTF when available          *
   ****************************************************************
   When running REORG SHRLEVEL CHANGE against a partitioned table
   space with unload/reload parallelism, the sort subtask for the
   mapping table index may fail with ICE046A SORT CAPACITY EXCEEDED
   and then cause a utility abend. This may happen when RTS values
   are missing for at least one but not all partitions of the table
   space (indicated by DSNU3334I) and DB2 is allocating sort work
   data sets when the partition(s) with missing RTS values contain
   a significant percentage of the total rows in the table space.
   
   
    
   
   

PROBLEM CONCLUSION
 *  Code has been changed to include the non-RTS row estimates into
   the number of keys to be sorted for the mapping table index that
   is used to allocate the sort work data sets.
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   PM32139
   
   
 * REPORTED COMPONENT NAME
   DB2 OS/390 & Z/
   
   
 * REPORTED COMPONENT ID
   5740XYR00
   
   
 * REPORTED RELEASE
   910
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2011-02-08
   
   
 * CLOSED DATE
   2011-03-03
   
   
 * LAST MODIFIED DATE
   2011-04-28
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
    UK65439 UK65440
   
   

MODULES/MACROS
 *  DSNURFIT
   
   
    
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   DB2 OS/390 & Z/
   
   
 * FIXED COMPONENT ID
   5740XYR00
   
   

APPLICABLE COMPONENT LEVELS
 * RA10 PSY UK65439 [HTTPS://WWW14.SOFTWARE.IBM.COM/WEBAPP/SET2/ORDERMEDIA/SHOPCART?PTFS=UK65439]
   UP11/04/03 P F103
   
   
 * R910 PSY UK65440 [HTTPS://WWW14.SOFTWARE.IBM.COM/WEBAPP/SET2/ORDERMEDIA/SHOPCART?PTFS=UK65440]
   UP11/04/03 P F103
   
   

FIX IS AVAILABLE
 * SELECT THE PTF APPROPRIATE FOR YOUR COMPONENT LEVEL. YOU WILL BE REQUIRED TO SIGN IN. DISTRIBUTION ON PHYSICAL MEDIA IS NOT AVAILABLE IN ALL COUNTRIES.