Title: IBM IZ23450: HIGH CPU OF MSSQL AGENT BECAUSE OF KOQTBLD CURSOR - United States

Text:
  FIXES ARE AVAILABLE
IBM Tivoli Monitoring for Database Microsoft SQL Server 6.2.0-TIV-ITM_SQL-LA0002 [http://www-01.ibm.com/support/docview.wss?uid=swg24020082]
IBM Tivoli Monitoring for Database Microsoft SQL Server 6.2.0-TIV-ITM_SQL-IF0005 [http://www-01.ibm.com/support/docview.wss?uid=swg24023163]
IBM Tivoli Monitoring for Database Microsoft SQL Server 6.2.0-TIV-ITM_SQL-IF0007 [http://www-01.ibm.com/support/docview.wss?uid=swg24024095]
IBM Tivoli Monitoring for Database Microsoft SQL Server 6.2.0-TIV-ITM_SQL-IF0010 [http://www-01.ibm.com/support/docview.wss?uid=swg24027415]


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  Environment:
   
     ITM 6.1 FP05 IF04 and MSSQL LA024 agent.
     Windows 2003 64 BIT and MSSQL 2005 64 bit in a clusted env
     Customer has TeraBytes MSSQL database, and the fragementation
   sit runs
     every 15 mins. It took longer than 15 mins and caused high CPU
   problem.
   
   Problem Description:
   
     Query in KOQTBLD cursor is to collect fragmentation
   information. It
   took more than 15 mins on customer's production env and caused
   the high
   CPU issue.
   
     As a workaround, we provided the new koqcoll.ctl script with
   modified KOQTBLD cursor ( koqcoll-pmr60563-0131.zip ).
   
     However since this was a temporary fix, we'll add "disable
   cursor"
   functionality by this APAR like we did for ITM Oracle agent.
   
   Detailed Recreation Procedure:
     The other problem is that we don't have test env in house
   which has
   large database env so it's hard to recreate the issue.
   
   Related Files and Output:
     All logs are located under %CANDLE_HOME%\tmaitm6\logs.
   
   
   Approver:sm
   
   
    
   
   

LOCAL FIX

PROBLEM SUMMARY
 *  The SQL Query used in KOQTBLD cursor can cause a high CPU issue.
   This fix disables the KOQTBLD cursor.
   
   
    
   
   

PROBLEM CONCLUSION
 *  This APAR has been fixed and delivered in a limited availability
   fix 6.1.0-TIV-ITM_SQL-LA0027. This maintenance delivery
   vehicle is a limited availability patch and therefore is in a
   "hidden directory." Level 2 Support can provide down load
   instructions to you. Contact level 2 support at:
   
   http://www.ibm.com/software/sysmgmt/products/support/Contact_L2
   Support.html [http://www.ibm.com/software/sysmgmt/products/support/Contact_L2Support.html]
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   IZ23450
   
   
 * REPORTED COMPONENT NAME
   TIV MON MS SQL
   
   
 * REPORTED COMPONENT ID
   5724B96MO
   
   
 * REPORTED RELEASE
   610
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2008-05-30
   
   
 * CLOSED DATE
   2008-07-29
   
   
 * LAST MODIFIED DATE
   2008-07-29
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   TIV MON MS SQL
   
   
 * FIXED COMPONENT ID
   5724B96MO
   
   

APPLICABLE COMPONENT LEVELS
 * R610 PSY
   UP