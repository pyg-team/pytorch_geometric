Title: IBM PI96808: ALTER COLUMN RUN ON AN IDENTITY COLUMN IN A TABLE WITH VERSIONING CAUSES AN ERROR - United States

Text:
z/os  A FIX IS AVAILABLE
Obtain the fix for this APAR.


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  ALTER COLUMN run on an identity column in a table with
   versioning causes an error like this:
   CZ61325W SQL Error in Module CKZ06100
   DSNT408I SQLCODE = -20180, ERROR: COLUMN TECHNICAL_KEY IN TABLE
   _TBCREATOR_.TBNAME CAN NOT BE ALTERED AS SPECIFIE
   DSNT418I SQLSTATE = 428FR SQLSTATE RETURN CODE
   DSNT415I SQLERRP = DSNXIALC SQL PROCEDURE DETECTING ERROR
   DSNT416I SQLERRD = 5 0 0 -1 0 0 SQL DIAGNOSTIC INFORMATION
   DSNT416I SQLERRD = X'00000005' X'00000000' X'00000000'
   X'FFFFFFFF'
   X'00000000' X'00000000' SQL DIAGNOSTIC INFORMATION
   CKZ76713E Subtask 01, SQL Error Executing Create Object DDL,
   RC=X'00000058, RS=X'00000000
   where _TBCREATOR_ - table creator and _TBNAME_ - table name.
   This fix eliminates this error.
   
   
    
   
   

LOCAL FIX
 *  1) Drop versioning before the cloning:
   ALTER TABLE "TBCREATOR"."TBNAME_BASE"
   DROP VERSIONING;
   COMMIT;
   2) Complete the cloning.
   3) Restore versioning after the cloning:
   ALTER TABLE "TBCREATOR"."TBNAME_BASE"
   ADD VERSIONING
   USE HISTORY TABLE "TBCREATOR"."TBNAME_HISTORY";
   COMMIT;
   
   
    
   
   

PROBLEM SUMMARY
 *  ****************************************************************
   * USERS AFFECTED: Users of IBM Db2 Cloning Tool z/OS.          *
   ****************************************************************
   * PROBLEM DESCRIPTION: ALTER COLUMN run on an identity column  *
   *                      in a table with versioning causes an    *
   *                      error like this:                        *
   *                      CZ61325W SQL Error in Module CKZ06100   *
   *                      DSNT408I SQLCODE = -20180, ERROR:       *
   *                       COLUMN TECHNICAL_KEY IN TABLE          *
   *                       _TBCREATOR_.TBNAME CAN NOT BE ALTERED  *
   *                       AS SPECIFIE                            *
   *                      DSNT418I SQLSTATE = 428FR SQLSTATE      *
   *                       RETURN CODE                            *
   *                      DSNT415I SQLERRP = DSNXIALC SQL         *
   *                       PROCEDURE DETECTING ERROR              *
   *                      DSNT416I SQLERRD = 5 0 0 -1 0 0 SQL     *
   *                       DIAGNOSTIC INFORMATION                 *
   *                      DSNT416I SQLERRD = X'00000005'          *
   *                       X'00000000' X'00000000'  X'FFFFFFFF'   *
   *                       X'00000000' X'00000000' SQL            *
   *                       DIAGNOSTIC INFORMATION                 *
   *                      CKZ76713E Subtask 01, SQL Error         *
   *                       Executing Create Object DDL,           *
   *                       RC=X'00000058, RS=X'00000000           *
   *                      where _TBCREATOR_ - table creator       *
   *                      and _TBNAME_ - table name.              *
   *                      This fix eliminates this error.         *
   ****************************************************************
   * RECOMMENDATION: APPLY the PTF.                               *
   ****************************************************************
   Code has been changed to correct this condition.
   
   
    
   
   

PROBLEM CONCLUSION
 *  APPLY the PTF.
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   PI96808
   
   
 * REPORTED COMPONENT NAME
   DB2 CLONING TOO
   
   
 * REPORTED COMPONENT ID
   5655N1000
   
   
 * REPORTED RELEASE
   320
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt / Xsystem
   
   
 * SUBMITTED DATE
   2018-04-16
   
   
 * CLOSED DATE
   2018-04-23
   
   
 * LAST MODIFIED DATE
   2018-05-01
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
    UI55393
   
   

MODULES/MACROS
 *     CKZBAKS  CKZBAKT  CKZBBKS  CKZBBKT  CKZBTS
   CKZCALNC CKZCAL9C CKZCAQNC CKZCAQ1C CKZCATM  CKZCATMO CKZCCTNC
   CKZCCT9C CKZCDB9C CKZCDPNC CKZCDTNC CKZCDT0C CKZCDT1C CKZCDT9C
   CKZCFNNC CKZCFN0C CKZCFN9C CKZCHECK CKZCIXNC CKZCIX0C CKZCIX2C
   CKZCIX9C CKZCMTNC CKZCMT0C CKZCPKNC CKZCPK0C CKZCPK1C CKZCPK9C
   CKZCPLNC CKZCPL0C CKZCPL1C CKZCPL9C CKZCRL2C CKZCRL9C CKZCRO9C
   CKZCRTNC CKZCSG9C CKZCSNNC CKZCSN9C CKZCSPNC CKZCSP9C CKZCSQNC
   CKZCSQ1C CKZCSQ9C CKZCTBNC CKZCTB0C CKZCTB1C CKZCTB2C CKZCTB9C
   CKZCTRNC CKZCTR0C CKZCTR9C CKZCTSNC CKZCTS0C CKZCTS2C CKZCTS9C
   CKZCVANC CKZCVA1C CKZCVTNC CKZCVT0C CKZCVT9C CKZCXANC CKZCXT9C
   CKZFCEXP CKZFCFTC CKZFGNCL CKZFLOG2 CKZFNORM CKZ00610 CKZ00992
   HCKZ320
   
   
    
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   DB2 CLONING TOO
   
   
 * FIXED COMPONENT ID
   5655N1000
   
   

APPLICABLE COMPONENT LEVELS
 * R320 PSY UI55393 [HTTPS://WWW14.SOFTWARE.IBM.COM/WEBAPP/SET2/ORDERMEDIA/SHOPCART?PTFS=UI55393]
   UP18/04/25 P F804
   
   

FIX IS AVAILABLE
 * SELECT THE PTF APPROPRIATE FOR YOUR COMPONENT LEVEL. YOU WILL BE REQUIRED TO SIGN IN. DISTRIBUTION ON PHYSICAL MEDIA IS NOT AVAILABLE IN ALL COUNTRIES.