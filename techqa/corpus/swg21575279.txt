Title: IBM Unable to use the history manager feature and the old version maintenance reports after migrating from previous releases - United States

Text:
 TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 The following new features that were introduced in IBM® InfoSphere® Master Data Management Server for Product Information Management versions 9.0 and 9.1 do not work after migrating from previous releases.

1. Enabling event logging using history manager
2. IBM MDMPIM Estimate old versions report
3. IBM MDMPIM Delete old version report 

SYMPTOM
The errors about missing tables (SQL0204N or ORA-00942) will be logged in the default.log file when using the history manager feature or running old version reports from the Report console. This file is located in the $TOP/logs/<Application Server> directory.


DIAGNOSING THE PROBLEM
The following DB2 or Oracle error will be logged depending on your back-end database: 

SQL0204N <table name> is an undefined name 

ORA-00942: table or view does not exist 


The following tables will be reported as missing: 

 

 1. taud_smp_simple_object 
 2. taud_ssm_simple_simple_map 
 3. taud_shi_simple_hierarchy

The error messages in various files in the $TOP/logs directory will be similar to the error messages given below:

[sch_worker_0] ERROR WPCIBMMDMPIMEstimateOldVersionsScript13189499965190 JOB_ID:28602- CWPCM0002E:Generic error / Exception: Exception:Could not execute query
Could not execute query
at com.ibm.ccd.common.interpreter.operation.generated.GenExecuteQueryOperation.execute(Unknown Source)
at WPCIBMMDMPIMEstimateOldVersionsScript13189499965190.ScriptFunction__estimateOldVersions(WPCIBMMDMPIMEstimateOldVersionsScript13189499965190.java:787)
at WPCIBMMDMPIMEstimateOldVersionsScript13189499965190.run(WPCIBMMDMPIMEstimateOldVersionsScript13189499965190.java:1752)
at com.ibm.ccd.common.interpreter.engine.Script.runFunction(Unknown Source)
at com.ibm.ccd.common.interpreter.engine.Script.execute(Unknown Source)
at com.ibm.ccd.common.interpreter.engine.Script.run(Unknown Source)
at com.ibm.ccd.report.common.Report.generate(Unknown Source)
at com.ibm.ccd.report.common.ReportExe.execute(Unknown Source)
at com.ibm.ccd.scheduler.threads.SchedulerThread.fuzaoRun(Unknown Source)
at com.ibm.ccd.common.util.FuzaoRunnableAdapter.run(Unknown Source)
at com.ibm.ccd.common.util.FuzaoThread.run(Unknown Source)
Caused by: java.sql.SQLSyntaxErrorException: ORA-00942: table or view does not exist

at oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:440)
at oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:396)
at oracle.jdbc.driver.T4C8Oall.processError(T4C8Oall.java:837)
at oracle.jdbc.driver.T4CTTIfun.receive(T4CTTIfun.java:290)
at oracle.jdbc.driver.T4CTTIfun.doRPC(T4CTTIfun.java:191)
at oracle.jdbc.driver.T4C8Oall.doOALL(T4C8Oall.java:523)
at oracle.jdbc.driver.T4CStatement.doOall8(T4CStatement.java:193)
at oracle.jdbc.driver.T4CStatement.executeForDescribe(T4CStatement.java:852)
at oracle.jdbc.driver.OracleStatement.executeMaybeDescribe(OracleStatement.java:1153)
at oracle.jdbc.driver.OracleStatement.doExecuteWithTimeout(OracleStatement.java:1275)
at oracle.jdbc.driver.OracleStatement.executeQuery(OracleStatement.java:1477)
at oracle.jdbc.driver.OracleStatementWrapper.executeQuery(OracleStatementWrapper.java:392)
at org.apache.commons.dbcp.DelegatingStatement.executeQuery(DelegatingStatement.java:188)
... 11 more 



RESOLVING THE PROBLEM
Follow the steps mentioned below to resolve the problem: 

1. Copy or transfer by FTP one of the attached files to the $TOP directory of your MDM Server for PIM installation : 

When using DB2 as the back-end database transfer the db2_create_missing_tables.sql file. 

db2_create_missing_tables.sql [/support/docview.wss?uid=swg21575279&aid=2] [/support/docview.wss?uid=swg21575279&aid=1] 

When using Oracle as the back-end database transfer the oracle_create_missing_tables.sql file. 

oracle_create_missing_tables.sql [/support/docview.wss?uid=swg21575279&aid=4] [/support/docview.wss?uid=swg21575279&aid=3] 

2. Run the runSQL.pl script using the following command from within the $TOP directory: 

 

perl $PERL5LIB/runSQL.pl --sql_file=<file name> 

 

Replace <file name> with db2_create_missing_tables.sql or oracle_create_missing_tables.sql depending on your back-end database. 

An APAR (JR40709) has been created and will be resolved in the upcoming fix pack.