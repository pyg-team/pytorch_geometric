Title: IBM PI20040: UNSET DEPLOYMENT DESCRIPTOR ATTRIBUTES BECOME SET DURING DEPLOYMENT. - United States

Text:
  FIXES ARE AVAILABLE
8.5.5.4: WebSphere Application Server V8.5.5 Fix Pack 4 [http://www-01.ibm.com/support/docview.wss?uid=swg24038539]
8.0.0.10: WebSphere Application Server V8.0 Fix Pack 10 [http://www-01.ibm.com/support/docview.wss?uid=swg24039242]
8.5.5.5: WebSphere Application Server V8.5.5 Fix Pack 5 [http://www-01.ibm.com/support/docview.wss?uid=swg24039425]
8.5.5.6: WebSphere Application Server V8.5.5 Fix Pack 6 [http://www-01.ibm.com/support/docview.wss?uid=swg24040035]
8.0.0.11: WebSphere Application Server V8.0 Fix Pack 11 [http://www-01.ibm.com/support/docview.wss?uid=swg24040425]
8.5.5.7: WebSphere Application Server V8.5.5 Fix Pack 7 [http://www-01.ibm.com/support/docview.wss?uid=swg24040533]
8.5.5.8: WebSphere Application Server V8.5.5 Fix Pack 8 [http://www-01.ibm.com/support/docview.wss?uid=swg24041178]
8.0.0.12: WebSphere Application Server V8.0 Fix Pack 12 [http://www-01.ibm.com/support/docview.wss?uid=swg24041590]
8.5.5.9: WebSphere Application Server V8.5.5 Fix Pack 9 [http://www-01.ibm.com/support/docview.wss?uid=swg24041819]
8.5.5.10: WebSphere Application Server V8.5.5 Fix Pack 10 [http://www-01.ibm.com/support/docview.wss?uid=swg24042150]
8.5.5.11: WebSphere Application Server V8.5.5 Fix Pack 11 [http://www-01.ibm.com/support/docview.wss?uid=swg24043005]
8.0.0.13: WebSphere Application Server V8.0 Fix Pack 13 [http://www-01.ibm.com/support/docview.wss?uid=swg24042746]
8.5.5.12: WebSphere Application Server V8.5.5 Fix Pack 12 [http://www-01.ibm.com/support/docview.wss?uid=swg24043844]
8.0.0.14: WebSphere Application Server V8.0 Fix Pack 14 [http://www-01.ibm.com/support/docview.wss?uid=swg24044096]
8.5.5.13: WebSphere Application Server V8.5.5 Fix Pack 13 [http://www-01.ibm.com/support/docview.wss?uid=swg24044479]
8.0.0.15: WebSphere Application Server V8.0 Fix Pack 15 [http://www-01.ibm.com/support/docview.wss?uid=swg24044734]


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  Title: Unset deployment descriptor attributes become set during
   deployment.
   
   Abstract: Deployment processing, when writing deployment
   descriptor files, may incorrect write a set value for an
   attribute in cases where the attribute value was unset in the
   original deployment descriptor.
   
   Description: Application deployment processing may write
   deployment descriptor files, for example, the web-module
   deployment descriptor "web.xml" is written as "web_merged.xml",
   with values added which were obtained by annotations processing.
   
   The write of the merged descriptor should not write attributes
   with assigned values when those attributes are unset in the
   original descriptor, because a change to a set value can change
   the meaning of the attribute.  For example, the web-module
   deployment descriptor "web.xml" has an optional
   "session-config" element, and this has optional
   "session-timout" and "tracking-mode" elements.  Whether the
   "session-timeout" value is set (whether it appears in the
   deployment descriptor is significant): when absent, a value is
   provided by the web container; when set the configured value is
   used.
   
      <session-config>
          <session-timeout>120</session-timeout>
          <tracking-mode>COOKIE</tracking-mode>
      </session-config>
   
   The problem of this APAR is that an initial "session-config"
   which has
   just a "tracking-mode" element is written with both
   "session-timeout"
   and "tracking-mode":
   
   This original element:
   
      <session-config>
          <tracking-mode>COOKIE</tracking-mode>
      </session-config>
   
   Is written as:
   
      <session-config>
          <session-timeout>0</session-timeout>
          <tracking-mode>COOKIE</tracking-mode>
      </session-config>
   
   This problem also occurs in other locations, for example:
   Within "data-source" elements:
     "initial-pool-size"
     "isolation-level"
     "login-timeout"
     "max-idle-time"
     "max-pool-size"
     "max-statements"
     "min-pool-size"
     "port-number"
   
   This update addresses the problem for both both "session-config"
   "session-timeout" elements and for the listed "data-source"
   elements.
   
   WebSphere Application Server V8.5
   Distributed operating systems.
   
   
    
   
   

LOCAL FIX

PROBLEM SUMMARY
 *  ****************************************************************
   * USERS AFFECTED:  All users of IBM WebSphere Application      *
   *                  Server                                      *
   ****************************************************************
   * PROBLEM DESCRIPTION: Unset deployment descriptor             *
   *                      attributes become set during            *
   *                      deployment.                             *
   ****************************************************************
   * RECOMMENDATION:                                              *
   ****************************************************************
   For this APAR, a problem occurred where XML elements were
   added to XML descriptor files during application deployment
   processing.  For example, this initial "session-config"
   element, read from "web.xml":
   <session-config>
   <tracking-mode>COOKIE</tracking-mode>
   </session-config>
   Was written to "web_merged.xml" as:
   <session-config>
   <session-timeout>0</session-timeout>
   <tracking-mode>COOKIE</tracking-mode>
   </session-config>
   An identical problem occurs with the "data-source" elements:
   "initial-pool-size"
   "isolation-level"
   "login-timeout"
   "max-idle-time"
   "max-pool-size"
   "max-statements"
   "min-pool-size"
   "port-number"
   The "merged" deployment descriptor files which are created by
   the deployment, and contain a cache of module metadata as it
   will be used by the application server.
   
   
    
   
   

PROBLEM CONCLUSION
 *  The "session-timeout" value should not be added during the
   write of "web_merged.xml".  "data-source" child elements
   should not be added during the write of this data.
   
   A code update was made to correct these two problem cases.
   
   To preserve the prior behavior -- with respect to
   'session-timeout' -- use the custom property
   "com.ibm.config.allow.set.session.timeout".  The default for
   this property is 'false', which is to use new (correct)
   behavior.  Set the custom property to 'true' to revert to the
   prior behavior for writing 'session-timeout'.
   
   The fix for this APAR is currently targeted for inclusion in
   fix packs 8.0.0.10 and 8.5.5.4.  Please refer to the
   Recommended Updates page for delivery information:
   http://www.ibm.com/support/docview.wss?rs=180&uid=swg27004980 [http://www.ibm.com/support/docview.wss?rs=180&uid=swg27004980]
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   PI20040
   
   
 * REPORTED COMPONENT NAME
   WEBS APP SERV N
   
   
 * REPORTED COMPONENT ID
   5724H8800
   
   
 * REPORTED RELEASE
   850
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2014-06-13
   
   
 * CLOSED DATE
   2014-07-30
   
   
 * LAST MODIFIED DATE
   2014-07-30
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   WEBS APP SERV N
   
   
 * FIXED COMPONENT ID
   5724H8800
   
   

APPLICABLE COMPONENT LEVELS
 * R800 PSY
   UP
   
   
 * R850 PSY
   UP