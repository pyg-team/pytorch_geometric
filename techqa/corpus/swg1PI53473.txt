Title: IBM PI53473: RDZ THREADPOOL LOOPS WITH HIGH CPU CONSUMPTION AFTER JAVAX.NET.SSL.SSLEXCEPTION: BAD RECORD MAC - United States

Text:
z/os  A FIX IS AVAILABLE
Rational Developer for System z Fix Pack 4 (9.5.1.4) for 9.5.1. [http://www-01.ibm.com/support/docview.wss?uid=swg24043315]


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS FIXED IF NEXT.
    
   
   

ERROR DESCRIPTION
 *  In Rational Developer for System z - RDz - v9.1.1.2, a
   threadpool will loop and consume high CPU if a SSLException is
   raised like "bad record MAC".
   
   Enabling SSL traces will show the error, like:
   
   Tue Oct 27 13:19:46 GMT+01:00 2015: DStore ReceiverThread-48,
   handling exception: javax.net.ssl.SSLException: bad record MAC
   
   A javacore file on the threadpool will show a stack like:
   
   3XMTHREADINFO      "DStore ReceiverThread-57"
   J9VMThread:0x0000000034143700,
   j9thread_t:0x000000488F23F6B0,
   java/lang/Thread:0x000000008055F368, state:R, prio=5
   3XMJAVALTHREAD            (java/lang/Thread getId:0x4D,
   isDaemon:false)
   3XMTHREADINFO1            (native thread ID:0x30256000, native
   priority:0x5, native policy:UNKNOWN, vmstate:CW, vm thread
   flags:0x00000001)
   3XMCPUTIME               CPU usage total: 187.215000000 secs,
   current category="Application"
   3XMHEAPALLOC             Heap bytes allocated since last GC
   cycle=48281216 (0x2E0B680)
   3XMTHREADINFO3           Java callstack:
   4XESTACKTRACE                at
   com/ibm/jsse2/qc.j(qc.java:70(Compiled Code))
   4XESTACKTRACE                at
   com/ibm/jsse2/e.read(e.java:38(Compiled Code))
   5XESTACKTRACE                   (entered lock:
   com/ibm/jsse2/e@0x0000000080581210, entry count: 1)
   4XESTACKTRACE                at
   java/io/BufferedInputStream.fill(BufferedInputStream.java:247(Co
   mpiled Code))
   4XESTACKTRACE                at
   java/io/BufferedInputStream.read1(BufferedInputStream.java:287(C
   ompiled Code))
   4XESTACKTRACE                at
   java/io/BufferedInputStream.read(BufferedInputStream.java:346(Co
   mpiled Code))
   5XESTACKTRACE                   (entered lock:
   java/io/BufferedInputStream@0x0000000080581228, entry count: 1)
   4XESTACKTRACE                at
   org/eclipse/dstore/internal/core/util/XMLparser.readFile(XMLpars
   er.java:203(Compiled Code))
   4XESTACKTRACE                at
   org/eclipse/dstore/internal/core/util/XMLparser.parseDocument(XM
   Lparser.java:684)
   4XESTACKTRACE                at
   org/eclipse/dstore/core/util/Receiver.handleInput(Receiver.java:
   155)
   4XESTACKTRACE                at
   org/eclipse/dstore/core/util/Receiver.run(Receiver.java:127)
   
   
   Steps to reproduce:
   1- Edit a remote COBOL program
   2- modify and save it
   3- RDz client shows errors
   RSEG1057 Connect failed. Host <host> not found or not responding
   "RSEF1002 Operation failed.  File system input or output error".
   4- RDz threadpool starts to consume high CPU
   
   
    
   
   

LOCAL FIX
 *  SSLException has been seen when using Java security provider
   com.ibm.crypto.hdwrCCA.provider.IBMJCECCA on z/OS.
   
   A workaround is to revert to the default JCE security provider.
   Set security.provider.1=com.ibm.crypto.provider.IBMJCE as first
   secuirty provider in file
   <JAVA_HOME>/lib/security/java.security
   
   
    
   
   

PROBLEM SUMMARY
 *  In Rational Developer for System z - RDz - v9.1.1.2, a
   threadpool will loop and consume high CPU if a SSLException is
   raised like "bad record MAC".
   
   Enabling SSL traces will show the error, like:
   
   Tue Oct 27 13:19:46 GMT+01:00 2015: DStore ReceiverThread-48,
   handling exception: javax.net.ssl.SSLException: bad record MAC
   
   A javacore file on the threadpool will show a stack like:
   
   3XMTHREADINFO      "DStore ReceiverThread-57"
   J9VMThread:0x0000000034143700,
   j9thread_t:0x000000488F23F6B0,
   java/lang/Thread:0x000000008055F368, state:R, prio=5
   3XMJAVALTHREAD            (java/lang/Thread getId:0x4D,
   isDaemon:false)
   3XMTHREADINFO1            (native thread ID:0x30256000, native
   priority:0x5, native policy:UNKNOWN, vmstate:CW, vm thread
   flags:0x00000001)
   3XMCPUTIME               CPU usage total: 187.215000000 secs,
   current category="Application"
   3XMHEAPALLOC             Heap bytes allocated since last GC
   cycle=48281216 (0x2E0B680)
   3XMTHREADINFO3           Java callstack:
   4XESTACKTRACE                at
   com/ibm/jsse2/qc.j(qc.java:70(Compiled Code))
   4XESTACKTRACE                at
   com/ibm/jsse2/e.read(e.java:38(Compiled Code))
   5XESTACKTRACE                   (entered lock:
   com/ibm/jsse2/e@0x0000000080581210, entry count: 1)
   4XESTACKTRACE                at
   java/io/BufferedInputStream.fill(BufferedInputStream.java:247(Co
   mpiled Code))
   4XESTACKTRACE                at
   java/io/BufferedInputStream.read1(BufferedInputStream.java:287(C
   ompiled Code))
   4XESTACKTRACE                at
   java/io/BufferedInputStream.read(BufferedInputStream.java:346(Co
   mpiled Code))
   5XESTACKTRACE                   (entered lock:
   java/io/BufferedInputStream@0x0000000080581228, entry count: 1)
   4XESTACKTRACE                at
   org/eclipse/dstore/internal/core/util/XMLparser.readFile(XMLpars
   er.java:203(Compiled Code))
   4XESTACKTRACE                at
   org/eclipse/dstore/internal/core/util/XMLparser.parseDocument(XM
   Lparser.java:684)
   4XESTACKTRACE                at
   org/eclipse/dstore/core/util/Receiver.handleInput(Receiver.java:
   155)
   4XESTACKTRACE                at
   org/eclipse/dstore/core/util/Receiver.run(Receiver.java:127)
   
   
   Steps to reproduce:
   1- Edit a remote COBOL program
   2- modify and save it
   3- RDz client shows errors
   RSEG1057 Connect failed. Host <host> not found or not responding
   "RSEF1002 Operation failed.  File system input or output error".
   4- RDz threadpool starts to consume high CPU
   
   This APAR is being closed FIN with concurrence from the
   submitting customer. This means that a fix to this APAR is
   expected to be delivered from IBM in a release which is being
   developed at the time that the APAR was closed. The latest
   release of the product to exit development at the time this
   APAR was closed was: Rational Developer for z Systems V9.5.1.4.
   
   
    
   
   

PROBLEM CONCLUSION

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   PI53473
   
   
 * REPORTED COMPONENT NAME
   RD/Z HOST
   
   
 * REPORTED COMPONENT ID
   5724T0723
   
   
 * REPORTED RELEASE
   910
   
   
 * STATUS
   CLOSED FIN
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt / Xsystem
   
   
 * SUBMITTED DATE
   2015-12-02
   
   
 * CLOSED DATE
   2017-04-26
   
   
 * LAST MODIFIED DATE
   2017-04-26
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION

APPLICABLE COMPONENT LEVELS
 * R951 PSY
   UP