Title: IBM text_file_delta: Error: "foo.c" is not a 'text file': it contains a line exceeding 8000 bytes - United States

Text:
1146197; text_file_delta; 8000; failed create_version operation; z_text_file; contains a line exceeding 8000 bytes; PK34583 TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 This technote explains why attempts to checkin an IBM® Rational® ClearCase® file causes an error stating the file contains a line exceeding 8000 bytes along with steps to resolve the problem. 

SYMPTOM
 

During checkin the following error occurs: 

 

text_file_delta: Error: "foo.c" is not a 'text file': it contains a line exceeding 8000 bytes.
Use a different type manager (such as compressed file).
cleartool: Error: Type manager "text_file_delta" failed create_version operation.
cleartool: Error: Unable to check in "foo.c".


CAUSE
 

This is due to the text_file_delta type manager is unable to handle a single line of 8000 bytes or more.

Note: Some type manager errors on Windows are reported in the Windows Application Log (Source:ClearCase, Category:Debug). Therefore, when performing the checkin operation on Windows the error below will be displayed and the more detailed message as noted above will be reported in the 
Application Log.

cleartool: Error Type manager "text_file_delta". failed create_version operation.
cleartool: Error: Unable to check in "testfile".


RESOLVING THE PROBLEM
 

 

This issue has been addressed by new type managers that were made available in ClearCase 2002.05.00, refer to technote 1127954 [http://www-1.ibm.com/support/docview.wss?&rs=984&uid=swg21127954] on how to implement them in your environment. 

 

The details in technote 1119269 [http://www-1.ibm.com/support/docview.wss?rs=984&uid=swg21119269] discuss how these new type managers are integrated after upgrading to ClearCase 2003.06.00. 

 

The new type managers are only made available in a VOB that is at feature level 4. If you have upgraded to Rational ClearCase 7.0 [http://www-1.ibm.com/support/docview.wss?rs=984&uid=swg24012293], but have not upgraded the VOB to feature level 4, then the new type managers are not available for use. 

 

WORKAROUNDS: 

There are two possible ways to resolve this issue without using the new type managers detailed above: 

 

 1. Insert line breaks in the file so that the length of every line is less than 8000 characters to allow the checkin to succeed.
    
    
    OR 
    
    
 2. Modify the file type so that it uses a different type manager like compressed_file.
    
    Example: cleartool chtype compressed_file foo.c
    


Refer to the IBM RFE Community [https://www.ibm.com/developerworks/rfe/] for information about a Change request (RFE) 3656 [http://www.ibm.com/developerworks/support/rational/rfe/execute?use_case=viewChangeRequest&CR_ID=3656]that was opened to request support for exceeding 8,000 bytes per line on text files. RELATED INFORMATION
#New type managers introduced in v2002.05.00 [http://www.ibm.com/support/docview.wss?uid=swg21127954]
Detecting lines with 8000 or more characters [http://www.ibm.com/support/docview.wss?uid=swg21179082]
Knowledge Collection: Type manager "text_file_delta" [http://www.ibm.com/support/docview.wss?uid=swg21259086]
Compare and merge functionality is for text files only [http://www.ibm.com/support/docview.wss?uid=swg21259298]
A Japanese translation is available [http://www.ibm.com/support/docview.wss?uid=swg21459446]






Cross reference information Segment Product Component Platform Version Edition Software Development Rational ClearCase Type Manager