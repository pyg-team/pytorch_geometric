Title: IBM PM39108: JCR UPDATE FAILS IF PORTAL ADMINISTRATIVE ID UID NAME IS LONGER THAN 32CHARACTERS - United States

Text:
  FIXES ARE AVAILABLE
7.0.0.2 Download: WebSphere Portal and WCM V7.0 fix pack 2 [http://www-01.ibm.com/support/docview.wss?uid=swg24031676]
Fixes integrated in WebSphere Portal 7.0.0.1 & 7.0.0.2 Combined Cumulative Fixes [http://www-01.ibm.com/support/docview.wss?uid=swg24029452]


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  Update fails with the following exception (in this example,
   Oracle is
   the backend database but this could happen for any database):
   ======================
   Caused by: com.ibm.icm.ci.data.CDMContentException: Error while
   calling
   a function updateItems of PLS data manager.
   at
   com.ibm.icm.ci.data.impl.ContentExceptionMap.getMappedException
   (ContentE
   xceptionMap.java:76)
   at
   com.ibm.icm.ci.data.impl.dautils.PUpdateNodeImpl.persistUpdated
   Contents(
   PUpdateNodeImpl.java:977)
   at
   com.ibm.icm.ci.data.impl.ContentService.update(ContentService.j
   ava:420)
   at
   com.ibm.icm.ci.data.impl.ContentService.updateEvenIfLocked(Cont
   entServic
   e.java:378)
   at com.ibm.icm.jcr.NodeImpl.save(NodeImpl.java:2523)
   ... 38 more
   Caused by: com.ibm.icm.da.DBAccessException: ORA-12899: value
   too large
   for column "ICMADMIN"."ICMUT01013001"."LASTCHANGEDUSERID"
   (actual: 34,
   maximum: 32)
   Thread 1696294171 : n: ORA-12899: value too large for column
   "ICMADMIN"."ICMUT01013001"."LASTCHANGEDUSERID" (actual: 34,
   maximum: 32)
   at
   oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:440)
   at
   oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:396)
   at oracle.jdbc.driver.T4C8Oall.processError(T4C8Oall.java:837)
   at oracle.jdbc.driver.T4CTTIfun.receive(T4CTTIfun.java:290)
   at oracle.jdbc.driver.T4CTTIfun.doRPC(T4CTTIfun.java:191)
   at oracle.jdbc.driver.T4C8Oall.doOALL(T4C8Oall.java:523)
   ======================
   The LASTCHANGEUSERID column has a max length of 32 characters.
   
   
    
   
   

LOCAL FIX
 *  Edit icm.properties and use a Portal Administrative ID that is
   shorter
   than 32 characters for the "jcr.admin.uniquename" property,
   then
   reattempt the update.
   
   
    
   
   

PROBLEM SUMMARY
 *  Update fails with the following exception (in this example,
   Oracle is
   the backend database but this could happen for any database):
   ======================
   Caused by: com.ibm.icm.ci.data.CDMContentException: Error while
   calling
   a function updateItems of PLS data manager.
   at
   com.ibm.icm.ci.data.impl.ContentExceptionMap.getMappedException
   (ContentE
   xceptionMap.java:76)
   at
   com.ibm.icm.ci.data.impl.dautils.PUpdateNodeImpl.persistUpdated
   Contents(
   PUpdateNodeImpl.java:977)
   at
   com.ibm.icm.ci.data.impl.ContentService.update(ContentService.j
   ava:420)
   at
   com.ibm.icm.ci.data.impl.ContentService.updateEvenIfLocked(Cont
   entServic
   e.java:378)
   at com.ibm.icm.jcr.NodeImpl.save(NodeImpl.java:2523)
   ... 38 more
   Caused by: com.ibm.icm.da.DBAccessException: ORA-12899: value
   too large
   for column "ICMADMIN"."ICMUT01013001"."LASTCHANGEDUSERID"
   (actual: 34,
   maximum: 32)
   Thread 1696294171 : n: ORA-12899: value too large for column
   "ICMADMIN"."ICMUT01013001"."LASTCHANGEDUSERID" (actual: 34,
   maximum: 32)
   at
   oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:440)
   at
   oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:396)
   at oracle.jdbc.driver.T4C8Oall.processError(T4C8Oall.java:837)
   at oracle.jdbc.driver.T4CTTIfun.receive(T4CTTIfun.java:290)
   at oracle.jdbc.driver.T4CTTIfun.doRPC(T4CTTIfun.java:191)
   at oracle.jdbc.driver.T4C8Oall.doOALL(T4C8Oall.java:523)
   ======================
   The LASTCHANGEUSERID column has a max length of 32 characters.
   
   
    
   
   

PROBLEM CONCLUSION
 *  PM39108
   =======
   
   Problem Description:
      JCR UPDATE FAILS IF PORTAL ADMINISTRATIVE ID UID NAME IS
   LONGER THAN 32CHARACTERS
   
   Problem Solution:
     PM39108 contains code changes.
   
   Affected Users:
      All portal users.
   
   Pre-Requisite(s):
      Portal Version: 7.0.0.1
   
   Installation Steps:
      NOTE:  YOU MUST FIRST DOWNLOAD THE UPDATE INSTALLER TOOL IN
   ORDER TO INSTALL A FIX.
             The WebSphere Portal Update Installer (PUI) can be
   downloaded from the following link:
             http://www.ibm.com/support/docview
   .wss?rs=688&uid=swg24006942 [http://www.ibm.com/support/docview.wss?rs=688&uid=swg24006942]
   
   *Reminder: the version of PUI used varies based on the version
   of WebSphere Portal.
   Ensure the correct version is in use.*
   
   Refer to the "Cluster Maintenance" topic in the 7.0
   Documentation
   (http://www-10.lotus.com/ldd/portalwiki
   .nsf/dx/Cluster_maintenance_wp7)
   for additional information on installing or uninstalling interim
   fixes in clustered environments
   while maintaining continuous availability of your portal.
   
   1. Stop the WebSphere Portal server
   2. Apply the PM39108.jar using the PUI (Portal update
   installer).
      Refer to the PUI readme for further information on using the
   PUI.
   3. Restart the WebSphere Portal server.
   
   
   Uninstall:
   NOTE:  FIXES MUST BE REMOVED IN THE ORDER THEY WERE APPLIED.
          DO NOT REMOVE A FIX UNLESS ALL FIXES APPLIED AFTER IT
   HAVE FIRST BEEN REMOVED.
          YOU MAY REAPPLY ANY REMOVED FIX.
   
   Use the Portal Update Installer to uninstall the fix:
   
      1. Shutdown WebSphere Portal.
      2. Follow the instructions that are packaged with the Portal
   Update Installer on how to uninstall a fix.
      3. Restart WebSphere Portal.
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   PM39108
   
   
 * REPORTED COMPONENT NAME
   WEBSPHERE PORTA
   
   
 * REPORTED COMPONENT ID
   5724E7600
   
   
 * REPORTED RELEASE
   700
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2011-05-12
   
   
 * CLOSED DATE
   2011-05-17
   
   
 * LAST MODIFIED DATE
   2011-05-17
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   WEBSPHERE PORTA
   
   
 * FIXED COMPONENT ID
   5724E7600
   
   

APPLICABLE COMPONENT LEVELS
 * R700 PSY
   UP