Title: IBM HD66325: ERROR #: 00321 AFTER VIEWING FILES IN SMARTEAM USING PDF FILES AS THE VIEWABLE FILE AND USING THE ADOBE READER AS THE VIEWER - United States

Text:
 SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PERMANENT RESTRICTION.
    
   
   

ERROR DESCRIPTION
 *  Error #: 00321 received after viewing files in SmarTeam when
   using PDF files as the viewable file and using the Adobe Reader
   as the Viewer.
   
   Setup:
   ------
   Note: SMARTEAM is configured in a High Security Vault
   configuration.
   
   1. Configure the Microsoft Word File Type in Applications Setup
      to use Adobe Reader as the Embedded Viewer (see IBM Technote
      #: 1248918).
   2. Create two MS Word documents and associated PDF files.
   
   Scenario:
   ---------
   1. Launch SMARTEAM - Editor and login as joe.
   2. Add both MS Word documents that were created during Setup to
      SMARTEAM and Check them In.
   Note: The viewable PDF files will also be moved to the
      Checked-in Vault.
   3. View the first MS Word document
   ==> It views just fine and it is using Adobe Reader as the
      plug-in viewer.
   4. While still having the Viewer tab selected, select the second
      MS Word document.
   
   ==> You will receive an error message saying that the viewable
      PDF file for the first file cannot be deleted from the
      temporary directory in SmTemp.
      **********************
      Error No: 00321
      Check if you have permission to delete file <file_name> in
      folder '\\<server>\SmTemp\<server>\<server>\<temp_folder>'.
      Check also if another user is using the file. Contact your
      System Administrator to obtain the correct permission.
      **********************
   5. If you click OK on the error then the file will be viewed
      just fine.
   6. If you investigate the folder in SmTemp that is specified in
      the error message you will see that both viewable PDF files
      exist in there.
   
   Note: The system is trying to delete the viewable file after you
      switch to a different tab.
   
      If you terminate the AcroRd32.exe process in Task Manager
      and then switch tabs, then the file you were viewing will
      get deleted from the temporary directory in SmTemp and no
      error will appear.
   
      Therefore, it is safe to assume that Acrobat Reader still
      has a lock on the file when SMARTEAM is trying to delete
      it. Thus resulting in the 00321 error
   
   Conclusion:
   -----------
   This issue does not occur if you use the SmarTeam Viewer to view
   the viewable PDF files.
   
   Also, if you set Applications Setup to view the native file (no
   'Viewer file extension' or the same extension as the native
   file), then SMARTEAM does not try to delete the file when
   switching to another tab.  When the User closes SMARTEAM -
   Editor, then the temporary folder that was created in the SmTemp
   folder on the Vault server will get deleted along with all the
   files inside it.
   
   SMARTEAM should only delete the folder and files once the User
   exits SMARTEAM - Editor, regardless of what is specified in the
   'Viewer file extension' box.
   
   
    
   
   

LOCAL FIX

PROBLEM SUMMARY
 *  Error #: 00321 after viewing files in SmarTeam when using PDF f
   iles as the viewable file and using the Adobe Reader as the Vie
   w
   Error #: 00321 after viewing files in SmarTeam
   when using PDF files as the viewable file and using
   the Adobe Reader as the Viewer
   Scenario:
   Error #: 00321 after viewing PDF files in
   SmarTeam when using
   PDF files as the viewable file for another File Type
   and using the
   Adobe Reader as the Viewer.
   SMARTEAM V5 R17 SP6
   Please see the attached video and detailed
   scenario document.
   .
   
   
    
   
   

PROBLEM CONCLUSION
 *  THIS PROBLEM IS PERMANENT RESTRICTION IN
   SMARTEAM.
   This is a problem of permissions. User that using
   the vault should have permissions to modify/delete
   files in
   folder '\\<server>\SmTemp\<server>\<server>\<t
   emp_folder>.
   .
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   HD66325
   
   
 * REPORTED COMPONENT NAME
   SMARTEAM NT>XP
   
   
 * REPORTED COMPONENT ID
   569199970
   
   
 * REPORTED RELEASE
   517
   
   
 * STATUS
   CLOSED PRS
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2007-07-29
   
   
 * CLOSED DATE
   2007-11-29
   
   
 * LAST MODIFIED DATE
   2007-11-29
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION

APPLICABLE COMPONENT LEVELS