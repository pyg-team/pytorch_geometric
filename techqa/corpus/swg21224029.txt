Title: IBM Inconsistent results on session timeout when using External Security Manager - United States

Text:
tai; third-party; login; log-in; authenticate; session; wps; TAM; timeout; timeout.resume.session; redirect.logout.url; kiosk TECHNOTE (FAQ)

QUESTION
 When testing IBM WebSphere® Portal authentication with your External Security Manager (ESM), you experience behavior similar to one of the following:

Scenario 1
=======
-User A logs in.
-User A logs out.
-User B tries to log in using the same browser window, but is immediately logged out.

- OR - 

Scenario 2
=======
-User A logs in and experiences a session timeout.
-User B tries to log in using the same browser window, and while User B gets directed to the home page in WebSphere Portal, the User B sees the personalized information for User A.

- OR - 

Scenario 3
=======
After a session timeout occurs, you log in via your ESM but you are not redirected to the protected Portal page. Instead, you see the Portal login page, a session timeout error, or the ESM's login page once again.

How can these issues be prevented? 

ANSWER

These issues are common in environments where WebSphere Portal has been integrated with a third-party security product that handles authentication (such as Tivoli Access Manager [TAM]). To remedy one or more of these scenarios, WebSphere Portal Support suggests the following:


 * Add timeout.resume.session=true to the ConfigService for WebSphere Portal. This will prevent the Portal server from displaying the session timeout page and will force the ESM to handle idle session time-outs. Refer to Document #1253578, "Implementing the timeout.resume.session parameter in WebSphere Portal [http://www.ibm.com/support/docview.wss?rs=688&uid=swg21253578]", for more information about the usage of this parameter. 

 * Set the redirect.logout.url parameter in ConfigService for WebSphere Portal to redirect to a page that also destroys the session cookie established by the third-party authentication manager. For example, in TAM, the parameter would look like redirect.logout.url = https://<host>/pkmslogout.

 * Implement Java script on the login or logout page for the ESM that will remove any existing LTPAtoken on logout from WebSphere Portal. An example can be found in the IBM® Redbooks publication, "Deployment Guide Series: IBM Tivoli Access Manager for e-business 6.0 [http://www.redbooks.ibm.com/redbooks/pdfs/sg247207.pdf]," Chapter 6, "Configuring WebSphere Portal logout pages" section (pp. 194-196). This suggestion is typically unnecessary (as in Scenario #1) in an environment that does not have users accessing the same browser (such as in a kiosk environment).

 * Scenarios #1 and #2 describe a kiosk-like environment in which one user may not explicitly log out of the system or close the browser. It is therefore recommended to set the LTPA timeout (default = 120 minutes) to a value less than the session timeout value (30 minutes) on WebSphere Portal and less than the timeout value for the ESM. This will ensure that a new LTPA token is built when a session timeout occurs. 

RELATED INFORMATION
 Setting configuration properties in 6.1 [http://publib.boulder.ibm.com/infocenter/wpdoc/v6r1m0/topic/com.ibm.wp.ent.doc_v6101/admin/adsetcfg.html]


 



Cross reference information Segment Product Component Platform Version Edition Organizational Productivity- Portals & Collaboration WebSphere Portal End of Support Products 6.1, 6.0