Title: IBM Frequently Asked Questions (FAQs) about the 8.x Notes Mail "Inbox Maintenance" Feature - United States

Text:
list; frequently asked questions; FAQs; faq; 8.0; notes8; Mail Inbox Maintenance Cleanup; feature; mail inbox; mail; inbox; maintenance cleanup; maintenance clean up; cleanup; clean up; new feature; Mail Inbox Maintenance; Mail Inbox Cleanup; Mail Inbox Cleanup Agent; agent; LotusInboxCleanup agent; new agent; lotusinboxcleanup; nd8eganewtn; nd8 TECHNOTE (FAQ)

QUESTION
This document contains a list of frequently asked questions (FAQs) and details about the Lotus Notes®/Lotus Domino® 8.x Mail "Inbox Maintenance" feature, also sometimes referred to as the "Inbox Cleanup" feature.

ANSWER
What are all the terms used to describe this feature?
What does it do?
As it cleans up the Inbox, is there an overall reduction in mail database size?
If the documents are not removed from the database, where do they go?
Are there any types of documents that cannot be moved by this agent?
Is there a recommended size for the Notes Mail Inbox?
How does it work?
How do you set it up and configure it?
Now that it is set up properly, how do you run it?
How do you know when it has completed?
If you only want to run the agent on a few mail files, how do you do this? 
How long does the feature take to complete?
Are there any performance considerations?
How does this feature work in a mixed environment of versions 7.x and 8.x?
If you run the agent on mail files on the wrong dates, is there a way to change it back to what it was before the agent ran on all mail files?
If you implement the Mail Inbox Maintenance feature but it does not process all documents, are there debug options for further troubleshooting?


Q: What are all the terms used to describe this feature?
A: This feature may be referred to as:
--Inbox Maintenance feature 

 * 
 * 
 * 
 * 
 * 
 * 
 * 



Q: What does it do? 
A: This feature, introduced with Notes/Domino 8.0, will “clean-up” user mail Inbox folders. In other words, it removes documents from the Notes/Domino mail Inbox. The goal is to improve server performance by reducing user mail Inbox size. An Inbox folder with fewer documents performs better because it has fewer documents to index and replicate. 


Q: As it cleans up the Inbox, is there an overall reduction in mail database size? 
A: No. This feature is designed to simply move documents out of the Notes/Domino Inbox. It does not reduce the file size of any mail database; it only reduces the number of documents that reside in the Inbox. As such, documents will not be deposited into the Trash folder. In LotusScript terms, the equivalent would be a “RemoveFromFolder” operation. 

*IMPORTANT NOTE: This feature does not replace the archiving or deletion of documents, does not address mail databases that are close to or exceeding quota, and does not address server disc space issues. 


Q: If the documents are not removed from the database, where do they go? 
A: They will still remain in the mail database, available in the All Documents view. The "pointer" to the documents simply does not reside in the Inbox any longer, which implies better overall Inbox performance. 


Q: Are there any types of documents that cannot be moved by this agent? 
A: No. Any type of document that matches a specified date range is eligible for removal from the Inbox folder, including documents with attachments, HTML content (from HTML newsletters), and those that are part of reply threads and conversations. 

*IMPORTANT NOTE: The feature has an option to NOT process Unread mail in the Inbox, thus leaving mail marked as unread in the Inbox. 


Q: Is there a recommended size for the Notes Mail Inbox? 
A: There is no specific Lotus-recommended Inbox size. However, a smaller Inbox will perform better overall than a larger one. 


Q: How does it work? 
A: After proper configuration, the server's Adminp task will run the operation on the Domino server, processing the specified (or all) mail files that reside on that Domino server. Adminp invokes the LotusInboxCleanup agent that resides in every mail file. (The agent ships as part of the Notes/Domino 8 mail template.) The operation will execute on a user's Home/Mail server, should there be multiple replicas of databases. 

IMPORTANT NOTE: The LotusInboxCleanup agent is to be configured as is and run as it is shipped. Lotus Support will not assist customers in redesigning the shipped agent in any way for any purpose. If you choose to configure the agent to run in any other manner, we cannot guarantee the expected results. 


Q: How do you set it up and configure it? 
A: A Domino administrator will configure the feature's options based on business needs, for example, how often to run, what time of the day to execute, whether the operation should execute on all mail files or a select group, and the maximum number of documents to be removed during each execution. In addition, the administrator may specify the age of documents that will remain active in the Inbox, using the field "Remove documents older than a [X] days." The default is 90 days. 

These are a few of the prerequisites in order to successfully configure and run this feature: 
 * 
 * 
 * 
 * * Server Document --> Server Tasks --> AdminP --> Mail Inbox Maintenance section. 
   * Mail Policy Document --> Mail --> Basics --> Mail Inbox Maintenance section.  * IMPORTANT NOTE:
    * 
   
   
 * 
 * * The new mail template/agent signer ID must be added to the ACL of every mail database. 
   * The mail template/agent signer must have explicit rights to "Run Restricted LotusScript/Java agents" as per the Server Document --> Security panel. 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 



Q: Now that it is set up properly, how do you run it? 
A: The Mail Inbox Maintenance feature will kick off automatically, based on the configuration settings in either the Server Document or Mail Policy Document. To immediately kick off the feature, you may issue the following command at the Domino server console (without quotes): "tell adminp process mb" 


Q: How do you know when it has completed? 
A: When the operation has completed, information about the execution will be available in the log.nsf, Miscellaneous Events view, and DDM.nsf. For example, you may see an entry in the log that states "500 of 1500 eligible docs were removed in 'mail\user1.nsf'". 

The end user does not receive information about the execution of the feature. 


Q: If you only want to run the agent on a few mail files, how do you do this? 
A: This is not the default but it can be achieved. In the configuration settings, you may specify certain people's mail files to act on by selecting the option, "Maintain inboxes for only those selected users on this home server," and then choosing the names from the drop-down list below this field: 

[/support/docview.wss?uid=swg21268166&aid=1] [/support/docview.wss?uid=swg21268166&aid=1] 
The drop-down menu for the "Selected users" fields allows you to choose names from the Domino Directory. You may choose individual names or groups from this list. The feature does work when you put a group name in this field. 


Q: How long does the feature take to complete? 
A: Because each Domino server environment is unique, each Domino environment will execute differently and at a different rate. 


Q: Are there any performance considerations? 
A: The Domino server's Adminp task implements this feature. There are several items to consider:  * 
 * 
 * 
 * 
 * 
 * 
 * 


The first time the feature runs, it may take longer than subsequent runs. In other words, as the Inbox size decreases, the adminp performance will increase. 

For best results, you may want to run the operation at a time when the server will not be as busy until you have a feel for how the feature will execute in your Domino server environment. In addition, the configuration allows you to control the maximum number of documents that might be removed form the Inbox, thus better controlling the performance of the feature. The fewer number of documents that are removed, the faster the feature's operation will complete. 


Q: How does this feature work in a mixed environment of versions 7.x and 8.x? 
A: The minimum requirements to successfully use this feature are a Domino 8 server and Domino 8 mail template (mail8.ntf). If the Domino 8 server is configured to run the Mail Inbox Maintenance feature and there are Domino 7 version mail files present on the server, the feature will not act on the version 7 mail databases because the LotusInboxCleanup agent is not found in them. 


Q: If you run the agent on mail files on the wrong dates, is there a way to change it back to what it was before the agent ran on all mail files? 
A: At this time, there is no "reversal" agent to return all the Inboxes back to the state they were in before the agent ran. However, Document #1104973, "Rebuilding a Notes Mail Inbox [http://www.ibm.com/support/docview.wss?rs=203&uid=swg21104973]," may be useful to you, although the resulting Inbox may not be exactly as it was before. The code contained in the document is designed to search the entire database, and any document not already in a personal folder will be deposited into the Inbox. 

An enhancement request to add this functionality has been submitted to Quality Engineering. 


Q: If you implement the Mail Inbox Maintenance feature but it does not process all documents, are there debug options for further troubleshooting? 
A: Yes, use the server-based notes.ini parameter, ADMINP_VERBOSE_POLL_TASK=3, to gather additional information about the execution of the Mail Inbox Maintenance feature. It may produce 12-20 lines of output to the log for each mail file that is processed. RELATED INFORMATION
 Rebuilding a Notes Mail Inbox [http://www.ibm.com/support/docview.wss?uid=swg21104973]