Title: IBM PM06254: RFT8103 : RFT recorder trying to write files into non-existance folder - United States

Text:
  A FIX IS AVAILABLE
IBM Rational Functional Tester Version 8.1.1.1 [http://www-01.ibm.com/support/docview.wss?uid=swg24026474]


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  I have been able to reproduce at all times. In the ivDebug logs
   there are some useful logs.
   
   This critical cause are impacting in the confidence of the Custo
   mer of RFT as a global testing solution. The bank is evaluating
   different testing solutions, and RFT if not working in one their
    critical environments: the finance terminal. So moving to CP1.
   
   Caused by: java.lang.IllegalStateException: The platform metadat
   a area could not be written: \\ruta\IBM\rationalsdp\rft_private_
   workspace\.metadata.  By default the platform writes its content
   under the current working directory when the platform is launche
   d.  Use the -data parameter to
   specify a different content area for the platform.
       at org.eclipse.core.internal.runtime.DataArea.assertLocation
   Initialized(DataArea.java:59)
       at org.eclipse.core.internal.runtime.DataArea.getStateLocati
   on(DataArea.java:84)
       at org.eclipse.core.internal.runtime.InternalPlatform.getSta
   teLocation(InternalPlatform.java:570)
       at org.eclipse.core.runtime.Plugin.getStateLocation(Plugin.j
   ava:304)
       at org.eclipse.core.internal.resources.LocalMetaArea.?init?(
   LocalMetaArea.java:53)
       at org.eclipse.core.resources.ResourcesPlugin.start(Resource
   sPlugin.java:368)
       at org.eclipse.osgi.framework.internal.core.BundleContextImp
   l$2.run(BundleContextImpl.java:1009)
       at java.security.AccessController.doPrivileged(AccessControl
   ler.java:251)
       at org.eclipse.osgi.framework.internal.core.BundleContextImp
   l.startActivator(BundleContextImpl.java:1003)
       ... 52 more
   
   
   01:57:23:342 PM    1808    812  Dbg  remoteMessage  about to cal
   l client response for message number: 2
   01:57:23:342 PM    1808    812  Dbg  remoteMessage  Got Response
   .  returnValue: null  throwable: java.lang.NoClassDefFoundError
   01:57:23:342 PM    1808    812      registeredconverters  conver
   tToValueClass-SpyMemory.isSupported: null
   01:57:23:342 PM    1808    812  Dbg  remoteMessage  TC.smCallBac
   k returns: null
   01:57:23:358 PM    5148    2752  Dbg  testcontext      invoke re
   turn: null
   01:57:23:358 PM    5148    2752      transaction  end(BeforeFree
   ) numberOfActiveHeaps=6 numberUsedBlocks=9957 numberFreeBlocks=1
   78 numberBytesAllocated=872312 largestFreeBlock=523656
   01:57:23:358 PM    5148    2752      transaction  end(AfterFree)
    numberOfActiveHeaps=5 numberUsedBlocks=9944 numberFreeBlocks=17
   6 numberBytesAllocated=847732 largestFreeBlock=523656
   01:57:23:389 PM    1808    5304  Err  wswplugin  record failed
   java.lang.reflect.InvocationTargetException
       at org.eclipse.jface.operation.ModalContext.run(ModalContext
   .java:421)
       at org.eclipse.jface.wizard.WizardDialog.run(WizardDialog.ja
   va:934)
       at com.rational.test.ft.wswplugin.script.NewScriptWizard.per
   formFinish(NewScriptWizard.java:593)
       at org.eclipse.jface.wizard.WizardDialog.finishPressed(Wizar
   dDialog.java:742)
       at org.eclipse.jface.wizard.WizardDialog.buttonPressed(Wizar
   dDialog.java:373)
       at org.eclipse.jface.dialogs.Dialog$2.widgetSelected(Dialog.
   java:624)
       at org.eclipse.swt.widgets.TypedListener.handleEvent(TypedLi
   stener.java:228)
       at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.j
   ava:84)
       at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1003
   )
       at org.eclipse.swt.widgets.Display.runDeferredEvents(Display
   .java:3823)
       at org.eclipse.swt.widgets.Display.readAndDispatch(Display.j
   ava:3422)
       at org.eclipse.jface.window.Window.runEventLoop(Window.java:
   825)
       at org.eclipse.jface.window.Window.open(Window.java:801)
       at com.rational.test.ft.wswplugin.script.NewScriptAction.run
   (NewScriptAction.java:224)
       at com.rational.test.ft.wswplugin.script.NewScriptSelectionP
   roviderAction.run(NewScriptSelectionProviderAction.java:37)
       at org.eclipse.jface.action.Action.runWithEvent(Action.java:
   498)
       at org.eclipse.jface.action.ActionContributionItem.handleWid
   getSelection(ActionContributionItem.java:583)
       at org.eclipse.jface.action.ActionContributionItem.access$2(
   ActionContributionItem.java:500)
       at org.eclipse.jface.action.ActionContributionItem$5.handleE
   vent(ActionContributionItem.java:411)
       at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.j
   ava:84)
       at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1003
   )
       at org.eclipse.swt.widgets.Display.runDeferredEvents(Display
   .java:3823)
       at org.eclipse.swt.widgets.Display.readAndDispatch(Display.j
   ava:3422)
       at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.
   java:2384)
       at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:23
   48)
       at org.eclipse.ui.internal.Workbench.access$4(Workbench.java
   :2200)
       at org.eclipse.ui.internal.Workbench$5.run(Workbench.java:49
   5)
       at org.eclipse.core.databinding.observable.Realm.runWithDefa
   ult(Realm.java:288)
       at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(W
   orkbench.java:490)
       at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformU
   I.java:149)
       at org.eclipse.ui.internal.ide.application.IDEApplication.st
   art(IDEApplication.java:113)
       at org.eclipse.equinox.internal.app.EclipseAppHandle.run(Ecl
   ipseAppHandle.java:193)
       at org.eclipse.core.runtime.internal.adaptor.EclipseAppLaunc
   her.runApplication(EclipseAppLauncher.java:110)
       at org.eclipse.core.runtime.internal.adaptor.EclipseAppLaunc
   her.start(EclipseAppLauncher.java:79)
       at org.eclipse.core.runtime.adaptor.EclipseStarter.run(Eclip
   seStarter.java:386)
       at org.eclipse.core.runtime.adaptor.EclipseStarter.run(Eclip
   seStarter.java:179)
       at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Metho
   d)
       at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodA
   ccessorImpl.java:39)
       at sun.reflect.DelegatingMethodAccessorImpl.invoke(Delegatin
   gMethodAccessorImpl.java:37)
       at java.lang.reflect.Method.invoke(Method.java:599)
       at org.eclipse.equinox.launcher.Main.invokeFramework(Main.ja
   va:549)
       at org.eclipse.equinox.launcher.Main.basicRun(Main.java:504)
       at org.eclipse.equinox.launcher.Main.run(Main.java:1236)
       at org.eclipse.equinox.launcher.Main.main(Main.java:1212)
   Caused by: com.rational.test.ft.RationalTestRemoteException - In
   ternal Error, please contact customer support: QueuedMessageClie
   nt invoking createEmptyScript on com.rational.test.ft.applicatio
   n.rational_ft_impl. [java.lang.NoClassDefFoundError - org.eclips
   e.emf.ecore.EObject]
       at com.rational.test.ft.sys.QueuedMessageClient.invoke(Queue
   dMessageClient.java:248)
       at com.rational.test.ft.application.rational_ft_client.creat
   eEmptyScript(rational_ft_client.java:329)
       at com.rational.test.ft.services.ide.NewScriptService.create
   (NewScriptService.java:85)
       at com.rational.test.ft.wswplugin.script.NewScriptWizard$2.r
   un(NewScriptWizard.java:563)
       at org.eclipse.jface.operation.ModalContext$ModalContextThre
   ad.run(ModalContext.java:121)
   
   
   As you can see from the log, RFT tries to write something in the
    non-existance folder why?
   Caused by: java.lang.IllegalStateException: The platform metadat
   a area could not be written: \\ruta\IBM\rationalsdp\rft_private_
   workspace\.metadata.  By default the platform writes its content
   under the current working directory when the platform is launche
   d.  Use the -data parameter to
   specify a different content area for the platform.
   
   I tried to  -data but it does not help.
   
   Also, attached a full log from my environment where i can reprod
   uce this all time.
   
   Prashanth was able to reproduce too and he has fixed this one al
   ready through a custom fix for RFT8103.
   
   
    
   
   

LOCAL FIX

PROBLEM SUMMARY
 *  RFT recorder tries to write files into non-existent folder
   when user manually modifies the registry value for DESKTOP
   registry key to map it some shared drive.
   
   
    
   
   

PROBLEM CONCLUSION
 *  The issue is fixed by removing the dependency on the
   registry key while fetching the user's home directory
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   PM06254
   
   
 * REPORTED COMPONENT NAME
   RAT FUNC TESTER
   
   
 * REPORTED COMPONENT ID
   5724G2503
   
   
 * REPORTED RELEASE
   810
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2010-01-28
   
   
 * CLOSED DATE
   2010-04-27
   
   
 * LAST MODIFIED DATE
   2010-04-27
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   RAT FUNC TESTER
   
   
 * FIXED COMPONENT ID
   5724G2503
   
   

APPLICABLE COMPONENT LEVELS
 * R810 PSN
   UP