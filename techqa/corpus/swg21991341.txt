Title: IBM PureData for Anaytics - error in rule SHC039 - United States

Text:
pda netezza fencing nzhealtcheck shc039 puredata for analytics TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 Error reported by nzhealthcheck:

Rule : SHC039
Issue Detected : HA cluster error
Severity : High
Components : rack1.host1.cluster.crmres
[fencing_route_to_ha1_start_0(node=netezza02,call=16,rc=1)]
(from ibm_host) - value of crm resource fencing_route_to_ha1_start_0
(node=netezza02,call=16,rc=1) is Error
rack1.host1.cluster.crmres[fencing_route_to_ha2_start_0
(node=netezza01,call=61,rc=1)] (from ibm_host) - value of crm
resource fencing_route_to_ha2_start_0(node=netezza01,call=61,
rc=1) is Error
rack1.host2.cluster.crmres[fencing_route_to_ha1_start_0
(node=netezza02,call=16,rc=1)] (from ibm_host) - value of crm
resource fencing_route_to_ha1_start_0(node=netezza02,call=16,
rc=1) is Error 

CAUSE
This error is always reported if power is cut to the system without a proper shutdown of cluster.

RESOLVING THE PROBLEM
To clear the problem you need to restart the fencing service.
The syntax is as follows:

[root@netezza01]# crm_resource -r <the-failed-resource> -C -H <hostname>

1) Check for the error message using "crm_mon -1"


 * 
 * [root@netezza01]# crm_mon -1
   ============
   Last updated: Wed Apr 21 14:13:50 2010
   Current DC: netezza02 (70726b79-0792-451d-99a5-befb0d7b1fa6)
   2 Nodes configured.
   3 Resources configured.
   ============
   
   Node: netezza02 (70726b79-0792-451d-99a5-befb0d7b1fa6): online
   Node: netezza01 (2f3e058c-f170-4662-a576-a5b00d381506): online
   
   Resource Group: nps
   drbd_exphome_device (heartbeat:drbddisk): Started netezza01
   drbd_nz_device (heartbeat:drbddisk): Started netezza01
   exphome_filesystem (heartbeat::ocf:Filesystem): Started netezza01
   nz_filesystem (heartbeat::ocf:Filesystem): Started netezza01
   fabric_ip (heartbeat::ocf:IPaddr): Started netezza01
   wall_ip (heartbeat::ocf:IPaddr): Started netezza01
   nz_dnsmasq (lsb:nz_dnsmasq): Started netezza01
   nzinit (lsb:nzinit): Started netezza01
   
   fencing_route_to_ha2 (stonith:apcmastersnmp): Started netezza01
   
   Failed actions:
   
 * fencing_route_to_ha1
 * _start_0 (node=
 * netezza02
 * , call=17, rc=1): Error



2) To clear the failed action (fencing_route_to_ha1_start_0 in the above example), run the restart command: 
 * 
 * [root@netezza01]# crm_resource -r 
 * fencing_route_to_ha1
 *  -C -H 
 * netezza02



3) Run crm_mon once more to confirm the error has been cleared:  * 
 * [root@netezza01]# crm_mon -1
   
   ============
   Last updated: Wed Apr 21 14:22:31 2010
   Current DC: netezza02 (70726b79-0792-451d-99a5-befb0d7b1fa6)
   2 Nodes configured.
   3 Resources configured.
   ============
   
   Node: netezza02 (70726b79-0792-451d-99a5-befb0d7b1fa6): online
   Node: netezza01 (2f3e058c-f170-4662-a576-a5b00d381506): online
   
   Resource Group: nps
   drbd_exphome_device (heartbeat:drbddisk): Started netezza01
   drbd_nz_device (heartbeat:drbddisk): Started netezza01
   exphome_filesystem (heartbeat::ocf:Filesystem): Started netezza01
   nz_filesystem (heartbeat::ocf:Filesystem): Started netezza01
   fabric_ip (heartbeat::ocf:IPaddr): Started netezza01
   wall_ip (heartbeat::ocf:IPaddr): Started netezza01
   nz_dnsmasq (lsb:nz_dnsmasq): Started netezza01
   nzinit (lsb:nzinit): Started netezza01
   
   fencing_route_to_ha1 (stonith:apcmastersnmp): Started netezza02
   fencing_route_to_ha2 (stonith:apcmastersnmp): Started netezza01