Title: IBM Applying the WebSphere Application Server Version 7.0.0.21 or 7.0.0.23 fix pack on an IBM i Version 7.1 system might fail - United States

Text:
V7RNotes TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 If you apply the WebSphere Application Server Version 7.0.0.21 or 7.0.0.23 fix pack on an IBM i Version 7.1 system that has been slip installed from a previous release of the IBM i operating system, the fix-pack installation might fail and result in INSTCONFPARTIALSUCCESS.

The install_root/logs/update/tmp/doRemoveJ2EEReferencesAction.log file shows the following error:

The java.version property was detected as input. This property is used as output only and has no effect on JVM initialization.
The directory /QIBM/ProdData/Java400/jdk6/ in the JAVA_HOME environment variable is no longer supported on this operating system.


CAUSE
In the WebSphere Application Server Version 7.0.0.21 (and 7.0.0.23) fix packs, code was introduced to explicitly invoke Java with a qualified path to an installed JDK Version 1.6 in the installation on IBM i. The logic was added to use any SDK Version 1.6 on the system. The code uses Classic Java Version 1.6 if it is installed; if that version is not found, it uses J9 32 bit if it is installed; if that version is not found, it uses J9 64 bit. 

If an IBM i Version 6.1 system that has an installation of WebSphere Application Server Version 7.0 is slip installed to IBM i Version 7.1, however, the Classic JVM (any version) is no longer supported but the installed directory (/QIBM/ProdData/Java400/jdk6) is not deleted as part of the slip-installation process. An error occurs when this directory is found during the fix-pack installation.



RESOLVING THE PROBLEM
To resolve this issue, perform the following actions: 

 *  Delete /QIBM/ProdData/Java400/jdk6 or rename the last directory (jdk6) so that the original path no longer exists.
   
   Install the WebSphere Application Server Version 7.0.0.21 or 7.0.0.23 fix pack again. 

A change was made in the WebSphere Application Server Version 7.0.0.25 fix pack so that J9 32-bit or J9 64-bit SDK Version 1.6 is always selected before the Classic SDK Version 1.6 is used.