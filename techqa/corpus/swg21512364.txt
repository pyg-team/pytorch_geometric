Title: IBM UDA-SQL-0353 error when building a report based on ITM OS agent data model - United States

Text:
TCR data model OS agent UDA-SQL-0353 query studio ITMUSER.KLZ_CPU_Averages_DV ITM TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 While creating a report on TCR 2.1 by using the data model delivered with the OS agent reports, you get the "UDA-SQL-0353 An error was detected while processing the SQL request." message. This happens when the report only includes charts and no table objects. 

SYMPTOM
Let's suppose to use the data model delivered with the ITM OS Agent reports to create a report meant to include the "Average Available Memory usage pct" attribute from the Memory_Hours Report Item. 

The report is built using the following data items, with Query Studio: 

[ITM Shared Dimensions].[Managed Systems].[Managed System Name] 
[ITM Shared Dimensions].[Managed Systems].[Agent Type] 
[TCR Shared Dimensions].[Time].[Date] 
[TCR Shared Dimensions].[Time].[Hour] 
[Windows].[Memory Hourly].[Average Available Usage Percentage] 

The reports also includes a chart (Lines).
When it is configured for Chart and Table, it works fine. 
If it is configured to include only Chart, it fails with an error message like the following:

UDA-SQL-0353 An error was detected while processing the SQL request.
¬IBM|¬CLI Driver|¬DB2/AIX64| SQL0204N "ITMUSER.KLZ_CPU_Averages_DV" is an undefined name. 
The problem seems to occur when filters and sections are used in the report.
The error message mentions a view object (ITMUSER.KLZ_CPU_Averages_DV) that does not exist within the ITM Warehouse Database.
This object should not be included at all in the final report because not actually used in the original report query.
It looks like the TCR or the Cognos Engine does automatically include it in the resulting query, even if not
mentioned in the data items used for the report.


RESOLVING THE PROBLEM
The analysis revealed this is a Cognos problem: the Cognos defect COGCQ00622128 has been opened. 

In the meantime, you can use 2 possible workarounds: 

1) Activate the historical collection and summarization for the following Linux OS agent attribute groups: 

 - CPU
- Disk
- Network
- Process
- VM_Stats

In this way, the table will be created within the ITM Warehouse DB and the TCR will find it, even if it will not use Linux historical data for this specific report so the error will not occur.

or 

2) Follow this procedure while creating the report:

The procedure can only be performed using Report Studio instead of Query Studio. The reports saved with Report Studio cannot be reopened by Query Studio, because of a different format. So, if you prefer continue using Query Studio, considering that you need anyway Report Studio to produce a working report, I suggest you to work in this way:

a) In the Query Studio, select Manage File in the left column, select My Preferences, check Preview with No Data and click OK
b) Now create a new report. You should be able to complete the creation of the report, but of course it still fails when you run it 
c) Open the report with Report Studio, apply the workaround (see steps listed below ) and save the report with a different name
d) Run (in your production environment) the reports saved with Report Studio

Every time you need to make changes in the report layout, you would need to do it using Query Studio (you can also do that directly with Report Studio, but this requires more experience and skills) and then repeat the three steps above.

These are the workaround steps:

a) Open the report with Report Studio
b) Select the chart object and then click on the Properties arrow, select the List item, as shown in this picture: 

[/support/docview.wss?uid=swg21512364&aid=1] [/support/docview.wss?uid=swg21512364&aid=1]

3) Within Properties window, look for a section called Data, and for an entry called Properties, then click in the properties field and a new window will open, as in this image: 

[/support/docview.wss?uid=swg21512364&aid=2] [/support/docview.wss?uid=swg21512364&aid=2]

4) Check all of the entries and click OK (of course the number of data items varies depending on your own custom queries)
5) Save the report with a new name
6) Run the report, it will work fine.

 

PRODUCT ALIAS/SYNONYM
 IBM Tivoli Monitoring V6.2.2 TCR 2.1