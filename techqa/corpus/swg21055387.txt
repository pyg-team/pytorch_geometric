Title: IBM MustGather: Crash on AIX (WebSphere Application Server) - United States

Text:
MustGather; MustGather; MustGather; crash; core; dbx; jdk; autopd; auto pd; wasrun; MustGatherDocument; ProblemDeterminationTool; MustGatherEnablementTool TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 Your application server terminated without warning or a system core is generated but you are not sure what data to collect. The following MustGather will assist you in collecting the critical data to troubleshoot issues with an IBM® WebSphere® Application Server crash on the AIX® platform. 

RESOLVING THE PROBLEM


Your application server terminated without warning or a system core is generated but you are not sure what data to collect. The following MustGather will assist you in collecting the critical data to troubleshoot issues with an IBM® WebSphere® Application Server crash on the AIX® platform.

COLLECTING DATA MANUALLY

DATA TO COLLECT

WebSphere Application Server
Location of dumps are usually in the profile root (/opt/IBM/WebSphere/AppServer/profiles/PROFILE_NAME/)


 * Javacore*.txt, heapdump*.phd, snap*.trc files (if produced). 
 * Output from aix_osinfo.sh (see below)  * This will include the errpt -a output
   
   
 * Jextract output (from processing the IBM SDK dump file)  * Provide the core dump file if possible (especially if the processing fails)
   
   
 * AppServer logs, including...  * SystemOut.log 
    * SystemErr.log 
    * native_stdout.log 
    * native_stderr.log (verbose GC is logged here by default)
   
   
 * /var/adm/ras/errlog 
 * Configuration data: server.xml  * NOTE: You may also run the collector tool to capture all configuration (and logs) for a particular profile into a single JAR file. The collector.sh script is located in the bin directory in the profile’s root.
   
   


WebSphere Liberty 
Location of dumps are usually in the server root (/opt/IBM/wlp/user/servers/SERVER_NAME) 

 * Javacore*.txt, heapdump*.phd, snap*.trc files (if produced). 
 * Output from aix_osinfo.sh (see below)  * This will include the errpt -a output
   
   
 * Jextract output (from processing the IBM SDK dump file)  * Provide the core dump file if possible (especially if the processing fails)
   
   
 * AppServer logs, including...  * SystemOut.log 
    * SystemErr.log 
    * native_stdout.log 
    * native_stderr.log (verbose GC is logged here by default)
   
   
 * /var/adm/ras/errlog 
 * Configuration data, including:  * server.xml 
    * jvm.options
   
   


Send the results to IBM support [http://www.ibm.com/support/docview.wss?uid=swg21153852]. 

PROCESSING THE CORE DUMP 
How to process an IBM SDK core dump with jextract 
http://www.IBM.com/support/docview.wss?uid=swg21577379 [http://www.IBM.com/support/docview.wss?uid=swg21577379] 

Make sure to attempt processing the core dump with the command jextract. You will need to locate which IBM SDK was used to run the application server (the javacore contains this information, or simply restart your application server and locate the process with the ps command), and run the associated jextract executable for that SDK install. 

Example with a 8192 MB heap, and a JVM that was running with compressed references: 

./jextract -J-Xcompressedrefs -J-Xmx8192m /opt/IBM/WebSphere/AppServer/profiles/Dmgr01/core.DATE.TIME.PID.COUNT.dmp 

The result will be a zip file that contains the core dump, some XMLs, and any required libraries for processing. 


NO CORE DUMP GENERATED 
Crash on AIX produces no core or a truncated core 
http://www.IBM.com/support/docview.wss?rs=180&uid=swg21052642 [http://www.ibm.com/support/docview.wss?rs=180&uid=swg21052642] 

If you find no core dump, and none of the logs (such as native_stderr.log) indicate one was generated, check first if the nodeagent had terminated the JVM and restarted it, as a dump may not generate if that occurs. 

Another reason for this, especially if a crash was recorded in the log, is that the ulimits for the core and file are not set to unlimited. 

If there were no dumps and no signs of a crash, but the process did terminate, check this document for further debugging. 

WebSphere Application Server process exits without leaving a footprint in log files or no core dumps 
http://www.IBM.com/support/docview.wss?uid=swg21144595 [http://www.IBM.com/support/docview.wss?uid=swg21144595] 


AIX OS INFO SCRIPT 
Run aix_osinfo.sh (without arguments, recommended as root) and collect the resulting aix_osinfo_RESULTS.tar.gz and aix_osinfo.log files. This script collects general information about the AIX operating system. 

./aix_osinfo.sh

[/support/docview.wss?uid=swg21055387&aid=2] [/support/docview.wss?uid=swg21055387&aid=1] 

Commands executed in this script above include:  * /usr/sbin/emgr -lv3 (if the root user) 
 * oslevel -s 
 * lslpp -la 
 * instfix -ia 
 * prtconf 
 * lparstat -i 
 * lsattr -El sys0 
 * df -k 
 * errpt -a 
 * ps -ef



ADDITIONAL SCRIPTS (optional)  * 
 * DBX installed on the system
 * 
 * 
   
   ./dbxtrace_aix.sh [JVM_PATH] [CORE_PATH] > dbxtrace.out
 * 
 * ./getlib.sh [JVM_PATH] [CORE_PATH]
   
 * 
 * Notes:
 *  Set the [JVM_PATH] to the following directory:
   install_root/java/jre/bin/java
   
 * 
 * getlib.sh
 * 
 * getlib_archive.tar.Z
 * 
 * 

[/support/docview.wss?uid=swg21055387&aid=4] [/support/docview.wss?uid=swg21055387&aid=3] [/support/docview.wss?uid=swg21055387&aid=6] [/support/docview.wss?uid=swg21055387&aid=5] 



For a listing of all technotes, downloads, and educational materials specific to the Crash component, search the WebSphere Application Server support site [http://www.ibm.com/software/webservers/appserv/was/support/] . 

RELATED INFORMATION 
How to process an IBM SDK core dump with jextract [http://www.ibm.com/support/docview.wss?uid=swg21577379] 
Crash on AIX produces no core or truncated [http://www.ibm.com/support/docview.wss?uid=swg21052642] 
Checking if the dbx utility is installed on AIX [http://www.ibm.com/support/docview.wss?uid=swg21222456] 
Submitting information to IBM support [http://www.ibm.com/support/docview.wss?uid=swg21153852] 
Steps to getting support for WebSphere Application Server [http://www.ibm.com/developerworks/websphere/support/appserver_support.html] 
MustGather: Readme first for WebSphere Application Server [http://www.ibm.com/support/docview.wss?uid=swg21145599] 
Troubleshooting guide for WebSphere Application Server [http://www.ibm.com/support/docview.wss?uid=swg27005324] 

EXCHANGING DATA WITH IBM SUPPORT
To diagnose or identify a problem, it is sometimes necessary to provide Technical Support with data and information from your system. In addition, Technical Support might also need to provide you with tools or utilities to be used in problem determination. You can submit files using one of following methods to help speed problem diagnosis: 

 * IBM Support Assistant (ISA) 
 * Service Request (SR)
 * E-mail 
 * FTP to the Enhanced Customer Data Repository (ECuRep)




Instructions for exchanging information with IBM Support [http://www.ibm.com/support/docview.wss?uid=swg21153852]

READ FIRST AND RELATED MUSTGATHERS
MustGather: Read first for WebSphere Application Server [http://www.ibm.com/support/docview.wss?uid=swg21145599]




 Hang / High CPU / Performance Problem [http://www.ibm.com/support/search.wss?tc=SSCMPB9&q=MustGatherDocument] Out of Memory Problem [http://www.ibm.com/support/search.wss?tc=SSCMPCY&q=MustGatherDocument] 

RELATED INFORMATION
 Recording your screen to share with IBM Support [https://www.ibm.com/developerworks/community/blogs/IBMElectronicSupport/entry/recording_your_screen_to_share_with_support?lang=en]


 



Cross reference information Segment Product Component Platform Version Edition Application Servers Runtimes for Java Technology Java SDK Application Servers WebSphere Application Server - Express AIX 8.5.5, 8.0, 7.0