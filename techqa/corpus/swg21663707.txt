Title: IBM Decision Center utility Ant tasks - United States

Text:
 TECHNOTE (FAQ)

QUESTION
 Do you need to publish a RuleApp from a command line? Are you looking for information regarding branch security? Are you trying to automate Decision Center operations with Ant tasks? 

ANSWER
This document provides ant tasks to automate your work with the Decision Center. The code is provided and can be extended as needed.
The tasks ruleappDeploy, ruleappExtract and securityReport are documented below for your own integration. 
The section integration in Decision Center installation describes a ready to use ant script. 




RULEAPPDEPLOY


Description: 

Extract a ruleapp from Decision Center and publish it to Rule Execution Server. 

Parameters: 



Attribute Description Required server DC server URL Yes datasource JDBC name of the datasource Yes user Decision Center user Yes password Decision Center password Yes resUrl Rule Execution Server URL to receive the ruleapp Yes resUser Rule Execution Server user name Yes resPassword Rule Execution Server password Yes ruleapp name of the ruleapp Yes mode mode of deployment. Possible values deploy, redeploy No. 
Default: deploy policy select the versioning policy if there is a conflict.
MAJOR_RULESET: increment the ruleset major version 
MINOR_RULESET: increment the ruleset minor version 
MAJOR_RULEAPP: increment the ruleapp major version 
MINOR_RULEAPP: increment the ruleapp minor version 
REPLACE_RULESET: replace the ruleset
REPLACE_RULEAPP: replace the ruleapp No. 
Default: MAJOR_RULEAPP baseline in deploy mode creates a baseline with this name.
In redeploy mode use this baseline to redeploy from in deploy mode No.
in redeploy mode Yes. 
Usage: 

Add the following lines to your ant script: 

<property name= "teamserver.home" location= "<odm_install>" /> 
<import file= "${teamserver.home}/lib/classpath-teamserver.xml" /> 
<path id= "dc-tasks-path" > 
<pathelement path= "dcAntTasks.jar" /> 
<pathelement path= "${teamserver-ant-tasks.classpath}" /> 
</path> 
<taskdef name= "ruleappDeploy" 
classname= "decisioncenter.RuleAppDeployerTask" 
classpathref= "dc-tasks-path" /> 


Examples: 

<ruleappDeploy 
server= "http://localhost:9080/teamserver" 
datasource="jdbc/ilogDataSource" 
user="rtsAdmin" password="rtsAdmin" 
resUrl= "http://localhost:9080/res" 
resUser="resAdmin" resPassword="resAdmin" 
ruleapp="MyRuleApp" 
baseline="february-release" 
policy="MAJOR_RULESET"/> 

Deploy the ruleApp MyRuleApp from the datasource jdbc/ilogDataSource to the RES 
increment the ruleset major version and create the february-release deployment baseline. 

<ruleappDeploy 
server= "http://localhost:9080/teamserver" 
datasource="jdbc/ilogDataSource" 
user="rtsAdmin" password="rtsAdmin" 
resUrl= "http://localhost:9080/res" 
resUser="resAdmin" resPassword="resAdmin" 
ruleapp="MyRuleApp" 
mode="redeploy" 
baseline="february-release" 
policy="MAJOR_RULESET"/> 

Redeploy the ruleApp MyRuleApp from the datasource jdbc/ilogDataSource to the RES 
increment the ruleset major version using the february-release deployment baseline. 

<ruleappDeploy 
server= "http://localhost:9080/teamserver" 
datasource="jdbc/ilogDataSource" 
user="rtsAdmin" password="rtsAdmin" 
resUrl= "http://localhost:9080/res" 
resUser="resAdmin" resPassword="resAdmin" 
ruleapp="MyRuleApp"/> 

Deploy the ruleApp MyRuleApp from the datasource jdbc/ilogDataSource to the RES 
and increment the ruleapp major version. 


RULEAPPEXTRACT 


Description: 

Extract a ruleapp from Decision Center and save it as a jar file. 

Parameters: 

Attribute Description Required server DC server URL Yes datasource JDBC name of the datasource Yes user Decision Center user Yes password Decision Center password Yes ruleapp name of the ruleapp Yes baseline used to create a baseline with this name. No fromBaseline deployment baseline to be used to extract the ruleapp No 
Usage: 

Add the following lines to your ant script: 

<property name= "teamserver.home" location= "<odm_install>" /> 
<import file= "${teamserver.home}/lib/classpath-teamserver.xml" /> 
<path id= "dc-tasks-path" > 
<pathelement path= "dcAntTasks.jar" /> 
<pathelement path= "${teamserver-ant-tasks.classpath}" /> 
</path> 
<taskdef name= "ruleappExtractor" 
classname= "decisioncenter.RuleAppExtractorTask" 
classpathref= "dc-tasks-path" /> 


Examples: 

<ruleappExtract 
server= "http://localhost:9080/teamserver" 
datasource="jdbc/ilogDataSource" 
user="rtsAdmin" password="rtsAdmin" 
ruleapp="MyRuleApp" 
baseline="february-release"/> 
Extract the ruleApp archive MyRuleApp from the datasource jdbc/ilogDataSource to a file MyRuleApp-<Vmajor>.<Vminor> and create the february-release deployment baseline. 

<ruleappExtract 
server= "http://localhost:9080/teamserver" 
datasource="jdbc/ilogDataSource" 
user="rtsAdmin" password="rtsAdmin" 
ruleapp="MyRuleApp" 
fromBaseline="february-release"/> 

Extract the ruleApp archive MyRuleApp from the datasource jdbc/ilogDataSource using the february-release deployment baseline. Generates the same ruleapp as previous command. 

<ruleappExtract 
server= "http://localhost:9080/teamserver" 
datasource="jdbc/ilogDataSource" 
user="rtsAdmin" password="rtsAdmin" 
ruleapp="MyRuleApp"/> 

Extract the ruleApp MyRuleApp from the datasource jdbc/ilogDataSource. 


SECURITYREPORT


Description: 

Generates a report of the security of all branches and in a given repository. 

Parameters: 

Attribute Description Required server DC server URL Yes datasource JDBC name of the datasource Yes user Decision Center user Yes password Decision Center password Yes 
Usage: 

Add the following lines to your ant script: 

<property name= "teamserver.home" location= "<odm_install>" /> 
<import file= "${teamserver.home}/lib/classpath-teamserver.xml" /> 
<path id= "dc-tasks-path" > 
<pathelement path= "dcAntTasks.jar" /> 
<pathelement path= "${teamserver-ant-tasks.classpath}" /> 
</path> 
<taskdef name= "securityReport" 
classname= "decisioncenter.SecurityReportTask" 
classpathref= "dc-tasks-path" /> 


Examples: 

<securityReport 
server= "http://localhost:9080/res" 
datasource="jdbc/ilogDataSource" 
user="rtsAdmin" password="rtsAdmin"/> 


Generate a report securityReport.xml describing the project security branches. 


To use the above ant tasks you need to copy the following jar along with your ant script: 
dcAntTasks.jar [/support/docview.wss?uid=swg21663707&aid=2]dcAntTasks.jar [/support/docview.wss?uid=swg21663707&aid=1] 


INTEGRATION IN DECISION CENTER INSTALLATION:


You can use those targets directly within a regular installation of Decision Center. 

Copy the file dcBuild.xml in the folder ODM_HOME/teamserver/bin along with dcAntTasks.jar 

dcBuild.xml [/support/docview.wss?uid=swg21663707&aid=4]dcBuild.xml [/support/docview.wss?uid=swg21663707&aid=3] 

Setup your ant environment as documented here [http://pic.dhe.ibm.com/infocenter/dmanager/v8r5m1/topic/com.ibm.odm.distrib.config.was/config_dc_websphere/tsk_was_dc_setup_ant_env.html]. 

You can then run the commands: 

To generate the security report: 
ant -f dcBuild.xml security-report 

To deploy a ruleapp: 

ant -f dcBuild.xml deploy-ruleapp -DresUrl=http://localhost:9080/res -DresUser=resAdmin -DresPassword=resAdmin -Druleapp=MyRuleApp 

To deploy a ruleapp and create a baseline: 
ant -f dcBuild.xml deploy-ruleapp -DresUrl=http://localhost:9080/res -DresUser=resAdmin -DresPassword=resAdmin -Druleapp=MyRuleApp -Dbaseline="June Release" 

To deploy a ruleapp and increment the minor ruleapp version: 
ant -f dcBuild.xml deploy-ruleapp -DresUrl=http://localhost:9080/res -DresUser=resAdmin -DresPassword=resAdmin -Druleapp=MyRuleApp -Dpolicy=MINOR_RULEAPP 

To redeploy a ruleapp : 
ant -f dcBuild.xml redeploy-ruleapp -DresUrl=http://localhost:9080/res -DresUser=resAdmin -DresPassword=resAdmin -Druleapp=MyRuleApp -Dbaseline="June Release" 

To extract a ruleapp archive : 
ant -f dcBuild.xml extract-ruleapp -Druleapp=MyRuleApp 

To extract a ruleapp archive and create a baseline: 
ant -f dcBuild.xml extract-ruleapp -Druleapp=MyRuleApp -Dbaseline="June Release" 

To extract a ruleapp archive from an existing baseline: 
ant -f dcBuild.xml extract-ruleapp -Druleapp=MyRuleApp -DfromBaseline="June Release" 
RELATED INFORMATION
#Security report for Decision Center projects [http://www-01.ibm.com/support/docview.wss?uid=swg21661252]