Title: IBM Resolving GSKit incompatibility between Domino and Spectrum Protect for Domino - United States

Text:
 TECHNOTE (FAQ)

QUESTION
How can we resolve the incompatibility between Domino and Spectrum Protect for Domino?

ANSWER
 

Near term solution / circumvention

To ensure that GSKit ICC libraries used by Domino and the Spectrum Protect client come from a single source and that the latest version of the ICC libraries is used, symbolic links can be used in the location of the older version of the library to point to the location where the newer version is installed. 

Because the ICC library version distributed by the Spectrum Protect API client 8.1.4.1 is newer than that distributed by any Domino 9.0.1 fix pack (including FP10) and because that level has the latest security patches, it is recommended that customers install the 8.1.4.1 (or later) Spectrum Protect client and create the links in the Domino install path as shown below. For 32bit Domino servers on Windows, use the 7.1.8.2 Spectrum Protect API client (because there is no 32 bit Windows client in v8.1). 

Domino versions prior to 9.0.1 did not distribute the GSKit ICC library so there is no compatibility issue with earlier Domino versions


General Procedure 
1. Shutdown the Domino server 
2. Rename the crypto library in the Domino directory path (libgsk8iccs_64.so, gsk8iccs.dll or gsk8iccs_64.dll depending on platform) as well as the C and N subdirectories in that path 
3. Create the symbolic links in the Domino directory path pointing to the library and C and N subdirectories installed by the Spectrum Protect client 
4. Restart the Domino server


Default Installation paths


Platform Default Domino Install path for ICC crypto library Spectrum Protect Install path for ICC library Linux x64 /opt/ibm/domino/notes/latest/linux/libgsk8iccs_64.so /usr/local/ibm/gsk8_64 AIX /opt/ibm/domino/notes/latest/ibmpow/libgsk8iccs_64.so /usr/opt/ibm/gsk8_64 Linux on Z /opt/ibm/domino/notes/latest/zlinux/libgsk8iccs_64.so /usr/local/ibm/gsk8_64 Windows x86_32 C:\Program Files\IBM\Domino\gsk8iccs.dll C:\Program Files\Common Files\Tivoli\TSM\api\gsk8\lib Windows x64 C:\Program Files\IBM\Domino\gsk8iccs_64.dll C:\Program Files\Common Files\Tivoli\TSM\api64\gsk8\lib64 Windows x86_64 

32bit Domino on 64bit Windows C:\Program Files (x86)\IBM\Notes \gsk8iccs.dll C:\Program Files\Common Files\Tivoli\TSM\api\gsk8\lib 


Sample commands to create the Symbolic Link s 

If the Domino install path used is other than the default paths shown above, adjust the commands to reflect the Domino installation path on your system. You must have administrator authority to create the links. Platform commands to create required links AIX cd /opt/ibm/domino/notes/latest/ibmpow/
mv libgsk8iccs_64.so libgsk8iccs_64.so.old
mv C C_old
mv N N_old
ln -s /usr/opt/ibm/gsk8_64/lib64/libgsk8iccs_64.so /opt/ibm/domino/notes/latest/ibmpow
ln -s /usr/opt/ibm/gsk8_64/lib64/C /opt/ibm/domino/notes/latest/ibmpow
ln -s /usr/opt/ibm/gsk8_64/lib64/N /opt/ibm/domino/notes/latest/ibmpow Linux x64 cd /opt/ibm/domino/notes/latest/linux
mv libgsk8iccs_64.so libgsk8iccs_64.so.old
mv C C_old
mv N N_old
ln -s /usr/local/ibm/gsk8_64/lib64/libgsk8iccs_64.so /opt/ibm/domino/notes/latest/linux
ln -s /usr/local/ibm/gsk8_64/lib64/C /opt/ibm/domino/notes/latest/linux
ln -s /usr/local/ibm/gsk8_64/lib64/N /opt/ibm/domino/notes/latest/linux Linux on Z cd /opt/ibm/domino/notes/latest/zlinux
mv libgsk8iccs_64.so libgsk8iccs_64.so.old
mv C C_old
mv N N_old
ln -s /usr/local/ibm/gsk8_64/lib64/libgsk8iccs_64.so /opt/ibm/domino/notes/latest/zlinux
ln -s /usr/local/ibm/gsk8_64/lib64/C /opt/ibm/domino/notes/latest/zlinux
ln -s /usr/local/ibm/gsk8_64/lib64/N /opt/ibm/domino/notes/latest/zlinux Windows x86_32 cd "c:\Program Files\IBM\Domino\" 
rename gsk8iccs.dll gsk8iccs.dll.old
rename C C_old
rename N N_old
mklink gsk8iccs.dll "c:\Program Files\Common Files\Tivoli\TSM\api\gsk8\lib\gsk8iccs.dll"
mklink /d C "c:\Program Files\Common Files\Tivoli\TSM\api\gsk8\lib\C"
mklink /d N "c:\Program Files\Common Files\Tivoli\TSM\api\gsk8\lib\N" Windows x64 cd "c:\Program Files\IBM\Domino\"
rename gsk8iccs_64.dll gsk8iccs_64.dll.old
rename C C_old
rename N N_old
mklink gsk8iccs.dll "c:\Program Files\Common Files\Tivoli\TSM\api64\gsk8\lib64\gsk8iccs.dll"
mklink /d C "c:\Program Files\Common Files\Tivoli\TSM\api64\gsk8\lib64\C"
mklink /d N "c:\Program Files\Common Files\Tivoli\TSM\api64\gsk8\lib64\N" Windows x86_64 

32bit Domino on 
64bit Windows cd "c:\Program Files (x86)\IBM\Notes\" 
rename gsk8iccs.dll gsk8iccs.dll.old
rename C C_old
rename N N_old
mklink gsk8iccs.dll "c:\Program Files\Common Files\Tivoli\TSM\api\gsk8\lib\gsk8iccs.dll"
mklink /d C "c:\Program Files\Common Files\Tivoli\TSM\api\gsk8\lib\C"
mklink /d N "c:\Program Files\Common Files\Tivoli\TSM\api\gsk8\lib\N" 


GSKit ICC library levels distributed by Domino and Spectrum Protect releases 
Domino Version GSKit ICC Version 9.0.1 through 9.01 FP9 8.0.50.66 9.01 FP10 8.0.50.84 Spectrum Protect API client GSKit Version 7.1.8 8.0.50.78 7.1.8.2 8.0.50.86 8.1.0 8.0.50.66 8.1.2 8.0.50.78 8.1.4 8.0.50.78 8.1.4.1 8.0.50.86