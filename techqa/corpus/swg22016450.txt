Title: IBM gsk8capicmd_64 returns CTGSK2039W with *.p12 keystore - United States

Text:
GSKKM_ERR_CRYPTO_UNSUPPORTED_ALGORITHM; gskit; CTGSK2039W; gsk8capicmd_64; .p12 TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 gsk8capicmd_64 returns CTGSK2039W with *.p12 keystore 

SYMPTOM
 

Following the document Configuring SSL between a Db2 instance and a centralized key manager (ISKLM) [https://www.ibm.com/support/knowledgecenter/SSEPGG_11.1.0/com.ibm.db2.luw.admin.sec.doc/doc/t0062026.html], on step # 1 (a) the error is returned.

C:\Program Files\IBM\gsk8\bin\gsk8capicmd_64.exe -keydb -create -db "C:\keystore\db2keys.p12" -pw "1234" -type pkcs12 -stash

Step #1 (a): Create SSL signer certificate.

C:\Program Files\IBM\gsk8\bin\gsk8capicmd_64.exe -cert -create -db "C:\keystore\db2keys.p12" -label "DB2_signer_certificate" -dn "CN= db2inst1" -size 2048 -sig_alg SHA256_WITH_RSA
CTGSK2039W An unsupported cryptographic algorithm was encountered.
-Command usage-
-db | -crypto Required
-tokenlabel Required if -crypto present 



CAUSE
There is a bug with GSKit v8.0.50.86 bundled with DB2 v11.1 M3 FP3.



DIAGNOSING THE PROBLEM
Check the GSKit version:


Windows: C:\Program Files\IBM\gsk8\bin\gsk8ver_64.exe 

Unix/Linux: /home2/majason/sqllib/gskit/bin/gsk8ver_64



RESOLVING THE PROBLEM
Workaround this by adding the "-stashed" keyword until newer GSKit is bundled with DB2. 


C:\Program Files\IBM\gsk8\bin\gsk8capicmd_64.exe -cert -create -db "C:\keystore\db2keys.p12" -label "DB2_signer_certificate" -dn "CN= db2inst1" -size 2048 -sig_alg SHA256_WITH_RSA -stashed



RELATED INFORMATION
 GSKit Return Codes [https://www.ibm.com/support/knowledgecenter/SSAL2T_8.1.0/com.ibm.cics.tx.doc/reference/r_gskit_error_codes.html]
GSKit Versions Shipped with DB2 [http://www.ibm.com/support/docview.wss?uid=swg21617892]