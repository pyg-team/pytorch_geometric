Title: IBM PK42932: IN A 6.1 NETWORK DEPLOYOMENT ENVIRONMENT, LTPA INVALIDTOKENEXCEPTION ERRORS MAY OCCUR DURING NORMAL RUNNING. - United States

Text:
 SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS DUPLICATE OF ANOTHER APAR.
    
   
   

ERROR DESCRIPTION
 *  In a 6.1 Network Deployoment environment, LTPA
   InvalidTokenException errors may suddenly occur during normal
   running. This will cause numerous SECJ errors to occur
   repeatedly in the Deployment Manager, NodeAgent, and Application
   Server SystemOut.log files.
   
   The NodeAgent and AppServer log files will have the following
   error over and over:
   ----------------------------------------------------------------
   SECJ0306E: No received or invocation credential exist on the
   thread. The Role based authorization check will not have an
   accessId of the caller to check. The parameters are: access
   check method
   getStatsObject:javax.management.ObjectName:java.lang.Boolean on
   resource Perf and module Perf. The stack trace is
   java.lang.Exception: Invocation and received credentials are
   both null
    at
   com.ibm.ws.security.role.RoleBasedAuthorizerImpl.checkAccess(Rol
   eBasedAuthorizerImpl.java:285)
    at ...
   ----------------------------------------------------------------
   
   The following was seen in the NodeAgent FFDC log right at the
   time the problem began:
   ----------------------------------------------------------------
   ------Start of DE processing------ = [3/28/07 18:39:45:362 EDT]
   , key = javax.crypto.BadPaddingException
   com.ibm.ws.security.ltpa.LTPACrypto 2404
   Exception = javax.crypto.BadPaddingException
   Source = com.ibm.ws.security.ltpa.LTPACrypto
   probeid = 2404
   Stack Dump = javax.crypto.BadPaddingException: Given final block
   not properly padded
    at com.ibm.crypto.provider.AESCipher.engineDoFinal(Unknown
   Source)
    at com.ibm.crypto.provider.AESCipher.engineDoFinal(Unknown
   Source)
    at javax.crypto.Cipher.doFinal(Unknown Source)
    at
   com.ibm.ws.security.ltpa.LTPACrypto.decrypt(LTPACrypto.java:2379
   )
    at ...
   ----------------------------------------------------------------
   
   The Dmgr will repeatedly report the following error:
   ----------------------------------------------------------------
   [3/28/07 20:29:13:681 EDT] 00000050 WSCredentialT E   SECJ5010E:
   Could not create default AuthenticationToken during propagation
   login.  The following exception occurred:
   com.ibm.websphere.security.auth.WSLoginFailedException:
   Validation of LTPA token failed due to invalid keys or token
   type.
    at
   com.ibm.ws.security.ltpa.LTPAServerObject.validateToken(LTPAServ
   erObject.java:931)
    at ...
   ----------------------------------------------------------------
   
   
    
   
   

LOCAL FIX

PROBLEM SUMMARY

PROBLEM CONCLUSION

TEMPORARY FIX
 *  A test fix was sent to the cusotmer.
   
   
    
   
   

COMMENTS
 *  PMR closed after receiving positive response from the customer.
   APAR PK32086 contains this APAR fix.
   
   
    
   
   

APAR INFORMATION
 * APAR NUMBER
   PK42932
   
   
 * REPORTED COMPONENT NAME
   WEBS APP SERV N
   
   
 * REPORTED COMPONENT ID
   5724H8800
   
   
 * REPORTED RELEASE
   61I
   
   
 * STATUS
   CLOSED DUA
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2007-04-10
   
   
 * CLOSED DATE
   2007-06-15
   
   
 * LAST MODIFIED DATE
   2007-06-15
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   WEBSPH APP SERV
   
   
 * FIXED COMPONENT ID
   5724J0800
   
   

APPLICABLE COMPONENT LEVELS