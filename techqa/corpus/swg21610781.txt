Title: IBM SAP 7.1 Agent deployment with SAP RFC library - United States

Text:
5724B97SOTR TECHNOTE (FAQ)

QUESTION
 How should RFC library be included in local and remote deployment of ITCAM Agent for SAP 7.1? 

CAUSE
Documentation for SAP agent 7.1 is unclear on how to incorporate RFC files for SAP agent deployment.
Note: If you have already deployed the agent without the RFC libraries, the agent fails to start, refer to following technote to correct the problem. 
http://www.ibm.com/support/docview.wss?uid=swg21611911 [http://www.ibm.com/support/docview.wss?uid=swg21611911] 


ANSWER
Monitoring agent for SAP 7.1 requires SAP RFC libraries to start successfully. Since RFC libraries are SAP proprietary material, authorized SAP account is required to download these libraries from SAP website. Manual steps are required to include RFC libraries before agent deployment. Detailed steps are described below. 

1. Download RFC libraries 

1.1 Identify the target platform where SAP agent is going to be remotely deployed. For example, platform is AIX or LINUX, 32 or 64 bit. 

1.2 For each of the target platforms, download corresponding RFC library from the SAP marketplace.
Steps to download SAP RFC SDK from SAP marketplace:

1) Login to service marketplace http://service.sap.com [http://service.sap.com] 
2) Select SAP support portal, login using S-user id.
3) Select Software Downloads tab at top.
4) On the left hand panel browse to SAP Software Download Center->Support 
Packages and Patches->Browse Our Download Catalog
5) Click on Addition Components link.
6) Click on SAP RFC SDK
7) Depending upon the Version of RFC you require, 
click on either SAP RFC SDK 6.40 or SAP RFC SDK 7.10.
8) Save the SDK file on your local drive.

2. Local deployment

If SAP 7.1 agent is being installed locally, copy appropriate SDK Library file to your RFC Library folder inside %CANDLE_HOME%. 
For Unix based platform, copy SDK Library file to $CANDLE_HOME/{Interp}/sa/lib.
For Windows platform, copy the library to %CANDLE_HOME%/TMAITM6/ for a 32-bit agent, or to %CANDLE_HOME%/TMAITM6_x64 for a 64-bit agent.

3. Remote deployment

This step is different for Unix and Windows agent platforms. For Unix platform, the RFC file can be added to the agent bundle before adding it to the agent depot. Subsequent deployment of the agent to Unix hosts deploy the agent and RFC library to the target host. On the other hand, for Windows platform, the RFC library cannot be added to the agent bundle, and must be manually copied to the %CANDLE_HOME% before the agent is deployed. Detailed steps are described below.

3.1 Unix: If the target platform is Unix based, then agent bundle is added to agent depot along with RFC library. When the agent is remotely deployed to the target host using addbundles, the RFC library is deployed along with the agent files.

1) Locate sa<interp>.jar under unix directory in the installer CD. <interp> represents architecture of the agent platform. Refer to following table for sa<interp>.jar applicable to the target platforms.



Platform sa<interp>.jar Aix 5.2 or higher, 32 bit saaix523.jar Aix 5.2 or higher, 64 bit saaix526.jar HP Unix 11.v2 IA 64 or higher sahpi116.jar Linux x86-32 2.6 kernel or higher sali6263.jar zLinux, 64 bit, 2.6 kernel sals3266.jar Linux x86-64bit, 2.6 kernel salx8266.jar Solaris Sparc 9 or higher, 32bit sasol283.jar Solaris Sparc 9 or higher, 64bit sasol286.jar Solaris Operton (AMD x86-64) 10 or higher sasol606.jar 
2) Add the SAP RFC library (librfccm.*) for the platform into <interp>/sa/lib of the jar file. 
For example, if you extract saaix526.jar, place the RFC library for this platform in aix526/sa/lib directory. Compress the jar file with RFC library in it. 

3) Complete addbundles procedure. For example: 
tacmd addbundles -i <SAP 7.1 installer>/unix -t sa -p aix526 

3.2 Windows: If the target platform is Windows, the RFC file cannot be added to the agent bundle in agent depot. The RFC libraries need to be copied over to the agent host prior to remotely deploying the agent. 
1) Copy the RFC library into one of the following paths: 

%CANDLE_HOME%/TMAITM6 for a 32-bit agent on a 32-bit Windows computer. 
%CANDLE_HOME%/TMAITM6_x64 for a 64-bit agent on a 64-bit Windows computer. 

2) Deploy the agent either through the Tivoli® Enterprise Portal or by using the tacmd command. To deploy the SAP agent on the Windows 2008 Enterprise Edition 64 bit platform, use IBM® Tivoli Monitoring V6.2.2 Fix Pack 8 or later release.