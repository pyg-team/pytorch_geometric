Title: IBM HD67621: VPM FILTER CRASHES WHEN USING PART+ACCURACY FILTER - United States

Text:
 SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  Environment:
   server - aix5.3, oracle 9.2
   client - aix5.2, windows/xp prof
   Scenario:
   Seems to be data related.
   - open PRC
   - open part from PRC into Catia
   - select filter
   - select part filter, then select part from Catia
   - set accuracy mode
   - perform filter -> crash (server disconnect)
   Sending abend / trace files separately.
   We have done more testing on both VPMNav and
   Classic. From the traces, the issue is always the
   same - a CATPart is processed to regenerate its
   spacemap. This seems to work OK, then it
   falls in a heap deleting the /tmp workfile
   afterwards. There isalways a message "Unable to
   access ....". However, theCATPart referred to is
   always OK, and opens into Catia.
   Curiously most parts appear to process OK. The
   only thing I can spot so far is that every time it
   fails, the problem is with a part which has multiple
   instances in multiple PRCs. I'vealso tried forcing a
   regenerate formats on the failing CATParts, but this
   doesnt appear to help - the filter process still insists
   on regenerating the spacemap.
   No problems as far as we know with newly created
   data, so looks like data-specific.
   OK, I now have a very interesting test result
   which may help with this (but will prompt another
   CritSit).
   If I run my Classic scenario, choosing the instance
   I know will cause the crash, from a user
   with 'admin' context, then I get the crash. If I run
   the identical scenario from the same
   user, but with a context that provides only read
   privilege, then I get no crash.
   This implies (as the previous traces and speculation
   suggested) that the filtering process is not passive -
   it is trying to generate data 'on the fly', and it is
   this process which is causing the crash.
   .
   
   
    
   
   

LOCAL FIX

PROBLEM SUMMARY
 *  VPM filter crashes when using part+accuracy filter
   Environment:
   server - aix5.3, oracle 9.2
   client - aix5.2, windows/xp prof
   Scenario:
   Seems to be data related.
   - open PRC
   - open part from PRC into Catia
   - select filter
   - select part filter, then select part from Catia
   - set accuracy mode
   - perform filter -> crash (server disconnect)
   Sending abend / trace files separately.
   We have done more testing on both VPMNav and
   Classic. From the traces, the issue is always the
   same - a CATPart is processed to regenerate its
   spacemap. This seems to work OK, then it
   falls in a heap deleting the /tmp workfile
   afterwards. There isalways a message "Unable to
   access ....". However, theCATPart referred to is
   always OK, and opens into Catia.
   Curiously most parts appear to process OK. The
   only thing I can spot so far is that every time it
   fails, the problem is with a part which has multiple
   instances in multiple PRCs. I'vealso tried forcing a
   regenerate formats on the failing CATParts, but this
   doesnt appear to help - the filter process still insists
   on regenerating the spacemap.
   No problems as far as we know with newly created
   data, so looks like data-specific.
   OK, I now have a very interesting test result
   which may help with this (but will prompt another
   CritSit).
   If I run my Classic scenario, choosing the instance
   I know will cause the crash, from a user
   with 'admin' context, then I get the crash. If I run
   the identical scenario from the same
   user, but with a context that provides only read
   privilege, then I get no crash.
   This implies (as the previous traces and speculation
   suggested) that the filtering process is not passive -
   it is trying to generate data 'on the fly', and it is
   this process which is causing the crash.
   .
   
   
    
   
   

PROBLEM CONCLUSION
 *  THIS PROBLEM WILL BE FIXED ON ENOVIA
   VERSION 5 RELEASE 19 GA level.
   NOTE THAT THIS PROBLEM WILL ALSO BE FIXED
   ON V5R18SP03.
   .
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   HD67621
   
   
 * REPORTED COMPONENT NAME
   ENOVIA V5 VPM A
   
   
 * REPORTED COMPONENT ID
   569101400
   
   
 * REPORTED RELEASE
   516
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2007-09-21
   
   
 * CLOSED DATE
   2007-11-20
   
   
 * LAST MODIFIED DATE
   2008-01-25
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   ENOVIA V5 VPM A
   
   
 * FIXED COMPONENT ID
   569101400
   
   

APPLICABLE COMPONENT LEVELS
 * R518 PSN SP51803
   UP08/01/25 I 1000
   
   
 * R517 PSN
   UP