Title: IBM PI51466: DB2 ADMIN TOOL DROP OF A TEMPORAL TABLE COMPLEX WITH VIEWS ON THE TABLES ENDS WITH SQLCODE -204 DROP VIEW. - United States

Text:
z/os  A FIX IS AVAILABLE
Obtain the fix for this APAR.


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  A two temporal table complex contains a table for current data,
   a table for history data, and each table is their own
   tablespace.
   Each table has a view. A DB2 ADMIN Compare that drops both table
   spaces gets error:
      ADB5044I *** INPUT STATEMENT:
         DROP VIEW <view_schema>.<view_name>
      sqlerror on DROP       command, PREPARE    function
       DSNT408I SQLCODE = -204, ERROR:  <view_schema>.<view_name>
       IS AN UNDEFINED NAME
       DSNT418I SQLSTATE   = 42704 SQLSTATE RETURN CODE
   
   
    
   
   

LOCAL FIX
 *  n/a
   
   
    
   
   

PROBLEM SUMMARY
 *  ****************************************************************
   * USERS AFFECTED: Users of the DB2 Object Comparison           *
   *                 Tool for z/OS who use the Compare            *
   *                 function to drop a temporal table            *
   *                 complex.                                     *
   ****************************************************************
   * PROBLEM DESCRIPTION: When using Object Compare to drop a     *
   *                      temporal table complex, the dependent   *
   *                      VIEW created on the history table was   *
   *                      not detected as dropped by dropping     *
   *                      the history table. An unneeded DROP     *
   *                      VIEW statement was generated which      *
   *                      caused the run change job (WSL) to      *
   *                      fail with SQLNCODE204 /                 *
   *                      SQLCODE=-204:                           *
   *                                                              *
   *                      DROP VIEW <view_schema>.<view_name>;    *
   *                      sqlerror on DROP    command, PREPARE    *
   *                      function                                *
   *                      DSNT408I SQLCODE = -204, ERROR:         *
   *                      <view_schema>.<view_name> IS AN         *
   *                      UNDEFINED NAME                          *
   ****************************************************************
   * RECOMMENDATION:                                              *
   ****************************************************************
   When using Object Compare to drop a temporal table complex,
   the dependent view created on the history table was not
   detected as dropped by dropping the history table.  An
   unneeded DROP VIEW statement was generated which caused
   the run change job (WSL) to fail with SQLCODEN204 /
   SQLCODE=-204.
   
   
    
   
   

PROBLEM CONCLUSION
 *  Problem has been resolved.
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   PI51466
   
   
 * REPORTED COMPONENT NAME
   DB2 ADMIN TOOL
   
   
 * REPORTED COMPONENT ID
   568851500
   
   
 * REPORTED RELEASE
   B10
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2015-10-29
   
   
 * CLOSED DATE
   2015-12-18
   
   
 * LAST MODIFIED DATE
   2016-01-04
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

MODULES/MACROS
 *     ADB2CMR
   
   
    
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   DB2 ADMIN TOOL
   
   
 * FIXED COMPONENT ID
   568851500
   
   

APPLICABLE COMPONENT LEVELS
 * RA20 PSY UI33958 [HTTPS://WWW14.SOFTWARE.IBM.COM/WEBAPP/SET2/ORDERMEDIA/SHOPCART?PTFS=UI33958]
   UP15/12/23 P F512
   
   
 * RB10 PSY UI33959 [HTTPS://WWW14.SOFTWARE.IBM.COM/WEBAPP/SET2/ORDERMEDIA/SHOPCART?PTFS=UI33959]
   UP15/12/23 P F512
   
   
 * RB20 PSY UI33960 [HTTPS://WWW14.SOFTWARE.IBM.COM/WEBAPP/SET2/ORDERMEDIA/SHOPCART?PTFS=UI33960]
   UP15/12/23 P F512
   
   

FIX IS AVAILABLE
 * SELECT THE PTF APPROPRIATE FOR YOUR COMPONENT LEVEL. YOU WILL BE REQUIRED TO SIGN IN. DISTRIBUTION ON PHYSICAL MEDIA IS NOT AVAILABLE IN ALL COUNTRIES.