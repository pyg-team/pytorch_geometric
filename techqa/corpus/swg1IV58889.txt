Title: IBM IV58889: CHANGING THE HOSTID ON SOLARIS LOCALZONE CAUSES AGENT TO REPORT INCOMPLETE STATUS. - United States

Text:
  DIRECT LINKS TO FIXES
Tivoli Asset Discovery for Distributed Interim Fix 7.5.0-TIV-TAD4D-IF0027 [http://www.ibm.com/support/fixcentral/quickorder?product=ibm%2FTivoli%2FTivoli+Asset+Discovery+for+Distributed&fixids=7.5.0-TIV-TAD4D-IF0027&source=SAR]
IBM License Metric Tool Interim Fix 7.5.0-TIV-ILMT-IF0027 [http://www.ibm.com/support/fixcentral/quickorder?product=ibm%2FTivoli%2FIBM+License+Metric+Tool&fixids=7.5.0-TIV-ILMT-IF0027&source=SAR]
Tivoli Asset Discovery for Distributed Interim Fix 7.5.0-TIV-TAD4D-IF0026 [http://www.ibm.com/support/fixcentral/quickorder?product=ibm%2FTivoli%2FTivoli+Asset+Discovery+for+Distributed&fixids=7.5.0-TIV-TAD4D-IF0026&source=SAR]
IBM License Metric Tool Interim Fix 7.5.0-TIV-ILMT-IF0026 [http://www.ibm.com/support/fixcentral/quickorder?product=ibm%2FTivoli%2FIBM+License+Metric+Tool&fixids=7.5.0-TIV-ILMT-IF0026&source=SAR]
IBM License Metric Tool 7.2.2 Interim Fix, 7.2.2-TIV-ILMT-IF0014 [http://www-01.ibm.com/support/docview.wss?uid=swg24032962]
IBM License Metric Tool Interim Fix 7.5.0-TIV-ILMT-IF0026 [http://www-01.ibm.com/support/docview.wss?uid=swg24032909]



APAR STATUS
 * CLOSED AS DOCUMENTATION ERROR.
    
   
   

ERROR DESCRIPTION
 *  Customer has a brunch of Solaris Global/Local zones where some
   of its ILMT agents v7.5.0.118 on the local zone are reporting
   Incomplete status.
   
   
   
   globalzone % zoneadm list -iv
   .
   ID NAME      STATUS     PATH      BRAND    IP
   .
   0 global     running    /          native   shared
   .
   3 lzone1     running    /zones/lzone1 solaris9 shared
   .
   8 lzone2     running    /zones/lzone2 native shared
   .
   9 lzone3     running    /zones/lzone3 native shared
   .
   
   
   
   The hardware scan results for all zones show following
   (excluding the Branded zone "lzone1"):
   
   
   globalzone (GLOBAL ZONE)
   
   .
   <Hardware>
   .
       <ComponentID version="1">
           <Manufacturer>Oracle Corporation</Manufacturer>
           <Product>SPARC Enterprise M4000 Server</Product>
           <SerialNumber>BDF121XXXX8</SerialNumber>
           <Type>SPARC-Enterprise</Type>
           <HWSerial>2246471234</HWSerial>
           <Platform>SUNW,SPARC-Enterprise</Platform>
       </ComponentID>
   .
       <Processor version="1">
           <Index IsKey="1">1</Index>
           <ID IsKey="1">53715a9bf41ac47d4b3dbcec17646ef8</ID>
           <Family>SPARC Family</Family>
           <MaxClockSpeed>2660</MaxClockSpeed>
           <CurrentClockSpeed>2660</CurrentClockSpeed>
           <Board>0</Board>
           <Module>1</Module>
           <EcacheMB>11</EcacheMB>
           <CPUImpl>SPARC64-VII+ (portid 1024 impl 0x7 ver 0xc1
   clock 2660 MHz)</CPUImpl>
           <CPUMask>193</CPUMask>
           <CPUEnabled>Y</CPUEnabled>
       </Processor>
   
   
   
   
   
   .
   lzone2 (LOCAL ZONE)
   .
   <Hardware>
   .
       <ComponentID version="1">
           <Manufacturer>Oracle Corporation</Manufacturer>
           <Product>SPARC Enterprise M4000 Server</Product>
           <SerialNumber>BDF121XXXX8</SerialNumber>
           <Type>SPARC-Enterprise</Type>
           <HWSerial>2246471234</HWSerial>
           <Platform>SUNW,SPARC-Enterprise</Platform>
       </ComponentID>
   .
       <Processor version="1">
           <Index IsKey="1">1</Index>
           <ID IsKey="1">53715a9bf41ac47d4b3dbcec17646ef8</ID>
           <Family>SPARC Family</Family>
           <MaxClockSpeed>2660</MaxClockSpeed>
           <CurrentClockSpeed>2660</CurrentClockSpeed>
           <Board>0</Board>
           <Module>1</Module>
           <EcacheMB></EcacheMB>
           <CPUImpl>SPARC64-VII+ (portid 1032 impl 0x7 ver 0xc1
   clock 2660 MHz)</CPUImpl>
           <CPUMask></CPUMask>
           <CPUEnabled>Y</CPUEnabled>
       </Processor>
   .
   
   
   
   
   lzone3  (LOCAL ZONE)
   .
   <Hardware>
   .
       <ComponentID version="1">
           <Manufacturer>Oracle Corporation</Manufacturer>
           <Product>SPARC Enterprise M4000 Server</Product>
           <SerialNumber>BDF121XXXX8</SerialNumber>
           <Type>SPARC-Enterprise</Type>
           <HWSerial>2225036666</HWSerial>
           <Platform>SUNW,SPARC-Enterprise</Platform>
       </ComponentID>
   .
       <Processor version="1">
           <Index IsKey="1">1</Index>
           <ID IsKey="1">53715a9bf41ac47d4b3dbcec17646ef8</ID>
           <Family>SPARC Family</Family>
           <MaxClockSpeed>2660</MaxClockSpeed>
           <CurrentClockSpeed>2660</CurrentClockSpeed>
           <Board>0</Board>
           <Module>1</Module>
           <EcacheMB></EcacheMB>
           <CPUImpl>SPARC64-VII+ (portid 1024 impl 0x7 ver 0xc1
   clock 2660 MHz)</CPUImpl>
           <CPUMask></CPUMask>
           <CPUEnabled>Y</CPUEnabled>
       </Processor>
   .
   
   ========
   
   
   
   Noticed that the HWSerial value for this local zone below
   which is currently reporting as "Incomplete" status is showing a
   different number.   But the SerialNumber value is the same as
   the Global zone which is expected.
   
   
   lzone3  (LOCAL ZONE)
   .
   <Hardware>
   .
       <ComponentID version="1">
           <Manufacturer>Oracle Corporation</Manufacturer>
           <Product>SPARC Enterprise M4000 Server</Product>
           <SerialNumber>BDF121XXXX8</SerialNumber>
           <Type>SPARC-Enterprise</Type>
           <HWSerial>2225036666</HWSerial>
           <Platform>SUNW,SPARC-Enterprise</Platform>
       </ComponentID>
   
   
   
   Since the HWSerial value is different, the ILMT agent will
   report as Incomplete status.  There is an APAR IV56111 [http://www-01.ibm.com/support/docview.wss?uid=swg1IV56111] addressed
   similar problem but it did not fix the issue.
   
   
   Further found out that the hostid on this specific local
   "native" zone (lzone3) has changed as shown below comparing to
   other localzones.
   
   
   
   zonecfg -z lzone1 info hostid
   
   hostid:
   
   zonecfg -z lzone2 info hostid
   
   hostid:
   
   zonecfg -z lzone3 info hostid
   
   hostid: 849f4cdc
   
   
   This causes problem with lzone3 agent to report "Incomplete"
   status.
   
   
    
   
   

LOCAL FIX

PROBLEM SUMMARY
 *  ****************************************************************
   * PROBLEM DESCRIPTION:
   ****************************************************************
   * When you change the host ID on a Solaris local zone, the local
   * zone status is Incomplete.
   * EXPECTED RESULTS:
   * Documentation is updated to contain information that changing
   * the host ID on a local zone is not supported. The host ID on
   * the local zone must be the same as the host ID on the global
   * zone.
   ****************************************************************
   * RECOMMENDATION: Refer to updated product documentation for
   * the corrected statement when available.
   ****************************************************************
   
   
    
   
   

PROBLEM CONCLUSION
 *  The fix for this APAR is contained in the product on-line
   documentation (Infocenter).
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   IV58889
   
   
 * REPORTED COMPONENT NAME
   LICENSE METRIC
   
   
 * REPORTED COMPONENT ID
   5724LMT00
   
   
 * REPORTED RELEASE
   750
   
   
 * STATUS
   CLOSED DOC
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt / Xsystem
   
   
 * SUBMITTED DATE
   2014-04-08
   
   
 * CLOSED DATE
   2014-06-02
   
   
 * LAST MODIFIED DATE
   2014-06-02
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION

APPLICABLE COMPONENT LEVELS