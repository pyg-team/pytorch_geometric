Title: IBM IJ04069: UNIX OS AGENT HANGS OR TERMINATES ON AIX 7100-05-01-1731 AND 7200-02-01 - United States

Text:
 SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS VENDOR SOLUTION.
    
   
   

ERROR DESCRIPTION
 *  Reported Release: 630 FP7
   Compid:           5724C040U UNIX OS Agent
   
   Environment:      All versions of UNIX OS Agent
   
   Problem Description:  UNIX OS Agent hangs or terminates on AIX
   levels 7100-05-01-1731 and 7200-02-01.  The problem can also
   occur on AIX 6.1tl9-sp10 (which is in extended support mode).
   
   In some cases the agent will terminate at startup.  In other
   cases the symptom is it will hang when trying to stop the agent
   (due to a thread terminating at startup that will not allow the
   agent to stop).
   
   The problem has been reported to AIX support and we are working
   with them on a resolution.
   
   AIX PMR 62677,661,706 has been opened with AIX L3 support; they
   have acknowledged the problem and have opened APAR IJ04075 [http://www-01.ibm.com/support/docview.wss?uid=isg1IJ04075].   We
    are waiting on details of when a fix will be available.
   
   Until then, Watchdog can be disabled which will avoid the issue
   using the steps below:
       - Stop the OS Agent (might have to force)
       - Edit the $CANDLEHOME/config/ux.ini file
       - Comment out the KCA_CAP_DIR line:
               # KCA_CAP_DIR=$CANDLEHOME$/config/CAP:/opt/IBM/CAP
         Add the line:
               KCA_CAP_DIR=
       - Restart the agent
   
   Related Files and Output:    In the *_ux_1*.log file, the
   following stacktrace is seen:
   
   A stacktrace is generated showing:
   
   **** Fatal Error (11) Detected in kuxagent or a helper binary
   ****
   **** Stacktrace in standard logs. Enable KBB_SIG1=-dumpoff in
   ini for core dumps ****
   +++PARALLEL TOOLS CONSORTIUM LIGHTWEIGHT COREFILE FORMAT
   version 1.0
   +++LCB 1.0 Thu Jan 18 16:00:26 2018 Generated by IBM AIX 7.1
   #
   +++ID Node 0 Process 20709466 Thread 17
   ***FAULT "SIGSEGV - Segmentation violation"
   +++STACK
   mbrtowc_wrap : 0x00000028
   __xmbrtowc : 0x00000054
   _Mbrtowc : 0x00000030
   do_in__Q3_3std7_LFS_ON7codecvtXTwTcTPc_CFRPcPCcT2RPCcPwT5RPw :
   0x0000009c
   in__Q3_3std7_LFS_ON7codecvtXTwTcTPc_CFRPcPCcT2RPCcPwT5RPw :
   0x00000054
   uflow__Q3_3std7_LFS_ON13basic_filebufXTwTQ2_3std11char_traitsXTw
   __Fv : 0x00000194
   underflow__Q3_3std7_LFS_ON13basic_filebufXTwTQ2_3std11char_trait
   sXTw__Fv : 0x00000068
   sgetc__Q3_3std7_LFS_ON15basic_streambufXTwTQ2_3std11char_traitsX
   Tw__Fv : 0x0000006c
   getline__Q3_3std7_LFS_ON13basic_istreamXTwTQ2_3std11char_traitsX
   Tw__FPwiw : 0x000000b8
   getline__Q3_3std7_LFS_ON13basic_istreamXTwTQ2_3std11char_traitsX
   Tw__FPwi : 0x00000058
   getlineWstring__11KcaIFStreamFv : 0x000000f4
   getlineInt__11KcaIFStreamFv : 0x000000e4
   ReadAgent__10ControllerFR18ManagedProcessListP6Policy :
   0x0000010c
   ProcessCAPStateChange__10ControllerFP12CAPFileEvent : 0x00000d54
   doCommandProcessing__12CAPFileEventFv : 0x00000188
   runHandler__14CommandHandlerFv : 0x00000300
   commandHandlerThreadEntry : 0x000000bc
   _pthread_body : 0x000000f0
   ---STACK
   ---ID Node 0 Process 20709466 Thread 17
   
   
    
   
   

LOCAL FIX
 *  N/A
   
   
    
   
   

PROBLEM SUMMARY

PROBLEM CONCLUSION

TEMPORARY FIX

COMMENTS
 *  The problem is in AIX not IBM Tivoli Monitoring.
   
   Below are links available from AIX support to obtain the fix for
   the appropriate AIX version:
   
   Here is a link to our HIPER bulletin -
   
   http://www14.software.ibm.com/webapp/set2/subscriptions/onvdq?mo
   de=18&ID=5762&myns=aix&mynp=OCOE608&mync=E&cm_sp=aix-_-OCOE608-_ [http://www14.software.ibm.com/webapp/set2/subscriptions/onvdq?mode=18&ID=5762&myns=aix&mynp=OCOE608&mync=E&cm_sp=aix-_-OCOE608-_]
   -E
   
   That contains links to fixes for all the levels affected.
   
   Here it is broken down to the different affected AIX levels -
   each of these links includes a link to get the fix:
   
   7.2tl2:
   http://www-01.ibm.com/support/docview.wss?uid=isg1IJ04075 [http://www-01.ibm.com/support/docview.wss?uid=isg1IJ04075]
   
   7.1tl5:
   http://www-01.ibm.com/support/docview.wss?uid=isg1IJ04510 [http://www-01.ibm.com/support/docview.wss?uid=isg1IJ04510]
   
   6.1tl9-sp10 and VIOS 2.2.6.X:
   http://www-01.ibm.com/support/docview.wss?uid=isg1IJ04511 [http://www-01.ibm.com/support/docview.wss?uid=isg1IJ04511]
   
   
    
   
   

APAR INFORMATION
 * APAR NUMBER
   IJ04069
   
   
 * REPORTED COMPONENT NAME
   ITM AGENT UNIX
   
   
 * REPORTED COMPONENT ID
   5724C040U
   
   
 * REPORTED RELEASE
   630
   
   
 * STATUS
   CLOSED ISV
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt / Xsystem
   
   
 * SUBMITTED DATE
   2018-02-12
   
   
 * CLOSED DATE
   2018-03-12
   
   
 * LAST MODIFIED DATE
   2018-03-12
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION

APPLICABLE COMPONENT LEVELS