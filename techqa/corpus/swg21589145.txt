Title: IBM Unable to Deploy Case Manager Client in IBM Case Manager Administration Client 5.1 using Development profile. - United States

Text:
bspace; bspace theme; case management banner TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 Attempts to run Deploy Case Manager Client task in Case Manager Administration Client (CMAC) 5.1 fails with java.lang.Exception: The case management banner could not be added to Business Space. Verify that the Business Space server is running. 

SYMPTOM
Error reported in CMAC log, IBM_Case_Manager_5.1.0.0_CMAC0.log: 

java.lang.Exception thrown while executing method executeWork() of com.ibm.ecm.configmgr.app.acm.task.widgets.DeployACMWidgetsPackageStandard$Execution
Stack Trace follows (when available):
java.lang.Exception: The case management banner could not be added to Business Space. Verify that the Business Space server is running. 
at com.ibm.ecm.configmgr.app.acm.task.widgets.DeployBanner.executeTask(DeployBanner.java:134)
at com.ibm.ecm.configmgr.app.acm.task.widgets.DeployACMWidgetsPackageBase$DeployWSBaseExecution.executeWork(DeployACMWidgetsPackageBase.java:461)
at com.ibm.ecm.configmgr.engine.task.TaskExecution.execute(TaskExecution.java:136)
at com.ibm.ecm.configmgr.engine.task.ExecuteTaskThread.run(ExecuteTaskThread.java:44)
at java.lang.Thread.run(Thread.java:736)


Related entries reported in WAS SystemOut.log. 

[3/21/12 18:08:31:361 IST] 00000029 SpaDataSource W BMWFR0035W: The theme bspaceTheme specifed for page with ID M0AF21DD4E7F96E06B77A01FD0C18FD000017 was not found, using the default theme 

[3/21/12 18:08:31:361 IST] 00000029 ControllerSer I com.ibm.mm.framework.rest.next.servlet.ControllerServlet logException A checked exception of type [com.ibm.mm.framework.rest.next.exception.LocalizedIOException] occurred during the resolution process, do not log the exception trace to avoid log file spamming. Enable trace logging for [com.ibm.mm.framework.rest.next.exception.ExceptionHelper=all] to log the exceptions. The exception message was: [400: null] 

[3/21/12 18:08:31:376 IST] 00000029 srt W com.ibm.ws.webcontainer.srt.SRTServletResponse addHeader WARNING: Cannot set header. Response already committed. 

 

Related entries reported in WAS trace.log (enabled using WAS Diagnostic trace). 

[3/21/12 18:08:31:361 IST] 00000012 ContextManage < setInvocationSubject Exit 

[3/21/12 18:08:31:361 IST] 00000029 exception > com.ibm.mm.framework.rest.next.exception.ExceptionHelper sendError ENTRY
com.ibm.mm.framework.rest.next.servlet.RESTRequestWrapper@1ac81ac8
com.ibm.mm.was.filter.GzipHttpServletResponseWrapper@6b706b70
com.ibm.mm.framework.rest.next.exception.LocalizedIOException 

[3/21/12 18:08:31:361 IST] 00000029 exception 3 com.ibm.mm.framework.rest.next.exception.ExceptionHelper sendError exception ...
...
Caused by: java.lang.NullPointerException at com.ibm.mm.framework.rest.next.spa.SpaDataSource.reset(SpaDataSource.java:154) at com.ibm.mm.framework.rest.next.spa.SpaDataSourceFactory.newSource(SpaDataSourceFactory.java:61) ... 82 more


CAUSE
The default theme for Business Space was not created during the first server startup. Another indication of problem is WAS Admin user not being able to login to Business Space as well, http://servername:port.mum/enabler



DIAGNOSING THE PROBLEM
A. Collecting WAS Business Space Logs. 

 1. Restart WAS 
 2. Log on to WAS administrative console 
 3. In the left panel, expand Troubleshooting and click on Logs and Trace. 
 4. Select the application server to be traced, and then on the next page click the Diagnostic Trace link. 
 5. Select the Runtime tab 
 6. Under Trace Output, verify the output file location. 
    Important: Do not select Save Runtime Changes to Configuration if you do not want this setting to become permanent. 
 7.  On same panel, click on Change Log Detail Levels under Additional Properties on right side panel. 
 8. Select the Runtime tab 
 9. Under Trace Specification, enter trace string below.
    *=info: com.ibm.bspace.*=all: com.ibm.mm.*=all: com.ibm.ws.security.*=all 


B. Collecting CMAC logs


 1. Open Command Prompt (DOS prompt) using Run As Administrator option 
 2. Change directory to the configure subfolder 
    C:\Program Files (x86)\ibm\CaseManagement\configure 
 3. Run the command: 
    configmgr -debug 
 4. This will bring Case Manager Administration Client (CMAC) with additional logging options. 
 5. Execute the "Deploy Case Manager Client" task and write down the time when the error occurred. 
    


C. Uploading all of the resulting files. Collect and upload the following files to IBM Ecurep under the appropriate PMR number. 

 1. <user's home dir>/acm_configmgr_workspace/.metadata/.log 
    For example if you are currently logged in as Administrator the path would be C:\Users\Administrator\acm_configmgr_workspace\.metadata 
 2. Zip all the files under <CMAC_root_dir>/tmp 
    Default path: 
    C:\Program Files (x86)\ibm\CaseManagement\configure\tmp 
 3. Zip all the files under <CM_root_dir>/ 
    Default path: 
    C:\Program Files (x86)\ibm\CaseManagement\logs 
 4. WAS logs 
    (i) (SystemErr.log and SystemOut.log) 
    Default Path 
    C:\Program Files\IBM\WebSphere\AppServer\profiles\AppSrv01\logs\server1 
    (ii) Zip all files under ffdc logs that have current date timestamps. 
    Default Path
    C:\Program Files\IBM\WebSphere\AppServer\profiles\AppSrv01\logs\ffdc 
 5. Trace file. 
    trace.log <== provide the timestamp when the login was performed 
 6. Zip all the files under 
    C:\Program Files (x86)\ibm\CaseManagement\configure\profiles\<devenvironmentprofilename> 

RESOLVING THE PROBLEM
 

 1. On the WebSphere Server, find the oobLoadedStatus.properties. On Windows platform the file is located in the default path below
    C:\Program Files\IBM\WebSphere\AppServer\profiles\AppSrv01\BusinessSpace\<NodeName>Node01\server1\mm.runtime.prof\public 
 2. Change the three lines below from false to true: 
    importTemplates.txt=true 
    importSpaces.txt=true 
    importThemes.txt=true 
 3. Restart WAS. 
 4. After WAS restarted, verify that that all three lines above have reverted back to false (indicating successful import). 
 5. Run the Deploy Case Manager Client


Important: After you deploy Case Manager Client, set importThemes.txt to false. If you do not set this value to false, the default Business Space themes will overwrite the IBM Case Manager themes. RELATED INFORMATION
 The Business Space welcome space and predefined space t [http://www.ibm.com/support/docview.wss?uid=swg21416209]