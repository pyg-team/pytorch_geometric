Title: IBM Preparing Notes/Domino for Chile Update for Daylight Saving Time 2017 - United States

Text:
 TECHNOTE (FAQ)

QUESTION
How do you prevent Notes Client and Domino Server from adjusting daylight saving time in Chile for 2017?

ANSWER
Overview

Effective 14 May, 2017, mainland Chile will no longer observe DST and will fall back to UTC -04:00 hours while the Magallanes Region and the Chilean Artic will move their offset to UTC -03:00 hours. 

Users who are located in the Magallanes and Chilean Arctic regions will have their settings to switch to this new time zone (UTC -03:00 Punta Arenas) when the update is released by Microsoft.


Steps to take

1. Operating system
Apply any necessary operating system patches to obtain the updated time zone rules. It is recommended that you follow the installation guidelines provided by the operating system vendor. Some operating systems might allow you to directly modify system settings to affect changes in the updated time zone rules. Updating the operating system is an integral part of these instructions and must be done prior to running any corrective agents.

The Standard Notes 8.x and 8.5.x clients versions have a dependancy on ICU4J data and core JVM time zone data that must be patched before existing calendar entries will appear at the correct times even after a workstation operating system is updated. See section 4 below on further details on how to resolve this for the Standard Configuration client.

The Notes client or Domino server should be shut down while the operating system patch or update is being applied. Before restarting the Notes client or Domino server, it is important to follow the instructions below in order for Notes and Domino to work as expected. It is suggested that in cases where a patch is being installed using an automatic distribution procedure, the procedure should be designed to instruct users to exit Notes/Domino before the patch is installed, if required the system should be rebooted after the patch is installed, and then Notes/Domino can be restarted. The following undesired behaviors can occur if the above steps are not followed:

If the Windows operating system is not restarted after the patch is installed, Notes/Domino will return the old time zone information for time zones other than the current time zone.

There have been reported cases where the Notes time zone setting is set to an unexpected value when the patch has been installed using an automatic distribution rollout while the Notes client is running.


After applying the operating system (OS) patch, some systems may need to be restarted. Refer to the following table based on manufacturer's recommendation: 



IBM AIX or Sun Solaris You are required to restart the OS. Microsoft Windows You are required to restart the OS. Linux It is recommended that you restart the OS. i5/OS An OS restart is not required. 

2. All Notes and Domino - Java/JVM 

You should update the time zone data that Java uses to ensure that Java code and Java applets that perform date or time calculations function as expected. You can use the IBM Java Time Zone Update Utility (JTZU) tool to do this. The JTZU tool is available at http://www.ibm.com/developerworks/java/jdk/dst/jtzu.html [http://www.ibm.com/developerworks/java/jdk/dst/jtzu.html]. For information relating to the JTZU tool, refer to Document #1249964, "Using the IBM Time Zone Update Utility for Java with Lotus software products." 
NOTE: See Section 4 below for updated information pertaining to Notes 9.0 and above clients. 


3. Additional requirements and steps specific to operating systems 

Note that in Notes/Domino 6.0 and later, the notes.ini parameter DSTLaw cannot be used to control the DST rules that Notes/Domino obeys (with the exception of Domino for IBM i). In these releases, the DST rule functionality works in conjunction with the operating system DST rule settings, and the DSTLaw parameter is reset to the current operating system rules when Domino is started. 

Microsoft Windows 
On Windows operating systems, be sure that the parameter, "UseNotesTimeZone=1", is either removed from the notes.ini or modified so that the parameter is set to 0 (zero). For details on setting up custom fields in a Desktop Policy, refer to Document #1196837, "Using a Desktop Policy to set notes.ini and Location parameters" . 

Timezone=4 
DST=1 
DSTLaw=9 1 7 4 4 7 

IBM i (formerly IBM i5/OS) 
Domino running on IBM i (System i) does not read time zone information from the operating system and relies on the DST, TimeZone, and DSTLaw notes.ini parameters for this information. The following parameter should be present in the notes.ini for a Domino server located in Santiago. Adjustments will need to be : 

Timezone=4 
DST=1 
DSTLaw=9 2 1 4 -1 1 

Note: The Timezone offset that Domino uses is the negative of what is displayed on the Windows operating system. For example for , the display value on the operating system is: 

(UTC-04:00) Santiago 

This correlates to TimeZone=4 in the notes.ini. 

It is still suggested that you apply any available i5/OS operating system updates for the revised DST rule changes to ensure that the operating systems and other applications function as expected. 

Non-Windows clients and UNIX/Linux servers 

Mac (8.0.1+, 8.5+) and Linux (8.0.2+, 8.5+) Notes clients rely on the operating system for all time zone rules. 

UNIX and Linux Domino releases rely on two sources for time zone information: 

- For the server's current time zone, time zone data is determined using the standard C library. This is used to populate the DST, TimeZone, and DSTLaw notes.ini parameters. Although it differs from platform to platform, the C standard library is often dependant on the Olson time zone data present on the system. Refer to your operating system vendor for specific details. 

- For cross time zone date/time calculations a table internal to Domino is used for time zone information. For example if a server was located in Chicago, and a time needed to be converted between Pacific SA Standard Time and U.S. Central Time needed to be performed, then this internal table would be referenced. 

Starting in Domino releases 8.0 you can use a text file (Timezones.txt) to add or customize time zone changes in this static table. This can be used as a work around as necessary. For this time zone change you would first modify the timezones.txt , and then add the following entry to the notes.ini of the Domino server: TimeZoneTable=<path>Timezones.txt (Note: The server must be rebooted for this to take effect.)to Notes 9.0 and above clients. 


4. All Notes clients 

Starting with the Standard Notes 9.0 client, the calendar grid now relies on Java time zone data stored inside the JVM. This means that it is no longer necessary to get a patch from IBM to change timezone rules. Specifically: 

Notes 9.0 and above for Mac, you will just need to update the JVM at the operating system level to the latest OS/JVM version that contains the new rules 

Notes 9.0 and above on Windows and Linux, you will need to run the JTZU utility to update the time zone rules on the Notes JVM. See specific instructions in this technote 1249964 on setting the JAVA_HOME directory 



Starting with the Standard Notes 8.0 client, the calendar grid relies on Java time zone data stored inside of the Expeditor/Eclipse framework. The ICU4J Expeditor plugin and the core JVM shipped with the Notes Client must be updated for calendar entries to appear correctly after the operating system time zone rules have been updated. 

After adjusting the operating system and configuring Notes, it may be necessary for users to reset the time zone setting within their calendar preferences. The setting is accessed through the action button Tools --> Preferences --> Calendar & To Do (tab) --> Scheduling (tab) --> Time Zone (keyword). If the entry reflects "Local Time", it does not need to be reset. 

If you set an optional secondary time zone display for your Calendar views, then this must be re-selected once the operating system and Notes have been updated. The menu selection is File --> Preferences --> User Preferences --> International --> Calendar --> Time Zone. 

In most cases, the user's Location document setting "Use operating system's time zone settings" will work as expected whether set to "Yes" or "No". If the value is set to "No" and you experience behavior where the time zone setting reverts to an unexpected value, then check the time zone setting in all of your Location documents to ensure the expected value is populated for all of them. 

Steps and behavior relative to Calendaring and Scheduling, and Resource Reservation functionality 


Systems updated to the new Daylight Saving Time rules 

Any existing calendar entry that falls outside the previous DST period will appear one hour off after the client operating system has been patched with the updated time zone rules and the Standard Client hotfix described in section 4 has been applied. 

Actions to take 
First, update your Notes client and Domino servers as noted above to apply the changed time zone rules. The sooner this is accomplished, the fewer entries will need updating later on. 

Once the systems have been updated, you will want to reschedule the affected calendar entries. Entries can either be manually rescheduled, or rescheduled using agents that IBM provides. 


How to manually reschedule Calendaring and Scheduling or Resource Reservation entries 
It is possible to highlight an entry and reschedule it manually using the action button Owner Actions --> Reschedule. 


IMPORTANT NOTE: IBM will not provide a LotusScript agent that will update any existing Notes calendar entries and resource reservations to conform to the new time zone rules. This is because the changes in Chile involve regions previously in a single time zone splitting into two different time zones after the change. Hence, the calendar entry itself does not contain any information about what part of the region the author lives in.