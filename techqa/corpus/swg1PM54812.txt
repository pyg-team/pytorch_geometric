Title: IBM PM54812: WEBSPHERE APPLICATION SERVER V6.1.X SERVICE INTEGRATION BUS MESSAGING ENGINE THROWS NULLPOINTEREXCEPTION - United States

Text:
  FIXES ARE AVAILABLE
6.1.0.47: WebSphere Application Server V6.1 Fix Pack 47 [http://www-01.ibm.com/support/docview.wss?uid=swg24035508]
6.1.0.45: Java SDK 1.5 SR14 Cumulative Fix for WebSphere Application Server [http://www-01.ibm.com/support/docview.wss?uid=swg24033270]
6.1.0.47: Java SDK 1.5 SR16 Cumulative Fix for WebSphere Application Server [http://www-01.ibm.com/support/docview.wss?uid=swg24035649]


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  WSVR0605W messages reporting hung threads are logged in the
   SystemOut.log of the server hosting the WebSphere Application
   Server v6.1.x Service Integration Bus messaging engine.
   The hung threads have the following stack:
   
   Thread-1:
   at java.lang.Object.wait(Native Method)
   at java.lang.Object.wait(Object.java:199)
   at com.ibm.ws.objectManager.ManagedObject.lock(ManagedObject.
   java:653)
   at com.ibm.ws.objectManager.ManagedObject.preDelete(Managed
   Object.java:1112)
   at com.ibm.ws.objectManager.InternalTransaction.delete
   (InternalTransaction.java:1596)
   at com.ibm.ws.objectManager.Transaction.delete(Transaction.
   java:481)
   at com.ibm.ws.sib.msgstore.persistence.objectManager.
   PersistableImpl.removeFromStore(PersistableImpl.java:553)
   at com.ibm.ws.sib.msgstore.persistence.objectManager.
   
   BatchingContextImpl.internalDelete(BatchingContextImpl.java:466)
   
   Thread-2:
   at java.lang.Object.wait(Native Method)
   at java.lang.Object.wait(Object.java:199)
   at com.ibm.ws.objectManager.ObjectManagerState$Checkpoint
   Helper.waitForCheckpoint(ObjectManagerState.java:3147)
   at com.ibm.ws.objectManager.ObjectManagerState$Checkpoint
   Helper.access$000(ObjectManagerState.java:2952)
   at com.ibm.ws.objectManager.ObjectManagerState.waitForCheck
   point(ObjectManagerState.java:1093)
   at com.ibm.ws.objectManager.ObjectManagerState.transaction
   Pacing(ObjectManagerState.java:2155)
   at com.ibm.ws.objectManager.ObjectManager.getTransaction
   (ObjectManager.java:452)
   at com.ibm.ws.sib.msgstore.persistence.objectManager.
   BatchingContextImpl.<init>(BatchingContextImpl.java:124)
   at com.ibm.ws.sib.msgstore.persistence.objectManager.
   PersistentMessageStoreImpl.prepare(PersistentMessageStore
   Impl.java:1267)
   at com.ibm.ws.sib.msgstore.transactions.XidParticipant.
   prepare(XidParticipant.java:367)
   
   Thread-3:
   at java.lang.Object.wait(Native Method)
   at java.lang.Object.wait(Object.java:231)
   at com.ibm.ws.sib.processor.utils.LockManager.lock(LockManager.
   java:105)
   at com.ibm.ws.sib.processor.impl.PtoPInputHandler.handle
   Message(PtoPInputHandler.java:526)
   at com.ibm.ws.sib.processor.impl.ProducerSessionImpl.send
   (ProducerSessionImpl.java:547)
   at com.ibm.ws.sib.api.jms.impl.JmsMsgProducerImpl.sendMessage
   (JmsMsgProducerImpl.java:1651)
   at com.ibm.ws.sib.api.jms.impl.JmsMsgProducerImpl.send
   (JmsMsgProducerImpl.java:1030)
   
   An FFDC is produced with the following Exception:
   
   Exception = java.lang.NullPointerException
   Source = com.ibm.ws.sib.msgstore.transactions.XidParticipant.
   prepare
   probeid = 1:431:1.57.1.12
   Stack Dump = java.lang.NullPointerException
   at com.ibm.ws.objectManager.ConcurrentLinkedList.resetTail
   SequenceNumber(ConcurrentLinkedList.java:235)
   at com.ibm.ws.objectManager.ConcurrentLinkedList.addEntry
   (ConcurrentLinkedList.java:503)
   at com.ibm.ws.sib.msgstore.persistence.objectManager.
   PersistableImpl.addToStore(PersistableImpl.java:354)
   at com.ibm.ws.sib.msgstore.persistence.objectManager.
   PersistableImpl.addToStore(PersistableImpl.java:228)
   at com.ibm.ws.sib.msgstore.persistence.objectManager.
   BatchingContextImpl.insert(BatchingContextImpl.java:192)
   at com.ibm.ws.sib.msgstore.task.AddTask.persist
   (AddTask.java:361)
   at com.ibm.ws.sib.msgstore.persistence.objectManager.
   PersistentMessageStoreImpl.prepare(PersistentMessage
   StoreImpl.java:1275)
   at com.ibm.ws.sib.msgstore.transactions.XidParticipant.
   prepare(XidParticipant.java:367)
   at com.ibm.ws.sib.msgstore.transactions.XidManager.
   prepare(XidManager.java:188)
   
   
    
   
   

LOCAL FIX
 *  Restart the JVM hosting the messaging engine
   
   
    
   
   

PROBLEM SUMMARY
 *  ****************************************************************
   * USERS AFFECTED:  Users of the default messaging provider     *
   *                  for IBM WebSphere Application Server using  *
   *                  a FileStore                                 *
   ****************************************************************
   * PROBLEM DESCRIPTION: NullPointerException during FileStore   *
   *                      operation                               *
   ****************************************************************
   * RECOMMENDATION:                                              *
   ****************************************************************
   A NullPointerException would occur when attempting to invoke a
   method on a variable after checking to ensure it was not null.
   This was due to a race condition in which the variable would
   become null after checking, but before accessing, because this
   work was not done under a lock.
   
   
    
   
   

PROBLEM CONCLUSION
 *  The code has been fixed by taking a copy of the variable
   before checking for null, to prevent the race condition from
   occurring.
   
   The fix for this APAR is currently targeted for inclusion in
   fix pack 6.1.0.45.  Please refer to the Recommended Updates
   page for delivery information:
   http://www.ibm.com/support/docview.wss?rs=180&uid=swg27004980 [http://www.ibm.com/support/docview.wss?rs=180&uid=swg27004980]
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   PM54812
   
   
 * REPORTED COMPONENT NAME
   PLAT MSG COM
   
   
 * REPORTED COMPONENT ID
   620600101
   
   
 * REPORTED RELEASE
   200
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2011-12-21
   
   
 * CLOSED DATE
   2012-01-31
   
   
 * LAST MODIFIED DATE
   2012-01-31
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   PLAT MSG COM
   
   
 * FIXED COMPONENT ID
   620600101
   
   

APPLICABLE COMPONENT LEVELS
 * R200 PSY
   UP