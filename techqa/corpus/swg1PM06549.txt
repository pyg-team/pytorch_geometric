Title: IBM PM06549: SQLCODE991 WHEN USING PGM IKJEFTXX AND EDITSIN ALSO ALLOCATED. - United States

Text:
z/os  A FIX IS AVAILABLE
Obtain the fix for this APAR.


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  Environment: WDI 3.3 for z/OS with current maintenance.
   Problem does not occur on 3.2.
   The following error is reported, and the job fails with RC=120,
   when running 3.3 under IKJEFT01 or IKJEFT1B and EDITSIN dd is
   also allocated:
   
    DSNT408I SQLCODE = -991, ERROR: CALL ATTACH WAS UNABLE TO
    ESTABLISH AN IMPLICIT CONNECT OR OPEN TO DB2. RC1=000C
    RC2=00F30006 DSNT418I SQLSTATE = 57015 SQLSTATE RETURN CODE
    DSNT415I SQLERRP = DSNACA00 SQL PROCEDURE DETECTING ERROR
    DSNT416I SQLERRD = 0 0 0 -1 0 0 SQL DIAGNOSTIC INFORMATION
    DSNT416I SQLERRD = X'00000000' X'00000000' X'00000000'
    X'FFFFFFFF' X'00000000' X'00000000' SQL DIAGNOSTIC INFORMATION
    Program failed attempting to initialize the Service Director.
    Job terminated. Return code = 4. Extended return code = 12.SQL
    code is -991
   The above condition is reproducible by support. The Customer's
   symptom is sporadic and issues the following variation to the
   DSNT408I error:
    DSNT408I SQLCODE = -991, ERROR: CALL ATTACH WAS UNABLE TO
    ESTABLISH AN IMPLICIT CONNECT OR OPEN TO DB2. RC1=0008
    RC2=00F30034 DSNT418I SQLSTATE = 57015 SQLSTATE RETURN CODE
    DSNT415I SQLERRP = DSNACA00 SQL PROCEDURE DETECTING ERROR
    DSNT416I SQLERRD = 0 0 0 -1 0 0 SQL DIAGNOSTIC INFORMATION
    DSNT416I SQLERRD = X'00000000' X'00000000' X'00000000'
   X'FFFFFFFF' X'00000000' X'00000000' SQL DIAGNOSTIC INFORMATION
   Test files on RALVSK:
   KIRKWOO.PMR03457.JOBLOG    -customer joblog
   KIRKWOO.PMR03457.MY.JCL    -L2 JCL for recreate
   KIRKWOO.PMR03457.MY.JOBLOG -L2 joblog
   KEYWORDS: -991 sql -911 sclcode-911 ikjeft01 ikjeft1b
   migrate migration migrating migrated JCL
   
   
    
   
   

LOCAL FIX
 *  Remove EDITSIN dd as it is not necessary when using IKJEFTxx
   TSO/DB2 attach programs, as this same info is provided in
   SYSTSIN.
   
   Or, add CAF(0) or CAF(N) to the existing record in dd EDITSIN.
   
   
    
   
   

PROBLEM SUMMARY
 *  SQLCODE -991 when using PGM IKJEFTxx and EDITSIN
   is also allocated.
   
   
    
   
   

PROBLEM CONCLUSION
 *  WDI uses the existence of file EDITSIN as a flag
   to indicate the default DB2 processing mode. If EDITSIN
   does not exist, then the processing mode will be DSN.
   If EDITSIN does exist, the processing mode will be CAF.
   The error occurs in FXXZDB.CDB2 in the new z/OS logic
   when a CAF connection is attempted even though IKJEFTxx
   already established a DSN connection.
   WDI will be changed to recognize program IKJEFTxx.
   If WDI is invoked via IKJEFTxx, then the processing mode
   will default to DSN.
   
   
    
   
   

TEMPORARY FIX
 *  Remove EDITSIN from JCL using PGM IKJEFTxx.
   
   
    
   
   

COMMENTS
 *  This is a WDI z/OS batch change only.
   
   
    
   
   

APAR INFORMATION
 * APAR NUMBER
   PM06549
   
   
 * REPORTED COMPONENT NAME
   WEBS DI ZOS
   
   
 * REPORTED COMPONENT ID
   5655I4003
   
   
 * REPORTED RELEASE
   330
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2010-02-01
   
   
 * CLOSED DATE
   2010-03-16
   
   
 * LAST MODIFIED DATE
   2010-05-04
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
    UK55250
   
   

MODULES/MACROS
 *  C        EDIRSSE
   
   
    
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   WEBS DI ZOS
   
   
 * FIXED COMPONENT ID
   5655I4003
   
   

APPLICABLE COMPONENT LEVELS
 * R330 PSY UK55250 [HTTPS://WWW14.SOFTWARE.IBM.COM/WEBAPP/SET2/ORDERMEDIA/SHOPCART?PTFS=UK55250]
   UP10/05/01 P F004
   
   

FIX IS AVAILABLE
 * SELECT THE PTF APPROPRIATE FOR YOUR COMPONENT LEVEL. YOU WILL BE REQUIRED TO SIGN IN. DISTRIBUTION ON PHYSICAL MEDIA IS NOT AVAILABLE IN ALL COUNTRIES.