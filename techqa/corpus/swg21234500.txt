Title: IBM About the limits for simultaneously mounting VOBs on a single host - United States

Text:
mount; vob; limitation; number; mount points; threshold; mp; exceeded; RATLC00588559; RATLC00685290; RATLC00697946; RATLC00686569; RATLC00588481; 1234500; PK42124 TECHNOTE (FAQ)

QUESTION
 Are there any limits for simultaneously mounting IBM Rational ClearCase VOBs on a single host based on the operating system? 

ANSWER
There is no platform-independent, ClearCase specific limit to the number of VOBs that it is possible to mount on a server. This is a platform-specific limitation.





VOB mount limit on HP-UX


VOB mount limit for IBM AIX


VOB mount limit for Solaris


VOB mount limit for Linux


VOB mount limit for Microsoft Windows







VOB mount limit on HP-UX 

You can have 8191 simultaneous mounted VOBs, and there can be 1024 simultaneous view-extended paths for each VOB. 


VOB mount limit for IBM AIX 

You can have 511 simultaneous mounted VOBs. 

There is an open change request (RFE) RATLC00697946 [http://www.ibm.com/developerworks/support/rational/rfe/execute?use_case=viewChangeRequest&CR_ID=1456] to raise the limit of mounted VOBs on AIX. This RFE has been resolved and the feature has been delivered in ClearCase 7.1 [http://www.ibm.com/support/docview.wss?uid=swg21265307]. 


VOB mount limit for Solaris 

The limit can extend up to 5119 if the mount points are not exported for non-ClearCase usage and 2560 if they are exported for non-ClearCase usage. 

There is a limit of 511 VOB mount points per major device and 256 distinct view-extended paths per VOB. However, ClearCase can detect when the number of VOBs (or views) is running up against the limit, and then move to a new major device number. 
 Back to top 



VOB mount limit for Linux 

The number of VOBs that can be mounted simultaneously under Linux is 1022, but this limit can be increased by configuring your MVFS. After you edit the mvfs_param.c file as described below for the kernel version of your system, rebuild and reinstall the MVFS or vnode module using the instructions contained in the README.txt file in the directory containing mvfs_params.c.  

2.4 kernels 

The number of VOBS that can be mounted can be increased by editing the value of mvfs_majdynmax in the file: 

/var/adm/clearcase/mvfs/vnode_src/mvfs_param.c.


The default value is 8. This is the maximum number of major device codes that the MVFS will allocate for VOB mount points. The MVFS reserves two minor device numbers, one for /view and one for /dev/mvfs from the first major device number. Each additional major device number will provide 128 additional VOB mounts. 

For 2.4 kernels the maximum number of VOBS that can be mounted is 

(mvfs_majdynmax * 128) - 2 

 

2.6 kernels 

The number of VOBS that can be mounted can be increased by editing the value of mvfs_majdynmax in the file: 

/var/adm/rational/clearcase/mvfs/mvfs_src/mvfs_param.c 

 

The default value is 2. This is the maximum number of major device codes that the MVFS will allocate for VOB mount points. 

The MVFS reserves two minor device numbers, one for /view and one for /dev/mvfs. Each additional major device number specified will yield 512 additional VOB mounts. 

So for 2.6 kernels, the maximum number of VOBs that can be mounted is 

(mvfs_majdynmax * 512) - 2



ADVISORY 

There are only 256 major device codes so discretion is advised in increasing the number used by the MVFS. 

 

Note: There is a condition that can cause a directory to not mount because it cannot find the VOB storage path name. When this happens, you will see the following error:


 * mntrpc_server: Error: mount.mvfs: Invalid argument Error: The VOB storage directory '/net/<host>/<vobstorage path>'
 * was not found.


If you wait a little while and try the mount again, the mount should succeed because the automounter will have flushed some of the entries. 
 Back to top 



VOB mount limit for Microsoft Windows 

There is a limit of 4095 VOBs that can be mounted on a Windows server. To take advantage of this limit, which was increased from 511 to 4095 VOBs, you need to be at or above the updates listed below for APAR PK42124 [http://www-1.ibm.com/support/docview.wss?rs=984&uid=swg1PK42124]. 

There are also factors to be considered when the system resources cannot handle the number of processes required; refer to technote 1142584 [http://www-1.ibm.com/support/docview.wss?&rs=984&uid=swg21142584] for more details. However, the limit on the number of processes on a single host can be circumvented by having multiple hosts act as your VOB server. 

Defect, APAR PK42124 [http://ibm.com/support/docview.wss?rs=984&uid=swg1PK42124], was opened to address the error below, which is reported when mounting >511 VOBs. 
cleartool: Error: Unable to mount: error detected by ClearCase subsystem 


Defect, APAR PK42124 [http://ibm.com/support/docview.wss?rs=984&uid=swg1PK42124] has been resolved in the following update(s):


7.0.1 

ClearCase Version 7.0.1.1 [http://www.ibm.com/support/docview.wss?&uid=swg21265307] 
7.0 ClearCase Version 7.0.0.2 [http://www.ibm.com/support/docview.wss?&uid=swg21265307] 
 Back to top 

RELATED INFORMATION
#About the Lock Manager [http://www.ibm.com/support/docview.wss?uid=swg21125258]
Number of VOBs stored on a single VOB server [http://www.ibm.com/support/docview.wss?uid=swg21146533]
About the MultiVersion File System (MVFS) [http://www.ibm.com/support/docview.wss?uid=swg21230196]


 



Cross reference information Segment Product Component Platform Version Edition Software Development Rational ClearCase MVFS