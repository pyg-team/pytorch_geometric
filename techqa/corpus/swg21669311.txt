Title: IBM Severe Defrag Messages on Notes Traveler Console when using Microsoft SQL Server - United States

Text:
 TECHNOTE (TROUBLESHOOTING)

PROBLEM
The following error messages appear on the Notes Traveler console and in the Traveler NTSError.log (/domino/data/IBM_TECHNICAL_SUPPORT/Traveler/logs). How can this error message be resolved? 

SEVERE main *system DefraggerCaller.executeQueries#-1 Exception Thrown: com.lotus.sync.db.PersistenceException: com.microsoft.sqlserver.jdbc.SQLServerException: Incorrect syntax near '.'.
com.lotus.sync.db.PersistenceException: com.microsoft.sqlserver.jdbc.SQLServerException: Incorrect syntax near '.'. 

Confirm if the following parameters are set in the server's notes.ini:
NTS_DEFRAG_INTERVAL_DAYS
NTS_INTERNAL_DEFRAG_DB_ON_STARTUP

If present, these parameters trigger a defrag at Traveler startup and will always fail when being executed against a MS SQL Server database. Currently the Traveler defrag code only supports Derby or the DB2 enterprise database. As the defrag function of the Traveler code is attempting to send DB2 specific maintenance commands, the MS SQL server does not understand and cannot execute them.


RESOLVING THE PROBLEM
To resolve the errors, remove the two parameters from the notes.ini: 

NTS_DEFRAG_INTERVAL_DAYS 
NTS_INTERNAL_DEFRAG_DB_ON_STARTUP 

This will prevent Traveler from attempting to execute the defrag commands on startup and will subsequently resolve the exceptions.

For enterprise database maintenance with MS SQL Server, it is recommended to perform maintenance on the database using the SQL Server tools instead of the defrag command supplied with Traveler. For more information on how to run maintenance on MS SQL Server and frequency, please consult the database server product documentation for more details as seen in the documentation here, Maintaining the Enterprise Database [http://www-10.lotus.com/ldd/dominowiki.nsf/xpDocViewer.xsp?lookupName=Administering+IBM+Notes+Traveler+9.0.1#action=openDocument&res_title=Maintaining_the_enterprise_database_A901&content=pdcontent].