Title: IBM Configuring Sterling Connect:Direct for HPNS to accept connections from a remote node with multiple source IP Addresses - United States

Text:
Sterling Connect:Direct HP NonStop Tandem IP addresses HPNS Netmap NDM.DOMAIN domain server TECHNOTE (FAQ)

QUESTION
 If a HP NonStop (HPNS) server has two possible IP addresses for a single remote Sterling Connect:Direct node (the remote node can send over two different Lan connections, each with different addresses) how do I configure my local node to accept calls from either IP address for a single adjacent node? 

ANSWER
Sterling Connect:Direct HP NonStop 3.4 and later introduced a new type of node record called domain nodes. They are of type NDM.DOMAIN and are used only for inbound connection requests. To activate the use of domain records you must specify a new INITPARM parameter: DOMAINSERVER YES.
This will allow you to use a combination of an IP addresses and a mask values to specify a TCP domain from which you will accept connections, the domain can be as open or restrictive as you like.

Below is an example netmap entry to allow anyone to connect to your Sterling Connect:Direct server:


CD.3.>sel net adj do*


===============================================================================
3.4.01 S E L E C T N E T W O R K M A P
===============================================================================


Adjacent Node => DOMAIN-ALL
Node Type => NDM.DOMAIN
Maxretry => 7
IPaddr => 0.0.0.0
IPMask => 0.0.0.0
Description => "This entry allows connections from anyone."
LU List => \LU.TCP01 \LU.TCP02
\LU.TCP03 \LU.TCP04


_______________________________________________________________________________


If the origination address of an inbound connection request is not found anywhere else in the netmap, this entry would allow it to be accepted and processed via one of the related LUs.
The address and mask field can also specify more restrictive domains:


===============================================================================
3.4.01 S E L E C T N E T W O R K M A P
===============================================================================


Adjacent Node => PARTS-DEPT
Node Type => NDM.DOMAIN
Maxretry => 7
IPaddr => nnn.nnn.nnn.0
IPMask => 255.255.255.0
LU List => \LU.TCP01 \LU.TCP02
\LU.TCP03 \LU.TCP04


_______________________________________________________________________________


The above entry would allow connections from anyone within the IP Address range nnn.nnn.nnn.1 to nnn.nnn.nnn.254. This can greatly simplify netmap administration when the Tandem acts as a data collector for a large number of nodes (for instance Sterling Connect:Direct for Microsoft Windows) that are all in one area of a company (same domain), or when such nodes do not have static IP addresses. You do not have to maintain an entry for every adjacent node in the group, just one domain record.

We also now have netmap checking for incoming TCP connection requests. When it is ON, the node name in the first FMH68 that arrives must have a matching entry in the netmap. The originating address does not have to match that entry, only the name.

For more information on how domain records work in conjunction with netmap checking, and to view a flow chart that shows how an incoming connection request is processed refer to the "Defining Adjacent Node Records for TCP/IP Connections" section of the Sterling Connect:Direct 3.4.01 Installation Manual.

 

HISTORICAL NUMBER
 PRI28272 SCI90546