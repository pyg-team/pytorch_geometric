Title: IBM ICC for SAP java.lang.OutOfMemoryError error on document retrieval from IBM Filenet P8 Archive - United States

Text:
 TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 When attempting to retrieve items using IBM Content Collector for SAP (ICC for SAP), a return code 
of -10002 is generated and the retrieval fails. 

SYMPTOM
Analysis of the ICC trace log (icc_trace.log) shows: 

The return code from the archive system is -10002. 
HTTP/1.0 500 Internal Server Error 
Sent 241 bytes of header data 
********** Leaving HTTP function 'get'
HTTP request <get> failed with response status code: <500>

followed later by an exception:
java.lang.OutOfMemoryError


CAUSE
The system Java Virtual Machine (JVM) is running out of memory. There may be too many ICC P8 agents started.


DIAGNOSING THE PROBLEM
Every ICC P8 agent is merely a thread in one single, global ICC P8 agent process. Starting a lot of agents will use up a lot of memory and the JVM performance suffers as a result. Generally you should start as many agents as you expect to have parallel calls to the archive, so four agents may be enough.



RESOLVING THE PROBLEM
 

 * Reduce the number of ICC P8 Agents to around 10. This should be enough for the reported load. 
 * Increase the maximum heap size for the ICC P8 Agent's memory.
   
   You can increase the maximum heap size by defining:
   JAVA_OPTIONS -Xmx<size>
   in the archint.ini file. 


(Note that there is no space between -Xmx and the value itself. You should refer to the java specification to tune this value according to the system.)  

 * For 32 bit servers, try 1500M as 'size' parameter. For 64 bit servers you can go up to 3000M.