Title: IBM Upgrading Rational Web Platform Server to 7.0.1 on UNIX or Linux fails - United States

Text:
1265626; RATLC01029304; ClearCase; Installation; AIX; Solaris; 7.0.1; upgrade; PK49278; com.ibm.ws.install.ni.ismp.actions.SetExitCodeAction; com; ibm; ws; install; ni; ismp; actions; SetExitCodeAction TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 This technote explains why the error, ERROR: /opt/rational/common/rwp/IHS/updateinstaller/update failed, might occur when upgrading the IBM® Rational® Web Platform (RWP) server to version 7.0.1 on UNIX® or Linux®. 

SYMPTOM
 

Attempts to upgrade Rational ClearCase® or Rational ClearQuest® to 7.0.1 fails during the upgrade process. 

The install_release fails with the following errors and exits prematurely:

IHS Fix Pack update in progress....; This may take a while.
ERROR: /opt/rational/common/rwp/IHS/updateinstaller/update failed
Updated: /var/adm/rational/common/rwp/conf/httpd.conf
Updated: /var/adm/rational/common/rwp/conf/ssl.conf

ERROR: /opt/rational/common/rwp/IHS/updateinstaller/update failed
...

At the end of the error the following is reported:

Stopping prematurely due to encountered errors.
FINAL:host1 Errors:1 Warnings:0


CAUSE

There are a few potential causes to investigate:

Cause 1

The errors may be due to insufficient free disk space on the system.


Cause 2

This error can also occur if the path statement does not include /sbin/swreg and /sbin/swinstall on HP-UX® systems.


Cause 3

This error can also occur if /usr/sbin is in not your PATH.


Cause 4

The logic within the install_release script does not take into account any leftover httpd processes that may remain from a failed stop of RWP. As a consequence, either the IHS or the Embedded Express updates will fail.

Defect APAR PK49278 has been opened to address this issue.


Cause 5

The PATH EV is pointing to non-standard zip utilities (tar, unzip, zip, ...)


DIAGNOSING THE PROBLEM
 

For information on installing ClearCase, refer to IBM Rational ClearCase Installation and Upgrade Guide [http://publib.boulder.ibm.com/infocenter/cchelp/v7r1m2/topic/com.ibm.rational.clearcase.books.cc_ms_install_ux.doc/cc_ms_install.htm]. 

 

Diagnosing: Disk Space 

Checking through the IBM HTTP Server (IHS) install logs you may find errors related to insufficient disk space as in the examples below:

Example 1: 

From /opt/rational/common/rwp/IHS/logs: 


There is insufficient free disk space on the system: 

/opt/rational/common/rwp/IHS:
Required: 30 MB
Available: 720 MB

/tmp/:
Required: 250 MB
Available: 190 MB 

Please ensure there is enough free disk space on all required filesystems and retry the operation.

(Jul 17, 2007 5:33:23 PM), UpdateInstaller, com.ibm.ws.install.ni.ismp.actions.SetExitCodeAction, msg1, CWUPI0000I: EXITCODE=1

(Jul 17, 2007 5:33:23 PM), UpdateInstaller, com.ibm.ws.install.ni.ismp.actions.ISMPLogSuccessMessageAction, msg1, INSTCONFFAILED

The above error indicates that the/tmp directory does not have enough space.


Example 2: 

From /opt/rational/common/rwp/EmbeddedExpress/logs

There is insufficient free disk space on the system: 

 

/opt/rational/common/rwp/EmbeddedExpress: 

Required: 400 MB 

Available: 351 MB 

 

/tmp/: 

Required: 250 MB 

Available: 1021 MB 

 

Please ensure there is enough free disk space on all required filesystems and retry the operation. 

 

(Jan 27, 2009 3:47:50 PM), UpdateInstaller, 

com.ibm.ws.install.ni.ismp.actions.SetExitCodeAction, msg1, CWUPI0000I: 

EXITCODE=1







Diagnosing: Lingering RWP Processes Check your list of processes to see if any RWP processes are still running.

ps -ef | grep rwp 
/rtl/inst/rational/common/rwp/EmbeddedExpress/updateinstaller/./../java/bin/java -cp :update.jar: -Dtemp.dir=/tmp/ -Dis.jvm.home=/rtl/inst/rational/common/rwp/EmbeddedExpress/updateinstaller/./../java -Dis.jvm.temp=1 -Dis.media.home= -Dis.launcher.file=/rtl/inst/rational/common/rwp/EmbeddedExpress/updateinstaller/./update -Dis.jvm.file=/tmp/isjVk8Jqb -Dis.external.home=/rtl/inst/rational/common/rwp/EmbeddedExpress/updateinstaller/. -Xms48m -Xmx384m run -silent 


It is also important to check /opt/rational/common/rwp/EmbeddedExpress/logs as this is another point that can fail due to space issues.

If an embedded express update fails, you should check the following log file: /opt/rational/common/rwp/EmbeddedExpress/logs/update/tmp/updatelog.txt


RESOLVING THE PROBLEM
 

 

Solution for Cause 1

Resolve any disk space issues and reinstall.


 * Review the space requirements for ClearCase [http://www.ibm.com/support/knowledgecenter/SSSH27_8.0.1/com.ibm.rational.clearcase.help.ic.doc/helpindex_clearcase.htm] in the Install Guide found in the Information Center. 
 * Review the space requirements for ClearQuest [http://www.ibm.com/support/knowledgecenter/SSSH5A_8.0.1/com.ibm.rational.clearquest.help.ic.doc/helpindex_clearquest.htm] in the Install Guide found in the Information Center.

Consult your system administrator or operating system vendors reference manual for assistance.


Solution for Cause 2

Resolve any path issues on HP and reinstall.
Ensure that /sbin/swreg and /sbin/swinstall exist on HP systems.


Consult your system administrator or operating system vendors reference manual for assistance.


Solution for Cause 3

Ensure that /usr/sbin is in your PATH and reinstall. 

Consult your system administrator or operating system vendors reference manual for assistance.


Solution for Cause 4

Defect APAR PK49278 has been resolved in the following ClearCase updates:



ClearCase 7.0.1 Fix Pack 7.0.1.4 ClearCase 7.0.0 Fix Pack 7.0.0.5  * 
   
 * WORKAROUND:
 * 
 * 
 * 
 * 
 * 
 * install_release -force
 * 
 * 
 * 
 * ClearCase example:
 * 
 * 
 * Note: 
 * 
 * 
 *  Run install_release, select 'Local Deinstall' (option 4), then proceed to deinstall the software.
   Run install_release again, choose your normal installation options, then select 'ClearCase Full Function Installation' (option 4) in the list of components, but only that option and proceed to install.
   Run install_release -force this time, and on to all of your normal options and components. Now, the error will not occur when you proceed. 
 * 
 * Note
 * 




Solution for Cause 5 

Make sure that PATH is pointing to standard binaries (provided with the OS). 

Examples on Solaris: 
 * 
 * 
 * root@nismaster # which tar 
 * /usr/sbin/tar 
 *  
 * Incorrect: 
 * userx@nisslave % which tar 
 * /usr/local/bin/tar

RELATED INFORMATION
 Upgrading IBM HTTP server on a UNIX CC server [http://www.ibm.com/support/docview.wss?uid=swg21259694]
s390 install fails with EmbeddedExpress error [http://www.ibm.com/support/docview.wss?uid=swg21272178]