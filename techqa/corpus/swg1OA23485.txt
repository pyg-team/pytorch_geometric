Title: IBM OA23485: ABSTRACT: STALE EPHEMERAL LB ENTRIES LEAD TO CONNECTION ERRORS - United States

Text:
z/os  A FIX IS AVAILABLE
Obtain the fix for this APAR.


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  Customer Rep: Fission Lin
   
   Problem: Agents connect to remote TEMS 3 not viewed
   
   Action Taken:
   
   Please open an apar with the following severity and information:
   
   *===============================================================
   ==
   Compid:  5724C04MS
   
   Abstract: stale ephemeral lb entries lead to connection errors.
   
   Environment:
   All supported Tivoli platforms at tepfp5, d7121a.
   
   Problem Description:
    a remote TEMS attached via ephemeral pipe will
   leave "stale" GLB entries (of the form "0.0.0.n")
   at the HUB if the remote TEMS re-registers without
   an intervening normal shutdown (where it explicitly
   unregisters the problem entries).  Once this occurs, the
   HUB will find the stale entries first, and cause distributed
   requests to that REMOTE to fail with connection errors even
   though the remote and any attached agents appear online.
   
   Detailed Recreation Procedure:
   Connect a remote TEMS to a HUB using the ephemeral keyword
   (KDE_TRANSPORT=...IP.PIPE EPHEMERAL:Y ...) in the configuration
   of the remote TEMS.  Once the remote TEMS has connected to the
   HUB and registered with the GLB, force a situation distribution
   to that remote TEMS.  Having then a situation distributed to the
   remote TEMS, crash that remote TEMS and restart it.  Once
   restarted, the HUB will experience comm failures trying to
   again distribute a situation to that remote TEMS.  The comm
   errors will be associated with the old remote TEMS address.
   
   Related Files and Output:
   The RAS1 log for the HUB will show communication failures to the
   remote TEMS with an address with an ephemeral address (of the
   form "0.0.0.n") which is not the address registered by that
   remote:
   
   KDSRU001   Remote request communication failure to destination
              *HUB ip.pipe:0.0.0.1.1918..
   
   Approver:
   nic
   *===============================================================
   ==
   
   Action Planned: Proceed with defect resolution.
   
   
    
   
   

LOCAL FIX
 *  n/a
   
   
    
   
   

PROBLEM SUMMARY
 *  ****************************************************************
   * USERS AFFECTED: All ITMS/ENGINE users.                       *
   ****************************************************************
   * PROBLEM DESCRIPTION: STALE EPHEMERAL LB ENTRIES LEAD TO      *
   *                      CONNECTION ERRORS                       *
   ****************************************************************
   * RECOMMENDATION: Apply the PTF.                               *
   ****************************************************************
   A remote TEMS attached via ephemeral pipe will leave "stale"
   GLB entries (of the form "0.0.0.n") at the HUB if the remote
   TEMS re-registers without an intervening normal shutdown
   (where it explicitly unregisters the problem entries). This
   typically occurs when a remote TEMS crashes after connecting
   to the HUB. Once this crash happens, the HUB will find old,
   stale remote TEMS entries first, and cause distributed
   requests to that REMOTE to fail with connection errors even
   though the remote and any attached agents appear online.
   
   
    
   
   

PROBLEM CONCLUSION
 *  Code in Basic Services was changed to remove all ephemeral
   addresses on behalf of the remote TEMS when NETWORK and
   INTERFACE compare flags are set on the same call. Code in the
   TEMS was changed to (re)register the remote TEMS address with
   each heartbeat, thus maintaining currency.
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   OA23485
   
   
 * REPORTED COMPONENT NAME
   CT/ENGINE
   
   
 * REPORTED COMPONENT ID
   5608A41CE
   
   
 * REPORTED RELEASE
   610
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2007-12-11
   
   
 * CLOSED DATE
   2007-12-11
   
   
 * LAST MODIFIED DATE
   2009-05-20
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
    OA22688 [http://www-01.ibm.com/support/docview.wss?uid=swg1OA22688]
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

MODULES/MACROS
 *  KDE1LNKP KLXN
   
   
    
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   CT/ENGINE
   
   
 * FIXED COMPONENT ID
   5608A41CE
   
   

APPLICABLE COMPONENT LEVELS
 * R610 PSY UA38475 [HTTPS://WWW14.SOFTWARE.IBM.COM/WEBAPP/SET2/ORDERMEDIA/SHOPCART?PTFS=UA38475]
   UP07/12/15 P F712
   
   

FIX IS AVAILABLE
 * SELECT THE PTF APPROPRIATE FOR YOUR COMPONENT LEVEL. YOU WILL BE REQUIRED TO SIGN IN. DISTRIBUTION ON PHYSICAL MEDIA IS NOT AVAILABLE IN ALL COUNTRIES.