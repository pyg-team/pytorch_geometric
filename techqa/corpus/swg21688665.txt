Title: IBM Support for Oracle 12c in IBM Content Manager Enterprise Edition Version 8.5 Fix Pack 2 or later - United States

Text:
12c Oracle TECHNOTE (FAQ)

QUESTION
 Content Manager Enterprise Edition Version 8.5 Fix Pack 2 or later supports Oracle 12c. 
How do I perform a fresh installation of Content Manager Enterprise Edition version 8.5 fix pack 2 or later with Oracle 12c database
How do I upgrade Oracle database engine from version 11g to Oracle 12c in a Content Manager Enterprise Edition Version 8.5 Fix Pack 2 (FP2) or later environment?


CAUSE
Support for Oracle 12c databases was added in Content Manager Enterprise Edition (CM) version 8.5 fix pack 2

ANSWER

Fresh installation of IBM Content Manager Enterprise Edition Version 8.5 Fix Pack 2 or later with Oracle 12c 

Important information about the Oracle 12c and Oracle patches required: 

 * Oracle 12.1.0.1  * For Linux x86_64, Solaris, or AIX: Patches 18169693, 19920266, 20051833. 
    * Windows: Oracle windows bundle patch 12.1.0.1.19 (patch 20912366).
   
   
 * Oracle 12.1.0.2  * For Linux x86_64 or AIX: Patches 19920266, 20051833. 
    * For Solaris: 12.1.0.2.180116 BP (patch 27010930). 
    * Windows: Oracle windows bundle patch 12.1.0.2.180228 (patch 27281452).
   
   


1) Preparing Oracle for a Content Manager EE installation [http://www-01.ibm.com/support/knowledgecenter/SSRS7Z_8.5.0/com.ibm.installingcm.doc/dcmoc100.htm?lang=en-us&cp=SSRS7Z_8.5.0] 
 * NOTE:
 *  Content Manager EE provides DBCA template files are for minimum recommended database instance settings. In all cases, your DBA should closely monitor your Content Manager EE server database environment and adjust instance settings (for example the value of sga_target) to optimize your database workload. Using Oracle Database Assistant to create new Oracle 12.1.0.2 databases on Oracle Solaris, error about incorrect max-shm-memory may happen. Your DBA should follow Oracle Doc ID 1584995.1 for more information. 


2) Installing and configuring Content Manager Enterprise Edition 8.5 with 12c  *  For Content Manager Enterprise Edition Version 8.5 FP2 only: Set the system variable IBM_CM_ALLOW_ORACLE_12C=TRUE Run the Content Manager Enterprise Edition 8.5 GA installer -- do not choose the option to configure Content Manager at this time Run the Content Manager Enterprise Edition 8.5 FP2 (or higher) installer -- after installation completes, choose the option to configure CM 


Upgrading to IBM Content Manager Enterprise Edition Version 8.5 Fix Pack 2 or later with Oracle 12c If you are still using Oracle 11gR2 and you upgraded to Content Manager Enterprise Edition Version 8.5 FP2 or later, you can upgrade to Oracle 12c and reconfigure your Version 8.5 FP2 or later system to use the new Oracle database. 

Requirement: Your Content Manager Enterprise Edition system must be at version 8.5 FP2 or later, and it must be working properly. Your Oracle version must be at Oracle Version 11gR2. 


Important information about the Oracle 12c and Oracle patches required: 


 * Oracle 12.1.0.1  * For Linux x86_64, Solaris, or AIX: Patches 18169693, 19920266, 20051833. 
    * Windows: Oracle windows bundle patch 12.1.0.1.19 (patch 20912366).
   
   
 * Oracle 12.1.0.2  * For Linux x86_64 or AIX: Patches 19920266, 20051833. 
    * For Solaris: 12.1.0.2.180116 BP (patch 27010930). 
    * Windows: Oracle windows bundle patch 12.1.0.2.180228 (patch 27281452).
   
   


Complete the following steps to configure your Content Manager Enterprise Edition system to work correctly with Oracle 12c: 1. Validate that Content Manager Enterprise Edition Version 8.5 FP2 or later still works on Oracle 11gR2, and back up this configuration. 

2. Stop all library server and resource manager processes. 

3. Ensure that the listener and all of the connections to the Content Manager Enterprise Edition servers are stopped but that your Oracle instance is started. Quiesce all user activity or stop all user sessions on the Content Manager Enterprise Edition library server database, whether or not Oracle indicates that they are active. Additionally, extproc processes might still be alive even after user sessions are stopped. Stop them before installing the fix pack by completing the following steps: 

Option Description AIX  * 
 *  
   /usr/bin/ps -ef | grep -i oracle SID where SID is associated with your Content Manager Enterprise Edition library server database. The process ID number is displayed in the second column.
   
   
 * 
 * 
 *  
   /usr/bin/kill -9 processID where processID is the process ID number.
   
   

Solaris or Linux x86_64  * 
 *  
   /usr/ucb/ps -auxww | grep -i oracle SID where SID is associated with your Content Manager Enterprise Edition library server database. The process ID number is displayed in the second column.
   
   
 * 
 * 
 *  
   /usr/bin/kill -9 processID where processID is the process ID number.
   
   

Windows  * 
 * f. Click Processes. 
 * g. Click each process with the name extproc.exe and click End Process.

4. Upgrade your Oracle database from 11gR2 to 12c:  * 
 * 
 * b. Back up the working directory. The default directory is /home/ibmcmadm on UNIX and %IBMCMROOT%\cmgmt on Windows. 
 * c. Recommendation: Back up your Content Management environment (located at IBMCMROOT). 
 * d. Install Oracle 12c. After successfully installing Oracle, make sure to run the Oracle Database Upgrade Assistant (DBUA) tool on the Oracle database instance or instances containing a Content Manager Enterprise Edition database, for example, a Content Manager Enterprise Edition library server, or resource manager. See Oracle Database Server documentation for details. 
 * e. Recommendation: Set the resource manager database's sga_target to at least 330 MB. 
 * f. Back up the Oracle 12c databases.


5. Configure your Oracle listener for Oracle 12c by completing the following steps:  * 
 * 
 * Creating a dedicated Oracle listener for use with Content Manager Enterprise Edition
 * 
 * Oracle 12c Net Administrator's Guide
 * 
 * b. Verify that your 12c database connections are working by starting the listener and testing the listener by starting SQL*Plus with a valid SQL*Plus connection string for a Content Manager Enterprise Edition repository, such as library server or resource manager, by using the new listener. For example, enter the following command to get the database service name: 
 * lsnrctl status CM_LISTENER_NAME
   For example, enter the following SQL command to test the library server:
   sqlplus icmadmin/password@//myhost.mydomain.com:1522/icmnlsdb.mydomain.com
   
   For example, enter the following SQL command to test the resource manager:
   sqlplus rmadmin/password@//myhost.mydomain.com:1522/rmdb.mydomain.com
   If the new listener fails to start, view your listener log file. Check the listener template for any discrepancies between the tnsnames.ora, listener.ora, and sqlnet.ora files. Verify that the three files are synchronized. 
 * c. If the profile of the user that starts the Oracle listener sets Oracle environment variables, such as ORACLE_HOME, you might need to update the variables to point to Oracle 12c instead unless you already defined these variables explicitly as part of a dedicated Content Manager Enterprise Edition listener definition: 
 *  AIX IBMCMROOT, LIBPATH, PATH Solaris or Linux x86_64 IBMCMROOT, LD_LIBRARY_PATH, PATH Windows IBMCMROOT, PATH 

6. For Content Manager Enterprise Edition Version 8.5 FP2 only: Set the system variable IBM_CM_ALLOW_ORACLE_12C=TRUE 7. Run the configuration manager with the cmcfgmgr_CM command in the IBMCMREPO/fixpack level/bin directory, for example, /opt/IBM/cmrepository/8.5.00.200/bin. Select the Oracle 12c product directory to reconfigure Content Manager Enterprise Edition Version 8.5 Fix Pack 2 for use with Oracle 12c.