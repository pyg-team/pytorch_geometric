Title: IBM JR53138: UPGRADEPROCESSDATA FAILS WITH BADSQLGRAMMAREXCEPTION / SQLSYNTAXERROREXCEPTION - United States

Text:
  DIRECT LINKS TO FIXES
8.0.1.3-WS-BPM-IFJR53138 [http://www.ibm.com/support/fixcentral/quickorder?product=ibm%2FWebSphere%2FIBM+Business+Process+Manager+Standard&fixids=8.0.1.3-WS-BPM-IFJR53138&source=SAR]
Version 8.5 Refresh Pack 7 for the IBM Business Process Manager products [http://www-01.ibm.com/support/docview.wss?uid=swg24041575]


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  When upgrading from BPM v8.0.1.2 to v8.0.13, the
   upgradeProcessData command fails if you are using DB2 v9.5.0.7
   or a later fixpack.
   
   com.lombardisoftware.tools.dbupgrade.ant.UpgradeDBHelperTask -
   PreparedStatementCallback; bad SQL grammar [select propvalue
   from
   lsw_system_schema where upper(propname)=upper(?)]; nested
   exception is
   com.ibm.db2.jcc.am.SqlSyntaxErrorException: DB2 SQL Error:
   SQLCODE=-418,
   SQLSTATE=42610, SQLERRMC=null, DRIVER=3.61.65
   org.springframework.jdbc.BadSqlGrammarException:
   PreparedStatementCallback; bad SQL grammar [select propvalue
   from
   lsw_system_schema where upper(propname)=upper(?)]; nested
   exception is
   com.ibm.db2.jcc.am.SqlSyntaxErrorException: DB2 SQL Error:
   SQLCODE=-418,
   SQLSTATE=42610, SQLERRMC=null, DRIVER=3.61.65
    at
   org.springframework.jdbc.support.SQLStateSQLExceptionTranslator.
   translat
   e(SQLStateSQLExceptionTranslator.java:111)
    at
   org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTransla
   tor.tran
   slate(SQLErrorCodeSQLExceptionTranslator.java:322)
    at
   org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.
   java:607
   )
    ...
   
   Caused by: com.ibm.db2.jcc.am.SqlSyntaxErrorException: DB2 SQL
   Error:
   SQLCODE=-418, SQLSTATE=42610, SQLERRMC=null, DRIVER=3.61.65
    at com.ibm.db2.jcc.am.ed.a(ed.java:676)
    at com.ibm.db2.jcc.am.ed.a(ed.java:60)
    ...
   
   
    
   
   

LOCAL FIX
 *  N/A
   
   
    
   
   

PROBLEM SUMMARY
 *  When you run the DBUpgrade command, the upgrade fails and you
   receive an exception similar to the following exception when you
   use IBM DB2 V9.5:
   
    SEVERE:com.lombardisoftware.tools.dbupgrade.ant.UpgradeDBHelper
   Task - Exception while preparing for database upgrade
       SEVERE:
   com.lombardisoftware.tools.dbupgrade.ant.UpgradeDBHelperTask -
   Check the log files for details
    SEVERE:
   com.lombardisoftware.tools.dbupgrade.ant.UpgradeDBHelperTask -
   PreparedStatementCallback; bad SQL grammar [select propvalue
   from lsw_system_schema where upper(propname)=upper(?)];
     nested exception is
   com.ibm.db2.jcc.am.SqlSyntaxErrorException:  DB2 SQL Error:
   SQLCODE=-418, SQLSTATE=42610, SQLERRMC=null, DRIVER=3.61.65
   
   
    
   
   

PROBLEM CONCLUSION
 *  A fix is available for IBM BPM V8.0.1.3 that ensures running the
   DBUpgrade command is successful even when you have DB2 V9.5.
   
   On Fix Central (http://www.ibm.com/support/fixcentral), search
   for JR53138:
   
   1. Select IBM Business Process Manager with your edition from
   the product selector, the installed version to the fix pack
   level, and your platform, and then click Continue
   2. Select APAR or SPR, enter JR53138, and click Continue.
   
   When you download fix packages, ensure that you also download
   the readme file for each fix. Review each readme file for
   additional installation instructions and information about the
   fix
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   JR53138
   
   
 * REPORTED COMPONENT NAME
   BPM ADVANCED
   
   
 * REPORTED COMPONENT ID
   5725C9400
   
   
 * REPORTED RELEASE
   801
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2015-04-22
   
   
 * CLOSED DATE
   2015-07-23
   
   
 * LAST MODIFIED DATE
   2015-07-23
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   BPM ADVANCED
   
   
 * FIXED COMPONENT ID
   5725C9400
   
   

APPLICABLE COMPONENT LEVELS
 * R801 PSY
   UP