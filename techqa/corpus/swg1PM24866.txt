Title: IBM PM24866: CSQX541E "INVALID CCSIDS FOR DATA CONVERSION" WHEN MQ CLIENT APPLNAME ( PATH AND EXECUATBLE NAME) HAS DBCS. - United States

Text:
z/os  A FIX IS AVAILABLE
Obtain the fix for this APAR.


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  Customer use MQ Clinet on Windows. The Clinet application is
   exist on DBCS (Double Byte Character Set) directory and
   application name is also DBCS.  q1
    MQ client code send the MQCONN request with DBCS ApplName.
   ( The rightmost 28 characters of the fully-qualified name of
     the executable.)
   MQ client CCSID is 932 and Host MQ CCSID is 930 in this case.
   When MQ try to convert the ApplName, CSQATR64 detect the
   .
   ***Following note add by Change Team***
   This problem may also occur for receiver or requestor channels.
   
   
    
   
   

LOCAL FIX
 *  Does not use DBCS for path and application name for the client
   application.
   
   
    
   
   

PROBLEM SUMMARY
 *  ****************************************************************
   * USERS AFFECTED: All users of WebSphere MQ for z/OS Version 7 *
   *                 Release 0 Modification 1                     *
   ****************************************************************
   * PROBLEM DESCRIPTION: Client channel fails to start, getting  *
   *                      error message                           *
   *                      +CSQX541E cpf CSQXRESP Invalid CCSIDs   *
   *                      for data conversion                     *
   ****************************************************************
   * RECOMMENDATION:                                              *
   ****************************************************************
   CSQX541E is occurring when rriConvertValidate is trying to
   convert the QMgrName and ApplName fields sent in the
   rfpTST_MQCONN flow. The problem is that the ApplName contains
   mixed SBCS/DBCS characters. This causes SO/SI to be inserted,
   which means that CSQATRAN returns CSQA_CONVERTED_BUFFER_TOO_BIG,
   and hence xcsConvertString returns rrcE_INVALID_CCSID, which
   results in the CSQX541E. It is impossible to convert mixed
   SBCS/DBCS characters in place in this way, it requires the data
   to be copied out to a temporary buffer first.
   A similar problem exists for the PutApplName conversion in
   convertMQMD resulting in the same error.
   
   
    
   
   

PROBLEM CONCLUSION
 *  rriConvertValidate no longer converts the ApplName in place and
   tolerates any conversion error, such as exceeding the buffer
   length (resulting in truncation).
   Similarly convertMQMD converts PutApplName in the same way and
   tolerates conversion errors.
   010Y
   CMQXRMCV
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   PM24866
   
   
 * REPORTED COMPONENT NAME
   WMQ Z/OS V7
   
   
 * REPORTED COMPONENT ID
   5655R3600
   
   
 * REPORTED RELEASE
   010
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2010-10-20
   
   
 * CLOSED DATE
   2010-11-01
   
   
 * LAST MODIFIED DATE
   2011-06-16
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
    UK61744 PM29615 [http://www-01.ibm.com/support/docview.wss?uid=swg1PM29615] IV02028 [http://www-01.ibm.com/support/docview.wss?uid=swg1IV02028]
   
   

MODULES/MACROS
 *  CMQXRMCV
   
   
    
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   WMQ Z/OS V7
   
   
 * FIXED COMPONENT ID
   5655R3600
   
   

APPLICABLE COMPONENT LEVELS
 * R010 PSY UK61744 [HTTPS://WWW14.SOFTWARE.IBM.COM/WEBAPP/SET2/ORDERMEDIA/SHOPCART?PTFS=UK61744]
   UP10/11/06 P F011
   
   

FIX IS AVAILABLE
 * SELECT THE PTF APPROPRIATE FOR YOUR COMPONENT LEVEL. YOU WILL BE REQUIRED TO SIGN IN. DISTRIBUTION ON PHYSICAL MEDIA IS NOT AVAILABLE IN ALL COUNTRIES.