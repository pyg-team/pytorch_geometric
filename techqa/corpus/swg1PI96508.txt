Title: IBM PI96508: OIDC RP MAY NOT CONNECT TO TOKEN ENDPOINT DUE TO SSL HANDSHAKE_FAILURE - United States

Text:
 SUBSCRIBE TO THIS APAR
By subscribing, you receive periodic emails alerting you to the status of the APAR, along with a link to the fix after it becomes available. You can track this item individually or track all items by product.

Notify me when this APAR changes.

Notify me when an APAR for this component changes.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  The OpenID Connect TAI may get an SSL handshake_failure when
   attempting to connect to the token endpoint.
   
   
    
   
   

LOCAL FIX
 *  N/A
   
   
    
   
   

PROBLEM SUMMARY
 *  ****************************************************************
   * USERS AFFECTED:  IBM WebSphere Application Server users of   *
   *                  OpenID Connect                              *
   ****************************************************************
   * PROBLEM DESCRIPTION: OpenID Connect may fail to connect to   *
   *                      the token endpoint because of an SSL    *
   *                      Handshake error                         *
   ****************************************************************
   * RECOMMENDATION:  Install a fix pack or interim fix that      *
   *                  contains this APAR.                         *
   ****************************************************************
   The OpenID Connect (OIDC) Relying Party (RP) Trust Association
   Interceptor (TAI) improperly obtains the default SSL socket
   factory, which can cause an SSL handshake failure when
   attempting to connect to the token endpoint:
   [3/23/18 1:30:57:659 CDT] 000000dd WebAuthentica E SECJ0126E:
   Trust Association failed during validation. The exception is
   com.ibm.websphere.security.WebTrustAssociationFailedException:
   CWTAI2007E: The OpenID Connect relying party (RP) encountered
   a failure during the login. The exception is [Failed to make a
   request to OP server]. Check the logs for details that lead to
   this exception.
   at
   com.ibm.ws.security.oidc.client.RelyingParty.handleSigninCallbac
   k(RelyingParty.java:468)
   at
   com.ibm.ws.security.oidc.client.RelyingParty.negotiateValidatean
   dEstablishTrust(RelyingParty.java:249)
   at
   com.ibm.ws.security.web.TAIWrapper.negotiateAndValidateEstablish
   edTrust(TAIWrapper.java:103)
   at
   (snip)
   ... 28 more
   Caused by: javax.net.ssl.SSLHandshakeException: Received fatal
   alert:
   handshake_failure
   at com.ibm.jsse2.p.a(p.java:1)
   at com.ibm.jsse2.p.a(p.java:13)
   This issue may manifest itself in ways other than an SSL
   Handshake failure.
   
   
    
   
   

PROBLEM CONCLUSION
 *  The OIDC TAI is updated to obtain the default SSL socket
   factory in the manner that is required by WebSphere Application
   Server core security.
   
   The fix for this APAR is currently targeted for inclusion in
   fix pack 8.5.5.14 and 9.0.0.9.  Please refer to the Recommended
   Updates page for delivery information:
   http://www.ibm.com/support/docview.wss?rs=180&uid=swg27004980 [http://www.ibm.com/support/docview.wss?rs=180&uid=swg27004980]
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   PI96508
   
   
 * REPORTED COMPONENT NAME
   WEBSPHERE APP S
   
   
 * REPORTED COMPONENT ID
   5724J0800
   
   
 * REPORTED RELEASE
   850
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt / Xsystem
   
   
 * SUBMITTED DATE
   2018-04-10
   
   
 * CLOSED DATE
   2018-05-03
   
   
 * LAST MODIFIED DATE
   2018-05-03
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   WEBSPHERE APP S
   
   
 * FIXED COMPONENT ID
   5724J0800
   
   

APPLICABLE COMPONENT LEVELS