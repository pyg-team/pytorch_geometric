Title: IBM PM12034: APPLICATION EXECUTING MQGET WITH MQGMO_CONVERT OPTION FAILS WIT H ERROR CODE 2111 - United States

Text:
z/os SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS DOCUMENTATION ERROR.
    
   
   

ERROR DESCRIPTION
 *  Following the application of RSU0912 some applications that
   issue a MQGET request with the MQGMO_CONVERT option fail with
   error code 2111.  The return code 2111 (x'83F') is a
   MQRC_SOURCE_CCSID_ERROR which indicates the coded character-set
   identifier from which character data is to be converted is not
   valid or not supported.
   .
   Additional Information:
   Changes made to DFHMQCON by PK66866 [http://www-01.ibm.com/support/docview.wss?uid=swg1PK66866] mean that an MVS LINK to
   CSQACRTT is issued in preference to calling DFHMQRTT.  When the
   MQRC 2111 occurs, the LINK is locating an MQ V7 version of
   CSQACRTT, most likely from LINKLST (CSQACRTT is in SCSQAUTH at
   MQ 700 and 701; but it is not in SCSQAUTH at MQ 600). The
   problem is that CSQACRTT at MQ V7 expects CSQACLST to be in a
   different format at V7 from that at V6. CSQACLST is present in
   SCSQAUTH at MQ V6, so if the CICS job's STEPLIB has the MQ V6
   SCSQAUTH, there will be a code mismatch between the V7 CSQACRTT
   and V6 CSQACLST.
   mq error rc2111 on mqget migrating CICS releases
   
   
    
   
   

LOCAL FIX
 *  Add the MQ V7 SCSQAUTH to the CICS STEPLIB
   or
   Set CONVERT(YES) on the sender channel on the remote queue
   manager
   
   
    
   
   

PROBLEM SUMMARY
 *  ****************************************************************
   * USERS AFFECTED: All                                          *
   ****************************************************************
   * PROBLEM DESCRIPTION: Using a mismatch of WebSphere MQ        *
   *                      release datasets (V7 SCSQAUTH and V6    *
   *                      SCSQAUTH) results in a user application *
   *                      failing with error code 2111            *
   *                      MQRC_SOURCE_CCSID_ERROR.                *
   ****************************************************************
   * RECOMMENDATION:                                              *
   ****************************************************************
   When using a mismatch of WebSphere MQ release datasets (Version
   7 SCSQAUTH and Version 6 SCSQAUTH), a user application will fail
   with error code 2111 MQRC_SOURCE_CCSID_ERROR when an MQGET with
   MQMGO_CONVERT is executed.  This occurs when a LINK to CSQACRTT
   is issued (due to APAR PK89844 [http://www-01.ibm.com/support/docview.wss?uid=swg1PK89844]) rather than a CALL to DFHMQRTT.
   
   
    
   
   

PROBLEM CONCLUSION
 *  The following documentation changes will be made clarifying the
   issue:
   
                      - - - - - - - - - - -
   
   The CICS TS 4.1 Infocenter, under the section CICS Transaction
   Server for z/OS, Version 4.1 -> Upgrading -> Upgrading from
   Version 3 Release 2 -> Upgrading CICS Transaction Server
   -> Upgrading the CICS-WebSphere MQ connection, the following
   sentence will be added after the second bullet-point under the
   section Support for WebSphere MQ Version 7 API calls:
   
   If you have WebSphere MQ Version 7 installed and you have
   applied the PTF for APAR PK89844 [http://www-01.ibm.com/support/docview.wss?uid=swg1PK89844], then it is important that you
   ensure that your CICS STEPLIB concatenation only includes the
   WebSphere MQ Version 7 SCSQAUTH.
   All modules in WebSphere MQ Version 7 SCSQAUTH are downwardly
   compatible.
   
                      - - - - - - - - - - -
   
   In publication GC34-6998-00, Upgrading from CICS TS Version 3.2
   under section 2 in chapter 24 on page 130, the following
   sentence will be added after the second bullet-point under the
   section Support for WebSphere MQ Version 7 API calls:
   
   If you have WebSphere MQ Version 7 installed and you have
   applied the PTF for APAR PK89844 [http://www-01.ibm.com/support/docview.wss?uid=swg1PK89844], then it is important that you
   ensure that your CICS STEPLIB concatenation only includes the
   WebSphere MQ Version 7 SCSQAUTH.
   All modules in WebSphere MQ Version 7 SCSQAUTH are downwardly
   compatible.
   
                      - - - - - - - - - - -
   
   In publication GC34-6997-00, Upgrading from CICS TS Version 3.1
   under section 2 in chapter 27 on page 200, the following
   sentence will be added after the second bullet-point under the
   section Support for WebSphere MQ Version 7 API calls:
   
   If you have WebSphere MQ Version 7 installed and you have
   applied the PTF for APAR PK89844 [http://www-01.ibm.com/support/docview.wss?uid=swg1PK89844], then it is important that you
   ensure that your CICS STEPLIB concatenation only includes the
   WebSphere MQ Version 7 SCSQAUTH.
   All modules in WebSphere MQ Version 7 SCSQAUTH are downwardly
   compatible.
   
                      - - - - - - - - - - -
   
   In publication GC34-6996-00, Upgrading from CICS TS Version 2.3
   under section 2 in chapter 30 on page 232, the following
   sentence will be added after the second bullet-point under the
   section Support for WebSphere MQ Version 7 API calls:
   
   If you have WebSphere MQ Version 7 installed and you have
   applied the PTF for APAR PK89844 [http://www-01.ibm.com/support/docview.wss?uid=swg1PK89844], then it is important that you
   ensure that your CICS STEPLIB concatenation only includes the
   WebSphere MQ Version 7 SCSQAUTH.
   All modules in WebSphere MQ Version 7 SCSQAUTH are downwardly
   compatible.
   
                      - - - - - - - - - - -
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   PM12034
   
   
 * REPORTED COMPONENT NAME
   CICS TS Z/OS V4
   
   
 * REPORTED COMPONENT ID
   5655S9700
   
   
 * REPORTED RELEASE
   600
   
   
 * STATUS
   CLOSED DOC
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2010-04-13
   
   
 * CLOSED DATE
   2010-04-20
   
   
 * LAST MODIFIED DATE
   2014-11-06
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
    PM10011 [http://www-01.ibm.com/support/docview.wss?uid=swg1PM10011]
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

Publications Referenced GC34699800 GC34699700 GC34699600 FIX INFORMATION

APPLICABLE COMPONENT LEVELS