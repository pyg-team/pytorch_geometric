Title: IBM Recommended settings for DB2 while being used for IBM Initiate Master Data Service - United States

Text:
 RECOMMENDED RESOURCES

ABSTRACT
 The following are a set of recommended performance settings for using IBM Initiate Master Data Service (MDM SE) with a DB2 database.

The recommendations come from performance testing done in the development lab with MDM SE version 9.7. They may be applicable for other versions of MDS, and they may not be applicable to every customer environment.

Please make sure to evaluate each recommendation with your specific environment. Best practices are to always accompany performance tuning changes with appropriate testing to validate a performance improvement. 

CONTENT
Any settings listed in bold have a large impact in DB2 performance with MDM SE.

Settings for creation of the database 

 * "AUTOMATIC STORAGE YES" 
 * "using codeset UTF-8 territory US" 
 * "collate using identity" 
 * "pagesize 4k"


Use STMM for buffer pool management.  * Limit pool count to 2 ( One for data, and one for index) 
 * For FP2, cap package cache to an appropriate size. 
 * Settings for creation of the tablespaces  * "MANAGED BY AUTOMATIC STORAGE"` 
    * "AUTORESIZE YES" 
    * "NO FILE SYSTEM CACHING" 
    * "PREFETCHSIZE 0"
      Pre-fetching data has a negative impact on the MDS read footprint, significantly increasing overall physical disk read activity during periods of workload profile changes. Disabling prefetching can reduce the time required to warm the active buffers to a changing workload profile.
   
   
 * DB2 Parameters  * DB2_INLIST_TO_NLJN=YES 
    * DB2TCPCONNMGRS=1 
    * DB2COMM=TCPIP 
    * DB2_ALLOCATION_SIZE=256K
   
   
 * DBM parameters:  * MAX_COORDAGENTS 100 immediate 
    * DFT_MON_UOW ON immediate 
    * DFT_MON_STMT ON immediate 
    * DFT_MON_TABLE ON immediate 
    * DFT_MON_BUFPOOL ON immediate 
    * DFT_MON_LOCK ON immediate 
    * DFT_MON_SORT ON immediate 
    * DFT_MON_TIMESTAMP ON immediate 
    * DIAGLEVEL 3 immediate
      This diag level allows performance architecture and support analyze buffer pool activity that may be relevant to performance issues 
    * DIAGSIZE 75 immediate 
    * MAX_QUERYDEGREE 9 immediate 
    * INTRA_PARALLEL YES immediate 
    * MON_HEAP_SZ 5000 automatic immediate
   
   
 * DB parameters:  * SELF_TUNING_MEM ON immediate 
    * DB_MEM_THRESH 100 immediate 
    * STMT_CONC LITERALS immediate 
    * DATABASE_MEMORY 7340032 automatic immediate 
    * PCKCACHESZ 200000 immediate 
    * MAXAPPLS 128 immediate
      This should be set to 4 times your aggregate MDS thread count across all of your engines, and entity managers 
    * MAX_LOG 0 immediate 
    * LOGFILSIZ 1024 immediate 
    * LOGBUFSZ 2048 immediate 
    * LOGPRIMARY 36 immediate 
    * LOGSECOND 6 immediate 
    * NUM_IOSERVERS 11 automatic immediate 
    * DFT_DEGREE -1 immediate 
    * DFT_QUERYOPT 2 immediate 
    * AUTO_MAINT OFF immediate 
    * AUTO_TBL_MAINT OFF immediate 
    * AUTO_RUNSTATS OFF immediate 
    * AUTO_STMT_STATS OFF immediate
   
   
 * Turn APPEND ON (and PCTFREE 0) on the derived tables MPI_MEMBKTD, MPI_MEMCMPD, MPI_MEMQRYD
   This is done through an "ALTER TABLE tablename APPEND ON PCTFREE 0" 
 * Declare queue tables MPI_MEMIQUE, MPI_MEMOQUE, MPI_ENTIQUE_xx, MPI_ENTOQUE_xx, and the MPI_RELLINK table with CARDINALITY as VOLATILE
   This is done through an "ALTER TABLE tablename VOLATILE CARDINALITY" 
 * Use compression on MPI_MEMCMPD
   "ALTER TABLE MPI_MEMCMPD ACTIVATE VALUE COMPRESSION" 
 * Re-organize all tables as needed 
 * Run statistics on all tables as needed 
 * Rebind the application bind packages with RESOLVE ANY REOPT ONCE option
   Use DB2 rebind command