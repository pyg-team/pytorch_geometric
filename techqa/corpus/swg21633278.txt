Title: IBM Snapshot deployment for IBM Business Process Manager (BPM) fails, but returns a success message - United States

Text:
deploy app install process successful tracking definition RollbackOnly rollback transaction TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 When you deploy a snapshot to a Process Server, you see a message that the snapshot deployment was successful. However, after you refresh the console or check the database, there is no evidence that the snapshot has been installed. 

SYMPTOM
You see the first two of the following symptoms and you might see the third symptom: 

 * An error occurs that sets the transaction for rollback without raising an exception to the snapshot deployment process. 
   
   
 * You see the following message on the Process Center even though the snapshot is not installed:
   CWLLG0156I: MySnapshot Install succeeded
   
   
 * You might see the following informational message during the deployment process on the Performance Data Warehouse server:
   WTRN0080W: Transaction IBM_BPM_PerformanceDW_MyTopologyPS.Support#twperfsvr-ejb.jar#APIServices 0000013CCB0E26FE0000000100000169A32CD3B564C71B97B0A0CF46DC8ACCF0AC016240 
   0000013CCB1017A400000001000000306AA7B67343863FDA2347B8BBBEFDC9AA9C329CD0 
   00000001 has timed out due to no client activity for greater than 60 seconds.


CAUSE
 This issue also can be caused by any error that sets the transaction to roll back without raising an error. It might be any underlying code that catches an error rather than re-throwing it to the deployment code. As a result, the transaction rolls back even though the deployment process is not aware that an error has occurred. Certain transaction time outs can also lead to similar behavior. 
One scenario is caused by APAR PM83253 [http://www.ibm.com/support/docview.wss?uid=swg1PM83253]. The WebSphere Application Server Transaction Service does not properly throw an error when the client inactivity time-out occurs. With this APAR, the deployment properly recognizes that a timeout has occurred and it throws an error that warns you that the timeout has occurred. The client inactivity time out causes the transaction to rollback if the deployment process takes too long.


RESOLVING THE PROBLEM
With PM83253, you get an install failure error to help identify that an issue has occurred. You see the following error instead of the success message:
CWLLG2164E: Install did not complete successfully because of an unexpected exception. Error: <Temp folder>\import.zip5970746069020999476
com.lombardisoftware.client.delegate.BusinessDelegateException: UOWManager transaction processing failed; nested exception is com.ibm.wsspi.uow.UOWException: javax.transaction.RollbackException: Global transaction rolledback from subordinate

This change means that an error on another server caused the transaction to fail. If you have confirmed that this issue was due to the client inactivity timeout on the Performance Data Warehouse Server, then you need to increase the value. You should set the timeout value to a value that is larger than the time it takes to finish the deployment process. For more information on the client inactivity timeout, see the Configuring transaction properties for an application server [http://pic.dhe.ibm.com/infocenter/wasinfo/v8r0/index.jsp?topic=/com.ibm.websphere.nd.iseries.doc/info/iseriesnd/ae/tjta_settlog.html] document. 


If there is another issue that causes the transaction to rollback without raising an error, then you might need to look for other errors in the same thread or enable transaction tracing [http://www.ibm.com/support/docview.wss?uid=swg21153216] to further debug your issue.

Subsequent snapshot install attempts might need to occur after a server restart. These attempts might be needed as this behavior can lead to the issue that is described in the Deploying a snapshot for IBM Business Process Manager (BPM) fails with a branch not found error [http://www.ibm.com/support/docview.wss?uid=swg21632938] document.

RELATED INFORMATION
 HTTP server causes duplicate snapshot deployments [http://www.ibm.com/support/docview.wss?uid=swg21626369]


 


Cross reference information Segment Product Component Platform Version Edition Business Integration IBM Business Process Manager Standard Application Deployment AIX, Linux, Linux zSeries, Solaris, Windows 8.0.1, 8.0, 7.5.1, 7.5 Business Integration IBM Business Process Manager Express Application Deployment Linux, Linux zSeries, Windows 8.0.1, 8.0, 7.5.1, 7.5 
PRODUCT ALIAS/SYNONYM
 BPM