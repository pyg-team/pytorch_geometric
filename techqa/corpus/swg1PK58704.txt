Title: IBM PK58704: WHEN GLOBAL SECURITY IS ENABLED, ORB.INIT() CALL IS PREFORMED TWICE WHICH LEADS TO ORBX0390E PORT ALREADY IN USE ERROR. - United States

Text:
 SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PERMANENT RESTRICTION.
    
   
   

ERROR DESCRIPTION
 *  The following exception can be seen in the logs...
   
   
   [11/26/07 21:33:30:310 GMT] 00000047 ORBRas        E
   com.ibm.ws.orbimpl.transport.WSTransport createServerSocket
   server.startup : 4 ORBX0390E: Cannot create listener thread.
   Exception=[ org.omg.CORBA.INTERNAL:
   CAUGHT_EXCEPTION_WHILE_CONFIGURING_SSL_SERVER_SOCKET,
   Exception=org.omg.CORBA.INTERNAL:
   UNABLE_TO_CREATE_SSL_SERVER_SOCKET
   Exception=java.net.BindException: Address already in use:
   NET_Bind  vmcid: 0x49421000  minor code: 76  completed: No
   vmcid: 0x49421000  minor code: 77  completed: No ].
   
   
   This might be seen when some 3rd party code like Weblogic is
   doing a JNDI lookup. However, this does NOT occur if Global
   Security is DISABLED.
   
   A checked needs to be implemented to determine if the ORB
   component has already initialized, to not try again if called
   later and get rid of this exception in the logs.
   
   
    
   
   

LOCAL FIX
 *  n/a
   
   
    
   
   

PROBLEM SUMMARY
 *  ****************************************************************
   * USERS AFFECTED: IBM WebSphere Application Server users who   *
   *                 have enabled security.                       *
   ****************************************************************
   * PROBLEM DESCRIPTION: When there is an incoming call that     *
   *                      results in ORB.init() being invoked,    *
   *                      the following error is observed.        *
   *                                                              *
   *                      [11/27/07 19:10:03:230 GMT] 0000002d    *
   *                      ORBRas                                  *
   *                      com.ibm.ws.orbimpl.transport.           *
   *                      WSTransport.createServerSocket          *
   *                      (ServerConnectionData)                  *
   *                      Non-deferrable Alarm : 1 The            *
   *                      following exception was logged          *
   *                                                              *
   *                      org.omg.CORBA.INTERNAL:                 *
   *                      CAUGHT_EXCEPTION_WHILE_CONFIGURING      *
   *                      _SSL_SERVER_SOCKET,                     *
   *                      Exception=org.omg.CORBA.INTERNAL:       *
   *                      UNABLE_TO_CREATE_SSL_SERVER_SOCKET      *
   *                      Exception=java.net.BindException:       *
   *                      Address already in use: NET_Bind        *
   *                      vmcid: 0x49421000  minor code: 76       *
   *                      completed: No  vmcid: 0x49421000        *
   *                      minor code: 77  completed: No           *
   *                       at com.ibm.ws.security.orbssl.         *
   *                      WSSSLServerSocketFactoryImpl.           *
   *                      createSSLServerSocket                   *
   *                                                              *
   ****************************************************************
   * RECOMMENDATION:                                              *
   ****************************************************************
   When security is enabled, ORB.init() is already issued in
   WebSphere Application Server and it initializes SSL Server
   Socket.  If there is a situation where second ORB.init() is
   invoked, it goes to initialize the SSL Server Socket resulting
   in the "Address already in use" error as the SSL socket port
   is already in use.
   
   
    
   
   

PROBLEM CONCLUSION
 *  Multiple ORB.init() calls are not supported by WebSphere
   Application Server. You may want to try one of following
   options:
   - Use dynamic port to workaround
   Details are in the following technote
   http://www-1.ibm.com/support/docview.wss?uid=swg21248645 [http://www-1.ibm.com/support/docview.wss?uid=swg21248645]
   
   - Avoid the second ORB.init() call and refer to the
   Information Center for the preferred way of obtaining an ORB
   instance.
   InfoCenter: Please look for "Preferred API for obtaining
   an ORB instance"
   
   
    
   
   

TEMPORARY FIX
 *  Avoid calling the second ORB.init().  Multiple ORB.init() is not
    supported.
   
   
    
   
   

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   PK58704
   
   
 * REPORTED COMPONENT NAME
   WEBS APP SERV N
   
   
 * REPORTED COMPONENT ID
   5724H8800
   
   
 * REPORTED RELEASE
   60W
   
   
 * STATUS
   CLOSED PRS
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2007-12-31
   
   
 * CLOSED DATE
   2008-01-25
   
   
 * LAST MODIFIED DATE
   2008-01-25
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION

APPLICABLE COMPONENT LEVELS