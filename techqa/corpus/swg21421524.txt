Title: IBM How To Add Custom Attributes to a File-based Repository - United States

Text:
vmm; file respository; schema extension; attribute; custom; map; mapping; extension; property; wp-add-property TECHNOTE (FAQ)

QUESTION
How can I add custom attributes for users stored in the default federated file repository?

ANSWER
While developing or testing WebSphere Portal-based solutions you may employ environments integrated neither with LDAPs nor with database repositories but with only the default federated file repository. To store values for user or group attributes beyond Virtual Member Manager (VMM) default file based repository's schema, you must extend the schema.
To do so, follow the procedure for running wp-add-property per the InfoCenter section corresponding to your operating system. This procedure includes restarting WebSphere Portal to pick up the VMM configuration changes. Refer to the link below for AIX. This procedure updates <profile>/config/cells/<cell>/wim/model/wimxmlextension.xml. 

For example, running wp-add-property with the following values in wkplc.properties:

la.providerURL=corbaloc:iiop:localhost:10031
la.propertyName=testproperty1
la.entityTypes=PersonAccount
la.dataType=String
la.multiValued=false

results in wimxmlextension.xml containing:

<wim:schema>
...
[https://ecurep.mainz.de.ibm.com/aexfiles/pmr/1/3/13827%2C500%2C000/support_files/wimxmlextension.xml#]<wim:propertySchema ... dataType="STRING"multiValued="false"propertyName="testproperty1">
<wim:applicableEntityTypeNames>PersonAccount</wim:applicableEntityTypeNames>
</wim:propertySchema>
...
</wim:schema>

VMM's schema is now extended to include testproperty1 for entities of type PersonAccount stored in the file repository. You do not need to map the attribute as you would with an LDAP repository. You do not need to configure a database to store the attribute as you would with a property extension database.

File repositories can be identified in <profile>/config/cells/<cell>/wim/config/wimconfig.xml by:

<config:repositories xsi:type="config:FileRepositoryType"adapterClassName="com.ibm.ws.wim.adapter.file.was.FileAdapter" id="InternalFileRepository" supportPaging="false" messageDigestAlgorithm="SHA-1">
<config:baseEntries name="o=defaultWIMFileBasedRealm"/>
</config:repositories>


To access this property via portlets installed by default with WebSphere Portal:

1. Log in to Portal as an administrator and access the Selfcare portlet via Edit My Profile in theme. Alternatively, you could access the Manage Users and Groups portlet, then edit a particular user. 2. In portlet menu, select "Configure". 
3. Check "testproperty1" and click OK. 
4. Add a value for testproperty1.

RELATED INFORMATION
 InfoCenter: Adding attributes (AIX) [http://publib.boulder.ibm.com/infocenter/wpdoc/v6r1/index.jsp?topic=/com.ibm.wp.ent.doc_v615/install/aix_add_attributes.html]
If clustered - la.providerURL consideration [http://www.ibm.com/support/docview.wss?uid=swg21358381]