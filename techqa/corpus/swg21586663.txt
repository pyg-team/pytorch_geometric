Title: IBM Thread gets hung when running a BIRT report - United States

Text:
BROS; Firewall; Hung; tcp_keepidle ; TPAEREPORT TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 Thread gets hung when running a report using a BROS Server configuration (BIRT Report Only Server). 

SYMPTOM
00000022 ThreadMonitor W WSVR0605W: Thread 

"WebContainer : 3" (0000006b) has been active for 638026 milliseconds and may be hung. There is/are 1 thread(s) in total in the server that may be hung. 
at java.net.SocketInputStream.socketRead0(Native Method) 
at java.net.SocketInputStream.read(SocketInputStream.java:155) 
at com.ibm.db2.jcc.t4.ab.b(ab.java:195) 
at com.ibm.db2.jcc.t4.ab.c(ab.java:243) 
at com.ibm.db2.jcc.t4.ab.c(ab.java:354) 
at com.ibm.db2.jcc.t4.ab.v(ab.java:1139) 
at com.ibm.db2.jcc.t4.db.a(db.java:37) 
at com.ibm.db2.jcc.t4.t.a(t.java:32) 
at com.ibm.db2.jcc.t4.sb.h(sb.java:141) 
at com.ibm.db2.jcc.b.gm.bb(gm.java:1933) 
at com.ibm.db2.jcc.b.gm.a(gm.java:2799) 
at com.ibm.db2.jcc.b.gm.a(gm.java:604) 
at com.ibm.db2.jcc.b.gm.executeQuery(gm.java:588) 
at 
com.ibm.tivoli.maximo.report.birt.datasource.DataSourceConnectionPool.is
ValidConnection(DataSourceConnectionPool.java:310) 


ENVIRONMENT
AIX


RESOLVING THE PROBLEM
This problem is caused by the firewall setting between the Database server and the BROS server (BIRT Report Only Server). 

The firewall disconnects the sessions which are idle for over an hour. 

To fix this issue, you need to set 'tcp_keepidle' from the default 2 hours to less than 1 hour (for example, 30 mins). This would then prevent the problem because keep-alive packets would be sent every 30 minutes to check if the session is idle. 

The keepidle time should be shorter than the firewall timeout time.