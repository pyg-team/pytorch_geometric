Title: IBM IV84761: ITCAM FOR SOA DATAPOWER DATA COLLECTOR ATTEMPTS TOO MANY CONNECTIONS TO AN UNRESPONSIVE DATA POWER APPLIANCE - United States

Text:
  A README IS AVAILABLE
IBM Tivoli Composite Application Manager for SOA 7.2 Interim Fix 12 README 7.2.0.1-TIV-ITCAMSOA-IF0012 [http://www-01.ibm.com/support/docview.wss?uid=isg400003852]


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  Description: When the ITCAM for SOA Data Power Data Collector
   (DPDC) receives a connection refused message from the Data Power
    appliance; it continues to attempt connections to the
   appliance every polling interval. An exponential back off
   strategy needs to be implemented that minimizes these failed
   connection attempts
   
   
    
   
   

LOCAL FIX
 *  na
   
   
    
   
   

PROBLEM SUMMARY
 *  ****************************************************************
   * USERS AFFECTED: ITCAM for SOA Data Power Data Collector that
   * are unable to connect to a Data Power Appliance on
   * all platforms.
   ****************************************************************
   * PROBLEM DESCRIPTION:
   * If a ITCAM for SOA DataPower Data Collector (KD4DPDC) is
   * unable to connect to a Data Power appliance for a considerable
   * amount of time, it still continues to try each polling
   * interval. Many messages similar to the following appear in the
   * operations log:
   *
   * KD4DP0004E The data collector could not retrieve a domain list
   * for DataPower appliance: <hostName> using user ID: <userName>.
   * Detailed error message: class java.net.ConnectException
   * Connection refused
   *
   * The fix ensures that when a network error occurs, it won't try
   * to connect for a polling interval (e.g. 5 seconds) and then
   * upon a second failure it won't retry for double the polling
   * interval (e.g. 10 seconds). The fix continues to exponentially
   * back off, for up to a minute. This significantly reduces the
   * number of possible connections during an outage.
   *
   * For example: If a KD4DPDC is configured to query the
   * transaction log of 50 domains from an appliance every 5
   * seconds and it is unable to connect for an hour it will
   * (before the fix) attempt a total of 36000 (50 domains * 12
   * intervals in a minute * 60 minutes in an hour) connections.
   * The fix limits the number of connections in this time frame to
   * just 63 (A 571 times improvement!).
   *
   * The fix adds log messages similar to the following.
   *
   * Console/Operations Log:
   *
   * KD4DP0008E A communications failure occurred while the data
   * collector was sending a request to DataPower appliance:
   * <hostName> using user ID: <userName>. Detailed error message:
   * Circuit Breaker Triggered - Failed 1 time(s), retrying in 5
   * seconds.
   *
   * Trace Log:
   *
   * DPDeviceSessionCircuitBreaker.isConnectable()  Connections to
   * DataPower appliance: <hostName> blocked whilst Circuit Breaker
   * is in effect (next attempt permitted in 4 seconds).
   *
   * DPDeviceSessionCircuitBreaker.isConnectable()  A test
   * connection to DataPower appliance: <hostName> permitted. Next
   * attempt in 10 seconds.
   *
   * DPDeviceSessionCircuitBreaker.setConnectedTrue()  Connection
   * Successful. Circuit Breaker to DataPower appliance:
   * <hostName> cleared.
   *
   ****************************************************************
   * RECOMMENDATION: Apply fix when it is available.
   ****************************************************************
   
   
    
   
   

PROBLEM CONCLUSION
 *  Apply the IFix when it is available.
   
   The fix for this APAR is contained in the following maintenance
   packages:
   | interim fix | 7.2.0.1-TIV-ITCAMSOA-IF0010
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   IV84761
   
   
 * REPORTED COMPONENT NAME
   ITCAM FOR SOA-D
   
   
 * REPORTED COMPONENT ID
   5724SOA00
   
   
 * REPORTED RELEASE
   720
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt / Xsystem
   
   
 * SUBMITTED DATE
   2016-05-13
   
   
 * CLOSED DATE
   2016-08-02
   
   
 * LAST MODIFIED DATE
   2016-08-02
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   ITCAM FOR SOA-D
   
   
 * FIXED COMPONENT ID
   5724SOA00
   
   

APPLICABLE COMPONENT LEVELS