Title: IBM Installation Manager shows the wrong database information - United States

Text:
 TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 When you initially install IBM Rational Build Forge through IBM Installation Manager. You are required to enter in a series of fields pertaining to the database for connectivity. Upon upgrade, these fields reflect the wrong information whether old or new. 

SYMPTOM
When you initially install Rational Build Forge in the IBM Installation Manager. There are several database connectivity parameters to enter that can change based on the database type.

Database Type: MS SQL, Oracle, DB2, MySQL
Database host: localhost
Database port: Default (depends on DB selected above)
Database name: build
Database schema: dbo
Database username: Hello
Database password: xxxxxx
Verify: xxxxxx
location of the JDBC drivers. 

For Example: 
You installed Rational Build Forge Version 7.1.3.3 with MS-SQL 2005 Database. Then one year later you upgraded the database to MS-SQL 2008 R2 and both Build Forge configuration files to the correct information. All is well. 

Another year passes and you have to upgrade Rational Build Forge to the newest version 7.1.3.5. When you start the IBM Installation Manager and set the correct repositories for the upgrade and accept the terms and conditions. You are prompted with with a screen to verify the database connectivity information that was set up on the initial install. The difference now is that I you are using MS-SQL 2008 R2 and not MS-SQL 2005 which is indicated by the "Database type:" (This field is not editable from IIM). 

 

You will also notice that the JDBC file location is not up to date either. If you change the value within the Install Manager the upgrade could fail. Depending on whether you changed the "Database type" property for different DB different JDBC. During installation the Install Manager copies the JDBC to the tomcat libs directory. If you install without changing this you will have to manually move the new JDBC driver after upgrade before build forge will work again even if it was working before. The IIM will overwrite the manual changes made to Build Forge after upgrading the Database and reset the JDBC to the older version used before. 

CAUSE
This occurs when you upgrade the Rational Build Forge Database to a different version, and then attempt to upgrade Build Forge using the IBM Installation Manager..



ENVIRONMENT
This has been seen in Windows Environments only.



DIAGNOSING THE PROBLEM
When upgrading Rational Build Forge, confirm the database type value is correct on the database configuration Page. Also make sure the location of the JDBC is set correctly. If either one of these fields are invalid, this is your issue



RESOLVING THE PROBLEM
OPTION 1 (quick and easy) 

Use IBM Installation Manager to un-install Rational Build Forge. Then re-install the new version of Rational Build Forge. When prompted for the database information, point to the existing database that was being used before. This gives you the option to set the JDBC, TYPE and all parameters again. Avoiding the problem all together. 

Then during later upgrades, as long as the database has not been upgraded IIM will reflect the proper values making upgrading easier. 

 

 

OPTION 2 (root cause) (not recommended) 

Changing the value of the property listed below which is located in the Installed.XML file. Which is located in an equivalent location to C:\Documents and Settings\AllUsers\Application_Data\IBM\Installation Manager

property name='user.buildforge.dbComboType' value='sqlserver2k5' The value key for this field determines the actual database type value in the IBM Installation Manager. 

 

You will also have to change the JDBC install directory. Since the Database type is now different it will expect a new JDBC .In the Installed.XML you will also have to update the JDBC directory used by the upgraded databases JDBC provider. 

If you do not do this, manual changes will have to be made to build forge after upgrade, for IIM will copy the old JDBC into the tomcat lib directory. 

 

This will make it so that all the values within the Installation Manager match. The proper JDBC drivers go where they are suppose to. 

 

NOTE: You must back up the installed.xml file before making any changes. This can cause serious problems if set incorrectly.