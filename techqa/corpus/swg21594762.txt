Title: IBM How does the DataPower Load Balancer Group (LB Group) health check work? - United States

Text:
load balancer group; LBG; health check; DataPower; behavior TECHNOTE (FAQ)

QUESTION
 Question #1: How does the DataPower Load Balancer Group (LB Group) health check work? How does it handle each of the members in the group?

Question #2: What if the 'Health Check request' cycle has not completed and a new 'health check request' cycle should start according to the "Health Check Frequency" parameter?

Question #3: How does the LB Group health check work if there are 2 load balancer groups defined for the same XML Manager? 

ANSWER
Answer #1: 
In DataPower, each LB Group has its own Health Check task. This task checks every member in the LB Group sequentially. 

For example:
If you have set up 2 application servers (AP1 and AP2) included in the same load balancer group, the health check behavior will check AP1's status first and wait for the response before checking for AP2. After getting the response from AP1, it will then check the status of AP2. If AP1 does not respond to load balancer group health check request, the task will wait for up to "timeout" seconds, as specified in the User Agent object, before attempting to check the next member in sequence.

Answer #2: 

The 'Health Check request' cycle, once kicked off, will send a health check request to one member at a time. This cycle ends after the last member is checked. The health-check task runs as often as directed by the "Health Check Frequency" configuration property, but if a health-check cycle has not completed while the frequency timer cycle is due, a new health-check task will not be started. Once the running task completes, the next cycle will start the health-check requests again.

Answer #3: 

If an XML Manager has multiple LB Groups, each LB Group has its own health check task. The health-check task will use resources of the same XML Manager and will run concurrently, as much as possible (each LB Group Member within a LB Group will be checked in sequence as described in Answer #1). For best results, configure each LB Group health check at different frequencies.

For example:
Assuming two LB Groups (LBG1 and LBG2), associated in the same XML Manager, each to be health checked using a frequency of 30 seconds. For optimal concurrency results, you might want to have them run at different frequencies, for example, LBG1 every 29 seconds (see Figure #1) and LBG2 every 31 seconds (see Figure #2). 


Figure 1: Example of LBG1 setting
[/support/docview.wss?uid=swg21594762&aid=1] [/support/docview.wss?uid=swg21594762&aid=1]
Figure 2: Example of LBG2 setting

[/support/docview.wss?uid=swg21594762&aid=2] [/support/docview.wss?uid=swg21594762&aid=2]


 



Cross reference information Segment Product Component Platform Version Edition Business Integration WebSphere DataPower SOA Appliances General 4.0.2, 4.0.1 Edition Independent