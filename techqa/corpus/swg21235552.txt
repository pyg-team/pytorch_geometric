Title: IBM MQRC 2059 MQ client does not work unless export MQCCSID is used (FDC Major Errorcode   xecX_E_TO_CCSID) - United States

Text:
MQCCSID; CCSID Major Errorcode xecX_E_TO_CCSID AMQ6053 AMQ6053 CCSID error TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 Your WebSphere MQ client application fails with return code MQRC 2059, 0x0000080b, MQRC_Q_MGR_NOT_AVAILABLE, when connecting to a remote system. Also an FDC is generated with Major Errorcode xecX_E_TO_CCSID (see details below). 

CAUSE
The most likely causes: 

 * The coded character set identifier (CCSID) shown in the error messages in the FDC file or in the error log file indicate that the locale that uses the CCSID is not installed in your system

 * The value specified in MQCCSID is not a valid one.

RESOLVING THE PROBLEM
Change the MQCCSID of the client machine. 

 

Example:
export MQCCSID=1208

Additional information


There are several possible ways to solve the problem: 

 * First, consult the following technote to find out the locale and the corresponding coded character set and CCSID in your system.  * Title: How to find out the CCSID value associated with the coded character set for a locale in a UNIX session [http://www.ibm.com/support/docview.wss?rs=171&uid=swg21233177]
   
   
 * If you are using the MQCCSID variable, ensure that it is a valid one. Consult the Appendix G from the APG manual.


For example, if the value of MQCCSID is "8", but the desired valid CCSID is 1208, issue the following statement to set the CCSID used by MQ to be "1208": 

export MQCCSID=1208 

- In UNIX, the environment variable "LANG" is used to set the locale and other related environment variables. For example, if you want to set your locale to "en_US" issue the following command: 

export LANG=en_US 

- To find out what are the valid values to be used with the "LANG" environment variable, issue the following command: 

locale -a 


Note: 

To easily replicate the scenario, the value for MQCCSID below is not a valid one:
$ export MQCCSID=8

$ amqsputc QLINUX
Sample AMQSPUT0 start
MQCONN ended with reason code 2059



Besides the above error message, the directory /var/mqm/errors shows one new FDC file and some relevant rows are shown below:

| Major Errorcode :- xecX_E_TO_CCSID
| Minor Errorcode :- OK 
| Probe Type :- MSGAMQ6053 
| Probe Severity :- 2
| Probe Description :- AMQ6053: CCSID error
| FDCSequenceNumber :- 0
| Comment1 :- Cat CCSID 819, user CCSID 8, message ID '20009541'X 


An example of the problem is shown below. It uses an MQ version 6 server in Linux and an MQ client in AIX. 

The line with the Comment1 indicates that the system CCSID is "819" and that the value specified in MQCCSID is "8".

Finally, also in /var/mqm/errors one of the AMQERR01.LOG shows an error message related to the CCSID:

03/21/06 13:00:04 - Process(30462.1) User(x) Program(amqsputc_nd)
AMQ9541: CCSID supplied for data conversion not supported. 



Example output of "locale -a" from AIX:

$ locale -a
C
POSIX
en_US
en_US.8859-15
en_US.ISO8859-1

Example output of "locale -a" from HP-UX:

$ locale -a
C
POSIX
C.iso88591
C.iso885915
C.utf8
univ.utf8
en_US.iso88591
en_US.roman8
en_US.utf8

Example output of "locale -a" from Solaris:

$ locale -a | grep en_US
en_US
en_US.ISO8859-1
en_US.ISO8859-15
en_US.ISO8859-15@euro
en_US.UTF-8

Example output of "locale -a" from Linux:

$ locale -a | grep en_US
en_US
en_US.iso885915
en_US.utf8

 

PRODUCT ALIAS/SYNONYM
 WMQ MQ