Title: IBM TroubleShooting: Java Transaction Service (JTS) problems - United States

Text:
troubleshooting; troubleshooting; troubleshooting; TroubleShootingDocument; TroubleShootingFlowDocument; how to transactions; transactions in websphere application server TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 Troubleshooting for Java Transaction Service (JTS) problems in IBM WebSphere Application Server. This should help address common issues with this component before calling IBM support and save you time. 

RESOLVING THE PROBLEM
 

TAB NAVIGATION
 * Learn more [http://www.ibm.com/support/docview.wss?uid=swg21247193]
 * Troubleshoot- selected tab,
 * Collect data [http://www.ibm.com/support/docview.wss?uid=swg21153216]


It is a good start to refer to the following Knowledge Center links while troubleshooting Transaction issues in WebSphere Application Server: 

Troubleshooting transactions [http://www.ibm.com/support/knowledgecenter/SSAW57_9.0.0/com.ibm.websphere.nd.multiplatform.doc/ae/tjta_probd.html] 

Transaction troubleshooting tips [http://www.ibm.com/support/knowledgecenter/SSAW57_9.0.0/com.ibm.websphere.nd.multiplatform.doc/ae/rjta_prob0.html] 

Transaction service exceptions [http://www.ibm.com/support/knowledgecenter/en/SSAW57_9.0.0/com.ibm.websphere.nd.multiplatform.doc/ae/rjta_except.html] 

Recovering from failed transaction recovery [https://www.ibm.com/developerworks/community/blogs/aimsupport/entry/recovering_from_failed_transaction_recovery_websphere_application_server?lang=en] 

The below two WebSphere Support Technical Exchanges provides an overview of the Java Transaction Service in WebSphere Application Server and shows how to resolve common problems such as transaction time-outs, rollbacks, and recovery issues: 

Transactions in WebSphere Application Server - Overview and Problem Determination [http://www-01.ibm.com/support/docview.wss?uid=swg27011067] 

Understanding Transaction Manager in WebSphere Application Server [https://www-01.ibm.com/support/docview.wss?uid=swg27047864] 


Steps to help resolve JTS problems  1. Does the following message appear in the SystemOut.log file?
    
    
    WTRN0006W: Transaction {0} has timed out after {1} seconds.
     * Yes, review the documents found here [http://www.ibm.com/support/search.wss?rs=180&tc=SSEQTP&q=WTRN0006w] and consider increasing the total transaction lifetime timeout [http://www.ibm.com/support/knowledgecenter/SSAW57_9.0.0/com.ibm.websphere.nd.multiplatform.doc/ae/udat_contranserv.html] [http://pic.dhe.ibm.com/infocenter/wasinfo/v8r0/index.jsp?topic=/com.ibm.websphere.nd.doc/info/ae/ae/udat_contranserv.html] setting.
       
     * No, continue to question 2.
       
       
    
    
 2. Does the following error message appear in the SystemOut.log file?
    
    
    WTRN0062E: An illegal attempt to use multiple resources that have only one-phase capability has occurred within a global transaction.
     * Yes, review the documents found here [http://www.ibm.com/support/search.wss?rs=180&tc=SSEQTP&q=illegal+attempt+one+phase]. This error indicates that more than one non-XA resources were enlisted in a global transaction (either a UserTransaction or a Container-managed transaction). You should ensure that all resources (for example: Data sources and connection factories) that are enlisted in the transaction are XA-enabled.
       
     * No, continue to question 3.
       
       
    
    
 3. Does the following error message appear in the SystemOut.log file?
    
    
    WTRN0063E: An illegal attempt to commit a one phase capable resource with existing two phase capable resources has occurred.
     * Yes, review the documents found here. [http://www.ibm.com/support/search.wss?rs=180&tc=SSEQTP&q=WTRN0063E] You should ensure that all resources (for example: Data sources and connection factories) that are enlisted in the transaction are XA-enabled.
       
     * No, continue to question 4.
       
       
    
    
 4. Does the following message appear in the SystemOut.log file when starting the application server?
    
    
    WTRN0037W: The transaction service encountered an error on an xa_recover operation. The resource was {0}. The error code was {1}. The exception stack trace follows: {2}
     * Yes, review the documents found here. [http://www.ibm.com/support/search.wss?rs=180&tc=SSEQTP&q=WTRN0037W] This error indicates that an application server was brought down uncleanly, perhaps because of a crash or power outage. When the application server starts again, it will try to recover any unresolved transactions. The error means that there was a failure during transaction recovery. If you do not need to recover the transactions, you can avoid the problem by deleting the transaction logs in the following directory:
       
       install_root/profiles/profile_name/tranlog
       
     * No, continue to question 5.
       
       
       
    
    
 5. Is the problem related to an XAException occurring?
    
     * Yes, review the documents found here. [http://www.ibm.com/support/search.wss?rs=180&tc=SSEQTP&q=XAException]
       
     * No, continue to question 6.
       
    
    
 6. Is the problem occurring on system running WebSphere Process Server?

 * 
 *  Yes, do NOT delete the transaction logs (For Example: tranlogs, partnerlogs). Enable a transaction service diagnostic trace as described in the MustGather tab and then consult with the WebSphere Process Server support team. 
 * 
 * 
 * 
 * How to resolve Transaction- and Partnerlog recovery issues in WebSphere Process Server (WPS) and IBM Business Process Manager (BPM)
 * 
 * 
 * System inconsistency due to deleted transaction or partner log for WebSphere Process Server (WPS) and Business Process Manager (BPM)
 * 
 *  No, continue to the next sentence.
   
 * 
 * 
 * 
 * 
 * 
 * v7.0
 * 
 * v8.0
 * 
 * v8.5.5
 * 
 * v9.0
 * 
 * WebSphere Application Server support site
 * 
 * 
 * 

What to do next 
If the preceding troubleshooting steps did not solve your problem, see the MustGather [http://www.ibm.com/support/docview.wss?rs=180&uid=swg21153216] for JTS problems to continue investigation. 

NOTE: It is NOT recommended to simply delete the transaction logs in order to definitively resolve a transaction-related issue. Proper debugging steps, including enabling a transaction service trace should be followed to determine the root cause.  


Cross reference information Segment Product Component Platform Version Edition Application Servers Runtimes for Java Technology Java SDK