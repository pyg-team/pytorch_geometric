Title: IBM Overview of Historical Data Collection Binary File Usage - United States

Text:
historical data collection; HDC; binary files; history files; binary history files; historical data collection attributes; configure HDC; TDW; .LG0 log; history file locations; summarize; summarized; summarise; summarised; 71GEN-DCOLL TECHNOTE (FAQ)

QUESTION
 How does the ITCAM agent load data from binary history files to the Tivoli Data Warehouse, what filenames are associated with selected historical data collection attributes, and where do these binary files reside? 

ANSWER
The Warehouse Proxy Agent and the Summarization and Pruning Agent work together to collect and process historical data.
The Warehouse Proxy Agent reads data from binary history files that are collected at the Tivoli Enterprise Management Server (TEMS) or at the Tivoli Enterprise Management Agent (TEMA). These files are sometimes referred to as Short Term History (STH) files. 

The Warehouse Proxy Agent attempts to insert this data into tables in the Tivoli Data Warehouse (TDW). If the data is more than 24 hours old and is successfully inserted into the Data Warehouse, the data is removed from the binary history files when warehousing occurs.

If, for any reason, the insert operation fails, the binary history file continues to grow. Setting the Warehouse Interval to OFF in the History Collection Configuration panel for an attribute group has the same effect: Data in the binary history file is not added to the TDW, and the size of the binary history file continues to grow.

The Summarization and Pruning agent creates summarized data from the data available in the TDW. The agent adds this data to tables in the TDW that are named for the active Historical Data Collection (HDC) attribute groups. These table names reflect the summarization period. For example, Daily summarized data for RRT Transaction Over Time data is stored in the table RRT_Transaction_Over_Time_D.

The Summarization and Pruning agent deletes records in the TDW tables according to the Pruning interval configured for those attribute groups. Note that the agent does not recover database space. The database administrator needs to run a recovery operation to compact the database.

In the History Collection Configuration panel in the Tivoli Enterprise Portal (TEP) console, it is important to understand that the Summarization and Pruning checkbox options must match. For example, if you select Hourly and Daily summarization, you also need to select Hourly and Daily Pruning. The pruning interval for Detailed data deletes non-summarized data that is older than the configured interval.

In the following example, suppose you selected Hourly and Daily summarization, but only selected Daily pruning. If data is added to the Hourly and Daily tables for an attribute group, but only the Daily table is pruned, the Hourly table for that attribute group in the TDW continues to grow. Similarly, because a pruning interval is not specified for detailed data, the non-summarized data continues to accumulate in the TDW until the database runs out of space.

[/support/docview.wss?uid=swg21394426&aid=1] [/support/docview.wss?uid=swg21394426&aid=1]

A common misconception is that the attribute is configured and collecting data if the attribute icon is green. The green color only indicates that the attribute is distributed to managed systems. The color does not necessarily indicate that the attribute is configured to collect data. Check the summary table to verify which attributes are configured for summarization and pruning.

[/support/docview.wss?uid=swg21394426&aid=2] [/support/docview.wss?uid=swg21394426&aid=2]

For historical data configuration issues in ITCAM for Transactions, refer to the following technote: 

Implementing Historical Data Collection
http://www.ibm.com/support/docview.wss?uid=swg21516594 [http://www.ibm.com/support/docview.wss?uid=swg21516594]

Binary History Files

Binary history files are created in pairs for each historical data collection attribute: a data file and a header file. The data file and the header file share the same basic filename. The header filename includes an .HDR filename extension. The data file does not have a filename extension.

For example, the following pair of files is created for the RRT Application Over Time attribute when historical data collection is enabled for that attribute. These filenames are unique for a specific historical data collection attribute.

T6APPOT
T6APPOT.HDR

The header file resides in the same directory as the data file. Unlike the data files, the header file timestamp is only updated at agent startup. Consequently, the data file and the header file often have different timestamps.

Binary History Filenames

When you select an attribute group name in the History Collection Configuration editor, the binary history filename displays in the right footer. Remove the underscore prefix to get the filename. For example, for the KT6_T6SUBTXCS attribute group, the binary history filename is T6SUBTXCS.

[/support/docview.wss?uid=swg21394426&aid=3] [/support/docview.wss?uid=swg21394426&aid=3]
The following unique filenames are assigned to binary history files based on the historical data collection attribute.



Application Management Console [/support/docview.wss?uid=swg21394426&amp;aid=4] Attribute Group Binary History Filename ERT Agent Messages T3AGNTMSGS AMC Agent T3SNAGENT AMC Application T3SNAPPL AMC Client T3SNCLIENT AMC Client Agents T3SNCLTAGT AMC Server T3SNSERVER AMC Server Agents T3SNSVRAGT AMC Transaction T3SNTRANS 
Internet Service Monitors [/support/docview.wss?uid=swg21394426&amp;aid=4] Attribute Group Binary History Filename KIS DHCP KISDHCP KIS DIAL KISDIAL KIS DNS KISDNS KIS FTP KISFTP KIS HOST STATISTICS KISHSTATS KIS HTTP KISHTTP KIS ICMP KISICMP KIS IMAP KISIMAP KIS LDAP KISLDAP KIS MONITOR STATUS KISMSTATS KIS NNTP KISNNTP KIS NTP KISNTP KIS POP KISPOP KIS RADIUS KISRADIUS KIS RPING KISRPING KIS RTSP KISRTSP KIS SAADHCP KISSAADHCP KIS SAADLSW KISSAADLSW KIS SAADNS KISSAADNS KIS SAAFTP KISSAAFTP KIS SAAHTTP KISSAAHTTP KIS SAAICMP KISSAAICMP KIS SAAJITT KISSAAJITT KIS SAASNA KISSAASNA KIS SAAUDP KISSAAUDP KIS SAAVOIP KISSAAVOIP KIS SERVICE INSTANCE STATISTICS KISSISTATS KIS SERVICE STATISTICS KISSSTATS KIS SIP KISSIP KIS SMTP KISSMTP KIS SNMP KISSNMP KIS SOAP KISSOAP KIS TCPPORT KISTCPPORT KIS TFTP KISTFTP KIS TRANSX KISTRANSX KIS TRANSXSTEP KISTRANSX2 KIS WMS KISWMS 
Robotic Response Time [/support/docview.wss?uid=swg21394426&amp;aid=4] Attribute Group Binary History Filename RRT Agent Messages T6AGNTMSGS RRT Application Status T6APPCS RRT Application Over Time T6APPOT RRT Client Over Time T6CLNTOT RRT Robotic Playback Events T6PBEVENT RRT Robotic Playback Status T6PBSTAT RRT SubTransaction Status T6SUBTXCS RRT SubTransaction Instance T6SUBTXINS RRT SubTransaction Over Time T6SUBTXOT RRT Transaction Status T6TXCS RRT Transaction Instance T6TXINS RRT Transaction Over Time T6TXOT 
Transaction Collector [/support/docview.wss?uid=swg21394426&amp;aid=4] Attribute Group Binary History Filename Diagnostic TUDIAG Status TUSTATUS 
Transaction Reporter [/support/docview.wss?uid=swg21394426&amp;aid=4] Attribute Group Binary History Filename Aggregates AGGREGATS Interactions INTERACTN Transaction Instances TINST Transaction Instance Interactions TINSTINT 
Web Response Time [/support/docview.wss?uid=swg21394426&amp;aid=4] Attribute Group Binary History Filename WRT Agent Messages T5AGNTMSGS WRT Application Status T5APPCS WRT Application Over Time T5APPOT WRT Client Status T5CLNTCS WRT Client Over Time T5CLNTOT WRT Server Status T5SRVCS WRT Server Over Time T5SRVOT WRT SubTransaction Status T5SUBTXCS WRT SubTransaction Instance T5SUBTXINS WRT SubTransaction Over Time T5SUBTXOT WRT Transaction Status T5TXCS WRT Transaction Instance T5TXINS WRT Transaction Over Time T5TXOT 

Binary History File Locations 

Binary history files appear in platform-specific directories. 

Collect at TEMA 

ITM_HOME\TMAITM6\logs\History\K<product-code> (Windows) 
ITM_HOME/<architecture>/<product-code>/hist (Unix/Linux) 

Example: /opt/IBM/ITM/aix523/t6/hist (Unix/Linux) 

Collect at TEMS 

ITM_HOME\CMS (Windows) 
ITM_HOME/tables/<tems-name> (Unix/Linux) 

Example: /opt/IBM/ITM/tables/mytems 

Determining When HDC is Active on an Agent 

An .LG0 log is created each time an agent starts. This log indicates which situations and historical data collection attributes have started and stopped on the agent. The filename and location are platform-specific. 

ITM_HOME\TMAITM6\logs\<hostname>_<product-code>.LG0 (Windows) 
ITM_HOME/logs/<hostname>:<product-code>.LG0 (Unix/Linux) 

For example, the following is the .LG0 filename for the T6 agent on server MyServer: 

MyServer_T6.LG0 (Windows) 
MyServer:T6.LG0 (Unix/Linux) 

In the .LG0 log, look for the presence of UADVISOR messages. These messages indicate that historical data collection is starting or stopping for a specific attribute. For example, the following UADVISOR message indicates that historical data collection has started for the T6 attribute T6APPOT (RRT Application Over Time). 

1090717181915344KRAIRA000 Starting UADVISOR_KT6_T6APPOT <711983735,3482322845> for KT6.T6APPOT. 

These UADVISOR messages appear in the agent .LG0 file regardless of the binary history file being written at the TEMS or the TEMA. RELATED INFORMATION
 Implementing Historical Data Collection [http://www.ibm.com/support/docview.wss?uid=swg21516594]




PRODUCT ALIAS/SYNONYM
 ITCAMfT
T7.4