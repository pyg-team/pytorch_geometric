Title: IBM Following successful login the WorkplaceXT browse page is frozen - United States

Text:
 TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 User logs into FileNet WorplaceXT through SSO (issue also occurs when SSO is not used) and the browse page freezes.


No errors are reported. 

SYMPTOM
Client browser is frozen and needs to be closed. 


Issue stems from having HTTP-only session cookies enabled on WebSeal proxy, which is not supported by WorkplaceXT:

Enabling the Java console shows these errors:

Error from Java console: 

network: Cache entry not found [url: 
https://<host>/INTEGRATION/olecm/WorkplaceXT/download/com/
filenet/applets/draganddrop/DragAndDropApplet.class, version: null] 

network: Connecting 
https://<host>/INTEGRATION/olecm/WorkplaceXT/download/com/
filenet/applets/draganddrop/DragAndDropApplet.class with proxy=DIRECT 

network: Connecting 
https://<host>/INTEGRATION/olecm/WorkplaceXT/download/com/
filenet/applets/draganddrop/DragAndDropApplet.class with cookie 
"AMWEBJCT!%2FINTEGRATION%2Folecm!LtpaToken2=HGFKZAb7F9OeLnSq+MQCWp37zXKg
tdFlC/l0XVsOzOKatvwTFlBoZbakC2iN/o1lasL+ZhVVj0hGOI6zfgYAro065qLrVZY+pBYD
eBS0+gOAcNnSZSuhfwqZhzMbipF+4FujA+cEOKSaVdLC3D0/XtxUM8Wn2OQ02j4+5WGMeVCw
9myvN8/qn4YWWHKF4nkCHC0HNhGrGsR4vUgTMnOfLWhx6MzxVgveZKGKNMWJq7Pm4CbEGJ59
JUErTVQAYpE5RsMFxlm2QICZ45hofjlU1XcfS0lCODdN++kGA+zztybFfE75B1xuExatgGdh
xZv8naCAzH4BL3XYZQ9gCMh2cwh9lsUy3TUuRtWxljdWTSA4m2asx55iupDH9VDq9p95A/6y
DKkDcqFWUXPVK4wRaEPcI19vJpFNhSjNZsLvKqBOVz0nNt/8Cd/+a2FGnWjFJm6pg5ycN6+w
FjfHKfOloT1D+ChfbRjw6zxPA9G7NrykbNvfZKXLwG8Sy8xpSp6dlLkGzC1b2rEeUnUImPwi
mMadsObwPO1pkYs+ndXObdYLRE6FILpqWNCflyXCojxau6E85EPNGmOl2TKKTY6TQxpneTjt
ff1J7rckvZ1BtYILA41hkKV0vL4klxpt3JHX3yvUNiC2M7NPpHGu5Fa2yeY7+CqL8lUWMW8x
GegKUgQz0wjlsHEm5ZnydkqneTXkCn3LLyj3UfeNEbE6XvymeGufY7QvfDz+mHRHJmeiyRHi
c9FEYEVtpu3qrneb7dPc; 
AMWEBJCT!%2FINTEGRATION%2Folecm!JSESSIONID=0000KLe6TzfCcWx3Y7m-YH39uHx:-
1" 

network: Server 
https://<host>/INTEGRATION/olecm/WorkplaceXT/download/com/
filenet/applets/draganddrop/DragAndDropApplet.class requesting to 
set-cookie with 
"PD-S-SESSION-ID-APPS=2_Sb9c2qg57Il6Pvk3fSPnbwdW5pXC-fbwezTWeS5ShoVw-u3t
; Path=/; Secure; HttpOnly" 

network: Cache entry not found [url: 
https://<host>/INTEGRATION/olecm/WorkplaceXT/download/, 
version: null] 

basic: error: Incompatible magic value 1010792557 in class file 
com/filenet/applets/draganddrop/DragAndDropApplet. 

java.lang.ClassFormatError: Incompatible magic value 1010792557 in class
file com/filenet/applets/draganddrop/DragAndDropApplet 


CAUSE
The incompatible magic number error occurs when verifying the magic number from class file. The magic number in error
(1010792557) when converted (to hex and then ascii) represents characters "<?xm" which is an XML declaration, not a class file. 
From the trace you can see that the WebSEAL session cookie is missing from the client request. Then you can see that response to request is returned with a Set-Cookie header for a WebSEAL session cookie with attribute "HttpOnly". 

In this scenario, a Java Plugin to browser does not get access to HttpOnly session cookie from browser's cookie jar therefore WebSEAL is returning an authentication challenge rather than the expected class file. 




ENVIRONMENT
Attempting to configure SSO with WorkplaceXT and WebSeal/WAS TAI ++ interceptor with HTTP-only session cookies enabled



DIAGNOSING THE PROBLEM
Enable the Java console and review the trace output



RESOLVING THE PROBLEM
 

Disable the HTTP-Only session cookies in WebSeal as this is not a supported configuration.

See page 63 of the Hardware/Software requirements for IBM FileNet P8 5.x:
http://www-304.ibm.com/support/docview.wss?uid=swg27013654&aid=7 [http://www-304.ibm.com/support/docview.wss?uid=swg27013654&aid=7]

WebSEAL 


WebSEAL has an option to prevent Cross-site scripting, which is a common security problem for Web servers. To enable this option WebSEAL documentation recommends that you add the HTTPOnly attribute to Session and Failover Set-Cookie headers and change the value of use-http-onlycookies in the [server] stanza of the WebSEAL configuration file to "yes".
The WebSEAL default value is "use-http-only-cookies = no".
However, if the use-http-only-cookies parameter is set to "yes", the Workplace and Workplace XT java applets fail to load. This is because in an SSO configuration when Cross-site scripting prevention is enabled the SSO-related cookies are no longer available to the P8 applets for re-establishing the SSO session with the Application Engine.