Title: IBM IZ91426: NON-AGENT BUNDLE FAILS TO DEPLOY DUE TO MISSING COMMANDS - United States

Text:
 SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  APAR Type:            Field
   
   Approver Initials:    AS
   Severity:             1
   Reported Release:     622
   Compid:               5724C04BR ITM Agent Builder V6
   ABSTRACT:             NON-AGENT BUNDLE FAILS TO DEPLOY DUE TO
   MISSING COMMANDS
   
   PROBLEM DESCRIPTION:
   
   
   Customer was unable to deploy non-agent bundle for HP-UX 11 64
   bit platform built with 6.2.2.3 IF0002 Agent Builder.
   
   
   There are two distinct problems that cause the deploy to fail.
   
   1) Unable to perform tacmd addbundles for hp116 platform.
   
      The <PlatformCodes> section did not contain any
   <PlatformCode>
      subsections in monitoringcollectionscriptshp116.dsc.
   
      The <PlatformCodes> section looked as follows:
      <PlatformCodes>
      </PlatformCodes>
   
      It should have looked as follows:
      <PlatformCodes>
          <PlatformCode>
              <Code>hp116</Code>
              <DefaultPCDesc>HP-UX R11 Integrity (64
   bit)</DefaultPCDesc>
          </PlatformCode>
      </PlatformCodes>
   
   This has been fixed in Agent Builder 6.2.2.5.
   
   2) The deploy failed with messages about the mkdir and/or cp
   command not being found after I was able to populate the
   depot.
   
    The mkdir and cp commands could not be found because they
   were not fully qualified and they were not running in a
   shell environment where they could be searched for.
   
   
   RECREATE INSTRUCTIONS:
   
   1) Install ITM 6.22 FP2 TEMS
   2) Install ITM 6.22 FP2 OS agents for HP-UX 11 64 bit and a few
      other platforms.
   3) On the TEMS system, expand the customer supplied tgz file
      72326.070.724.MonitoringCollectionScripts.tgz
   4) Set the variable BUNDLEPATH to the fully qualified directory
      where the tgz file was expanded.
   5) Verify that the required dsc files exist
      ls $BUNDLEPATH/monitoringcollectionscriptshp*116.dsc
   6) From the TEMS system run tacmd listbundles to verify that the
      HP-UX bundles are recognized.
          tacmd listbundles -i $BUNDLEPATH -p hp116 hpi116
   7) Notice that the bundle information for hpi116 is listed and
      the bundle information for hp116 is not there.
   8) Repair monitoringcollectionscriptshp116.dsc by editing the
      file and changing:
   
      <PlatformCodes>
      </PlatformCodes>
   
      to the following:
   
      <PlatformCodes>
          <PlatformCode>
              <Code>hp116</Code>
              <DefaultPCDesc>HP-UX R11 Integrity (64
   bit)</DefaultPCDesc>
          </PlatformCode>
      </PlatformCodes>
   9) Save the file
   10) Repeat step 6
   11) Notice that the bundle for both hpi116 and hp116 are now
       listed.
   12) Deploy the bundle o an hp116 platform and some other
       platforms.
   13) Notice that all of the deployments failed with messages
       about the mkdir or cp commands not being found.
   
   
    
   
   

LOCAL FIX
 *  1) Repair monitoringcollectionscriptshp116.dsc by editing the
      file and changing
   
      <PlatformCodes>
      </PlatformCodes>
   
      to the following:
   
      <PlatformCodes>
          <PlatformCode>
              <Code>hp116</Code>
              <DefaultPCDesc>HP-UX R11 Integrity (64
   bit)</DefaultPCDesc>
          </PlatformCode>
      </PlatformCodes>
   2) Save the file
   
   
   3) Repair all of the Unix and Linux *.dsc files by changing the
      various <Command> ... </Command> sections from
      <Command>mkdir -p ...</Command>
      <Command>cp ...</Command>
      to the following syntax to invoke a shell for the commands
      <Command>/bin/sh -c "mkdir -p ..."</Command>
      <Command>/bin/sh -c "cp ..."</Command>
   
   4) Populate the TEMS depot
   5) Deploy as needed.
   
   
    
   
   

PROBLEM SUMMARY
 *  There were 2 problems initially described in this APAR:
   
   1) Unable to perform tacmd addbundles for hp116 platform.
   The <PlatformCodes> section did not contain a <PlatformCode>
   subsection with <Code>hp116</Code> in the <...>hp116.dsc.
   This problem has been fixed in Agent Builder version 6.2.2.5.
   
   2) The deploy failed with messages about the mkdir and/or cp
   command not being found after I was able to populate the depot.
   
   Remote deploy fails when deploying the bundle because the
   commands to run are not fully qualified nor included in the
   bundle.
   
   
    
   
   

PROBLEM CONCLUSION
 *  The fix for this APAR is included in the following maintenance
   vehicle:
   
      | interim fix | 6.2.2.5-TIV-ITM_ABLDR-IF0001
   
   Note: Search the IBM technical support web site for maintenance
   package availability.
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   IZ91426
   
   
 * REPORTED COMPONENT NAME
   ITM AGENT BUILD
   
   
 * REPORTED COMPONENT ID
   5724C04BR
   
   
 * REPORTED RELEASE
   622
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2010-12-28
   
   
 * CLOSED DATE
   2011-01-28
   
   
 * LAST MODIFIED DATE
   2011-01-28
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   ITM AGENT BUILD
   
   
 * FIXED COMPONENT ID
   5724C04BR
   
   

APPLICABLE COMPONENT LEVELS
 * R622 PSY
   UP