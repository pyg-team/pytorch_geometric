Title: IBM Troubleshooting: Connection problems to the IBM HTTP Server (IHS) Admin Server - United States

Text:
HTTP Server; IHS adminconsole; WebSphere Administrative console; TroubleShootingDocument; TroubleShootingFlowDocument TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 This document should help address common issues with this component before calling IBM support and save you time. 

RESOLVING THE PROBLEM

Steps to help resolve connection problems to IBM HTTP Server Admin server 


 1. Is the Application Server, deployment manager, able to connect to the Web server over the management port. By default, using the adminctl process, this port will be 8008. When using a Javaâ„¢ nodeagent process on the Web server, for a managed node, this will be over port 8880 or 8879.
    
    This can be tested using the following command:
    
    telnet <webserverip> <port> 
    telnet 1.2.3.4 8880 
    Where 1.2.3.4 is the IP address of the Web server system.  * Yes, this should give a SOAP fault error response. This simply shows that a connection can be established and there is no firewall or network issues.
       
       
     * No, you must investigate to see what would block the deployment manager from connecting to the webserver over the admin port. (If you are still unable to find the root cause of this, then the mustgather doc at the bottom of this technote will be needed.)
    
    
    
 2. If you are able to establish the connection then we need to check the admin_access.log file within the install_root/logs/ directory.  1. If you have entries like the following with a 401 response code:
        
        "POST /wasadmin/ HTTP/1.1" 401 
        Then the user ID that was passed from the administrative console is not added to the admin.passwd file. You must use the install_root/bin/htpasswd command to add the user name and password, which is set in the deployment manager administrative console for this Web server. 
        
     2. If there are other errors then such as invalid path or file not found errors within the admin_error log then the paths within the deployment manager administrative console for that Web server are not correct.
        
        The commands and data sent to the Web server admin process is based on the configuration within the deployment manager.
        
        For example:
        
        /opt/IHS_HOME./ 
        The preceding path would fail to start the Web server process as there is no "." within the directory name on the Web server. This would result in the bin/ directory not being found and not allowing apachectl to be started. 
        
     3. If no errors are found, or the error is unclear, collect the MustGather at the bottom of this technote and send that into WebSphere Application Server support.
        
    
    
 3. The Web server process, apachectl, never gets called and an httpd process is never shown.
    
    Most cases this is due to the fact that the httpd.conf file is trying to listen on a port below 1024, which requires that the httpd process be started as root.
    
    To start the httpd process as root, the management process, adminctl, or Java nodeagent, must be running as root.
    
    
 4. When all else fails, from a command prompt try to invoke the deployment manager GUI command to see what data is passed to the Web server then this data can be compared to the Web server configuration and paths to validate the command issued by the deployment manager was correct.
    
    To do this:
    
    Issue an mbean call to the Web server for specific operation you are trying to complete. To do this, run wsadmin on the deployment manager or application server. Then run the following:
    
    set mb [$AdminControl queryNames type=WebServer,*]
    $AdminControl invoke $mb <operation> { <cellName> <nodeName> <serverName> } 
    Where, operation is "start/stop/ping/status" cell/node/server is the repository location of the Web server in which the operation is performed on. 
    Ping would be the best operation to use when trying to determine cause of start/stop/console status problems. File transfer is more difficult to diagnose. If there is a file transfer problem (such as viewing log files), it might be helpful to issue a ping or start/stop request as the underylying issue might be the same. Running this command should help provide more insight into cause of problem. 
    

What to do next 
If the preceding troubleshooting steps did not help solve your problem, see the MustGather [http://www.ibm.com/support/docview.wss?rs=180&uid=swg21174894]for WebSphere Application Server HTTP plug-in problems to continue investigation. 


Cross reference information Segment Product Component Platform Version Edition Application Servers Runtimes for Java Technology Java SDK