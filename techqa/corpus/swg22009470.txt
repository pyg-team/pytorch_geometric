Title: IBM Guardium Monitoring via INFORMIX EXIT for Informix 12.10 not working - United States

Text:
 TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 Informix Exit on 12.10 not capturing local and network traffic 

SYMPTOM
No sessions shown on the Session list report for the Server IP where Informix Exit is activated


CAUSE
Informix home directory not set in Inspection engine configuration

ENVIRONMENT
Linux/Unix STAP-10.1.2 and STAP-10.1.3 

DIAGNOSING THE PROBLEM
Follow the below steps to diagnose the issue




1. Run the command to verify the Informix version

onstat -

IBM Informix Dynamic Server Version 12.10.UC8

2. Go to the directory /opt/IBM/informix/etc run the below command and verify ifxguard settings are correct

cat ifxguard.ondemo

NAME ondemo_guard
LOGFILE /home/informix/ids/guard.log
WORKERS 4
LIBPATH /home/informix/ids/lib/libguard_informix_exit_32.so
DEBUG 2

The library path above should contain the location where the libguard_informix_exit is copied normally this should be under /opt/IBM/informix/lib

3. Run the below command to check ifxguard and STAP is loaded

ps -ef|grep ifxguard
informix 4153 1 0 11:41 ? 00:00:00 ifxguard

ps -ef|grep stap
root 3760 1 0 11:37 ? 00:00:00 /opt/guardium/guard_stap/guard_stap /opt/guardium/guard_stap/guard_tap.ini

4. Run the Guard_diag in debug mode 4 like below

/usr/local/guardium/guard_stap/guard_diag 4

5. Check for error messages like below

2017.09.15 11:37:09 FAM: ERROR: no ktap, FAM not available
2017.09.15 11:37:10 Connected to Primary Server 192.168.13.210
2017.09.15 11:37:20 Disconnected from Primary Server 192.168.13.210
2017.09.15 11:37:20 Server 192.168.13.210 wasn't heard from for 10 sec during this attempt (10 sec total), closing and re-opening
2017.09.15 11:37:21 Connected to Primary Server 192.168.13.210
2017.09.15 11:37:29 Gim Server is not configured
2017.09.15 11:42:00 DEBUG_CONSOLE(0): "INFX_EXIT: db_home /home/informix not found in IEs"



RESOLVING THE PROBLEM
1. Find the correct db install dir 

 2. Add it to the inspection engine and restart S-TAP 

On the GUI edit the Informix_exit Inspection engine and under db_install_dir add the Informix home dir and restart the STAP

RELATED INFORMATION
 how to check session reports [http://www-01.ibm.com/support/docview.wss?uid=swg21699711]