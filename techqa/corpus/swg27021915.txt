Title: IBM Special Instructions for WebSphere Process Server and WebSphere Enterprise Service Bus V7.0.0 Fix Pack 4 (V7.0.0.4) - United States

Text:
Upgrade instructions; fix pack 7.0.0.4; 7.0.0.4; 7.0.0.4 ; fix pack : upgrade PRODUCT README

ABSTRACT
 This document provides the additional instructions required to complete the upgrade of existing profiles, with special requirements, to IBM WebSphere Enterprise Service Bus and IBM WebSphere Process Server, Version 7.0.0 Fix Pack 4 (V7.0.0.4). 

CONTENT


 * WebSphere Process Server [http://www.ibm.com/support/docview.wss?uid=swg24030205]
 * WebSphere Enterprise Service Bus [http://www.ibm.com/support/docview.wss?uid=swg24030312]

TAB NAVIGATION
 * Fix Pack Install [http://www.ibm.com/support/docview.wss?uid=swg27021913]
 * Profile upgrade [http://www.ibm.com/support/docview.wss?uid=swg27021912]
 * Special case [http://www.ibm.com/support/docview.wss?uid=swg27021915]- selected tab,
 * Known issues [http://www.ibm.com/support/docview.wss?uid=swg27021914]



Table of Contents

 * Mixed configuration environments
 * Cluster upgrade with minimum downtime



MIXED CONFIGURATION ENVIRONMENTS


If you are using mixed configuration environment where you have both clustered and non-clustered servers in the same cell, you should adapt the same steps provided for upgrading a network deployment environment [http://www-01.ibm.com/support/docview.wss?uid=swg27021912#nd_config] to suite your topology. 

In a mixed configuration environment, you must adhere to the following rules to prevent the upgrade from failing: 
 * All Java™ virtual machines (JVMs) in the installation that are being upgraded should be stopped.
   
   
 * If your installation has a managed profile, the Deployment Manager should be running when you apply the fix pack. If this is not possible, you must manually call the upgrade script (BPMProfileUpgrade.ant) after receiving the appropriate error messages. See the Recovering from profile update errors [http://www.ibm.com/support/docview.wss?uid=swg27021912#recoverFailure] section for details. The only exception to this rule is for managed profiles hosted by the same installation as their Deployment Manager profile. The managed node configuration will be updated as part of the Deployment Manager profile in this scenario. 
   
   
 * If your cluster has Business Process Choreographer configured, you must stop all members at the older version before you start any of the upgraded members. After an upgraded member has been started, you must no longer start members of the 'old' version.
   Back to top
   
   
   


CLUSTER UPGRADE WITH MINIMUM DOWNTIME


Attention : Installation Manager on the Microsoft Windows XP operating system does not recognize profile update errors. When you upgrade an installation on the Windows XP operating system, you must look at the Identifying Profile Update Errors [http://www.ibm.com/support/docview.wss?uid=swg27021912#_Identifying] section, even if Installation Manager ended with the following message: "The packages are updated". 

These instructions assume the following sample setup; you might need to be adapt them to your environment: 
 * Deployment manager is on an installation of its own.
   
   
 * The cluster includes a minimum of two servers, each on its own installation.
   
   
 * Automatic node synchronization is enabled (this is the default). 


Perform the following steps to upgrade your clusters:  1. Stop the Deployment Manager.
    
    
 2. Install V7.0.0 Fix Pack 4 (V7.0.0.4) onto the Deployment Manager installation using either IBM Installation Manager or silent installation as explained in the fix pack installation instructions [http://www.ibm.com/support/docview.wss?uid=swg27021913].
    
    
 3. Check for any errors as explained in the Identifying Profile Update Errors [http://www.ibm.com/support/docview.wss?uid=swg27021912#_Identifying] section before continuing.
    
    
 4. Start the Deployment Manager. This step is necessary because the fix pack installer must connect to the central configuration repository on the Deployment Manager to make the updates.
    
    

Upgrading clusters: 
Do not upgrade more than one remote installation at a time. The fix pack installer connects to the central configuration repository on the Deployment Manager to make the updates. Updating multiple installations that host cluster members at the same time might cause conflicts on the central configuration repository and cause one or more of the profile updates to fail. 
For each cluster, complete the following steps:



 1.  Stop half the cluster members and their node agents (for example if you have two members, stop one).
     
     
 2.  Install V7.0.0 Fix Pack 4 (V7.0.0.4) onto the corresponding installations that host cluster members using either IBM Installation Manager or silent installation as explained in the fix pack installation instructions [http://www.ibm.com/support/docview.wss?uid=swg27021913]. Check for any errors as explained in the Identifying Profile Update Errors [http://www.ibm.com/support/docview.wss?uid=swg27021912#_Identifying] section before continuing.
     
     
     Warning: Do not restart the servers at this point.
     
     
 3.  Stop the remaining set of cluster members and their node agents. This short downtime cannot be avoided.
     
     
     Note: Different versions of the cluster members cannot be up and running at the same time. After an upgraded member has been started you must no longer start members of the 'old' version.
     
     
 4.  Stop the Deployment Manager.
     
     
 5.  On the Deployment Manager, change directories to <install_root>/.
     
     
 6.  Depending on your platform, run one of the following commands:
     
     
     On Windows operating systems: 
     bin\ws_ant.bat -f util\BPMProfileUpgrade.ant -profileName <profileName>-Dupgrade=true –Dcluster=<clusterName>
     
     
     On UNIX-based and Linux operating systems:
     bin/ws_ant.sh -f util/BPMProfileUpgrade.ant -profileName <profileName>-Dupgrade=true –Dcluster=<clusterName>
     
     
     where <profileName> is the name of the deployment manager profile and <clusterName> is the name of the cluster. 
     
     
 7.  Check the following log file for errors: <profile_root>/logs/BPMProfileUpgrade.<profileName>.<clusterName>.<timestamp>.log where <profile_root> is the root directory of the Deployment Manager profile. 
     If there is an error, fix the cause, then rerun step 6.
     
     
 8.  If Business Space is configured on the cluster, manual steps are required for updating existing Business Space templates and spaces. Follow steps 1a and 1b of Updating Business Space templates and spaces after installing or updating widgets [http://publib.boulder.ibm.com/infocenter/dmndhelp/v7r0mx/index.jsp?topic=/com.ibm.websphere.wbpm.bspace.config.doc/doc/tcfg_bsp_update_temp_spc.html]. Do not complete the node synchronization and restart the server until you have read the following steps.
     
     
 9.  When the cluster has been successfully upgraded, restart the Deployment Manager.
     
     
 10. Restart the node agents of those nodes where V7.0.0 Fix Pack 4 has already been applied and wait for the node synchronization to complete.
     
     
 11. Restart the cluster members of those nodes where V7.0.0 Fix Pack 4 has already been applied.
     
     
 12. Install V7.0.0 Fix Pack 4 (V7.0.0.4) onto the installations of the remaining cluster members using either IBM Installation Manager or silent installation as explained in the fix pack installation instructions [http://www.ibm.com/support/docview.wss?uid=swg27021913].
     
     
 13. Check for any errors as explained in the Identifying Profile Update Errors [http://www.ibm.com/support/docview.wss?rs=2307&uid=swg27021912#_Identifying] section before continuing.
     
     
 14. Restart the node agents and cluster members after the fix pack has been installed. 
     Back to top
     
     
     


TRADEMARKS AND SERVICE MARKS


For trademark attribution, visit the IBM Terms of Use [http://www.ibm.com/legal] Web site. 
Back to top






ORIGINAL PUBLICATION DATE
 2011/7/8 



Cross reference information Segment Product Component Platform Version Edition Business Integration WebSphere Enterprise Service Bus Install AIX, HP-UX, Linux, Linux zSeries, Solaris, Windows 7.0.0.4