Title: IBM IZ41142: JMS DATASOURCE ADAPTOR CANNOT PROCESS MESSAGES RECEIVED WITH "NULL" /BLANK SOAP PROPERTIES - RESULTS IN JAVA ERROR. - United States

Text:
 SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  Problem Description/Question: JMS Datasource Adaptor cannot
   process messages received with "null" /blank SOAP Properties -
   results in Java error.
   
   Business Partner tested with JMS provider -- Two messages sent,
   one with a specified Property the other message with the same
   Property as Null
   
   .
   Operating System:    Solaris 10
   
   Impact version is    Build:
   /opt/netcool/impact/lib/nci20081205v40b616a.jar
   .
   Result of the test:-
   First message is OK, please see below:
   ---------------------------------------
   Received a new JMS message--> BytesMessage={ Header={
   JMSMessageID={ID:
   T8003-CLAYTON-EMS-SERVER-1.2EA348D8542C1:7BB9ED}
   JMSDestination={Queue
   [xxxxxxx.SMO.TroubleTicket.Notifications]} JMSReplyTo={null}
   JMSDeliveryMode={PERSISTENT} JMSRedelivered={false}
   JMSCorrelationID=
   {null} JMSType={null} JMSTimestamp={Mon Jan 19 11:13:32 EST
   2009}
   JMSExpiration={0} JMSPriority={4} } Properties={
   transactionName=
   {String:NotifyOutageAndUpdate}
   SOAPJMS_providerSystem={String:ITAM}
   sourceSystem={String:ITAM}
   transactionID={String:AG222311307200SObnYQg-
   I1AAv0IB} SOAPJMS_bindingVersion={String:1.0}
   SOAPJMS_notificationType=
   {String:NotifyOutageAndUpdate} ProductName={String:HFC Data
   Platform}
   SOAPJMS_requestIRI={String:jms:ems/islassure/xxxxxxx.SMO.Trouble
   Ticket.
   NotifyOutage} targetSystem={String:ISL-ASSURE}
   SOAPJMS_lastUpdatedBy=
   {String:ITAM} SOAPJMS_soapMEP={String:http://www.w3.
   org/2006/03/soap/mep/one-way/}
   SOAPJMS_networkTechnology={String:}
   targetFunctionName={String:notifyOutage}
   SOAPJMS_contentType={String:
   text/xml;charset=utf-16} SOAPJMS_sourceSystem={String:Bigpond}
   timeStamp={String:2008-11-18T02:50:59}
   SOAPJMS_soapAction={String:http:
   //TicketManagement/notifyOutageAndUpdate}
   SOAPJMS_ticketType={String:
   NotifyOutage} SOAPJMS_modifiedFields={String:Outage Message,}
   SOAPJMS_ticketID={String:INC000000413870}
   JMS_TIBCO_SENDER={String:
   T8003-CLAYTON-EMS-SERVER-2} } Bytes={11272 bytes} }
   ---------------------------------------
   Sending a block of: 1 events having block identifier: 25
   Current Queue Size: 0 Delta Queue: 0 Number of Messages
   Received: 1
   Total Messages Received: 25
   
   
   However the same message with a nullSOAP property of
   SOAPJMS_networkTechnology throws an exception  Caught exception
   when
   processing received JMS message. Error is null
    :
   ---------------------------------------
   Received a new JMS message--> BytesMessage={ Header={
   JMSMessageID={ID:
   T8003-CLAYTON-EMS-SERVER-1.2EA348D8542C1:7BBA2D}
   JMSDestination={Queue
   [xxxxxxx.SMO.TroubleTicket.Notifications]} JMSReplyTo={null}
   JMSDeliveryMode={PERSISTENT} JMSRedelivered={false}
   JMSCorrelationID=
   {null} JMSType={null} JMSTimestamp={Mon Jan 19 11:14:50 EST
   2009}
   JMSExpiration={0} JMSPriority={4} } Properties={
   transactionName=
   {String:NotifyOutageAndUpdate}
   SOAPJMS_providerSystem={String:ITAM}
   sourceSystem={String:ITAM}
   transactionID={String:AG222311307200SObnYQg-
   I1AAv0IB} SOAPJMS_bindingVersion={String:1.0}
   SOAPJMS_notificationType=
   {String:NotifyOutageAndUpdate} ProductName={String:HFC Data
   Platform}
   SOAPJMS_requestIRI={String:jms:ems/islassure/XXXXXXX.SMO.Trouble
   Ticket.
   NotifyOutage} targetSystem={String:ISL-ASSURE}
   SOAPJMS_lastUpdatedBy=
   {String:ITAM} SOAPJMS_soapMEP={String:http://www.w3.
   org/2006/03/soap/mep/one-way/} SOAPJMS_networkTechnology={null}
   targetFunctionName={String:notifyOutage}
   SOAPJMS_contentType={String:
   text/xml;charset=utf-16} SOAPJMS_sourceSystem={String:Bigpond}
   timeStamp={String:2008-11-18T02:50:59}
   SOAPJMS_soapAction={String:http:
   //TicketManagement/notifyOutageAndUpdate}
   SOAPJMS_ticketType={String:
   NotifyOutage} SOAPJMS_modifiedFields={String:Outage Message,}
   SOAPJMS_ticketID={String:INC000000413870}
   JMS_TIBCO_SENDER={String:
   T8003-CLAYTON-EMS-SERVER-2} } Bytes={11272 bytes} }
   ---------------------------------------
   
   To replicate this problem, BP did the following:-
   1.    Setup a JMS Provider to send messages to the a JMS Message
   Listener
   
   2.    Created a message with a custom SOAP property. This should
   be
   specified in the message with a type & value. In the JMS Message
   Listener log it should say
   ?Properties={<<PROPERTYNAME>>={<<TYPE>>:<<VALUE>>}?.}
   
   3.    Created a message with a custom SOAP property. This should
   not be
   specified and should be NULL (type included). In the JMS Message
   Listener log it should say
   ?Properties={<<PROPERTYNAME>>={null}?.}. This
   will throw an exception and will not be processed by the policy.
   
   
    
   
   

LOCAL FIX
 *  No Fix at the moment
   
   
    
   
   

PROBLEM SUMMARY
 *  ****************************************************************
   USERS AFFECTED:
   All Netcool/Impact users who are using JMS Listener
   ****************************************************************
   PROBLEM DESCRIPTION:
   If a message was sent with a null property value, Listener
   throws a null exception pointer.
   ****************************************************************
   RECOMMENDATION:
   Impact version 4.0.2 with Fix pack 0001
   ****************************************************************
   
   
    
   
   

PROBLEM CONCLUSION
 *  A check was added to avoid and handle null values.
   Fixed in Impact 4.0.2 Fix Pack01
   4.0.2.1-TIV-NCI-FP0001
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   IZ41142
   
   
 * REPORTED COMPONENT NAME
   NETCOOL/IMPACT
   
   
 * REPORTED COMPONENT ID
   5724O59IS
   
   
 * REPORTED RELEASE
   400
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2009-01-20
   
   
 * CLOSED DATE
   2009-02-25
   
   
 * LAST MODIFIED DATE
   2010-08-31
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   NETCOOL/IMPACT
   
   
 * FIXED COMPONENT ID
   5724O59IS
   
   

APPLICABLE COMPONENT LEVELS
 * R402 PSY
   UP