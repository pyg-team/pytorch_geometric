Title: IBM Migrating from 3.7 to 3.8 - United States

Text:
Import; fail; CtrlServices; error TECHNOTE (FAQ)

QUESTION
Is migration supported from 3.7? How to migrate from 3.7 to 3.8.

ANSWER
Before you upgrade from IBM Tivoli Network Manager IP Edition version 3.7 to version 3.8, please review the chapter on Upgrading Network Manager in the IBM Tivoli Network Manager IP Edition version 3.8 Installation and Configuration Guide, and also review the following additional notes on migration. 

Perform the following migration tasks in addition to those described in the IBM Tivoli Network Manager IP Edition v3.8 Installation and Configuration Guide:

1. On Linux/UNIX, after installing Network Manager V3.8, stop and restart the Tivoli Integrated Portal (TIP) server before importing version 3.7 data using either the Launchpad or the nmImport script as follows (otherwise the roles are not correctly assigned to users):
Source the installation_directory/netcool/env.sh script.
Run the itnm_stop tip command. 
Run the itnm_start tip command.


2. If you run the migration while the Network Manager processes are running you must stop and restart the ncp_config process after the migration in order for the migrated configuration files to be re-read. Use the following steps to stop and restart the ncp_config process: 
On Unix/Linux:
Source the installation_directory/netcool/env.sh script to set up your environment. 
Run the itnm_stop ncp command 
Run the itnm_start ncp command
On WindowsÂ®: use the Windows services console to stop the ncp_ctrl service.
After importing version 3.7 configuration data into Network Manager V3.8, add the version 3.7 roles (ncp_*) to the itnmadmin user as follows:
Login as tipadmin and navigate to User and Groups -> Administrative User Roles -> and add all roles to the itnmadmin user. 
Logout and login again and verify that you can view all the migrated pages.

Migrate the following discovery and monitoring configuration files manually:

CtrlServices.cfg
DbLogins.<DOMAIN>.cfg (where <DOMAIN> is the name of your network domain)
DbEntityDetails.cfg
GUI meta data

In addition, if you have customized to any of the following files, migrate them manually:
NcoGateInsert.cfg
VirtualDomainSchema.cfg
DbEntityDetails.cfg
NcoLogin or ServiceData files
Any new or modified webtools or menus
topoviz.properties
Any modified disco agents or stitchers (any new disco agents and stitchers will be imported automatically, but must be verified for applicability in version 3.8)
Customizations to the v3.7 NCIM topology database schema (as described in the Network Manager Installation and Configuration Guide)
ModelNcimDb.cfg and any related NCIM modifications
ncimMetaData.xml
dynamictemplates (ie. ip_default.xml)

Running the $NCHOME/precision/scripts/perl/scripts/ITNMDataImport script as follows will output the steps that would be taken but not actually perform the migration. This should be used to determine what needs to be migrated manually:

$NCHOME/precision/bin/ncp_perl $NCHOME/precision/scripts/perl/scripts/ITNMDataImport.pl -import -simulate

3. Polling definitions and policies must be manually migrated with the aid of the get_policies.pl script. 

On the version 3.7 Network Manager server, extract the poll definitions and policies to an xml file by running the following command:

$NCHOME/precision/bin/ncp_perl $NCHOME/precision/scripts/perl/scripts/get_policies.pl -from domain=<DOMAIN NAME> -to file=<XML FILE TO EXTRACT POLLS TO> -password <DB PASSWORD>

Afterwards on the version 3.8 Network Manager server, import the poll definitions and policies from xml file into your domain by running the following command:

$NCHOME/precision/bin/ncp_perl $NCHOME/precision/scripts/perl/scripts/get_policies.pl -to domain=<DOMAIN NAME> -from file=<FILE TO EXTRACT POLLS TO> -password <DB PASSWORD>

For complete usage information:

$NCHOME/precision/scripts/perl/scripts/get_policies.pl -help

4. Unlike UNIX/Linux, the following information is not migrated automatically on Windows: SNMP community strings, telnet passwords, scope and seed. 

Additional migration information:

Network Manager v3.8 MIBs are retained even if there is a version 3.7 counterpart in the archive file. New MIBs that are in a version 3.7 installation but are not in Network Manager V3.8 will copied onto the version 3.8 installation.

Network Manager V3.8 files that are replaced with files from the archive will be backed-up to <filename>_38file.

Users are strongly advised to manually verify migrated configuration files in the Network Manager configuration directory, i.e. $NCHOME/etc/precision