Title: IBM PK17549: ABEND0C4 IN CSQVIALC AFTER CANCELLING A RRS BATCH JOB, THEN QUEUE MANAGER ABENDS WITH CSQV086E - United States

Text:
z/os  A FIX IS AVAILABLE
Obtain the fix for this APAR.


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  TITLE=UM03,ABN=5C6-00E20017,U=T002661 ,C=F1000.531.RLMC-CSQJLGW,
   M=CSQJWE01,LOC=CSQSLD1 .CSQSTACK+03A0
   CSQV086E +UM03 QUEUE MANAGER ABNORMAL TERMINATION
   REASON=00E50705. This is similar to PQ72011 except that in this
   case after the cancel of the RRS batch job (which occurred when
   the EB had issued an execution unit switch from CSQIMGE1 /
   CSQRUA01 to CSQRUCA3), RRS drove MQ for BACKOUT (rather than
   END-CONTEXT as with PQ72011) and hence CSQ3RRSX did not wait
   for the related execution switch to end.
   
   
    
   
   

LOCAL FIX

PROBLEM SUMMARY
 *  ****************************************************************
   * USERS AFFECTED: All users of MQSeries for z/OS Version 6     *
   *                 Release 0.                                   *
   ****************************************************************
   * PROBLEM DESCRIPTION: ABENDS0C4 in CSQVIALC after cancelling  *
   *                      a batch job using the RRS batch         *
   *                      adapter. The queue-manager then abends  *
   *                      S6C6 after issuing MSGCSQV086E with     *
   *                      RC00E50727.                             *
   *                                                              *
   *                      Another symptom of this is problem is   *
   *                      ABENDS0C4 in CSQM1DQT after issuing a   *
   *                      DISPLAY QSTATUS() TYPE(HANDLE) command. *
   ****************************************************************
   * RECOMMENDATION: Apply PTF.                                   *
   ****************************************************************
   A batch job using the RRS batch adapter issues an in-syncpoint
   MQPUT or MQGET followed by an MQPUT. However, the page set is
   full and so a synchronous unrelated execution unit switch to
   CSQIEXTD is performed to extend the page set.
   
   A CANCEL command is then issued against the batch job.
   
   RRS invokes CSQ3RRSX for BACKOUT processing for the above RRS
   UR. CSQ3RRSX invokes CSQ3RRSM to process the BACKOUT request.
   CSQ3RRSM resets EBDR, the deferred recovery indicator, in the
   primary EB and proceeds with backout processing
   
   RRS then invokes CSQ3RRSX for END-CONTEXT. CSQ3RRSX detects that
   there is a synchronous unrelated execution unit switch
   outstanding, and so it waits for it to end.
   
   When the CSQIEXTD execution unit completes, it issues a CSQVRESM
   as EBDR is no longer set in the primary EB, resulting in ROBRESM
   being set in the EB's ROB. This causes subsequent
   synchronization problems during thread deallocation processing,
   resulting in an abend S0C4 in CSQVIALC. MSGCSQV086E with reason
   00E50727 is then issued and the queue-manager abends with S6C6.
   
   Additional symptoms include an abend0C4 in CSQM1DQT after
   issuing a DISPLAY QSTATUS TYPE(HANDLE), or an abend S0C4 in
   CSQWVRC2.
   
   Additional keywords :
   ABEND6C6 ABEND5C6 RC00D303F1 00D303F1
   
   
    
   
   

PROBLEM CONCLUSION
 *  CSQ3RRSX has been changed to wait for any unrelated or related
   execution units to complete before proceeding with commit or
   backout processing.
   .
   600 tracking :
   .
   This is an update to early code and therefore requires the
   z/OS command SETPROG LPA,ADD to load the new CSQ3INI and CSQ3EPX
   load-modules into the LPA followed by the Websphere MQ command
   REFRESH QMGR TYPE(EARLY), or an MVS IPL.
   000Y
   CSQARIB
   CSQDRIB
   CSQ3RRSX
   
   
    
   
   

TEMPORARY FIX
 *  *********
   * HIPER *
   *********
   
   
    
   
   

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   PK17549
   
   
 * REPORTED COMPONENT NAME
   WEBS MQ FOR ZOS
   
   
 * REPORTED COMPONENT ID
   5655L8200
   
   
 * REPORTED RELEASE
   000
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   YesHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2006-01-10
   
   
 * CLOSED DATE
   2006-01-16
   
   
 * LAST MODIFIED DATE
   2007-07-25
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
    PK15121
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
    UK10795
   
   

MODULES/MACROS
 *     CSQARIB  CSQDRIB  CSQ3RRSX
   
   
    
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   WEBS MQ FOR ZOS
   
   
 * FIXED COMPONENT ID
   5655L8200
   
   

APPLICABLE COMPONENT LEVELS
 * R000 PSY UK10795 [HTTPS://WWW14.SOFTWARE.IBM.COM/WEBAPP/SET2/ORDERMEDIA/SHOPCART?PTFS=UK10795]
   UP06/02/03 P F602
   
   

FIX IS AVAILABLE
 * SELECT THE PTF APPROPRIATE FOR YOUR COMPONENT LEVEL. YOU WILL BE REQUIRED TO SIGN IN. DISTRIBUTION ON PHYSICAL MEDIA IS NOT AVAILABLE IN ALL COUNTRIES.