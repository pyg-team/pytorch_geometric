Title: IBM The import task failed with "An error occurred in a triggered SQL statement in        
trigger "DBO.COMPUTER_PRO".  Information returned for the error includes       
SQLCODE "-433", SQLSTATE "22001" after upgraded to ILMT v9.2.0.2 (patch 2). - United States

Text:
 TECHNOTE (FAQ)

QUESTION
 The import task failed with "An error occurred in a triggered SQL statement in 
trigger "DBO.COMPUTER_PRO". Information returned for the error includes 
SQLCODE "-433", SQLSTATE "22001" after upgraded to ILMT v9.2.0.2 (patch 2). 

CAUSE
Environment:
IEM/ILMT v9.2.x installed on RedHat Linux 6.5 (all-in-one installation).
2 datasources defined (one is the default and one for another existing IEM server)


After upgraded to ILMT v9.2.0.2 (patch 2), the import task is failing with the following error in the import log.

# Logfile created on 2015-07-14 18:35:27 +0000 by logger.rb/v1.2.7 
2015-07-14 18:35:27 (+0:00:00.000) INFO: TEMA version: 9.2.0.2-20150626-1136 .
.
.
. 
2015-07-14 18:36:52 (+0:00:06.146) ERROR: SQL: {call 
DBO.ETL_COMPUTER_PROPERTY_VALUES(?,?,?,?,?,?)} 
2015-07-14 18:36:52 (+0:00:00.001) ERROR: Batch execution error: Error 
for batch element #1: An error occurred in a triggered SQL statement in 
trigger "DBO.COMPUTER_PRO". Information returned for the error includes 
SQLCODE "-433", SQLSTATE "22001" and message tokens " < K e y > < N a m 
e > C i s c o A n y C".. SQLCODE=-723, SQLSTATE=09000, DRIVER=3.64.104 
2015-07-14 18:36:52 (+0:00:00.005) INFO: ETL from lmtool - 
ComputerPropertyValue (0x00000000093DD3FE - 
0x000000000950BE82): Failed 
2015-07-14 18:36:52 (+0:00:00.027) ERROR: Sequel::DatabaseError: 
Java::ComIbmDb2JccAm::BatchUpdateException: 
[jcc][t4][102][10040][3.64.104] Batch failure. The batch was submitted, 
but at least one exception occurred on an individual member of the 
batch. 
Use getNextException() to retrieve the exceptions for specific batched 
elements. ERRORCODE=-4229, SQLSTATE=null 
com.ibm.db2.jcc.am.bd.a(com/ibm/db2/jcc/am/bd.java:407) 
com.ibm.db2.jcc.am.Agent.endBatchedReadChain(com/ibm/db2/jcc/am/Agent.j 
ava:399) 


================

There are a few existing APAR IV71447 and IV74207 addressing similar errors and it should have been fixed with the latest patch 2. 


ANSWER
Go to ILMT console | Management | Computer Properties page. Verify if there is any customized property settings created. 

 

The screen shot below shows the 4 settings in RED created by default. The bottom 2 settings in BLUE are manually created. 


[/support/docview.wss?uid=swg21962322&amp;aid=1] 


If there is any customized settings created, it needs to be deleted from the Computer Properties. Untouched the default 4 settings.

Manually run the import task again and it should run successfully.

If it is still failing, then collect the following information and contact the IBM Support Team to diagnose the issue further:

1) login to IEM/LMT Linux server (db2 server installed) with db2inst1 user ID. 
2) run "db2 connect to TEMADB or SUADB" depending which db name is used.
3) run "db2 describe table dbo.computer_property_values > dbocpv.out" 
4) a copy of the following file ILMT server

/opt/ibm/LMT/wlp/usr/servers/server1/apps/tema.war/WEB-INF/app/model s/computer_property_value.rb 

5) tar/zip of the entire contents of the logs directory 

/opt/ibm/LMT/wlp/usr/servers/server1/logs/ 

6) a screenshot of a Computer Properties page including its property mappings (details)

7) upload the above information to a PMR.