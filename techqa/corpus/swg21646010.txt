Title: IBM Collecting data for .NET Data Collector - United States

Text:
MustGatherDocument 71TT-TS; 71GEN-TS; ITCAM4Tx Tracking; 5724S79NTTR; 5724S79NT TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 Data to send to IBM support, when reporting an issue involving .NET Data Collector 

CAUSE
IBM support team needs this information to assist and investigate issues linked to .NET Data Collector.
Earlier .NET Data Collector versions ships with ITCAM for Transactions/SOA and there is no entry of it in "kincinfo -i" output. 'q7' and 'qf' agents are completely different and independent of .NET DC. 
The only way to know .NET Data Collector version is to use "patchman -l" command for version 7.3.0 and its respective patches.

Now package ITCAM for Microsoft applications version 6.3.0 comes with .NET DC version v7.3.1. And .NET DC released version is v7.3.1.1
This version shows details in kincinfo output as 'k4' product code.

By default, application logging is disabled and, to enable logging, we have to perform steps mentioned below and those logs will help us to troubleshoot more.


RESOLVING THE PROBLEM
Here is a list of data to collect and send to IBM support team, when reporting a problem involving .NET Data Collector : 

 

a) .NET Data Collector logs, located in
Path : <CANDLE_HOME>\TMAITM6\ktj\dotnet\logs

b) if applicable .NET application error or exception message or symptom observed on application side

c) version of .NET Data Collector installed.
If version 7.3.0 and further patches are installed, then use 
command prompt and navigate to <CANDLE_HOME>\TMAITM6\ktj\dotnet\bin,
and then execute command "patchman.exe -l"
If v7.3.1 or greater is installed, then same information for 'k4' agent appears in output of "kincinfo -i"

d) pdcollect / ISADC.bat 

from the system where .NET Data Collector is installed and configured.

e) .NET Application details from the managed system where .NET Data Collector is
installed and configure. Needed details could be like whether i.e. ASPX, ASMX,
WCF are in use, flow of an application like ASPX to WCF call.

f) version of IIS and .NET Framework installed and configured on the system
where .NET Data Collector is installed.

g) Please confirm existence of the following files and their respective versions
from %SYSTEMDRIVE%\windows\assembly :
- KD4SoapHandler
- KD4WCFExtension
- KD4dcAgent
- KTJdotnetdc
- KTJdotnetTlsUtil
- NetdcHttpModule
- SetApplicationPools

h) Provide details of entries for following tags from machine.config file from path
%SYSTEMDRIVE%\Windows\Microsoft.NET\Framework\v2.0.50727\CONFIG and
%SYSTEMDRIVE%\Windows\Microsoft.NET\Framework\v4.0.30319\CONFIG :
- <soapExtensionTypes>
- <behaviorExtensions>
- <httpModules>
- <endpointBehaviors>
- <serviceBehaviors>

i) Provide details of entries for following tags from ApplicationHost.config file from path
%SYSTEMDRIVE%\Windows\System32\inetsrv\config :
- <isapiFilters>
- <modules>

j) To enable .NET Data Collector extra logging perform the following steps:
· Stop all .NET Applications and IIS server
· Open Command Prompt
· Navigate to <CANDLE_HOME>\TMAITM6\k4\bin
· Execute Command : configdc logging -tracing on
· Execute Command : configdc activateconfig
· Start all .NET Applications and IIS

k) Tx Tracking Tx Collector agent ttas.* DB files
Default path for ttas files 
Windows : <CANDLE_HOME>\TMAITM6\
Unix: $ITMHOME/$platform/tu/bin/

l) Screen shot for following workspaces from Tivoli Enterprise Portal will help in troubleshooting :
Transaction Collector(Navigator Item) -> Transaction Collector workspace
Transaction Reporter (Navigator Item) with following workspaces : 

 * Transactions Overview 
 * Application Topology 
 * Component Topology 
 * Server Topology 
 * Transaction Topology 
 * Instance Topology



Reproduce the problem and send new .Net dc logs using pdcollect or isadc.bat tools For "pdcollect" usage 
ITM_HOME\bin\pdcollect
Type "pdcollect -?" to see usage explanation 

For "isadc.bat" usage, follow Related URL below. 

while executing isadc.bat:
choose option 1) "IBM Tivoli Composite Application Manager for Transactions" 
then option 2) "Transaction Tracking Data Collectors"
and then send the archive file generated by isadc tool to the PMR you have opened.

RELATED INFORMATION
 ISA Data Collector for ITCAM for Transactions Usage [http://www.ibm.com/support/docview.wss?uid=swg21624484]


 

PRODUCT ALIAS/SYNONYM
 itcam itcam4tx itcam4soa itcamfortx itcam4trans TT TransTracking collect