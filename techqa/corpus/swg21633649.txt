Title: IBM Build Forge Old Agent SSL Communication Failure with New Management Console - United States

Text:
 TECHNOTE (FAQ)

QUESTION
 SSL communication between the new (8.0 and greater) Management Console and old (7.x) agent failed, the server test failed with the agent after SSL configured correctly in both management console and agent configurations.

Server test failed with old (7.x) agent from new (8.0 and greater) management console with this error:
javax.net.ssl.SSLException: Unrecognized SSL message, plaintext connection? 

CAUSE
This is due to different OpenSSL library versions, Build Forge 8.0 console uses OpenSSL v1.x libraries, but 7.x agent uses OpenSSL v0.x libraries which does not recognize new cipher. 

Environment
Any Build Forge 7.x agents with SSL enabled.

Diagnosing the problem
If enabled the agent activity log, saw this error message:
[ 2384] io.c : 643: SSL PASS ssl_key_password=(set)
[ 2384] io.c : 841: SSL FAIL
[ 2384] io.c : 625: - reason : SSLErrorBadPKeyFile
[ 2384] io.c : 626: - err_buf: error:06074079:digital envelope routines:EVP_PBE_CipherInit:unknown pbe algorithm
[ 2384] io.c : 627: - err : 06074079


ANSWER
Regenerate the buildForgeKey.pem for the old agent. 

Steps:
1. Download following OpenSSL utility for your agent platform.
2. Copy buildForgeKeyStore.p12 to your old agent folder from Build Forge 8.0 or greater installation home path "keystore" folder.
3. Run "openssl pkcs12 -in buildForgeKeyStore.p12 -passin pass:<bfpassword> -passout pass:<bfpassword> -out buildForgeKey.pem" command with your correct passwords.
4. Update the old agent configuration file bfagent.conf "ssl_key_location" setting with this new generated buildForgeKey.pem, or you do not want to update the bfagent.conf, copy this buildForgeKey.pem to your "ssl_key_location" setting location.
5. Restart the old agent, you can test the agent with SSL in management console server test view