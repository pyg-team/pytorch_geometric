Title: IBM IC99865: WSPOLICY DOCUMENTS REFERENCED BY WSP:POLICYREFERENCE DURING WSDL COMPILATION MIGHT NOT BE RELEASED AND CAUSE MEMORY GROWTH - United States

Text:
  FIXES ARE AVAILABLE
Fix packs for DataPower XML Security Gateway version 6.0 [http://www-01.ibm.com/support/docview.wss?uid=swg24034955]
Fix packs for DataPower B2B Appliance version 6.0 [http://www-01.ibm.com/support/docview.wss?uid=swg24034956]
Fix packs for DataPower Integration Appliance version 6.0 [http://www-01.ibm.com/support/docview.wss?uid=swg24034957]
Fix packs for DataPower Low Latency Appliance version 6.0 [http://www-01.ibm.com/support/docview.wss?uid=swg24034958]
Fix packs for DataPower Service Gateway version 6.0 [http://www-01.ibm.com/support/docview.wss?uid=swg24034959]
Fix packs for DataPower Service Gateway version 6.0.1 [http://www-01.ibm.com/support/docview.wss?uid=swg24036407]
Fix packs for DataPower B2B Appliance version 6.0.1 [http://www-01.ibm.com/support/docview.wss?uid=swg24036409]
Fix packs for DataPower Integration Appliance version 6.0.1 [http://www-01.ibm.com/support/docview.wss?uid=swg24036410]


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  Using the WSDL-cache-policy to compile locally stored WSDL
   files, the resulting QRef entries might not be returned which
   results in memory growth.
   
   This behavior happens in firmware versions 6.0.0.0 and later.
   
   
    
   
   

LOCAL FIX
 *  Scenario for cause of growing QRef entries:
   
    1) The WSDLs have WSPolicy embedded inside the WSDL.
    2) The WSDLs are all local.
    3) The WS Proxy has wsdl-cache-policy & matching is set to "*"
   
   Number 3 is where the problem happens.  Every 30 seconds, the
   WS Proxy is recompiling the locally stored WSDLs and recreating
   all those WSPolicy objects.
   
   
   
   To work around this issue, make one of the following
   suggested changes:
   
    1) Either turn off the unnecessary WSDL cache, or change the
   match expression to something more meaningful, such as
   "http://*" and increase the TTL.
    2) Use the WSDL Status->refresh action to recompile the WSDLs
   which are stored locally.  (Usage:  wsdl-refresh <WSGateway>
   <WSDL>)
   
   
    
   
   

PROBLEM SUMMARY
 *  Affected is the use of WSDLs (in WSP or elsewhere).
   
   WSPolicy documents referenced by <wsp:PolicyReference> are
   not released during WSDL compilation causing memory growth.
   This causes trouble especially in case of aggressive
   wsdl-cache-policy settings leading to frequent WSDL
   recompilations.
   
   
    
   
   

PROBLEM CONCLUSION
 *  Fix is available in 6.0.0.8, 6.0.1.4 and 7.0.0.0.
   
   For a list of the latest fix packs available, please see:
   http://www-01.ibm.com/support/docview.wss?uid=swg21237631 [http://www-01.ibm.com/support/docview.wss?uid=swg21237631]
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   IC99865
   
   
 * REPORTED COMPONENT NAME
   DATAPOWER
   
   
 * REPORTED COMPONENT ID
   DP1234567
   
   
 * REPORTED RELEASE
   601
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2014-03-05
   
   
 * CLOSED DATE
   2014-05-30
   
   
 * LAST MODIFIED DATE
   2014-08-05
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   DATAPOWER
   
   
 * FIXED COMPONENT ID
   DP1234567
   
   

APPLICABLE COMPONENT LEVELS
 * R600 PSY
   UP
   
   
 * R601 PSY
   UP
   
   
 * R700 PSY
   UP