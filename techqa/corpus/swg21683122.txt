Title: IBM DFHSJ0215 and DFHSJ0914 JVM Server disabled when installing CICS Liberty JVMServer - United States

Text:
DFHSJ0215 DFHSJ0914 ; "Router-Init-Thread com.ibm.cics.router.RouterException Unable to create Liberty profile server ; java.lang.Exception: Liberty profile: auto-configure is disabled and server.xml not found ; MSGDFHSJ0215 MSGDFHSJ0914 5655Y0400 R680 680 R800 800 R690 690 R900 900 HCI6800 5655-Y04 HCI6900 5655Y04 KIXINFO TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 You created a Liberty JVMServer resource definition within CICS. Now when you try to install it, you receive messages DFHSJ0215 and DFHSJ0914 in the CICS log. This indicates that the JVM Server failed to initialize and is disabled. 

SYMPTOM
DFHSJ0215 [http://www-01.ibm.com/support/knowledgecenter/SSGMCP_5.2.0/com.ibm.cics.ts.messages.doc/DFHSJ/DFHSJ0215.html?lang=en] The JVM SERVER xxxxxxxx FAILED TO INITIALIZE THE OSGI FRAMEWORK. THE JVM WILL BE TERMINATED.
DFHSJ0914 [http://www-01.ibm.com/support/knowledgecenter/SSGMCP_5.2.0/com.ibm.cics.ts.messages.doc/DFHSJ/DFHSJ0914E.html?lang=en] JVMSERVER xxxxxxxx IS DISABLED BECAUSE THE LANGUAGE ENVIRONMENT ENCLAVE WAS NOT CREATED.


CAUSE
Directory structure and configuration fields in zFS. More specifically, the com.ibm.cics.jvmserver.wlp.autoconfigure [http://www-01.ibm.com/support/knowledgecenter/SSGMCP_5.2.0/com.ibm.cics.ts.java.doc/topics/dfha2_jvmprofile_sysprops.html?lang=en] option in the DFHWLP jvm profile is defaulting to false. This option specifies whether CICS will automatically create and update the server.xml file for the Liberty JVM server.

ENVIRONMENT
CICS TS V5.1 or V5.2

DIAGNOSING THE PROBLEM
In viewing the dfhjvmerr file you see that a java.lang.Exception is occurring due to the auto-configure option within the JVMProfile set to false and the server.xml file not being found:


Exception in thread "Router-Init-Thread"
com.ibm.cics.router.RouterException: Unable to create Liberty profile server
at com.ibm.cics.router.Router.initLiberty(Router.java:939)
at com.ibm.cics.router.Router.initOSGi(Router.java:557)
at com.ibm.cics.router.Router.main(Router.java:2450)
Caused by:
java.lang.Exception: Liberty profile: auto-configure is disabled and server.xml not found in /tmp/CICSTS51/DFH$WLP/wlp/usr/servers/defaultServer
at com.ibm.cics.router.wlp.internal.LibertyServerImpl.configureServer(LibertyServerImpl.java:342)
at com.ibm.cics.router.Router.initLiberty(Router.java:935) 

RESOLVING THE PROBLEM
If you set the com.ibm.cics.jvmserver.wlp.autoconfigure option in the DFHWLP jvm profile to true, CICS will create the directory structure and configuration fields in zFS. CICS will also update the server.xml file if you provide values for other Java properties, such as an HTTP port number.

If you allow the com.ibm.cics.jvmserver.wlp.autoconfigure option to default to false, you will need to manually update the following features within the server.xml file within zFS:
cicsts:core-1.0
cicsts:security-1.0
cicsts:jdbc-1.0

Or, you can specify -Dcom.ibm.cics.jvmserver.wlp.autoconfigure=true within the Liberty profile and allow CICS to create these features for you.

Once this is corrected you will be able to start the DFH$WLP JVMServer.

 

PRODUCT ALIAS/SYNONYM
 CICS/TS CICS TS CICS Transaction Server