Title: IBM WMQFTE command queue manager's DLQ filling with messages with reason code 2085. - United States

Text:
DLQ dead letter queue FTE WMQFTE file transfer 2085 MQRC_UNKNOWN_OBJECT_NAME fteCreateTransfer -w TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 You are using WebSphere MQ File Transfer Edition (WMQFTE/WMQ FTE) and notice a large buildup of MQDEAD messages on the dead-letter queue (DLQ) with reason code 2085: MQRC_UNKNOWN_OBJECT_NAME. 

CAUSE
When a blocking synchronous file transfer request is issued (-w parameter), the fteCreateTransfer command waits for the transfer to complete so that it can receive a reply message with the request outcome. Such a request can be issued using the fteCreateTransfer command with the -w parameter specified.

When the -w parameter is specified with a wait period, a <reply> element of the file transfer request is created and populated with the name of the command queue manager where a temporary dynamic queue has been created to receive reply about the successful (or otherwise) completion of the transfer.

The temporary dynamic queue created by the fteCreateTransfer command is deleted when this command returns. As such, in many cases the command returns because the wait period has expired, causing the temporary queue to be deleted (as per normal processing). Therefore, when the transfer has completed, the WebSphere MQ FTE source agent attempts to put a message to this temporary queue, which now no longer exists. This causes it to be routed to the dead-letter queue (DLQ).

RESOLVING THE PROBLEM
There are three solutions to consider: 

 1. Specify a large enough wait period on the fteCreateTransfer command that ensures there is enough time for file transfer to complete and send the reply message before the fteCreateTransfer command returns. 
 2. Do not specify the -w parameter on the fteCreateTransfer command so the request is asynchronous and non-blocking. 
 3. Define a DLQ handler to delete messages that had been destined for the temporary dynamic queues if they are not needed or forward them to another queue for manual intervention should you wish to use these messages to investigate further. 
 4. Do not specify a dead-letter queue for the WebSphere MQ FTE command queue manager.

 

HISTORICAL NUMBER
 12528 082 000 

PRODUCT ALIAS/SYNONYM
 WebSphere MQ File Transfer Edition WMQFTE FTE