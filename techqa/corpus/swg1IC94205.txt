Title: IBM IC94205: MQ V7.5 CLIENT REPORTS 2085 ERROR OPENING THE SYSTEM.PROTECTION.POLICY.QUEUE - United States

Text:
  A FIX IS AVAILABLE
WebSphere MQ V7.5 Fix Pack 7.5.0.4 [http://www-01.ibm.com/support/docview.wss?uid=swg24038252]


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  MQ v7.5 client connects to legacy queue manager such as MQ
   v7.0.1 or MQ v7.1 and it attempts to open the
   SYSTEM.PROTECTION.POLICY.QUEUE and reports
   MQRC_UNKNOWN_OBJECT_NAME error. MQRC_UNKNOWN_OBJECT_NAME (2085)
   error is reported each time the application tries to open a
   SYSTEM.PROTECTION.POLICY.QUEUE queue.
   
   
    
   
   

LOCAL FIX

PROBLEM SUMMARY
 *  ****************************************************************
   USERS AFFECTED:
   This issue affects users of the:
   
     - WebSphere MQ V7.5 classes for JMS
     - WebSphere MQ V7.5 classes for Java
   
   
   Platforms affected:
   MultiPlatform
   
   ****************************************************************
   PROBLEM DESCRIPTION:
   Advanced Messaging Security (AMS) is automatically enabled in
   WebSphere MQ client at v7.5, hence it, by default tries to check
   the security policies for objects at the queue manager. When
   v7.5 client connects to queue manager such as v7.1 or v7.0.1,
   since AMS is enabled in v7.5 client by default, it attempts to
   open the  SYSTEM.PROTECTION.POLICY.QUEUE at the queue manager.
   However v7.1 or v7.0.1 do not have Advanced Messaging Security
   (AMS) enabled and hence does not have
   SYSTEM.PROTECTION.POLICY.QUEUE. This causes 2085
   (MQRC_UNKNOWN_OBJECT_NAME) error to be reported when
   SYSTEM.PROTECTION.POLICY.QUEUE is opened.
   
   
    
   
   

PROBLEM CONCLUSION
 *  This APAR introduces an configuration variable
   AMQ_DISABLE_CLIENT_AMS that can be used to disable Advanced
   Message Security (AMS) functionality within the WebSphere MQ
   classes for JMS and classes for Java clients.
   
   To enable this change, either:
   
   1) Create and set the environment variable
   AMQ_DISABLE_CLIENT_AMS to TRUE in the environment where the
   WebSphere MQ classes for JMS or classes for Java application is
   running.  For example:
   
     export AMQ_DISABLE_CLIENT_AMS=TRUE
   
   OR
   
   2) Set the Java system property:
   
     com.ibm.mq.cfg.AMQ_DISABLE_CLIENT_AMS
   
   to the value TRUE for the Java application.  For example, the
   Java system property can be set as a -D option when the Java
   command is invoked:
   
     java -Dcom.ibm.mq.cfg.AMQ_DISABLE_CLIENT_AMS=TRUE -cp
   <MQ_INSTALLATION_PATH>/java/lib/com.ibm.mqjms.jar
   my.java.applicationClass
   
   or specified within a JMS configuration file (jms.config) if
   used by the application.
   
   
   Please Note: For C clients, the environment variable
   'AMQ_DISABLE_CLIENT_AMS' is applicable only in case of MQ 7.5.
    MQS_DISABLE_ALL_INTERCEPT should be used in case of MQ 8.0 C
   clients:
   
   https://www.ibm.com/support/knowledgecenter/en/SSFKSJ_8.0.0/com.
   ibm.mq.sec.doc/q127080_.htm [https://www.ibm.com/support/knowledgecenter/en/SSFKSJ_8.0.0/com.ibm.mq.sec.doc/q127080_.htm]
   
   ---------------------------------------------------------------
   The fix is targeted for delivery in the following PTFs:
   
   Version    Maintenance Level
   v7.5       7.5.0.4
   v8.0       8.0.0.2
   
   The latest available maintenance can be obtained from
   'WebSphere MQ Recommended Fixes'
   http://www-1.ibm.com/support/docview.wss?rs=171&uid=swg27006037 [http://www-1.ibm.com/support/docview.wss?rs=171&uid=swg27006037]
   
   If the maintenance level is not yet available information on
   its planned availability can be found in 'WebSphere MQ
   Planned Maintenance Release Dates'
   http://www-1.ibm.com/support/docview.wss?rs=171&uid=swg27006309 [http://www-1.ibm.com/support/docview.wss?rs=171&uid=swg27006309]
   ---------------------------------------------------------------
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   IC94205
   
   
 * REPORTED COMPONENT NAME
   WMQ AMS
   
   
 * REPORTED COMPONENT ID
   5724H7243
   
   
 * REPORTED RELEASE
   750
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt / Xsystem
   
   
 * SUBMITTED DATE
   2013-07-17
   
   
 * CLOSED DATE
   2013-08-29
   
   
 * LAST MODIFIED DATE
   2018-02-06
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   WMQ AMS
   
   
 * FIXED COMPONENT ID
   5724H7243
   
   

APPLICABLE COMPONENT LEVELS