Title: IBM WebSphere Portal fails to start after a successful database transfer with the following exception 'Error 404: Initialization of one or more services failed.' - United States

Text:
portal migration; portal database issue; Error 404: Initialization of one or more services failed TECHNOTE (TROUBLESHOOTING)

PROBLEM
 

Reviewing the systemOut.log we see:

[2/15/11 15:09:34:613 CST] 0000002f Servlet E com.ibm.wps.engine.Servlet init EJPFD0016E: Initialization of service failed.
java.lang.NullPointerException
at
com.ibm.wps.services.vpmapping.VirtualPortalIdentificationServiceImpl.loadDefaultVPID(VirtualPortalIdentificationServiceImpl.java:194)
...
[2/15/11 15:09:34:739 CST] 0000002f ServletWrappe E Deregister the mbean because of uncaught init() exception thrown by servlet portal:
javax.servlet.UnavailableException: Initialization of one or more services failed.
at com.ibm.wps.engine.Servlet.init(Servlet.java:252)
at com.ibm.ws.webcontainer.servlet.ServletWrapper.init(ServletWrapper.java: 218)
...
Caused by: java.lang.NullPointerException
at
com.ibm.wps.services.vpmapping.VirtualPortalIdentificationServiceImpl.loadDefaultVPID(VirtualPortalIdentificationServiceImpl.java:194)


CAUSE
One possibility to why this exception has occurred is due to the database-transfer not successfully copying the tables from the 6 source database domains to the target database. 

In this case, because the source DBSchema was set incorrectly in wkplc_comp.properties, the task was able to access the domain, but failed to find any tables to copy that matched the DBSchema provided. Because the script is not coded to fail if no tables are found, then the database-transfer task does not fail and allows the user to continue on.


RESOLVING THE PROBLEM
The source.<domain>.DBSchema will need to match the original system's <domain>.DBSchema value. 

The new <domain>.DBSchema attribute will then point to the target database.