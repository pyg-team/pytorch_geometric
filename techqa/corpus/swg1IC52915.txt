Title: IBM IC52915: THE FIX ADDRESSING THE ISSUE OF TLS PROTOCOL MISMATCH BETWEEN   Z/OS AND OPENVMS. THE TLS 1.0 IS BEING FOLLOWED BY Z/OS. - United States

Text:
  A FIX IS AVAILABLE
WebSphere MQ 5.3 for HP OpenVMS Alpha and Itanium - Fix Pack 12 [http://www-01.ibm.com/support/docview.wss?uid=swg24016710]


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  When trying to set up an SSL channel from a z/OS queue manager
   to a queue manager on WebSphere MQ for HP OpenVMS the following
   errors are seen on the z/OS queue manager:
   CSQX620E ME04 CSQXPING System SSL error, channel ????,
   function 'gsk_secure_soc_init' RC=-11
   CSQ9023E ME04 CSQXCRPS ' PING CHANNEL' ABNORMAL COMPLETION
   CSQX620E ME04 CSQXRCTL System SSL error,
   channel ME04.VSECR01SSL.SSL,
   function 'gsk_secure_soc_init' RC=-11
   CSQ9023E ME04 CSQXCRPS ' START CHANNEL' ABNORMAL COMPLETION
   .
   The error logs on HP OpenVMS queue manager show:
   AMQ9665: SSL connection closed by remote end of channel '????'.
   AMQ9228: The TCP/IP responder program could not be started.
   .
   Trace of the problem on the HP OpenVMS queue manager shows a
   failure in ssl_get_peer_certificate when it tried to process
   the certificate received from the Z/OS queue manager.
     The AMQCRSTA.EXE process trace indicates a SIGBUS exception
   was thrown while reading the certificate information received
   from z/OS.
     This problem is due to TLS  protocol incompatibility between
   VMS and z/OS. z/OS follows the TLS 1.0 protocol while
   HP-OpenSSL on OpenVMS adheres to the TLS 1.1 protocol.
   
   
    
   
   

LOCAL FIX

PROBLEM SUMMARY
 *  Attempts to setup an SSL channel between  Z/OS Queue Manager
   (Sender) and OpenVMS Queue Manager (Receiver) results in
   return code RC=11 from GSKIT function gsk_secure_soc_init()
   on Z/OS. As a result the SSL hand shake failure is observed
   during initial negotiation between Z/OS and OpenVMS.
   
   
    
   
   

PROBLEM CONCLUSION
 *  The problem is caused due to the TLS SSL protocol mismatch
   between Z/OS and OpenVMS. OpenVMS uses TLS  version 1.1 SSL
   protocol  and Z/OS uses the TLS version 1.0 SSL protocol.
   As per the older TLS 1.0 protocol, the CA list in the
   Certificate request message should countain atleast one entry
   for the SSL handshake to succeed.  In the later TLS 1.1
   protocol, followed on OpenVMS, populating the CA list field
   is not a mandatory requirement and can be left blank.
   .
   The code changes have been made on WMQ5.3 OpenVMS to
   populate the CA list in the Certificate request message
   to meet the older SSL TLS 1.0 protocol requirement on
   Z/OS platform. This fix is also applicable
   when OpenVMS talks to other Unix distributed platforms
   which are using TLS protocol V-1.0.
   .
   The fix for this APAR will be distributed through WMQ 5.3
   FP12 on OpenVMS Alpha PTF number IP22922, APAR number IC51908
   and OpenVMS Itanium PTF number IP22923, APAR number IC51909.
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   IC52915
   
   
 * REPORTED COMPONENT NAME
   MQSERIES OVMS A
   
   
 * REPORTED COMPONENT ID
   5724A3801
   
   
 * REPORTED RELEASE
   530
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2007-06-07
   
   
 * CLOSED DATE
   2008-03-27
   
   
 * LAST MODIFIED DATE
   2008-03-27
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   MQSERIES OVMS A
   
   
 * FIXED COMPONENT ID
   5724A3801
   
   

APPLICABLE COMPONENT LEVELS
 * R530 PSY
   UP