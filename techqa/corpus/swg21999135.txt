Title: IBM Configuring the Operations Center to fail over in a clustered environment - United States

Text:
operations center; cluster; failover TECHNOTE (FAQ)

QUESTION
 I have configured the IBM Spectrum Protect server to fail over in a clustered environment. How can I also configure the Operations Center to fail over? 

ANSWER
You can configure the IBM Spectrum Protect server and the Operations Center for clustering on AIX速, Linux, or Windows systems. 
Depending on your Operating System, you can use the following cluster management products:

IBM速 PowerHA速 SystemMirror for AIX
IBM Tivoli速 System Automation for Multiplatforms for AIX and Linux
Microsoft Failover Cluster for Windows

To configure the Operations Center to fail over in a clustered environment, you install the Operations Center on the cluster that is already configured to fail over the IBM Spectrum Protect server. Each node of the cluster must be able to run the Operations Center service, and all nodes must have the same Operations Center configuration. Place the Operations Center service under the control of your cluster management product, and configure it to fail over.

The following steps describe the basic installation and configuration tasks you must perform to configure Operations Center failover:

1. Install the Operations Center on each node of the cluster.

2. The Operation Center runs as a service and, by default, starts automatically. Because service startup must be controlled by the cluster management product, configure the service so that it does not start automatically. After you install the Operations Center on each node of the cluster, stop the service and edit its properties so that the service does not start automatically.

3. Place the Operations Center service under the control of your cluster management product. By using your cluster management product, configure the Operations Center service to start on a secondary node if the primary node fails. Configure failover so that the Operations Center service does not start on the secondary node until after the IBM Spectrum Protect server is running.

4. Start the Operations Center service on the primary node, and open the Operations Center in a web browser by entering the hostname and connection port of the cluster.

5. When you open the Operations Center for the first time, you must designate which IBM Spectrum Protect server is the hub server. Specify the host name and port number of the cluster, and do not enable encryption.

When you complete the steps to configure the Operations Center, the configuration information is saved to the file serverConnection.properties.

6. Copy the serverConnection.properties file from the primary node to all of the other nodes in the cluster.

The specific commands or interface actions you use to complete this procedure will differ depending on your operating system and the cluster management product. Refer to the documentation for your cluster management product for information on configuring a service to fail over. For example, if you are use Microsoft Failover Cluster for Windows, you complete the following actions:

1. On each node in your Windows cluster, install the Operations Center as described in the following IBM Knowledge Center topic:

https://www.ibm.com/support/knowledgecenter/SSEQVQ_8.1.0/srv.install/t_oc_inst_install.html [https://www.ibm.com/support/knowledgecenter/SSEQVQ_8.1.0/srv.install/t_oc_inst_install.html]

An Operations Center service is installed on each node in the cluster.

2. The Operation Center runs as a service and, by default, starts automatically. On each node in the cluster, complete the following steps to configure the service so that it does not start automatically.


 * a.
 * 
 * Start > Server Manager
 * 
 * 
 * 
 * b.
 * 
 * Tools > Services
 * 
 * 
 * 
 * c.
 * 
 * Properties
 * 
 * 
 * 
 * Tip:
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * d.
 * 
 * 

3. On the primary node where the Operations Center will run, complete the following steps to configure the Operations Center service for cluster failover: 
 * a.
 * 
 * Tools > Failover Cluster Manager
 * 
 * 
 * 
 * b.
 * 
 * Add Resource > Generic Service
 * 
 * 
 * 
 * c.
 * 
 * Next
 * 
 * 
 * 
 * d.
 * 
 * Next
 * 
 * 
 * 
 * e.
 * 
 * Finish
 * 
 * 
 * 
 * 
 * 
 * 
 * f.
 * 
 * 
 *  1. In the Roles view of the Failover Cluster Manager, right-click the Operations Center role and select Properties. 
   
   2. In the Properties window, click the Dependencies tab. 
   
   3. On the Dependencies tab, click on Click here to add dependency. From the Resource list, select the IBM Spectrum Protect server resource and click OK. 
   
 * g.
 * 
 * Bring Online
 * 
 * 

4. Start the Operations Center on the primary node on the cluster. To start the Operations Center, enter the following address in a web browser: 
 * https://cluster_hostname:secure_port/oc
 * 
 * 
 * 
 * 
 * 
 * cluster_hostname
 * 
 * 
 * 
 * 
 * 
 * secure_port
 * 
 * 
 * 
 * 
 * 
 * Important:
 * 
 * 

5. Because you are starting the Operations Center for the first time, you are prompted to designate which IBM Spectrum Protect server is the hub server. Specify the following information, and press Configure:  *  In place of the default host name and port information, specify the host name and communications port of the cluster.
   Specify an administrator that is registered in the server.
   If SSL communication is configured for the server, you can use the default encryption setting. Otherwise, specify No encryption. 


6. Copy the serverConnection.properties file from the primary node to all of the other nodes in the cluster. This file is located in installation_dir \ui\Liberty\usr\servers\guiServer, where installation_dir represents the directory in which the Operations Center is installed. Copy this file to the same directory on the other nodes. 

Users can access the Operations Center by entering the following address in a web browser: 

https://cluster_hostname:cluster_port/oc [https://cluster_hostname:cluster_port/oc] 

Users can log in by using an administrator ID that is registered on the hub server. If the primary node fails, the Operations Center is started on another node of the cluster after the IBM Spectrum Protect server is started. Users who are logged into the Operations Center when the primary node fails need to log back in after the Operations Center is restarted.