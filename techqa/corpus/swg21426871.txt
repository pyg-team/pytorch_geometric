Title: IBM Unable to use decision trace persistence within a container managed transaction - United States

Text:
 TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 When the decision warehouse trace is enabled on a ruleset and it is invoked within a container managed transaction it is possible that the trace will not be properly persisted or that a warning will be attached to the rule session response. 

SYMPTOM
The rule session response has a warning attached to it such as: 

TRACE.DAO.ERROR,Unable to create trace DAO. Exception while retrieving or invoking trace DAO. 
ilog.rules.res.persistence.trace.IlrTraceDAOException: COMMIT_TRANSACTION_ERROR . 
Traces might not have been persisted.


RESOLVING THE PROBLEM
You can workaround this issue by using an alternate trace DAO factory : 

 1. A file dvs-dw.properties should be bundled with the application and contain: factoryClassname=DvsDwCmtTraceDaoFactory
    JNDI_NAME=jdbc/resdatasource
    
    
 2. The java library DvsDwCmtTraceDaoFactory.jar in attachment should be bundled with the application 
 3. The application should then be redeployed.


Documentation References on decision warehouse data access: 

 * WebSphere ILOG JRules V7.0.x > Rule Studio > Testing, validating, and auditing rules > Tasks > Configuring and customizing Decision Warehouse > Customizing a data source 
 * WebSphere ILOG JRules V7.0.x > Rule Studio > Testing, validating, and auditing rules > Tasks > Configuring and customizing Decision Warehouse > Adding data sources to Decision Warehouse 
 * WebSphere ILOG JRules V7.0.x > Samples > Decision Validation Services samples > Decision Warehouse customization sample

DvsDwCmtTraceDaoFactory.jar [/support/docview.wss?uid=swg21426871&aid=2] [/support/docview.wss?uid=swg21426871&aid=1] 

Cross reference information Segment Product Component Platform Version Edition Business Integration IBM Operational Decision Manager Platform Independent 8.6, 8.5, 8.0, 7.5 Enterprise