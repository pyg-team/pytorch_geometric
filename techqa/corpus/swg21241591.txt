Title: IBM Determining the Ping Probe's property settings - United States

Text:
nco_p_ping; property; properties; PingBurst; PollRate; TimeOut; Trip; Retry TECHNOTE (FAQ)

QUESTION
 Ping Probe : What are the property settings? 

ANSWER

The Ping probe has the following properties:

Poll Time in seconds between pings
TimeOutTime in milliseconds after which a host is deemed unreachable
Trip Time in milliseconds after which a host is deemed slow
Retry The maximum number of times a host is pinged in a Poll interval
MaxPingBurst The maximum number of hosts to ping in parallel


The Poll dictates the period of the polling of each host, and can be specified individually for each row in the ping.file. 

If 'host_a' does not respond in the TimeOut period Retry times, its next poll will be given by (Poll+(TimeOut*Retry)).
If 'host_b' responds immediately, it will be polled after a time given by (Poll+ResponseTime). 

Setting PingBurst to '1' prevents the likelihood of hosts being deemed 'unreachable' and forces the Polls to be spread out, even at start-up.

The likelihood of a host being deemed 'unreachable' is heightened by setting PingBurst to a value greater than '1', since there may be issues with the network to the hosts being polled (i.e. severe packet loss).

Example of host spread:

PingBurst: 2
Poll: 60
TimeOut: 5000
Trip: 2500
Retry: 12

Host_a : Polled at 0s, 60s+60s, 120s+120s, 240s+120s
Host_b: Polled at 0s, 60s+5ms, 120s+10ms, 240+15ms 

Because Host_a is always timing out, at the Poll, it is not polled until 120 seconds later ((Retry*TimeOut) + Poll)

Example:
A rough calculation based on probe default property settings gives:

10,000 hosts with average Trip times of 250ms
An average 1% failure rate (100 hosts)

(((number of hosts) * (Trip) ) / PingBurst ) +
(((Average failures) * (Retry * TimeOut)) / PingBurst)

e.g.
(10000*.25)+(100*3*2.5) = (2500)+(750) = 3250s ~ 60 minutes

Given the default probe property settings of:

MaxPingBurst : 1
Retry : 3
TimeOut : 2500

The new property Interval is used to define the minimum amount of time set aside for each ping:
If the probe pings and processes the responses in a time [milliseconds] shorter than the Interval setting, it sleeps for the remainder of the Interval period before starting the next ping cycle.

Ping cycle Overview:
The probe pings the hosts specified in the ping file in cycles. The minimum length
of each cycle is specified by the Interval property. During each ping cycle, the
probe pings the number of hosts specified by the MaxPingBurst property.

In each cycle, the probe: 

 * Finds the next host that has not been deemed unreachable or responsive during the current poll time.  * Pings currenthost. 
    * Checks whether it has pinged the number of hosts specified by the MaxPingBurst property during the current cycle. If not, it goes and gets the next host
   
   
 * Once the probe has pinged the number of hosts specified by the MaxPingBurst property, it does the following:  *  Processes all the responses received so far. 
    *  Processes any timeouts that have occurred. 
    *  Reloads the ping file if the time specified by the PingFileCheck property has elapsed.
   
   
 *  Sleeps for any remaining time specified by the Interval property. 

Please refer to the ping probe manual for further guidance and how the ping.file is used. 
.