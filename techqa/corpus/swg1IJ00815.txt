Title: IBM IJ00815: DEVICE DETAIL ATTRIBUTE AUTOGROWTH BEHAVIOR NOT IN SYNC WITH SQL SERVER. - United States

Text:
 SUBSCRIBE TO THIS APAR
By subscribing, you receive periodic emails alerting you to the status of the APAR, along with a link to the fix after it becomes available. You can track this item individually or track all items by product.

Notify me when this APAR changes.

Notify me when an APAR for this component changes.



 DIRECT LINKS TO FIXES
6.3.1.13-TIV-ITM_SQL-IF0001 [http://www.ibm.com/support/fixcentral/quickorder?product=ibm%2FTivoli%2FTivoli+Composite+Application+Manager+for+Microsoft+Applications&fixids=6.3.1.13-TIV-ITM_SQL-IF0001&source=SAR]
6.3.1.2-TIV-ITM_SQL-IF0004 [http://www.ibm.com/support/fixcentral/quickorder?product=ibm%2FTivoli%2FTivoli+Composite+Application+Manager+for+Microsoft+Applications&fixids=6.3.1.2-TIV-ITM_SQL-IF0004&source=SAR]


APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  PMR 66673,L6Q,000
   Severity: 2
   Compid: 5724B96MO
   Approver: Hua Ming Zhong
   Environment
   All windows versions
   All Microsoft SQL Server versions
   ITCAM Microsoft SQL Server Agent 06.31.02.00
   Problem Description: MSSQL agent does not consider autogrowth
   disabled before checking maxsize, due to this calculations are
   done considering autogrowth enabled when maxsize is
   set to unlimited.
   This behavior is not in sync with SQL server.
   Detailed Recreation Procedure:
   This defect leads to two symptoms described below:
   Symptom 1. Incorrect "Autogrowth" attribute setting of
   "Unrestricted" is displayed by the agent in the Device Details
   attribute group.
   Recreattion steps:
   1] Create one database with max size=unlimited and autogrowth =
   disabled
   2] Check in SQL server management studio, autogrowth value
   shows as disabled.
   3] But in portal for device detail attribute group autogrowth
   value displayed as unrestricted.
   Symptom 2. When autogrowth is enabled but growth rate is set to
   zero, then autogrowth is considered as disabled by the agent
   and the device freespace is not considered while calculating
   the Database Space percent Used and Aggregate Database
   Freespace pct attributes.
   Recreation steps:
   Enable autogrowth for a database. Assign multiple datafiles for
   the database. Set growth rate to zero.
   Following formula for calculating DB max free space when
   autogrowth disabled will be used.
   DB max free space = free space inside all the data files
   Formula for calculating DB max free space when autogrowth
   enabled and db_maxsize > 0. For example:
   DB max free space = DBmaxSize   dbsize
    = 62297.060000   62287.060000  = 10 MB
   This is incorrect, since the free space in data files is
   available to the database, but is not considered by the agent.
   Related Files and Output:
   None
   
   
    
   
   

LOCAL FIX

PROBLEM SUMMARY
 *   Incorrect value displayed for Database Detail attributes when
    autogrowth disabled and data freespace is greater than drive
   freespace.
    Additional Information : Wrong values were getting displayed
   for following attributes
    when autogrowth was disabled for all data files :
    Data Freespace, Aggregate Database Freespace, Database Space
   Percent used,
    Aggregate Database Freespace pct, Database max growth size.
    In this defect changes are done in "Data Freespace" and "Data
   Freespace Percent"
    attributes so that now they are considering freespace inside
   data files also for
    calculation. Hence values of these attributes are same as
   "Aggregate Database Freespace"
    and "Aggregate Database Freespace pct" respectively.
   
   
    
   
   

PROBLEM CONCLUSION
 *  Fixed in 631FP2IF4
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   IJ00815
   
   
 * REPORTED COMPONENT NAME
   MON MS SQL V6
   
   
 * REPORTED COMPONENT ID
   5724B96MO
   
   
 * REPORTED RELEASE
   630
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt / Xsystem
   
   
 * SUBMITTED DATE
   2017-10-23
   
   
 * CLOSED DATE
   2017-11-30
   
   
 * LAST MODIFIED DATE
   2017-11-30
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   MON MS SQL V6
   
   
 * FIXED COMPONENT ID
   5724B96MO
   
   

APPLICABLE COMPONENT LEVELS