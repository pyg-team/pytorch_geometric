Title: IBM Performance issues with DE acsi daemon - United States

Text:
DeploymentEngine - DE; acsi daemon TECHNOTE (FAQ)

QUESTION
 What are the issues with running DE acsi daemon? 

CAUSE
Part of the Network Manager installation is managed by the IBM Autonomic Deployment Engine (DE). DE has two modes of operation, and which one is used depends on which user installs it.
When DE is installed as root, it installs to the /usr/ibm, /var/ibm and /etc/ibm directories, and runs continuously as a daemon process.

When DE is installed as non-root, it installs to the user's home directory, and only runs during the installation of each product that uses it.

Since the DE is a Java application, it uses a large amount of memory. Therefore, the continuously running daemon process that results from installing DE as root might impact performance on a machine that only just meets the minimum memory requirements for ITNM.


When installed as root, DE is designed to operate as a daemon process. However, when DE is installed as non-root, it only runs during installations.So if installed as root, it would consistently use up the resources, while as non-root it would only use them when in operation. If the footprint is a big issue on the customer system then it would be best not to install DE as root.



ANSWER
To avoid DE running as a continuous process, install DE as non-root, or stop the acsi process. 


Stopping and restarting the Deployment Engine service

This document explains how to stop, start, disable, and enable the Solution Install or Deployment Engine service. This service is named ACSI Service in Solution Install 1.2.1.10 or higher releases, and IBM ADE Service in Deployment Engine 1.3. Deployment Engine is the name that replaces Solution Install in release 1.3, and will be used hereafter to represent the component releases and the services of Solution Install and Deployment Engine, unless otherwise indicated.

This information is for users who might be concerned about the memory usage of the Deployment Engine service, or about leaving the service running continuously, or who want to stop or disable the service for some other reason and then restart the service when it is needed once again. Authorized users can disable the automatic restarting of the Deployment Engine service by the operating system upon reboot, for example. Authorized users can therefore disable the Deployment Engine service until they have to install, remove, or maintain a software application, or perform some other activity (such as an inventory) that requires the service to be running. 

Note: Stopping the Deployment Engine service (without restarting it) means that future invocations of Deployment Engine will fail, because Deployment Engine is a shared resource that is used by other resources on the computer. Not only will calls fail that are made to Deployment Engine to install or uninstall products or maintenance, calls made to upgrade Deployment Engine or to inventory the installed software will also fail. If the user is notified of such a failure, but is unaware that the Deployment Engine service has been stopped, it might not be clear from the error message that the stopped service is the cause of the failure. 

In the instructions that follow, UNIX-based operating systems include Linux, Hewlett-Packard, Sun Solaris, and IBM AIX operating systems. Not all users are authorized to perform the commands in shown the following instructions; in general you must be an administrator or root user to perform the commands.

Stopping the Deployment Engine service

Instructions for stopping the Deployment Engine service on various operating systems follow.

On UNIX-based operating systems

Enter the following two commands: 

. /var/ibm/common/acsi/setenv.sh

acsisrv.sh -stop


On Windows operating systems

From the Services window, do one of the following:

For Deployment Engine 1.3, select IBM ADE Service from the Services window and then select Stop from the Action menu.
For Solution Install 1.2.1.10 or higher, select ACSI Service from the Services window and then select Stop from the Action menu.



On System i (formerly OS/400) operating systems

From a QSHELL console session, enter the following two commands: 

. /QOpenSys/QIBM/ProdData/acsi/setenv.sh

acsisrv.sh -stop


Starting the Deployment Engine service

Instructions for starting the Deployment Engine service on various operating systems follow.

On UNIX-based operating systems

Enter the following two commands: 

. /var/ibm/common/acsi/setenv.sh

acsisrv.sh -start


On Windows operating systems

From the Services window, do one of the following:

For Deployment Engine 1.3, select IBM ADE Service from the Services window and then select Start from the Action menu.
For Solution Install 1.2.1.10 or higher, select ACSI Service from the Services window and then select Start from the Action menu.


On System i (formerly OS/400) operating systems

From a QSHELL console session, enter the following two commands: 

. /QOpenSys/QIBM/ProdData/acsi/setenv.sh

acsisrv.sh -start


Disabling the Deployment Engine service

Disabling a service prevents the operating system from automatically restarting a stopped service—at reboot time, for example. Instructions for disabling the Deployment Engine service on various operating systems follow.

On UNIX-based operating systems

Comment out the following lines in the /etc/inittab file, except for the line that contains the acsisrv.sh -start command (shown in bold type):

#Begin AC Solution Install block
#Start the Cloudscape database server
bt:nnnn:wait:/usr/ibm/common/acsi/bin/acsisrv.sh -start
#End AC Solution Install block


On Windows operating systems

From the Services window, do one of the following:

For Deployment Engine 1.3, select IBM ADE Service from the Services window and then select Properties from the Action menu.
For Solution Install 1.2.1.10 or higher, select ACSI Service from the Services window and then select Properties from the Action menu.

From the General tab of the Properties window, set Startup type to Disabled.


On System i (formerly OS/400) operating systems

From the command line, run the following command to change the QACUJOBD job description in the QACSICIT library:

CHGJOBD JOBD(QACSICIT/QACUJOBD) RQSDTA()


Enabling the Deployment Engine service 

Enabling a service causes the operating system to automatically restart a stopped service—at reboot time, for example. Instructions for enabling the Deployment Engine service on various operating systems follow.

On UNIX-based operating systems

Uncomment each of the following lines in the /etc/inittab file:

Begin AC Solution Install block
Start the Cloudscape database server
bt:nnnn:wait:/usr/ibm/common/acsi/bin/acsisrv.sh -start
End AC Solution Install block


On Windows operating systems

From the Windows Services window, do one of the following:

For Deployment Engine 1.3, right-click IBM ADE Service and select Properties from the drop-down panel.
For Solution Install 1.2.1.10 or higher, right-click ACSI Service and select Properties from the drop-down panel.

From the General tab, right-click Startup type and select Automatic from the drop-down panel.

On System i (formerly OS/400) operating systems

From the command line, run the following command to change the QACUJOBD job description in the QACSICIT library:

CHGJOBDJOBD(QACSICIT/QACUJOBD)RQSDTA('QSHCMD(''/QOpenSys/QIBM/ProdData/acsi/bin/acsisrv.sh -start'')')