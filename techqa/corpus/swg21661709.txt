Title: IBM Records exist in LSW_TASK table that are not associated with a BPD instance ID for IBM Business Process Manager (BPM) - United States

Text:
 TECHNOTE (FAQ)

QUESTION
 Is it safe to delete rows in the LSW_TASK table where the column bpd_instance_id is null? The subject column of the row starts with "Error executing." 

CAUSE
Note: The information that is contained in this document has been moved to dW Answers at this location [https://developer.ibm.com/answers/questions/171647/is-it-safe-to-delete-rows-in-the-lsw-task-table-wh.html]. The new format will allow you to ask questions of the community to better understand the information. This technote will be archived in 60 days. Please bookmark the new location.


When an undercover agent (UCA) or system activity fails, a record is inserted into the LSW_TASK table to record the failure. The instance is marked as FAILED. These instances need to be restarted through the Process Inspector (web or IBM Process Designer) or REST API. [http://pic.dhe.ibm.com/infocenter/dmndhelp/v8r0m1/topic/com.ibm.wbpm.ref.doc/rest/bpmrest/rest_bpm_wle_v1_process_instanceid_put_suspend,_resume,_or_terminate.htm] While you purge closed tasks and instances [http://pic.dhe.ibm.com/infocenter/dmndhelp/v8r0m1/topic/com.ibm.wbpm.admin.doc/adminguide/topic/removing_proc_instances_db.html], you might notice that some closed tasks are not associated with an instance.


ANSWER
On certain failures like a UCA retry, business process definition (BPD) timer retry, or system lane failure, a record is inserted into the LSW_TASK table. A BPD instance is not associated with this notification. Instead, it becomes an item in the Portal inbox for the administrator. tw_admin is the default user who can see these items. 

 

Identify the error records 

To find these tasks in the system, use the following query and sample SQL and example subject lines: select task_id, subject, status from lsw_task where subject like 'Error executing%' and bpd_instance_id is null 

 * 


Here are some example subject values  * Subject: Error executing Job: "SystemLane activity XXX" 
 * Subject: Error executing Job: "BPD timer execution" 
 * Subject: Error executing UCA: "NameOfUCA" 


In the XML configuration files, the following setting defines the default user who sees these messages:
<notify-error>tw_admin</notify-error> 


You can change this value with a custom XML file [http://www.ibm.com/support/docview.wss?uid=swg21439614].  

Investigation 

Each of these errors has either a task ID or instance ID in the message. Use this ID to link back to the originating call. Share this information with the IBM Business Process Manager developers and system administrators to find possible reasons for these failures. Some UCA errors occur when the system is busy at the time and the UCA will try again. Other errors might come from application design and coding issues. 

 

Removing Error Messages 

Use the database stored procedure [http://pic.dhe.ibm.com/infocenter/dmndhelp/v8r0m1/index.jsp?topic=%2Fcom.ibm.wbpm.admin.doc%2Fadminguide%2Ftopic%2Fremoving_proc_instances_db.html] LSW_ERASE_TASK to remove these tasks. Run the deletion of instances during a maintenance window or non-peak time to minimize impact to the system. Consult your database administrator on how to run this command and loop through a list of task IDs.

 


Cross reference information Segment Product Component Platform Version Edition Business Integration IBM Business Process Manager Express Business Process Definition (BPD) Linux, Windows 8.5, 8.0.1, 8.0, 7.5.1 Business Integration IBM Business Process Manager Advanced Business Process Definition (BPD) AIX, Linux, Windows 8.5, 8.0.1, 8.0, 7.5.1 
PRODUCT ALIAS/SYNONYM
 BPM