Title: IBM PM39260: WMB V7 - INSERTS MISSING FROM BIP MESSAGES ON Z/OS WHEN LANG NOT SET TO 'C' - United States

Text:
z/os  A FIX IS AVAILABLE
WebSphere Message Broker V7.0 - Fix Pack 7.0.0.4 [http://www-01.ibm.com/support/docview.wss?uid=swg24032332]


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  If the verification process is bypassed, the broker starts fine
   in whatever locale is set, but the BIP message inserts are not
   being inserted into the logged messages. This is because even
   though the locale and code page information is being set to
   Sv_SE.IBM-278, for example, the broker is being told to use
   1047.  This code page is being used to convert the message text
   that has been read from the message catalog and when the message
   string is parsed to look for the left and right braces
   ('{' and '}') to denote insert placeholders, they are not being
   found.  The placeholders for the message inserts are not being
   found because the broker has fallen back to using the default
   1047 code page even though the lang/locale settings are set to
   something else - so we get some conversion problems and do not
   find the insert placeholders.
   
   
    
   
   

LOCAL FIX
 *  none available
   
   
    
   
   

PROBLEM SUMMARY
 *  ****************************************************************
   * USERS AFFECTED: All users of WebSphere Message Broker V7.0   *
   *                 on z/OS using a non-English locale.          *
   ****************************************************************
   * PROBLEM DESCRIPTION: When WebSphere Message Broker is        *
   *                      started on z/OS using the               *
   *                      Swedish locale Sv_SE.IBM-278, the       *
   *                      inserts for the BIP messages            *
   *                      are missing. Other locales may also     *
   *                      be affected.                            *
   *                      An example output message:              *
   *                      BIP2150I MQ96BRK EG3 0 ABOUT TO  LOAD   *
   *                      ' 0 '. : ImbLibrary(112)                *
   ****************************************************************
   * RECOMMENDATION:                                              *
   ****************************************************************
   When the broker starts, it tries to determine the language and
   code page that the broker is running in by calling setlocale()
   to determine the LC_* environment variable settings. All the
   LC_* variables are reported correctly. The broker then calls
   into ICU (International Component for Unicode) to determine the
   code page but the ICU function is returning the code page as
   ibm-1047 (the default) instead of ibm-278.
   When a BIP message is to be written to the system log, the code
   page ibm-1047 is used to convert the message text that has been
   read from the message catalog using the Swedish locale. When the
   message text string is parsed to look for the left and right
   braces ('{' and '}') to denote insert placeholders, they are not
   being found and therefore the insert substitution does not take
   place.
   
   
    
   
   

PROBLEM CONCLUSION
 *  WebSphere Message Broker has been updated with an ICU fix to
   correctly report the code page based on locale settings.
   
   ---------------------------------------------------------------
   The fix is targeted for delivery in the following PTFs:
   
   V7.0 - Maintenance Level 7.0.0.4
   
   The latest available maintenance can be obtained from
   'WebSphere Message Broker Recommended Fixes'
   http://www.ibm.com/support/docview.wss?rs=849&uid=swg27006041 [http://www.ibm.com/support/docview.wss?rs=849&uid=swg27006041]
   
   If the maintenance level is not yet available, information on
   its planned availability can be found in 'WebSphere Message
   Broker Planned Maintenance Release Dates'
   http://www-1.ibm.com/support/docview.wss?rs=849&uid=swg27006308 [http://www-1.ibm.com/support/docview.wss?rs=849&uid=swg27006308]
   ---------------------------------------------------------------
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   PM39260
   
   
 * REPORTED COMPONENT NAME
   WEB MB Z/OS
   
   
 * REPORTED COMPONENT ID
   5655V6000
   
   
 * REPORTED RELEASE
   700
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2011-05-16
   
   
 * CLOSED DATE
   2011-08-26
   
   
 * LAST MODIFIED DATE
   2011-12-16
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

MODULES/MACROS
 *  BIP7000H
   
   
    
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   WEB MB Z/OS
   
   
 * FIXED COMPONENT ID
   5655V6000
   
   

APPLICABLE COMPONENT LEVELS
 * R700 PSY
   UP