Title: IBM Message, This portlet is unavailable, appears when accessing the search portlet in OmniFind Enterprise Edition Version 9.1 - United States

Text:
 TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 We have successfully run wp61_install script on WebSphere Portal Server and set the necessary properties(such as hostname, user name and so on) for the new search portlet. However, when we access the search portlet, it shows "This portlet is unavailable" message and we can not perform the search. 

SYMPTOM
You do not see any error when you run wp61_install script, and you can set up some properties successfully from Portal administration console. 

However, you might see java.net.ConnectException, java.net.SocketException, or connection timed out in the Portal's log(SystemOut.log or SystemErr.log) especially when the Portal server can not connect to the Internet directly.



CAUSE
The Struts configuration file validator tries to get the DTD file from the Internet site. In a network isolated environment, the portlet fails to run.



RESOLVING THE PROBLEM
If this occurs on the Portal server where access to the Internet is restricted, take one of the following actions: 


Note: This problem occurs when you're using the new search portlet bundled with OmniFind Enterprise Edition Version 9.1.

1. Make the server network accessible to the Internet

If allowed on your business environment, make the server accessible to the Internet. Otherwise follow step 2 below.

2. Download DTD files, place them on the Portal server, and modify configuration files


 1. Download the following two files and copy them to wp_profile/installedApps/<cell name ornode_name>/PA_searchapp.ear/searchportlet.war/WEB-INF directory
    
    http://struts.apache.org/dtds/struts-config_1_2.dtd [http://struts.apache.org/dtds/struts-config_1_2.dtd]
    http://struts.apache.org/dtds/tiles-config_1_1.dtd [http://struts.apache.org/dtds/tiles-config_1_1.dtd] 
 2. Modify XML headers of WEB-INF/struts-config.xml and tiles-defs.xml to point to the downloaded files  1. In struts-config.xml XML header, change:
        
        From:
        <!DOCTYPE struts-config PUBLIC
        "-//Apache Software Foundation//DTD Struts Configuration 1.2//EN"
        "http://struts.apache.org/dtds/struts-config_1_2.dtd">
        
        To:
        <!DOCTYPE struts-config PUBLIC
        "-//Apache Software Foundation//DTD Struts Configuration 1.2//EN"
        "struts-config_1_2.dtd"> 
     2. In tiles-defs.xml XML header, change:
        
        From:
        <!DOCTYPE tiles-definitions PUBLIC
        "-//Apache Software Foundation//DTD Tiles Configuration 1.1//EN"
        "http://jakarta.apache.org/struts/dtds/tiles-config_1_1.dtd">
        
        To:
        <!DOCTYPE tiles-definitions PUBLIC
        "-//Apache Software Foundation//DTD Tiles Configuration 1.1//EN"
        "tiles-config_1_1.dtd">
        
    
    
 3. Restart the Portal server.


RELATED INFORMATION
#Running the WebSphere Portal integration scripts [http://publib.boulder.ibm.com/infocenter/discover/v9r1m0/index.jsp?topic=/com.ibm.discovery.es.ad.doc/iiysaitinst6.htm]
Documentation updates for OmniFind Enterprise Edition [http://www.ibm.com/support/docview.wss?rs=0&uid=swg21421174]