Title: IBM Creating a URL Mapping in a virtual portal (VP) after installing Cumulative Fix (CF 6) can cause rendering issues or issues accessing the VP - United States

Text:
CF 6; virtual portal; VP; PM89001; mapping; URL Mapping TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 After installing Portal Version 8 Cumulative Fix (CF 6) and creating a URL Mapping in the virtual portal the WCM Local Rendering portlet no longer displays the expected content.

If the virtual portal is configured using a host name, the virtual portal may become inaccessible. 

DIAGNOSING THE PROBLEM
You have installed Portal Version 8 Cumulative Fix (CF 6). You created a URL Mapping in the virtual portal in the URL Mapping portlet but did not set a "mapped to" page. 

Afterward, you found that the WCM Local Rendering portlet no longer displays the expected content.

If the virtual portal is configured using a host name, the virtual portal may become inaccessible.

In both scenarios, SystemOut.log contains:

Caused by: java.lang.NullPointerException
at com.ibm.wps.mappingurl.impl.MappingURLTreeModelImpl$LocatorImpl.isScopedCorrectlyInCurrentVP(MappingURLTreeModelImpl.java:313)
at com.ibm.wps.mappingurl.impl.MappingURLTreeModelImpl$LocatorImpl.findBestMatchInternal(MappingURLTreeModelImpl.java:220)
at com.ibm.wps.mappingurl.impl.MappingURLTreeModelImpl$LocatorImpl.findBestMatch(MappingURLTreeModelImpl.java:139)
at com.ibm.wps.state.inputmediators.WPMappingInputMediator.processMapping(WPMappingInputMediator.java:200)
at com.ibm.wps.state.inputmediators.WPMappingInputMediator.getInfo(WPMappingInputMediator.java:156)
at com.ibm.wps.state.parsers.VpIDParser$Parser.getInfo(VpIDParser.java:323)
at com.ibm.wps.state.inputmediators.CodecInputMediator.internalRead(CodecInputMediator.java:378)
at com.ibm.wps.state.inputmediators.CodecInputMediator.read(CodecInputMediator.java:448)
at com.ibm.wps.state.inputmediators.KeyManagerInputMediator.read(KeyManagerInputMediator.java:216)
at com.ibm.wps.state.parsers.VpIDParser$Parser.read(VpIDParser.java:464)
at com.ibm.wps.state.parsers.VpIDParser.parse(VpIDParser.java:860)
at com.ibm.wps.state.parsers.VpIDParser.parse(VpIDParser.java:846)
at com.ibm.workplace.wcm.services.portal.VirtualPortalMappingServiceImpl.getVirtualPortalForRequest(VirtualPortalMappingServiceImpl.java:86)
at com.presence.connect.business.ServletContext.getPathInfo(ServletContext.java:592)
at com.presence.connect.business.ServletContext.calculatePathToServlet(ServletContext.java:514)
at com.presence.connect.business.ServletContext.loadURL(ServletContext.java:779)
at com.presence.connect.business.ServletContext.assembleRequest(ServletContext.java:740)
at com.presence.connect.business.ServletContext.<init>(ServletContext.java:147)
at com.ibm.workplace.wcm.api.WCM_RenderingContext.createRenderContext(WCM_RenderingContext.java:881)
at com.ibm.workplace.wcm.api.WCM_RenderingContext.getRenderContext(WCM_RenderingContext.java:477)
at com.ibm.workplace.wcm.api.WCM_RenderingContext.getRenderedItem_aroundBody34(WCM_RenderingContext.java:1137)
at com.ibm.workplace.wcm.api.WCM_RenderingContext$AjcClosure35.run(WCM_RenderingContext.java:1)
at com.ibm.workplace.wcm.api.WCMAPIWorkspaceAspect.ajc$around$com_ibm_workplace_wcm_api_WCMAPIWorkspaceAspect$1$77189ab8proceed(WCMAPIWorkspaceAspect.aj)
at com.ibm.workplace.wcm.api.WCMAPIWorkspaceAspect.ajc$around$com_ibm_workplace_wcm_api_WCMAPIWorkspaceAspect$1$77189ab8(WCMAPIWorkspaceAspect.aj:178)
at com.ibm.workplace.wcm.api.WCM_RenderingContext.getRenderedItem(WCM_RenderingContext.java:1)
at com.ibm.workplace.wcm.utils.ItemUtils.getRenderedDocument(ItemUtils.java:502)
at com.ibm._jsp._head_5F_jspx._jspService(_head_5F_jspx.java:305)




RESOLVING THE PROBLEM
Workaround: Remove the URL Mapping using XMLAccess. 


Install the fix for APAR PM92144 [http://www.ibm.com/eserver/support/fixes/fixcentral/swg/quickorder?productid=WebSphere%20Portal&brandid=5&apar=PM92144].