Title: IBM IZ20899: WHENEVER PROGRAM RUNS OUT OF MEMORY, IT WAS NOT HANDLED PROPERLY. - United States

Text:
 SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  Whenever program runs out of memory, it was not handled
   properly. i.e. the exit sequence and error message was
   incorrect. Which was not clear to normal user. Now whenever
   program runs out of space it wont generate any core and exits
   from execution at that point by logging message.
   
   At the moment, when there is an out-of-memory error it is not
   handled in the most sensible way:
   
   1) We generate a core file which is silly because it will most
   likely be huge and corrupted since we ran out of memory
   2) The error message is not worded in layman's terms - it
   mentions "Malloc failure" which is programmers' terminology
   3) The emergency memory we allocate to provide space to create
   the error message can be used up by other threads before we have
   time to print the message - it needs to be increased
   
   
    
   
   

LOCAL FIX
 *  N/A
   
   
    
   
   

PROBLEM SUMMARY
 *  ****************************************************************
   * USERS AFFECTED: ALL                                          *
   ****************************************************************
   * PROBLEM DESCRIPTION: Whenever program runs out of memory, it *
   *                      was not handled properly. i.e. the exit *
   *                      sequence and error message was          *
   *                      incorrect. Which was not clear to       *
   *                      normal user. Now whenever program runs  *
   *                      out of space it wont generate any core  *
   *                      and exits from execution at that point  *
   *                      by logging message.                     *
   ****************************************************************
   * RECOMMENDATION:                                              *
   *                                                              *
   ****************************************************************
   At the moment, when there is an out-of-memory error it is not
   handled in the most sensible way: 1) We generate a core file
   which is silly because it will most likely be huge and
   corrupted since we ran out of memory 2) The error message is
   not worded in layman's terms - it mentions Malloc failure which
   is programmers' terminology 3) The emergency memory we allocate
   to provide space to create the error message can be used up by
   other threads before we have time to print the message - it
   needs to be increased
   
   
    
   
   

PROBLEM CONCLUSION
 *  The following changes have been made: 1) In
   RivErrorCodeStrings.cc, RivErrInsufficientMemory should be
   changed from type E_RESFatal to E_RESExit 2) Also in
   RivErrorCodeStrings.cc, change the error message for
   RivErrInsufficientMemory to this: Out-of-memory - This process
   has run out of memory or exceeded the operating system memory
   limit for a 32 bit application - You must take action to reduce
   the amount of data this application is having to process 3) In
   CRivError.cc, change EMERGENCY_MEMORY_SIZE from 2048 to 32768
   (2K to 32K).  Hopefully this will be enough to get the error
   message printed, even in heavily multi-threaded processes.
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   IZ20899
   
   
 * REPORTED COMPONENT NAME
   NC/PREC DISCOVY
   
   
 * REPORTED COMPONENT ID
   5724O52DS
   
   
 * REPORTED RELEASE
   370
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2008-04-24
   
   
 * CLOSED DATE
   2008-04-24
   
   
 * LAST MODIFIED DATE
   2008-04-24
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

MODULES/MACROS
 *  NETCOOL
   
   
    
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   NC/PREC DISCOVY
   
   
 * FIXED COMPONENT ID
   5724O52DS
   
   

APPLICABLE COMPONENT LEVELS
 * R370 PSY
   UP