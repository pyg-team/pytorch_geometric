Title: IBM IT16342: Channel processes terminate abnormally with probe ID XC130031 amqrmppa gets SIGSEGV in zsqATCBAfter - United States

Text:
 SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  An IBM MQ v8.0.0.5 queue manager with activity tracing enabled,
   channel processes abnormally terminated with SIGSEGV: address
   not mapped
   
   Error log shows
   AMQ7159: A FASTPATH application has ended unexpectedly.
   
   FDC generated with:
   
   Probe Id          :- XC130003
   Program Name      :- amqrmppa
   Thread            :- 211    AsyncConsume
   Probe Type        :- HALT6109
   Major Errorcode   :- STOP
   Comment1          :- SIGSEGV: address not mapped(0x8)
   
   MQM Function Stack
   zlaMainThread
   zlaProcessMessage
   zlaProcessMQIRequest
   zlaMQCB
   zsqMQCB
   zsqATCBAfter
   xcsFFST
   
   
    
   
   

LOCAL FIX
 *  Turn off activity tracing.
   
   
    
   
   

PROBLEM SUMMARY
 *  ****************************************************************
   USERS AFFECTED:
   Users of activity tracing tracing and with fastpath channels
   enabled are at risk of being affected by this issue.
   
   
   Platforms affected:
   MultiPlatform
   
   ****************************************************************
   PROBLEM DESCRIPTION:
   When an IBM MQ queue manager is configured to use fastpath
   channels (MQIBindType=FASTPATH in qm.ini) and activity trace is
   enabled, then changing a queue so that it becomes get inhibited
   can cause a SIGSEGV to occur and the channel process will end.
    The SIGSEGV is caused by IBM MQ referencing a piece of data
   which is not valid when the channel process is connected using
   fastpath MQI bindings.
   
   
    
   
   

PROBLEM CONCLUSION
 *  The code was modified to include a check that the data was valid
   before attempting to access it.
   
   It should be noted that when running with FASTPATH bindings then
   certain MQCBD fields may be missing from MQCB activity trace, as
   unused fields within the MQCBD will not be initialized in
   FASTPATH mode, and omitted from the output accordingly.
   
   ---------------------------------------------------------------
   The fix is targeted for delivery in the following PTFs:
   
   Version    Maintenance Level
   v7.5       7.5.0.8
   v8.0       8.0.0.6
   v9.0 CD    9.0.1
   v9.0 LTS   9.0.0.1
   
   The latest available maintenance can be obtained from
   'WebSphere MQ Recommended Fixes'
   http://www-1.ibm.com/support/docview.wss?rs=171&uid=swg27006037 [http://www-1.ibm.com/support/docview.wss?rs=171&uid=swg27006037]
   
   If the maintenance level is not yet available information on
   its planned availability can be found in 'WebSphere MQ
   Planned Maintenance Release Dates'
   http://www-1.ibm.com/support/docview.wss?rs=171&uid=swg27006309 [http://www-1.ibm.com/support/docview.wss?rs=171&uid=swg27006309]
   ---------------------------------------------------------------
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   IT16342
   
   
 * REPORTED COMPONENT NAME
   WMQ BASE MULTIP
   
   
 * REPORTED COMPONENT ID
   5724H7251
   
   
 * REPORTED RELEASE
   800
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt / Xsystem
   
   
 * SUBMITTED DATE
   2016-07-28
   
   
 * CLOSED DATE
   2016-08-25
   
   
 * LAST MODIFIED DATE
   2017-06-01
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   WMQ BASE MULTIP
   
   
 * FIXED COMPONENT ID
   5724H7251
   
   

APPLICABLE COMPONENT LEVELS
 * R800 PSY
   UP