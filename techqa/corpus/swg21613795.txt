Title: IBM Stop monitoring a database in Optim Performance Manager for maintenance - United States

Text:
Stop OPM Optim Performance Manager disable disabling TECHNOTE (FAQ)

QUESTION
 How can I disable one database in Optim Performance Manager, and keep collecting performance data for the other databases?


CAUSE
You want to keep monitoring the other databases using Optim Performance Manager (OPM) while taking a backup or run maintenance for a specific database.
If you do not stop the monitoring in OPM, OPM will continue trying to connect to the database causing connections errors.

ANSWER
OPM does have some ATS watchdog processes that in case OPM is aborted somehow, the watchdog will drop all the pending event monitors for that database. For additional information, please refer to the related URL section below.

OPM has two different servers: OPM Web Console Server and OPM Repository Server. Both servers connect to the monitored database.
OPM Web Console Server connects to the monitored database to collect Health Alerts information: 

 * Monitoring Status 
 * Database Availability 
 * Table Space Utilization 
 * Table Space Container State 
 * Table Space State 
 * Table Space Quiesced 
 * Table Space Backup Pending 
 * Table Space Drop Pending 
 * Incomplete Recovery 
 * HADR Operational State

 1. Stopping monitoring a database in OPM Repository Server:
    Run peconfig -disable about 15 minutes before the backup. That way the ATS watchdog processes are able to finish before the backup. For additional information about peconfig command, please refer to the related URL section below. 
 2. Starting from OPM V511 "peconfig -disable" will also disable the WEB UI health monitoring, when the WEB UI server is running and active, there is no need to disable health monitoring it in WEB UI additionally. 
 3. When using OPM version lower than V511, stop OPM Web Console Server (WebClient):
    The problem is that peconfig only stops OPM Repository Server, but the OPM Web Console Server is still active and collecting Health Alerts. Unfortunately there is no way that you can stop one database at that time via CLP in OPM Web Console, like in peconfig. You can stop in two ways: 
 4. You can either stop using the Web UI: 
    Databases -> highlight monitored database of interest -> Click on configure -> First page click on Stop collecting monitoring data check box 
 5. Just stop the whole OPM Web Console Server by running the following command from CLP: 
    OPMstop.sh WebClient
    


For additional information on how to stop/start OPM, please refer to the related URL section below. 

This command stops all databases in OPM Web Console, but OPM Repository Server will continue to capture performance data (If you haven't used peconfig to disable them). 

To enable the databases again, you will need to run the -peconfig enable command and start the OPM Web Console Server again or unselect the 'Stop collecting monitoring data' check box. 
RELATED INFORMATION
 How to start/stop OPM V5.1 [http://www-01.ibm.com/support/knowledgecenter/SS9PE5_5.1.1/com.ibm.datatools.perfmgmt.installconfig.doc/pm_start_stop.html]
Additional information on the peconfig program V5.1 [http://www-01.ibm.com/support/knowledgecenter/SS9PE5_5.1.1/com.ibm.datatools.perfmgmt.installconfig.doc/pm_all_commands_peconfig_program.html]
Watchdog procedures V5.1 [http://www-01.ibm.com/support/knowledgecenter/SS9PE5_5.1.1/com.ibm.datatools.perfmgmt.installconfig.doc/using_watchdog_procedures.html]
How to start/stop OPM V5.2 [http://www-01.ibm.com/support/knowledgecenter/SS9PE5_5.2.0/com.ibm.datatools.perfmgmt.installconfig.doc/pm_start_stop.html]
Additional information on the peconfig program V5.2 [http://www-01.ibm.com/support/knowledgecenter/SS9PE5_5.2.0/com.ibm.datatools.perfmgmt.installconfig.doc/reference_configuration.html]
Watchdog procedures V5.2 [http://www-01.ibm.com/support/knowledgecenter/SS9PE5_5.2.0/com.ibm.datatools.perfmgmt.installconfig.doc/using_watchdog_procedures.html]
How to start/stop OPM V5.3.0 [http://www-01.ibm.com/support/knowledgecenter/SS9PE5_5.3.0/com.ibm.datatools.perfmgmt.installconfig.doc/pm_start_stop.html]
Additional information on the peconfig program V5.3.0 [http://www-01.ibm.com/support/knowledgecenter/SS9PE5_5.3.0/com.ibm.datatools.perfmgmt.installconfig.doc/reference_configuration.html]
Watchdog procedures V5.3.0 [http://www-01.ibm.com/support/knowledgecenter/SS9PE5_5.3.0/com.ibm.datatools.perfmgmt.installconfig.doc/using_watchdog_procedures.html]
How to start/stop OPM V5.3.1 [http://www-01.ibm.com/support/knowledgecenter/SS9PE5_5.3.1/com.ibm.datatools.perfmgmt.installconfig.doc/pm_start_stop.html]
Additional information on the peconfig program V5.3.1 [http://www-01.ibm.com/support/knowledgecenter/SS9PE5_5.3.1/com.ibm.datatools.perfmgmt.installconfig.doc/reference_configuration.html]
Watchdog procedures V5.3.1 [http://www-01.ibm.com/support/knowledgecenter/SS9PE5_5.3.1/com.ibm.datatools.perfmgmt.installconfig.doc/using_watchdog_procedures.html]