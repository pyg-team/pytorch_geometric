Title: IBM Content Collector Web Application Fails After Applying Fixpack - United States

Text:
icc; solid db; web application; reconfigure TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 IBM Content Collector (ICC) search application, restore, or preview functions fail after applying a fixpack. 

SYMPTOM
Any requests to the ICC web application may result in a HTTP 500 internal server error. 


In the eWAS SystemOut.log, the following error is logged: 

For example, in C:\IBM\ContentCollector\AFUWeb\ewas\profiles\AFUWeb\logs\afuServer\SystemOut.log, 


[7/26/17 12:38:07:420 PDT] 0000001c webapp E com.ibm.ws.webcontainer.webapp.WebApp logServletError SRVE0293E: [Servlet Error]-[Configuration]: javax.naming.NameNotFoundException: Context: ICC01Node01Cell/nodes/ICC01Node01/servers/afuServer, name: jdbc/afuConfigurationDatabase: First component in name afuConfigurationDatabase not found. [Root exception is org.omg.CosNaming.NamingContextPackage.NotFound: IDL:omg.org/CosNaming/NamingContext/NotFound:1.0]
at com.ibm.ws.naming.jndicos.CNContextImpl.mapNotFoundException(CNContextImpl.java:4564)
at com.ibm.ws.naming.jndicos.CNContextImpl.doLookup(CNContextImpl.java:1822)
at com.ibm.ws.naming.jndicos.CNContextImpl.doLookup(CNContextImpl.java:1777)
at com.ibm.ws.naming.jndicos.CNContextImpl.lookupExt(CNContextImpl.java:1434)
at com.ibm.ws.naming.jndicos.CNContextImpl.lookup(CNContextImpl.java:616)
at com.ibm.ws.naming.util.WsnInitCtx.lookup(WsnInitCtx.java:165)
at com.ibm.ws.naming.util.WsnInitCtx.lookup(WsnInitCtx.java:179)
at javax.naming.InitialContext.lookup(InitialContext.java:436)
at com.ibm.afu.configuration.servlet.ConfigurationServlet.init(ConfigurationServlet.java:99)



CAUSE
The connection to the configuration database needs to be reconfigured. 


ENVIRONMENT
Apply to all IBM Content Collector environments.



RESOLVING THE PROBLEM
 

 * If you have any custom web application configuration files, make a backup copy. Files that you may have custom configuration such as:  * afumessage.properties 
    * custom_label.properties
   
   
 * In ICC Configuration Manager > General Settings > Configuration Web Service, on the right panel under Configuration Web Service Definition, click on Reconfigure. 
 * Some scripts will be executed in the background and may take a few minutes to complete. During this process, the ICC Web Application service will be stopped and restarted. 
 * When reconfigure completes, click on Validate to verify the connection to database is successful.
   If it fails, review the same SystemOut.log to troubleshoot further. 
 * If you have any customer configuration files, restore them and then restart IBM Web Application service.