Title: IBM PK75068: INCORRECT TERMINATION OF CINB TRANSACTION WITH ABEND IUYG. - United States

Text:
 SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  The CINB transaction termination started as the result of CICS
   shutdown before the PLTSD started the CINT transaction to close
   CICS IA properly.
   .
   The CINT log contains messages:
   .
   CIU3305I mm/dd/yy hh:mm:ss applid CINB save started - because
                                     of STOP
   CIU2227I mm/yy/dd hh:mm:ss applid Non-terminal CINT task
                                     initiating
   .
   Recieving the CIU3305I message *before* the CIU2227I message
   confirms the CINB task detected the CICS shutdown before the
   CINT STOP task was attached by the CIUSTOP program.
   .
   Additional Symptom(s) Search Keyword(s): CIUCINB1 CIUCINB2
   CIUA120C STOPPING STOPPED kixrevwjb
   .
   CIU3312S mm/dd/yy hh:mm:ss applid   CINB abending - CICS is
                                       terminating
   CIU3303S mm/dd/yy hh:mm:ss applid   CINB has abended IUYG in
                                       program CIUCINB1
   CIU2206S mm/dd/yy hh:mm:ss applid   CICS EXTRACT EXIT program
                                       CIUXDUMM failed
   CIU2218S mm/dd/yy hh:mm:ss applid   CINT has abended IUZF in
                                       program CIUA120C
   CIU2214I mm/dd/yy hh:mm:ss applid   Collector is now STOPPED
   CIU3312S mm/dd/yy hh:mm:ss applid   CINB abending - CICS is
                                       terminating
   
   
    
   
   

LOCAL FIX

PROBLEM SUMMARY
 *  ****************************************************************
   * USERS AFFECTED: All CICS IA V2.2 users.                      *
   ****************************************************************
   * PROBLEM DESCRIPTION: This APAR resolves a number of issues   *
   *                      with the CINB transaction.              *
   *                                                              *
   *                      1. CICS IA not collecting the DB2       *
   *                      RESNAME field during write to VSAM.     *
   *                                                              *
   *                      2. An abend during PLT shutdown         *
   *                      processing of program CIUSTOP.          *
   *                      Abend codes ;-                          *
   *                      IUYG in CIUCINB1                        *
   *                      IUZF in CIUA120C                        *
   ****************************************************************
   * RECOMMENDATION: Apply the PTF.                               *
   ****************************************************************
   During CICS shutdown the CICS IA transaction CINB can detect
   that a shutdown is in progress. Currently, it forces a save of
   the data to VSAM and then issues the following message
   
   CIU3312S mm/dd/yy hh:mm:ss applid   CINB abending - CICS is
   terminating
   followed by an abend
   CIU3303S mm/dd/yy hh:mm:ss applid   CINB has abended IUYG in
   program CIUCINB1
   
   Id the customer is also using the CICS IA shutdown program
   CINB during the first phase of PLT shutdown then if the
   timing is incorrect in that CINB detects the shutdown before
   the request from the PLT then the you will also see the
   following messages:
   
   CIU2206S mm/dd/yy hh:mm:ss applid   CICS EXTRACT EXIT program
   CIUXDUMM failed
   CIU2218S mm/dd/yy hh:mm:ss applid   CINT has abended IUZF in
   program CIUA120C
   
   Also , if the customer is using the PLT startup program
   CIUSTART and a region record does not exist for the CICS
   region being started then anew record is added to the CIUCNTL
   file for this region. The flag for DB2_QRY is not correctly
   initialise to '40'X in this program and therefore the query
   on the SYSIBM tables when writing DB2 RESNAME from the
   dataspace to VSAM does not occur.
   
   
    
   
   

PROBLEM CONCLUSION
 *  Message CIU3312S has been modified to a warning message and does
   not issue the IUYG abend. Transaction CINB now forces a save to
   VSAM followed by the new warning message and then returns.
   By removing the abend we do not destroy the GWA so the CIUSTOP
   can continue.
   
   The CICS IA startup program has been corrected to initialize the
   DB2_QRY field to '40'X.
   
   
    
   
   

TEMPORARY FIX
 *  *********
   * HIPER *
   *********
   THE RECOMMENDATION IS TO PLACE THE CIUSTOP PROGRAM FIRST
   IN THE LIST OF PROGRAMS IN THE DFHPLT STOP PROGRAM BEFORE
   THE DFHDELIM OPTION.
   
   
    
   
   

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   PK75068
   
   
 * REPORTED COMPONENT NAME
   CICS INTER ANAL
   
   
 * REPORTED COMPONENT ID
   5697J2300
   
   
 * REPORTED RELEASE
   220
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   YesHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2008-11-05
   
   
 * CLOSED DATE
   2008-11-12
   
   
 * LAST MODIFIED DATE
   2008-12-02
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
    UK41534 UK41535
   
   

MODULES/MACROS
 *  CIUA000C CIUA110C CIUA130C CIUCINB1 CIUMSGE
   CIUMSGK
   
   
    
   
   

Publications Referenced SC34679001 FIX INFORMATION
 * FIXED COMPONENT NAME
   CICS INTER ANAL
   
   
 * FIXED COMPONENT ID
   5697J2300
   
   

APPLICABLE COMPONENT LEVELS
 * R22K PSY UK41535
   UP08/11/14 P F811
   
   
 * R220 PSY UK41534
   UP08/11/14 P F811