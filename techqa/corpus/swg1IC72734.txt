Title: IBM IC72734: ADDING DATABASE PARTITION CORRUPTS PARTITION MAP LEADING TO TABLES INCORRECTLY DEFINED ACROSS PARTITIONS - United States

Text:
z/os  FIXES ARE AVAILABLE
DB2 Version 9.5 Fix Pack 8 for Linux, UNIX, and Windows [http://www-01.ibm.com/support/docview.wss?uid=swg24030302]
DB2 Version 9.5 Fix Pack 9 for Linux, UNIX, and Windows [http://www-01.ibm.com/support/docview.wss?uid=swg24032087]
DB2 Version 9.5 Fix Pack 10 for Linux, UNIX, and Windows [http://www-01.ibm.com/support/docview.wss?uid=swg24033308]


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  If you add a database partition to an existing database
   partition group with the following conditions:
   - Database partition group contains an empty, automatic storage
   tablespace (no tables in it)
   - The new database partition is added to the database partition
   group using the WITHOUT TABLESPACES clause
   
   then the partition map defined for the database partition group
   is incorrectly updated.
   
   For example, if your existing database partition group MYDBPG,
   is defined across database partitions (0,1) the PARTITIONMAP
   column in SYSCAT.PARTITIONMAPS will show database partition
   numbers
   0x0000 and 0x0001 over and over again.  If you add the database
   partition 2 to MYDBPG, then the PARTITIONMAP is corrupted where
   it should read, 0x0000 followed by 0x0001 and 0x0002, it will
   instead show 0x0000, 0x0001 and some unknown 0xXXXX value.
   
   This leads to tables not being created on the newly added db
   partition, and can further cause unknown abnormal termination or
   other side effects in this tablespace.
   
   
    
   
   

LOCAL FIX
 *  Define at least one table in the tablespace before adding the
   database partition to the database partition group.  If your
   partition map is already corrupted, it is best to contact DB2
   Service to help cleanup your environment.
   
   
    
   
   

PROBLEM SUMMARY
 *  ****************************************************************
   * USERS AFFECTED:                                              *
   * All DB2 Version 9.5 GA through to Fix Pack 7 servers using   *
   * the Database Partitioning Feature (DPF) and adding new       *
   * database partitions to existing database partition groups.   *
   ****************************************************************
   * PROBLEM DESCRIPTION:                                         *
   * The PARTITIONMAP column is incorrectly being updated when    *
   * adding a new database partition leading to unexpected        *
   * behaviour when creating tables in these tablespaces.         *
   ****************************************************************
   * RECOMMENDATION:                                              *
   * Apply DB2 Version 9.5 Fix Pack 8, or see "Local Fix" for     *
   * workarounds.                                                 *
   ****************************************************************
   
   
    
   
   

PROBLEM CONCLUSION
 *  Problem is first fixed in DB2 Version 9.5 Fix Pack 8 and all
   subsequent Fix Packs.
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   IC72734
   
   
 * REPORTED COMPONENT NAME
   DB2 FOR LUW
   
   
 * REPORTED COMPONENT ID
   DB2FORLUW
   
   
 * REPORTED RELEASE
   950
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2010-11-22
   
   
 * CLOSED DATE
   2011-06-30
   
   
 * LAST MODIFIED DATE
   2011-06-30
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   DB2 FOR LUW
   
   
 * FIXED COMPONENT ID
   DB2FORLUW
   
   

APPLICABLE COMPONENT LEVELS
 * R950 PSN
   UP