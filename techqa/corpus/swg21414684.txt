Title: IBM Error 'Could not attach to JVM' when launching Java-based UI (for example 'FAP' or 'Allocations' with Controller 8.5 or later - United States

Text:
 TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 Customer is trying to use Controller 8.5's new Java-based features (for example 'FAP' or 'Allocations'). User tries to open a user interface (UI) dialogue, for example by clicking 'Maintain - Configuration - Automatic Journals - Control Tables - Allocations'. User receives error message. 

SYMPTOM
Screen: 

 

 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * http://controllersvr/cognos8/controllerserver/CCRWS.asmx
 * 
 * 
 * 
 * 
 * 
 * Could not attach to JVM


TIP: There is no information recorded in the Event Viewer application log. CAUSE
There are several possible causes for the message "Could not attach to JVM". 

 * TIP: For more examples, see separate IBM Technote #1619105.


The Java class path is not set up correctly on the server side. This causes the service "IBM Cognos Controller Java Proxy" to not be able to find a suitable Java Virtual Machine. 

More information: 
The service tries to find a JVM in the following order:  1. Use the system variable CCR_JAVA_HOME 
 2. If there is no CCR_JAVA_HOME variable is defined, then it will try to use the system variable 'JAVA_HOME' 
 3. If this does not exist, it will use the BI/C8 JVM installed with Controller directly.

ENVIRONMENT
Typically, customer's 'production' systems would have the Financial Analytics Publish (FAP) service and the Controller server components installed on different/separate servers. Therefore, in most cases you would not have this problem. 

 
However, especially for 'test' systems, you may wish to run the FAP service on the same application server (as the Controller 'main' system). In this case, you need to set the CCR_JAVA_HOME to point to a Java version 6 JVM.


RESOLVING THE PROBLEM
Ensure that the IBM Java 1.6 is installed on your system. Afterwards, set the system variable CCR_JAVA_HOME appropriately, on the application server. 

 
Steps: 

Part One - Checking that IBM Java 1.6 is installed 

TIP: The instructions for this vary depending on which version of Controller you are using: 

 * Controller 8.5: Manually extract the JRE as per the instructions below 
 * Controller 10.1 (or later): You can skip this section, because the JRE is automatically copied as part of the server install routine. 


 * 
 * Controller 8.x:
 *  Manually extract/copy the 
 * JRE 1.6
 *  files
 *  Logon to the Controller application server as an administrator Locate the folder ...webcontent\ccr. TIP: By default, this is: C:\Program Files\Cognos\c8\webcontent\ccr Copy the file 'jre.zip' to a sensible location (for example a network drive) Logon to the client device (where you wish to use FAP) Create a folder C:\Program Files\ibm\java60\ Extract the file jre.zip to this folder. 
 * 
 * IMPORTANT: Check your folder structure to make sure it matches with the following:
 *  
   You should now have a folder structure with folders such as:  * C:\Program Files\IBM\Java60\jre\bin 
    * C:\Program Files\IBM\Java60\jre\lib
   
   

Part Two - Configuring the 'CCR_JAVA_Home' System Variable 

 1. Obtain a short period of downtime 
 2. Logon to the Controller application server as an administrator 
 3. Right-click on 'My Computer' and choose 'properties' 
 4. Click 'Advanced' Tab 
 5. Click 'Environment Variables' 
 6. Inside the 'System variables' section, add a new variable 'CCR_JAVA_HOME' 
 7. Give this the relevant value.


TIP: By default :  * for Controller 10.x this is: C:\Program Files (x86)\ibm\cognos\c10\bin\jre\6.0 
 * for Controller 8.x this is: C:\Program Files\IBM\Java60\jre


8. Click 'OK', 'OK', 'OK' to save changes 
9. Reboot the server, to ensure the change has been registered 
10. Test 
IMPORTANT: You will have to reboot the client device now for this CCR_JAVA_Home variable change to take place. TIP: For more information, see page 88 of the Controller 8.5 installation guide ("ctrl_inst.pdf").


RELATED INFORMATION
#1417795 - CCR_INTEGRATION_SERVER_DEPLOY_HOME System var [http://www.ibm.com/support/docview.wss?uid=swg21417795]
1415368 - How to install JAVA JRE version 1.6 for use w [http://www.ibm.com/support/docview.wss?uid=swg21415368]
1619105 - ** Troubleshooting ** Error "Could not attach [http://www.ibm.com/support/docview.wss?uid=swg21619105]