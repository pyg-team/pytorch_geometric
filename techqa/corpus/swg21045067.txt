Title: IBM CICSCP EXPORT IMPORT REGION ERZ105053E BAD ARCHIVE FILE - United States

Text:
 TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 I am attempting to restore a TXSeries CICS production
region from an archive of another clone of it. I attempted to import
but get:

C:\>cicscp create region TJONLNT3 -i TJONLNT1.export
ERZ046348I/0427: Creating region 'TJONLNT3' from archive
'C:\TJONLNT1.export'
ERZ105053E/0610: Error - bad archive file
ERZ034117E/0778: Unable to access permanent database stanza file for
class rd.
ERZ034117E/0778: Unable to access permanent database stanza file for
class rd.
ERZ096004E/0006: An error was encountered during the processing of th
cicscp command

This fails when trying to do a production region, but works if a
test region is imported. 

RESOLVING THE PROBLEM
When cicscp fails during a region import, it doesn't clean up what
it has done already. What ever it was able to do before the error
is still left. The file from which the region is being imported
is mostly legible. We followed down through the import file
looking at the region directory that had been created, looking for
the spot in the import file where it said to do something that was
not done.

We found that the CSMT.out file was incomplete and the next file
to be imported, the stats file, wasn't there at all. So, the
import failed while trying to restore a CSMT.out file.

He looked at the region from which he was doing the export and
found that there were many large files (console, symrecs, CCIN.out,
CSMT.out) that were being preserved in the export file. This
brought out two things that might be going wrong:

1) The customer had not brought down the TXSeries CICS region before
issuing the cicsexport command. If the CICS region were altering
one of the log files, such as the CSMT.out file that appeared to be
in error, at the time that the cicsexport process was trying to
copy the file, it might have introduced an invalid sequence of
values in the exported file.

2) The customer had so many large files that there might have
been some kind of space restriction that caused a problem.



Whatever the case, it looks like there is a problem during the export
process handling some of the logs. Since there is no need (or even a
desire) to have the logs from the run of the original region in
the new region, we decided to have the customer get rid of them
before doing the export in the first place. Also, even though the
instructions don't say that the region has to be down to do the
export, since there was a chance of a message in the middle of being
put to one of the logs, we decided to have him bring the region down
before exporting it. The region had to be down before he got rid of
the various logs anyway.


CICS will create the files if they don't exist. Or, if you need the
info, create a directory outside of the region's location
and move the files there. In this case the customer got rid of all of
the xxxx.out files in the region's data directory and all of the
console & symrecs files (except those with the extension .nam)
from the base region directory.

This drastically reduced the size of the exported region file and
allowed the import to complete successfully.