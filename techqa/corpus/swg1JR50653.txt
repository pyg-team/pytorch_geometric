Title: IBM JR50653: JAVA INTEGRATION STEP FAILS WHEN HUGE JAR FILES ARE INVOLVED - United States

Text:
  FIXES ARE AVAILABLE
Version 8.5 Refresh Pack 6 for the IBM Business Process Manager products [http://www-01.ibm.com/support/docview.wss?uid=swg24039185]
Version 8.5.0 Fix Pack 2 for the IBM Business Process Manager products [http://www-01.ibm.com/support/docview.wss?uid=swg24040683]


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  You can model a Java integration step in a service flow to run
   arbitrary Java methods. However, the Java classes that are
   required to run these methods must be attached to the process
   application or toolkit as managed assets (server files).
   There is a special class loader that manages loading classes
   from managed assets.  Sometimes, the classes are swapped out of
   the cache and, as a result,  the classloader of the managed
   assets returns null instead of the resource data. The
   exception that you see depends on the Java method that is being
   called. The exception might indicate that a class-loading issue
   has occurred. For example, Java classes cannot be loaded
   correctly or property files are not loaded.
       This could also result in a temporary performance problem
   while the classes in the jar are being loaded.
   It may result in a WSVR0605W message like this
   [11/21/14 12:00:14:584 EST] 0000001f ThreadMonitor W
   WSVR0605W:
   Thread "WebContainer : 132" (00004752) has been active for
   760075 milliseconds and may be hung.  There is/are 199
   thread(s) in total in  the server that may be hung.
       at
   com.lombardisoftware.server.core.ManagedAssetClassLoader.loadCla
   ss(ManagedAssetClassLoader.java)
       at java.lang.ClassLoader.loadClass(ClassLoader.java:665)
       at org.mozilla.javascript.Kit.classOrNull(Kit.java:92)
       at
   org.mozilla.javascript.Kit.testIfCanLoadRhinoClasses(Kit.java:12
   1)
       at
   org.mozilla.javascript.Context.getApplicationClassLoader(Context
   .java:2273)
       at
   org.mozilla.javascript.NativeJavaTopPackage.init(NativeJavaTopPa
   ckage.java:106)
       at sun.reflect.GeneratedMethodAccessor306.invoke(Unknown
   Source)
       at
   sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethod
   AccessorImpl.java:37)
       at java.lang.reflect.Method.invoke(Method.java:611)
       at
   org.mozilla.javascript.ScriptableObject.buildClassCtor(Scriptabl
   eObject.java:1030)
       at
   org.mozilla.javascript.LazilyLoadedCtor.buildValue(LazilyLoadedC
   tor.java:110)
       at
   org.mozilla.javascript.LazilyLoadedCtor.init(LazilyLoadedCtor.ja
   va:89)
       at
   org.mozilla.javascript.ScriptableObject.getImpl(ScriptableObject
   .java:2032)
       at
   org.mozilla.javascript.ScriptableObject.get(ScriptableObject.jav
   a:287)
       at
   org.mozilla.javascript.IdScriptableObject.get(IdScriptableObject
   .java:387)
       at
   org.mozilla.javascript.ScriptableObject.getProperty(ScriptableOb
   ject.java:1617)
       at
   org.mozilla.javascript.ScriptRuntime.topScopeName(ScriptRuntime.
   java:1788)
       at
   org.mozilla.javascript.ScriptRuntime.name(ScriptRuntime.java:169
   0)
       at
   org.mozilla.javascript.Interpreter.interpretLoop(Interpreter.jav
   a:3410)
       at
   org.mozilla.javascript.Interpreter.interpret(Interpreter.java:24
   87)
       at
   org.mozilla.javascript.InterpretedFunction.call(InterpretedFunct
   ion.java:164)
       at
   org.mozilla.javascript.ContextFactory.doTopCall(ContextFactory.j
   ava:398)
       at
   com.lombardisoftware.core.script.JavaScriptContextFactory.doTopC
   all(JavaScriptContextFactory.java:156)
       at
   org.mozilla.javascript.ScriptRuntime.doTopCall(ScriptRuntime.jav
   a:3070)
       at
   org.mozilla.javascript.InterpretedFunction.exec(InterpretedFunct
   ion.java:175)
       at
   org.mozilla.javascript.Context.evaluateString(Context.java:1104)
       at
   com.lombardisoftware.core.script.js.PreparedScope.createStandard
   ObjectScope(PreparedScope.java:656)
   
   
    
   
   

LOCAL FIX
 *  You can prevent this issue from recurring by increasing the size
   of the managed asset class loader's resource map by adding the
   following lines to the 100Custom.xml file:
   
   <server> <|-- add if not already present-->
     <classloader-resource-map-size>size
     </classloader-resource-map-size>
   </server><|-- add if not already present-->
   
   The actual size depends on the total number of resources that
   are in your managed asset jar files.
   
   
    
   
   

PROBLEM SUMMARY
 *  The managed asset class loader maintains a cache of resources
   that are already loaded.
   If a managed asset jar file contains more resources than the
   maximum cache size can accept, a resource might not be loaded
   correctly and ?null? might be returned.
   
   
    
   
   

PROBLEM CONCLUSION
 *  A fix is available that fixes this class loading issue.
   
   On Fix Central (http://www.ibm.com/support/fixcentral), search
   for JR50653:
   
   1. Select IBM Business Process Manager with your edition from
     the product selector, the installed version to the fix pack
     level, and your platform, and then click Continue.
   
   2. Select APAR or SPR, enter JR50653 , and click Continue.
   
   When you download fix packages, ensure that you also download
   the readme file for each fix. Review each readme file for
   additional installation instructions and information about the
   fix.
   
   
    
   
   

TEMPORARY FIX
 *  Not applicable
   
   
    
   
   

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   JR50653
   
   
 * REPORTED COMPONENT NAME
   BPM ADVANCED
   
   
 * REPORTED COMPONENT ID
   5725C9400
   
   
 * REPORTED RELEASE
   850
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2014-07-02
   
   
 * CLOSED DATE
   2014-08-12
   
   
 * LAST MODIFIED DATE
   2014-11-24
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   BPM STANDARD
   
   
 * FIXED COMPONENT ID
   5725C9500
   
   

APPLICABLE COMPONENT LEVELS
 * R850 PSY
   UP
   
   
 * R855 PSY
   UP