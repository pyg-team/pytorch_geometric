Title: IBM IT08971: INDEFINITE HTTP GET REQUEST RETRIES CAN OCCUR WHEN USING SERVICES WITH PERSISTENT CONNECTIONS - United States

Text:
  FIXES ARE AVAILABLE
Fix packs for DataPower XML Security Gateway version 6.0 [http://www-01.ibm.com/support/docview.wss?uid=swg24034955]
Fix packs for DataPower B2B Appliance version 6.0 [http://www-01.ibm.com/support/docview.wss?uid=swg24034956]
Fix packs for DataPower Integration Appliance version 6.0 [http://www-01.ibm.com/support/docview.wss?uid=swg24034957]
Fix packs for DataPower Low Latency Appliance version 6.0 [http://www-01.ibm.com/support/docview.wss?uid=swg24034958]
Fix packs for DataPower Service Gateway version 6.0 [http://www-01.ibm.com/support/docview.wss?uid=swg24034959]
Fix packs for DataPower Service Gateway version 6.0.1 [http://www-01.ibm.com/support/docview.wss?uid=swg24036407]
Fix packs for DataPower B2B Appliance version 6.0.1 [http://www-01.ibm.com/support/docview.wss?uid=swg24036409]
Fix packs for DataPower Integration Appliance version 6.0.1 [http://www-01.ibm.com/support/docview.wss?uid=swg24036410]
Fix packs for DataPower Service Gateway version 7.0 [http://www-01.ibm.com/support/docview.wss?uid=swg24037486]
Fix packs for DataPower B2B Appliance version 7.0 [http://www-01.ibm.com/support/docview.wss?uid=swg24037487]
Fix packs for DataPower Integration Appliance version 7.0 [http://www-01.ibm.com/support/docview.wss?uid=swg24037488]
Fix packs for DataPower Gateway version 7.1 [http://www-01.ibm.com/support/docview.wss?uid=swg24038524]
Fix packs for DataPower Gateway version 7.2 [http://www-01.ibm.com/support/docview.wss?uid=swg24039783]


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  Affected are customers sending HTTP GET requests to the
   multiprotocol gateway, web service proxy or web application
   firewall service.
   
   With the present implementation, users may end up in a state
   with indefinite retries for HTTP GET requests as long as
   DataPower has at least one live persistent connection to the
   backend server. After timeout interval for active connection it
   will terminate the connection and retry using remaining
   persistent connections to the backend. (If a new connection is
   opened because of half-dead backend this can continue
   indefinitely or until the request is served).
   
   
    
   
   

LOCAL FIX
 *  This behavior cannot be turned off however it can be mitigated.
   For some relief out of this, the admin can lower the Back
   Persistent Timeout and/or User Agent's default Timeout. This
   should result in less persistent connections to the backend and
   thus less possible timeout hops
   
   Dropping the backend persistent connections option is also a
   possible workaround, but the consequences should be weighed
   carefully before making this decision. Not using persistent
   connections comes with a performance penalty, but it very much
   depends on the size/type of the transferred data and the
   speed/ping of the network.
   
   SLM is also strongly encouraged to prevent the backend from
   getting more load than it can handle.
   
   
    
   
   

PROBLEM SUMMARY
 *  Affected are all customers using the Multi-Protocol Gateway,
   Web Service Proxy or Web Application Firewall with persistent
   connection to the backend side.
   
   In case the backend server stops responding to HTTP GET
   requests while there are already some established TCP
   connections from the time the server worked OK, DataPower will
   automatically retry those GET requests after a timeout period.
   This will be retried until there are no established connections
   to the server.
   
   During a high load window, these unwanted retries might
   eventually keep flooding an already congested backend,
   especially if it is still able to establish some new
   connections.
   
   
    
   
   

PROBLEM CONCLUSION
 *  Fix is available in 6.0.0.16, 6.0.1.12, 7.0.0.9, 7.1.0.6 and
   7.2.0.2.
   
   For a list of the latest fix packs available, please see:
   http://www-01.ibm.com/support/docview.wss?uid=swg21237631 [http://www-01.ibm.com/support/docview.wss?uid=swg21237631]
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   IT08971
   
   
 * REPORTED COMPONENT NAME
   DATAPOWER
   
   
 * REPORTED COMPONENT ID
   DP1234567
   
   
 * REPORTED RELEASE
   600
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2015-05-18
   
   
 * CLOSED DATE
   2015-08-12
   
   
 * LAST MODIFIED DATE
   2015-09-02
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   DATAPOWER
   
   
 * FIXED COMPONENT ID
   DP1234567
   
   

APPLICABLE COMPONENT LEVELS
 * R600 PSN
   UP
   
   
 * R601 PSN
   UP
   
   
 * R602 PSN
   UP
   
   
 * R700 PSN
   UP
   
   
 * R710 PSN
   UP
   
   
 * R720 PSN
   UP