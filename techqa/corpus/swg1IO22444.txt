Title: IBM IO22444: COM.IBM.DI.CONNECTOR.LDAPCONNECTOR.COMPARE() FAILS WITH SPECIAL CHARACTERS - United States

Text:
z/os  DIRECT LINKS TO FIXES
7.1.1-TIV-TDI-FP0008 [http://www.ibm.com/support/fixcentral/quickorder?product=ibm%2FTivoli%2FTivoli+Directory+Integrator&fixids=7.1.1-TIV-TDI-FP0008&source=SAR]
7.1.1-TIV-TDI-FP0005 [http://www-01.ibm.com/support/docview.wss?uid=swg24040693]
7.1.1-TIV-TDI-FP0006 [http://www-01.ibm.com/support/docview.wss?uid=swg24043146]
7.1.1-TIV-TDI-FP0007 [http://www-01.ibm.com/support/docview.wss?uid=swg24044377]


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  Title: com.ibm.di.connector.LDAPConnector.compare() fails with
   special characters
   
   Description: When the compare() method of the LDAP connector is
   used, an error is thrown if the 'attvalue' contains an escape
   character.
   
   Steps to Duplicate:
   1. The syntax of compare() is as follows.
   boolean compare(String compdn, String attname, String attvalue)
     compare: performs an ldapcompare operation for the given
   parameters
   
   2. When the string value of 'attvalue' contains special
   characters which are escaped, such as comma "," in 'CN=John
   Smith\,TEMP,OU=company,c=com' the following error is thrown
   
   LDAPConnector.connector.compare(groupdn,"member","CN=John
   Smith\,TEMP,OU=company,c=com") >> com.sun.jndi.ldap.LdapCtx:
   javax.naming.InvalidNameException: cn=Bowling
   team,ou=Groups,o=sample:
   [LDAP: error code 34 - Invalid DN Syntax]; remaining name
   'cn=Bowling team,ou=Groups,o=sample
   
   Desired Behavior: The
   com.ibm.di.connector.LDAPConnector.compare() should handle
   escape characters properly.
   
   Environment: TDI 7.1.1
   
   
    
   
   

LOCAL FIX
 *  DI02138
   
   
    
   
   

PROBLEM SUMMARY
 *  The compare() method in the LDAP Connector should be able to
   "escape" strings. For backwards compatibility,  a new
   compare method that takes a boolean parameter specifying if
   escaping should be done or not is added. Details as below.
   
     /**
      * Performs an LDAP compare operation for the given parameters
      *
      * @param compDN
      *            String representing the DN for which to do a
   compare
      * @param attrName
      *            String representing the name of the attribute to
   compare (left
      *            side of LDAP filter)
      * @param attrValue
      *            String representing the value of the attribute
   to compare
      *            (right side of LDAP filter)
      * @param escapeValue
      *      If false, special characters in the attrValue will be
   escaped.
      *      If true, the attrValue string is already in the format
   accepted by LDAP.
      *
      * @return boolean True if the compare evaluates as true,
   False otherwise
      * @throws Exception
      *             when underlying compare function fails
      */
   
   
   public boolean compare(String compDN, String attrName, String
   attrValue, boolean escapeValue)
   
   
    /**
     * Format the LDAP search string according to RFC 2254.
     * The special characters star, backslash, parenthesis and nul
   will be escaped.
     *
     * @param str
     *            The String containing the LDAP search string.
     */
    public static String formatSearchValue(String str)
   
   
    
   
   

PROBLEM CONCLUSION
 *  This is a bug in the TDI code and has been fixed. The official
   fix will be made available in 7.1.1-TIV-TDI-FP0005
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   IO22444
   
   
 * REPORTED COMPONENT NAME
   ITDI MULTIPLATF
   
   
 * REPORTED COMPONENT ID
   5724D9960
   
   
 * REPORTED RELEASE
   711
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt / Xsystem
   
   
 * SUBMITTED DATE
   2014-11-07
   
   
 * CLOSED DATE
   2014-11-17
   
   
 * LAST MODIFIED DATE
   2014-11-17
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   ITDI MULTIPLATF
   
   
 * FIXED COMPONENT ID
   5724D9960
   
   

APPLICABLE COMPONENT LEVELS