Title: IBM How to setup Master Data Management version 11.x connections to DB2 on zOS - United States

Text:
MDM install; DB2 zOS; datasources TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 How to setup MDM version v11.x datasources to DB2 on zOS 

SYMPTOM
MDM v11.x need special settings to run with DB2 zOS, this is due to MDM Virtual driver requirement.


ENVIRONMENT
Master Data Management version 11.x Advanced Edition 

Websphere 8.5.5.x


DIAGNOSING THE PROBLEM
If MDM v11.x database is not correctly configured, the following messages might throw in the logs" 

 

The following exceptions can be found if the correct settings are not used:
java.sql.SQLException: [IBM][DB2 JDBC Driver]Bind process is not active. Please ensure that the user has permissions to create packages. Packages cannot be created in an XA Connection. DSRA0010E: SQL State = HY000, Error

Caused by: 
com.initiatesystems.orm.exception.InvalidResourceUsageException: [IBM][DB2 JDBC Driver][DB2]XXXXX.MPI_SEGHEAD IS AN UNDEFINED NAME .



RESOLVING THE PROBLEM
In order to install and correctly configure MDM database for DB2 on zOS, it is required to 


1. Remove package collection in custom properties of MDM datasource.
2. Add new custom property collectionId=YOUR_COLLECTION_ID in MDM datasource.
3. Add a new entry PackageCollection=SCHEMA_NAME in {Installed_apps}/MDM-native-E001.ear/native.war/conf/odbc.ini and in {MDM_Home}/mds/conf/odbc.ini.
4. Restart the Application Server (WAS) and then the packages get created in new collection specified in #2.
5. Peform a rebinding on the packages. (DYNAMICRULES=BIND)
6. Restart the Application Server