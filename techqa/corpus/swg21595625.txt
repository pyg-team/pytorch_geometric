Title: IBM How to configure SSL on the Host On-Demand Redirector - United States

Text:
client-side; host-side; both; HOD; redirector; SSL TECHNOTE (FAQ)

QUESTION
 How do you configure the redirector for SSL in IBM Rational Host On-Demand? 

CAUSE
The instructions in the InfoCenter to configure the Host On-Demand redirector do not include configuring for host-side SSL or both client-side and host-side SSL. 

ANSWER
These instructions are in stages to make the configuring and testing easier. This is for Windows based or AIX UNIX based Host On-Demand servers only. 


First, set up client-side only SSL, then set up host-side only SSL, and lastly configure for both, testing each stage. 

Stage 1 - Configure Client-side SSL 

To set up Host On-Demand Redirector for client-side TLS or SSL using a Self-Signed Certificate, do the following: 

 1. Create self-signed certificate and add it to the CustomizedCAs.p12 file  1.  Start IBM Certificate Management utility (Start > Programs > IBM Rational Host On-Demand > Administration > Certificate Management). 
     2.  Create a new CMS key database file or open existing HODServerKeyDb.kdb by selecting Key Database File > New or Open. 
     3.  Type a password for the key database file, and ensure you select Stash the password to a file. 
     4.  Select Personal Certificates from the drop-down menu. 
     5.  Click New Self-Signed in the lower right corner of the Certificate Management window. 
         Fill in the fields as needed. Click OK. 
     6.  Click on Extract Certificate in lower right corner of the Certificate Management window. 
         Extract as a Base64 .arm file to the bin directory. The name of the file can be anything. Just remember where it is. 
     7.  Close the HODServerKeyDb.kdb file by selecting Key Database File > Close. 
     8.  Create or open a CustomizedCAs.p12 file by selecting Key Database File > New or Open. 
         If creating a new file, select PKCS12 as the Key database type. 
         The location of the file will be in the publish directory
         C:\Program Files\IBM\HostOnDemand\HOD
         or
         /usr/local/hostondemand/hod
         Click OK. 
         When prompted, the password must be hod. 
     9.  Select Signer Certificates from the drop-down menu. 
         Click on Add on the right hand side of the window. 
         Find the .arm certificate file created in step 6 to add to the CustomizedCAs.p12 file. 
         Provide a label for the certificate. 
         Click OK. 
     10. Close the CustomizedCAs.p12 file by selecting Key Database File > Close.
         
         
         
    
    
 2. Logon to HODAdmin to configure a Redirector Service with client-side security.  1. Access and logon to HODAdmin. 
     2. Select Redirector Service on the left navigation window. 
     3. Click on Add or Change to configure the service. 
        Enter the destination address of the telnet host you wish to connect to, the non-SSL port of the host, the local port on the HOD redirector, and select Client-side for security. 
        Click OK. 
        
        
        
    
    
 3. Restart the Host On-Demand Service Manager. 
    Go to Control Panel > Administrative Tools > Services. 
    Find Host On-Demand, click on Stop, then Start or just click on Restart. 
    
    
    
 4. Modify or add a session to connect with the TLS or SSL-enabled Redirector Service in either HODAdmin or through the Deployment Wizard, depending on where sessions are defined.  1. Go to Session properties of the session you wish to connect through the redirector. 
     2. For Destination address, enter the address of the Host On-Demand server. 
     3. For Port, enter the local port of the redirector, the default is 12173. 
     4. Select TLS or SSL for Protocol. The connection between the client and the HOD redirector is SSL enabled. 
     5. Click OK to save properties. 
        
        
        
    
    
 5. Start the client and start the session. 
    


The client should now connect via client-side SSL through the redirector. 




Stage 2 - Configure Host-Side SSL 

To set up Host On-Demand Redirector for host-side TLS or SSL using either a Self-Signed Certificate or Certificate from Well-known Certificate Authority, do the following: 

 1. Create or request a certificate on the host you wish to connect to. 
    The Certificate needs to be associated with an SSL port on the Telnet server. 
    The default port is 443.
    
    
    
 2. Extract the certificate into a Base64 .arm file or Binary .der file.  1. Using whatever Certificate Management utility for the host the certificate resides (Digital Certificate Manager on i5OS, gskkyman, RACF, or ACF2 on z/OS) extract the certificate into a Base64 .arm file or Binary .der file. Do not export the certificate. 
     2. Another way to extract the certificate is to connect to the SSL port via a HOD session from the HOD server machine, receive a com 662 error which indicates the server presented a certificate that was not trusted. 
        On the menu-bar of the session, select Communication > Security. 
        Then click on Extract button. 
        Extract the certificate into either a Base64 .arm file or Binary .der file. 
        Remember where you save the file. 
        
        
        
    
    
 3. Add the certificate to both the CustomizedCAs.p12 file and the HODServerKeyDb.kdb files, this is a key step to making the host-side SSL work.  1. From HOD server machine, start the IBM Certificate Management utility (Start > Programs > IBM Rational > Administration > Certificate Management). 
     2. Open the CustomizedCAs.p12 file by selecting Key Database File > Open
        Key database type is PKCS12. 
        The location of the file will be in the publish directory
        C:\Program Files\IBM\HostOnDemand\HOD
        or 
        /usr/local/hostondemand/hod
        Click OK. 
        When prompted, the password is hod. 
     3. Select Signer Certificates from the drop-down menu. 
        Click on Add on the right hand side of the window. 
        Find the .arm or .der certificate file created in step 2 to add to the CustomizedCAs.p12 file. Provide a label for the certificate. This is the certificate from the host. 
        Click OK. 
     4. Close the CustomizedCAs.p12 file by selecting Key Database File > Close 
     5. Open HODServerKeyDb.kdb file by selecting Key Database File > Open
        Key database type is CMS. 
     6. Select Signers Certificates in the Key Database Content drop down. 
        Click on Add on the right hand side. 
        Select the .arm or .der file extracted for the host. 
        Provide label. 
        Click OK. 
        
        
        
    
    
 4. Logon to HODAdmin to configure a Redirector Service with host-side security.  1. Access and logon to HODAdmin. 
     2. Select Redirector Service on the left navigation window. 
     3. Click on Add or Change to configure the service. 
        Enter the destination address of the telnet host you wish to connect to, the SSL port of the host, the local port on the HOD redirector, and select Host-side for security. 
        Click OK. 
        
        
        
    
    
 5. Restart Host On-Demand Service Manager. 
    Go to Control Panel > Administrative Tools > Services. 
    Find Host On-Demand, click on Stop, then Start or just click on Restart. 
    
    
    
 6. Modify or add a session to connect with the TLS or SSL-enabled Redirector Service in either HODAdmin or through the Deployment Wizard, depending on where sessions are defined.  1. Go to Session properties of the session you wish to connect through the redirector. 
     2. For Destination address, enter the address of the Host On-Demand server. 
     3. For Port, enter the local port of the redirector, the default is 12173. 
     4. Select Telnet for Protocol. The connection from client to HOD redirector is non-SSL. 
     5. Click OK to save properties. 
        
        
        
    
    
 7. Start the client and start the session. 


The client should now connect via Host-side SSL through the redirector. 






Stage 3 - Configure Redirector for Both sides for SSL 

This stage puts Client-side and Host-side SSL together. 

 1. Logon to HODAdmin to configure a Redirector Service for Both sides SSL security.  1. Access and logon to HODAdmin. 
     2. Select Redirector Service on the left navigation window. 
     3. Click on Add or Change to configure the service. 
        Enter the destination address of the telnet host you wish to connect to, the SSL port of the host, the local port on the HOD redirector, and select Both for security. 
        Click OK. 
        
        
        
    
    
 2. Modify or add a session to connect with the TLS or SSL-enabled Redirector Service in either HODAdmin or through the Deployment Wizard, depending on where sessions are defined.  1. Go to Session properties of the session you wish to connect through the redirector. 
     2. For Destination address, enter the address of the Host On-Demand server. 
     3. For Port, enter the local port of the redirector, the default is 12173. 
     4. Select TLS or SSL for Protocol. 
        The connection from client to HOD redirector is SSL enabled and the connection between redirector and host is SSL enabled. 
     5. Click OK to save properties.
        
        
        
    
    
 3. Start the client and start the session. 
    


The client should now connect via Both client- and host-side SSL through the redirector. 

Note: The SSL handshaking and encryption causes the connection to take much longer to complete.