Title: IBM SA93776: MQM400 MQV5 MQM CHANNEL COMMANDS DO NOT NEED QMQMADM - United States

Text:
 SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  Customers cannot use MQM channel commands unless they
   have *ALLOBJ authority or are a member of group QMQMADM.
   
   
    
   
   

LOCAL FIX

PROBLEM SUMMARY
 *  Customers cannot use MQM channel commands unless they
   have *ALLOBJ authority or are a member of group QMQMADM.
   
   
    
   
   

PROBLEM CONCLUSION
 *  The commands listed below can be used without the user profile
   having *ALLOBJ authority or being a member of group QMQMADM.
   STRMQMLSR, ENDMQMLSR
   PNGMQMCHL, RSTMQMCHL
   STRMQMCHL, ENDMQMCHL
   STRMQMCHLI
   These commands cannot be used without OS/400 authority to the
   corresponding *CMD object. To grant OS/400 authority, use :-
   GRTOBJAUT OBJ(xxxMQMCHL) OBJTYPE(*CMD) USER(mquser) AUT(*USE)
   These commands will also require the user to have the
   appropriate MQSeries object authority for the MQSeries object
   being opened or connected to. For example :-
   RSTMQMCHL requires *CONNECT authority to the queue manager:
             GRTMQMAUT OBJ(QMgrName) OBJTYPE(*MQM)
               USER(mquser) AUT(*CONNECT) MQMNAME(QMgrName)
   PNGMQMCHL requires *CONNECT and *INQ authority to the Q manager:
             GRTMQMAUT OBJ(QMgrName) OBJTYPE(*MQM)
               USER(mquser) AUT(*INQ *CONNECT) MQMNAME(QMgrName)
   STRMQMCHL and ENDMQMCHL require *CONNECT authority to the
   queue manager and *ALLMQI authority to the transmission queue
   associated with the channel:
             GRTMQMAUT OBJ(XmitQName) OBJ(*Q)
               USER(mquser) AUT(*ALLMQI) MQMNAME(QMgrName)
   STRMQMCHL and ENDMQMCHL will also require *ALLMQI authority
   to the various MQSeries SYSTEM channel queues (for example
   for logging channel start and channel stop events):
             GRTMQMAUT OBJ(SYSTEM.ADMIN.CHANNEL.EVENT) OBJ(*Q)
               USER(mquser) AUT(*ALLMQI) MQMNAME(QMgrName)
             GRTMQMAUT OBJ(SYSTEM.CHANNEL.SYNCQ) OBJ(*Q)
               USER(mquser) AUT(*ALLMQI) MQMNAME(QMgrName)
   STRMQMCHLI will require *ALLMQI authority to the channel
   initiation queue:
             GRTMQMAUT OBJ(SYSTEM.CHANNEL.INITQ) OBJ(*Q)
               USER(mquser) AUT(*ALLMQI) MQMNAME(QMgrName)
   Finally, ENDMQMLSR requires access to use program ENDMQLSR:
             GRTOBJAUT OBJ(QMQM/ENDMQLSR) OBJTYPE(*PGM)
               USER(mquser) AUT(*EXECUTE)
   Error messages:
       If you obtain error 'Not authorised' (AMQ8135) when
       executing the command - then you do not have *CONNECT
       authority to the queue manager.
       If you obtain 'Program cannot open queue manager object'
       (AMQ9509) with reason code 2035 (MQRC_NOT_AUTHORIZED) when
       executing the command - then you do not have *INQ or
       *ALLMQI authority.
   Known conditions for logging FFST reports with probe
   XC022001 or XC022002 in function xcsDisplayMessageForSubpool:
       When any of the above commands report a failing condition,
       for example AMQ9509 with reason code 2085 because a
       channel object such as the transmission queue has not
       been created.
       The FFST will be reported:
       at any time - if the Queue Manager was created before this
       PTF was applied, and all three error logs have never been
       rolled over when they reached their MQMAXERRORLOGSIZE
       threshold, or
       at roll-over time, for any Queue Manager, when the
       AMQERR01.LOG file in the
       /QIBM/UserData/mqm/qmgrs/QMGRNAME/errors
       directory has reached the MQMAXERRORLOGSIZE threshold.
       The circumvention is:
       Use QSHELL commands to delete (or rename if back-up copies
       are required) all three AMQERRnn.LOG files, and then use
       command RCDMQMIMG OBJ(QMGRNAME) OBJTYPE(*MQM)
               MQMNAME(QMGRNAME) DSPJRNDTA(*YES)
       to force a recreation of these three error log files.
   This PTF has also made a change to the operation of STRMQMLSR,
   such that this command no longer pre-reqs STRMQM - in other
   words STRMQMLSR can be used with the Queue Manager being in
   an INACTIVE state. Note, it is still the case that ENDMQMLSR
   cannot be used when the Queue Manager is in an ACTIVE state.
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   SA93776
   
   
 * REPORTED COMPONENT NAME
   MQSERIES FOR AS
   
   
 * REPORTED COMPONENT ID
   5733A3800
   
   
 * REPORTED RELEASE
   520
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2001-07-31
   
   
 * CLOSED DATE
   2001-07-31
   
   
 * LAST MODIFIED DATE
   2004-11-10
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
    SF66287
   
   

MODULES/MACROS
 *  AMQOCPPX AMQOPCHX AMQOSTLX AMQOVFYX LMQMRAS
   
   
    
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   MQSERIES FOR AS
   
   
 * FIXED COMPONENT ID
   5733A3800
   
   

APPLICABLE COMPONENT LEVELS
 * R520 PSY SF66287
   UP02/09/23 P 2260