Title: IBM Cannot logon to ITCAM MS gui with userid of root - United States

Text:
ITCAM MS TECHNOTE (TROUBLESHOOTING)

THIS DOCUMENT APPLIES ONLY TO THE FOLLOWING LANGUAGE VERSION(S):
 US English 

PROBLEM(ABSTRACT)
 "Cannot login to the MS GUI. ITCAM was originally installed as root but login to the server as root is not allowed now." 

SYMPTOM
Cannot logon to the ITCAM GUI. The product was originally installed 

as root and root is no longer allowed to externally logon to servers.


CAUSE
Cannot logon to the ITCAM GUI. The product was originally installed
as root and root is no longer allowed to externally logon to servers.


ENVIRONMENT
ITCAM for WebSphere



DIAGNOSING THE PROBLEM
[12/15/09 19:12:36:760 GMT] 00000023 exception E 

com.ibm.ws.wim.ProfileManager loginImpl CWWIM4537E No principal is found 
from the 'root' principal name. 
[12/15/09 19:12:36:764 GMT] 00000023 exception E 
com.ibm.ws.wim.ProfileManager loginImpl 

com.ibm.websphere.wim.exception.PasswordCheckFailedException: CWWIM4537E 
No principal is found from the 'root' principal name. 
at com.ibm.ws.wim.ProfileManager.loginImpl(ProfileManager.java:3056) 


RESOLVING THE PROBLEM
The ITCAM console login authentication is done at the WebSphere. 

 
The ITCAM login user can be mapped to the WAS user. 

If root access is not available, change the WAS authentication to Federated repositories instead of local OS as seen in the security.xml uploaded. You do this by logging into WAS admin console and selecting "Security" on the left panel. Since the security.xml file shows these lines, you can only login as root: user: 

userRegistries xmi:type="security:LocalOSUserRegistry" 
xmi:id="LocalOSUserRegistry" serverId="root" 

However, the uploaded SystemOut.log shows this error when logging in as root: 

[12/15/09 19:12:36:760 GMT] 00000023 exception E 
com.ibm.ws.wim.ProfileManager loginImpl CWWIM4537E No principal is found 
from the 'root' principal name. 
[12/15/09 19:12:36:764 GMT] 00000023 exception E 
com.ibm.ws.wim.ProfileManager loginImpl 

com.ibm.websphere.wim.exception.PasswordCheckFailedException: CWWIM4537E 
No principal is found from the 'root' principal name. 
at com.ibm.ws.wim.ProfileManager.loginImpl(ProfileManager.java:3056) 

Change the security setting below to disable global security. 
set enabled=false and restart the server (DMgr if ND) login without user authentication. 
<security:Security xmi:version="2.0" xmi:id="Security_1" 
useLocalSecurityServer="true" useDomainQualifiedUserNames="false" 
enabled="true" 

Login to the WAS admin console, and change the user account repository as specified above to Federated. Define the WAS user in that repository. Restart the DMgr and node agent if using ND, and the VE server. Login to the WAS admin console to make sure Global Security is set correctly, and you can login using the WAS user you specified in federated user repository. 

Another way to resolve this is shown below:

You can map the ITCAM user to the WAS user by updating the USERs table in the octigate database. 
For example, if you currently have username=root mapped to ext_user=root, and your WAS user is wasadmin (federated user) and the ITCAM user you want to use is itcamuser, you should make the following db2 change (use the JDBC_USER specified in MS/setenv.sh to connect to DB2): 

db2 connect to octigate user <JDBC_USER> using <password> 
db2 "update users set username='wasadmin', ext_user='itcamuser' where username='root' and ext_user='root'"

 

PRODUCT ALIAS/SYNONYM
 ITCAMforWebSphere