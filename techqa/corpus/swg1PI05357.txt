Title: IBM PI05357: CIRCULAR TYPE DEPENDENCY IN TYPE/OBJECTTYPE CLASSES IN BCEL COULD CAUSE THREADS TO HANG - United States

Text:
 SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  3LKMONOBJECT
   com/ibm/xltxe/rnm1/xtq/bcel/generic/ObjectType@0x000000072B8A21D
   0/0x000000072B8A21DC: <unowned>
   3LKNOTIFYQ            Waiting to be notified:
   3LKWAITNOTIFY            "SIBJMSRAThreadPool : 7"
   (0x0000000035244A00)
   
   Blocking thread has stack:
   ==========================
   3XMTHREADINFO      "SIBJMSRAThreadPool : 7"
   J9VMThread:0x0000000035244A00, j9thread_t:0x0000010028D07460,
   java/lang/Thread:0x0000000721F25020, state:CW, prio=5
   3XMJAVALTHREAD            (java/lang/Thread getId:0xE9,
   isDaemon:true)
   3XMTHREADINFO1            (native thread ID:0x20B00B7, native
   priority:0x5, native policy:UNKNOWN)
   3XMTHREADINFO3           Java callstack:
   4XESTACKTRACE                at java/lang/Object.wait(Native
   Method)
   4XESTACKTRACE                at
   java/lang/Object.wait(Object.java:167(Compiled Code))
   4XESTACKTRACE                at
   java/lang/J9VMInternals.initialize(J9VMInternals.java:236(Compil
   ed
   Code))
   4XESTACKTRACE                at
   com/ibm/xltxe/rnm1/xtq/bcel/generic/Type.<clinit>(Type.java:83)
   4XESTACKTRACE                at
   java/lang/J9VMInternals.initializeImpl(Native Method)
   4XESTACKTRACE                at
   java/lang/J9VMInternals.initialize(J9VMInternals.java:200(Compil
   ed
   Code))
   4XESTACKTRACE                at
   com/ibm/xltxe/rnm1/xylem/types/ConstructorDataType.<clinit>(Cons
   tructorD
   ataType.java:105)
   4XESTACKTRACE                at
   java/lang/J9VMInternals.initializeImpl(Native Method)
   4XESTACKTRACE                at
   java/lang/J9VMInternals.initialize(J9VMInternals.java:200(Compil
   ed
   Code))
   4XESTACKTRACE                at
   com/ibm/xltxe/rnm1/xylem/AbstractTypeStore.readTypes(AbstractTyp
   eStore.j
   ava:188)
   
   Waiting threads has stack
   =========================
   3XMTHREADINFO3           Java callstack:
   4XESTACKTRACE                at
   com/ibm/xltxe/rnm1/xtq/drivers/XStarCompiler.loadRuntimeLibrary(
   XStarCompiler.java:689)
   4XESTACKTRACE                at
   com/ibm/xltxe/rnm1/xtq/xpath/drivers/XPathCompiler.compile(XPath
   Compiler.java:770)
   4XESTACKTRACE                at
   com/ibm/xltxe/rnm1/xtq/xpath/drivers/XPathPreparer.prepare(XPath
   Preparer.java:242)
   4XESTACKTRACE                at
   com/ibm/xltxe/rnm1/xtq/xpath/drivers/XPathPreparer.prepare(XPath
   Preparer.java:199)
   4XESTACKTRACE                at
   com/ibm/bpe/xpathservice/impl/xci/XPathServiceImpl.evaluate(XPat
   hServiceImpl.java:460)
   4XESTACKTRACE                at
   com/ibm/bpe/xpathservice/impl/xci/XPathServiceImpl.evaluateAllow
   FieldIsNotSet(XPathServiceImpl.java:430)
   4XESTACKTRACE                at
   com/ibm/bpe/xpatheval/BasicXPathEvaluator.evaluateAllowFieldIsNo
   tSet(BasicXPathEvaluator.java:170)
   4XESTACKTRACE                at
   com/ibm/bpe/engine/BpelActivityKindAssign.copyFromSpecVariablePa
   rtQuery(BpelActivityKindAssign.java:754)
   4XESTACKTRACE                at
   com/ibm/bpe/engine/BpelActivityKindAssign.copyFromSpecVariablePa
   rtQuery(BpelActivityKindAssign.java:590)
   4XESTACKTRACE                at
   com/ibm/bpe/engine/BpelActivityKindAssign.doActivate(BpelActivit
   yKindAssign.java:140)
   4XESTACKTRACE                at
   com/ibm/bpe/engine/BpelActivityStateInactive.activateOrSkip(Bpel
   ActivityStateInactive.java:280(Compiled Code))
   
   
    
   
   

LOCAL FIX

PROBLEM SUMMARY
 *  ****************************************************************
   * USERS AFFECTED:  All IBM WebSphere Application Server        *
   *                  Feature Pack for XML users                  *
   ****************************************************************
   * PROBLEM DESCRIPTION: Circular type dependency of Type and    *
   *                      ObjectType classes in BCEL could cause  *
   *                      threads to hang.                        *
   ****************************************************************
   * RECOMMENDATION:                                              *
   ****************************************************************
   Type class had some static members which called ObjectType
   class. But ObjectType class extends the Type class. So there
   is a circular dependency which could cause threads to hang.
   
   
    
   
   

PROBLEM CONCLUSION
 *  The static members of Type class were moved to another class,
   hence the circular dependency was broken.
   
   The fix for this APAR is currently targeted for inclusion in
   Feature Pack for XML fix pack 1.0.0.17. Please refer to the
   Recommended Updates page for delivery information:
   http://www.ibm.com/support/docview.wss?rs=180&uid=swg27004980 [http://www.ibm.com/support/docview.wss?rs=180&uid=swg27004980]
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   PI05357
   
   
 * REPORTED COMPONENT NAME
   XML FEATUREPACK
   
   
 * REPORTED COMPONENT ID
   5724J0856
   
   
 * REPORTED RELEASE
   700
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2013-11-01
   
   
 * CLOSED DATE
   2014-01-22
   
   
 * LAST MODIFIED DATE
   2014-01-22
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
    PI09680 [http://www-01.ibm.com/support/docview.wss?uid=swg1PI09680]
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   XML FEATUREPACK
   
   
 * FIXED COMPONENT ID
   5724J0856
   
   

APPLICABLE COMPONENT LEVELS
 * R700 PSY
   UP