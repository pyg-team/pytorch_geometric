Title: IBM XBRL - Generation error when generating Extension Taxonomy (XET) to Server - United States

Text:
 TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 Unable to generate Extension taxonomy (XET) to server as it fails with "An unknown server error occurred". The server logs will indicate further information pointing to a delete statement conflicting with a reference constraint in the XBRL Database. 

SYMPTOM
Unable to generate Extension Taxonomy (XET) to Server - see screenshot: 

[/support/docview.wss?uid=swg21980459&aid=1] [/support/docview.wss?uid=swg21980459&aid=1] 

The CDM App Server AllErrors Logs will show a message similar to:
Ibm.CognosDM.Xbrl.BusinessLogic.Activation.TransactionManager - (null) could not delete: [Ibm.CognosDM.Xbrl.Domain.XBRL.ItemElement#36569520][SQL: DELETE FROM xbrl.XBRLItemElement WHERE Id = ?] ? ? ? NHibernate.Exceptions.GenericADOException: could not delete: [Ibm.CognosDM.Xbrl.Domain.XBRL.ItemElement#36569520][SQL: DELETE FROM xbrl.XBRLItemElement WHERE Id = ?] ---> System.Data.SqlClient.SqlException: The DELETE statement conflicted with the REFERENCE constraint "FK_ApplicationProjectAspectsDirectExplicitDimensionAspect_ValueId". The conflict occurred in database "XBRL", table "xbrl.ApplicationProjectAspectsDirectExplicitDimensionAspect", column 'ValueId'.


RESOLVING THE PROBLEM
IBM Dev is investigating the exact cause and long-term resolution. See APAR PI54970 [http://www-01.ibm.com/support/docview.wss?crawler=1&uid=swg1PI54970].

See below for a few work-arounds. Please contact IBM Technical Support for assistance in executing the best work-around for your specific situation. Thank you.


Work Arounds (In order of easiest to hardest)

A. Generate your previous Extension Taxonomy to Server.

For example, if you had previously rolled over your 2014-10K to a 2015-10K, then simply generate the 2014-10K extension taxonomy to server. This will allow you to generate your 2015-10K taxonomy successfully to server.


B. Replace your taxonomy.

1. Generate the (ie. 2015-10K) taxonomy to a folder. (Like your Desktop)

2. Re-import the taxonomy files under Administration -> Taxonomies with a slightly different name, such as "20151231 NEW". Ensure that "Editable" is checked on when importing.

3. Create a mapping from the existing taxonomy to the new taxonomy. Ensure you choose "Match by Element ID". Ensure there are no unmapped elements that remain.

4. Replace the taxonomy for the project by going to Projects -> Right click
on the 2015 10-K and press Replace Taxonomy. Press OK to any prompts. If you get errors instead of just informational messages or warnings contact IBM support.

5. Generate from the new extension taxonomy, it should succeed now when
generating to Server.

6. You can now re-name the old taxonomy from Administration->Taxonomies to
something like "20151231 OLD DO NOT USE".


C. Delete the old XBRL project.
This completely breaks the link that is causing the reference constraint to be triggered. Deletion of the 2014 10K project for example if your 2015 10K project is the one failing. This obviously cannot be used by most customers on a live production environment as they would lose their old report's XBRL tags/project. A full database backup is recommended by IT. It would be best to contact IBM Technical Support if options A and B do not work to ensure this is the only path forward.