Title: IBM Turn off collection of the CLIENT NODE STATUS attribute group - United States

Text:
KSK_CNS_ON IT04107 CLIENT NODE STATUS perf TECHNOTE (FAQ)

QUESTION
 This document provides the work around for APAR IT04107. 

CAUSE
In large environments, the following query issued by the Tivoli Storage Manager monitoring and reporting agent may not complete in a timely manner: 

 * 
 * select a.entity, a.Failed, a.start_time, a.activity,
 * 
 * a.successful from summary as a where a.activity='BACKUP' and
 * 
 * a.successful='YES' and start_time = (select max(b.start_time)
 * 
 * from summary as b where a.entity = b.entity and
 * 
 * b.activity='BACKUP' and b.successful='YES')


This query is associated with data collection for the Client Node Status attribute group and, as such, data associated with this attribute group may not be present in the Tivoli Enterprise Portal or WAREHOUS database as expected. 
ANSWER
The first step is to stop the Tivoli Storage Manager Agent instances. These are the agents used for collecting the data from their respective servers. 

 * 
 * 
 * 
 *  Open up the Manage Tivoli Monitoring Services (TEMS) Select each of the Monitoring Agents for Tivoli Storage Manager and stop the agent 

 * 
 * 
 *  itmcmd agent -o instance_name stop sk (command line) Open up the CandleManage
   Select each of the Monitoring Agent for Tivoli Storage Manager, right click and select Stop for the agent selected 


Next you need to modify the following config file to turn off the CLIENT NODE STATUS attribute group:  * 
 * 
 *  <install_dir>\itm\tmaitm6
   Example: C:\IBM\itm\tmaitm6 kskenv_xxx (xxx = name of the agent instance)
   Example: kskenv_myinstance
   
 * 
 * 
 *  <install_dir>/itm/config
   Example: /opt/Tivoli/TSM/Reporting/itm/config sk_xxx.config(xxx = name of the agent instance)
   Example: sk_myinstance.config sk.ini 

Once you have your file open, you will need to locate the option for the CLIENT NODE STATUS, which is KSK_CNS_ON.  *  The default value is 1, which enables the collection of the data Valid values are 0 or 1. 0 turns off the collection and 1 enables the collection An invalid value disables the query. 

RELATED INFORMATION
 PERFORMANCE ISSUE WITH SQL QUERY ISSUED BY MONITORING A [http://www-01.ibm.com/support/docview.wss?uid=swg1IT04107]


 

PRODUCT ALIAS/SYNONYM
 TSM ADSM