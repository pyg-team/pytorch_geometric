Title: IBM RNX0351 Error Code 27 When RPG ILE XML-INTO Parsers XML Data With an & (Ampersand) Sign - United States

Text:
 TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 This document explains how you would get a RNX0351 error code 27 when running a ILE RPG program doing a XML-INTO when the XML data has an & (ampersand) sign and how to resolve it. 

RESOLVING THE PROBLEM
 

Disclaimer: This is an example only. IBM accepts no responsibility for its correctness. 

The following program and xml data will end in an RNX0351 error code 27. 

RPGLE program called XMLINTOEX: 

DRow1 ds 
D VendName 30a 
/free 
XML-INTO Row1 %XML('/home/TESTXML.xml' : 
'doc=file case=any'); 
*INLR = '1'; 
/end-free 


You should use Notepad to create the XML document which is called TESTXML.xml. The document was saved in the directory /home: 

<Row1> 
<VendName>A & L TRUCKING</VendName> 
</Row1> 

After you run it, you will get the following message: 

Message ID . . . . . . : RNX0351 Severity . . . . . . . : 50 
Message type . . . . . : Escape
Date sent . . . . . . : 03/25/09 Time sent . . . . . . : 13:27:46 

Message . . . . : The XML parser detected error code 27. 
Cause . . . . . : While parsing an XML document for an RPG procedure, the
parser detected an error at offset 27 with reason code 27. The actual
document is /home/TESTXML.xml; *N indicates that the XML 
document was not an external file. 
Recovery . . . : Contact the person responsible for program maintenance to
determine the cause of the problem. 

You will also see the following if you answer the message with an F for full formatted dump: 

ILE RPG FORMATTED DUMP 
ROW1 DS 
VENDNAME CHAR(30) ' ' 
VALUE IN HEX '404040404040404040404040404040404040404040404040404040404040'X 

To resolve, you must change the XML data to the following. Note: If you need an & (ampersand) in your XML data, you must type a &amp; each time. 

<Row1> 
<VendName>A &amp; L TRUCKING</VendName> 
</Row1>  


Cross reference information Segment Product Component Platform Version Edition Operating System IBM i 6.1 
HISTORICAL NUMBER
 519407591