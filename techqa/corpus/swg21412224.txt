Title: IBM Content Manager OnDemand for z/OS returns "userid or password is not valid for server" for valid userid and password - United States

Text:
userid; password; invalid; RACF; logon; arsuser; indexes; DB2; inconsitent TECHNOTE (FAQ)

QUESTION
 
Why do I receive a "userid or password is not valid for server" error message returned from the Content Manager OnDemand for z/OS server when a valid RACF defined userid and password is entered? 

CAUSE

All valid logon attempts to the OnDemand server are failing with "userid or password is not valid for server" returned to the clients (admin and user) but there are no corresponding RACF error messages issued to the ARSSOCKD started task log.

The same userids and passwords can be used to successfully logon to other applications using RACF validation (e.g., TSO) 

It has been confirmed that the OnDemand security exit for userid/password validation with RACF at logon is active and enabled as follows:


 * D PROG,EXIT,EXITNAME=ARS.SECURITY console command returns:

 * 
 * 
 * 
 * 
 * 

 * SRVR_FLAGS_SECURITY_EXIT=1 entry exits in ars.ini file


When an actual invalid userid and/or password is entered, RACF messages are issued to the ARSSOCKD stc log indicating the reason for the failure. 
ANSWER
 

Error messages appear on the DB2 subsystem MSTR log when a DB2 query using SPUFI or the Windows DB2 User Client is done on <owner>.ARSUSER for specific users, indicating there is an inconsistency between the indexes on the ARSUSER table and the data in the table. 

Even if it is not known what might have caused this inconsistency, running the DB2 REBUILD INDEX utility on the ARSUSER_ID_IDX and ARSUSER_NAME_IDX indexes on the ARSUSER table resolves the logon failures for valid userids and passwords.