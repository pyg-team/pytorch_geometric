Title: IBM ERROR: Could not switch database, when changing user databse in Web client - United States

Text:
CQ; ClearQuest Web; CQ Web; switch database; ClearQuest; Java Web; password; CQ Admin; ncqw; cqwj; Could not switch database; 1177919 TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 This technote explains how to resolve the error, "Could not switch database", that might occur when using the IBM® Rational® ClearQuest® (CQ) Web client. 

SYMPTOM
This error occurs when trying to select a database using the ClearQuest Web client: 


Could not switch database.



CAUSE
There can be several causes of this issue: 

 1. The password for the user database does not match the password for the schema repository. The most likely reason is that the ClearQuest database has not been updated with the user's current password. See your ClearQuest administrator for more information. 
 2. There are databases that no longer physically exist, but have not yet been "deleted" in the ClearQuest Designer. 
 3. A new user database exists in the schema repository, but the dbset is not refreshed on the Web server. 
 4. There a missing or incorrect IBM® DB2® alias. This problem affects version 2003, which relies on DB2 client software for connectivity. 
 5. A fully qualified domain name is not being used in the URL.

RESOLVING THE PROBLEM



Resolution to Cause 1 Perform the following steps: 

 1. Open ClearQuest Designer. 
 2. Select Tools > User Administration. 
 3. Select the user account that is not able to switch to the database. 
 4. Enter the correct password for this account and verify that the proper database is selected under the databases to subscribe the user. Click OK. 
 5. Select DB Action > Upgrade. Select the appropriate database and click OK. 
 6. Once the message User database <logical_database_name> upgrade successful appears, then you will be able to select the database in ClearQuest Web.


Resolution to Cause 2 Perform the following steps: 

 1. Open ClearQuest Designer. 
 2. Select Databases > View User Database Properties. 
 3. Look through each database and verify it is still valid. 
 4. If there are old databases that no longer exist, delete them in the Databases > Delete User Database screen.

 

Resolution to Cause 3 Refresh the dbset on the Web server. Run the cqreg command with the refresh sub-command. See technote 1320850 [http://ibm.com/support/docview.wss?rs=988&uid=swg21320850] for further details on the cqreg command. 

 

 

Resolution to Cause 4 Verify that the DB2 aliases applicable to ClearQuest exist and are valid. To create a DB2 alias, perform the following steps:


 1. Click Start > IBM DB2 > Set-up Tools > Configuration Assistant. 
 2. In the DB2 Message dialog box, press Yes, then, press the Search the Network button and press Next. 
 3. Expand the Known Systems folder. If you see the DB2 database server host on which the ClearQuest database resides, expand it and select the database name for which you want to create an alias. Click Next.
    Note: If you do not see the DB2 server host you need, expand the Other Systems folder. If you still do not see the host, talk to your ClearQuest database administrator. There might be a network problem. 
 4. Type an alias name in the Database alias box. Type an optional comment in the Comment box and click Next. 
 5. Clear the "Register this database for ODBC" option if it is selected. Press Finish. 
 6. A confirmation dialog box opens. To test access to the DB2 database, press Test Connection and type the user name in the User ID box and password in the Password box. 


Note: The DB2 Administration Client must be installed on all hosts.
After the installation is complete, see Creating a DB2 Database Alias on page 138 of the Rational Software Server Products Installation Guide [http://www.ibm.com/support/docview.wss?uid=pub1s126530001], Creating a DB2 Database Alias.  

Resolution to Cause 5
Instead of accessing ClearQuest Web via this URL: 
http://server01/cqweb/login Use a fully qualified host name: 
http://server01.myCompany.sample/cqweb/login