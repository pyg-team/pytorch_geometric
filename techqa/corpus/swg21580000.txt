Title: IBM run-svrssl-config task fails on getCACert - United States

Text:
run-svrssl-config; TAM; tivoli access manager; getCACert; NullPointerException; access manager runtime TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 ConfigEngine task run-svrssl-config fails because of a NullPointerException in getCACert. 

SYMPTOM
ConfigTrace.log contains: 

 [java] Configuration of Access Manager Runtime for Java is in
progress.
[java] This might take several minutes.
[java] The configuration failed.
[java] java.lang.reflect.InvocationTargetException
[java] at sun.reflect.NativeMethodAccessorImpl.invoke0(Native
Method)
...
[java] java.lang.NullPointerException
[java] at com.tivoli.pd.jutil.bj.getCACert(bj.java:15)
...
BUILD FAILED
/opt/ibm/WebSphere/PortalServer/base/wp.ac.impl/config/includes/wp.ac.impl_cfg.xml:376: The following error occurred while executing this line:
/opt/ibm/WebSphere/PortalServer/base/wp.ac.impl/config/includes/wp.ac.impl_cfg.xml:419: The following error occurred while executing this line:
/opt/ibm/WebSphere/PortalServer/base/wp.ac.impl/config/includes/wp.ac.impl_cfg.xml:459: Java returned: 1


CAUSE
This failure is caused by Tivoli Access Manager (TAM) APAR IV00477.


DIAGNOSING THE PROBLEM
Check ConfigTrace.log for the error messages cited above.



RESOLVING THE PROBLEM
Apply the fix for IV00477. If this fix cannot be applied immediately, work around the problem by following one of these options: 

 

Option A. 

This option allows WebSphere Application Server's java to load requisite jars from jre/lib/ext 

1. Back up <PortalServer>/base/wp.ac.impl/config/includes/wp.ac.impl_cfg.xml. 

2. Edit wp.ac.impl_cfg.xml. 

3. Replace:
<jvmarg value="-Djava.ext.dirs" />

with (to comment it out):
<!-- <jvmarg value="-Djava.ext.dirs" /> -->

4. Save wp.ac.impl_cfg.xml and run the task again.
5. Restore the original copy of wp.ac.impl_cfg.xml. 

 

Option B. 

This option makes ConfigEngine use some java other than WebSphere Application Server's. It is similar to the workarounds documented in IV00477. 

1. Back up ConfigEngine.sh or ConfigEngine.bat. 

2. Edit ConfigEngine.[sh/bat]. 

3. Specify the full path for a java that is not WebSphere Application Server's. For example, replace:
${JAVA_HOME}/bin/java 
with:
/tmp/newjava/bin/java 

(If a non-WAS Java Runtime Environment (JRE) is not already installed, you may need to install one.) 

4. Save ConfigEngine.[sh/bat] and run the task again. 

5. Restore the original copy of ConfigEngine.[sh/bat] from Step 1.

RELATED INFORMATION
 IV00477 [https://www-01.ibm.com/support/entdocview.wss?uid=swg1IV00477]
IBM developerWorks Java downloads [http://www.ibm.com/developerworks/java/jdk/]
IV00477 fix (6.1.1 FP5) [http://www-01.ibm.com/support/docview.wss?uid=swg24032592]