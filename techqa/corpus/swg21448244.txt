Title: IBM SA IOM eWAS installation on unsupported systems - United States

Text:
saiom sa iom ewas uninstall embedded websphere application servier fp9 fp0009 alert notification feature TECHNOTE (FAQ)

QUESTION
 How to uninstall SA IOM and force installation of the embedded WebSphere Application Server (eWAS) 6.1.0.29 on unsupported Win7/Vista/2008 x64 environments. 

CAUSE
FP9 includes a new version of eWAS, but the FP installer doesn't force eWAS update. Only customers, who don't have RpWeb component on a system, will get new eWAS installed. Therefore you should remove the entire RpWeb component in order to get the new eWAS version. Unfortunately the RpWeb installed from GA cannot be uninstalled correctly, so a full SA IOM uninstall and manual cleanup may be required.

ANSWER
How to uninstall SA IOM and force installation of the embedded WebSphere Application Server (WAS) 6.1.0.29 

NOTE: The following description is applicable to *unsupported* Windows 7/Vista/2008 x64 environments only, It was just a workaround for a clients Test environments where we knew they attempted to get SA IOM running on Windows 7 x64. This is "for test only" and affects currently *unsupported* Windows 7/2008 x64 environments. It is NOT required to update eWAS on supported XP/2003/2008 x32 systems.


1. Stop all SA IOM processes: 

- autoexnt windows service
- RpServer
- RpClient
- Embedded WAS
- Derby

2. Save configuration files 
Required if some definitions were done using existing version of the product:
- <...>\SA IOM\config\*.*

Depends on UAC and usage of the RpDatLoc.exe utility, the location of the directory could be different:
- Installation directory, usually C:\Program Files (x86)\IBM\SA IOM\config
- Users AppData, usually C:\Users\<user>\AppData\Roaming\IBM\SA IOM\config
- All users AppData, usually C:\Users\All Users\AppData\Roaming\IBM\SA IOM\config

Use Windows Search on drive c:\ for "rpserver.dat" to see which of the described directories contains the latest version of the file( it will be available in several other directories - because Windows performs internal linking of the files ).

3. Save DBNOTIFY 
Only if DBNOTIFY contains some data (alerting related definitions done via RpWeb GUI).
- - <...>\SA IOM\derby\DBNOTIFY\*.*

Not needed if you have no working RpWeb application now.

Depends on UAC, the location of the directory could be different: - 
- Installation directory C:\Program Files (x86)\IBM\SA IOM\derby\DBNOTIFY
- Users virtual store directory C:\Users\<user>\AppData\Local\VirtualStore\Program Files (x86)\IBM\SA IOM\derby\DBNOTIFY

Use Windows Search on drive c:\ for "DBNOTIFY" to see which of the described directories contains the latest version of the DBNOTIFY database(again, it will be available in several other directories - because Windows performs internal linking of the files, but we should take one from described directories).

4. Uninstall SA IOM 
Windows "Control Panel" -> "Programs and Features".

5. Uninstall DB2 Run-Time Client Lite 
Windows "Control Panel" -> "Programs and Features".


6. Delete SA IOM Services 

If any still be available after uninstall.


 * from CMD.EXE ( Run As Administrator ):


sc query Rp3270 
sc query Autoexnt 
sc query RP_Primary 

sc stop Rp3270 
sc stop Autoexnt 
sc stop RP_Primary 

sc delete Rp3270 
sc delete Autoexnt 
sc delete RP_Primary 
7. Perform additional manual cleanup 

 * all directories containing "SA IOM" in C:\Program Files (x86)\IBM (or other installation location) 
 * all directories containing "SA IOM" in C:\Users\*** (using search)

8. Registry cleanup 

 

 * All keys\groups containg SA IOM:  * HKCU\Software\IBM\SA IOM\* 
    * HKCU\Software\Classes\VirtualStore\MACHINE\SOFTWARE\IBM\SA IOM\* 
    * HKKM\Software\Wow6432Node\IBM\SA IOM\* 
    * HK_USERS\*\Software\IBM\SA IOM
   
   
 * All keys\groups containing Rp3270

8. Set UAC to desired level


9. RESTART SYSTEM 

Logon with a userid which will be used to manage SA IOM applications


10. Install GA SA IOM 2.1 

 * only RpServer component should be installed. Do not select run as a service - not yet supported on W7x64 
 * RpClient could be installed from GA 
 * DO NOT install RpWeb and Derby

11. Install FP9 

 Select FULL INSTALL


12. Move Config files to AppData 

Use RpDatLoc.exe (from SA IOM\Utils) to copy configurations files to desired location.


13. Stop all SA IOM processes 

Details -see step 1.

14. Restore saved data 
Details - reverse step 2&3.


15. Restart system 

Start all required components (Derby and RpWeb should already be started by Autoexnt service).


== The system is available and fully operational


Notes/Known Problems with Alerting: 


=> RpServer can't be used as a service.
=> RpServer log may show errors like:

"E 3860 [ CCommTcpipListenThread::InitInstance ] TCPIP listening device open failed. nLastError: 10013" 

for several sockets. We are investigating this error. Currently the customer may attempt to stop RpServer, wait for 3-10 sec. and then start it again. It solves the problem.



Note: => as of SA IOM V2.1.2, WAS and Derby is no longer used for Alert Notification, it is now handled internally.