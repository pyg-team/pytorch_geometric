Title: IBM IV64743: MIGRATE IMPORT FROM DB2 DOES NOT COMPLETE IN DERBY DB - United States

Text:
  A FIX IS AVAILABLE
IBM Tivoli Monitoring 6.3.0 Fix Pack 5 (6.3.0-TIV-ITM-FP0005) [http://www-01.ibm.com/support/docview.wss?uid=swg24039236]


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  When exporting the contents of the Tivoli Portal server db2
   database into a Tivoli Portal using the derby embedded database,
    there are tables not created resulting in an workspace version
   error.
   
   RECREATE INSTRUCTIONS:
   Migrate-export a Tivoli Portal DB2 database using the
   migrate-export script. Then using the saveexport.sql file from
   that export and running the migrate-import script into a Tivoli
   Portal using the derby embedded database. The result when
   logging onto the Tivoli Portal client will be
   an error message stating the workspace version is in
   correct -1.
   
   
    
   
   

LOCAL FIX
 *  Modify the saveexport.sql file from the db2 database for the
   following CREATE table statements.
   
   Table names.
   KFWPRESENTATION
   KFWWORKPLACE
   KFWWORKSPACE
   KFWWORKSPACELINK
   In each of the create statements for the above tables change the
   "BASED_ON" constraint to the following unique value.
   
   KFWPRESENTATION_BASED_ON
   KFWWORKPLACE_BASED_ON
   KFWWORKSPACE_BASED_ON
   KFWWORKSPACELINK_BASED_ON
   Once all of the constraints have a unique, rerun the
   migrate-import script. Once Migrate-import is complete all of
   the proper Tivoli Portal tables should be in place.
   
   
    
   
   

PROBLEM SUMMARY
 *  Tivoli Portal database will not migrate-import from DB2 into
   Derby.
   
   
   When running migrate-export from DB2, then taking the output
   saveexport.sql file and running migrate-import into a Tivoli
   Portal Derby (embedded) database, it fails to create 4 tables
   resulting in Tivoli Portal client errors for workspace versions.
   
   
    
   
   

PROBLEM CONCLUSION
 *  Changed the create table statements in the seed sql files for
   the Tivoli Portal database to use unique "constraint" values for
    tables using column constraints.
   
   The fix for this APAR is contained in the following maintenance
   packages:
   
     | fix pack | 6.3.0-TIV-ITM-FP0005
   
   
    
   
   

TEMPORARY FIX
 *  Edit the saveexport.sql file from a Tivoli Portal DB2 database.
   Change the create table statements for the following four
   tables to the following.
   KFWPRESENTATION
   KFWWORKSPACE
   KFWWORKPLACE
   KFWWORKSPACELINK
   
   Change the foreign key specification in each of the create
   statements for the tables above to the following.
   
   CONSTRAINT c1 FOREIGN KEY
   CONSTRAINT c2 FOREIGN KEY
   CONSTRAINT c3 FOREIGN KEY
   CONSTRAINT c4 FOREIGN KEY
   
   Once the saveexport.sql file is updated, then use it as input to
   the migrate-import script on the Tivoli Portal that is using
   Derby as the database.
   
   
    
   
   

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   IV64743
   
   
 * REPORTED COMPONENT NAME
   TEPS
   
   
 * REPORTED COMPONENT ID
   5724C04PS
   
   
 * REPORTED RELEASE
   630
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2014-09-09
   
   
 * CLOSED DATE
   2015-01-26
   
   
 * LAST MODIFIED DATE
   2015-06-29
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   TEPS
   
   
 * FIXED COMPONENT ID
   5724C04PS
   
   

APPLICABLE COMPONENT LEVELS
 * R630 PSY
   UP