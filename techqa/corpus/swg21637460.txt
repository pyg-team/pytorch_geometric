Title: IBM SAP Agent TEP workspaces get error KFWITM217E RC 202 - United States

Text:
5724B97SOTR IBM tivoli monitoring mySAP TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 In Tivoli Enterprise Portal (TEP), some workspaces of ITCAM agent for SAP get error KFWITM217E Request error: SQL1_CreateRequest failed, rc=202. 

SYMPTOM
Some workspaces of the ITCAM agent for TEP show no data in some views and the status line shows this error: 
KFWITM217E Request error: SQL1_CreateRequest failed, rc=202 

[/support/docview.wss?uid=swg21637460&aid=1] [/support/docview.wss?uid=swg21637460&aid=1]


CAUSE
The possible cause is that the SAP agent was upgraded from 6.2.0 to 7.1 release, but the TEMS did not refresh the catalog entries for ksa product to 7.1 level. 



DIAGNOSING THE PROBLEM
1) Ensure that the TEMS has the correct support files for the agent by running this command:
Unix:
ITMHOME/bin/cinfo -i sa


Windows:
ITMHOME/InstallITM/kincinfo -d -t sa 

sa IBM Tivoli Composite Application Manager Agent for SAP Applications
tms Version: 07.10.00.00

2) Check if Self Describing Agent feature (SDA) is enabled at the hub TEMS. When SDA is enabled, agent support for SAP 7.1 agent propagates to TEPS and RTEMS without the need to restart. TEP needs to be restarted after clearing java cache. 

In hub TEMS configuration file, look for following setting to ascertain that SDA feature is enabled :
# set KMS_SDA to Y to enable self-description; set to N to disable self-description
KMS_SDA='Y'

If SDA is enabled, the agent log shows the following entry confirming that the agent support is correct at the TEMS and TEPS:
(518105F4.18D6-1:kraasdpv.cpp,591,"IRA_SelfDescribedPackageValidation") Manifest vrmf string length 100 
<product_vrmf=07100000;tms_package_vrmf=07100000;tps_package_vrmf=071000 00;tpw_package_vrmf=07100000;> using manifest version 100 

3) Review TEMS logs, look for errors such as the following, which confirm that the TEMS did not find some attributes, such as CPUTIME8 in the log statement below: 


(5181040A.0002-257:kdspmcat.c,978,"CompilerCatalog") Column CPUTIME8 in Table KSAPROCESS for Application KSA Not Found. 
(5181040A.0003-257:kdspmcv.c,367,"CreateViewPlan") Catalog information error, status = 202 
(5181040A.0004-257:kdsvws1.c,1403,"CreateServerView") Bad status from VPM1_CreateViewPlan, 202 

(5181040A.0005-257:kdspac1.c,2006,"VPA1_CreateRequest") Create request failed with return code 202 



RESOLVING THE PROBLEM
Run following command to refresh the TEMS catalog entries without the need to restart the TEMS:
tacmd refreshCatalog [{-s|--server} TEMSNAME] 

Access the workspaces again to verify that the data is now displayed in the views where error KFWITM217E was previously reported.