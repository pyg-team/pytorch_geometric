Title: IBM "Internal error ... Error creating bean with name 'idGenerator'... 'Invalid WSDL'... 'unable to find valid certification path to requested target'" when clicking 'Maintain - Jobs - Define' - United States

Text:
 TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 User clicks 'Maintain - Jobs - Define'. User receives error message. Similar errors occur when using other Java-based Controller functionality. 

SYMPTOM
[/support/docview.wss?uid=swg21495669&amp;aid=1] 

[/support/docview.wss?uid=swg21495669&amp;aid=2]

Details Example #1
[/support/docview.wss?uid=swg21495669&amp;aid=3]

Details Example #2

Error
Error creating bean with name 'idGenerator' defined in class path resource [com/ibm/cognos/ccr/common/server-dao-config.xml]: Cannot resolve reference to bean 'wsClient' while setting bean property 'wsclient'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'wsClient' defined in class path resource [com...
...WebServiceException: Failed to access the WSDL at: https://servername:443/cognos8/controllerserver/ccrws.asmx?wsdl. It failed with:
com.ibm.jsse2.util.g: PKIX path building failed: java.security.cert.CertPathBuilderException: unable to find valid certification path to requested target.
<...>
[OK] 


CAUSE
The message 'Error creating bean with name 'idGenerator' defined in class path resource' is a generic error. 

 * There are several possible causes for this generic error. 
 * Instead, the important (unique) parts of the error are 'https' and the message 'unable to find valid certification path to requested target'.


In this specific scenario, the cause is that the Java program does not have access to a certificate to 'trust' the HTTPS/SSL connection. In turn, the cause of this is because the customer is using a self-created/self-signed SSL certificate (instead of paying for/using one of the 'trusted' providers of such certificates, such as Verisign). 
ENVIRONMENT
Customer has enabled HTTPS / SSL encryption between client device and application server.



RESOLVING THE PROBLEM
Fix: 

Install the SSL certificate into the Java runtime environment (JRE) on the client, so that the JRE trusts the self signed certificate. 

 

Steps 

Part One - Export the certificate from Internet Explorer:
1. Logon to the Controller application server (where the SSL certificate has been installed already)
2. Launch Internet Explorer
3. Click "Tools - Internet Options"
4. Select tab "Content"
5. Click "Certificates"
6. Depending upon where you installed the certificate into IE, select the correct tab. 

 * TIP: Probably this will be inside "Trusted Root Certification Authorities". 

[/support/docview.wss?uid=swg21495669&aid=4] [/support/docview.wss?uid=swg21495669&aid=4] 
7. Highlight the relevant (self-signed) certificate, and click " Export..." 
8. Click " Next", " Next" and then select " DER encoded binary X.509 (.CER)" then " Next" 
[/support/docview.wss?uid=swg21495669&amp;aid=5] 
9. Type in a sensible filename (for example ' mycertificate.cer') and location (for example C:\TEMP), and click "Next" then " Finish" 

Part Two - Install the certificate into the client JRE 
The following needs to be done on each and every client device which runs the Java-based functionality: 
1. Launch a command prompt ( Start - Run - "CMD" <Enter>) 
2. Change directory to where the user's integration client's JRE 'keytool.exe' file has been installed. 

=============================================== 
IMPORTANT: This path/folder location varies depending on environment and Controller version. 

Below are some examples of where the integration client 'keytool.exe' file is located:  * 'local client' (CCRLocalClient.MSI) for Controller 10.2 or 10.2.1 on Windows 7 64-bit: C:\Program Files (x86)\IBM\IBM Cognos Controller\integration\jre\bin 
 * 'web client' (ControllerClient.MSI) for Controller 8.5: %APPDATA%\cognos\ccr\Integration\jre\bin

=============================================== 

For example, if using Controller 10.2.0 'local' client then you should type:  * cd 
 * C:\Program Files (x86)\IBM\IBM Cognos Controller\integration\jre\bin
 * 
 * [/support/docview.wss?uid=swg21495669&amp;aid=6]
 * 
 *  
 * 
 * 
 *  cd %APPDATA%\cognos\ccr\Integration\jre\bin 
 * 


3. Locate the folders where a file 'cacerts' exists. 

=============================================== 
IMPORTANT: This path/folder location(s) varies depending on environment and Controller version.  * For Controller 10.2.1 (local client) there is only one folder location 
 * For Controller 10.2.0 (local client) there are two folder locations

=============================================== 

4. Import the CER file into the CACERTS file, by typing in command(s) similar to the following.  * IMPORTANT: You must change the location of the ".CER" and "cacerts" files as appropriate.


Example #1 (Controller 10.2.1 on Windows 7) 
keytool -import -alias CognosController -file C:\temp\mycertificate.cer -keystore " C:\Program Files (x86)\IBM\IBM Cognos Controller\Integration\jre\lib\security \cacerts" 

Example #2 (Controller 10.2.0 on Windows 7) 
keytool -import -alias CognosController -file C:\temp\mycertificate.cer -keystore "C:\Program Files (x86)\IBM\IBM Cognos Controller\integration\jre\bin\cacerts" 

keytool -import -alias CognosController -file C:\temp\mycertificate.cer -keystore "C:\Program Files (x86)\IBM\IBM Cognos Controller\integration\jre\lib\security\cacerts" 

Example #3 (Controller 8.5 web client) 
keytool -import -alias CognosController -file C:\temp\mycertificate.cer -keystore %APPDATA%\Cognos\ccr\Integration\jre\lib\security\cacerts 

=================================================== 
NOTES: 
When prompted, enter the password.  * TIP: By default, the password is: changeit


When asked if want to trust the certificate, type: y <enter>  * For example:

[/support/docview.wss?uid=swg21495669&aid=7] [/support/docview.wss?uid=swg21495669&aid=7] 
=================================================== 

5. Restart the client and test.  

Workaround: 

Either: 

 1. Replace the SSL certificate (used on the Controller application server's Microsoft IIS website) with a trusted commercial (not self-signed) certificate, such as one from Verisign or GoDaddy.com. 
 2. or reconfigure Controller to use HTTP (not HTTPS) connections between client device and Controller application server.

RELATED INFORMATION
 THIRD PARTY - unable to find valid certification path t [http://blogs.sun.com/gc/entry/unable_to_find_valid_certification]
THIRD PARTY - No more 'unable to find valid certificati [http://dreamingthings.blogspot.com/2006/12/no-more-unable-to-find-valid.html]