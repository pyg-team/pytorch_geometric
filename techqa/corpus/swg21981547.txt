Title: IBM Tivoli Enterprise Portal Server crashes after applying 6.3.0 Fix Pack 6 - United States

Text:
 FLASH (ALERT)

ABSTRACT
 The Tivoli Enterprise Portal Server randomly crashes after applying 6.3.0 Fix Pack 6. The eWAS SystemOut.log will show one of the following errors:

java.lang.NullPointerException
at com.ibm.TEPS.CTSQLJDBC.JDBCDataSource.pullSequenceWithTimeout(JDBCDataSource.java:541)

or:

java.sql.SQLException: Closed Resultset
at oracle.jdbc.driver.ScrollableResultSet.next(ScrollableResultSet.java:311)
at com.ibm.TEPS.CTSQLJDBC.JDBCDataSource.pullSequenceWithTimeout(JDBCDataSource.java:538)

The exception occurs when trying to run a query to a JDBC data source (such as an Oracle warehouse database). If the query takes a long time to run, and the user switches to a different workspace before the JDBC query finishes, the crash will occur. 

CONTENT
In APAR IV66557, a fix was made to prevent a memory leak which caused connections to the DB2 TEPS database to remain open and eventually hit the limit of 100 active connections to the database. This fix subsequently exposed a race condition in the JDBC evaluator in which the SQL ResultSet and Statement objects could be closed while the ResutlSet data was still being processed by another thread. In addition, the query object is prematurely deleted, which results in a core dump in the KfwServices process. 

The problem will occur if a query is sent to a JDBC data source, such as an Oracle warehouse database. If the JDBC query takes a long time to complete, and the user navigates to a different workspace, the client will attempt to remove the currently running query. This will cause the crash to occur. 

If you do not have any JDBC data sources defined in TEPS, this problem will not occur. 

APAR IV83775 has been opened to correct this defect. A provisional patch for 630-FP6 is available for download:
http://www.ibm.com/support/docview.wss?uid=swg24042203 [http://www.ibm.com/support/docview.wss?uid=swg24042203] 

 


Cross reference information Segment Product Component Platform Version Edition Systems and Asset Management IBM Tivoli Monitoring V6