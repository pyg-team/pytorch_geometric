Title: IBM IV97558: POST INSTALLATION APPLICATION OF NOI DERBY EXTENSIONS (WHEN DB NOT RUNNING) FAILS, BUT DOES NOT ERROR - United States

Text:
  DIRECT LINKS TO FIXES
7.1.0-TIV-NCI-ZLINUX-FP0012 [http://www.ibm.com/support/fixcentral/quickorder?product=ibm%2FTivoli%2FTivoli+Netcool+Impact&fixids=7.1.0-TIV-NCI-ZLINUX-FP0012&source=SAR]
7.1.0-TIV-NCI-WINDOWS-FP0012 [http://www.ibm.com/support/fixcentral/quickorder?product=ibm%2FTivoli%2FTivoli+Netcool+Impact&fixids=7.1.0-TIV-NCI-WINDOWS-FP0012&source=SAR]
7.1.0-TIV-NCI-SOLARIS-FP0012 [http://www.ibm.com/support/fixcentral/quickorder?product=ibm%2FTivoli%2FTivoli+Netcool+Impact&fixids=7.1.0-TIV-NCI-SOLARIS-FP0012&source=SAR]
7.1.0-TIV-NCI-LINUX-FP0012 [http://www.ibm.com/support/fixcentral/quickorder?product=ibm%2FTivoli%2FTivoli+Netcool+Impact&fixids=7.1.0-TIV-NCI-LINUX-FP0012&source=SAR]
7.1.0-TIV-NCI-AIX-FP0012 [http://www.ibm.com/support/fixcentral/quickorder?product=ibm%2FTivoli%2FTivoli+Netcool+Impact&fixids=7.1.0-TIV-NCI-AIX-FP0012&source=SAR]
IBM Tivoli Netcool/Impact V7.1.0 Fix Pack 12 (7.1.0-TIV-NCI-FP0012) [http://www-01.ibm.com/support/docview.wss?uid=swg24044312]


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS FIXED IF NEXT.
    
   
   

ERROR DESCRIPTION
 *  &#216;
   The essential procedure to reproduce the issue is:
   
   1. Install Netcool Impact 7.1.0.9 WITHOUT extensions
   2. Disable autostart for Derby database in Impact GUI
   3. Stop Derby database
   4. Using Installation Manager, Install Impact Extensions 7.1.0.9
   
   The installation completes successfully, but the configuration
   is not viable - Derby does not contain the database schemas
   required to perform its function.  There are no errors in the
   installation log, but there are additional log files:
   
   $IMPACT_HOME/logs/install/noi_derby_upgrade_71fp2_sql.out
   $IMPACT_HOME/logs/install/noi_derby_upgrade_71fp2_sql.err
   
   The .err log file does not show an error, but the .out file
   does show:
   
   ij> SET SCHEMA NOI;
   IJ ERROR: Unable to establish connection
   
   
    
   
   

LOCAL FIX
 *  Currently there are two ways to fix this issue:
   
   1) Manually rebuild Derby - please see the TechNote "Repairing
   corrupted Derby database on Impact 7.1 NOI installations":
   http://www-01.ibm.com/support/docview.wss?uid=swg21987115 [http://www-01.ibm.com/support/docview.wss?uid=swg21987115]
   
   Or:
   
   2) Redo the installation
   
   
    
   
   

PROBLEM SUMMARY
 *  ****************************************************************
   * USERS AFFECTED:                                              *
   * All Impact Users                                             *
   ****************************************************************
   * PROBLEM DESCRIPTION:                                         *
   * If the NOI Derby Extenstions Database is set to disabled     *
   * autostart,                                                   *
   * the Fix Pack installer completes successfully but, does not  *
   * perform                                                      *
   * the necessary Database  updates.                             *
   *                                                              *
   * The essential procedure to reproduce the issue is:           *
   *                                                              *
   * 1. Disable autostart for Derby database in Impact GUI        *
   * 2. Stop Derby database                                       *
   * 3. Install Impact Extensions 7.1.0.x                         *
   *                                                              *
   * The installation completes successfully, but the             *
   * configuration                                                *
   * is not viable - Derby does not contain the database schemas  *
   * required to perform its function.  There are no errors in    *
   * the                                                          *
   * installation log, but there are additional log files:        *
   *                                                              *
   * $IMPACT_HOME/logs/install/noi_derby_upgrade_71fpx_sql.out    *
   * $IMPACT_HOME/logs/install/noi_derby_upgrade_71fpx_sql.err    *
   *                                                              *
   * The .err log file does not show an error, but the .out file  *
   * does show:                                                   *
   *                                                              *
   * ij> SET SCHEMA NOI;                                          *
   * IJ ERROR: Unable to establish connection                     *
   ****************************************************************
   * RECOMMENDATION:                                              *
   ****************************************************************
   Logic has been added to the Impact server healt check,
   to confirm that the derby database autostart is not set to
   disabled.
   
   
    
   
   

PROBLEM CONCLUSION

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   IV97558
   
   
 * REPORTED COMPONENT NAME
   NETCOOL/IMPACT
   
   
 * REPORTED COMPONENT ID
   5724O59IS
   
   
 * REPORTED RELEASE
   710
   
   
 * STATUS
   CLOSED FIN
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt / Xsystem
   
   
 * SUBMITTED DATE
   2017-06-28
   
   
 * CLOSED DATE
   2017-12-15
   
   
 * LAST MODIFIED DATE
   2017-12-15
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION

APPLICABLE COMPONENT LEVELS
 * R710 PSY
   UP