Title: IBM CWWIM4534E error occurs when searching for users/groups using multiple wildcards - United States

Text:
CWWIM4534E; wild; card; Directory; Search; People; Picker; too; many; name; were; found; type; more; character; pattern; not; valid; InvalidArgumentException; countWildcardsAndValidatePattern; parseSearchExpression TECHNOTE (TROUBLESHOOTING)

PROBLEM
The Directory Search or "People Picker" portlet is a common embedded component that allows users to search for and select names of people (individual users) and groups for which the portal is configured. Using a search string that contains a space may result in multiple wild card characters being used for the query to the federated repository. In some cases, you may receive an error being unable to find any valid user or group.

SYMPTOM
The SystemOut and trace logs reveal the following error: 

 
[datetime] 000000d0 exception W com.ibm.ws.wim.adapter.file.was.FileXPathHelper countWildcardAndValidatePattern

com.ibm.websphere.wim.exception.InvalidArgumentException: CWWIM4534E The 'My*Group*Search*' search pattern is not valid.
at
com.ibm.ws.wim.adapter.file.was.FileXPathHelper.countWildcardsAndValidatePattern(FileXPathHelper.java:224)
at
com.ibm.ws.wim.adapter.file.was.FileXPathHelper.parseSearchExpression(FileXPathHelper.java:161) 

 

Where 'My Group Search' is the search string used with Directory Search. You may encounter a pop-up in Directory Search stating: 


Too many names were found. Type more characters of the name, then search again.


CAUSE
The Virtual Member Manager (VMM) file-based repository does not support search queries with multiple wild card characters. After adding another repository and choosing the administrative users from that repository, it is recommended to remove the file repository. For more information, refer to the section User registry considerations [http://www-01.ibm.com/support/knowledgecenter/SSHRKX_8.5.0/mp/plan/plan_ureg.dita?lang=en] in the WebSphere Portal knowledge center.


DIAGNOSING THE PROBLEM
Enable the following VMM traces, recreate the problem and check the resulting trace logs for the above message. 


*=info:com.ibm.ws.wim.*=all:com.ibm.websphere.wim.*=all:com.ibm.wsspi.wim.*=all:com.ibm.wps.vmm.adapter.*=all


RESOLVING THE PROBLEM
In this case, Portal was configured using a federated repository that included an LDAP and the built-in file repository. Search queries with multiple wild card characters are directed to both the LDAP and the file repository where the above exception occurs. 


Option 1
Remove the built-in file repository - defaultWIMFileBasedRealm. Using LDAP only should resolve the issue.


Option 2
APAR PM94677 [http://www-01.ibm.com/support/docview.wss?uid=swg1PM94577] was introduced in CF08 for Portal 8.0.0.1 and is already included in the base Portal 8.5 code. This APAR introduces the option to disable the wild card character (*) from automatically being appended to the search string. Setting pickerWildCardSearchEnable to false in WP PeopleService will disable the function. An administrator could still manually append the wild card character to the search string. For more information, refer to the section Configuring the wildcard support in directory search queries [http://www-01.ibm.com/support/knowledgecenter/SSHRKX_8.5.0/mp/collab/i_domi_t_wildcard.dita?lang=en] in the WebSphere Portal knowledge center.

RELATED INFORMATION
 User registry considerations [http://www-01.ibm.com/support/knowledgecenter/SSHRKX_8.5.0/mp/plan/plan_ureg.dita?lang=en]
Configuring wildcard support [http://www-01.ibm.com/support/knowledgecenter/SSHRKX_8.5.0/mp/collab/i_domi_t_wildcard.dita?lang=en]
Directory Search [http://www-01.ibm.com/support/knowledgecenter/SSHRKX_8.5.0/mp/collab/i_coll_r_por_dirs.dita?lang=en]
Limitations of using a file repository [https://www.ibm.com/developerworks/community/blogs/PortalL2Thoughts/entry/limitations_on_using_a_file_repository7?lang=en]




Cross reference information Segment Product Component Platform Version Edition Organizational Productivity- Portals & Collaboration WebSphere Portal End of Support Products AIX, HP-UX, Linux, Solaris, Windows, z/OS, IBM i 6.1