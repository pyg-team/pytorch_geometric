Title: IBM PM61807: QMGR CONVERSION RETURNS INCORRECT RETURN CODE WHEN MESSAGE CONTAINS INVALID SHIFT-IN/SHIFT-OUT DBCS DATA - United States

Text:
z/os  A FIX IS AVAILABLE
Obtain the fix for this APAR.


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  When invalid DBCS data (there is a SO without a corresponding
   SI) is converted inside the qmgr, CSQATR64 detects that there
   is problem with the message data, and sets the internal return
   code to CSQA_DBCS_ERROR.
   However, subsequent code in CSQATR64 changes the return code to
   CSQA_CONVERTED_BUFFER_TOO_BIG causing the wrong return code to
   be gets percolated back to the caller, potentially leading to
   the wrong action being taken in response.
   
   
    
   
   

LOCAL FIX

PROBLEM SUMMARY
 *  ****************************************************************
   * USERS AFFECTED: All users of WebSphere MQ for z/OS Version 7 *
   *                 Release 1 Modification 0.                    *
   ****************************************************************
   * PROBLEM DESCRIPTION: MQRC_CONVERTED_BUFFER_TOO_BIG returned  *
   *                      when converting an incomplete DBCS      *
   *                      message to an ASCII codepage.           *
   ****************************************************************
   * RECOMMENDATION:                                              *
   ****************************************************************
   An incomplete DBCS message (for example, a message in a mixed
   EBCDIC ccsid with a missing SI character, or a message in a
   mixed ASCII ccsid which ends in an incomplete double byte
   character) is got from a queue with MQGMO_CONVERT, and is
   requested to be converted to a DBCS ascii ccsid.
   The conversion correctly fails, however instead of the expected
   return code MQRC_DBCS_ERROR, the get fails
   MQRC_CONVERTED_MESSAGE_TOO_BIG.
   
   
    
   
   

PROBLEM CONCLUSION
 *  The conversion routines are changed to return MQRC_DBCS_ERROR
   (MQRC 2150) instead of MQRC_CONVERTED_MSG_TOO_BIG (MQRC 2120) in
   this situation.
   100Y
   CSQMTR64
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   PM61807
   
   
 * REPORTED COMPONENT NAME
   WMQ Z/OS V7
   
   
 * REPORTED COMPONENT ID
   5655R3600
   
   
 * REPORTED RELEASE
   100
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2012-04-04
   
   
 * CLOSED DATE
   2012-04-24
   
   
 * LAST MODIFIED DATE
   2012-06-03
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
    PM55180 [http://www-01.ibm.com/support/docview.wss?uid=swg1PM55180]
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
    UK78223
   
   

MODULES/MACROS
 *  CSQMTR64
   
   
    
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   WMQ Z/OS V7
   
   
 * FIXED COMPONENT ID
   5655R3600
   
   

APPLICABLE COMPONENT LEVELS
 * R100 PSY UK78223 [HTTPS://WWW14.SOFTWARE.IBM.COM/WEBAPP/SET2/ORDERMEDIA/SHOPCART?PTFS=UK78223]
   UP12/05/15 P F205
   
   

FIX IS AVAILABLE
 * SELECT THE PTF APPROPRIATE FOR YOUR COMPONENT LEVEL. YOU WILL BE REQUIRED TO SIGN IN. DISTRIBUTION ON PHYSICAL MEDIA IS NOT AVAILABLE IN ALL COUNTRIES.