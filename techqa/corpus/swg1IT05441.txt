Title: IBM IT05441: JMS Consumer application is unable to recover after getting an illegal character in MQRFH2 header. - United States

Text:
  A FIX IS AVAILABLE
Fix Pack 8.0.0.2 for WebSphere MQ V8.0 [http://www-01.ibm.com/support/docview.wss?uid=swg24039436]


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  When WMQ library reads the message from queue and the
   message header MQRFH2 has an illegal character with the
   following conditions.
   - The queue does not have a backout queue configured
   - The queue manager does not have a dead letter queue configured
   - Or for any other reason message cannot be written to either
   of the dead letter or backout queue because of a queue
   full/security permissions.
   
   The application is unable to receive messages asynchronously
   because of the state of the JMS session processing the
   onException. The only work around is to restart the application.
   
   After reading from the queue, the WMQ Java Client API catches
   the error while parsing the message and JMS application is
   notified about the error through the JMS ExceptionListener
   object. The message is not delivered to the application. The
   JMS MessageConsumer application gets in a hung state and loses
   the ability to read more messages. Even if the application
   tries to close the object; it is not able to close and stays in
   the waiting state forever.
   
   
   Additional Symptom(s) Search Keyword(s): JMSCMQ1050 JMSCMQ0018
   JMSCMQ1054 MQRFH2
   
   
    
   
   

LOCAL FIX
 *  Cycle the JMS Consumer application.
   
   
    
   
   

PROBLEM SUMMARY
 *  ****************************************************************
   USERS AFFECTED:
   This APAR affects all users of the WebSphere MQ classes for JMS
   who create JMS MessageConsumers but do not have a back out queue
   defined for the destination and do not have a dead letter queue
   defined for the queue manager.
   
   
   Platforms affected:
   MultiPlatform
   
   ****************************************************************
   PROBLEM DESCRIPTION:
   When an application that used the WebSphere MQ classes for JMS
   programming interface encountered a problem after getting an
   illegal character in MQRFH2 header, the application was unable
   to receive any further messages asynchronously.
   
   After reading from the queue, the WMQ JMS Client API caught the
   error while parsing the message and JMS application was notified
   about the error through the JMS ExceptionListener object. The
   message was not
   delivered to the application. The JMS MessageConsumer
   application went in a hung state and lost the ability to read
   more messages.
   
   
    
   
   

PROBLEM CONCLUSION
 *  The WebSphere MQ classes for JMS have been updated to ensure
   that they recover after getting an illegal
   character in MQRFH2 header.
   
   ---------------------------------------------------------------
   The fix is targeted for delivery in the following PTFs:
   
   Version    Maintenance Level
   v7.5       7.5.0.5
   v8.0       8.0.0.2
   
   The latest available maintenance can be obtained from
   'WebSphere MQ Recommended Fixes'
   http://www-1.ibm.com/support/docview.wss?rs=171&uid=swg27006037 [http://www-1.ibm.com/support/docview.wss?rs=171&uid=swg27006037]
   
   If the maintenance level is not yet available information on
   its planned availability can be found in 'WebSphere MQ
   Planned Maintenance Release Dates'
   http://www-1.ibm.com/support/docview.wss?rs=171&uid=swg27006309 [http://www-1.ibm.com/support/docview.wss?rs=171&uid=swg27006309]
   ---------------------------------------------------------------
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   IT05441
   
   
 * REPORTED COMPONENT NAME
   WMQ BASE MULTIP
   
   
 * REPORTED COMPONENT ID
   5724H7241
   
   
 * REPORTED RELEASE
   750
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2014-11-07
   
   
 * CLOSED DATE
   2014-11-28
   
   
 * LAST MODIFIED DATE
   2014-11-28
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   WMQ BASE MULTIP
   
   
 * FIXED COMPONENT ID
   5724H7241
   
   

APPLICABLE COMPONENT LEVELS
 * R750 PSY
   UP