Title: IBM StoredIQ Appstack upgrade procedure on IBM Knowledge Center has steps out of order - United States

Text:
StoredIQ; SIQ; Appstack; upgrade; 7.6.0.3; gateway; firewall; port 80; iptables TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 The steps to upgrade the StoredIQ Appstack from 7.6.0.2 to version 7.6.0.3 are not documented properly on the IBM Knowledge Center. The steps are out of sequence and present the user with steps to perform before prerequisite steps have been done due to the format of how they are presented on the site. 

SYMPTOM
If the user follows the steps documented the following file will be written to the local directory that the user is logged into: login?r=%2Fproducts%2Fappstack%2Fcentos%2F7.6.0.3+29%2Fsiq-appstack-1.1.14+43-1.x86_64.rpm 

Subsequent commands will fail to run properly


CAUSE
If the steps are followed as documented the firewall port will still be closed when the first two steps are performed preventing the upgrade from working properly.


ENVIRONMENT
StoredIQ Appstack



DIAGNOSING THE PROBLEM
Confirm port 80 is open by navigating to this URL before executing any of the StoredIQ upgrade steps (substitute your gateway server IP address for the placeholder <gateway server IP> ): 


<gateway server IP>/products

You should see different folders with the application stack versions listed



RESOLVING THE PROBLEM
Follow the steps as documented here: 


Updating the application stack


 * 


Before you begin 
Verify that the gateway and data servers are already updated. 

About this task 
 * 


Procedure 
Use the SSH tool to log in to the gateway and complete these steps:
 * 


iptables -A PROD-web -p tcp -m state --state NEW -m tcp --dport 80 -j ACCEPT

Restart the services on the gateway using the following command:
 * service deepfiler restart 


In a browser, navigate to the following URL (substitute your gateway server IP address for the placeholder <gateway server IP>. You should see different folders listed:
 *  [http://gatewayip/products]<gateway server IP>/products 


When upgrading from IBMÂ® StoredIQ 7.6.0.2 to 7.6.0.3, use an SSH tool to log into the application stack and issue these commands. This must be done once the gateway is updated and prior to upgrading the application stack.

wget http://<gatewayIP>/products/appstack/centos65/7.6.0.3+29/siq-appstack-1.1.14+43-1.x86_64.rpm

rpm -Uvh siq-appstack-1.1.14+43-1.x86_64.rpm

Use the SSH tool to log in to the application stack and run these commands:
 * 
 * 
 * 
 * 
 * 
 * 


You are notified when the process is complete.

Using the SSH tool, log in to the gateway as root and complete these steps:
 * 


iptables -D PROD-web -p tcp -m state --state NEW -m tcp --dport 80 -j ACCEPT

Restart services on the gateway with the following command:
 * 

RELATED INFORMATION
 Updating the application stack [http://www-01.ibm.com/support/knowledgecenter/SSSHEC_7.6.0/deploy/tsk/tsk_updatingtheappstack.dita]