Title: IBM IZ31216: HTTPCORE LIBRARY REQUESTOUTPUT() CALL STALLS WHEN USING IBM JVM - United States

Text:
 SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  Error Message: When HTTPCore is running on any variant (SR1-SR7)
   of an IBM 1.5.0 JVM, or on the IBM
   1.6.0 JVM I tried, the requestOutput() call hangs for a random
   period of time before the pending
   HTTPRequest is dispatched
   .
   Stack Trace: 1LKMONPOOLDUMP Monitor Pool Dump (flat & inflated
   object-monitors):
   2LKMONINUSE      sys_mon_t:0x0003AA88 infl_mon_t: 0x0003AAC8:
   3LKMONOBJECT
   java/util/Collections$UnmodifiableSet@005FA9E8/005FA9F4: owner
   "I/O dispatcher 1"
   (0x405FC900), entry count 1
   3LKWAITERQ            Waiting to enter:
   3LKWAITER                "main" (0x40467D00)
   3XMTHREADINFO      "main" (TID:0x40467D00,
   sys_thread_t:0x00036338, state:B, native ID:0x000012D0)
   prio=5
   4XESTACKTRACE          at
   sun/nio/ch/SelectionKeyImpl.nioInterestOps(SelectionKeyImpl.java
   :118)
   4XESTACKTRACE          at
   sun/nio/ch/SelectionKeyImpl.interestOps(SelectionKeyImpl.java:91
   )
   4XESTACKTRACE          at
   org/apache/http/impl/nio/reactor/IOSessionImpl.setEvent
   (IOSessionImpl.java:114)
   4XESTACKTRACE          at
   org/apache/http/impl/nio/NHttpConnectionBase.requestOutput
   (NHttpConnectionBase.java:158)
   4XESTACKTRACE          at
   TestIBMJVM.makeHttpRequest(TestIBMJVM.java:221)
   4XESTACKTRACE          at
   TestIBMJVM.main(TestIBMJVM.java:132(Compiled Code))
   3XMTHREADINFO      "I/O dispatcher 1" (TID:0x405FC900,
   sys_thread_t:0x0003DD38, state:R, native
   ID:0x00001798) prio=5
   4XESTACKTRACE          at
   sun/nio/ch/WindowsSelectorImpl$SubSelector.poll0(Native Method)
   4XESTACKTRACE          at
   sun/nio/ch/WindowsSelectorImpl$SubSelector.poll
   (WindowsSelectorImpl.java:342)
   4XESTACKTRACE          at
   sun/nio/ch/WindowsSelectorImpl$SubSelector.access$500
   (WindowsSelectorImpl.java:324)
   4XESTACKTRACE          at
   sun/nio/ch/WindowsSelectorImpl.doSelect(WindowsSelectorImpl.java
   :205)
   4XESTACKTRACE          at
   sun/nio/ch/SelectorImpl.lockAndDoSelect(SelectorImpl.java:99)
   4XESTACKTRACE          at
   sun/nio/ch/SelectorImpl.select(SelectorImpl.java:110)
   4XESTACKTRACE          at
   org/apache/http/impl/nio/reactor/AbstractIOReactor.execute
   (AbstractIOReactor.java:121(Compiled Code))
   4XESTACKTRACE          at
   org/apache/http/impl/nio/reactor/BaseIOReactor.execute
   (BaseIOReactor.java:70)
   4XESTACKTRACE          at
   org/apache/http/impl/nio/reactor/AbstractMultiworkerIOReactor$Wo
   rker.run
   (AbstractMultiworkerIOReactor.java:318)
   4XESTACKTRACE          at java/lang/Thread.run(Thread.java:810)
   .
   
   
    
   
   

LOCAL FIX

PROBLEM SUMMARY
 *  Performance issue occured due to synchronization in
   nioInterestOps
   
   
    
   
   

PROBLEM CONCLUSION
 *  This defect will be fixed in:
   5.0.0 SR9
   .
   Munge file has been created to avoid synchronization for
   nioInterestOps in
   Windows
   .
   To obtain the fix:
   Install build 20080926 or later
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   IZ31216
   
   
 * REPORTED COMPONENT NAME
   JAVA 5 CLASS LI
   
   
 * REPORTED COMPONENT ID
   620500130
   
   
 * REPORTED RELEASE
   500
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2008-09-06
   
   
 * CLOSED DATE
   2008-09-25
   
   
 * LAST MODIFIED DATE
   2008-09-25
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   JAVA 5 CLASS LI
   
   
 * FIXED COMPONENT ID
   620500130
   
   

APPLICABLE COMPONENT LEVELS
 * R500 PSN
   UP