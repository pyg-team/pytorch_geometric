Title: IBM Tivoli Integrated Portal fails to display portlets - United States

Text:
TIPL2; TIPL2SSL; CWPKI0022E; SSL HANDSHAKE FAILURE; PKIX path building failed ; CertPathBuilderException TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 Users gets the error below from WebGUI:
Error 500: javax.servlet.ServletException: Could not create entity: 
com.ibm.jsse2.util.h: PKIX path building failed:
java.security.cert.CertPathBuilderException: unable to find valid certification path to requested target 

CAUSE
The SSL certificate presented by the remote server was not trusted by the TIP server.

DIAGNOSING THE PROBLEM
User may get below error from the Web client:


Error 500: javax.servlet.ServletException: Could not create entity: 
com.ibm.jsse2.util.h: PKIX path building failed: 
java.security.cert.CertPathBuilderException: unable to find valid certification path to requested target 


Check <TIPHOME>/profiles/TIPProfile/logs/server1/SystemOut.log and see if below errors are present. As you can see below the steps to resolves this issue is present in the error message itself.

20:150 EST] 00000021 eventmapper 1 com.micromuse.sla.eventmapper.ReturnEventRunner 
00000021 SystemOut O CWPKI0022E: SSL HANDSHAKE FAILURE: A signer with SubjectDN "CN=MyLab-Server2.ibm.com, C=US, O=IBM" was sent from target host:port "mylabserver.ibm.com:443". The signer may need to be added to local trust store "/home/tbsmadm/IBM/tivoli/tipv2/profiles/TIPProfile/config/cells/TIPCell/nodes/TIPNode/trust.p12" located in SSL configuration alias "NodeDefaultSSLSettings" loaded from SSL configuration file "security.xml". The extended error message from the SSL handshake exception is: "PKIX path building failed: java.security.cert.CertPathBuilderException: unable to find valid certification path to requested target".
[2/12/14 6:46:20:478 EST] 00000021 SystemOut O CWPKI0428I: The signer might need to be added to the local trust store. You can use the Retrieve from port option in the administrative console to retrieve the certificate and resolve the problem. If you determine that the request is trusted, complete the following steps: 
1. Log into the administrative console. 2. Expand Security and click SSL certificate and key management. Under Configuration settings, click Manage endpoint security configurations. 3. Select the appropriate outbound configuration to get to the (cell):TIPCell:(node):TIPNode management scope. 4. Under Related Items, click Key stores and certificates and click the NodeDefaultTrustStore key store. 5. Under Additional Properties, click Signer certificates and Retrieve From Port. 6. In the Host field, enter mylabserver.ibm.com in the host name field, enter 443 in the Port field, and mylabserver.ibm.com_cert in the Alias field. 7. Click Retrieve Signer Information. 8. Verify that the certificate information is for a certificate that you can trust. 9. Click Apply and Save.
[2/12/14 6:46:20:478 EST] 00000021 SystemOut O 
[2/12/14 6:46:20:485 EST] 00000021 webclient 1 com.micromuse.sla.webclient.EventDisplayer doGet ENTER^^T^com.ibm.jsse2.util.h: PKIX path building failed: java.security.cert.CertPathBuilderException: unable to find valid certification path to requested target
javax.net.ssl.SSLHandshakeException: com.ibm.jsse2.util.h: PKIX path building failed: java.security.cert.CertPathBuilderException: unable to find valid certification path to requested target
at com.ibm.jsse2.o.a(o.java:25)
at com.ibm.jsse2.SSLSocketImpl.a(SSLSocketImpl.java:499)


RESOLVING THE PROBLEM
Login on to Websphere Administrative console from Tivoli Integrated portal 

 1. Expand Security -> click on SSL certificate and key management 
 2. Click on Key stores and certificates -> NodeDefaultTrustStore -> Signer certificates 
 3. Click on "Retrieve from port" and fill out the form with below inormation:

 * 
 * Host: mylabserver.ibm.com 
   Port:: 443 
 * 
 * NodeDefaultSSLSettings 
 * 
 * 

5. Retrieve Signer Information. 
6. Finally, click on Apply and OK. 
7. Restart TIP server.