Title: IBM 如何用jextract工具处理AIX、Linux、Windows平台上生成的系统核心转储文件 - United States

Text:
crash; coredump; dumps; dump; dmp; dmps; jextracted; jextract; userdump; dtfj TECHNOTE (FAQ)

疑问
 如何用jextract工具处理AIX、Linux、Windows平台上生成的系统核心转储文件？ 

Jextract是IBM SDK提供的处理和压缩系统核心转储文件的工具，以便后期使用IBM Support Assistant中的DTFJ工具分析该用jextract工具处理过的系统核心转储文件。 

答案
您可以使用jextract工具处理IBM WebSphere应用服务器生成的系统核心转储文件，并且您需要在生成这个核心转储文件的操作系统本地处理该文件。 

处理后的核心转储文件可以使用Eclipse Memory Analyzer Tool [http://www.ibm.com/developerworks/java/jdk/tools/mat.html] 或者 DTFJ Dump Analyzer [http://www.ibm.com/developerworks/java/jdk/tools/dumpanalyzer/]进行分析. 它们都可以被下载到IBM Support Assistant Workbench [http://www.ibm.com/software/support/isa/]中进行使用。 




核心转储文件的位置 

对于WebSphere应用服务器，核心转储文件的默认生成路径为其概要表的根路径： 

<WAS_HOME>/profiles/<PROFILE_NAME>/ 

该文件的扩展名通常是*.dmp，但是在某些版本的AIX和Linux操作系统上，该文件可能只是简单的名字，进程号和日期时间通常附在文件名字后面。 




处理核心转储文件 

请在同一个系统同一个WebSphere应用服务器安装下执行jextract命令。 在AIX/Linux上如果您没有使用完整路径，请用./jextract （注意要在jextract前加上点斜杠"./"）这样当前路径下的jextract会被调用执行。 

请用CORE文件所在位置的完整路径和名称替换[COREDUMP_PATH] 

 

如果您不知道是否启用了压缩引用，请参阅下面常见问题 部分。 

 




禁用压缩引用的32-bit JVM 和64-bit JVM 

WebSphere应用服务器 6.0.2
AIX/Linux: 
<WAS_HOME>/java/jre/bin/jextract -o core.sdff [COREDUMP_PATH]

Windows: 
<WAS_HOME>\java\jre\bin\jextract.exe -o core.sdff [COREDUMP_PATH]



WebSphere应用服务器 6.1，7.0和8.0
AIX/Linux: 
<WAS_HOME>/java/jre/bin/jextract [COREDUMP_PATH]

Windows: 
<WAS_HOME>\java\jre\bin\jextract.exe [COREDUMP_PATH]




启用压缩引用的64-bit JVM 
WebSphere应用服务器7.0和 8.0
AIX/Linux: 
<WAS_HOME>/java/jre/bin/jextract -J-Xcompressedrefs [COREDUMP_PATH]

Windows: 
<WAS_HOME>\java\jre\bin\jextract.exe -J-Xcompressedrefs [COREDUMP_PATH] 

 




如果需要调整该命令的最大堆大小，您可以增加 -J-Xmx参数调整大小。例如：-J-Xmx1024m 允许jextract运行时使用最大1024兆字节堆大小。


命令生成的文件 

在WebSphere应用服务器6.0.2中，在您执行此命令的当前工作目录中会生成core.sdff文件。 

在WebSphere应用服务器6.1，7.0和8.0中,在您执行此命令的当前工作目录中会生成core.zip文件。 

 

如果您在输出目录下发现XML文件，那么意味着jextract运行失败，因为XML文件应该被自动打包进SDFF或者ZIP文件中。 




错误信息
找不到J9VMRAS eyecatcher错误。执行jextract的时候检测到内部错误。
这个错误表示jextract工具无法识别该核心转储文件。这可能由多种原因引起，包括：


* 这个核心转储文件不是WebSphere应用服务器生成的
* 这个核心转储文件是某个底层(native)类库或者组件（例如JNI组件或者数据库驱动）生成的。
* (仅适用于AIX) 这个CORE文件因为AIX操作系统问题导致生成了不兼容的核心转储c文件格式（请参阅APAR IZ88097 [http://www.ibm.com/support/docview.wss?uid=swg1IZ88097]获得更多信息）。 

 




常见问题 

如何判断是否启用压缩引用？ 

压缩引用在64位IBM SDK 6.0中首次引入。如果WebSphere应用服务器是7.0.0.3或者更高版本（或者8.0），那么默认情况下它是被启用的。见APAR PK75174 [http://www.ibm.com/support/docview.wss?uid=swg1PK75174]。 

可以手动检查管理控制台中通用JVM参数来确定压缩引用是否启用。但是，最好使用ps命令并检查其输出中是否有-Xcompressedrefs命令来确认。 

如果您发现已经有-Xnocompressedrefs命令，那么表示压缩引用是被禁用的。 

 

如果不能确认是否启用了压缩引用，使用jextract工具的时候会发生什么？ 

如果您在运行jextract工具的时候没有意识到启用了压缩引用，那么会有错误输出要求您增加下面参数并重新运行jextract工具： -J-Xcompressedrefs

相关信息
 swg21577379 [http://www-01.ibm.com/support/docview.wss?uid=swg21577379]





交叉引用信息 分段 产品 组件 平台 版本 修订版 Application Servers WebSphere Application Server Java SDK AIX, Linux, Windows 8.0, 7.0, 6.1, 6.0.2 Base, Express, Network Deployment