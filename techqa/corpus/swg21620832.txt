Title: IBM Error "PRS-TRS-0902" after login to TCR 2.1.1 - United States

Text:
PRS-TRS-0902; cognos; xslt; report; Common Reporting; gen_page.xslt; formatDateFromUTC; timezone; riyhad; TCR TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 After logging to TIP, clicking on "Common Reporting", the follwoing error is issued:

PRS-TRS-0902 

The "XSLT" transform instruction encountered an error while processing 
the source at location "portal/cc/gen_page.xslt". 

SYMPTOM
The Details for the message PRS-TRS-0902 show :
javax.xml.transform.TransformerException : jd.xml.xslt.XsltException: 
call to extension function 'formatDateFromUTC' failed 


ENVIRONMENT
Tivoli Common Reporting 2.1.1 is installed on a Windows 2008 R2 64 bit.

DIAGNOSING THE PROBLEM
The problem is strictly related to the value of timezone passed to the function 'formatDateFromUTC' 
It actually occurs only on servers having timezone set to "GMT+03,Kuwait,Riyadh".
The problem is not TCR related, but it deals with Cognos and Java.

RESOLVING THE PROBLEM
Try first the steps suggested by technote :


http://www-01.ibm.com/support/docview.wss?uid=swg21367702 [http://www-01.ibm.com/support/docview.wss?uid=swg21367702]

It it does not help, the only way to bypass this problem is applying the following workaround:

The impacted file is'gen_page.xslt' located in the directory 
'C:\ibm\tivoli\tipv2Components\TCRComponent\cognos\templates\ps\portal\cc'. 
1) Make a backup copy of the file. 
2) Edit the file. 
3) Identify the problematic instruction.It is included in the following line: 
<xsl:value-of select="xtsext:formatDateFromUTC( string(cm:modificationTime ), number( '2' ), number( '3' ), string( $timeZone ), string( $contentLocale ) )"/> 

This line is meant to provide the "Modified" time in the view over the items
within the GUI, such as: 

Name Modified Actions 
--------- ----------------------------- ------- 
Common Reporting 9 September 2009 11:28:25 AM More... 
WikiSumm 24 December 2011 2:35:16 PM More... 

Change the line to : 
===== 
<xsl:value-of select="concat( concat( concat( concat( string(cm:modificationTime), '/' ), $timeZone ), '/' ), $contentLocale )"/> 
===== 

4) Save the file and restart the TCR server. 

In this way, when you click "Common Reporting" after TIP login, you will no longer see
error PRS-TRS-0902 and will be presented with the list of available Report Packages.
The only drawback about this solution is that you will see the Modified column showing output like :
2011-12-14T02:35:17.523Z/GMT/en-au 

(that is the set of parameters passed to the formatDateFromUTC function) instead of a time format respecting the locale and timezone.
But you can anyway use TCR and all its features.

 

PRODUCT ALIAS/SYNONYM
 Tivoli Common Reporting 2.1.1