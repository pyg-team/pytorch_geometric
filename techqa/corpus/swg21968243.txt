Title: IBM "ORA-06550 ... PLS-00905: object <schemaname>.PRC_GET_HID_XHAPPENING is invalid" when saving Company Journal - United States

Text:
 TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 User clicks 'Company - Data Entry - Company Journals'. User chooses parameters, and creates an entry. User presses 'save'. An error appears. 

SYMPTOM
[/support/docview.wss?uid=swg21968243&aid=1] [/support/docview.wss?uid=swg21968243&aid=1] 

Standard Error
Number: 5
Source: System.Web.Services
Description: Server was unable to process request. ---> ORA-06550: line 1, column 7:
PLS-00905: object <schemaname>.PRC_GET_HID_XHAPPENING is invalid
ORA-06550: line 1, column 7:
PL/SQL: Statement ignored
at Cognos.Controller.Common.RaiseExceptionCli.RaiseException(Exception ex)
at Cognos.Controller.Forms.Form.clsDataEJournals.SaveDEJournals(DataSet cBJ_Rs, DataSet cOBJH_Rs, DataSet cOBJR_Rs, DataSet lcIalias_RS, DataSet lcOrigTab_RS, DataSet lcHistRates_RS, Boolean& bErr, Int64& lErr, String& sErr)
at Cognos.Controller.Forms.Form.frmDataEJournals.DoSave()


CAUSE
The schema has not been successfully imported (into the new Oracle database server), because of a SECUREFILE lob issue. 

 * Specifically, some of the creation failed with errors similar to: ORA-43853: SECUREFILE lobs cannot be used in non-ASSM tablespace "<tablespace_name>

ENVIRONMENT
Database schema has been transferred from an old (source) Oracle database server, into a new (target) database server.



DIAGNOSING THE PROBLEM
During the Oracle schema (DMP) import process, there are errors in the log file similar to: 

Processing object type SCHEMA_EXPORT/TABLE/TABLE
ORA-39083: Object type TABLE:"schemaname"."XDATAENTRYFORM" failed to create with error:
ORA-43853: SECUREFILE lobs cannot be used in non-ASSM tablespace "CONSTS"
Failing sql is:
CREATE TABLE "schemaname"."XDATAENTRYFORM" ("ID" NUMBER NOT NULL ENABLE, "CODE" VARCHAR2(50 BYTE) NOT NULL ENABLE, "SEQNO" NUMBER NOT NULL ENABLE, "XML" NCLOB) SEGMENT CREATION DEFERRED PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 NOCOMPRESS LOGGING TABLESPACE "CONSTS" LOB ("XML") STORE AS SECUREFILE ( TABLESPACE "CONSTS" EN
ORA-39083: Object type TABLE:"schemaname"."XDBTEXTTRICKLE" failed to create with error:
ORA-43853: SECUREFILE lobs cannot be used in non-ASSM tablespace "CONSTS"
Failing sql is:
CREATE TABLE "schemaname"."XDBTEXTTRICKLE" ("PERAKT" CHAR(6 BYTE) NOT NULL ENABLE, "BOL" CHAR(6 BYTE) NOT NULL ENABLE, "VKOD" CHAR(3 BYTE) NOT NULL ENABLE, "KONTO" CHAR(13 BYTE) NOT NULL ENABLE, "DIM1" CHAR(4 BYTE) NOT NULL ENABLE, "DIM2" CHAR(4 BYTE) NOT NULL ENABLE, "DIM3" CHAR(4 BYTE) NOT NULL ENABLE, "DIM4" CHAR(4 BYTE) NO
ORA-39083: Object type TABLE:"schemaname"."XSUBSET" failed to create with error:
ORA-43853: SECUREFILE lobs cannot be used in non-ASSM tablespace "CONSTS"
Failing sql is:
CREATE TABLE "schemaname"."XSUBSET" ("ID" NUMBER(*,0) NOT NULL ENABLE, "CODE" VARCHAR2(50 BYTE) NOT NULL ENABLE, "SEQNO" NUMBER(*,0) NOT NULL ENABLE, "TOSEQNO" NUMBER(*,0) DEFAULT -1 NOT NULL ENABLE, "HID" NUMBER(*,0) DEFAULT 0 NOT NULL ENABLE, "SELECTORTYPE" VARCHAR2(20 BYTE) NOT NULL ENABLE, "ITEMENTITYTYPE" VARCHAR2(256 BYTE) NOT 
ORA-39083: Object type TABLE:"schemaname"."XHAPPENING" failed to create with error:
ORA-43853: SECUREFILE lobs cannot be used in non-ASSM tablespace "CONSTS"


RESOLVING THE PROBLEM
Perform the following tasks: 

1. Drop (delete) the 'bad' schema 

2. Run the following command on the Oracle database server: 

ALTER SYSTEM SET db_securefile = 'IGNORE'; 

3. Re-import the schema.