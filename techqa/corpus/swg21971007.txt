Title: IBM Collecting Data: W0025 messages - United States

Text:
W0025; Web GUI; webgui TECHNOTE (FAQ)

QUESTION
 What data should I capture for Technical Support if I am often seeing message code W0025 in Web GUI client sessions? 

ANSWER
It should be noted that an occasional, rare W0025 message is unlikely to represent a real problem with Web GUI. A temporary network problem or event storm at the object server, for example, has the potential to cause this. If this message is being reported regularly, however, the following controlled test could be performed. 

Below I've provided a simple collection involving a standalone Web GUI server and a more complex one involving load balancing. 

Simple example (Standalone Web GUI server with no load balancing configured)

1. Steps to be taken BEFORE restarting the TIP server: 

Web GUI traces: 
In WEBGUI_HOME/etc/server.init set 
log.level=FINEST 
log.maxsize=100 
log.count=40 
trace.level=FINEST 
trace.maxsize=100 
trace.count=40 

2. Restart the TIP server 

3. Steps AFTER TIP restart: 

Add Runtime traces to the TIP server: 
Log into the Tivoli Integrated Portal console. After logging in 
navigate to Settings > Websphere Administrative Console. 
Navigate to Troubleshooting -> Logs & Trace 
Click on the Server1 -> Select Diagnostic Trace Service. Increase 
the Maximum Number of Historical Files to 20. 
Maximum File Size set to 100MB 
Click Apply, then select Change Log Detail Levels. 
Click on Runtime tab to enable tracing for the TIP process that is 
currently running. Enabling tracing from the Runtime tab will keep 
tracing active until the next time the TIP server process is stopped. 
Clear the trace string in the Groups box and replace it with the following: 

*=info: com.ibm.ws.webcontainer*=all:com.ibm.wsspi.webcontainer*=all
:GenericBNF=all:com.ibm.ws.session.*=all 

Click on the Apply button. 

Ensure that client-side Web GUI tracing is enabled: 
Check that the following settings exist in the Java Runtime Parameters in the Java Control Panel (other settings such as Xms and Xmx values may also be present - do not remove these) 
-Djavaplugin.logging=true -Djavaplugin.trace=true 
-Djavaplugin.trace.option=5 -Djavaplugin.outputfiles.overwrite=false 
-Dtivoli.ncw.applet.debuglevel=5 

Note: any change requires a restart of ALL connected browsers.

Object server debug logging: 
In WEBGUI_HOME/etc/datasources/ncwDataSourceDefinitions.xml, take note of each object server which is referenced in here. 
For each object server that is referenced, connect to the object server through the OMNIbus Administrator and set the following properties: 
MessageLevel: debug 
MaxLogFileSize: 1024000 
No restart is required. 

Items to collect from a capture: 
1. Java console logs: 
- Possible location: <user_home>\AppData\LocalLow\Sun\Java\Deployment\log 
2. TIP/Web GUI: 
- full tar of TIPHOME/profiles/TIProfile/logs/* 
3. OMNIbus: 
- tar of NCHOME/omnibus/log/ (from each connected object server) 


More complex example (Load balanced Web GUI configuration with HTTP Server)

1. Steps to be taken BEFORE restarting the TIP servers: 

a. Web GUI traces: 
In WEBGUI_HOME/etc/server.init set 
log.level=FINEST 
log.maxsize=100 
log.count=40 
trace.level=FINEST 
trace.maxsize=100 
trace.count=40 

b. Updates to the plugin-cfg.xml files for IHS: 
In each of the following places, check that the configuration settings for plugin-cfg.xml match: 
- On each TIP server
tip_home_dir/profiles/TIPProfile/config/cells/plugin-cfg.xml 
- In the HTTP Server web plugin 
(HTTP_web_server_install_dir/plugins/config/webserver1/plugin-cfg.xml) 

Check the config for HTTP Server: 
- Enabling traces in the plugin-cfg.xml (usually 
HTTP_web_server_install_dir/Plugins/config/webserver1/plugin-cfg.xml) 

<Log LogLevel="Trace" 
Name="/opt/IBM/HTTPServer/Plugins/logs/http_plugin.log"/> 

- Modifying httpd.conf file for log rotation for every 50MB(errorlog and
accesslog) (usually /opt/IBM/HTTPServer/conf) 
ErrorLog "]bin/rotatelogs /var/logs/errorlog.%Y-%m-%d-%H_%M_%S 50M" 
CustomLog "]bin/rotatelogs /var/logs/logfile.%Y-%m-%d-%H_%M_%S 50M" 
common 
Note : Path for the current log files can be different than what is in the production environment 

2. Restart each of the TIP servers 

3. Restart the HTTP Server 
- bin/apachectl stop 
- bin/apachectl start 

4. Steps AFTER TIP restart: 

Add Runtime traces to each TIP server: 
Log into the Tivoli Integrated Portal console. After logging in 
navigate to Settings > Websphere Administrative Console. 
Navigate to Troubleshooting -> Logs & Trace 
Click on the Server1 -> Select Diagnostic Trace Service. Increase 
the Maximum Number of Historical Files to 20. 
Maximum File Size set to 100MB 
Click Apply, then select Change Log Detail Levels. 
Click on Runtime tab to enable tracing for the TIP process that is 
currently running. Enabling tracing from the Runtime tab will keep 
tracing active until the next time the TIP server process is stopped. 
Clear the trace string in the Groups box and replace it with the following: 

*=info: com.ibm.ws.webcontainer*=all:com.ibm.wsspi.webcontainer*=all
:HTTPChannel =all:GenericBNF=all:com.ibm.ws.session.*=all 

Click on the Apply button. 

Ensure that client-side Web GUI tracing is enabled: 
Check that the following settings exist in the Java Runtime Parameters in the Java Control Panel (other settings such as Xms and Xmx values may also be present - do not remove these) 
-Djavaplugin.logging=true -Djavaplugin.trace=true 
-Djavaplugin.trace.option=5 -Djavaplugin.outputfiles.overwrite=false 
-Dtivoli.ncw.applet.debuglevel=5 

Note: any change requires a restart of ALL connected browsers.

Object server debug logging: 
In WEBGUI_HOME/etc/datasources/ncwDataSourceDefinitions.xml, take note of each object server which is referenced in here. 
For each object server that is referenced, connect to the object server through the OMNIbus Administrator and set the following properties: 
MessageLevel: debug 
MaxLogFileSize: 1024000 
No restart is required. 

Items to collect from a capture: 
1. Java console logs: 
- Possible location: <user_home>\AppData\LocalLow\Sun\Java\Deployment\log 
2. TIP/Web GUI: 
- full tar of TIPHOME/profiles/TIProfile/logs/* 
3. OMNIbus: 
- tar of NCHOME/omnibus/log/ (from each connected object server) 
4. HTTP Server: 
- access.log and error.log from IHS Web plugin 
- Capture the cookie information from the browser by typing the following text in the address bar: 
java script:document.cookie 
- URL in use when the problem is seen