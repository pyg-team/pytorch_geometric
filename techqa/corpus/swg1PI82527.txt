Title: IBM PI82527: ODR SESSION AFFINITY BREAKS WHEN REQUEST CONTAINS MULTIPLE SESSION COOKIES OF THE SAME NAME - United States

Text:
  FIXES ARE AVAILABLE
9.0.0.5: WebSphere Application Server traditional V9.0 Fix Pack 5 [http://www-01.ibm.com/support/docview.wss?uid=swg24044067]
9.0.0.6: WebSphere Application Server traditional V9.0 Fix Pack 6 [http://www-01.ibm.com/support/docview.wss?uid=swg24044242]
8.5.5.13: WebSphere Application Server V8.5.5 Fix Pack 13 [http://www-01.ibm.com/support/docview.wss?uid=swg24044479]
9.0.0.7: WebSphere Application Server traditional V9.0 Fix Pack 7 [http://www-01.ibm.com/support/docview.wss?uid=swg24044620]


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  When the Cookie request header contains multiple session
   cookies of the same name (ie. JSESSIONID), the ODR currently
   only looks at the first one.  If that first cookie does not
   have a valid cloneID for this cell, session affinity is
   broken.
   
   The ODR code needs to be changed to look at ALL session
   cookies
   in the Cookie request header and look for ANY valid cloneID.
   
   
    
   
   

LOCAL FIX
 *  The work around is to change the session cookie name in the WAS
   configuration to something unique, so that each WAS cluster
   will have a different session cookie name.
   
   
    
   
   

PROBLEM SUMMARY
 *  ****************************************************************
   * USERS AFFECTED:  All users of IBM WebSphere Application      *
   *                  Server WAS ND edition- Virtual              *
   *                  Enterprise/IM On Demand Router (ODR)        *
   *                  Component                                   *
   ****************************************************************
   * PROBLEM DESCRIPTION: The On Demand Router (ODR) breaks       *
   *                      session affinity when the request       *
   *                      Cookie header contains duplicate        *
   *                      session cookie keys.                    *
   ****************************************************************
   * RECOMMENDATION:                                              *
   ****************************************************************
   The On Demand Router (ODR) breaks session affinity when the
   request Cookie header contains duplicate session cookie keys
   (e.g. JSESSIONID). The ODR currently only looks at the first
   session cookie key, as it is expecting only one, in the request
   Cookie header. If the first session cookie processed by the ODR
   does not contain a valid Clone/Partition ID then session
   affinity is lost.
   
   
    
   
   

PROBLEM CONCLUSION
 *  The xd.dwlm.client component of the On Demand Router (ODR) has
   been altered to examine all session cookie keys in the Cookie
   header of a request ensuring a valid Clone/Partition ID is found
   and session affinity is maintained.
   
   The fix for this APAR is currently targeted for inclusion in fix
   packs 8.5.5.13 and 9.0.0.5.  Please refer to the Recommended
   Updates page for delivery information:
   http://www.ibm.com/support/docview.wss?rs=180&uid=swg27004980 [http://www.ibm.com/support/docview.wss?rs=180&uid=swg27004980]
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   PI82527
   
   
 * REPORTED COMPONENT NAME
   WEBS APP SERV N
   
   
 * REPORTED COMPONENT ID
   5724H8800
   
   
 * REPORTED RELEASE
   850
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt / Xsystem
   
   
 * SUBMITTED DATE
   2017-06-02
   
   
 * CLOSED DATE
   2017-09-11
   
   
 * LAST MODIFIED DATE
   2017-09-11
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   WEBS APP SERV N
   
   
 * FIXED COMPONENT ID
   5724H8800
   
   

APPLICABLE COMPONENT LEVELS
 * R850 PSY
   UP