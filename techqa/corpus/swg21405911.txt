Title: IBM Collecting Data: Maximo LDAPSYNC and VMMSYNC - United States

Text:
mustgather; must gather; ldap; sync; vmm; VMM; LDAP; TPAELDAP; TPAELDAPSYNC; collecting data; collect data; collectdata; MustGatherDocument; TPAEITC TECHNOTE (FAQ)

QUESTION
 Collecting data for Application Server Security (LDAP) synchronization. Gathering this information before calling IBM support will help you with the troubleshooting process and save time analyzing the data. 

ANSWER
Maximo Application Server Security (LDAP) Configuration Collecting Data information
This technote describes what information you need to begin troubleshooting a Application Server Security (LDAP) synchronization issue.

If you have not compiled the General information, Please see General Collecting Data document 1313647 [http://www.ibm.com/support/docview.wss?uid=swg21313647] [http://www-01.ibm.com/support/docview.wss?uid=swg21393187]and include that information.

Collect the following files and information:

Maximo 6

1. Turn on ldapsync cron task logging
a. Edit the logging.properties file found in the maximo\applications\maximo\properties folder and add the following logging property - log4j.logger.maximo.crontask.LDAPSYNC=DEBUG

b. Edit the logging.properties file found in the maximo\applications\maximo\properties folder and add the following logging property - log4j.logger.maximo.sql.crontask.LDAPSYNC=DEBUG
or 
log4j.logger.maximo.sql.crontask.LDAPSYNC.<instancename>=DEBUG

c. If there are questions about values populated for particular business objects, turn on DEBUG SQL logging for the object(s) - log4j.logger.maximo.sql.<servicename>.<objectname>
For example:
log4j.logger.maximo.sql.SIGNATURE.MAXUSER=DEBUG
log4j.logger.maximo.sql.SIGNATURE.MAXGROUP=DEBUG
log4j.logger.maximo.sql.PERSON.PERSON=DEBUG
log4j.logger.maximo.sql.PERSON.EMAIL=DEBUG
log4j.logger.maximo.sql.PERSON.PHONE=DEBUG

d. Build and deploy the maximo.ear file

2. Send the ldapsync.xml file found in the maximo\applications\maximo\properties folder.

3. Send the maximo log files after the sync cron task runs

Maximo 7

The following settings are done in the Logging application
a. Log into Maximo
b. From the Go To link select - System Configuration/Platform Configuration/Logging

1. Turn on sync cron task SQL logging
a. If using ldapsync - from the Logging application set the following logging property - log4j.logger.maximo.sql.crontask.LDAPSYNC to DEBUG Log Level
or 
log4j.logger.maximo.sql.crontask.LDAPSYNC.<instancename> to DEBUG Log Level

b. If using vmmsync - from the Logging application set the following logging property - log4j.logger.maximo.sql.crontask.VMMSYNC to DEBUG Log Level
or 
log4j.logger.maximo.sql.crontask.VMMSYNC.<instancename> to DEBUG Log Level

2. Turn on sync cron task logging
a. If using ldapsync - from the Logging application set the following logging property - log4j.logger.maximo.crontask.LDAPSYNC to DEBUG Log Level

b. If using vmmsync - from the Logging application set the following logging property - log4j.logger.maximo.crontask.VMMSYNC to DEBUG Log Level

3. If there are questions about values populated for particular business objects, turn on DEBUG SQL logging for the object(s) - log4j.logger.maximo.sql.<servicename>.<objectname>
For example:
log4j.logger.maximo.sql.SIGNATURE.MAXUSER=DEBUG
log4j.logger.maximo.sql.SIGNATURE.MAXGROUP=DEBUG
log4j.logger.maximo.sql.PERSON.PERSON=DEBUG
log4j.logger.maximo.sql.PERSON.EMAIL=DEBUG
log4j.logger.maximo.sql.PERSON.PHONE=DEBUG

4. Apply the changes
a. From the Logging application, from the Select Action drop down select - Apply Settings

5. Provide the values of UserMapping and GroupMapping from the cron task parameters
a. Log into Maximo
b. From the Go To link select - System Configuration/Platform Configuration/Cron Task Setup
c. For either the LDAPSYNC or VMMSYNC Cron Task you are using, send the value for the GroupMapping and UserMapping parameters.

or
Connected to the Maximo database as the schema owner (i.e. maximo) send the output of the following SQL statements:
If using VMMSYNC
select instancename, value from crontaskparam where crontaskname = 'VMMSYNC' and parameter = 'GroupMapping'
select instancename, value from crontaskparam where crontaskname = 'VMMSYNC' and parameter = 'UserMapping'

If using LDAPSYNC
select instancename, value from crontaskparam where crontaskname = 'LDAPSYNC' and parameter = 'GroupMapping'
select instancename, value from crontaskparam where crontaskname = 'LDAPSYNC' and parameter = 'UserMapping'

6. Send the maximo log files after the sync cron task runs

Note: If the Logging application does not support this level of logging, you must insert a row into the MaxLogger table from the back end and restart the Maximo application server. For example: 

insert into maxlogger (active, internal, logger, logkey, loglevel, maxloggerid)
values (1, 0, 'VMM Sql','log4j.logger.maximo.sql.crontask.VMMSYNC',
'DEBUG', nextval for maxloggerseq);


RELATED INFORMATION
#

 



Cross reference information Segment Product Component Platform Version Edition Systems and Asset Management Maximo Asset Management Essentials Systems and Asset Management Tivoli Asset Management for IT Systems and Asset Management Tivoli Change and Configuration Management Database Systems and Asset Management Tivoli Service Request Manager