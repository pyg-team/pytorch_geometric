Title: IBM Important Information about the WebSphere MQ Configuration Agent, Withdrawn from IBM OMEGAMON for Messaging on z/OS V7.5 - United States

Text:
 PRODUCT DOCUMENTATION

ABSTRACT
 Starting with V7.5, IBM OMEGAMON for Messaging on z/OS no longer delivers the component called WebSphere MQ Configuration Agent, referred to as MQ Configuration in the rest of this document, because there are other recommended ways to configure IBM MQ. It is stabilized in the previous V7.3 release, but MQ Configuration will be supported as long as V7.3 is in support. The components in V7.5 are the IBM MQ Monitoring Agent and the IBM Integration Bus Monitoring Agent, both of which have enhancements in V7.5 that address monitoring requirements you may have. You can upgrade your OMEGAMON for Messaging monitoring components to V7.5 while using the previous release of MQ Configuration. 

Whether or not you want to continue using MQ Configuration when you install and configure OMEGAMON for Messaging V7.5, there may be steps you need to take, so please review this document prior to installing and configuring V7.5. 

CONTENT
First, please determine whether you have previously installed and configured the MQ Configuration component. If you have not done so previously, there is no need for you to consider the rest of this document. For this determination, please examine the following: 


· SMP/E: Are the FMIDs for MQ Configuration installed? The FMIDs are HKMC730 and HKCF730, or HKMC710 and HKCF710 if you are using the V7.1 level. 
· PARMGEN: In your PARMGEN configuration for each runtime environment, does the “Include Products in this PARMGEN RTE panel (KCIP@PGI)” (under step “1 KCIJPCFG Set-up/Refresh PARMGEN work environment” navigation from the PARAMETER GENERATOR (PARMGEN) WORKFLOW - PRIMARY OPTION MENU), have the line for “KMC OMEGAMON for Messaging – WebSphere MQ Configuration” selected for configuration in the environment? 

If the answers are “yes” to both of the above questions, then you do need to continue with the following general steps, which are documented in detail below: 

1) Determine whether there are any users of MQ Configuration in your environment. There are many cases in which the MQ Configuration component is installed and configured in PARMGEN, but no one is actually using it. It is important to determine this in order to decide which step to take next.

2) If you do not have users of MQ Configuration, or you want to remove it anyway, there may be steps required when you are installing and configuring OMEGAMON for Messaging V7.5 especially if you previously configured a shared agent address space for MQ monitoring (KMQ) and MQ configuration (KMC) agents. 

3) If you do have users of MQ Configuration and want to continue supporting that usage, you need to follow recommendations when you are installing and configuring OMEGAMON for Messaging V7.5 upgraded products.


Here are the details:

1) Suggested ways to determine whether there are any users of MQ Configuration:

a. In the Tivoli Enterprise Portal (TEP), using an administrator user ID, click Edit->Administer Users to check whether any users or groups have access to the Configuration navigator view. For users and/or groups that have been configured for TEP, check the Navigator Views tab to see if any of them have “Configuration” in their Assigned Views. If no one is allowed access to the Configuration navigator, then they are not using MQ Configuration feature. 

b. Another item to check in Administer Users is whether any user or group has the Permissions tab showing that View or Modify permission has been authorized for WebSphere MQ Configuration Authorities “Configure” authority. Some user or group should have permission to use this feature if it is used by anyone. 

c. Check whether there are configured names that reflect queue managers in your environment. Click on the Configuration navigator in the view drop-down list in the Navigator pane, then click on Defined View on the left. In the middle Defined Tree pane on the workspace, expand the various “+” items, and with the help of someone who knows MQ queue managers in your environment, see if any of the expanded items reflect queue managers actually in your environment. There will be default and example items shipped with the product, but you are looking for names reflecting MQ at your site. If there are no names that reflect queue managers in your environment, then no one is using MQ Configuration.

d. If it appears that there is usage of MQ Configuration, it would still be good to check with MQ users at your site to see if they actually require it. Perhaps they have experimented with it but do not actually use it regularly. If the OMEGAMON feature for MQ Configuration is not absolutely required in your environment, the recommendation would be to review all the ways that the IBM MQ product offers to configure and administer MQ, some of which are new in recent releases. Also, remember that the OMEGAMON MQ Monitoring agent offers the Take Action facility to issue any MQSC configuration command if the user is authorized.


2) If there are no users of MQ Configuration, or you want to remove it anyway: 

a. If you use a Serverpac that contains the upgraded OMEGAMON for Messaging V7.5 components to install, the MQ Configuration FMIDs (HKMC730 and HKCF730) are not installed because they are not included in the Serverpac. However, depending on your previous configuration, the missing MQ Configuration component could cause unexpected results in your LPAR runtime environment (RTE), so check and act on the following items prior to installation and configuration of OMEGAMON for Messaging V7.5:

1. If your Hub TEMS is configured on the z/OS platform and there are RKCF* DDNAME statements in your existing Hub TEMS started task JCL, update the TEMS started task JCL to remove those RKCF* DDNAME statements.

2. If MQ Configuration (KMC) and MQ Monitoring (KMQ) agents are running in a shared agent address space, make sure that the owner of that address space is the MQ Monitoring agent. For the MQ Monitoring agent to be the owner, the related PARMGEN LPAR RTE profile parameters for OMEGAMON for Messaging components may need adjusting, as depicted in the following example before and after settings:

Before (MQ Configuration owns the Agent address space called OMEGMQ):
ISREDDE2 %RTE_PLIB_HILEV%.%RTE_NAME%.WCONFIG(%RTE_NAME%) 
Command ===> 
KMC_AGT_STC OMEGMQ
KMC_AGT_STC_OWNER “”
KMQ_AGT_STC “”
KMQ_AGT_STC_OWNER OMEGMQ

After (MQ Monitoring owns the Agent address space called OMEGMQ): 
ISREDDE2 %RTE_PLIB_HILEV%.%RTE_NAME%.WCONFIG(%RTE_NAME%) 
Command ===>
KMQ_AGT_STC OMEGMQ
KMQ_AGT_STC_OWNER “” 

Tip: Please review the SMPE06 upgrade scenario [https://www.ibm.com/support/knowledgecenter/SSAUBV/com.ibm.omegamon_share.doc_6.3.0.2/parmgenref/smpe06_parmgenref.htm?pos=2] in the OMEGAMON Shared Knowledge Center as part of deploying these changes. You can use the refreshed OMEGMQ OMEGAMON for Messaging – KMQ Agent-only address space in the RTE’s W/RKANSAMU dataset for refreshing the original shared address space in your system procedure library. The only delta would be the RKMCAPLA DDNAME, which can be staged for removal.

b. If you install OMEGAMON for Messaging V7.5 as a CBPDO into an existing SMP/E CSI, the MQ Configuration FMIDs will remain installed, but since you are not using MQ Configuration, it is recommended you follow these steps:

1. If MQ Configuration (KMC) and MQ Monitoring (KMQ) agents are running in a shared agent address space, make sure that the owner of that address space is the MQ Monitoring agent. See item a.2 above for more details.

2. In the “Include Products in this PARMGEN RTE panel (KCIP@PGI)” (under step “1 KCIJPCFG Set-up/Refresh PARMGEN work environment” navigation from the PARAMETER GENERATOR (PARMGEN) WORKFLOW - PRIMARY OPTION MENU), deselect the line with “KMC OMEGAMON for Messaging – WebSphere MQ Configuration” so that it will be removed from the runtime environment (RTE) during reconfiguration/upgrade of the RTE. Follow one of the SMPEnn upgrade scenarios [https://www.ibm.com/support/knowledgecenter/SSAUBV/com.ibm.omegamon_share.doc_6.3.0.2/parmgenref/smpe04_parmgenref.htm?pos=2] documented in the OMEGAMON Shared Knowledge Center. 

Tip: Prior to upgrading the RTE, you also have the option to SMP/E delete the HKMC730 and HKCF730 FMIDs from the existing CSI. When you start the PARMGEN configuration phase of the upgrade, the inexistence of these deleted FMIDs is PARMGEN’s trigger to delete the product from the RTE upon reconfiguration following any of the SMPEnn upgrade scenarios (SMPE04 [https://www.ibm.com/support/knowledgecenter/SSAUBV/com.ibm.omegamon_share.doc_6.3.0.2/parmgenref/smpe04_parmgenref.htm?pos=2], SMPE05 [https://www.ibm.com/support/knowledgecenter/SSAUBV/com.ibm.omegamon_share.doc_6.3.0.2/parmgenref/smpe05_parmgenref.htm?pos=2] or SMPE06 [https://www.ibm.com/support/knowledgecenter/SSAUBV/com.ibm.omegamon_share.doc_6.3.0.2/parmgenref/smpe06_parmgenref.htm?pos=2]). 


3) If there are users of MQ Configuration, and you want to continue supporting that usage: 

a. It is highly recommended that you install OMEGAMON for Messaging V7.5 as a CBPDO into the existing SMP/E CSI so that MQ Configuration remains available. If you do this, there are no other steps required, however, the following step is also highly recommended: 

1. If MQ Configuration (KMC) and MQ Monitoring (KMQ) agents are running in a shared agent address space, separate them into their own address spaces, since they will be running at different product levels. For this, the related PARMGEN LPAR RTE profile parameters for OMEGAMON for Messaging components may need adjusting to be like the following example in which MQ Configuration is running in an address space called OMEGMC and MQ Monitoring is running in an address space called OMEGMQ:

ISREDDE2 %RTE_PLIB_HILEV%.%RTE_NAME%.WCONFIG(%RTE_NAME%) 
Command ===> 
KMC_AGT_STC OMEGMC
KMC_AGT_STC_OWNER “”
KMQ_AGT_STC OMEGMQ
KMQ_AGT_STC_OWNER “”

b. If you were to install OMEGAMON for Messaging V7.5 in a Serverpac, you would need to retain your old SMP/E CSI and maintain a separate PARMGEN runtime environment in order to use MQ Configuration separately. This may be acceptable to you if you already separate MQ Configuration from the rest of your monitoring infrastructure, with its own Hub TEMS, etc. In this case, for the configuration that will contain OMEGAMON for Messaging V7.5, please see item 2 above, steps a.1 and a.2 in case they would apply to that particular configuration.

c. OMEGAMON for Messaging V7.5 application support does not include application support for the MQ Configuration component. If you need to re-install application support for MQ Configuration for any reason, you should use the latest V7.3 level of application support. For z/OS customers, that is available with DVD LCD7-3513-08 at the following link: ftp://public.dhe.ibm.com/software/tivoli_support/misc/PandA/tools_agent/tools/appsupt/ [ftp://public.dhe.ibm.com/software/tivoli_support/misc/PandA/tools_agent/tools/appsupt/]


For more information about OMEGAMON for Messaging V7.5, please see this link to the product documentation:
https://www.ibm.com/support/knowledgecenter/SSRLD6_7.5.0/welcome_omxe_msg750.html [https://www.ibm.com/support/knowledgecenter/SSRLD6_7.5.0/welcome_omxe_msg750.html]

For more information about OMEGAMON installation and configuration with PARMGEN, please see this link to the shared documentation:
https://www.ibm.com/support/knowledgecenter/SSAUBV/com.ibm.omegamon_share.doc_6.3.0.2/shared_welcome/welcome.htm?pos=2 [https://www.ibm.com/support/knowledgecenter/SSAUBV/com.ibm.omegamon_share.doc_6.3.0.2/shared_welcome/welcome.htm?pos=2] 


For more information about recommended ways to configure IBM MQ, please see the following links:
Administering IBM MQ [https://www.ibm.com/support/knowledgecenter/SSFKSJ_9.0.0/com.ibm.mq.adm.doc/q019950_.htm]
Configuring queue managers on z/OS [https://www.ibm.com/support/knowledgecenter/SSFKSJ_9.0.0/com.ibm.mq.con.doc/q019070_.htm]
Using IBM z/OSMF to automate IBM MQ [https://www.ibm.com/support/knowledgecenter/SSFKSJ_9.0.0/com.ibm.mq.con.doc/q019925_.htm]
Support continuous configuration deployments for IBM MQ with UrbanCode [https://www.ibm.com/developerworks/library/d-continuous-configuration-deployments-urbancode-mq-trs/index.html] 





ORIGINAL PUBLICATION DATE
 2017/10/26