Title: IBM PK46191: WHEN SEARCHING WCM SEARCH COLLECTION USING HTML SEARCH FORM IN WCM YOU MAY ENCOUNTER A CLASSCASTEXCEPTION - United States

Text:
 
APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  Using html search form in WCM, you may receive error
   "Exception while rendering component"
   
   <PROBLEM>
   
   Customer tries to search his WCM search collection using the
   HTML search
   form in WCM and gets the following error in his SystemOut.log
   file:
   
   [5/22/07 9:49:34:804 EDT] 000000a7 CMAdminServic E
   com.ibm.lotus.search.cm.admin.imp.CMAdminService
   createCollection
   EJPJK0007E: Failed to create searchable,
   <b>DefaultContentModelCollection</b> already exists for host
   <b>localhost</b>
   [5/22/07 9:49:39:454 EDT] 000000a7 ExtensionsReg E
   com.ibm.lotus.search.siapix.imp.ExtensionsRegistryService
   getImplementor
   EJPJI0307E: Unable to find extension
   <b>com.ibm.portal.search.providers.security.SecurityFactory</b>
   of point
   <b>com.ibm.lotus.search.plugins.provider.core.WCMSecurity</b>
   [5/22/07 9:49:39:464 EDT] 000000a7 SecurityServi E
   com.ibm.lotus.search.siapi.security.imp.SecurityServiceImp
   initSecurityProviders  Failed to obtain security provider for:
   WCM
   [5/22/07 9:49:39:467 EDT] 000000a7 PortalCollect E
   com.ibm.hrl.portlets.WsPse.PortalCollectionsService
   filterResults Failed
   issue a security request
   [5/22/07 9:49:40:550 EDT] 000000b2 CacheEntry    E   DYNA0052E:
   The
   cached object can not be replicated or saved to disk.
   CacheID=0071f48043abd0b3aff1efb64fc7c6fb1
   ClassName=com.aptrix.pluto.cmpnt.NavigatorCacheable
   Exception=java.io.NotSerializableException:
   com.aptrix.tree.ControllableNodeValue
   [5/22/07 9:49:41:556 EDT] 000000b3 CacheEntry    E   DYNA0052E:
   The
   cached object can not be replicated or saved to disk.
   CacheID=95dace8043abdcd8b19df7b64fc7c6fb1
   ClassName=com.aptrix.pluto.cmpnt.NavigatorCacheable
   Exception=java.io.NotSerializableException:
   com.aptrix.tree.ControllableNodeValue
   [5/22/07 9:49:50:292 EDT] 000000a7 Cmpnt         W   IWKPC1085X:
   Exception while rendering component: inline class
   com.aptrix.pluto.cmpnt.WorkflowCmpnt - Exception:
   java.lang.ClassCastException: java.lang.String
                                    java.lang.ClassCastException:
   java.lang.String
    at
   com.aptrix.pluto.cmpnt.BaseReferenceCmpnt.toTypeID(BaseReference
   Cmpnt.ja
   va(Inlined Compiled Code))
    at
   com.aptrix.pluto.cmpnt.BaseReferenceCmpnt.retrieveCmpnt(BaseRefe
   renceCmp
   nt.java(Compiled Code))
    at
   com.aptrix.pluto.cmpnt.BaseReferenceCmpnt.resolve(BaseReferenceC
   mpnt.jav
   a(Compiled Code))
    at
   com.aptrix.pluto.cmpnt.Cmpnt.resolveCmpnt(Cmpnt.java(Compiled
   Code))
    at
   com.aptrix.pluto.cmpnt.FormatterCmpnt.applyMicroTemplate(Formatt
   erCmpnt.
   java(Compiled Code))
    at
   com.aptrix.pluto.cmpnt.FormatterCmpnt.resolveNode(FormatterCmpnt
   .java(In
   lined Compiled Code))
    at
   com.aptrix.pluto.cmpnt.FormatterCmpnt.resolve(FormatterCmpnt.jav
   a(Compil
   ed Code))
    at
   com.aptrix.pluto.cmpnt.SearchCmpnt.resolve(SearchCmpnt.java:411)
   
   
   </PROBLEM>
   <ENVIRONMENT>
   IBM WebSphere Portal 6.0.1
   Build Level: wp601_194 (2007-04-01 10:52)
   Server Name: WebSphere_Portal
   Started at:  5/22/2007 09:47:11:614 EDT
   
   Installed FixPacks:
       WP_PTF_601 (IBM WebSphere Portal, Version 6.0.1.0 Fix Pack)
   Installed Interim Fixes:
       PK45382 [http://www-01.ibm.com/support/docview.wss?uid=swg1PK45382] (SearchSeed throws Null Pointer Exceptions)
       PK42760 (cumualtive iFix 1 for wcm 601)
       PK44148 [http://www-01.ibm.com/support/docview.wss?uid=swg1PK44148] (Searching content based on SiteArea)
       PK42697 [http://www-01.ibm.com/support/docview.wss?uid=swg1PK42697] (WCM Config entries need to be 'trimmed' to avoid
   misconfiguration)
       PK44131 [http://www-01.ibm.com/support/docview.wss?uid=swg1PK44131] (Searching content based on SiteArea)
       PK42693 [http://www-01.ibm.com/support/docview.wss?uid=swg1PK42693] (Pre-rendering as a background task fails on WCM
   601)
   </ENVIRONMENT>
   
   
    
   
   

LOCAL FIX

PROBLEM SUMMARY
 *  WorkflowCmpnt tag used inside the Search Component was throwing
   Class Cast Exceptions
   
   
    
   
   

PROBLEM CONCLUSION
 *  As a part of 601, search results also return the file
   attachments as the part of the result set. The WorkflowCmpnt tag
   tried to get a workflow for the file attachment, which would
   return an empty space instead of a Workflow object.
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   PK46191
   
   
 * REPORTED COMPONENT NAME
   WRKPLC WEB CON
   
   
 * REPORTED COMPONENT ID
   5724I2900
   
   
 * REPORTED RELEASE
   601
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2007-05-31
   
   
 * CLOSED DATE
   2007-06-26
   
   
 * LAST MODIFIED DATE
   2007-06-26
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   WRKPLC WEB CON
   
   
 * FIXED COMPONENT ID
   5724I2900
   
   

APPLICABLE COMPONENT LEVELS
 * R60B PSY
   UP