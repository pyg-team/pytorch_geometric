Title: IBM RS02938: XOM CLASS NOT FOUND EXCEPTIONS WITH RULESET UPDATE AND HEAVY LOAD USING HTDS - United States

Text:
  FIXES ARE AVAILABLE
Operational Decision Manager V8.8.0.1: Interim Fix 75 [http://www-01.ibm.com/support/docview.wss?uid=swg24044275]
Operational Decision Manager V8.9.2 Download Document [http://www-01.ibm.com/support/docview.wss?uid=swg24044455]
Operational Decision Manager V8.9.2 Mod Pack [http://www-01.ibm.com/support/docview.wss?uid=swg24044456]
Operational Decision Manager for z/OS 8.9.2 Mod Pack [http://www-01.ibm.com/support/docview.wss?uid=swg24044642]


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  if the XOM URIs is set after the deployment of a ruleset update
   
   while there is a lot of execution on going some of the
   execution will fail with a ClassNotFoundException. Exception
   thrown during reproduce the error:
   [10/16/17 15:38:13:574 EDT] 000000fa execution     E   It was
   not possible to create the ruleset: /LoanRuleApp/1.
   0/LoanProcessDS/1.3.
                                    com.ibm.rules.res.xu.internal.
   XUException: GBRXU0467E: The creation of EngineDefinition
   failed.
       at com.ibm.rules.res.xu.engine.de.internal.
   XUEngineDynamicDefinitionFactory.createEngineDefinition(
   XUEngineDynamicDefinitionFactory.java:90)
       at com.ibm.rules.res.xu.ruleset.internal.XURulesetFactory.
   createDERuleset(XURulesetFactory.java:250)
       at com.ibm.rules.res.xu.ruleset.internal.XURulesetFactory.
   createRuleset(XURulesetFactory.java:117)
       at com.ibm.rules.res.xu.ruleset.internal.RulesetParsingWork.
   
   run(RulesetParsingWork.java:89)
       at com.ibm.ejs.j2c.work.WorkProxy$RunWork.run(WorkProxy.
   java:281)
       at java.security.AccessController.doPrivileged(
   AccessController.java:426)
       at javax.security.auth.Subject.doAs(Subject.java:494)
       at com.ibm.websphere.security.auth.WSSubject.doAs(WSSubject.
   
   java:133)
       at com.ibm.ejs.j2c.work.WorkProxy$RunWork.run(WorkProxy.
   java:284)
       at com.ibm.ws.security.util.AccessController.doPrivileged(
   AccessController.java:63)
       at com.ibm.ejs.j2c.work.WorkProxy.run(WorkProxy.java:666)
       at com.ibm.ws.util.ThreadPool$Worker.run(ThreadPool.java:
   1881)
   Caused by: com.ibm.rules.engine.load.XUEngineDynamicLoader$
   CreationException:     While applying business to execution (
   B2X) model mapping
   GBREX0001E: Cannot find execution class 'com.ibm.odm.mytest.
   LoanApplication' for translating business class 'com.ibm.odm.
   mytest.LoanApplication'
       at com.ibm.rules.engine.load.XUEngineDynamicLoaderImpl.
   createEngineDefinitionFromDSAR(XUEngineDynamicLoaderImpl.java:
   97)
       at com.ibm.rules.engine.load.XUEngineDynamicLoaderImpl.
   createEngineDefinition(XUEngineDynamicLoaderImpl.java:52)
       at com.ibm.rules.res.xu.engine.de.internal.
   XUEngineDynamicDefinitionFactory.createEngineDefinition(
   XUEngineDynamicDefinitionFactory.java:83)
       ... 11 more
   Caused by:     While applying business to execution (B2X) model
   
   mapping
   GBREX0001E: Cannot find execution class 'com.ibm.odm.mytest.
   LoanApplication' for translating business class 'com.ibm.odm.
   mytest.LoanApplication'
       at ilog.rules.util.issue.IlrDefaultIssueHandler.
   throwException(IlrDefaultIssueHandler.java:82)
       at ilog.rules.util.issue.IlrChainedIssueHandler.
   throwException(IlrChainedIssueHandler.java:70)
       at com.ibm.rules.engine.b2x.transform.
   B2XMainLangTransformer.transformTypeDeclarations(
   B2XMainLangTransformer.java:128)
       at com.ibm.rules.engine.lang.semantics.transform.
   SemMainLangTransformer.transformObjectModel(
   SemMainLangTransformer.java:245)
       at com.ibm.rules.engine.outline.B2XModelTranslator$
   B2XRewriter.transform(B2XModelTranslator.java:364)
       at com.ibm.rules.engine.outline.EngineOutlineImpl.
   applyModelRewriter(EngineOutlineImpl.java:444)
       at com.ibm.rules.engine.outline.EngineOutlineImpl.
   applyModelRewriters(EngineOutlineImpl.java:415)
       at com.ibm.rules.engine.outline.EngineOutlineImpl.
   writeJarInStream(EngineOutlineImpl.java:516)
       at com.ibm.rules.engine.load.XUEngineDynamicLoaderImpl.
   createEngineDefinitionFromDSAR(XUEngineDynamicLoaderImpl.java:
   92)
       ... 13 more
   [10/16/17 15:38:13:686 EDT] 000000cc execution     I   Ruleset
   cache size: 1.
   [10/16/17 15:38:13:687 EDT] 000000cc execution     I
   Deprecated ruleset cache size: 0.
   [10/16/17 15:38:13:687 EDT] 000000cc execution     I   The
   ruleset /LoanRuleApp/1.0/LoanProcessDS/1.3 is missing in the
   cache.
   [10/16/17 15:38:13:688 EDT] 000000d5 execution     I   Ruleset
   cache size: 1.
   [10/16/17 15:38:13:688 EDT] 000000d5 execution     I
   Deprecated ruleset cache size: 0.
   [10/16/17 15:38:13:689 EDT] 000000d5 execution     I   The
   ruleset /LoanRuleApp/1.0/LoanProcessDS/1.3 is missing in the
   cache.
   [10/16/17 15:38:13:689 EDT] 000000ae execution     I   Ruleset
   cache size: 1.
   [10/16/17 15:38:13:689 EDT] 000000ae execution     I
   Deprecated ruleset cache size: 0.
   [10/16/17 15:38:13:686 EDT] 000000ce execution     E   The
   interaction loadUptodateRuleset has failed.
   
   
    
   
   

LOCAL FIX

PROBLEM SUMMARY
 *  In the Rule Execution Server, if the XOM URIs is set after the
   deployment of a ruleset while there is a lot of execution on
   going that use this ruleset some of the execution will fail
   with a ClassNotFoundException. Exception thrown during
   reproduce the error:
   10/16/17 15:38:13:574 EDT] 000000fa execution     E   It was
   not possible to create the ruleset:
   /LoanRuleApp/1.0/LoanProcessDS/1.3.
   
   com.ibm.rules.res.xu.internal.XUException: GBRXU0467E: The
   creation of EngineDefinition failed.
       at
   com.ibm.rules.res.xu.engine.de.internal.XUEngineDynamicDefinitio
   nFactory.createEngineDefinition(XUEngineDynamicDefinitionFactory
   .java:90)
       at
   com.ibm.rules.res.xu.ruleset.internal.XURulesetFactory.createDER
   uleset(XURulesetFactory.java:250)
       at
   com.ibm.rules.res.xu.ruleset.internal.XURulesetFactory.createRul
   eset(XURulesetFactory.java:117)
       at
   com.ibm.rules.res.xu.ruleset.internal.RulesetParsingWork.run(Rul
   esetParsingWork.java:89)
   
   
    
   
   

PROBLEM CONCLUSION
 *  The code is fixed.
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   RS02938
   
   
 * REPORTED COMPONENT NAME
   WS DECISION CTR
   
   
 * REPORTED COMPONENT ID
   5725B6900
   
   
 * REPORTED RELEASE
   880
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt / Xsystem
   
   
 * SUBMITTED DATE
   2017-10-18
   
   
 * CLOSED DATE
   2017-10-31
   
   
 * LAST MODIFIED DATE
   2017-10-31
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

MODULES/MACROS
 *  999
   
   
    
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   WS DECISION CTR
   
   
 * FIXED COMPONENT ID
   5725B6900
   
   

APPLICABLE COMPONENT LEVELS
 * R880 PSY
   UP