Title: IBM FileNet Image Services repeated getQueueEntries produces a different result set - United States

Text:
ISRA; getQueueEntries; queue; queue result set; set busy; F_BUSY TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 FileNet Image Services repeated getQueueEntries produces a different result set. 

RESOLVING THE PROBLEM
In Multi thread environment, a different result set is shown for the same query after execution of getQueueEntries.

Set the set_busy flag to true in interaction and include F_BUSY=FALSE in the query criteria. Please look at the following example, which will help you to understand the issue more clearly.


In the following example, the workspace name is "Smruti" and queue name is "CANADA" where FaxDocID, FromFaxNum & ToFaxnum are fields in the queue entry.

Take an example where FromfaxNum is 4002 & 4003.

Scenario 1 (Thread 1): Get all queue entries where FromFaxNum is equals to 4002 and in Interaction Set_busy flag is set to TRUE.

Query is "Select * from Smruti/CANADA where FromFaxNum = '4002'Â¿ 
In Interaction Set_busy = new Boolean (True)
Result Set after execution of Interaction is
Value=1.000000000000000000000000/4002/4002/false/FaxDocID
In this scenario, F_BUSY=false (4th value) since the result set does not update the value even though you set the SET_BUSY= TRUE for the first time.
When setting SET_BUSY=true, the result set will be locked. Lock any entries that you wish to update and unlock after the update.

Scenario 2 (Thread 2): Get all queue entries where FromFaxNum is equals to 4002 and in Interaction Set_busy flag is set to TRUE.

Query is "Select * from Smruti/CANADA where FromFaxNum = '4002'Â¿ 
In Interaction Set_busy = new Boolean (True)
Result Set after execution of Interaction is
Value=1.000000000000000000000000/4002/4002/True/FaxDocID

In this scenario, the same query is run but the F_BUSY flag value in the result set is TRUE. This is because the queue entry is set to "busy" in Scenario 1. The result set is the same because the query criteria is the same.

Scenario 3 (Thread 3): Get all queue entries where FromFaxNum is equals to 4003 and set_busy flag is false and in Interaction Set_busy flag is set to TRUE.

Query is "Select * from Smruti/CANADA where FromFaxNum = '4003' AND F_BUSY = FALSE"

In Interaction Set_busy = new Boolean(True)

Result Set after execution of Interaction is
Value=1.000000000000000000000000/4003/4003/false/FaxDocID

In this scenario, you issue a set_busy flag to true. The queue entry is marked as busy but it retrieves a result based on set_busy=false.

Scenario 4 (Thread 4): Get all queue entries where FromFaxNum is equals to 4003 and set_busy flag is false and in Intraction Set_busy flag is set to TRUE.


Query is "Select * from Smruti/CANADA where FromFaxNum = '4003' AND F_BUSY = FALSE"

In Interaction Set_busy = new Boolean(True)

The Result Set is NULL after execution of Interaction because the query retrieves records based on the set_busy flag set to false and the queue entry already marked as TRUE in Scenario 3.



HISTORICAL NUMBER
 20005530 

PRODUCT ALIAS/SYNONYM
 IMAGE SERVICE RESOURCE ADAPTER