Title: IBM PM36149: ABEND S0C4 IN EZBTCRD (UK59397 10.246)+01515E WHEN SSL CLIENT SENDS SSL APPLICATION DATA DURING SSL HANDSHAKE. - United States

Text:
z/os  A FIX IS AVAILABLE
Obtain the fix for this APAR.


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  AT-TLS is being used to secure a connection.  The SSL handshake
   starts with the SSL client sending in the client hello.  The
   next data from the SSL client includes a SSL application record
   and then a handshake record:
   17030000 057C4040 FFEF1603 000084
   .
   AT-TLS abends trying to decrypt the application data record
   because a control block needed for decryption is not available
   until after the handshake completes.
   .
   The SSL handshake should fail without an abend.
   VERIFICATION STEPS:
   1) S0C4 abend in EZBTCRD attempting to store into the location
   pointed to by Reg 8 at offset 01515E.
   2) Reg 8 will be zero.  It was loaded from Reg 12(TCBTTLSX CB) +
   108, which is also zero.
   3) A packet trace will show an invalid sequence of data sent by
   the SSL client, similar to the data shown above.
   
   
    
   
   

LOCAL FIX

PROBLEM SUMMARY
 *  ****************************************************************
   * USERS AFFECTED: All users of the IBM Communications Server   *
   *                 for z/OS Version 1 Release 12 IP: AT-TLS     *
   ****************************************************************
   * PROBLEM DESCRIPTION: Abend in EZBTCRD when AT-TLS receives   *
   *                      SSL application data during SSL         *
   *                      handshake                               *
   ****************************************************************
   * RECOMMENDATION:                                              *
   ****************************************************************
   The remote client initiated a SSL handshake with an
   local application using AT-TLS.  During the SSL
   handshake, an SSL application data record is sent
   along with SSL handshake records.  AT-TLS tries to
   decrypt the SSL application data but abends because
   the TLSX_Dec_Parms@ area is not allocated yet.
   +-------------------------------------------------------------+
   + Please check our Communications Server for OS/390 homepages +
   + for common networking tips and fixes.  The URL for these    +
   + homepages can be found in Informational APAR II11334 [http://www-01.ibm.com/support/docview.wss?uid=isg1II11334].       +
   +-------------------------------------------------------------+
   
   
    
   
   

PROBLEM CONCLUSION
 *  Module EZBTLCWK has been changed to allocate the
   TLSX_Dec_Parm@ when the SSL handshake starts.
   
   * Cross Reference between External and Internal Names
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   PM36149
   
   
 * REPORTED COMPONENT NAME
   TCP/IP V3 MVS
   
   
 * REPORTED COMPONENT ID
   5655HAL00
   
   
 * REPORTED RELEASE
   1C0
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt / Xsystem
   
   
 * SUBMITTED DATE
   2011-04-01
   
   
 * CLOSED DATE
   2011-04-12
   
   
 * LAST MODIFIED DATE
   2011-06-02
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
    UK66702 PM38843
   
   

MODULES/MACROS
 *  EZBTLCWK
   
   
    
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   TCP/IP V3 MVS
   
   
 * FIXED COMPONENT ID
   5655HAL00
   
   

APPLICABLE COMPONENT LEVELS
 * R1C0 PSY UK66702 [HTTPS://WWW14.SOFTWARE.IBM.COM/WEBAPP/SET2/ORDERMEDIA/SHOPCART?PTFS=UK66702]
   UP11/05/21 P F105
   
   

FIX IS AVAILABLE
 * SELECT THE PTF APPROPRIATE FOR YOUR COMPONENT LEVEL. YOU WILL BE REQUIRED TO SIGN IN. DISTRIBUTION ON PHYSICAL MEDIA IS NOT AVAILABLE IN ALL COUNTRIES.