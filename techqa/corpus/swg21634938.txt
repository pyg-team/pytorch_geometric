Title: IBM Editable fields in other widgets lose focus when Daeja Viewer loads from Workplace XT in the Viewer widget - United States

Text:
Daeja; viewer; frozen; focus; ProvenPractices; TroubleShootingFlowDocument TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 Users entering character input in editable fields on other widgets are prevented from entering more data when the Daeja Viewer applet acquires focus and consumes all keyboard input instead. 




SYMPTOM
(The same issue occurs for later releases of Case Manager which load the Daeja viewer from IBM Content Navigator: http://www.ibm.com/support/docview.wss?uid=swg21678760 [http://www.ibm.com/support/docview.wss?uid=swg21678760]) 

On both Mozilla Firefox and Microsoft Internet Explorer, a user updating an editable field in the Case (Work Item) Data widget on the Work Details page while a document is loading in the Daeja Viewer in the Viewer widget will find, at a certain point, that they are unable to enter more characters in the field they were editing. The keyboard input is consumed by the Daeja Viewer applet instead. The page and widget where the editable fields exist may vary, but all will suffer from the problem of losing focus to the Daeja Viewer when a document is being loaded.

This can occur when the Attachments widget is configured to automatically load an attachment as soon as the page loads, when the "Open the specified attachment in a Viewer widget" setting is configured. At the same time, the user starts editing a field while loading is still in progress.

For example, if a user is entering the character 'z' repeatedly in an editable field while a document is loading in the Daeja Viewer, they will find, at a certain point in the loading process, that they are unable to add more character input and that the 'z' is instead consumed by Daeja, causing the document there to Zoom.

To continue typing in the editable field, try one of the following steps: 


- For Microsoft Internet Explorer, the user can click back into the editable field, and it will immediately allow the user to continue editing.


- For Mozilla Firefox, click anywhere else on the page, then click back into the editable field, before you continue editing. This is true regardless of whether the document is displayed in the viewer widget or in a separate window. This is an issue with Firefox and Java applets generally and not the result of Daeja or IBM software.

The primary issue here is not specific to Daeja but is rather the result of default Java applet loading behavior.


CAUSE
 

The problem is a result of default Java applet loading behavior as handled by supported browsers.



ENVIRONMENT
 

The problem can occur on Case Client workstations (Windows), on both Mozilla Firefox and Microsoft Internet Explorer.



DIAGNOSING THE PROBLEM
 

If you see the issues described in the Symptom section, Java applet loading behavior is the likely cause.



RESOLVING THE PROBLEM
 


The issue can be resolved by editing the Workplace XT file that is used to load the Daeja Viewer applet by both Workplace XT and IBM Case Manager.

It is this file that passes in the startup parameters used/consumed by the Daeja Viewer applet when it loads.

NOTE: Make sure to make a backup copy of the file you will be editing in the instructions below.

This file, named WcmJavaViewer.jsp, is typically deployed in the following location:

\WorkplaceXT.ear\web_client.war\UI-INF\jsp\ui

To resolve the issue, use the text editor of your choice to add the following two (2) parameters to the file:

<===

<param name="initialFocus" value="false"> <%-- DAEJA VIEWER PARAM -->
<param name="initial_focus" value="false"> <%-- GENERIC JAVA APPLET PARAM -->

===>

NOTE: There is more than one file deployed by Workplace XT with the name WcmJavaViewer.jsp - so please be sure to edit ONLY the one deployed in your local equivalent of the location specified above (\WorkplaceXT.ear\web_client.war\UI-INF\jsp\ui).

After your edit, the file should look like the following example:

<===

...
function writeParam(key, value)
{
var str = paramTag + key + operatorTag + '"' + value + '"' + enderTag;
write(str);
}

<%-- Note: The following list provides configuration parameters for the Image Viewer.
Many of these parameters are necessary for P8 to function normally.
Please do not modify any of the FileNet parameters. I've added
comments to point out these parameters. --%>

writeParam('initial_focus', 'false');
writeParam('initialFocus', 'false'); 

writeParam('code', 'ji.applet.jiApplet.class');
...

===>

NOTE: After modifying the WcmJavaViewer.jsp, make sure it has a current timestamp (newer than any cached copies so the JSP compiler will pick it up), shut down WebSphere Application Server, clear the \logs, \temp, and \wstemp folders under the WebSphere Application Server profile, restart WebSphere Application Server, and then clear your browser cache as well before testing.

NOTE: After testing the above and verifying that the changes work to resolve the issue, make sure to apply the same changes to the installed copy of the WcmJavaViewer.jsp, file under your local equivalent of the following directory:

C:\Program Files (x86)\IBM\FileNet\WebClient\WorkplaceXT\UI-INF\jsp\ui

Editing this file make the change permanent so that you do not lose your changes the next time Workplace XT is redeployed,

NOTE: You will still need to reapply these changes each time you apply a new Workplace XT fixpack since this file may be overwritten if the fixpack contains its own copy of this file.

NOTE: The same issue occurs on IBM Case Manager 5.2.0.x where the Daeja Viewer applet loads from IBM Content Navigator instead of Workplace XT. See the related technote for Editable fields in other widgets lose focus when Daeja Viewer loads from IBM Content Navigator in the Viewer widget at the following link: http://www-01.ibm.com/support/docview.wss?uid=swg21678760 [http://www-01.ibm.com/support/docview.wss?uid=swg21678760].

RELATED INFORMATION
 Same issue on Case Manager 5.2.0.x with ICN: [http://www-01.ibm.com/support/docview.wss?uid=swg21678760]