Title: IBM IZ01594: ADD TRACE POINT TO CAPTURE PTHREAD_CREATE FAILURE DATA - United States

Text:
 SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  Error Message: Currently the Java 1.5.0 JVM doesn't capture the
   errno value if we fail to create an OS thread. This makes
   debugging OutOfMemory:Failed to fork OS thread more difficult.
   .
   Stack Trace: N/A
   .
   
   
    
   
   

LOCAL FIX
 *  N/A
   
   
    
   
   

PROBLEM SUMMARY
 *  The JVM was not providing enough debugging information to allow
   OutOfMemoryErrors thrown when a thread cannot be created to be
   debugged effectively.
   
   
    
   
   

PROBLEM CONCLUSION
 *  This defect will be fixed in:
   5.0.0 SR7
   .
   The JVM has been modified so that the errno from the
   pthread_create is captured and reported in the OutOfMemoryError
   string like this:
   Exception in thread "main" java.lang.OutOfMemoryError: Failed to
   create a thread: retVal -1073741830, errno 112
           at java.lang.Thread.startImpl(Native Method)
           at java.lang.Thread.start(Thread.java:979)
   The data is also available in jvm trace (the default level that
   will be stored in the snap trace produced by the OutOfMemory
   condition) like this:
   j9vm.222  Event       startJavaThread j9thread
   _create failed: retVal=3221225466 Thread create failed,
   os_errno=112 (0x70)
   (Note the JVM trace point number is subject to change.)
   .
   To obtain the fix:
   Install build 20070829 or later
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   IZ01594
   
   
 * REPORTED COMPONENT NAME
   JAVA 5 J9 COMMO
   
   
 * REPORTED COMPONENT ID
   620500127
   
   
 * REPORTED RELEASE
   500
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2007-07-23
   
   
 * CLOSED DATE
   2007-12-14
   
   
 * LAST MODIFIED DATE
   2007-12-14
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   JAVA 5 J9 COMMO
   
   
 * FIXED COMPONENT ID
   620500127
   
   

APPLICABLE COMPONENT LEVELS
 * R500 PSN
   UP