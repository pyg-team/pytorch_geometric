Title: IBM PI52397: WMQ 7.1: CSQX053E FOR CCXALLOCMEM MAY OCCUR WHEN A LARGE MESSAGE IS GOTTEN BY A CLIENT CHANNEL THAT IS USING SSL/TLS - United States

Text:
z/os  A FIX IS AVAILABLE
Obtain the fix for this APAR.


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  ERROR DESCRIPTION:Ã˜
   A client channel getting large messages with an SSL/TLS client
   sometimes receives reason code 2009 MQRC_CONNECTION_BROKEN. The
   problem occurs when the channel is communicating with a V7.1
   queue manager but not a V8.0 one.
   
   The CHIN joblog has messages
   
    CSQX053E Error information recorded in CSQSNAP data set
    CSQX501I Channel <channel name> no longer active
   
   The eyecatcher of the snap dump looks like
   
   *        X...XFFSccxAllocMem.....*
   *................MOVR......p.....*
   *X...XINS...:....................*
   *................Length..........*
   *................................*
   
   In the reported case, the client was running on a DataPower
   (DP) appliance, but the problem is not limited to DP.
   
   Additional Symptom(s) Search Keyword(s):
   XFFSccxAllocMem 7.1.0 SVRCONN SSL TLS FFST
   CSQX620E System SSL error function 'gsk_secure_socket_read'
            RC=437
   
   
    
   
   

LOCAL FIX
 *  None unless the channel can temporarily run without SSL/TLS.
   
   
    
   
   

PROBLEM SUMMARY
 *  ****************************************************************
   * USERS AFFECTED: All users of WebSphere MQ Version 7          *
   *                 Release 1 Modification 0.                    *
   ****************************************************************
   * PROBLEM DESCRIPTION: MQ V7 client application using SSL      *
   *                      SVRCONN channels can receive MQRC 2009  *
   *                      (MQRC_CONNECTION_BROKEN) after MQGET.   *
   *                                                              *
   *                      The CHIN joblog reports error messages  *
   *                      CSQX053E and CSQX620E.                  *
   *                                                              *
   *                      In CSQSNAP dataset, FFST SNAP dumps are *
   *                      generated by function ccxAllocMem.      *
   ****************************************************************
   * RECOMMENDATION:                                              *
   ****************************************************************
   Distributed MQ V7 clients do not negotiate with the queue
   manager the correct buffer size for SSL during channel
   initiation. This causes MQ V710 for z/OS channel initiator CHIN
   to try to allocate a SSL transmission buffer that is too large
   resulting in ccxAllocMem generating a FFST SNAP dump. The
   current MQGET call or any other active API call terminates with
   MQRC 2009 (MQRC_CONNECTION_BROKEN).
   
   
    
   
   

PROBLEM CONCLUSION
 *  MQ V710 for z/OS channel initiator now enforces a maximum SSL
   buffer size avoiding the FFST SNAP dumps, error messages and
   unexpected reason codes on API calls.
   100Y
   CMQXRMSA
   CMQXRSRV
   CSQXCCMX
   CSQXRMSS
   CSQXRMTR
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   PI52397
   
   
 * REPORTED COMPONENT NAME
   WMQ Z/OS V7
   
   
 * REPORTED COMPONENT ID
   5655R3600
   
   
 * REPORTED RELEASE
   100
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt / Xsystem
   
   
 * SUBMITTED DATE
   2015-11-12
   
   
 * CLOSED DATE
   2016-01-18
   
   
 * LAST MODIFIED DATE
   2016-03-02
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
    UI34511
   
   

MODULES/MACROS
 *  CMQXRMSA CMQXRSRV CSQXCCMX CSQXRMSS CSQXRMTR
   
   
    
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   WMQ Z/OS V7
   
   
 * FIXED COMPONENT ID
   5655R3600
   
   

APPLICABLE COMPONENT LEVELS
 * R100 PSY UI34511 [HTTPS://WWW14.SOFTWARE.IBM.COM/WEBAPP/SET2/ORDERMEDIA/SHOPCART?PTFS=UI34511]
   UP16/02/03 P F602
   
   

FIX IS AVAILABLE
 * SELECT THE PTF APPROPRIATE FOR YOUR COMPONENT LEVEL. YOU WILL BE REQUIRED TO SIGN IN. DISTRIBUTION ON PHYSICAL MEDIA IS NOT AVAILABLE IN ALL COUNTRIES.