Title: IBM PM58205: UpdateInstaller failure - removeemptyamhome.py error - United States

Text:
  FIXES ARE AVAILABLE
7.1.0-TIV-ITCAMAD-FP0003: ITCAM for Application Diagnostics V7.1 Fix Pack 3 [http://www-01.ibm.com/support/docview.wss?uid=swg24032604]
7.1.0.3-TIV-ITCAMAD-IF0001: ITCAM for Application Diagnostics V7.1 FP3 IF1 [http://www-01.ibm.com/support/docview.wss?uid=swg24032985]
7.1.0.3-TIV-ITCAMAD-IF0004: ITCAM for Application Diagnostics V7.1 FP3 IF4 [http://www-01.ibm.com/support/docview.wss?uid=swg24033735]
7.1.0.3-TIV-ITCAMAD-IF0005: ITCAM for Application Diagnostics V7.1 FP3 IF5 [http://www-01.ibm.com/support/docview.wss?uid=swg24033938]
7.1.0.3-TIV-ITCAMAD-IF0004: ITCAM for Application Diagnostics V7.1 FP3 IF6 [http://www-01.ibm.com/support/docview.wss?uid=swg24034668]
7.1.0.3-TIV-ITCAMAD-IF0008: ITCAM for Application Diagnostics V7.1 FP3 IF8 [http://www-01.ibm.com/support/docview.wss?uid=swg24037994]
7.1.0-TIV-ITCAMAD-FP0004: ITCAM for Application Diagnostics V7.1 Fix Pack 4 [http://www-01.ibm.com/support/docview.wss?uid=swg24041705]


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  ITCAM for AD 7.1 - Managing Server interim fix
   7.1.0.2-TIV-ITCAMAD_MS-IF0006
   
   silentupdate -prepareInstall is successful, however, -install
   fails with following exception in the update log:
   
   ----
   (Jan 24, 2012 1:23:07 AM), update,  ITCAM-SUCCESS is not
   returned with
   /opt/IBM/itcam/WebSphere/MS/update/tmp/prepare/removeEmptyAmHome
   .py Use
   earlier version of UpdateInstaller.
   (Jan 24, 2012 1:23:07 AM), update,  Action failed:
   {0}com.ibm.wsam.update.exception.UpdateException: jacl failed.
   ITCAM-SUCCESS is not returned by script. Use earlier version of
   UpdateInstaller.
    at
   com.ibm.wsam.update.action.javaaction.custom.utils.Ms.runJacl(Ms
   .java:13
   5)
    at
   com.ibm.wsam.update.action.javaaction.custom.removeEmptyAmHome.A
   ction.in
   stall(Action.java:43)
    at
   com.ibm.wsam.update.action.bean.ActionEffectPerformer.perform(Ac
   tionEffe
   ctPerformer.java:48)
    at
   com.ibm.wsam.update.controller.ControllerBase.perform(Controller
   Base.jav
   a:53)
    at
   com.ibm.wsam.update.controller.EffectController.execute(EffectCo
   ntroller
   .java:76)
    at
   com.ibm.wsam.update.controller.UpdateController.install(UpdateCo
   ntroller
   .java:543)
    at
   com.ibm.wsam.update.controller.UpdateController.execute(UpdateCo
   ntroller
   .java:427)
    at
   com.ibm.wsam.update.is.wizard.action.InstallUpdateAction.execute
   (Install
   UpdateAction.java:27)
    at
   com.installshield.wizard.RunnableWizardBeanContext.run(Unknown
   Source)
   ----------
   
   
    
   
   

LOCAL FIX
 *  Use following steps to work around the problem script and
   proceed with the installation.
   1. If you ran the first -install with updateDb=true in the
   silentUpdate.properties, then the database updates have already
   been made.
   When you run the silentInstall the second time, you should set
   updateDb=false to avoid re-applying DB changes.
   
   
   2. After prepareInstall, modify the following intermediate file:
   
   MS/update/tmp/prepare/removeEmptyAmHome.py
   
   such that the first 3 lines read as follows:
   
   from org.python.modules import re;
   print "ITCAM-SUCCESS"
   sys.exit(0)
   
   Save the file.
   
   3. Run silentUpdate.sh -install
   
   This should install successfully.
   ---------
   This workaround will by-pass the script which removes JVM
   environment variable AMHOME.
   
   You can manually delete the empty AMHOME  by going to following
   page in WebSphere Admin console:
   Resource adapters > ProblemFinderRA > Custom properties
   
   And checking if AMHOME is empty and if it is, then delete it
   manually.
   
   
    
   
   

PROBLEM SUMMARY
 *  ****************************************************************
   * USERS AFFECTED:
   *
   * Potentially all ITCAM for Application Diagnostics 7.1 users
   * who are upgrading the Managing server component to a later
   * interim fix or fix pack.
   *
   ****************************************************************
   *
   * PROBLEM DESCRIPTION:
   *
   * During the upgrade process, "silentUpdate -prepareInstall" is
   * successful butthe "silentUpdate -install" fails with the
   * following exception in the update log:
   *
   * ITCAM-SUCCESS is not returned with /opt/IBM/itcam/WebSphere
   * /MS/update/tmp/prepare/removeEmptyAmHome.py  use earlier
   * version of UpdateInstaller.
   * Action failed:
   {0}com.ibm.wsam.update.exception.UpdateException: jacl failed.
   *
   ****************************************************************
   
   
    
   
   

PROBLEM CONCLUSION
 *  The fix for this APAR is contained in the following maintenance
   package:
   
     | fix pack | 7.1.0-TIV-ITCAMAD-FP0003
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   PM58205
   
   
 * REPORTED COMPONENT NAME
   TCAM AD MAN SER
   
   
 * REPORTED COMPONENT ID
   5724Y92MS
   
   
 * REPORTED RELEASE
   710
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2012-02-14
   
   
 * CLOSED DATE
   2012-05-11
   
   
 * LAST MODIFIED DATE
   2012-05-11
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   TCAM AD MAN SER
   
   
 * FIXED COMPONENT ID
   5724Y92MS
   
   

APPLICABLE COMPONENT LEVELS
 * R710 PSY
   UP