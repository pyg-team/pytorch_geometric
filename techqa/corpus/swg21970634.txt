Title: IBM Node who was IBM.RecoveryRM master node cannot rejoin purescale cluster after rebooting host - United States

Text:
lssam; hang; purescale TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 The old IBM.RecoveryRM master node cannot rejoin purescale cluster after rebooting host 

SYMPTOM
1) 'db2instance -list' on other nodes complained " The member, CF, or host information could not be obtained" or got hanged:

db2sdin1@DB2-purescale-207:~> db2instance -list
The member, CF, or host information could not be obtained. Verify the cluster manager resources are valid by entering db2cluster -cm -verify -resources. Check the db2diag.log for more information.

2) 'lssam' on other nodes complained "No response from the resource manager IBM.GblResRM and IBM.StorageRM" for the rebooted node.

(lsrsrc-api) 2610-424 No response from the resource manager IBM.GblResRM on node DB2-purescale-205. The resource manager has terminated.
(lsrsrc-api) 2610-424 No response from the resource manager IBM.StorageRM on node DB2-purescale-205. The resource manager has terminated.
lssam: An unexpected RMC error occurred.The RMC return code was 1.

3) 'lssam' on the rebooted node got hanged.


CAUSE
The adapters from the same subnet configured different MTU value on purescale nodes.

DIAGNOSING THE PROBLEM
'lssam -T' on the rebooted node shows it hanged at CHARMControl:

DB2-purescale-207:~ # lssam -T
lssam: Version @(#)98 1.70 src/sam/CHARM/cli/bin/lssam.perl, charmcli, sam_rsa322, rsa322s007a 11/5/13 11:07:55
lssam: calling lsrsrc-api
/usr/sbin/rsct/bin/lsrsrc-api -s IBM.PeerDomain::"Name like '%'"::Name::OpState::RSCTActiveVersion -Dtvrtvrtvr
lssam: "db2domain_20150917165302"tvrtvrtvr1tvrtvrtvr"3.1.5.5"
lssam: RSCTActiveVersion: 3010505
lssam: calling lsrsrc-api
/usr/sbin/rsct/bin/lsrsrc-api -s IBM.PeerNode::"Name like '%'"::Name::ActivePeerDomain::OpState::ResourceHandle::NodeNameList -D" "
lssam: "DB2-purescale-205" "db2domain_20150917165302" 1 0x601b 0xffff 0xf0f292f6 0xb0bedb3a 0x140eeb93 0x5c1517d0 {"DB2-purescale-205"}
lssam: node_name=DB2-purescale-205 node_opstate=1 nodeList=DB2-purescale-205
lssam: "DB2-purescale-207" "db2domain_20150917165302" 1 0x601b 0xffff 0xeb641900 0x093d3b6f 0x140eeb8a 0x5e247a38 {"DB2-purescale-207"}
lssam: node_name=DB2-purescale-207 node_opstate=1 nodeList=DB2-purescale-207
lssam: calling lsrsrc-api
/usr/sbin/rsct/bin/lsrsrc-api -Dtvrtvrtvr -I tvr -n -c IBM.CHARMControltvr*p32


RESOLVING THE PROBLEM
Make sure the adapters from the same subnet have the same MTU value on purescale nodes.