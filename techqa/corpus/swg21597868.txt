Title: IBM AIX Premium agent CPU Availability and CPU Utilization metrics inconsistency - United States

Text:
ITM 6.2 System P TECHNOTE (FAQ)

QUESTION
 Why values displayed on AIX Premium agent CPU Availability graph and sum of CPU Utilization values for individual LPARs don't match ? 

Why CPU Availability metrics do not match with output of nmon command? 

CAUSE
CPU Availability shows the percentage of CPU used out of the total CPU the LPAR is entitled to. This can have higher percentage idle if LPAR is entitled to a lot more CPU than it's using. The CPU Utilization view shows how each logical CPU distributed the cycles it actually used.

ANSWER
CPU Availability workspace can be referred to as the mpstat workspace since it shows what 
the mpstat command shows. This is the "ALL" line in the mpstat output. The CPU Utilization view shows the CPU usage for each Logical CPU out of the time that CPU was actually executing. These 2 views will "match" when the LPAR is using all of it's entitlement. 

Note: 
The CPU_Detail attribute group contains the User, System, Wait, and Idle %'s as well as the number of CPU units actually consumed by that Logical CPU (Physical_Consumption). 

CPU %'s in the CPU_Summary and Logical Partition attribute groups can be computed using the following algorithm: 

For each CPU_Detail entry (each one is a logical CPU),
User_PC% = User_CPU_Pct * Physical_Consumption / <Number of Physical CPUs Assigned> 

 System_PC% = System_CPU_Pct * Physical_Consumption / <Number of Physical CPUs Assigned> 

 IO Wait PC% = IO_Wait_CPU_Pct * Physical_Consumption / <Number of Physical CPUs Assigned > 

 Idle PC% = Idle_CPU_Pct * Physical_Consumption / <Number of Physical CPUs Assigned> 

CPU_Summary and Logical_Partition 
User_CPU_Pct = sum of all User_PC% 
System_CPU_Pct = sum of all System_PC% 
IO_Wait_CPU_Pct = sum of all IO Wait_PC% 
Idle_CPU_Pct = sum of all Idle_PC% 



PRODUCT ALIAS/SYNONYM
 ITM 6 - System P AIX Premium 5724C04AP PX