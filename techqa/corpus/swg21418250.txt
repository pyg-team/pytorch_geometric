Title: IBM How do you disable the Resource Tracker or move the logs to a different directory in IBM InfoSphere Information Server? - United States

Text:
datastage TECHNOTE (FAQ)

QUESTION
 Resource tracker files are accumulating in /tmp or %TEMP%. What are the steps for disabling the Resource Tracker or moving the output files to a different directory? 

CAUSE
The Resource Tracker logs the processor, memory, and I/O usage on each computer that runs parallel jobs. The machine log files are created by the DataStage Resource Tracker program. 

There will be machine log files in /tmp or %TEMP%


The Resource Tracker uses a lot of memory and a lot of swap space, therefore you may want to consider disabling it or moving the logs it generates to a different directory



ANSWER
The resource_tracker is controlled by a file located in PXEngine/etc named restrack_settings. The format is shown in the following example: 


LOGGING_INTERVAL=4
RUN_TIMEOUT=0
LOG_INCREMENT_INTERVAL=86400
CLEANUP_INTERVAL=432000
HANDLE_DIRECTORY=/tmp
LOG_DIRECTORY=/tmp

Here the logging interval is set to 4 or every 4 seconds write to the active log. The log increment interval is 86400 seconds or every 24 hours close the current log and start a new log. The cleanup interval is set to 432000 seconds or every 5 days delete logs greater than 5 days old. Lastly, the handle and log directory is set to /tmp or where the pid and logs are written.

Files in /tmp:

resource_tracker.8001.log - activity log file
apt_resource_track.8001.wb-machine - current settings in effect and resource_tracker process pid
machineLog.8001.wb-machine.20080508100536 - machine log data file(s)

The file that contains the activity for the resource_tracker is named resource_tracker.8001.log. In this log, you can see how the log manager rolls over the log files after the defined time of 86400 seconds or 24 hours and deletes log files older than 432000 seconds or 5 days. Below is a snapshot of a resource_tracker log file:

##IIIS-DSEE-TRES-0000310:05:37(000)Resource Tracker Log
##IIIS-DSEE-TRES-0000810:05:37(001)Opening log file: /tmp/machineLog.8001.hawkcewin01.20080508100536.
##IIIS-DSEE-TRES-0000910:05:37(000)Closing log file.
##IIIS-DSEE-TRES-0000810:05:37(001)Opening log file: /tmp/machineLog.8001.hawkcewin01.20080509100537.
##IIIS-DSEE-TRES-0001010:05:37(002)Removing old log: machineLog.8001.hawkcewin01.20080502061733.
##IIIS-DSEE-TRES-0001010:05:37(003)Removing old log: machineLog.8001.hawkcewin01.20080503061735.
##IIIS-DSEE-TRES-0001010:05:37(004)Removing old log: machineLog.8001.hawkcewin01.20080504061737.
##IIIS-DSEE-TRES-0000910:05:38(000)Closing log file.
##IIIS-DSEE-TRES-0000810:05:38(001)Opening log file: /tmp/machineLog.8001.hawkcewin01.20080510100538.
##IIIS-DSEE-TRES-0001010:05:38(002)Removing old log: machineLog.8001.hawkcewin01.20080505061739.
##IIIS-DSEE-TRES-0000910:05:42(000)Closing log file.
##IIIS-DSEE-TRES-0000810:05:42(001)Opening log file: /tmp/machineLog.8001.hawkcewin01.20080511100542.



You can either move the location of the files or disable the resource_tracker from starting.


 * In order to move the location to which the files are generated, edit the restrack_settings file in PXEngine/etc directory. 
   
   Then, restart the DataStage Engine for the settings to take affect.
   
   
 * To disable the resource_tracker from starting:
   
   Unix/Linux Platforms
   
   Add the following to the dsenv file:
   
   APT_DISABLE_TRACKER_STARTUP=1; export APT_DISABLE_TRACKER_STARTUP
   
   Then, restart the DataStage Engine for the settings to take affect.
   
   or
   
   Add the following to the System Environment variables:
   
   APT_DISABLE_TRACKER_STARTUP=1
   
   Then, restart the DataStage Engine for the settings to take effect.
   
   
   Windows Platforms
   
   Add the following to the System Environment variables:
   
   APT_DISABLE_TRACKER_STARTUP=1
   
   Reboot the machine. 


The resource_tracker is started by the same script that starts the JobMonApp. The script is located in the PXEngine/java directory and it is named jobmoninit. In the jobmoninit script there is a bit of code that looks like this: 

# startup resource tracker 

if [ "$APT_DISABLE_TRACKER_STARTUP"X = "X" ] ; then 
if [ -z "$rtlist" ] ; then 

So, if APT_DISABLE_TRACKER_STARTUP is set, it will not start the resource_tracker here either. 


On Unix (but NOT Windows) it is possible to have two instances for DataStage installed and running on the same Engine tier machine. However, multiple instances for of the Resource Tracker will interfere with each other unless some adjustments are made. Users can either: 
 1. Disable on instance of the resource tracker by setting APT_DISABLE_TRACKER_STARTUP in the dsenv file for one of the Datastage instances
    
 2. Edit the the PXengine/bin/restrack_settings file for one of the instances and change the following values in one of the instances:
    
    HANDLE_DIRECTORY=/tmp
    LOG_DIRECTORY=/tmp
    
    so that they point to a different directory than the values for the other instance. Be sure that the directories exist and have the right permissions.