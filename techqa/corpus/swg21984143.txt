Title: IBM ABEND0F4 RKANDATV RKNSLOCL KLVPA001 KLVPA007 KLVPA002 KLVPA003 - United States

Text:
abend0f4 0f4 s0f4 abends0f4 TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 I am getting the following error messages in my zOS TEMS or ITM Agent rklvlog along with a ABEND0F4:

KLVPA001 SYNAD ERROR: jobname ,jobname ,5B2D,D,RKNSLOCL,READ ,UNKNOWN COND. ,0000**********,BPAM S 
KLVPA007 ,***, 0000B3, 5, , , 
KLVPA002 SYNAD ERROR SENSE AND STATUS BYTES: 00800E00 
KLVPA003 LIBRARY RKNSLOCL REFRESHED, SYNAD EXIT DRIVEN 

KLVPA001 SYNAD ERROR: jobname ,jobname ,5B2D,D,RKNSLOCL,READ ,OUT OF EXTENT ,TTR **********,BPAM S 
KLVPA007 ,***,*******,**********, , ,05 
KLVPA002 SYNAD ERROR SENSE AND STATUS BYTES: 00000000 
KLVPA004 LIBRARY RKNSLOCL UNUSABLE, REFRESH FAILED 

Note: The above messages is against the RKNSLOCL data set but the problem also exist for the RKANDATV data set. 


SYMPTOM
Additional symptoms includes "*KNSIN003 National Language Support initialization failed. NLS1 rc = 11 " in started tasks that have RKNSLOCL DD, if RKNSLOCL is PDSE V2. The Tivoli Management Server, OMEGAMON XE for Messaging (MQ and QI Agents) and OMEGAVIEW started task uses this file.


CAUSE
Beginning with z/OS Version 2, z/OS supports two formats of PDSEs: version 1 and version 2. Version 2 PDSEs, introduced in z/OS Version 2, take advantage of a number of internal design changes to improve space utilization in the data set, reduce CPU processing and I/O, and provide better index searches. All PDSEs created before z/OS Version 2 are by definition version 1 PDSEs, and Version 1 remains the default for newly allocated PDSEs. Specify 1 or 2 in the PDSE_VERSION keyword in IGDSMSxx member of SYS1.PARMLIB . 




Version 2 PDSEs can only be created on z/OS Version 2 systems; they can be read and written to on previous releases of z/OS, but cannot be allocated there. 


The version specified using DSNTYPE takes precedence over the PDSE_VERSION specified in IGDSMSxx, if both are specified and have different values.

Note: PDS remains the default value for DSNTYPE even if PDSE_VERSION is specified in the IGDSMSxx member.


ENVIRONMENT
zOS



RESOLVING THE PROBLEM
 

Immediate Manual Changes: 

 * Reallocate the data set(s) with DSNTYPE=(LIBRARY,1) specified. 


You can use the PARMGEN &rte_plib_hilev.&rte_name.WKANSAMU(KCIJPALO), &rte_plib_hilev.&rte_name.RKANSAMU(KCIJPALO) job as a reference to help model the allocations, if you need to reallocate. 
Short-term PARMGEN Changes: 


 * We are requesting PARMGEN to hardcode all PDSE allocations for affected datasets to PDSE V1 format to avoid TEMS/Agent ABENDs 0F4 at startup. Workaround is to manually convert the data sets to PDSE V1 format. In the DSNTYPE parm, specify DSNTYPE=(LIBRARY,1). 
 * Subscribe to PARMGEN APAR OA49893, PTF UA81229 will carry the coding changes to hardcode the DSNTYPE=(LIBRARY,1) and DSNTYPE(LIBRARY,1) allocations if you use the PDSE's (RTE_SMS_PDS_FLAG=Y setting). 


Long-term change is to provide PDSE v2 support in the TEMS and ITM Agents.  



Cross reference information Segment Product Component Platform Version Edition Systems and Asset Management Tivoli OMEGAMON XE for CICS on z/OS Systems and Asset Management Tivoli OMEGAMON XE for CICS Transaction Gateway on z/OS Systems and Asset Management Tivoli OMEGAMON XE for DB2 Performance Expert on z/OS Systems and Asset Management Tivoli OMEGAMON XE for DB2 Performance Monitor on z/OS Systems and Asset Management Tivoli OMEGAMON XE for IMS on z/OS Systems and Asset Management Tivoli OMEGAMON XE for Mainframe Networks Systems and Asset Management Tivoli OMEGAMON XE for Messaging for z/OS Systems and Asset Management Tivoli OMEGAMON XE for Storage Systems and Asset Management Tivoli OMEGAMON XE on z/OS Systems and Asset Management Tivoli OMEGAMON XE on z/OS Monitoring Feature for JVM