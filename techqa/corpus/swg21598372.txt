Title: IBM Sametime System Console fails to start deployment manager on install - United States

Text:
 TECHNOTE (TROUBLESHOOTING)

PROBLEM
Sametime System Console install (install_ssc.sh) fails starting the deployment manager server with error "JVMSHRC020E An error has occurred while opening semaphore." and resulting in "CWNATV00E: Application server dmgr in profile STSCDMgrProfile failed to start."

SYMPTOM
Sametime System Console install (install_ssc.sh) fails starting the deployment manager server:
[exec] *** Starting the deployment manager... 
[exec] CPC1221: Job 169683/QEJBSVR/DMGR submitted to job queue QWASJOBQ in library 
[exec] QWAS7. 
[exec] CWNATV00E: Application server dmgr in profile STSCDMgrProfile failed to start. Check the job log for job DMGR QEJBSVR 169683 or the log files located in the profile's logs directory for more information. 

[exec] *** Failed with exit status 1 
[exec] Result: 19 

perform_error_exit: 
[echo] INSTALL_FAIL 
[echo] Failed creating WAS profiles. 
[echo] Check log, /QIBM/UserData/Lotus/stii/logs/install_STCONSOLE_20120611_1222.log, for more details. 

CWNATV00E: Application server dmgr in profile STSCDMgrProfile failed to start

A review of the dmgr logs shows:

/QIBM/UserData/WebSphere/Appserver/v7/SametimeWAS/profiles/STSCDMgrProfile/logs/dmgr/native_stderr.log 

************Beginning of data************** 
JVMSHRC020E An error has occurred while opening semaphore 
JVMSHRC336E Port layer error code = -197210 
JVMSHRC337E Platform error message: semget : A file or directory in the path name does not exist.
JVMJ9VM015W Initialization error for library j9shr24(11): JVMJ9VM009E J9VMDllMain failed 
Unable to create Java Virtual Machine. 
************End of Data********************

The same errors are also logged in the DMGR job log:

JVAB56D Diagnostic 00 06/11/12 12:36:57.934485 QXJ9UTLJVM QJVM6032 *STMT QXJ9VM QJVM6032 *STMT
From module . . . . . . . . : QXJ9UTLJVM 
From procedure . . . . . . : JvaSendMsg 
Statement . . . . . . . . . : 16 
To module . . . . . . . . . : QXJ9VM 
To procedure . . . . . . . : xj9SendDiagMsgToJobLog 
Statement . . . . . . . . . : 22 
Thread . . . . : 000000D1 
Message . . . . : JVMSHRC020E An error has occurred while opening semaphore JVAB56D Diagnostic 00 06/11/12 12:36:57.935021 QXJ9UTLJVM QJVM6032 *STMT QXJ9VM QJVM6032 *STMT
From module . . . . . . . . : QXJ9UTLJVM 
From procedure . . . . . . : JvaSendMsg 
Statement . . . . . . . . . : 16 
To module . . . . . . . . . : QXJ9VM 
To procedure . . . . . . . : xj9SendDiagMsgToJobLog 
Statement . . . . . . . . . : 22 
Thread . . . . : 000000D1 
Message . . . . : JVMSHRC336E Port layer error code = -197210 
JVAB56D Diagnostic 00 06/11/12 12:36:57.935507 QXJ9UTLJVM QJVM6032 *STMT QXJ9VM QJVM6032 *STMT 
From module . . . . . . . . : QXJ9UTLJVM 
From procedure . . . . . . : JvaSendMsg 
Statement . . . . . . . . . : 16 
To module . . . . . . . . . : QXJ9VM 
To procedure . . . . . . . : xj9SendDiagMsgToJobLog 
Statement . . . . . . . . . : 22 
Thread . . . . : 000000D1 
Message . . . . : JVMSHRC337E Platform error message: semget : A file or 
directory in the path name does not exist. 
JVAB56D Diagnostic 00 06/11/12 12:36:57.967729 QXJ9UTLJVM QJVM6032 *STMT QXJ9VM QJVM6032 *STMT 
From module . . . . . . . . : QXJ9UTLJVM 
From procedure . . . . . . : JvaSendMsg 
Statement . . . . . . . . . : 16 
To module . . . . . . . . . : QXJ9VM 
To procedure . . . . . . . : xj9SendDiagMsgToJobLog 
Statement . . . . . . . . . : 22 
Thread . . . . : 000000D1 
Message . . . . : JVMJ9VM015W Initialization error for library j9shr24(11): 
JVMJ9VM009E J9VMDllMain failed
WAS0210 Diagnostic 30 06/11/12 12:36:59.609652 QWASCMN QWAS7A *STMT QWASLAUNCH QWAS7A *STMT 
From module . . . . . . . . : WSMESSAGE 
From procedure . . . . . . : send_message__FPcN21iN21 
Statement . . . . . . . . . : 21 
To module . . . . . . . . . : SSLAUNCHER 
To procedure . . . . . . . : SsLaunchApplicationServer__FiPPc 
Statement . . . . . . . . . : 357 
Thread . . . . : 000000D1 
Message . . . . : Internal failure in WebSphere server.


CAUSE
Temporary JVM related files prevent the SSC install from starting a WAS profile


ENVIRONMENT
Sametime System Console 8.5.2 on IBM i



RESOLVING THE PROBLEM
Remove/Delete temporary JVM files in the directory /tmp/javasharedresources. 

Once cleared, clean up the failed SSC install and perform the install again. The WAS profile (dmgr) will now successfully start, allowing the install to complete.