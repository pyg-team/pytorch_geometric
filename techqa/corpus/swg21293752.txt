Title: IBM A J2CA0138E and CWSIT0010E message is issued for WebSphere Process Server (WPS) when a user is not authorized to connect to a CEI bus - United States

Text:
v61rnotes; J2CA0138E; CWSIV0961E; CWSIT0020E; CWSIP0302E TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 Messaging operations cannot be performed on the Common Event Infrastructure bus (CommonEventInfrastructure_Bus) because a user is not assigned to the bus connector when creating a WebSphere Process Server or WebSphere Enterprise Service Bus deployment environment. 

SYMPTOM
 If the bus connector role is not set on the CommonEventInfrastructure_Bus, the following exception is sent to the SystemOut.log file of the cluster member:


[1/16/08 21:40:42:093 CST] 00000025 ActivationSpe E J2CA0138E: The MessageEndpoint activation failed for ActivationSpec eis/BPCCEIConsumerActivationSpec (com.ibm.ws.sib.api.jmsra.impl.JmsJcaActivationSpecImpl) and MDB Application BPCECollector_default.Support#collector.jar#EventConsumer, due to the following exception: javax.resource.ResourceException: CWSIV0961E: The authorization exception com.ibm.wsspi.sib.core.exception.SINotAuthorizedException: CWSIT0010E: A client request for messaging engine default.Messaging.000-CommonEventInfrastructure_Bus in bus CommonEventInfrastructure_Bus failed with reason: CWSIT0020E: An unexpected exception occurred in messaging engine default.Messaging.000-CommonEventInfrastructure_Bus in bus CommonEventInfrastructure_Bus while creating a connection, exception: com.ibm.wsspi.sib.core.exception.SINotAuthorizedException: CWSIP0302E: A user admin is not authorized to access the messaging engine default.Messaging.000-CommonEventInfrastructure_Bus on bus CommonEventInfrastructure_Bus.. was thrown while attempting to create a connection to the bus CommonEventInfrastructure_Bus using the activation specification [com.ibm.ws.sib.api.jmsra.impl.JmsJcaActivationSpecImpl@215354582 <userName=admin> <password=*****> <xaRecoveryAlias=CommonEventInfrastructureJMSAuthAlias> <destination=queue://BPCCEIConsumerQueueDestination_default.Support?busName=CommonEventInfrastructure_Bus> <durableSubscriptionHome=null> <destinationType=javax.jms.Queue> <messageSelector=null> <acknowledgeMode=Auto-acknowledge> <subscriptionDurability=NonDurable> <shareDurableSubscriptions=InCluster> <clientId=null> <subscriptionName=null> <maxBatchSize=1> <maxConcurrency=10> <busName=CommonEventInfrastructure_Bus> <shareDataSourceWithCMP=false> <targetTransportChain=null> <readAhead=Default> <target=null> <targetType=BusMember> <targetSignificance=Preferred>].
at com.ibm.ws.sib.ra.inbound.impl.SibRaMessagingEngineConnection.<init>(SibRaMessagingEngineConnection.java:525)
at com.ibm.ws.sib.ra.inbound.impl.SibRaStaticDestinationEndpointActivation.createRemoteListener(SibRaStaticDestinationEndpointActivation.java:1247)
at com.ibm.ws.sib.ra.inbound.impl.SibRaStaticDestinationEndpointActivation.<init>(SibRaStaticDestinationEndpointActivation.java:206)
at com.ibm.ws.sib.ra.inbound.impl.SibRaResourceAdapterImpl.endpointActivation(SibRaResourceAdapterImpl.java:321)
at com.ibm.ejs.j2c.ActivationSpecWrapperImpl.activateEndpoint(ActivationSpecWrapperImpl.java:319)
at com.ibm.ejs.j2c.RAWrapperImpl.activateEndpoint(RAWrapperImpl.java:940)
at com.ibm.ejs.j2c.RALifeCycleManagerImpl.activateEndpoint(RALifeCycleManagerImpl.java:1571)
at com.ibm.ejs.container.MessageEndpointFactoryImpl.activateEndpoint(MessageEndpointFactoryImpl.java:258)
at com.ibm.ws.runtime.component.EJBContainerImpl.install(EJBContainerImpl.java:3006)
at com.ibm.ws.runtime.component.EJBContainerImpl.start(EJBContainerImpl.java:3693)
at com.ibm.ws.runtime.component.ApplicationMgrImpl.start(ApplicationMgrImpl.java:1301)
at com.ibm.ws.runtime.component.DeployedApplicationImpl.fireDeployedObjectStart(DeployedApplicationImpl.java:1138)
at com.ibm.ws.runtime.component.DeployedModuleImpl.start(DeployedModuleImpl.java:569)
at com.ibm.ws.runtime.component.DeployedApplicationImpl.start(DeployedApplicationImpl.java:817)
at com.ibm.ws.runtime.component.ApplicationMgrImpl.startApplication(ApplicationMgrImpl.java:950)
at com.ibm.ws.runtime.component.ApplicationMgrImpl$AppInitializer.run(ApplicationMgrImpl.java:2120)
at com.ibm.wsspi.runtime.component.WsComponentImpl$_AsynchInitializer.run(WsComponentImpl.java:342)
at com.ibm.ws.util.ThreadPool$Worker.run(ThreadPool.java:1469)
Caused by: com.ibm.wsspi.sib.core.exception.SINotAuthorizedException: CWSIT0010E: A client request for messaging engine default.Messaging.000-CommonEventInfrastructure_Bus in bus CommonEventInfrastructure_Bus failed with reason: CWSIT0020E: An unexpected exception occurred in messaging engine default.Messaging.000-CommonEventInfrastructure_Bus in bus CommonEventInfrastructure_Bus while creating a connection, exception: com.ibm.wsspi.sib.core.exception.SINotAuthorizedException: CWSIP0302E: A user admin is not authorized to access the messaging engine default.Messaging.000-CommonEventInfrastructure_Bus on bus CommonEventInfrastructure_Bus..
at com.ibm.ws.sib.trm.client.TrmSICoreConnectionFactoryImpl.generateException(TrmSICoreConnectionFactoryImpl.java:961)
at com.ibm.ws.sib.trm.client.TrmSICoreConnectionFactoryImpl.remoteAttach(TrmSICoreConnectionFactoryImpl.java:525)
at com.ibm.ws.sib.trm.client.TrmSICoreConnectionFactoryImpl.connectFromInsideServer(TrmSICoreConnectionFactoryImpl.java:396)
at com.ibm.ws.sib.trm.client.TrmSICoreConnectionFactoryImpl.localBootstrap(TrmSICoreConnectionFactoryImpl.java:311)
at com.ibm.ws.sib.trm.client.TrmSICoreConnectionFactoryImpl.createConnection(TrmSICoreConnectionFactoryImpl.java:292)
at com.ibm.ws.sib.trm.client.TrmSICoreConnectionFactoryImpl.createConnection(TrmSICoreConnectionFactoryImpl.java:210)
at com.ibm.ws.sib.ra.inbound.impl.SibRaMessagingEngineConnection.createConnection(SibRaMessagingEngineConnection.java:854)
at com.ibm.ws.sib.ra.inbound.impl.SibRaMessagingEngineConnection.<init>(SibRaMessagingEngineConnection.java:496)
... 17 more


CAUSE
The identified user is not assigned to the bus connector role on the CommonEventInfrastructure_Bus.


ENVIRONMENT
The problem occurs when you are building a WebSphere Process Server deployment environment with an image that is based on WebSphere Application Server 6.1.0 Fix Pack 13.



DIAGNOSING THE PROBLEM
In addition to checking the SINotAuthorizedException error in the SystemOut.log file, you can verify that the role was not set in the administrative console: Click System Integration > Buses > CommonEventInfrastructure_Bus > Security for bus CommonEventInfrastructure_Bus > Users and groups in the bus connector role. On this panel, a user is not assigned.



RESOLVING THE PROBLEM
You can fix this problem in the administrative console by assigning a user to the bus connector using the following steps: 

 1. Navigate to Service integration > Buses > CommonEventInfrastructure_Bus > Security for bus CommonEventInfrastructure_Bus > Users and groups in the bus connector role. 
 2. Add a user name to the bus connector role.


Note: For other buses in a WebSphere Process Server or WebSphere Enterprise Service Bus deployment environment, the user "admin" is assigned to the bus connector role.  


Cross reference information Segment Product Component Platform Version Edition Business Integration WebSphere Enterprise Service Bus AIX, HP-UX, i5/OS, Linux, Solaris, Windows 6.1