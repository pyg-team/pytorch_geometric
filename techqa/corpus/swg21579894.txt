Title: IBM ITNM Performance Reports the logon failed message QE-DEF-0325 - United States

Text:
Cognos locale login TCR Informix IDS failed TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 The IBM Tivoli Network Manager 3.9 - Cognos reports will not run and return an error message that 
login connection to database failed because of locale mismatch. 

SYMPTOM
The Network Manager Cognos based reports will not connect to the Informix database. 

Error message:
QE-DEF-0325 The logon failed for the following reason: RQP-DEF-0068 
Unable to connect to at least one database during a multi-database attach to 1 database(s) in: PARAMETERS UDA-SQL-0031 Unable to access the "PARAMETERS" database.UDA-SQL-0107 
A general exception has occurred during the operation "attach".[unixODBC][Informix][Informix ODBC Driver][Informix]Database locale information mismatch. 
RSV-SRV-0042 Trace back:RSReportService.cpp(771): QFException: CCL_CAUGHT: 
RSReportService .......................... 

In this case it is the database locale setting that is causing the issue.


CAUSE
When the ITNM 3.9 GUI Component (which includes Web GUI and TCR) is installed on a separate server from the Informix (IDS) database server, and ITNM is installed as a non-root user, you must install IDS IConnect to allow access to the remote Informix database. 


As documented in the ITNM 3.9 Installation guide at::
Postinstallation tasks [http://www.ibm.com/support/knowledgecenter/en/SSSHRK_3.9.0/com.ibm.networkmanagerip.doc_3.9/itnm/ip/wip/install/task/nmip_ins_postinstallationtaskssummary.html] 

 * If you have a non-root installation and are installing IDS on a different server than where the GUI components are installed, you must install the IDS IConnect software as root on the GUI components server to use CognosÂ® reports. Perform the step described in Configuring remote IDS for reporting [http://www.ibm.com/support/knowledgecenter/en/SSSHRK_3.9.0/com.ibm.networkmanagerip.doc_3.9/itnm/ip/wip/install/task/nmip_con_configuringremoteids.html]


When either a launchpad.sh or the command line interface is used, per these instructions: 

This is the command line instructions: 
Install IDS IConnect using the command line interface 
1. Go to the directory where you extracted the Network Manager installation package. 
2. Change to the following location: /Informix/ICONNECT/UNIX 
3. Run the installconn command as follows: ./installconn -javahome none 
4. Follow the prompts for a typical installation into NCHOME/platform/$ARCH/informix. 

However, this process does not properly set the DB_LOCALE environment variable on the ITNM 3.9 GUI server. 

ENVIRONMENT
The TIP, TCR w(Cognos) components are on a different server that the Informix database being used by ITNM. 

Server A: ITNM 3.9 GUI, TIP 2.1, TCR 2.1, Cognos 8.4.1, and WebGUI 7.3.1
Server B: ITNM 3.9 core with Informix database


DIAGNOSING THE PROBLEM
Using the Cognos Administrator - "Test Connection" functions, returns the message: 

Test the Connection: 
QE-DEF-0285 The logon failed
QE-DEF-0325 The logon failed for the following reason:
RQP-DEF-0068 unable to connect to at least one database during a multi-database attach to 1 database(s) in testDataSourceConnection
UDA-SQL-0031 unable to access the "testDataSourceConnection" database
UDA-SQL-0107 a general exception has occurred during the operation "attach" 
unixODBC [Informix] [Informix ODBC Driver] [Informix] [Informix] Database locale information mismatch. 


RESOLVING THE PROBLEM
ITNM core server: 

On the ITNM core server where Informix is installed. 

Check the setting for the DB_LOCALE= 

There is no need to change the Informix setup.ksh script, only being listed to validate what needs to be set on ITNM GUI server. 

The following is from a ITNM Informix Linux server, 

# cat /opt/IBM/tivoli/netcool/platform/linux2x86/informix/setup.ksh 

INFORMIXDIR=/opt/IBM/tivoli/netcool/platform/linux2x86/informix
export INFORMIXDIR
PATH=$PATH:$INFORMIXDIR/bin
export PATH
INFORMIXSERVER=ITNM
export INFORMIXSERVER
ONCONFIG=onconfig.ITNM
export ONCONFIG
INFORMIXSQLHOSTS=/opt/IBM/tivoli/netcool/platform/linux2x86/informix/etc/sqlhosts.ITNM
export INFORMIXSQLHOSTS
GL_USEGLU=1
export GL_USEGLU
DB_LOCALE=en_us.utf8
export DB_LOCALE


ITNM GUI server: 

On the ITNM TIP/TCR/WebGUI server need to update the following file: 

# vi /opt/IBM/tivoli/netcool/etc/setupTCR.sh

At the end of this file, add these two line. 

 * 
 * 
 * 

Once you have the file updated, the following actions need to be performed 
1. As the user running the TIP/WebGUI server 

2. Source the ITNM and TCR environment files. 

 * 
 * 
 * 


3. "itnm_stop tip", ensure that both TIP and TCR processes exit 4. Check that the DB_LOCALE environment is now set to en_us.utf8 with the "env" command or "echo $DB_LOCALE" 

5. "itnm_start tip", to restart both TIP and TCR servers. 

6. Now test the Cognos connectivity using the Cognos "Test the connection" function for each datasource: 

 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 

You should now be able to connect to the Informix database. 7. Test a number of the Network Manager - Cognos reports. 

 

Note: Once the updates for DB_LOCALE are in place, tested and verified to work, the need to source 
". /opt/IBM/tivoli/netcool/etc/setupTCR.sh" is not longer required. The tip_server.sh script will source the environment when "itnm_start tip" is used.