Title: IBM Adding member to a group results in delay followed by blank page. - United States

Text:
maximumSearchResults; EJPAL4000E; EJPAL1010W; Manage Users and Groups; portlet; Add Member; add; adding; added; member; members; delay; blank page; errors; wmm.xml file; wmm.xml; 200; trace; trace.log; tracing; showAllAddMembers TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 In the IBM WebSphere Portal --> Manage Users and Groups portlet, clicking Add Member results in a delay followed by a blank page. 

CAUSE

This problem occurs when the Manage Users and Groups portlet builds too long a list of users from which the administrator can choose the new member. In WebSphere Portal 6.0 this situation can occur if WebSphere Member Manager's (WMM's) maximumSearchResults setting is too high.


DIAGNOSING THE PROBLEM
 

For WebSphere Portal 6.0: 

Check the wmm.xml file for the maximumSearchResults parameter (default setting is 200): 

 * 
 * <wmm name="member manager"
 * 
 * ...
 * 
 * maximumSearchResults="200"
 * 

If this value is significantly more than 200, performance problems can lead to failures, To see why, recreate the problem with the following traces set:  * 
 * com.ibm.wps.portlets.manageprincipals.*=all:
 * 
 * com.ibm.wps.portlets.manageprincipals.util.*=all:
 * 
 * com.ibm.wps.portlets.manageprincipals.render.*=all:
 * 
 * com.ibm.wps.portlets.admin.*=all:com.ibm.wps.puma.*=all:
 * 
 * com.ibm.wps.services.puma.*=all:com.ibm.wps.commands.puma.*=all:
 * 
 * com.ibm.wps.ac.*=all:com.ibm.wps.command.ac.*=all:com.ibm.wps.ac.impl.*=all:
 * 
 * com.ibm.wps.engine.*=all:com.ibm.websphere.wmm.*=all:com.ibm.ws.wmm.*=all:
 * 
 * WSMM=all


The trace.log will show the following: 

Action to add a member to a group:  * 
 * ... LegacyActionD 2 com.ibm.wps.engine.commands.LegacyActionDispatcher processPortletAction() PortletWindow: "Control (Manage Users and Groups, ... ActionReference: "sa.manageprincipals.AddMember" ...
 * 
 * ...
 * 
 * ... ManagePrincip < com.ibm.wps.portlets.manageprincipals.ManagePrincipals actionPerformed
 * 
 * RETURN selectedAction=manageprincipals.AddMember
 * 
 * ...
 * 
 * ... GeneralUtil < com.ibm.wps.portlets.manageprincipals.util.GeneralUtil getActor RETURN 
 * 
 * ... 
 * 

A list is built for selecting which member to add to the group:  * 
 * ... WMM Trace Log < com.ibm.ws.wmm.ldap.LdapBeanImpl ExternalMemberSet search(...
 * 
 * ... 
 * 

A long list is returned here with entries similar to:  * 
 * {cn=cn:user1, uid=uid:user1}, memberType:0,memberIdentifier:[CN=user1,dc=yourcompany,dc=com / 5374399f11309e458ba61dc05c0526a2],parentMemberIdentifier:null {cn=cn:user1, uid=uid:user1}]
 * 

Then processing occurs for each domain name in the list (can take a long time and may cause the page request to timeout in the browser):  * 
 * ... PumaDNHelper > com.ibm.wps.puma.util.PumaDNHelper normalizeDistinguishedName ENTRY
 * 
 * CN=user1
 * ,dc=yourcompany,dc=com

RESOLVING THE PROBLEM
 

There are two ways to resolve this problem in WebSphere Portal 6.0:

Option 1 

 * 
 * 
 * 
 * 
 * EJPAL4000E: Too many matches found ... 
   
 * 


Option 2  * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * 
 * EJPAL1010W: Sorry, no user or user group was found! 
 * 
 * 
 * 
 * 

For WebSphere Portal 6.1, use Option 2 to resolve the problem.