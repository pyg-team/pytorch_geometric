Title: IBM DataCap vscan task fails intermittently with file IO error - United States

Text:
 TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 The issue is seen when Rulerunner running the vscan task is processing a large number of documents, typically single page TIF files.

The documents are renamed with a ".tmp" file extension during processing but then either the .tmp or .tif file required by Rulerunner can be "locked" at a time when access is required. If this error condition occurs, the batch will fail with an "Error #:70 Decription: Permission denied" file IO error in the Rulerunner logs.


SYMPTOM
 

The batch never completes and one of the following errors is seen in the log files:

11:05:54.540 File 'C:\Datacap\APT\Images\Input\APT001.tif'
is locked and will be ignored. Error #:70 Decription: Permission denied
10:44:43.255 (0) t:1CE8 p:293F908 Failed to Move Temp file
'\\server\APT\20160801\APT001.tmp' to
'\\server\APT\20160801\APT.tif '. Error #:70 Decription: Permission denied An error like this is also seen in the Windows Event logs:

[/support/docview.wss?uid=swg21988830&aid=1] [/support/docview.wss?uid=swg21988830&aid=1]



CAUSE
Under load, the vscan task can end up in a hung state when it tries to perform standard file IO processes on a "locked" file. The issue is intermittent and can occur at any time since its occurrence relies on the specific timing of the file IO actions being carried out at the time.


DIAGNOSING THE PROBLEM
Review the Rulerunner logs from a batch where the issue is seen and search for text:

Error #:70 Decription 

(Note: the incorrect spelling of "Description" above is not a typographical error in this article but what is displayed in the log file. The text is a direct extraction from a log file where the problem occurred and therefore is the exact error syntax which will be seen in the logs.)




RESOLVING THE PROBLEM
 

Use mvscan actions instead of the vscan actions to create batches from large numbers of files stored on local disk like this.

The mvscan actions are much better suited to handling large numbers of files stored in the input folder and the associated IO file handling that is required to process them all through the batch. RELATED INFORMATION
 mvscan actions summary [https://www.ibm.com/support/knowledgecenter/SSZRWV_9.0.0/com.ibm.dc.develop.doc/dcadg811.htm]





Cross reference information Segment Product Component Platform Version Edition Enterprise Content Management Datacap Enterprise Content Management Datacap Taskmaster Capture