Title: IBM In a cluster, ISIM requests only work from one node - United States

Text:
cluster alternating single hosts messaging TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 With one node running, everything is fine. When all nodes in cluster are running, only one can process requests. Jobs on the other nodes remain Pending or Not Started. 

SYMPTOM
The problem is not specific to any one node. Individually, if any single node is the only one running, everything works fine. When all nodes in the cluster are running, only one node can successfully process requests.


CAUSE
In a cluster, ISIM uses two sets of messaging buses: one local to each application server, and one shared set of message queues. The shared queues will run on the first messaging server to start in a cluster. This particular problem occurs when the hosts file for the operating system is misconfigured so that each node name resolves to the same IP address. This is typically a non-routable localhost address in the form 127.x.x.x.

DIAGNOSING THE PROBLEM
Check the SystemOut.log for each messaging server in the cluster; these are the servers in the "ISIM Messaging" cluster. The working node will have an entry similar to: 

[4/25/11 14:42:22:645 EDT] 0000001d SibMessage I [itim_bus:ITIM_Message_Cluster.000-itim_bus] CWSIS1537I: The messaging engine, ME_UUID=4C0CC41D775F1B11, INC_UUID=3CD73CD78DF82B16, has acquired an exclusive lock on the data store.

The non-working nodes will have entries similar to:

[4/25/11 14:53:31:832 EDT] 0000001e SibMessage I [itim_bus:ITIM_Message_Cluster.000-itim_bus] CWSIS1593I: The messaging engine, ME_UUID=4C0CC41D775F1B11, INC_UUID=490749078E024FA6, has failed to gain an initial lock on the data store.

and

[4/25/11 14:57:17:074 EDT] 0000001e SibMessage W [itim_bus:ITIM_Application_Cluster.001-itim_bus] CWSIP0381W: No Response received from messaging engine ITIM_Message_Cluster.000-itim_bus for subscription request message.

There are other reasons a messaging engine might not be able to obtain an exclusive lock, so it's important to see BOTH of these messages in the non-working server for this technote to apply.


RESOLVING THE PROBLEM
This could occur with DNS providing name resolution, but typically is the result of a misconfigured hosts file. On Windows, this file can be found as %WINDOWS_DIR%\system32\drivers\etc\hosts. On UNIX, the file is /etc/hosts. The hostname of the machine MUST point to the network IP address, not a localhost IP like 127.0.0.1 or 127.0.0.2. Updating the hosts file to use the correct IP address and restarting the WebSphere processes will resolve the issue.

 

PRODUCT ALIAS/SYNONYM
 itim tim enrole isim sim