Title: IBM IV79151: ORACLE DATABASE EXTENDED AGENT COLLECTOR CRASHES WHEN SENDING AGENT EVENT AFTER UPGRADE - United States

Text:
  FIXES ARE AVAILABLE
ITCAM Extended Agent for Oracle Database: 6.3.1.2-TIV-ITM_KRZ-IF0003 [http://www-01.ibm.com/support/docview.wss?uid=swg24042039]
ITCAM Extended Agent for Oracle Database: 6.3.1.2-TIV-ITM_KRZ-IF0004 [http://www-01.ibm.com/support/docview.wss?uid=swg24043445]
ITCAM Extended Agent for Oracle Database: 6.3.1.2-TIV-ITM_KRZ-IF0005 [http://www-01.ibm.com/support/docview.wss?uid=swg24044064]
ITCAM Extended Agent for Oracle Database: 6.3.1.2-TIV-ITM_KRZ-IF0006 [http://www-01.ibm.com/support/docview.wss?uid=swg24044606]


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  Environment: Extended Oracle Database agent 6.31 FP2 and 6.31
   FP2 IF02
   OS: Windows, Linux
   
   Problem Description:
   After upgrade Oracle Database Extended Agent from lower version
   to 6.31 FP2 or 6.31 FP2 IF02, newly added configuration
   variables will not be added into already configured agent
   instances if you do not re-configure agent instances, and agent
   will crash when processing agent event.
   
   
   Detailed Recreation Procedure:
   1) Install Oracle Database Extended Agent with version which is
   lower than 6.31 FP2, configure agent instance, and start it.
   2) Upgrade Oracle Database Extended Agent to 6.31 FP2 or 6.31
   FP2 IF02. Do not re-configure the agent instance, and check the
   agent instance configuration file - the configuration variable
   KRZ_EVENT_LEVEL is not here now.
   3) Create agent event, for example, shut down the monitoring
   Oracle database.
   4) Agent collector program - krzclient crashes. The agent
   disconnects from monitoring Oracle database, and the
   corresponding agent node is offline.
   
   
    
   
   

LOCAL FIX
 *  There is a workaround for this issue:
   Add KRZ_EVENT_LEVEL into <CANDLEHOME>/config/rz_<inst>.config
   under "Agent Specific Environment Variables" section as the
   following, and restart the agent instance.
   
   
   #
   ================================================================
   # Agent Specific Environment Variables
   #
   ================================================================
   KRZ_EVENT_LEVEL='WARN'
   
   
    
   
   

PROBLEM SUMMARY
 *  After upgrading the Oracle Database Extended Agent to 6.3.1 Fix
   Pack 2 from a lower version, configuration variables that were
   added in version 6.3.1 Fix Pack 2 are not added to existing
   agent instances unless the agent instances are re-configured.
   The agent's data collector will crash when processing an agent
   event.
   
   
    
   
   

PROBLEM CONCLUSION
 *  The fix for this APAR is included in the following maintenance
   vehicle:
   
      | interim fix | 6.3.1.2-TIV-ITM_KRZ-IF0003
   
   Note: Search the IBM technical support web site for maintenance
   package availability.
   
   
    
   
   

TEMPORARY FIX
 *  Add KRZ_EVENT_LEVEL into <CANDLEHOME>/config/rz_<inst>.config
   under "Agent Specific Environment Variables" section as the
   following, and restart the agent instance.
   
   
   #
   ================================================================
   # Agent Specific Environment Variables
   #
   ================================================================
   KRZ_EVENT_LEVEL='WARN'
   
   
    
   
   

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   IV79151
   
   
 * REPORTED COMPONENT NAME
   ITCAM EXT AGNT
   
   
 * REPORTED COMPONENT ID
   5724V09OR
   
   
 * REPORTED RELEASE
   631
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt / Xsystem
   
   
 * SUBMITTED DATE
   2015-11-23
   
   
 * CLOSED DATE
   2017-04-07
   
   
 * LAST MODIFIED DATE
   2017-04-07
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   ITCAM EXT AGNT
   
   
 * FIXED COMPONENT ID
   5724V09OR
   
   

APPLICABLE COMPONENT LEVELS
 * R631 PSY
   UP