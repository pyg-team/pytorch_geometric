Title: IBM PK92047; extension registry is not destroying classloader - United States

Text:
PK92047; PK92047; PK92047 DOWNLOADABLE FILES

ABSTRACT
 The extension registry does not destroy classloaders for uninstalled plugins 

DOWNLOAD DESCRIPTION
PK92047 resolves the following problem:

ERROR DESCRIPTION: 
The Plugin is being initially loaded by the Portal core and later again by installing the Test Portlet. 

The test portlet is uninstalled, but its classloader not destroyed, since Portal is still holding on to the plugin. Next time we need the service again we run into the following NullPointerException. 

java.lang.NullPointerException 
at 
com.ibm.ws.classloader.CompoundClassLoader.libraryClassLoadersFi
ndClass(CompoundClassLoader.java:658) 
at 
com.ibm.ws.classloader.CompoundClassLoader.loadClass(CompoundCla
ssLoader.java:496) 
at java.lang.ClassLoader.loadClass(ClassLoader.java:609) 
at 
com.ibm.wkplc.extensionregistry.ExtensionClassLoader.loadClass(E
xtensionClassLoader.java:69) 
at 
com.ibm.wkplc.extensionregistry.ConfigurationElement.getExecutab
le(ConfigurationElement.java:174) 
at 
com.ibm.wkplc.extensionregistry.ConfigurationElement.createExecu
tableExtension(ConfigurationElement.java:120) 
at 
com.ibm.portal.resolver.helper.eclipse.Platform.createInstance(P
latform.java:172) 
at 
com.ibm.portal.resolver.helper.eclipse.Platform.createInstance(P
latform.java:124) 
at 
com.ibm.wps.resolver.portal.ResolvedPreprocessor.<init>(Resolved
Preprocessor.java:239) 

LOCAL FIX: 
None 

PROBLEM SUMMARY

USERS AFFECTED:
All users of IBM WebSphere Application Server V6.1 and V7.0

PROBLEM DESCRIPTION:
The extension registry does not destroy classloaders for uninstalled plugins

RECOMMENDATION:
None

The extension registry only holds on to the most recent classloader from a plugin. If a plugin is uninstalled, it's classloader may not be removed if it is associated with other plugins. This can lead to an invalid classloader.

PROBLEM CONCLUSION: 
A code change was made which allows the extension registry to store a list of classloaders for each plugin. This way, when a plugin is uninstalled, the classloader will be removed. 

The fix for this APAR is currently targeted for inclusion in fix packs 7.0.0.7 and 6.1.0.29 Please refer to the Recommended Updates page for delivery information: 
http://www.ibm.com/support/docview.wss?uid=swg27004980 [http://www.ibm.com/support/docview.wss?uid=swg27004980]




Change History 

Last Updated: 26 May 2010 

 * 26 May 2010: Added links for 6.1.0.19 and 6.1.0.21 

PREREQUISITES
Download the UpdateInstaller below to install this fix.

URL LANGUAGE SIZE(Bytes) UpdateInstaller [http://www.ibm.com/support/docview.wss?rs=180&uid=swg21205991] US English 7250000 
INSTALLATION INSTRUCTIONS
Review the readme.txt for detailed installation instructions.

URL LANGUAGE SIZE(Bytes) Readme [ftp://public.dhe.ibm.com/software/websphere/appserv/support/fixes/PK92047/readme.txt] US English 9508 
DOWNLOAD PACKAGE



Download RELEASE DATE LANGUAGE SIZE(Bytes) Download Options 
What is Fix Central(FC)? [https://www.ibm.com/support/fixcentral/help?page=swfaqs] 
What is DD? [http://www6.software.ibm.com/dldirector/doc/DDfaq_en.html] 6.1.0.27-WS-WAS-IFPK92047 11/5/2009 US English 34420 FC [http://www.ibm.com/support/fixcentral/quickorder?fixids=6.1.0.27-WS-WAS-IFPK92047&product=ibm%2FWebSphere%2FWebSphere%20Application%20Server&source=dbluesearch] FTP [ftp://public.dhe.ibm.com/software/websphere/appserv/support/fixes/PK92047/6.1.0.27-WS-WAS-IFPK92047.pak] DD 6.1.0.19-WS-WAS-IFPK92047 4/23/2010 US English 34425 FC [http://www.ibm.com/support/fixcentral/quickorder?fixids=6.1.0.19-WS-WAS-IFPK92047&product=ibm%2FWebSphere%2FWebSphere%20Application%20Server&source=dbluesearch] FTP [ftp://public.dhe.ibm.com/software/websphere/appserv/support/fixes/PK92047/6.1.0.19-WS-WAS-IFPK92047.pak] DD 6.1.0.21-WS-WAS-IFPK92047 4/23/2010 US English 34420 FC [http://www.ibm.com/support/fixcentral/quickorder?fixids=6.1.0.21-WS-WAS-IFPK92047&product=ibm%2FWebSphere%2FWebSphere%20Application%20Server&source=dbluesearch] FTP [ftp://public.dhe.ibm.com/software/websphere/appserv/support/fixes/PK92047/6.1.0.21-WS-WAS-IFPK92047.pak] DD 
TECHNICAL SUPPORT
 Contact IBM Support using SR (http://www.ibm.com/software/support/probsub.html [http://www.ibm.com/software/support/probsub.html]), visit the WebSphere Application Server Support Web site (http://www.ibm.com/support/entry/portal/Overview/Software/WebSphere/WebSphere_Application_Server [http://www.ibm.com/support/entry/portal/Overview/Software/WebSphere/WebSphere_Application_Server]), or contact 1-800-IBM-SERV (U.S. only). 

 [/support/docview.wss?uid=swg24025078&aid=1]Problems (APARS) fixed [/support/docview.wss?uid=swg24025078&aid=2]Problems (APARS) fixed
PK92047