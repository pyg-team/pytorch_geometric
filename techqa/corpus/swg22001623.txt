Title: IBM MS SQL agent : Disabling data collection of any attribute group - United States

Text:
KOQ; OQ; MSSQLSERVER TECHNOTE (FAQ)

QUESTION
 How to disable data collection of the attribute groups for Microsoft SQL Server agent? 

ANSWER
You can disable data collection of one or more attribute groups when you want to troubleshoot an issue or you do not want to monitor some of the attribute groups. To disable data collection, you can use one of the following methods: 

A. Using the Manage Tivoli Enterprise Monitoring Services (MTEMS) or Application Performance Management (APM) window 

B, Using the KOQCtlEditUtility utility 

 

Note: The KOQCtlEditUtility is available only for ITM-based versions of the Microsoft SQL Server agent version 06.31.00.00 and later. 

 


A. Disabling data collection by using the MTEMS or APM window 

1. Open the Manage Tivoli Enterprise Monitoring Services window for IBM Tivoli Monitoring (ITM) agent or IBM Performance Management window for APM agent. 

2. In the MTEMS or APM window, stop the agent and double-click the agent template row. The agent configuration panel opens. 

3. In the agent configuration panel, select the agent instance and click Edit to open the Database Server Properties panel. 

4. In the Extended Parms field, enter the name of the cursor for which you want to disable the data collection. 

Note: To know the cursor name for the corresponding attribute group, see Attribute_cursor_List.xlsx attached with this tech-note. Also, to disable multiple cursors, separate the cursor names with a comma “,”. 

5. To save the settings, click OK. 

6. Start the agent. 


Remember: 

- Until version 06.31.13.00, you can disable only table details and database details attribute groups through the MTEMS or APM window. From version 06.31.13.00 and onwards, this feature is extended for all the attribute groups. 

- If you use MTEMS or APM window to disable the table details attribute group, then the demand-based collection is still served. To completely disable this attribute group, use both the MTEMS or APM window and the KOQCtlEditUtility utility for versions earlier than 06.31.13.00. Form 06.31.13.00 onwards, use only MTEMS or APM window to disable both, thread-based and demand-based collections. 

 

B. Disabling data collection by using the KOQCtlEditUtility utility 

1. Double-click the KOQCtlEditUtility.exe file that is available at one of the following locations: 

· For 64-bit agent, go to the candle_home\TMAITM6_x64 directory. 

· For 32-bit agent, go to the candle_home\TMAITM6 directory. 

The “SQL Agent Trace Configuration utility” window opens. 


2. In the Koqcoll tab, to disable the attribute group, select the corresponding cursor from the Enabled list and click Disable. 

3. To save the settings, click Apply and then restart the agent. 

 

 

Important: 

- You can disable only those cursors that begin with KOQ except for the following cursors: KOQSRVCD, KOQSRVD, KOQSRVS, and KOQV. 

- To restore the changes that are done by KOQCtlEditUtility, click Restore, and then start the agent. 

- Some base cursors depend on one or more supporting pre-cursors for data collection. If you disable the pre-cursors without disabling the base cursors, the data collection process might fail during initialization. To avoid this situation, disable the base cursor and the supporting pre-cursor. To know about the base cursors and their corresponding pre-cursors, see Cursor_dependency_list.xlsx attached with this tech-note. 



Attribute_Cursor_List.xlsx [/support/docview.wss?uid=swg22001623&aid=2]Attribute_Cursor_List.xlsx [/support/docview.wss?uid=swg22001623&aid=1] 

cursor_dependency_list.xlsx [/support/docview.wss?uid=swg22001623&aid=4]cursor_dependency_list.xlsx [/support/docview.wss?uid=swg22001623&aid=3]

PRODUCT ALIAS/SYNONYM
 SQL Agt