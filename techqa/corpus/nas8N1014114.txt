Title: IBM Using the EDTRBDAP Command to Rebuild Invalid Access Paths - United States

Text:
 TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 The EDTRBDAP command is used to rebuild invalid access paths on the system. This is especially true after an abnormal system end. 

RESOLVING THE PROBLEM
 

All access paths over physical files that were currently in use during an abnormal system end will need to be recovered. If the access path was journaled the system can recover from the journal. If it is not journaled then the access path will be marked invalid and must be completely rebuilt When this rebuild will happen is depended on the file attributes. 

Issue DSPFD command for your files, and look for Access Path Recovery. 

A value of *IPL will rebuild during the IPL.
A value of *AFTIPL will rebuild after the IPL.
A value of *NO will require a user to open the file directly to force the rebuild.

When an access path is marked invalid users may experience slower performance than normal or errors with not being able to validate or use an access path.

Using the EDTRBDAP Command

To check for access paths that are invalid, run the EDTRBDAP command. The command has no parameters. Typing the command and pressing the Enter key will not start any work on the system. You will see a screen of all the access paths that are invalid on the system. If all access paths on the system are valid, you will see "No Access Paths to Display." The access paths that have the sequence of *OPN means that the access path will be rebuilt when the file is next opened by a user. 

Based on what you know about your data, you may decide some files are more important than others and need to have their access paths rebuilt first. Number 1 is the highest priority, and number 99 is the lowest priority. Type the desired numeric value under Sequence (in place of where it might say *OPN). You can assign a numeric value to just one file or several files at a time. When you press the Enter key, the rebuild starts on the files that have a number. You can also give all files the same number which allows the system to start at the top of the list and rebuild to the bottom of the list. To do this, assign a number to one file and then press F13 (shift + F1) to assign that same number to all the files listed. 

The number of access paths rebuilt is based on the number of QDBSRV jobs. The number of QDBSRV jobs is determined at the time of IPL or IASP vary on. If you have Symmetric Multi Processing installed and if you have extra CPU you wish to give to access path rebuilds, you can use the following command: CHGQRYA JOB(123456/QSYS/QDBSRV04) DEGREE(*MAX) 

The above option is for use only when you want to give the highest priority to access path rebuild. Use the DEGREE(*MAX) parameter value only if you have plenty of CPU to spare and want the access path rebuild to take that CPU. 

For more suggestions on speeding up access path refer to document - N1013641 [http://www.ibm.com/support/docview.wss?uid=nas8N1013641].






Cross reference information Segment Product Component Platform Version Edition Operating System IBM i 7.2 Operating System IBM i 7.1 Operating System IBM i 6.1 
HISTORICAL NUMBER
 463676089