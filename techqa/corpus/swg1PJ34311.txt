Title: IBM PJ34311: SLOC CONVERSION SCRIPT NEEDS UPDATES. - United States

Text:
 SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  APAR Type      :   C
   CMVC defect    :
   Bad APAR       :
   PE Type        :
   Functional Area:   51B
   Segment Docname:   CONVERT_USRTPFCNTL.SH
   Symptom keyword:   sloc      conversionscript
   4.1 APAR Number:
   DESCRIPTION:
   I found some problems on the sloc conversion script which
   dropped some of the input lines. There are a couple of
   assumptions in the script with input parsing which needs to be
   fixed.
   1) SPARE entries
   The following code assumes to drop a line if somewhere the word
   SPARE is found
   grep -v -e "^[\*]" -e SPARE $USRTPFFILE |
   I changed to make sure that SPARE start at begin of line.
   grep -v -e "^[\*]" -e ^SPARE $USRTPFFILE |
   2) Multi Line Items with continuation are not merged correctly
   The following line assumes the end marker for a multile line is
   a ","
      if [[ $a != *"," ]] ; then
   I changed to the following statement, but attention, my solution
   is not any better, i just assume it should end with " X"
     if [[ $a != *"," && $line != *" X" ]] ; then
   3) MODE= parameter anywhere of the input line
   I believe that this statement should be dropped if it stands as
   a single line item, if it is as part of a program entry it
   should be ignored.
   if [[ $usrtpfline = *MODE=* || $usrtpfline = *TYPE=POOL* ]] ;
   then
   My solution:
   if [[ $usrtpfline = ^MODE=* || $usrtpfline = *TYPE=POOL* ]] ;
   then
   4) STUB should be the default
         TPF_GENERATE_STUB=NOSTUB
   Should be
         TPF_GENERATE_STUB=STUB
   
   
    
   
   

LOCAL FIX
 *  na
   
   
    
   
   

PROBLEM SUMMARY
 *  APAR NUMBER:  PJ34311
   PRODUCT:  z/TPF
   FUNCTIONAL AREA:  BUILD TOOLS
   SHIPPED IN PUT:  5
   
   ABSTRACT:
   convert_usrtpf2cntl script updates
   
   PACKAGE CONTENTS:
   Source Segments:
   (C) base/util/migrationtools/convert_usrtpf2cntl.sh
   (C) base/util/migrationtools/convert_usrtpf2cntl.README
   
   Object Only Binaries:
   None.
   
   Configuration Independent Binaries:
   None.
   
   Support Files:
   None.
   
   OTHER BINARIES TO BUILD: NO
   None.
   
   PREREQUISITE APARS IN APPLICATION ORDER:
   
   base/util/migrationtools/convert_usrtpf2cntl.sh
   PJ30525 [http://www-01.ibm.com/support/docview.wss?uid=swg1PJ30525](1) PJ32180 [http://www-01.ibm.com/support/docview.wss?uid=swg1PJ32180](4) PJ32317 [http://www-01.ibm.com/support/docview.wss?uid=swg1PJ32317](5)
   
   base/util/migrationtools/convert_usrtpf2cntl.README
   PJ32180 [http://www-01.ibm.com/support/docview.wss?uid=swg1PJ32180](4)
   
   
   COMMENTS:
   The following errors were found in the convert_usrtpf2cntl
   utility:
   1. The utility does not process lines that include the string
   SPARE or MODE= anywhere on the line. This results in some lines
   that should be processed being omitted. Only lines that begin
   with those strings should be omitted.
   2. Multi-line entries are not processed correctly. The script
   looks for lines that end in a comma to determine whether or not
   an entry is continued on the next line. Instead, it should look
   for lines that have a non-blank character in column 72.
   
   In addition, the default value set for the GENERATE STUB column
   in the control file is set to NOSTUB. This value can be
   customized in the script, however it is requested that the
   default be changed to STUB.
   
   
    
   
   

PROBLEM CONCLUSION
 *  SOLUTION:
   The convert_usrtpf2cntl has been updated as follows:
   1. Lines that begin with the string SPARE or MODE= are omitted.
   2. A non-blank character in column 72 is now used to determine
   if an entry is continued on to the next line.
   3. The default GENERATE STUB column value is now set to STUB.
   
   COREQS: NO
   None.
   
   MIGRATION CONSIDERATIONS: NO
   None.
   
   BUILD COMMANDS AND INSTRUCTIONS: NO
   None.
   
   UPDATED INFORMATION UNITS: NO
   None.
   
   See your IBM representative if you need additional information.
   
   DOWNLOAD INSTRUCTIONS:
   http://www.ibm.com/software/htp/tpf/pages/maint.htm [http://www.ibm.com/software/htp/tpf/pages/maint.htm]
   
   APAR URL:
   http://www.ibm.com/software/htp/tpf/ztpfmaint/put5/PJ34311.htm [http://www.ibm.com/software/htp/tpf/ztpfmaint/put5/PJ34311.htm]
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   PJ34311
   
   
 * REPORTED COMPONENT NAME
   Z/TPF
   
   
 * REPORTED COMPONENT ID
   5748T1501
   
   
 * REPORTED RELEASE
   110
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt / Xsystem
   
   
 * SUBMITTED DATE
   2008-08-13
   
   
 * CLOSED DATE
   2008-08-26
   
   
 * LAST MODIFIED DATE
   2008-08-26
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   Z/TPF
   
   
 * FIXED COMPONENT ID
   5748T1501
   
   

APPLICABLE COMPONENT LEVELS
 * R110 PSY
   UP