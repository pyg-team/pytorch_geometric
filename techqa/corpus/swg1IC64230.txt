Title: IBM IC64230: Service class or governor agent priority changes does not take  effect on Solaris or AIX without proper authority - United States

Text:
z/os SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS USER ERROR.
    
   
   

ERROR DESCRIPTION
 *  Users may observe the following symptoms on Solaris or AIX:
   - Service class agent priority does not take effect on agents
   running in the service class.
   - Priority of agents in a service class can only be lowered but
   not raised using service class agent priority
   - Governor can only lowered but not raised priority of agents
   working for an application.
   - Priority of agents continue to lower for databases with
   service class agent priority set or with governor in use.
   
   
    
   
   

LOCAL FIX
 *  On AIX operating systems, the instance owner must have
   CAP_NUMA_ATTACH and CAP_PROPAGATE capabilities to set a higher
   relative priority for agents.  To grant these capabilities,
   logon as root and run the following command:
   
   chuser capabilities=CAP_NUMA_ATTACH,CAP_PROPAGATE
   
   On Solaris 10 or higher, the instance owner must have the
   proc_priocntl privilege to set a higher relative priority for
   agents.  To grant this privilege, logon as root and run the
   usermod command.
   
   Example:
   
   usermod -K defaultpri=basic,proc_priocntl db2user
   
   In this example, proc_priocntl is added to the default
   privilege set of user db2user.
   
   Moreover, when DB2 is running in non-global zone of Solaris,
   proc_priocntl privilege must be added to the zone's limit
   privilege set. To grant this privilege to the zone, logon as
   root and run the zonecfg command.
   
   Example:
   
   global# zonecfg -z db2zone
   zonecfg:db2zone> set limitpriv="default,proc_priocntl"
   
   
                In
   this example, proc_priocntl is added to the limit privilege
   set
   of zone db2zone.
   
   On Solaris 9, there is no facility for DB2 to raise the
   
   relative priority of agents.  This is due to a limitation in a
   Solaris API, more specifically priocntl.  Upgrade to Solaris 10
   or higher
   to control agent priority using service class agent priority or
   governor.  Should you need to stay in Solaris 9, disable
   service class agent priority and the ACTION NICE clause of
   governor.
   
   
    
   
   

PROBLEM SUMMARY

PROBLEM CONCLUSION

TEMPORARY FIX

COMMENTS
 *  Follow the instructions in the recommendation section to rectify
   the problem.
   
   
    
   
   

APAR INFORMATION
 * APAR NUMBER
   IC64230
   
   
 * REPORTED COMPONENT NAME
   DB2 FOR LUW
   
   
 * REPORTED COMPONENT ID
   DB2FORLUW
   
   
 * REPORTED RELEASE
   970
   
   
 * STATUS
   CLOSED USE
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2009-10-28
   
   
 * CLOSED DATE
   2010-05-13
   
   
 * LAST MODIFIED DATE
   2010-05-13
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION

APPLICABLE COMPONENT LEVELS