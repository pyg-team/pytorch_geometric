Title: IBM IZ95428: KRZGRANT.SQL RETURNS ORA-01722 ERROR IN AN ORACLE ENVIRONMENT USING A NON-STANDARD NLS_NUMERIC_CHARACHTERS STRING - United States

Text:
  A FIX IS AVAILABLE
ITCAM Extended Agent for Oracle Database: 6.3.1-TIV-ITM_EXT-FP0002 [http://www-01.ibm.com/support/docview.wss?uid=swg24035571]


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 *  Approver: Hua Ming Zhong/China/IBM
   
   Compid:   5724B96SO
   
   Release:  6.31
   Environment: Extended Oracle Agent 6.31
   OS: ANY
   
   Problem Description:
   krzgrant.sql returns ORA-01722: invalid number error in an
   Oracle
   environment using a non-standard NLS_NUMERIC_CHARACHTERS string
   that changes the decimal marker to a non-dot, for example comma.
   Detailed Recreation Procedure:
   1) Log in to the Oracle database server.
   2) The following statement changes the decimal marker to a
   comma.
   alter session set NLS_NUMERIC_CHARACTERS=',.'
   3) Execute krzgrant.sql or run the statement directly:
   select
   to_number(substr(banner,instr(banner,'Release')+8,instr(banner,'
   .',1,2)-
   8-instr(banner,'Release')))*10 from V$VERSION where  banner like
   'Oracle%' and rownum < 2;
   4) Get the following error:
   ORA-01722: invalid number.
   
   
    
   
   

LOCAL FIX
 *  If the default for NLS_NUMERIC_CHARACTERSin the involved Oracle
   environment are causing the problem, change it temporary
   using command :
   alter session set NLS_NUMERIC_CHARACTERS='.,'
   and then execute the krzgrant.sql script.
   Once krzgrant.sql completed successfully, change the
   NLS_NUMERIC_CHARACTERS back to the previous value.
   
   
    
   
   

PROBLEM SUMMARY
 *  Checked in code into CMVC. The formal fix Extended Oracle Agent
   6.31 IF01 includes this fix, and will be delivered before middle
   of April 2011.
   
   
    
   
   

PROBLEM CONCLUSION
 *  Checked in code into CMVC. The formal fix Extended Oracle Agent
   6.31 IF01 includes this fix, and will be delivered before middle
   of April 2011.
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   IZ95428
   
   
 * REPORTED COMPONENT NAME
   ITCAM EXT AGNT
   
   
 * REPORTED COMPONENT ID
   5724V09OR
   
   
 * REPORTED RELEASE
   630
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2011-02-22
   
   
 * CLOSED DATE
   2011-03-13
   
   
 * LAST MODIFIED DATE
   2011-03-13
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   ITCAM EXT AGNT
   
   
 * FIXED COMPONENT ID
   5724V09OR
   
   

APPLICABLE COMPONENT LEVELS
 * R630 PSY
   UP