Title: IBM PI90367: SERVER ATTEMPTS TO RESOLVE DEFAULT PROJECT CONFIGURATION WHEN WORKING IN NON-ORIGINAL COMPONENTS (WI 119420) - United States

Text:
  A FIX IS AVAILABLE
Rational DOORS Next Generation 6.0.5 [http://www-01.ibm.com/support/docview.wss?uid=swg24044317]


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS UNREPRODUCIBLE IN NEXT RELEASE.
    
   
   

ERROR DESCRIPTION
 *  When a changeset in RM is linked to a CCM work item, the
   changeset editor attempts to load derived links and throws a Bad
   Request exception indicating issues when loading the type
   system. The RM changeset resides in a non-original component -
   the original component and default configuration from the same
   project have been archived - and the exception seems to be
   triggered because the server appears to be improperly attempting
   to resolve the default configuration for the type system
   request, when it should instead be attempting to resolve the
   initial configuration for the component in question.
   
   Steps to Reproduce:
   1.  Create a CM-enabled project in RM with two components
   2.  Archive the "original" component in the RM project
   3.  From the non-original RM component, create a changeset.
   4.  Use the link to work item option to create a link to a work
   item in CCM.
   5.  From the work item navigate to the changeset
   
   Expected Results:
   Changeset editor loads with no errors and displays applicable
   derived links
   
   Actual Results:
   Error 400 is thrown with the following content and stack trace
   in the logs:
   
   <html><head><title>Error 400: Bad
   Request</title></head><body><h1>Error 400: Bad
   Request</h1><p>Propagated
   exception; original message [InternalServerErrorException:
   Propagated exception; original message [NullPointerException
   : Submitted parameters must contain a Configuration URI.]] (More
   info found at entry [2a24858bdc6c378a
   ] in the RM application server log)<hr><i>Requirements
   Management/6.0.3</i></p></body></html>
   
   2017-09-19 10:29:44,797 [WebContainer : 1 @@ 10:29 <Mozilla/5.0
   (Windows NT 6.1; Win64; x64)> /rm/derivedlinks] ERROR
   ibm.rdm.fronting.server.services.RMRestServiceBase  - CRRRS1007E
   A problem occurred in the Requirements Management (RM) server:
   Entry [63844badf479e01e]
   com.google.common.util.concurrent.UncheckedExecutionException:
   java.lang.RuntimeException: Component Feature is enabled but a
   Project URI was submitted as the component URI. Could not safely
   compute the Component URI for the Type System as no local
   configuration was supplied and there may be >1 Component
   associated with the Project..
       at
   com.google.common.cache.LocalCache$Segment.get(LocalCache.java:2
   201)
       at
   com.google.common.cache.LocalCache.get(LocalCache.java:3934)
       at
   com.google.common.cache.LocalCache.getOrLoad(LocalCache.java:393
   8)
       at
   com.google.common.cache.LocalCache$LocalLoadingCache.get(LocalCa
   che.java:4821)
       at
   com.ibm.rdm.fronting.server.services.types.internal.ProjectTypeS
   ystemProvider.getProjectTypeSystem(ProjectTypeSystemProvider.jav
   a:403)
       at
   com.ibm.rdm.fronting.server.services.types.internal.ProjectTypeS
   ystemProvider.getProjectTypesystem(ProjectTypeSystemProvider.jav
   a:332)
       at
   com.ibm.rdm.fronting.server.services.types.internal.ProjectTypeS
   ystemProvider.getProjectTypesystem(ProjectTypeSystemProvider.jav
   a:302)
       at
   com.ibm.rdm.fronting.server.Activator.getProjectTypeSystem(Activ
   ator.java:507)
       at
   com.ibm.rdm.fronting.server.services.derivedlinks.internal.Deriv
   edLinksRestService.getLinkTypeUrl(DerivedLinksRestService.java:1
   506)
       at
   com.ibm.rdm.fronting.server.services.derivedlinks.internal.Deriv
   edLinksRestService.extractLinkInfo(DerivedLinksRestService.java:
   1463)
       at
   com.ibm.rdm.fronting.server.services.derivedlinks.internal.Deriv
   edLinksRestService.serializeResults(DerivedLinksRestService.java
   :1317)
       at
   com.ibm.rdm.fronting.server.services.derivedlinks.internal.Deriv
   edLinksRestService.doQuery(DerivedLinksRestService.java:482)
       at
   com.ibm.rdm.fronting.server.services.derivedlinks.internal.Deriv
   edLinksRestService.performDerivedLinksQuery(DerivedLinksRestServ
   ice.java:235)
       at
   com.ibm.rdm.fronting.server.services.derivedlinks.internal.Deriv
   edLinksRestService.doGet(DerivedLinksRestService.java:182)
       at
   com.ibm.rdm.fronting.server.services.RMRestService.doGetInternal
   (RMRestService.java:81)
       at
   com.ibm.rdm.fronting.server.services.RMRestService.runInternalMe
   thod(RMRestService.java:470)
       at
   com.ibm.rdm.fronting.server.services.RMRestService.handleMethod(
   RMRestService.java:403)
       at
   com.ibm.rdm.fronting.server.services.RMRestService.performServic
   e(RMRestService.java:339)
       at
   com.ibm.rdm.fronting.server.services.RMRestServiceBase.service(R
   MRestServiceBase.java:230)
       at
   com.ibm.rdm.fronting.server.services.RMBridgeService.service(RMB
   ridgeService.java:137)
       ...
   Caused by: java.lang.RuntimeException: Component Feature is
   enabled but a Project URI was submitted as the component URI.
   Could not safely compute the Component URI for the Type System
   as no local configuration was supplied and there may be >1
   Component associated with the Project..
       at
   com.ibm.rdm.fronting.server.services.types.internal.ProjectTypeS
   ystem.<init>(ProjectTypeSystem.java:210)
       at
   com.ibm.rdm.fronting.server.services.types.internal.ProjectTypeS
   ystem.<init>(ProjectTypeSystem.java:173)
       at
   com.ibm.rdm.fronting.server.services.types.internal.ProjectTypeS
   ystemProvider$TypeSystemLoader.load(ProjectTypeSystemProvider.ja
   va:207)
       at
   com.ibm.rdm.fronting.server.services.types.internal.ProjectTypeS
   ystemProvider$TypeSystemLoader.load(ProjectTypeSystemProvider.ja
   va:1)
       at
   com.google.common.cache.LocalCache$LoadingValueReference.loadFut
   ure(LocalCache.java:3524)
       at
   com.google.common.cache.LocalCache$Segment.loadSync(LocalCache.j
   ava:2317)
       at
   com.google.common.cache.LocalCache$Segment.lockedGetOrLoad(Local
   Cache.java:2280)
       at
   com.google.common.cache.LocalCache$Segment.get(LocalCache.java:2
   195)
       ... 73 more
   
   For more details refer to the following workitem on jazz.net:
   https://jazz.net/jazz03/resource/itemName/com.ibm.team.workitem. [https://jazz.net/jazz03/resource/itemName/com.ibm.team.workitem.]
   WorkItem/119420
   
   
    
   
   

LOCAL FIX
 *  n/a
   
   
    
   
   

PROBLEM SUMMARY
 *  ****************************************************************
   * USERS AFFECTED:                                              *
   * All users/environments are affected                          *
   ****************************************************************
   * PROBLEM DESCRIPTION:                                         *
   * When a changeset in RM is linked to a CCM work item, the     *
   * changeset editor attempts to load derived links and throws a *
   * Bad Request exception indicating issues when loading the     *
   * type system.                                                 *
   ****************************************************************
   * RECOMMENDATION:                                              *
   ****************************************************************
   
   
    
   
   

PROBLEM CONCLUSION
 *  This issue is fixed in the DOORS Next Generation 6.0.5 release.
   
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   PI90367
   
   
 * REPORTED COMPONENT NAME
   RATL DOORS NG
   
   
 * REPORTED COMPONENT ID
   5724W87NG
   
   
 * REPORTED RELEASE
   603
   
   
 * STATUS
   CLOSED UR1
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt / Xsystem
   
   
 * SUBMITTED DATE
   2017-11-16
   
   
 * CLOSED DATE
   2017-12-12
   
   
 * LAST MODIFIED DATE
   2017-12-12
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   RATL DOORS NG
   
   
 * FIXED COMPONENT ID
   5724W87NG
   
   

APPLICABLE COMPONENT LEVELS
 * R603 PSN
   UP