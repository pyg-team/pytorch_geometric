Title: IBM PK37624: DXR167E ASIDXXX WAS ISSUED INCORRECTLY. ALSO SRM ISSUING 15F    ABEND15F AND DUMPING IRLM ASID WITH TITLE SRM RECOVERY ENTERED - United States

Text:
z/os  A FIX IS AVAILABLE
Obtain the fix for this APAR


APAR STATUS
 * CLOSED AS PROGRAM ERROR.
    
   
   

ERROR DESCRIPTION
 * IF JOB IS CANCELED DURING EXECUTION OF IRLM REQUEST HANDLER,
   THERE IS A VERY NARROW WINDOW IRLM FRR FAILS TO FREE RHWKA AND
   IT REMAINS ALLOCATED.
   IRLM HEALTH CHECK ROUTINE DETECTS IT AND ISSUES DXR167E ASIDXXX.
   ALSO HEALTH CHECK ROUTINE INVALIDLY ISSUES DXR168I BECAUSE
   IT CHECKS FLAG INCORRECTLY. IRLM CONTINUOUSLY ISSUES DXR167E AND
   DXR168I TILL RE-RESTART IRLM.
   
    
   
   

LOCAL FIX

PROBLEM SUMMARY
 * ****************************************************************
   * USERS AFFECTED: ALL HIR2101 (IRLM210) AND HIR2220 (IRLM220) *
   * USERS. *
   ****************************************************************
   * PROBLEM DESCRIPTION: 1. MSGDXR167E AND MSGDXR168I ISSUED *
   * INCORRECTLY. *
   * 2. IRLM REMAINED UP WHILE DB2 WENT *
   * DOWN, MAY CAUSE SYSPLEX-WIDE HANG. *
   * 3. HANG AFTER A IRLM MODIFY COMMAND WAS *
   * ISSUED. *
   ****************************************************************
   * RECOMMENDATION: INSTALL CORRECTIVE SERVICE FOR APAR/PTF *
   ****************************************************************
   1 IRLM MAY ISSUE DXR167E FOR ASID INCORRECTLY:
   DXR167E IR1P001 IRLM HAS DETECTED A DELAY IN COMPLETION
   OF ASIDXXXX PROCESS
   THE ABOVE MESSAGE MAY APPEAR REPEATEDLY ON THE CONSOLE
   EVEN THOUGH ASIDXXXX MAY HAVE BEEN RECYCLED AND/OR THE
   TASK MAY HAVE BEEN CANCELLED. IRLM HAD ITS HEALTH CHECK
   FLAGS UP FOR AN INTERNAL WORKAREA FOR THIS JOB AND COULD
   NOT FREE THE WORKAREA CORRECTLY DURING ITS RECOVERY STEP.
   IT CAUSED THIS WORKAREA TO REMAIN ON THE CHAIN AND GET
   MONITORED. IRLM ISSUED DXR167E AND LATER DXR168I AFTER
   CERTAIN INTERVAL DUE TO ANOTHER ERROR WHERE THE COUNTERS
   WERE NOT UPDATED CORRECTLY.
   UNDER CERTAIN CASES, IRLM MAY ISSUE DPRIORITY MESSAGE:
   DXR167E DJ7P007 IRLM HAS DETECTED A DELAY IN COMPLETION
   OF DPRIORTY PROCESS
   THIS WAS DUE TO UN-SERIALIZED UPDATE TO IRLMS MAIN LATCH
   ACTIVITY COUNTER (RLMSTACN). IRLM CHECKS THE VALUE OF
   THIS COUNTER AND ISSUES MSGDXR167E(DPRIORITY) WHEN THERE
   IS NO MAIN LATCH ACTIVITY FOR ABOUT 60 SECONDS.
   
   2 IRLM MAY APPEAR HUNG DUE TO ITS INTERNAL USECOUNT BEING
   UP AND NOT CLEARED WHEN DB2 DOES DOWN. ON TERMINATION OF
   A CALLER THREAD, MVS MAY NOT DRIVE THE IRLMS FRR AND AS
   A RESULT IRLM IS UNABLE TO CLEAR THE USECOUNT AND OTHER
   INTERNAL LATCHES HELD FOR THE A REQUEST IN IRLM. FAILING
   THIS, NO OTHER REQUEST MAY GET THE INTERNAL LATCHES AND
   WORK MAY GET QUEUED UP ON IRLM QUEUES. IN A SYSPLEX, THIS
   MAY CAUSE A HANG UNTIL THIS IRLM MEMEBER IS RECYCLED.
   
   3. IRLM MAY BE APPEAR HUNG WHEN A MODIFY COMMAND IS ISSUED
   AND IT FINDS A ORPHANED CHILDPROP SCA STILL CHAINED ON
   RLMRBCHN. IRLM MAINLATCH IS NOT HELD. THIS SCA HAD BEEN
   TERMINATED UNDER CERTAIN CONDITIONS, BUT WAS STILL LEFT
   ON THE CHAIN. IRLM DID NOT POST AN ECB (RLMCBECB) FOR
   THE LAST MODIFY COMMAND AND QEDIT IS NOT ISSUED. THIS
   LOCKS THE CONSOLE AND NO FURTHER COMMANDS COULD BE ISSUED
   
    
   
   

PROBLEM CONCLUSION
 * AIDS: RIDS/IRLM RIDS/REQ IRLM IRLM/REQ
   DEP: RIDS/IRLM D/IRLM22 RIDS/IRLM D/IRLM21
   GEN:
   
   *** END IMS KEYWORDS ***
   THIS APAR FIXES THE IRLM HEALTH CHECK LOGIC. DXR167E AND DXR168I
   MESSAGES SHOULD APPEAR CORRECTLY NOW. IRLM HEALTH CHECK LOGIC
   NOW CHECKS FOR END-OF-MEMORY BEING DRIVEN FOR A TASK, AND IF
   IRLM WAS DRIVEN FOR EOM, IT WILL PERFORM THE RECOVERY STEPS
   AND CLEAR THE IRLM'S USECOUNT TO BRING IRLM TO A CONSISTENT
   STATE. IRLM ALSO IDENTIFIES AN ORPHANED SCA CASE FOR A CHILDPROP
   AND WILL ISSUE POST CORRECTLY FOR AN ECB FOR A MODIFY COMMAND.
   
    
   
   

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   PK37624
   
   
 * REPORTED COMPONENT NAME
   IRLM V2
   
   
 * REPORTED COMPONENT ID
   569516401
   
   
 * REPORTED RELEASE
   220
   
   
 * STATUS
   CLOSED PER
   
   
 * PE
   NoPE
   
   
 * HIPER
   YesHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2007-01-18
   
   
 * CLOSED DATE
   2007-05-17
   
   
 * LAST MODIFIED DATE
   2008-04-30
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
    UK25198 UK25199
   
   

Modules/Macros DXRRC170 DXRRC272 DXRRC750 DXRRLMCB DXRRL170 DXRRL272 DXRRL750 DXRRS170 DXRRS272 DXRRS750 FIX INFORMATION
 * FIXED COMPONENT NAME
   IRLM V2
   
   
 * FIXED COMPONENT ID
   569516401
   
   

APPLICABLE COMPONENT LEVELS
 * R101 PSY UK25198 [HTTPS://WWW14.SOFTWARE.IBM.COM/WEBAPP/SET2/ORDERMEDIA/SHOPCART?PTFS=UK25198]
   UP07/06/09 P F706
   
   
 * R220 PSY UK25199 [HTTPS://WWW14.SOFTWARE.IBM.COM/WEBAPP/SET2/ORDERMEDIA/SHOPCART?PTFS=UK25199]
   UP07/06/09 P F706
   
   

FIX IS AVAILABLE
 * SELECT THE PTF APPROPRIATE FOR YOUR COMPONENT LEVEL. YOU WILL BE REQUIRED TO SIGN IN. DISTRIBUTION ON PHYSICAL MEDIA IS NOT AVAILABLE IN ALL COUNTRIES.