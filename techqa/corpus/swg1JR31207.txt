Title: IBM JR31207: SAP JCA ADAPTER 6.1 / BAPI MODULE - JCO_ERROR_NULL_HANDLE WHILE REUSING POOL CONNECTION TO SAP. - United States

Text:
 SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS FIXED IF NEXT.
    
   
   

ERROR DESCRIPTION
 *  SAP JCA Adapter 6.1 / BAPI module / non-tx enabled Adapter.
   
   Description:
   
   - First a RFC_ERROR_COMMUNICATION occurs due to a timeout on SAP
     side.
   - Afterwards the adapter tries to reconnect to SAP and fails
     while the first RFCPing with a logon error.
   - After that Adapter is able to reconnect to SAP and to continue
     to work and to process new BAPI requests.
   - But sometimes later (this can be minutes or even hours)
     'suddenly' BAPI calls are failing with errors:
   
     + com.sap.mw.jco.JCO$Exception: (121)
        JCO_ERROR_NULL_HANDLE: Invalid rfc_handle = NULL
        encountered
   
     + DataBinding Exception thrown in
       J2CMethodBindingImpl.invoke()
       commonj.connector.runtime.DataBindingException: Failed in
       population return object
   
   Background:
   This subsequent errors happen as soon as the Adapter tries to
   re-use the connection from pool which had failed earlier while
   SAP timeout.
   When the pool has more than one connection then the Adapter can
   work for a longer time after reconnect. It will fail e.g. while
   next heavy load or delay on SAP side.
   
   
   This APAR is for the SAP Adapter part of this problem.
   
   
    
   
   

LOCAL FIX
 *  n/a
   
   
    
   
   

PROBLEM SUMMARY
 *  SAP JCA ADAPTER 6.1 / BAPI MODULE - JCO_ERROR_NULL_HANDLE
   REUSING POOL CONNECTION TO SAP. SAP Adapter is not handling
   stale connections in the pool. Adapter doing changes in Dec FP
   2008 to handle stale connections.
   
   
    
   
   

PROBLEM CONCLUSION

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   JR31207
   
   
 * REPORTED COMPONENT NAME
   WEBS ADAPT SAP
   
   
 * REPORTED COMPONENT ID
   5724L7900
   
   
 * REPORTED RELEASE
   610
   
   
 * STATUS
   CLOSED FIN
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2008-11-24
   
   
 * CLOSED DATE
   2008-12-18
   
   
 * LAST MODIFIED DATE
   2008-12-18
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION

APPLICABLE COMPONENT LEVELS
 * R610 PSY
   UP