Title: IBM Manage Users and Groups portlet does not create new objects with all required attributes - United States

Text:
manage; users; groups; objectclass; 65 - Object Class Violation; CWWIM4520E TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 IBM WebSphere Portal is successfully installed and configured against an enterprise LDAP server. Groups in your LDAP require a custom attribute. When utilizing the Manage Users and Groups portlet to create new groups in the LDAP, an LDAP error code 65 is observed and the group is not created. This Technote will document why this error occurs and how to workaround the error message. 

SYMPTOM
The SystemOut.log files will show the following error after attempting to create a group in the LDAP server via the Manage Users and Groups portlet. 

[datetime] 0000003b exception E
com.ibm.ws.wim.adapter.ldap.LdapConnection createSubcontext CWWIM4520E
The 'javax.naming.directory.SchemaViolationException: [LDAP: error code 65 - Object Class Violation]; remaining name 'cn=testgroupcreate,dc=example,dc=com';
resolved object com.sun.jndi.ldap.LdapCtx@2bbf2bbf' naming exception
occurred during processing.


CAUSE
This specific error occurs only in cases where a custom objectclass and mandatory attribute for that custom objectclass is required for a user and/or group in the LDAP server. Custom objectclasses without a mandatory attribute will not experience this error condition. 

 

This is a current limitation of the Manage Users and Groups portlet. Please open a feature request [https://www.ibm.com/developerworks/rfe/] if you would like to see this feature implemented in a future release of WebSphere Portal. Reference this Technote Number (1599057) when submitting the feature request. A workaround is available and noted in the Resolving the Problem section.


ENVIRONMENT
Any WebSphere Portal 7.0, 8.0 or 8.5 environment.



DIAGNOSING THE PROBLEM
Reviewing an LDIF export of a group from LDAP, the LDIF shows for the group shows: 


dn: cn=testgroup,dc=example,dc=com
myAtt: testgroup
cn: testgroup
objectClass: mygroupOC
objectClass: groupOfUniqueNames
objectClass: top


where
mygroupOC is a custom objectclass for the group
myAtt is a mandatory attribute for the custom objectclass



Review of the wimconfig.xml file shows the Group ldapEntityType to be correctly configured:

<config:ldapEntityTypes name="Group" searchFilter=""> 

 * 
 * 
 * 
 * 
 * 
 * mygroupOC
 * 

</config:ldapEntityTypes> 


Review of the wimxmlextension.xml shows the custom attribute to be correctly configured: 
<wim:propertySchema nsURI="http://www.ibm.com/websphere/wim" dataType="STRING" multiValued="false" propertyName=" myAtt"> 
<wim:applicableEntityTypeNames>Group</wim:applicableEntityTypeNames> 
</wim:propertySchema> 

RESOLVING THE PROBLEM
The limitation only applies to the Manage Users and Groups administration portlet in WebSphere Portal. The underlying Portal User Management Architecture (PUMA) and Virtual Member Manager (VMM) layers are able to implement this functionality. Therefore, it is possible to author custom code utilizing the PUMA API that will correctly create a new group in the LDAP. Psuedocode as follows: 


HashMap groupAttrs = new HashMap();
groupAttrs.put("cn","testgroupcreate");
groupAttrs.put("myAtt","testgroupcreate");
pumaController.createGroup("testgroupcreate", null, groupAttrs);


For more details and code examples utilizing the PUMA API, see the link titled PUMA sample scenarios at the end of this document, specifically referring to section 2.5, "Adding a group". 

 

 

Note, the content of this document was focused primarily on a group with a mandatory custom attribute. The same condition and solution can apply for a user with a mandatory custom attribute.

RELATED INFORMATION
 PUMA sample scnearios [http://www.ibm.com/developerworks/websphere/zones/portal/proddoc/dw-w-pumascenarios/index.html]


 


Cross reference information Segment Product Component Platform Version Edition Organizational Productivity- Portals & Collaboration WebSphere Portal End of Support Products AIX, HP-UX, IBM i, Linux, Solaris, Windows, z/OS 7.0, 6.1