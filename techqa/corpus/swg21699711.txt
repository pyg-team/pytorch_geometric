Title: IBM How can I check if the correct data is being logged on my Guardium Appliance ? - United States

Text:
 TECHNOTE (FAQ)

QUESTION
 How can I check if the correct data is being logged on my Guardium Collector? 
Can I check if my Guardium Policy is excluding that data from being logged ? 

CAUSE
You have some DB Servers with STAPs sending data to a Guardium Collector and you wish to check if certain data is being logged into the Guardium Appliance . 
In your reports you can't see the data you expect and you want to make some basic checks to isolate the problem. 


ANSWER
 



YouTube Video How can I check if the correct data is being logged on my Guardium Appliance? (11.53) Use specific Guardium GUI reports to check the data being logged on a Guardium Appliance . Watch the video on YouTube [https://www.youtube.com/watch?v=WS8WnwJnutk&index=8&list=PLFip581NcL2WzC2LpTMT28rml3br5WO9V] (11.53)  

 

 

Some detail from the video 

 

There are some pre-defined reports that can be used to view certain data - for example in v9 

View -> DB Activities -> Database Servers -> Servers Accessed 


[/support/docview.wss?uid=swg21699711&aid=1] [/support/docview.wss?uid=swg21699711&aid=1]
figure 1 - a pre-defined report (Servers Accessed)

The same report can be found in v10 Investigate -> Report Builder or added to a new dashboard in My Dashboards 

Some drill down is also available on reports when double clicking any row in v9 or right clicking in v10. 

As well as the above pre-defined reports - here are 4 basic reports that can be imported into your system and then tailored to make the necessary checks. 


These reports can be imported into your v9.1, v9.5 or v10 appliance. You will receive a compatibility warning when importing into v10 which is expected. Once imported, the reports are configurable as normal. 

 

Report to Download and Import


Report Name Purpose IBM_Sessions_report.sql [/support/docview.wss?uid=swg21699711&aid=3]IBM_Sessions_report.sql [/support/docview.wss?uid=swg21699711&aid=2] -IBM Sessions Provides a report of all recent sessions logged in reverse session date order (most recent first) - shows specific Client Server Information IBM_Sessions_Count_report.sql [/support/docview.wss?uid=swg21699711&aid=5]IBM_Sessions_Count_report.sql [/support/docview.wss?uid=swg21699711&aid=4] -IBM Sessions Count Provides a report of all recent session counts - shows specific Client Server Information IBM_Full_SQL_report.sql [/support/docview.wss?uid=swg21699711&aid=7]IBM_Full_SQL_report.sql [/support/docview.wss?uid=swg21699711&aid=6] -IBM Full SQL Provides a report of all recent sessions which have the Full SQL logged in reverse session date order (most recent first) - shows specific Client Server Information IBM_Full_SQL_Count_report.sql [/support/docview.wss?uid=swg21699711&aid=9]IBM_Full_SQL_Count_report.sql [/support/docview.wss?uid=swg21699711&aid=8] -IBM Full SQL Count Provides a report of all recent session counts and Full SQL counts where the Full SQL has been logged - shows specific Client Server Information 
1. Import the .sql files above from 
v9 GUI -> Administration Console -> Guardium Definitions -> Import. 
v10 GUI -> Manage -> Data Management -> Definitions Import. 
This must be done on the Central Manager if one exists in the environment. 

2. Add the report to a v9 pane from Tools -> Report Building -> Access Tracking. 
Pick a report - and then once the report definition comes up - click "Add to Pane" - and add to eg "Daily Monitor"  * 
 * [/support/docview.wss?uid=swg21699711&amp;aid=10]
 * 
 * figure 2 - picking one of the reports just imported in v9


You can then access and run these reports at any time from that Daily Monitor pane. 

In v10 use My Dashboards, create a new dashboard and add the reports.  

-IBM Sessions report 

 * 
 * 
 * Note - For any Policy all session information (log in / log outs) are always logged ( even if a rule is in place which will IGNORE S-TAP SESSION) - This report can be used to check basic session data is being captured from whichever DB Server / Database you are interested in. - reports in reverse session date order 
 * 
   [/support/docview.wss?uid=swg21699711&aid=11] [/support/docview.wss?uid=swg21699711&aid=11]
   figure 3 - report showing a list of sessions logged on the appliance 
 * 


-IBM Sessions Count report  * 
 * 
 * 
   [/support/docview.wss?uid=swg21699711&aid=12] [/support/docview.wss?uid=swg21699711&aid=12]
   figure 4 - report showing a count of sessions logged on the appliance per Client/Server detail 
 *  


- IBM Full SQL report  * 
 * 
 * A pre-requisite is that full details are being logged ( ie -a rule in the Policy is set to "LOG FULL DETAILS" ) then the following report can be used to check the sql statements being logged. 
 * 
   [/support/docview.wss?uid=swg21699711&aid=13] [/support/docview.wss?uid=swg21699711&aid=13]
   figure 5 - report showing a list of Full SQL logged on the appliance ( * it is logged so long as a LOG FULL DETAILS rule is within the Policy ) 
   


-IBM Full SQL Count report 

 * 
 * 
 * 
   [/support/docview.wss?uid=swg21699711&aid=14] [/support/docview.wss?uid=swg21699711&aid=14]
   figure 6 - report showing a count of Full SQL logged on the appliance per Client/Server detail ( * it is logged so long as a LOG FULL DETAILS rule is within the Policy ) 


These reports can be edited, cloned and re-saved as per normal - Parameters can be changed at any time 

 

Changing Report Parameters - Tips 

 * 
 * Run Time Parameters
 *  
   For these queries the QUERY_FROM_DATE and QUERY_TO_DATE can be changed to limit to show just the recent 3 minutes data for example  * 
    * 
    *  [/support/docview.wss?uid=swg21699711&amp;aid=15] [/support/docview.wss?uid=swg21699711&amp;aid=16] 
    * 
    * 
    *  [/support/docview.wss?uid=swg21699711&amp;aid=17] 
   
   
 * Report Parameters 
 *  
   Any of the Fields can be used to set a condition as normal and the report can the be re-saved and re-run - for example to restrict for a specific ServerIP ...  * 
    * 
    *  
      [/support/docview.wss?uid=swg21699711&amp;aid=18] [/support/docview.wss?uid=swg21699711&amp;aid=19] 
    * 
    * 
    *  
      [/support/docview.wss?uid=swg21699711&aid=20] [/support/docview.wss?uid=swg21699711&aid=20] 
   
   

Is there a Policy Problem ? 

 * 
 * 
 *  
 *  is the STAP for the specific DB Server connecting and sending data ( does the STAP show as green / active in the System View or System Monitor ? ) 
 * 
 *   *   * If the STAP is inactive see - What to do if you get Guardium "Inactive S-TAPs Since" alerts [http://www-01.ibm.com/support/docview.wss?uid=swg21698838] 
         
         
      
      
   
   
 *  
 *  if the STAP is active and sending data - then a Policy Rule could be excluding specific data from being logged . 
 * 
 *   * 
    *  LOG FULL DETAILS
    * 
    * 
    * 
    * Warning!
    * 
    * LOG FULL DETAILS
    * 
    * 
    * If doing that proves that the data can be logged - then you will know that the Policy is to blame and somewhere there will be a rule that is filtering the data and excluding it from being logged.
   
   
   
 * 
 * *Note 
 * 

RELATED INFORMATION
 Guardium reports are not showing any data [http://www.ibm.com/support/docview.wss?uid=swg21679901]