Title: IBM Unable to add users to admin namespace: CAM-AAA-0045 Error - United States

Text:
 TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 When adding users in admin namespace or trying to expand admin namespace in Cognos Admin Security portal, an error message is logged and displayed. This is true for Cognos Consumer Insight instances configured with a certain version of OpenLDAP. However, the user can still login to Cognos connection without errors. 

SYMPTOM
CAM-AAA-0045 The call to the LDAP function 'doLDAPSearch_s/LdapAPIWrapper_ldap_search_ext_s' returned with the error code: '18'. Inappropriate matching


CAUSE
 The issue is caused by OpenLDAP side issues, specifically around Server Side Sorting features. 

Recent OpenLDAP Linux binary (2.4.20) has added a "server side sorting" overlay by Novell. This feature allows OpenLDAP to sort the result set of a search on the server rather than the client. It is most likely to happen in Cognos Consumer Insight instances deployed on top of SLES 11 SP1, in which Novell enabled SSO overlay. 
The IBM Cognos 8.4.1 BI LDAP provider detects the presence of this LDAP control upon initialization of the LDAP namespace and uses it to improve search performance. The LDAP control returns an error code to the client which causes IBM Cognos BI to cancel the request and display the above error message. 


ENVIRONMENT
This occurs with OpenLDAP 2.4.20 and Cognos Consumer Insight deployed with Cognos 8.4.1.



DIAGNOSING THE PROBLEM
If unsure whether an instance of OpenLDAP offers the server side LDAP control, attach to the RootDSE of the OpenLDAP instance using some LDAP browser and look at the supportedControl attribute. If one of it's values matches OID 1.2.840.113556.1.4.473 it does offer that control. 



RESOLVING THE PROBLEM
Do one of the following things: 

1. Upgrade to SuSE 11 SP2.
2. Use a binary of OpenLDAP which does not have the server side sort control. OpenLDAP 2.4.19 and earlier versions have no issue. 
3. Use a different LDAP V3 compliant LDAP 


RELATED INFORMATION
#SLES 11 SP1 release notes [http://www.novell.com/linux/releasenotes/i386/SUSE-SLES/11-SP1/#rnotes-other-updates]