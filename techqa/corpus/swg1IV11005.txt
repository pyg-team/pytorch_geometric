Title: IBM IV11005: DATABASE CONNECTIVITY IS BROKEN BETWEEN DMS AND THE PROVISIONING DATABASE SERVER - United States

Text:
  FIXES ARE AVAILABLE
Tivoli Provisioning Manager, Interim Fix 7.2.1.0-TIV-TPM-RP00001 [http://www-01.ibm.com/support/docview.wss?uid=swg24037039]
Tivoli Provisioning Manager, Interim Fix 7.2.1.0-TIV-TPM-IF00006 [http://www-01.ibm.com/support/docview.wss?uid=swg24037256]


SUBSCRIBE
You can track all active APARs for this component.



APAR STATUS
 * CLOSED AS FIXED IF NEXT.
    
   
   

ERROR DESCRIPTION
 *  When the database connectivity is broken between Device Manager
   Server and the provisioning database server, DMS tries to create
   multiple threads to handle database query related operations. If
   this error is not fixed for a long time, new thread creation in
   Device Manager Server will ultimately lead to an out of memory
   error.
   
   Different errors are recorded, depending on environment. These
   errors are recorded in
   WAS_HOME\profiles\ctgAppSrv01\logs\MXServer\TraceDMS.log
   
   Example 1: The wrong user name or password is specified in the
   DMS transaction.properties file.
   ----------------------------------------------------------------
   ----------------------------------------------------------------
   ------
   DYM2794E: Failed to create the database connection pool. See
   nested exception for details. : DYA1006E An unknown error
   occurred. : com.ibm.db2.jcc.b.ao:
   [jcc][t4][2013][11249][3.53.70] Connection authorization failure
   occurred. Reason: User ID or Password invalid. ERRORCODE=-4214,
   SQLSTATE=28000
   
   Example 2: The wrong database server host name is specified in
   the DMS transaction.properties file.
   ----------------------------------------------------------------
   ----------------------------------------------------------------
   -----------
   DYM2794E: Failed to create the database connection pool. See
   nested exception for details. : DYA1006E An unknown error
   occurred. : com.ibm.db2.jcc.b.bo:
   [jcc][t4][10380][11951][3.53.70] Required property "localhosts"
   is unknown host. ERRORCODE=-4222, SQLSTATE=08001
   
   Example 3: The wrong database server port is specified in the
   DMS transaction.properties file.
   ----------------------------------------------------------------
   ----------------------------------------------------------------
   -----------
   DYM2794E: Failed to create the database connection pool. See
   nested exception for details. : DYA1006E An unknown error
   occurred. : com.ibm.db2.jcc.b.tn:
   [jcc][t4][2043][11550][3.53.70] Exception
   java.net.ConnectException: Error opening socket to server
   localhost/127.0.0.1 on port 50,001 with message: Connection
   refused: connect. ERRORCODE=-4499, SQLSTATE=08001
   
   
    
   
   

LOCAL FIX
 *  Check the content of the transaction.properties file. This file
   is available at:
   WAS_HOME\profiles\ctgAppSrv01\installedApps\ctgCell01\DMS_WebApp
   .ear\dmserver.war\WEB-INF\classes. This file has following
   properties:
   
         JDBC.dbUser - Database user name. Verify if this is the
   correct value.
   
         JDBC.dbPassword - Database user password. This can be
   specified in clear text format, such as
   JDBC.dbPassword=password. The next Tivoli Provisioning Manager
   application server restart will decrypt this value.
   
         JDBC.dbConnect - Database connection URL. Verify if this
   URL contains the correct host name and port number value.
   
   
   After making changes to this file, restart the provisioning
   server for the new settings to go into effect.
   
   
    
   
   

PROBLEM SUMMARY
 *  Out of memory exception will are observed if DMS is working
   on incorrect DB credentials with Oracle backend.
   
   
   
   This problem is resolved in TPM 7.2.1.0-IF00003 release.
   
   
    
   
   

PROBLEM CONCLUSION

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   IV11005
   
   
 * REPORTED COMPONENT NAME
   TIV PROVISIONIN
   
   
 * REPORTED COMPONENT ID
   5608TPM00
   
   
 * REPORTED RELEASE
   200
   
   
 * STATUS
   CLOSED FIN
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2011-11-18
   
   
 * CLOSED DATE
   2012-08-06
   
   
 * LAST MODIFIED DATE
   2012-08-06
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION
 * FIXED COMPONENT NAME
   DEVICE MGMT SRV
   
   
 * FIXED COMPONENT ID
   TIVODMS00
   
   

APPLICABLE COMPONENT LEVELS
 * R200 PSY
   UP