Title: IBM Handling errors in a Windows or Unix batch, using the return code of Transformer.exe or rsserver - United States

Text:
 TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 How to automatically determine if a cube build has succeeded ?
What are the exit codes sent by Transformer at the end of the cube generation ?
And how to automate actions depending on these exit status ? 

RESOLVING THE PROBLEM
Trnsfrmr.exe on Windows and rsserver on Unix are both sending an exit code value of 0 if everything went fine, and non-zero if an error has occurred (not necessarily "1")

Here are some MS-DOS sripts and Unix shells samples to treat these return codes :

-------------
For Windows
-------------
cd <drive>:\Program Files\Cognos\cer5\bin
trnsfrmr.exe -n2 -s -i -nologo <drive>:\<model_dir>\<filename>.mdl
if not errorlevel 0 goto error
:noerror
echo No error was encountered
pause
goto end
:error
<place some actions here if you want>
echo Error - See log file for more informations
pause
:end

-------------
For Unix :
-------------
In this first example, the 'if' statement executes the RSSERVER command and then checks its exit status; if the status is zero, it executes 'then' block, otherwise 'else' block.

In Bourne shell:
#!/bin/sh
...
if rsserver
then
# do something if exit status is 0
else
# do something else
fi

In the second example below, the special environment variable $? always holds the exit status of the last command. You can use 'case' statement to execute special command blocks for every possible exit code.

rsserver
case $? in
0) ;;
1) ;;
...
*) echo "Unexpected exit status from rsserver"
esac

In Korn shell:
#!/bin/ksh
...
if [ rsserver ]; then
# do something
else
#do something else
fi
or use $? as in Bourne shell.

In C shell:
if ( rsserver ) then
# do something
else
# do something else
endif

or use $status together with switch statement:

rsserver
switch ($status)
case 0:
# do something
breaksw
case 1:
# do something
breaksw
...
default:
"Unexpected exit status from rsserver"
breaksw
endsw

 

HISTORICAL NUMBER
 1033796