Title: IBM Login error on secondary TIP/TCR node - United States

Text:
cluster tip tcr credentials valid ldap gateway dispatcher URI Content Manager TCR TECHNOTE (TROUBLESHOOTING)

PROBLEM(ABSTRACT)
 Users can log on to primary TIP server and access TCR reports but can't logon on the secondary TIP.
When primary TIP/TCR node is stopped, then users are able to logon on the secondary TIP and access TCR reports. 

SYMPTOM
Login attempt fails with the following error message: 

The user or password you provided is not valid.Provide valid credentials


CAUSE
The problem scenario occurs in environment where two TIP/TCR nodes are accessing the same content store database, configured in HADR and with TSA Clustering enabled.
The users can log on to primary TIP server and access reports but can't logon on the secondary.
But when the primary TIP is stopped, the content manager on secondary take the role of primary (previously standby) and the users can access the TCR reports.
So at any point of time, users can access reports only from the server that is acting as primary (Content Manager).
Users can access the TCR reports from the second node using the Dispatcher URI:
E.G.

http://secondTCRNodeName:16310/tarf/servlet/dispatch


RESOLVING THE PROBLEM
In a similar implementation (two standalone TIP/TCR accessing the same Content Store database), it is important to have correct configuration within cogstartup.xml file, in order to allow Cognos Content Manager and Dispatcher to know about the other node. 

Usually, in a standalone configuration, lot of URIs are defined using localhost instead of the real hostname. 

This must not occur if you have two TCR nodes using the same Content Store DB.
In Cognos configuration file (cogstartup.xml) both the machines' dispatchers should be configured for parameter name gatewayDispatcherURIList.

This one is the default configuration.

<crn:parameter name="gatewayDispatcherURIList" opaque="true"> 
<crn:value xsi:type="cfg:sortedArray"> 
<crn:item xsi:type="xsd:anyURI" 
order="0">
http://localhost:16310/tarf/servlet/dispatch/ext
</crn:item>
</crn:value>
</crn:parameter>


It should be changed to look like the following, on both machines:

<crn:parameter name="gatewayDispatcherURIList" opaque="true">
<crn:value xsi:type="cfg:sortedArray">
<crn:item xsi:type="xsd:anyURI" order="0">
http://Node1:16310/tarf/servlet/dispatch/ext
</crn:item>
<crn:item xsi:type="xsd:anyURI" order="1">
http://Node2:16310/tarf/servlet/dispatch/ext
</crn:item>
</crn:value>
</crn:parameter>

After having changed the cogstartup.xml file, restart TCR server nodes and verify if problem is fixed.

If, despite above changes, it still does not work, it may depend on LDAP configuration.
This behavior has been also observed when multiple LDAP's are configured and one is acting as failover LDAP. 

It occurs because the login user is not present in primary LDAP, but it is instead only defined in the failover LDAP.
Try removing the failover LDAP by using the WebSphere administrative console and then restart the two nodes, or, be sure that the users have been defined in the same way in the primary and secondary LDAP nodes.

 

PRODUCT ALIAS/SYNONYM
 Tivoli Common Reporting V2.1.x