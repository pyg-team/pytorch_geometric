Title: IBM PK46306: WCM MIGRATION TO V6.0.X FAILS WITH REFERENTIALINTEGRITYEXCEPTION IN UPDATEITEMS OF PLS DATA MANAGER IWKMU1062X - United States

Text:
 
APAR STATUS
 * CLOSED AS FIXED IF NEXT.
    
   
   

ERROR DESCRIPTION
 *  When Migrating to WCM version 6.x from previous versions
   customer's may encounter ReferentialIntergrityException
   IWKMu1062X:
   STACK FROM MIGRATION LOGS INCLUDE:
   WARNING: Import system problem encountered; skipping item and
    continuing
   May 18, 2007 11:02:20 AM com.ibm.workplace.app.migration
   FINE: Import system problem encountered; skipping item and
   continuing com.ibm.workplace.wcm.app.migration.importer.
   ImportException: Failed to  import data file: . . .xml
    at
   com.ibm.workplace.wcm.app.migration.importer.data.tasks.
   LoadPublishedItemsTask.processFile
   (LoadPublishedItemsTask.java:190)
   Caused by: com.ibm.workplace.wcm.app.migration.importer.
   ImportException: Failed to version item: item_name
   
   Caused by:
   com.ibm.workplace.wcm.services.repository.
   ReferentialIntegrityException: IWKMU1062X: Message: Could
   not save object in repository., Cause: javax.jcr.
   ReferentialIntegrityException: Error while calling a function
   updateItems of PLS data manager.: Error while calling a
   function updateItems of PLS data manager.
    at
   com.ibm.workplace.wcm.services.transaction.steps.versioning.
   VersionNode.versionNode(VersionNode.java:301)
   .
   In addition the systemOut shows:
   SYSTEM OUT
   Caused by: com.ibm.icm.da.DBAccessException: [ErrorCode:10026]
   Error, the reference property must be in the same workspace of
   thenode itself
   UUID:
   .
   This problem is caused when the default content of a site
   area has it's workflow restarted. This was allowed on version
   5.1, even though the site area has a reference to the content,
   however the reference cannot be saved in 6.0.x.
   .
   Migration needs to be updated to clear the reference.
   KEYWORDS:  MIGRATION PLS DBAccessException 10026 IWKMU1062X
              ReferentialIntegrityException updateItems
   
   
    
   
   

LOCAL FIX
 *  delete the m_launch element out of the XML for the site area and
   then resume the import.
   
   
    
   
   

PROBLEM SUMMARY
 *  There are many scenarios in WCM 5.1.x and earlier versions where
   referential integrity can be violated. Migration needs to detect
   cases and clear the broken references. Also, migration should co
   resolve component references and references to alternate designs
   menus and navigators for correct functioning of the menus and
   navigators.
   Also see later APAR PK48190 [http://www-01.ibm.com/support/docview.wss?uid=swg1PK48190].  Applly PK48190 [http://www-01.ibm.com/support/docview.wss?uid=swg1PK48190] PK48960 [http://www-01.ibm.com/support/docview.wss?uid=swg1PK48960] & PK49060 [http://www-01.ibm.com/support/docview.wss?uid=swg1PK49060]
   to address the defect reported in PK46306.  PK48190 [http://www-01.ibm.com/support/docview.wss?uid=swg1PK48190] was opened
   to cover the same issue.
   
   
    
   
   

PROBLEM CONCLUSION

TEMPORARY FIX

COMMENTS

APAR INFORMATION
 * APAR NUMBER
   PK46306
   
   
 * REPORTED COMPONENT NAME
   WRKPLC WEB CON
   
   
 * REPORTED COMPONENT ID
   5724I2900
   
   
 * REPORTED RELEASE
   601
   
   
 * STATUS
   CLOSED FIN
   
   
 * PE
   NoPE
   
   
 * HIPER
   NoHIPER
   
   
 * SPECIAL ATTENTION
   NoSpecatt
   
   
 * SUBMITTED DATE
   2007-06-01
   
   
 * CLOSED DATE
   2007-07-20
   
   
 * LAST MODIFIED DATE
   2007-07-20
   
   

 * APAR IS SYSROUTED FROM ONE OR MORE OF THE FOLLOWING:
   
   
   
 * APAR IS SYSROUTED TO ONE OR MORE OF THE FOLLOWING:
   
   
   

FIX INFORMATION

APPLICABLE COMPONENT LEVELS
 * R60E PSY
   UP